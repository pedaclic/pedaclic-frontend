import{a as Cf,b as Yq,g as oi,r as g,u as Ze,c as Fb,L as Re,d as yn,e as bA,f as yA,R as Kq,h as Wq,i as qe,N as $d,j as Xq,B as Zq}from"./vendor-react-BMsfgiGx.js";import{i as Jq,g as e3,a as t3,p as r3,b as n3,c as a3,o as i3,d as je,u as Ge,s as Et,e as s3,f as l3,h as o3,G as c3,j as u3,k as d3,l as gt,m as lu,w as Se,n as Ve,q as Gt,r as Ee,t as _e,v as Ce,x as Rn,T as Ae,y as Gr,z as Ef,A as Dt,B as sr,C as Ls,D as $s,E as qn,F as as,H as Gb,I as m3,J as ou}from"./vendor-firebase-LntcAirY.js";import{H as Ox,B as gn,F as f3,G as Bs,S as vr,L as E1,a as p3,C as Us,b as Pc,D as jA,c as xm,U as h3,d as v3,e as A1,X as Ki,M as g3,f as cm,g as x3,P as b3,h as y3,i as j3,j as _3,k as Hb,l as um,m as N3,n as S3,T as w3,I as C3,o as E3,Y as A3,A as Os,p as io,q as Bt,Z as _A,r as NA,s as mo,t as ts,u as bm,v as Mc,w as SA,x as Vb,y as Dx,E as oo,z as z3,J as z1,K as k3,N as O3,O as D3,R as P3,Q as M3,V as T3,W as Tc,_ as ym,$ as Iv,a0 as q3,a1 as R3,a2 as Px,a3 as Lv,a4 as $v,a5 as I3,a6 as L3,a7 as $3,a8 as B3,a9 as U3}from"./vendor-icons-B5C-ccqU.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var Bv={exports:{}},yc={};var k1;function F3(){if(k1)return yc;k1=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(a,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:u,ref:l!==void 0?l:null,props:o}}return yc.Fragment=r,yc.jsx=n,yc.jsxs=n,yc}var O1;function G3(){return O1||(O1=1,Bv.exports=F3()),Bv.exports}var t=G3(),Uv={exports:{}},jc={},Fv={exports:{}},Gv={};var D1;function H3(){return D1||(D1=1,(function(e){function r(q,U){var I=q.length;q.push(U);e:for(;0<I;){var te=I-1>>>1,L=q[te];if(0<l(L,U))q[te]=U,q[I]=L,I=te;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var U=q[0],I=q.pop();if(I!==U){q[0]=I;e:for(var te=0,L=q.length,Z=L>>>1;te<Z;){var W=2*(te+1)-1,ce=q[W],xe=W+1,he=q[xe];if(0>l(ce,I))xe<L&&0>l(he,ce)?(q[te]=he,q[xe]=I,te=xe):(q[te]=ce,q[W]=I,te=W);else if(xe<L&&0>l(he,I))q[te]=he,q[xe]=I,te=xe;else break e}}return U}function l(q,U){var I=q.sortIndex-U.sortIndex;return I!==0?I:q.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var m=[],p=[],h=1,v=null,b=3,x=!1,j=!1,_=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function A(q){for(var U=n(p);U!==null;){if(U.callback===null)a(p);else if(U.startTime<=q)a(p),U.sortIndex=U.expirationTime,r(m,U);else break;U=n(p)}}function z(q){if(_=!1,A(q),!j)if(n(m)!==null)j=!0,k||(k=!0,T());else{var U=n(p);U!==null&&P(z,U.startTime-q)}}var k=!1,M=-1,D=5,$=-1;function B(){return C?!0:!(e.unstable_now()-$<D)}function H(){if(C=!1,k){var q=e.unstable_now();$=q;var U=!0;try{e:{j=!1,_&&(_=!1,E(M),M=-1),x=!0;var I=b;try{t:{for(A(q),v=n(m);v!==null&&!(v.expirationTime>q&&B());){var te=v.callback;if(typeof te=="function"){v.callback=null,b=v.priorityLevel;var L=te(v.expirationTime<=q);if(q=e.unstable_now(),typeof L=="function"){v.callback=L,A(q),U=!0;break t}v===n(m)&&a(m),A(q)}else a(m);v=n(m)}if(v!==null)U=!0;else{var Z=n(p);Z!==null&&P(z,Z.startTime-q),U=!1}}break e}finally{v=null,b=I,x=!1}U=void 0}}finally{U?T():k=!1}}}var T;if(typeof S=="function")T=function(){S(H)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=H,T=function(){J.postMessage(null)}}else T=function(){w(H,0)};function P(q,U){M=w(function(){q(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(q){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var I=b;b=U;try{return q()}finally{b=I}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(q,U){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var I=b;b=q;try{return U()}finally{b=I}},e.unstable_scheduleCallback=function(q,U,I){var te=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?te+I:te):I=te,q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=I+L,q={id:h++,callback:U,priorityLevel:q,startTime:I,expirationTime:L,sortIndex:-1},I>te?(q.sortIndex=I,r(p,q),n(m)===null&&q===n(p)&&(_?(E(M),M=-1):_=!0,P(z,I-te))):(q.sortIndex=L,r(m,q),j||x||(j=!0,k||(k=!0,T()))),q},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(q){var U=b;return function(){var I=b;b=U;try{return q.apply(this,arguments)}finally{b=I}}}})(Gv)),Gv}var P1;function V3(){return P1||(P1=1,Fv.exports=H3()),Fv.exports}var M1;function Q3(){if(M1)return jc;M1=1;var e=V3(),r=Cf(),n=Yq();function a(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(o(i)!==i)throw Error(a(188))}function p(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(a(188));return s!==i?null:i}for(var c=i,f=s;;){var y=c.return;if(y===null)break;var N=y.alternate;if(N===null){if(f=y.return,f!==null){c=f;continue}break}if(y.child===N.child){for(N=y.child;N;){if(N===c)return m(y),i;if(N===f)return m(y),s;N=N.sibling}throw Error(a(188))}if(c.return!==f.return)c=y,f=N;else{for(var O=!1,R=y.child;R;){if(R===c){O=!0,c=y,f=N;break}if(R===f){O=!0,f=y,c=N;break}R=R.sibling}if(!O){for(R=N.child;R;){if(R===c){O=!0,c=N,f=y;break}if(R===f){O=!0,f=N,c=y;break}R=R.sibling}if(!O)throw Error(a(189))}}if(c.alternate!==f)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?i:s}function h(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=h(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function T(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var Y=Symbol.for("react.client.reference");function J(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Y?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _:return"Fragment";case w:return"Profiler";case C:return"StrictMode";case z:return"Suspense";case k:return"SuspenseList";case $:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case j:return"Portal";case S:return i.displayName||"Context";case E:return(i._context.displayName||"Context")+".Consumer";case A:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return s=i.displayName||null,s!==null?s:J(i.type)||"Memo";case D:s=i._payload,i=i._init;try{return J(i(s))}catch{}}return null}var P=Array.isArray,q=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},te=[],L=-1;function Z(i){return{current:i}}function W(i){0>L||(i.current=te[L],te[L]=null,L--)}function ce(i,s){L++,te[L]=i.current,i.current=s}var xe=Z(null),he=Z(null),F=Z(null),ve=Z(null);function Pe(i,s){switch(ce(F,s),ce(he,i),ce(xe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?WN(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=WN(s),i=XN(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}W(xe),ce(xe,i)}function ue(){W(xe),W(he),W(F)}function ee(i){i.memoizedState!==null&&ce(ve,i);var s=xe.current,c=XN(s,i.type);s!==c&&(ce(he,i),ce(xe,c))}function V(i){he.current===i&&(W(xe),W(he)),ve.current===i&&(W(ve),vc._currentValue=I)}var de,we;function Te(i){if(de===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);de=s&&s[1]||"",we=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+i+we}var Xe=!1;function tt(i,s){if(!i||Xe)return"";Xe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(fe){var oe=fe}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(fe){oe=fe}i.call(ye.prototype)}}else{try{throw Error()}catch(fe){oe=fe}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(fe){if(fe&&oe&&typeof fe.stack=="string")return[fe.stack,oe.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=f.DetermineComponentFrameRoot(),O=N[0],R=N[1];if(O&&R){var G=O.split(`
`),le=R.split(`
`);for(y=f=0;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;for(;y<le.length&&!le[y].includes("DetermineComponentFrameRoot");)y++;if(f===G.length||y===le.length)for(f=G.length-1,y=le.length-1;1<=f&&0<=y&&G[f]!==le[y];)y--;for(;1<=f&&0<=y;f--,y--)if(G[f]!==le[y]){if(f!==1||y!==1)do if(f--,y--,0>y||G[f]!==le[y]){var ge=`
`+G[f].replace(" at new "," at ");return i.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",i.displayName)),ge}while(1<=f&&0<=y);break}}}finally{Xe=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Te(c):""}function lt(i,s){switch(i.tag){case 26:case 27:case 5:return Te(i.type);case 16:return Te("Lazy");case 13:return i.child!==s&&s!==null?Te("Suspense Fallback"):Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return tt(i.type,!1);case 11:return tt(i.type.render,!1);case 1:return tt(i.type,!0);case 31:return Te("Activity");default:return""}}function rr(i){try{var s="",c=null;do s+=lt(i,c),c=i,i=i.return;while(i);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var kr=Object.prototype.hasOwnProperty,Or=e.unstable_scheduleCallback,sn=e.unstable_cancelCallback,pe=e.unstable_shouldYield,Oe=e.unstable_requestPaint,Le=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,dt=e.unstable_ImmediatePriority,Rt=e.unstable_UserBlockingPriority,nr=e.unstable_NormalPriority,sa=e.unstable_LowPriority,Dr=e.unstable_IdlePriority,Pr=e.log,ae=e.unstable_setDisableYieldValue,K=null,ie=null;function Ne(i){if(typeof Pr=="function"&&ae(i),ie&&typeof ie.setStrictMode=="function")try{ie.setStrictMode(K,i)}catch{}}var Qe=Math.clz32?Math.clz32:Mr,At=Math.log,Qr=Math.LN2;function Mr(i){return i>>>=0,i===0?32:31-(At(i)/Qr|0)|0}var la=256,cl=262144,ul=4194304;function Ea(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function dl(i,s,c){var f=i.pendingLanes;if(f===0)return 0;var y=0,N=i.suspendedLanes,O=i.pingedLanes;i=i.warmLanes;var R=f&134217727;return R!==0?(f=R&~N,f!==0?y=Ea(f):(O&=R,O!==0?y=Ea(O):c||(c=R&~i,c!==0&&(y=Ea(c))))):(R=f&~N,R!==0?y=Ea(R):O!==0?y=Ea(O):c||(c=f&~i,c!==0&&(y=Ea(c)))),y===0?0:s!==0&&s!==y&&(s&N)===0&&(N=y&-y,c=s&-s,N>=c||N===32&&(c&4194048)!==0)?s:y}function Hn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Cp(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function re(){var i=ul;return ul<<=1,(ul&62914560)===0&&(ul=4194304),i}function Be(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function ft(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function jn(i,s,c,f,y,N){var O=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var R=i.entanglements,G=i.expirationTimes,le=i.hiddenUpdates;for(c=O&~c;0<c;){var ge=31-Qe(c),ye=1<<ge;R[ge]=0,G[ge]=-1;var oe=le[ge];if(oe!==null)for(le[ge]=null,ge=0;ge<oe.length;ge++){var fe=oe[ge];fe!==null&&(fe.lane&=-536870913)}c&=~ye}f!==0&&ml(i,f,0),N!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=N&~(O&~s))}function ml(i,s,c){i.pendingLanes|=s,i.suspendedLanes&=~s;var f=31-Qe(s);i.entangledLanes|=s,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function ds(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var f=31-Qe(c),y=1<<f;y&s|i[f]&s&&(i[f]|=s),c&=~y}}function Mj(i,s){var c=s&-s;return c=(c&42)!==0?1:Ep(c),(c&(i.suspendedLanes|s))!==0?0:c}function Ep(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ap(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Tj(){var i=U.p;return i!==0?i:(i=window.event,i===void 0?32:y1(i.type))}function qj(i,s){var c=U.p;try{return U.p=i,s()}finally{U.p=c}}var xi=Math.random().toString(36).slice(2),_r="__reactFiber$"+xi,Yr="__reactProps$"+xi,fl="__reactContainer$"+xi,zp="__reactEvents$"+xi,RM="__reactListeners$"+xi,IM="__reactHandles$"+xi,Rj="__reactResources$"+xi,Oo="__reactMarker$"+xi;function kp(i){delete i[_r],delete i[Yr],delete i[zp],delete i[RM],delete i[IM]}function pl(i){var s=i[_r];if(s)return s;for(var c=i.parentNode;c;){if(s=c[fl]||c[_r]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=a1(i);i!==null;){if(c=i[_r])return c;i=a1(i)}return s}i=c,c=i.parentNode}return null}function hl(i){if(i=i[_r]||i[fl]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Do(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(a(33))}function vl(i){var s=i[Rj];return s||(s=i[Rj]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function cr(i){i[Oo]=!0}var Ij=new Set,Lj={};function ms(i,s){gl(i,s),gl(i+"Capture",s)}function gl(i,s){for(Lj[i]=s,i=0;i<s.length;i++)Ij.add(s[i])}var LM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$j={},Bj={};function $M(i){return kr.call(Bj,i)?!0:kr.call($j,i)?!1:LM.test(i)?Bj[i]=!0:($j[i]=!0,!1)}function Au(i,s,c){if($M(s))if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+c)}}function zu(i,s,c){if(c===null)i.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+c)}}function Aa(i,s,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(s,c,""+f)}}function _n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Uj(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function BM(i,s,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,N=f.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(O){c=""+O,N.call(this,O)}}),Object.defineProperty(i,s,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Op(i){if(!i._valueTracker){var s=Uj(i)?"checked":"value";i._valueTracker=BM(i,s,""+i[s])}}function Fj(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return i&&(f=Uj(i)?i.checked?"true":"false":i.value),i=f,i!==c?(s.setValue(i),!0):!1}function ku(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var UM=/[\n"\\]/g;function Nn(i){return i.replace(UM,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Dp(i,s,c,f,y,N,O,R){i.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.type=O:i.removeAttribute("type"),s!=null?O==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+_n(s)):i.value!==""+_n(s)&&(i.value=""+_n(s)):O!=="submit"&&O!=="reset"||i.removeAttribute("value"),s!=null?Pp(i,O,_n(s)):c!=null?Pp(i,O,_n(c)):f!=null&&i.removeAttribute("value"),y==null&&N!=null&&(i.defaultChecked=!!N),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+_n(R):i.removeAttribute("name")}function Gj(i,s,c,f,y,N,O,R){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.type=N),s!=null||c!=null){if(!(N!=="submit"&&N!=="reset"||s!=null)){Op(i);return}c=c!=null?""+_n(c):"",s=s!=null?""+_n(s):c,R||s===i.value||(i.value=s),i.defaultValue=s}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=R?i.checked:!!f,i.defaultChecked=!!f,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(i.name=O),Op(i)}function Pp(i,s,c){s==="number"&&ku(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function xl(i,s,c,f){if(i=i.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=s.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&f&&(i[c].defaultSelected=!0)}else{for(c=""+_n(c),s=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,f&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function Hj(i,s,c){if(s!=null&&(s=""+_n(s),s!==i.value&&(i.value=s),c==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=c!=null?""+_n(c):""}function Vj(i,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(a(92));if(P(f)){if(1<f.length)throw Error(a(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=_n(s),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),Op(i)}function bl(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var FM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qj(i,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":f?i.setProperty(s,c):typeof c!="number"||c===0||FM.has(s)?s==="float"?i.cssFloat=c:i[s]=(""+c).trim():i[s]=c+"px"}function Yj(i,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var y in s)f=s[y],s.hasOwnProperty(y)&&c[y]!==f&&Qj(i,y,f)}else for(var N in s)s.hasOwnProperty(N)&&Qj(i,N,s[N])}function Mp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ou(i){return HM.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function za(){}var Tp=null;function qp(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yl=null,jl=null;function Kj(i){var s=hl(i);if(s&&(i=s.stateNode)){var c=i[Yr]||null;e:switch(i=s.stateNode,s.type){case"input":if(Dp(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Nn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==i&&f.form===i.form){var y=f[Yr]||null;if(!y)throw Error(a(90));Dp(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===i.form&&Fj(f)}break e;case"textarea":Hj(i,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&xl(i,!!c.multiple,s,!1)}}}var Rp=!1;function Wj(i,s,c){if(Rp)return i(s,c);Rp=!0;try{var f=i(s);return f}finally{if(Rp=!1,(yl!==null||jl!==null)&&(xd(),yl&&(s=yl,i=jl,jl=yl=null,Kj(s),i)))for(s=0;s<i.length;s++)Kj(i[s])}}function Po(i,s){var c=i.stateNode;if(c===null)return null;var f=c[Yr]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ip=!1;if(ka)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Ip=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Ip=!1}var bi=null,Lp=null,Du=null;function Xj(){if(Du)return Du;var i,s=Lp,c=s.length,f,y="value"in bi?bi.value:bi.textContent,N=y.length;for(i=0;i<c&&s[i]===y[i];i++);var O=c-i;for(f=1;f<=O&&s[c-f]===y[N-f];f++);return Du=y.slice(i,1<f?1-f:void 0)}function Pu(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Mu(){return!0}function Zj(){return!1}function Kr(i){function s(c,f,y,N,O){this._reactName=c,this._targetInst=y,this.type=f,this.nativeEvent=N,this.target=O,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(c=i[R],this[R]=c?c(N):N[R]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Mu:Zj,this.isPropagationStopped=Zj,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Mu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Mu)},persist:function(){},isPersistent:Mu}),s}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tu=Kr(fs),To=v({},fs,{view:0,detail:0}),VM=Kr(To),$p,Bp,qo,qu=v({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fp,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==qo&&(qo&&i.type==="mousemove"?($p=i.screenX-qo.screenX,Bp=i.screenY-qo.screenY):Bp=$p=0,qo=i),$p)},movementY:function(i){return"movementY"in i?i.movementY:Bp}}),Jj=Kr(qu),QM=v({},qu,{dataTransfer:0}),YM=Kr(QM),KM=v({},To,{relatedTarget:0}),Up=Kr(KM),WM=v({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),XM=Kr(WM),ZM=v({},fs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),JM=Kr(ZM),eT=v({},fs,{data:0}),e0=Kr(eT),tT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aT(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=nT[i])?!!s[i]:!1}function Fp(){return aT}var iT=v({},To,{key:function(i){if(i.key){var s=tT[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Pu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?rT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fp,charCode:function(i){return i.type==="keypress"?Pu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Pu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),sT=Kr(iT),lT=v({},qu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0=Kr(lT),oT=v({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fp}),cT=Kr(oT),uT=v({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),dT=Kr(uT),mT=v({},qu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),fT=Kr(mT),pT=v({},fs,{newState:0,oldState:0}),hT=Kr(pT),vT=[9,13,27,32],Gp=ka&&"CompositionEvent"in window,Ro=null;ka&&"documentMode"in document&&(Ro=document.documentMode);var gT=ka&&"TextEvent"in window&&!Ro,r0=ka&&(!Gp||Ro&&8<Ro&&11>=Ro),n0=" ",a0=!1;function i0(i,s){switch(i){case"keyup":return vT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var _l=!1;function xT(i,s){switch(i){case"compositionend":return s0(s);case"keypress":return s.which!==32?null:(a0=!0,n0);case"textInput":return i=s.data,i===n0&&a0?null:i;default:return null}}function bT(i,s){if(_l)return i==="compositionend"||!Gp&&i0(i,s)?(i=Xj(),Du=Lp=bi=null,_l=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return r0&&s.locale!=="ko"?null:s.data;default:return null}}var yT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!yT[i.type]:s==="textarea"}function o0(i,s,c,f){yl?jl?jl.push(f):jl=[f]:yl=f,s=wd(s,"onChange"),0<s.length&&(c=new Tu("onChange","change",null,c,f),i.push({event:c,listeners:s}))}var Io=null,Lo=null;function jT(i){GN(i,0)}function Ru(i){var s=Do(i);if(Fj(s))return i}function c0(i,s){if(i==="change")return s}var u0=!1;if(ka){var Hp;if(ka){var Vp="oninput"in document;if(!Vp){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),Vp=typeof d0.oninput=="function"}Hp=Vp}else Hp=!1;u0=Hp&&(!document.documentMode||9<document.documentMode)}function m0(){Io&&(Io.detachEvent("onpropertychange",f0),Lo=Io=null)}function f0(i){if(i.propertyName==="value"&&Ru(Lo)){var s=[];o0(s,Lo,i,qp(i)),Wj(jT,s)}}function _T(i,s,c){i==="focusin"?(m0(),Io=s,Lo=c,Io.attachEvent("onpropertychange",f0)):i==="focusout"&&m0()}function NT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ru(Lo)}function ST(i,s){if(i==="click")return Ru(s)}function wT(i,s){if(i==="input"||i==="change")return Ru(s)}function CT(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var ln=typeof Object.is=="function"?Object.is:CT;function $o(i,s){if(ln(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var y=c[f];if(!kr.call(s,y)||!ln(i[y],s[y]))return!1}return!0}function p0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function h0(i,s){var c=p0(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=s&&f>=s)return{node:c,offset:s-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=p0(c)}}function v0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?v0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function g0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=ku(i.document);s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=ku(i.document)}return s}function Qp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var ET=ka&&"documentMode"in document&&11>=document.documentMode,Nl=null,Yp=null,Bo=null,Kp=!1;function x0(i,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Kp||Nl==null||Nl!==ku(f)||(f=Nl,"selectionStart"in f&&Qp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Bo&&$o(Bo,f)||(Bo=f,f=wd(Yp,"onSelect"),0<f.length&&(s=new Tu("onSelect","select",null,s,c),i.push({event:s,listeners:f}),s.target=Nl)))}function ps(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var Sl={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionrun:ps("Transition","TransitionRun"),transitionstart:ps("Transition","TransitionStart"),transitioncancel:ps("Transition","TransitionCancel"),transitionend:ps("Transition","TransitionEnd")},Wp={},b0={};ka&&(b0=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function hs(i){if(Wp[i])return Wp[i];if(!Sl[i])return i;var s=Sl[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in b0)return Wp[i]=s[c];return i}var y0=hs("animationend"),j0=hs("animationiteration"),_0=hs("animationstart"),AT=hs("transitionrun"),zT=hs("transitionstart"),kT=hs("transitioncancel"),N0=hs("transitionend"),S0=new Map,Xp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xp.push("scrollEnd");function Vn(i,s){S0.set(i,s),ms(s,[i])}var Iu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Sn=[],wl=0,Zp=0;function Lu(){for(var i=wl,s=Zp=wl=0;s<i;){var c=Sn[s];Sn[s++]=null;var f=Sn[s];Sn[s++]=null;var y=Sn[s];Sn[s++]=null;var N=Sn[s];if(Sn[s++]=null,f!==null&&y!==null){var O=f.pending;O===null?y.next=y:(y.next=O.next,O.next=y),f.pending=y}N!==0&&w0(c,y,N)}}function $u(i,s,c,f){Sn[wl++]=i,Sn[wl++]=s,Sn[wl++]=c,Sn[wl++]=f,Zp|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Jp(i,s,c,f){return $u(i,s,c,f),Bu(i)}function vs(i,s){return $u(i,null,null,s),Bu(i)}function w0(i,s,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var y=!1,N=i.return;N!==null;)N.childLanes|=c,f=N.alternate,f!==null&&(f.childLanes|=c),N.tag===22&&(i=N.stateNode,i===null||i._visibility&1||(y=!0)),i=N,N=N.return;return i.tag===3?(N=i.stateNode,y&&s!==null&&(y=31-Qe(c),i=N.hiddenUpdates,f=i[y],f===null?i[y]=[s]:f.push(s),s.lane=c|536870912),N):null}function Bu(i){if(50<cc)throw cc=0,ov=null,Error(a(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Cl={};function OT(i,s,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(i,s,c,f){return new OT(i,s,c,f)}function eh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Oa(i,s){var c=i.alternate;return c===null?(c=on(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function C0(i,s){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,s=c.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Uu(i,s,c,f,y,N){var O=0;if(f=i,typeof i=="function")eh(i)&&(O=1);else if(typeof i=="string")O=qq(i,c,xe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case $:return i=on(31,c,s,y),i.elementType=$,i.lanes=N,i;case _:return gs(c.children,y,N,s);case C:O=8,y|=24;break;case w:return i=on(12,c,s,y|2),i.elementType=w,i.lanes=N,i;case z:return i=on(13,c,s,y),i.elementType=z,i.lanes=N,i;case k:return i=on(19,c,s,y),i.elementType=k,i.lanes=N,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case S:O=10;break e;case E:O=9;break e;case A:O=11;break e;case M:O=14;break e;case D:O=16,f=null;break e}O=29,c=Error(a(130,i===null?"null":typeof i,"")),f=null}return s=on(O,c,s,y),s.elementType=i,s.type=f,s.lanes=N,s}function gs(i,s,c,f){return i=on(7,i,f,s),i.lanes=c,i}function th(i,s,c){return i=on(6,i,null,s),i.lanes=c,i}function E0(i){var s=on(18,null,null,0);return s.stateNode=i,s}function rh(i,s,c){return s=on(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var A0=new WeakMap;function wn(i,s){if(typeof i=="object"&&i!==null){var c=A0.get(i);return c!==void 0?c:(s={value:i,source:s,stack:rr(s)},A0.set(i,s),s)}return{value:i,source:s,stack:rr(s)}}var El=[],Al=0,Fu=null,Uo=0,Cn=[],En=0,yi=null,oa=1,ca="";function Da(i,s){El[Al++]=Uo,El[Al++]=Fu,Fu=i,Uo=s}function z0(i,s,c){Cn[En++]=oa,Cn[En++]=ca,Cn[En++]=yi,yi=i;var f=oa;i=ca;var y=32-Qe(f)-1;f&=~(1<<y),c+=1;var N=32-Qe(s)+y;if(30<N){var O=y-y%5;N=(f&(1<<O)-1).toString(32),f>>=O,y-=O,oa=1<<32-Qe(s)+y|c<<y|f,ca=N+i}else oa=1<<N|c<<y|f,ca=i}function nh(i){i.return!==null&&(Da(i,1),z0(i,1,0))}function ah(i){for(;i===Fu;)Fu=El[--Al],El[Al]=null,Uo=El[--Al],El[Al]=null;for(;i===yi;)yi=Cn[--En],Cn[En]=null,ca=Cn[--En],Cn[En]=null,oa=Cn[--En],Cn[En]=null}function k0(i,s){Cn[En++]=oa,Cn[En++]=ca,Cn[En++]=yi,oa=s.id,ca=s.overflow,yi=i}var Nr=null,zt=null,at=!1,ji=null,An=!1,ih=Error(a(519));function _i(i){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fo(wn(s,i)),ih}function O0(i){var s=i.stateNode,c=i.type,f=i.memoizedProps;switch(s[_r]=i,s[Yr]=f,c){case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":case"embed":et("load",s);break;case"video":case"audio":for(c=0;c<dc.length;c++)et(dc[c],s);break;case"source":et("error",s);break;case"img":case"image":case"link":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"input":et("invalid",s),Gj(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":et("invalid",s);break;case"textarea":et("invalid",s),Vj(s,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||YN(s.textContent,c)?(f.popover!=null&&(et("beforetoggle",s),et("toggle",s)),f.onScroll!=null&&et("scroll",s),f.onScrollEnd!=null&&et("scrollend",s),f.onClick!=null&&(s.onclick=za),s=!0):s=!1,s||_i(i,!0)}function D0(i){for(Nr=i.return;Nr;)switch(Nr.tag){case 5:case 31:case 13:An=!1;return;case 27:case 3:An=!0;return;default:Nr=Nr.return}}function zl(i){if(i!==Nr)return!1;if(!at)return D0(i),at=!0,!1;var s=i.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Nv(i.type,i.memoizedProps)),c=!c),c&&zt&&_i(i),D0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));zt=n1(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));zt=n1(i)}else s===27?(s=zt,qi(i.type)?(i=Av,Av=null,zt=i):zt=s):zt=Nr?kn(i.stateNode.nextSibling):null;return!0}function xs(){zt=Nr=null,at=!1}function sh(){var i=ji;return i!==null&&(Jr===null?Jr=i:Jr.push.apply(Jr,i),ji=null),i}function Fo(i){ji===null?ji=[i]:ji.push(i)}var lh=Z(null),bs=null,Pa=null;function Ni(i,s,c){ce(lh,s._currentValue),s._currentValue=c}function Ma(i){i._currentValue=lh.current,W(lh)}function oh(i,s,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===c)break;i=i.return}}function ch(i,s,c,f){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var N=y.dependencies;if(N!==null){var O=y.child;N=N.firstContext;e:for(;N!==null;){var R=N;N=y;for(var G=0;G<s.length;G++)if(R.context===s[G]){N.lanes|=c,R=N.alternate,R!==null&&(R.lanes|=c),oh(N.return,c,i),f||(O=null);break e}N=R.next}}else if(y.tag===18){if(O=y.return,O===null)throw Error(a(341));O.lanes|=c,N=O.alternate,N!==null&&(N.lanes|=c),oh(O,c,i),O=null}else O=y.child;if(O!==null)O.return=y;else for(O=y;O!==null;){if(O===i){O=null;break}if(y=O.sibling,y!==null){y.return=O.return,O=y;break}O=O.return}y=O}}function kl(i,s,c,f){i=null;for(var y=s,N=!1;y!==null;){if(!N){if((y.flags&524288)!==0)N=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var O=y.alternate;if(O===null)throw Error(a(387));if(O=O.memoizedProps,O!==null){var R=y.type;ln(y.pendingProps.value,O.value)||(i!==null?i.push(R):i=[R])}}else if(y===ve.current){if(O=y.alternate,O===null)throw Error(a(387));O.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(vc):i=[vc])}y=y.return}i!==null&&ch(s,i,c,f),s.flags|=262144}function Gu(i){for(i=i.firstContext;i!==null;){if(!ln(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ys(i){bs=i,Pa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Sr(i){return P0(bs,i)}function Hu(i,s){return bs===null&&ys(i),P0(i,s)}function P0(i,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Pa===null){if(i===null)throw Error(a(308));Pa=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Pa=Pa.next=s;return c}var DT=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){s.aborted=!0,i.forEach(function(c){return c()})}},PT=e.unstable_scheduleCallback,MT=e.unstable_NormalPriority,Yt={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uh(){return{controller:new DT,data:new Map,refCount:0}}function Go(i){i.refCount--,i.refCount===0&&PT(MT,function(){i.controller.abort()})}var Ho=null,dh=0,Ol=0,Dl=null;function TT(i,s){if(Ho===null){var c=Ho=[];dh=0,Ol=pv(),Dl={status:"pending",value:void 0,then:function(f){c.push(f)}}}return dh++,s.then(M0,M0),s}function M0(){if(--dh===0&&Ho!==null){Dl!==null&&(Dl.status="fulfilled");var i=Ho;Ho=null,Ol=0,Dl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function qT(i,s){var c=[],f={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return i.then(function(){f.status="fulfilled",f.value=s;for(var y=0;y<c.length;y++)(0,c[y])(s)},function(y){for(f.status="rejected",f.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),f}var T0=q.S;q.S=function(i,s){xN=Le(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&TT(i,s),T0!==null&&T0(i,s)};var js=Z(null);function mh(){var i=js.current;return i!==null?i:St.pooledCache}function Vu(i,s){s===null?ce(js,js.current):ce(js,s.pool)}function q0(){var i=mh();return i===null?null:{parent:Yt._currentValue,pool:i}}var Pl=Error(a(460)),fh=Error(a(474)),Qu=Error(a(542)),Yu={then:function(){}};function R0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function I0(i,s,c){switch(c=i[c],c===void 0?i.push(s):c!==s&&(s.then(za,za),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,$0(i),i;default:if(typeof s.status=="string")s.then(za,za);else{if(i=St,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=s,i.status="pending",i.then(function(f){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=f}},function(f){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,$0(i),i}throw Ns=s,Pl}}function _s(i){try{var s=i._init;return s(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ns=c,Pl):c}}var Ns=null;function L0(){if(Ns===null)throw Error(a(459));var i=Ns;return Ns=null,i}function $0(i){if(i===Pl||i===Qu)throw Error(a(483))}var Ml=null,Vo=0;function Ku(i){var s=Vo;return Vo+=1,Ml===null&&(Ml=[]),I0(Ml,i,s)}function Qo(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Wu(i,s){throw s.$$typeof===b?Error(a(525)):(i=Object.prototype.toString.call(s),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function B0(i){function s(ne,X){if(i){var se=ne.deletions;se===null?(ne.deletions=[X],ne.flags|=16):se.push(X)}}function c(ne,X){if(!i)return null;for(;X!==null;)s(ne,X),X=X.sibling;return null}function f(ne){for(var X=new Map;ne!==null;)ne.key!==null?X.set(ne.key,ne):X.set(ne.index,ne),ne=ne.sibling;return X}function y(ne,X){return ne=Oa(ne,X),ne.index=0,ne.sibling=null,ne}function N(ne,X,se){return ne.index=se,i?(se=ne.alternate,se!==null?(se=se.index,se<X?(ne.flags|=67108866,X):se):(ne.flags|=67108866,X)):(ne.flags|=1048576,X)}function O(ne){return i&&ne.alternate===null&&(ne.flags|=67108866),ne}function R(ne,X,se,be){return X===null||X.tag!==6?(X=th(se,ne.mode,be),X.return=ne,X):(X=y(X,se),X.return=ne,X)}function G(ne,X,se,be){var $e=se.type;return $e===_?ge(ne,X,se.props.children,be,se.key):X!==null&&(X.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===D&&_s($e)===X.type)?(X=y(X,se.props),Qo(X,se),X.return=ne,X):(X=Uu(se.type,se.key,se.props,null,ne.mode,be),Qo(X,se),X.return=ne,X)}function le(ne,X,se,be){return X===null||X.tag!==4||X.stateNode.containerInfo!==se.containerInfo||X.stateNode.implementation!==se.implementation?(X=rh(se,ne.mode,be),X.return=ne,X):(X=y(X,se.children||[]),X.return=ne,X)}function ge(ne,X,se,be,$e){return X===null||X.tag!==7?(X=gs(se,ne.mode,be,$e),X.return=ne,X):(X=y(X,se),X.return=ne,X)}function ye(ne,X,se){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=th(""+X,ne.mode,se),X.return=ne,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case x:return se=Uu(X.type,X.key,X.props,null,ne.mode,se),Qo(se,X),se.return=ne,se;case j:return X=rh(X,ne.mode,se),X.return=ne,X;case D:return X=_s(X),ye(ne,X,se)}if(P(X)||T(X))return X=gs(X,ne.mode,se,null),X.return=ne,X;if(typeof X.then=="function")return ye(ne,Ku(X),se);if(X.$$typeof===S)return ye(ne,Hu(ne,X),se);Wu(ne,X)}return null}function oe(ne,X,se,be){var $e=X!==null?X.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return $e!==null?null:R(ne,X,""+se,be);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return se.key===$e?G(ne,X,se,be):null;case j:return se.key===$e?le(ne,X,se,be):null;case D:return se=_s(se),oe(ne,X,se,be)}if(P(se)||T(se))return $e!==null?null:ge(ne,X,se,be,null);if(typeof se.then=="function")return oe(ne,X,Ku(se),be);if(se.$$typeof===S)return oe(ne,X,Hu(ne,se),be);Wu(ne,se)}return null}function fe(ne,X,se,be,$e){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ne=ne.get(se)||null,R(X,ne,""+be,$e);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case x:return ne=ne.get(be.key===null?se:be.key)||null,G(X,ne,be,$e);case j:return ne=ne.get(be.key===null?se:be.key)||null,le(X,ne,be,$e);case D:return be=_s(be),fe(ne,X,se,be,$e)}if(P(be)||T(be))return ne=ne.get(se)||null,ge(X,ne,be,$e,null);if(typeof be.then=="function")return fe(ne,X,se,Ku(be),$e);if(be.$$typeof===S)return fe(ne,X,se,Hu(X,be),$e);Wu(X,be)}return null}function ke(ne,X,se,be){for(var $e=null,ot=null,Me=X,We=X=0,nt=null;Me!==null&&We<se.length;We++){Me.index>We?(nt=Me,Me=null):nt=Me.sibling;var ct=oe(ne,Me,se[We],be);if(ct===null){Me===null&&(Me=nt);break}i&&Me&&ct.alternate===null&&s(ne,Me),X=N(ct,X,We),ot===null?$e=ct:ot.sibling=ct,ot=ct,Me=nt}if(We===se.length)return c(ne,Me),at&&Da(ne,We),$e;if(Me===null){for(;We<se.length;We++)Me=ye(ne,se[We],be),Me!==null&&(X=N(Me,X,We),ot===null?$e=Me:ot.sibling=Me,ot=Me);return at&&Da(ne,We),$e}for(Me=f(Me);We<se.length;We++)nt=fe(Me,ne,We,se[We],be),nt!==null&&(i&&nt.alternate!==null&&Me.delete(nt.key===null?We:nt.key),X=N(nt,X,We),ot===null?$e=nt:ot.sibling=nt,ot=nt);return i&&Me.forEach(function(Bi){return s(ne,Bi)}),at&&Da(ne,We),$e}function Fe(ne,X,se,be){if(se==null)throw Error(a(151));for(var $e=null,ot=null,Me=X,We=X=0,nt=null,ct=se.next();Me!==null&&!ct.done;We++,ct=se.next()){Me.index>We?(nt=Me,Me=null):nt=Me.sibling;var Bi=oe(ne,Me,ct.value,be);if(Bi===null){Me===null&&(Me=nt);break}i&&Me&&Bi.alternate===null&&s(ne,Me),X=N(Bi,X,We),ot===null?$e=Bi:ot.sibling=Bi,ot=Bi,Me=nt}if(ct.done)return c(ne,Me),at&&Da(ne,We),$e;if(Me===null){for(;!ct.done;We++,ct=se.next())ct=ye(ne,ct.value,be),ct!==null&&(X=N(ct,X,We),ot===null?$e=ct:ot.sibling=ct,ot=ct);return at&&Da(ne,We),$e}for(Me=f(Me);!ct.done;We++,ct=se.next())ct=fe(Me,ne,We,ct.value,be),ct!==null&&(i&&ct.alternate!==null&&Me.delete(ct.key===null?We:ct.key),X=N(ct,X,We),ot===null?$e=ct:ot.sibling=ct,ot=ct);return i&&Me.forEach(function(Qq){return s(ne,Qq)}),at&&Da(ne,We),$e}function jt(ne,X,se,be){if(typeof se=="object"&&se!==null&&se.type===_&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case x:e:{for(var $e=se.key;X!==null;){if(X.key===$e){if($e=se.type,$e===_){if(X.tag===7){c(ne,X.sibling),be=y(X,se.props.children),be.return=ne,ne=be;break e}}else if(X.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===D&&_s($e)===X.type){c(ne,X.sibling),be=y(X,se.props),Qo(be,se),be.return=ne,ne=be;break e}c(ne,X);break}else s(ne,X);X=X.sibling}se.type===_?(be=gs(se.props.children,ne.mode,be,se.key),be.return=ne,ne=be):(be=Uu(se.type,se.key,se.props,null,ne.mode,be),Qo(be,se),be.return=ne,ne=be)}return O(ne);case j:e:{for($e=se.key;X!==null;){if(X.key===$e)if(X.tag===4&&X.stateNode.containerInfo===se.containerInfo&&X.stateNode.implementation===se.implementation){c(ne,X.sibling),be=y(X,se.children||[]),be.return=ne,ne=be;break e}else{c(ne,X);break}else s(ne,X);X=X.sibling}be=rh(se,ne.mode,be),be.return=ne,ne=be}return O(ne);case D:return se=_s(se),jt(ne,X,se,be)}if(P(se))return ke(ne,X,se,be);if(T(se)){if($e=T(se),typeof $e!="function")throw Error(a(150));return se=$e.call(se),Fe(ne,X,se,be)}if(typeof se.then=="function")return jt(ne,X,Ku(se),be);if(se.$$typeof===S)return jt(ne,X,Hu(ne,se),be);Wu(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,X!==null&&X.tag===6?(c(ne,X.sibling),be=y(X,se),be.return=ne,ne=be):(c(ne,X),be=th(se,ne.mode,be),be.return=ne,ne=be),O(ne)):c(ne,X)}return function(ne,X,se,be){try{Vo=0;var $e=jt(ne,X,se,be);return Ml=null,$e}catch(Me){if(Me===Pl||Me===Qu)throw Me;var ot=on(29,Me,null,ne.mode);return ot.lanes=be,ot.return=ne,ot}}}var Ss=B0(!0),U0=B0(!1),Si=!1;function ph(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hh(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function wi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ci(i,s,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(mt&2)!==0){var y=f.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),f.pending=s,s=Bu(i),w0(i,null,c),s}return $u(i,f,s,c),Bu(i)}function Yo(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,ds(i,c)}}function vh(i,s){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var y=null,N=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};N===null?y=N=O:N=N.next=O,c=c.next}while(c!==null);N===null?y=N=s:N=N.next=s}else y=N=s;c={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:N,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}var gh=!1;function Ko(){if(gh){var i=Dl;if(i!==null)throw i}}function Wo(i,s,c,f){gh=!1;var y=i.updateQueue;Si=!1;var N=y.firstBaseUpdate,O=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var G=R,le=G.next;G.next=null,O===null?N=le:O.next=le,O=G;var ge=i.alternate;ge!==null&&(ge=ge.updateQueue,R=ge.lastBaseUpdate,R!==O&&(R===null?ge.firstBaseUpdate=le:R.next=le,ge.lastBaseUpdate=G))}if(N!==null){var ye=y.baseState;O=0,ge=le=G=null,R=N;do{var oe=R.lane&-536870913,fe=oe!==R.lane;if(fe?(rt&oe)===oe:(f&oe)===oe){oe!==0&&oe===Ol&&(gh=!0),ge!==null&&(ge=ge.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ke=i,Fe=R;oe=s;var jt=c;switch(Fe.tag){case 1:if(ke=Fe.payload,typeof ke=="function"){ye=ke.call(jt,ye,oe);break e}ye=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Fe.payload,oe=typeof ke=="function"?ke.call(jt,ye,oe):ke,oe==null)break e;ye=v({},ye,oe);break e;case 2:Si=!0}}oe=R.callback,oe!==null&&(i.flags|=64,fe&&(i.flags|=8192),fe=y.callbacks,fe===null?y.callbacks=[oe]:fe.push(oe))}else fe={lane:oe,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ge===null?(le=ge=fe,G=ye):ge=ge.next=fe,O|=oe;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;fe=R,R=fe.next,fe.next=null,y.lastBaseUpdate=fe,y.shared.pending=null}}while(!0);ge===null&&(G=ye),y.baseState=G,y.firstBaseUpdate=le,y.lastBaseUpdate=ge,N===null&&(y.shared.lanes=0),Oi|=O,i.lanes=O,i.memoizedState=ye}}function F0(i,s){if(typeof i!="function")throw Error(a(191,i));i.call(s)}function G0(i,s){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)F0(c[i],s)}var Tl=Z(null),Xu=Z(0);function H0(i,s){i=Fa,ce(Xu,i),ce(Tl,s),Fa=i|s.baseLanes}function xh(){ce(Xu,Fa),ce(Tl,Tl.current)}function bh(){Fa=Xu.current,W(Tl),W(Xu)}var cn=Z(null),zn=null;function Ei(i){var s=i.alternate;ce(Ht,Ht.current&1),ce(cn,i),zn===null&&(s===null||Tl.current!==null||s.memoizedState!==null)&&(zn=i)}function yh(i){ce(Ht,Ht.current),ce(cn,i),zn===null&&(zn=i)}function V0(i){i.tag===22?(ce(Ht,Ht.current),ce(cn,i),zn===null&&(zn=i)):Ai()}function Ai(){ce(Ht,Ht.current),ce(cn,cn.current)}function un(i){W(cn),zn===i&&(zn=null),W(Ht)}var Ht=Z(0);function Zu(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Cv(c)||Ev(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ta=0,Ye=null,bt=null,Kt=null,Ju=!1,ql=!1,ws=!1,ed=0,Xo=0,Rl=null,RT=0;function It(){throw Error(a(321))}function jh(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!ln(i[c],s[c]))return!1;return!0}function _h(i,s,c,f,y,N){return Ta=N,Ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=i===null||i.memoizedState===null?z_:Rh,ws=!1,N=c(f,y),ws=!1,ql&&(N=Y0(s,c,f,y)),Q0(i),N}function Q0(i){q.H=ec;var s=bt!==null&&bt.next!==null;if(Ta=0,Kt=bt=Ye=null,Ju=!1,Xo=0,Rl=null,s)throw Error(a(300));i===null||Wt||(i=i.dependencies,i!==null&&Gu(i)&&(Wt=!0))}function Y0(i,s,c,f){Ye=i;var y=0;do{if(ql&&(Rl=null),Xo=0,ql=!1,25<=y)throw Error(a(301));if(y+=1,Kt=bt=null,i.updateQueue!=null){var N=i.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}q.H=k_,N=s(c,f)}while(ql);return N}function IT(){var i=q.H,s=i.useState()[0];return s=typeof s.then=="function"?Zo(s):s,i=i.useState()[0],(bt!==null?bt.memoizedState:null)!==i&&(Ye.flags|=1024),s}function Nh(){var i=ed!==0;return ed=0,i}function Sh(i,s,c){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~c}function wh(i){if(Ju){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ju=!1}Ta=0,Kt=bt=Ye=null,ql=!1,Xo=ed=0,Rl=null}function Ir(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ye.memoizedState=Kt=i:Kt=Kt.next=i,Kt}function Vt(){if(bt===null){var i=Ye.alternate;i=i!==null?i.memoizedState:null}else i=bt.next;var s=Kt===null?Ye.memoizedState:Kt.next;if(s!==null)Kt=s,bt=i;else{if(i===null)throw Ye.alternate===null?Error(a(467)):Error(a(310));bt=i,i={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Kt===null?Ye.memoizedState=Kt=i:Kt=Kt.next=i}return Kt}function td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(i){var s=Xo;return Xo+=1,Rl===null&&(Rl=[]),i=I0(Rl,i,s),s=Ye,(Kt===null?s.memoizedState:Kt.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?z_:Rh),i}function rd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Zo(i);if(i.$$typeof===S)return Sr(i)}throw Error(a(438,String(i)))}function Ch(i){var s=null,c=Ye.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=Ye.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=td(),Ye.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(i),f=0;f<i;f++)c[f]=B;return s.index++,c}function qa(i,s){return typeof s=="function"?s(i):s}function nd(i){var s=Vt();return Eh(s,bt,i)}function Eh(i,s,c){var f=i.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=c;var y=i.baseQueue,N=f.pending;if(N!==null){if(y!==null){var O=y.next;y.next=N.next,N.next=O}s.baseQueue=y=N,f.pending=null}if(N=i.baseState,y===null)i.memoizedState=N;else{s=y.next;var R=O=null,G=null,le=s,ge=!1;do{var ye=le.lane&-536870913;if(ye!==le.lane?(rt&ye)===ye:(Ta&ye)===ye){var oe=le.revertLane;if(oe===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ye===Ol&&(ge=!0);else if((Ta&oe)===oe){le=le.next,oe===Ol&&(ge=!0);continue}else ye={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},G===null?(R=G=ye,O=N):G=G.next=ye,Ye.lanes|=oe,Oi|=oe;ye=le.action,ws&&c(N,ye),N=le.hasEagerState?le.eagerState:c(N,ye)}else oe={lane:ye,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},G===null?(R=G=oe,O=N):G=G.next=oe,Ye.lanes|=ye,Oi|=ye;le=le.next}while(le!==null&&le!==s);if(G===null?O=N:G.next=R,!ln(N,i.memoizedState)&&(Wt=!0,ge&&(c=Dl,c!==null)))throw c;i.memoizedState=N,i.baseState=O,i.baseQueue=G,f.lastRenderedState=N}return y===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Ah(i){var s=Vt(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=c.dispatch,y=c.pending,N=s.memoizedState;if(y!==null){c.pending=null;var O=y=y.next;do N=i(N,O.action),O=O.next;while(O!==y);ln(N,s.memoizedState)||(Wt=!0),s.memoizedState=N,s.baseQueue===null&&(s.baseState=N),c.lastRenderedState=N}return[N,f]}function K0(i,s,c){var f=Ye,y=Vt(),N=at;if(N){if(c===void 0)throw Error(a(407));c=c()}else c=s();var O=!ln((bt||y).memoizedState,c);if(O&&(y.memoizedState=c,Wt=!0),y=y.queue,Oh(Z0.bind(null,f,y,i),[i]),y.getSnapshot!==s||O||Kt!==null&&Kt.memoizedState.tag&1){if(f.flags|=2048,Il(9,{destroy:void 0},X0.bind(null,f,y,c,s),null),St===null)throw Error(a(349));N||(Ta&127)!==0||W0(f,s,c)}return c}function W0(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=Ye.updateQueue,s===null?(s=td(),Ye.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function X0(i,s,c,f){s.value=c,s.getSnapshot=f,J0(s)&&e_(i)}function Z0(i,s,c){return c(function(){J0(s)&&e_(i)})}function J0(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!ln(i,c)}catch{return!0}}function e_(i){var s=vs(i,2);s!==null&&en(s,i,2)}function zh(i){var s=Ir();if(typeof i=="function"){var c=i;if(i=c(),ws){Ne(!0);try{c()}finally{Ne(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:i},s}function t_(i,s,c,f){return i.baseState=c,Eh(i,bt,typeof f=="function"?f:qa)}function LT(i,s,c,f,y){if(sd(i))throw Error(a(485));if(i=s.action,i!==null){var N={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){N.listeners.push(O)}};q.T!==null?c(!0):N.isTransition=!1,f(N),c=s.pending,c===null?(N.next=s.pending=N,r_(s,N)):(N.next=c.next,s.pending=c.next=N)}}function r_(i,s){var c=s.action,f=s.payload,y=i.state;if(s.isTransition){var N=q.T,O={};q.T=O;try{var R=c(y,f),G=q.S;G!==null&&G(O,R),n_(i,s,R)}catch(le){kh(i,s,le)}finally{N!==null&&O.types!==null&&(N.types=O.types),q.T=N}}else try{N=c(y,f),n_(i,s,N)}catch(le){kh(i,s,le)}}function n_(i,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){a_(i,s,f)},function(f){return kh(i,s,f)}):a_(i,s,c)}function a_(i,s,c){s.status="fulfilled",s.value=c,i_(s),i.state=c,s=i.pending,s!==null&&(c=s.next,c===s?i.pending=null:(c=c.next,s.next=c,r_(i,c)))}function kh(i,s,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,i_(s),s=s.next;while(s!==f)}i.action=null}function i_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function s_(i,s){return s}function l_(i,s){if(at){var c=St.formState;if(c!==null){e:{var f=Ye;if(at){if(zt){t:{for(var y=zt,N=An;y.nodeType!==8;){if(!N){y=null;break t}if(y=kn(y.nextSibling),y===null){y=null;break t}}N=y.data,y=N==="F!"||N==="F"?y:null}if(y){zt=kn(y.nextSibling),f=y.data==="F!";break e}}_i(f)}f=!1}f&&(s=c[0])}}return c=Ir(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s_,lastRenderedState:s},c.queue=f,c=C_.bind(null,Ye,f),f.dispatch=c,f=zh(!1),N=qh.bind(null,Ye,!1,f.queue),f=Ir(),y={state:s,dispatch:null,action:i,pending:null},f.queue=y,c=LT.bind(null,Ye,y,N,c),y.dispatch=c,f.memoizedState=i,[s,c,!1]}function o_(i){var s=Vt();return c_(s,bt,i)}function c_(i,s,c){if(s=Eh(i,s,s_)[0],i=nd(qa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Zo(s)}catch(O){throw O===Pl?Qu:O}else f=s;s=Vt();var y=s.queue,N=y.dispatch;return c!==s.memoizedState&&(Ye.flags|=2048,Il(9,{destroy:void 0},$T.bind(null,y,c),null)),[f,N,i]}function $T(i,s){i.action=s}function u_(i){var s=Vt(),c=bt;if(c!==null)return c_(s,c,i);Vt(),s=s.memoizedState,c=Vt();var f=c.queue.dispatch;return c.memoizedState=i,[s,f,!1]}function Il(i,s,c,f){return i={tag:i,create:c,deps:f,inst:s,next:null},s=Ye.updateQueue,s===null&&(s=td(),Ye.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,s.lastEffect=i),i}function d_(){return Vt().memoizedState}function ad(i,s,c,f){var y=Ir();Ye.flags|=i,y.memoizedState=Il(1|s,{destroy:void 0},c,f===void 0?null:f)}function id(i,s,c,f){var y=Vt();f=f===void 0?null:f;var N=y.memoizedState.inst;bt!==null&&f!==null&&jh(f,bt.memoizedState.deps)?y.memoizedState=Il(s,N,c,f):(Ye.flags|=i,y.memoizedState=Il(1|s,N,c,f))}function m_(i,s){ad(8390656,8,i,s)}function Oh(i,s){id(2048,8,i,s)}function BT(i){Ye.flags|=4;var s=Ye.updateQueue;if(s===null)s=td(),Ye.updateQueue=s,s.events=[i];else{var c=s.events;c===null?s.events=[i]:c.push(i)}}function f_(i){var s=Vt().memoizedState;return BT({ref:s,nextImpl:i}),function(){if((mt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function p_(i,s){return id(4,2,i,s)}function h_(i,s){return id(4,4,i,s)}function v_(i,s){if(typeof s=="function"){i=i();var c=s(i);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function g_(i,s,c){c=c!=null?c.concat([i]):null,id(4,4,v_.bind(null,s,i),c)}function Dh(){}function x_(i,s){var c=Vt();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&jh(s,f[1])?f[0]:(c.memoizedState=[i,s],i)}function b_(i,s){var c=Vt();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&jh(s,f[1]))return f[0];if(f=i(),ws){Ne(!0);try{i()}finally{Ne(!1)}}return c.memoizedState=[f,s],f}function Ph(i,s,c){return c===void 0||(Ta&1073741824)!==0&&(rt&261930)===0?i.memoizedState=s:(i.memoizedState=c,i=yN(),Ye.lanes|=i,Oi|=i,c)}function y_(i,s,c,f){return ln(c,s)?c:Tl.current!==null?(i=Ph(i,c,f),ln(i,s)||(Wt=!0),i):(Ta&42)===0||(Ta&1073741824)!==0&&(rt&261930)===0?(Wt=!0,i.memoizedState=c):(i=yN(),Ye.lanes|=i,Oi|=i,s)}function j_(i,s,c,f,y){var N=U.p;U.p=N!==0&&8>N?N:8;var O=q.T,R={};q.T=R,qh(i,!1,s,c);try{var G=y(),le=q.S;if(le!==null&&le(R,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ge=qT(G,f);Jo(i,s,ge,fn(i))}else Jo(i,s,f,fn(i))}catch(ye){Jo(i,s,{then:function(){},status:"rejected",reason:ye},fn())}finally{U.p=N,O!==null&&R.types!==null&&(O.types=R.types),q.T=O}}function UT(){}function Mh(i,s,c,f){if(i.tag!==5)throw Error(a(476));var y=__(i).queue;j_(i,y,s,I,c===null?UT:function(){return N_(i),c(f)})}function __(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:I},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:c},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function N_(i){var s=__(i);s.next===null&&(s=i.alternate.memoizedState),Jo(i,s.next.queue,{},fn())}function Th(){return Sr(vc)}function S_(){return Vt().memoizedState}function w_(){return Vt().memoizedState}function FT(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var c=fn();i=wi(c);var f=Ci(s,i,c);f!==null&&(en(f,s,c),Yo(f,s,c)),s={cache:uh()},i.payload=s;return}s=s.return}}function GT(i,s,c){var f=fn();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sd(i)?E_(s,c):(c=Jp(i,s,c,f),c!==null&&(en(c,i,f),A_(c,s,f)))}function C_(i,s,c){var f=fn();Jo(i,s,c,f)}function Jo(i,s,c,f){var y={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(sd(i))E_(s,y);else{var N=i.alternate;if(i.lanes===0&&(N===null||N.lanes===0)&&(N=s.lastRenderedReducer,N!==null))try{var O=s.lastRenderedState,R=N(O,c);if(y.hasEagerState=!0,y.eagerState=R,ln(R,O))return $u(i,s,y,0),St===null&&Lu(),!1}catch{}if(c=Jp(i,s,y,f),c!==null)return en(c,i,f),A_(c,s,f),!0}return!1}function qh(i,s,c,f){if(f={lane:2,revertLane:pv(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},sd(i)){if(s)throw Error(a(479))}else s=Jp(i,c,f,2),s!==null&&en(s,i,2)}function sd(i){var s=i.alternate;return i===Ye||s!==null&&s===Ye}function E_(i,s){ql=Ju=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function A_(i,s,c){if((c&4194048)!==0){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,ds(i,c)}}var ec={readContext:Sr,use:rd,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};ec.useEffectEvent=It;var z_={readContext:Sr,use:rd,useCallback:function(i,s){return Ir().memoizedState=[i,s===void 0?null:s],i},useContext:Sr,useEffect:m_,useImperativeHandle:function(i,s,c){c=c!=null?c.concat([i]):null,ad(4194308,4,v_.bind(null,s,i),c)},useLayoutEffect:function(i,s){return ad(4194308,4,i,s)},useInsertionEffect:function(i,s){ad(4,2,i,s)},useMemo:function(i,s){var c=Ir();s=s===void 0?null:s;var f=i();if(ws){Ne(!0);try{i()}finally{Ne(!1)}}return c.memoizedState=[f,s],f},useReducer:function(i,s,c){var f=Ir();if(c!==void 0){var y=c(s);if(ws){Ne(!0);try{c(s)}finally{Ne(!1)}}}else y=s;return f.memoizedState=f.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},f.queue=i,i=i.dispatch=GT.bind(null,Ye,i),[f.memoizedState,i]},useRef:function(i){var s=Ir();return i={current:i},s.memoizedState=i},useState:function(i){i=zh(i);var s=i.queue,c=C_.bind(null,Ye,s);return s.dispatch=c,[i.memoizedState,c]},useDebugValue:Dh,useDeferredValue:function(i,s){var c=Ir();return Ph(c,i,s)},useTransition:function(){var i=zh(!1);return i=j_.bind(null,Ye,i.queue,!0,!1),Ir().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,c){var f=Ye,y=Ir();if(at){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),St===null)throw Error(a(349));(rt&127)!==0||W0(f,s,c)}y.memoizedState=c;var N={value:c,getSnapshot:s};return y.queue=N,m_(Z0.bind(null,f,N,i),[i]),f.flags|=2048,Il(9,{destroy:void 0},X0.bind(null,f,N,c,s),null),c},useId:function(){var i=Ir(),s=St.identifierPrefix;if(at){var c=ca,f=oa;c=(f&~(1<<32-Qe(f)-1)).toString(32)+c,s="_"+s+"R_"+c,c=ed++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=RT++,s="_"+s+"r_"+c.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Th,useFormState:l_,useActionState:l_,useOptimistic:function(i){var s=Ir();s.memoizedState=s.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=qh.bind(null,Ye,!0,c),c.dispatch=s,[i,s]},useMemoCache:Ch,useCacheRefresh:function(){return Ir().memoizedState=FT.bind(null,Ye)},useEffectEvent:function(i){var s=Ir(),c={impl:i};return s.memoizedState=c,function(){if((mt&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},Rh={readContext:Sr,use:rd,useCallback:x_,useContext:Sr,useEffect:Oh,useImperativeHandle:g_,useInsertionEffect:p_,useLayoutEffect:h_,useMemo:b_,useReducer:nd,useRef:d_,useState:function(){return nd(qa)},useDebugValue:Dh,useDeferredValue:function(i,s){var c=Vt();return y_(c,bt.memoizedState,i,s)},useTransition:function(){var i=nd(qa)[0],s=Vt().memoizedState;return[typeof i=="boolean"?i:Zo(i),s]},useSyncExternalStore:K0,useId:S_,useHostTransitionStatus:Th,useFormState:o_,useActionState:o_,useOptimistic:function(i,s){var c=Vt();return t_(c,bt,i,s)},useMemoCache:Ch,useCacheRefresh:w_};Rh.useEffectEvent=f_;var k_={readContext:Sr,use:rd,useCallback:x_,useContext:Sr,useEffect:Oh,useImperativeHandle:g_,useInsertionEffect:p_,useLayoutEffect:h_,useMemo:b_,useReducer:Ah,useRef:d_,useState:function(){return Ah(qa)},useDebugValue:Dh,useDeferredValue:function(i,s){var c=Vt();return bt===null?Ph(c,i,s):y_(c,bt.memoizedState,i,s)},useTransition:function(){var i=Ah(qa)[0],s=Vt().memoizedState;return[typeof i=="boolean"?i:Zo(i),s]},useSyncExternalStore:K0,useId:S_,useHostTransitionStatus:Th,useFormState:u_,useActionState:u_,useOptimistic:function(i,s){var c=Vt();return bt!==null?t_(c,bt,i,s):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Ch,useCacheRefresh:w_};k_.useEffectEvent=f_;function Ih(i,s,c,f){s=i.memoizedState,c=c(f,s),c=c==null?s:v({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Lh={enqueueSetState:function(i,s,c){i=i._reactInternals;var f=fn(),y=wi(f);y.payload=s,c!=null&&(y.callback=c),s=Ci(i,y,f),s!==null&&(en(s,i,f),Yo(s,i,f))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var f=fn(),y=wi(f);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=Ci(i,y,f),s!==null&&(en(s,i,f),Yo(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=fn(),f=wi(c);f.tag=2,s!=null&&(f.callback=s),s=Ci(i,f,c),s!==null&&(en(s,i,c),Yo(s,i,c))}};function O_(i,s,c,f,y,N,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,N,O):s.prototype&&s.prototype.isPureReactComponent?!$o(c,f)||!$o(y,N):!0}function D_(i,s,c,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==i&&Lh.enqueueReplaceState(s,s.state,null)}function Cs(i,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(i=i.defaultProps){c===s&&(c=v({},c));for(var y in i)c[y]===void 0&&(c[y]=i[y])}return c}function P_(i){Iu(i)}function M_(i){console.error(i)}function T_(i){Iu(i)}function ld(i,s){try{var c=i.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function q_(i,s,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function $h(i,s,c){return c=wi(c),c.tag=3,c.payload={element:null},c.callback=function(){ld(i,s)},c}function R_(i){return i=wi(i),i.tag=3,i}function I_(i,s,c,f){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var N=f.value;i.payload=function(){return y(N)},i.callback=function(){q_(s,c,f)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(i.callback=function(){q_(s,c,f),typeof y!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function HT(i,s,c,f,y){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&kl(s,c,y,!0),c=cn.current,c!==null){switch(c.tag){case 31:case 13:return zn===null?bd():c.alternate===null&&Lt===0&&(Lt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,f===Yu?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),dv(i,f,y)),!1;case 22:return c.flags|=65536,f===Yu?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),dv(i,f,y)),!1}throw Error(a(435,c.tag))}return dv(i,f,y),bd(),!1}if(at)return s=cn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,f!==ih&&(i=Error(a(422),{cause:f}),Fo(wn(i,c)))):(f!==ih&&(s=Error(a(423),{cause:f}),Fo(wn(s,c))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,f=wn(f,c),y=$h(i.stateNode,f,y),vh(i,y),Lt!==4&&(Lt=2)),!1;var N=Error(a(520),{cause:f});if(N=wn(N,c),oc===null?oc=[N]:oc.push(N),Lt!==4&&(Lt=2),s===null)return!0;f=wn(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,i=y&-y,c.lanes|=i,i=$h(c.stateNode,f,i),vh(c,i),!1;case 1:if(s=c.type,N=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Di===null||!Di.has(N))))return c.flags|=65536,y&=-y,c.lanes|=y,y=R_(y),I_(y,i,c,f),vh(c,y),!1}c=c.return}while(c!==null);return!1}var Bh=Error(a(461)),Wt=!1;function wr(i,s,c,f){s.child=i===null?U0(s,null,c,f):Ss(s,i.child,c,f)}function L_(i,s,c,f,y){c=c.render;var N=s.ref;if("ref"in f){var O={};for(var R in f)R!=="ref"&&(O[R]=f[R])}else O=f;return ys(s),f=_h(i,s,c,O,N,y),R=Nh(),i!==null&&!Wt?(Sh(i,s,y),Ra(i,s,y)):(at&&R&&nh(s),s.flags|=1,wr(i,s,f,y),s.child)}function $_(i,s,c,f,y){if(i===null){var N=c.type;return typeof N=="function"&&!eh(N)&&N.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=N,B_(i,s,N,f,y)):(i=Uu(c.type,null,f,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(N=i.child,!Kh(i,y)){var O=N.memoizedProps;if(c=c.compare,c=c!==null?c:$o,c(O,f)&&i.ref===s.ref)return Ra(i,s,y)}return s.flags|=1,i=Oa(N,f),i.ref=s.ref,i.return=s,s.child=i}function B_(i,s,c,f,y){if(i!==null){var N=i.memoizedProps;if($o(N,f)&&i.ref===s.ref)if(Wt=!1,s.pendingProps=f=N,Kh(i,y))(i.flags&131072)!==0&&(Wt=!0);else return s.lanes=i.lanes,Ra(i,s,y)}return Uh(i,s,c,f,y)}function U_(i,s,c,f){var y=f.children,N=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(N=N!==null?N.baseLanes|c:c,i!==null){for(f=s.child=i.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;f=y&~N}else f=0,s.child=null;return F_(i,s,N,c,f)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Vu(s,N!==null?N.cachePool:null),N!==null?H0(s,N):xh(),V0(s);else return f=s.lanes=536870912,F_(i,s,N!==null?N.baseLanes|c:c,c,f)}else N!==null?(Vu(s,N.cachePool),H0(s,N),Ai(),s.memoizedState=null):(i!==null&&Vu(s,null),xh(),Ai());return wr(i,s,y,c),s.child}function tc(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function F_(i,s,c,f,y){var N=mh();return N=N===null?null:{parent:Yt._currentValue,pool:N},s.memoizedState={baseLanes:c,cachePool:N},i!==null&&Vu(s,null),xh(),V0(s),i!==null&&kl(i,s,f,!0),s.childLanes=y,null}function od(i,s){return s=ud({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function G_(i,s,c){return Ss(s,i.child,null,c),i=od(s,s.pendingProps),i.flags|=2,un(s),s.memoizedState=null,i}function VT(i,s,c){var f=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(at){if(f.mode==="hidden")return i=od(s,f),s.lanes=536870912,tc(null,i);if(yh(s),(i=zt)?(i=r1(i,An),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:yi!==null?{id:oa,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},c=E0(i),c.return=s,s.child=c,Nr=s,zt=null)):i=null,i===null)throw _i(s);return s.lanes=536870912,null}return od(s,f)}var N=i.memoizedState;if(N!==null){var O=N.dehydrated;if(yh(s),y)if(s.flags&256)s.flags&=-257,s=G_(i,s,c);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(a(558));else if(Wt||kl(i,s,c,!1),y=(c&i.childLanes)!==0,Wt||y){if(f=St,f!==null&&(O=Mj(f,c),O!==0&&O!==N.retryLane))throw N.retryLane=O,vs(i,O),en(f,i,O),Bh;bd(),s=G_(i,s,c)}else i=N.treeContext,zt=kn(O.nextSibling),Nr=s,at=!0,ji=null,An=!1,i!==null&&k0(s,i),s=od(s,f),s.flags|=4096;return s}return i=Oa(i.child,{mode:f.mode,children:f.children}),i.ref=s.ref,s.child=i,i.return=s,i}function cd(i,s){var c=s.ref;if(c===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(i===null||i.ref!==c)&&(s.flags|=4194816)}}function Uh(i,s,c,f,y){return ys(s),c=_h(i,s,c,f,void 0,y),f=Nh(),i!==null&&!Wt?(Sh(i,s,y),Ra(i,s,y)):(at&&f&&nh(s),s.flags|=1,wr(i,s,c,y),s.child)}function H_(i,s,c,f,y,N){return ys(s),s.updateQueue=null,c=Y0(s,f,c,y),Q0(i),f=Nh(),i!==null&&!Wt?(Sh(i,s,N),Ra(i,s,N)):(at&&f&&nh(s),s.flags|=1,wr(i,s,c,N),s.child)}function V_(i,s,c,f,y){if(ys(s),s.stateNode===null){var N=Cl,O=c.contextType;typeof O=="object"&&O!==null&&(N=Sr(O)),N=new c(f,N),s.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Lh,s.stateNode=N,N._reactInternals=s,N=s.stateNode,N.props=f,N.state=s.memoizedState,N.refs={},ph(s),O=c.contextType,N.context=typeof O=="object"&&O!==null?Sr(O):Cl,N.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(Ih(s,c,O,f),N.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(O=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),O!==N.state&&Lh.enqueueReplaceState(N,N.state,null),Wo(s,f,N,y),Ko(),N.state=s.memoizedState),typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(i===null){N=s.stateNode;var R=s.memoizedProps,G=Cs(c,R);N.props=G;var le=N.context,ge=c.contextType;O=Cl,typeof ge=="object"&&ge!==null&&(O=Sr(ge));var ye=c.getDerivedStateFromProps;ge=typeof ye=="function"||typeof N.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,ge||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(R||le!==O)&&D_(s,N,f,O),Si=!1;var oe=s.memoizedState;N.state=oe,Wo(s,f,N,y),Ko(),le=s.memoizedState,R||oe!==le||Si?(typeof ye=="function"&&(Ih(s,c,ye,f),le=s.memoizedState),(G=Si||O_(s,c,G,f,oe,le,O))?(ge||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(s.flags|=4194308)):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=le),N.props=f,N.state=le,N.context=O,f=G):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{N=s.stateNode,hh(i,s),O=s.memoizedProps,ge=Cs(c,O),N.props=ge,ye=s.pendingProps,oe=N.context,le=c.contextType,G=Cl,typeof le=="object"&&le!==null&&(G=Sr(le)),R=c.getDerivedStateFromProps,(le=typeof R=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(O!==ye||oe!==G)&&D_(s,N,f,G),Si=!1,oe=s.memoizedState,N.state=oe,Wo(s,f,N,y),Ko();var fe=s.memoizedState;O!==ye||oe!==fe||Si||i!==null&&i.dependencies!==null&&Gu(i.dependencies)?(typeof R=="function"&&(Ih(s,c,R,f),fe=s.memoizedState),(ge=Si||O_(s,c,ge,f,oe,fe,G)||i!==null&&i.dependencies!==null&&Gu(i.dependencies))?(le||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(f,fe,G),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(f,fe,G)),typeof N.componentDidUpdate=="function"&&(s.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof N.componentDidUpdate!="function"||O===i.memoizedProps&&oe===i.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&oe===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=fe),N.props=f,N.state=fe,N.context=G,f=ge):(typeof N.componentDidUpdate!="function"||O===i.memoizedProps&&oe===i.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&oe===i.memoizedState||(s.flags|=1024),f=!1)}return N=f,cd(i,s),f=(s.flags&128)!==0,N||f?(N=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:N.render(),s.flags|=1,i!==null&&f?(s.child=Ss(s,i.child,null,y),s.child=Ss(s,null,c,y)):wr(i,s,c,y),s.memoizedState=N.state,i=s.child):i=Ra(i,s,y),i}function Q_(i,s,c,f){return xs(),s.flags|=256,wr(i,s,c,f),s.child}var Fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(i){return{baseLanes:i,cachePool:q0()}}function Hh(i,s,c){return i=i!==null?i.childLanes&~c:0,s&&(i|=mn),i}function Y_(i,s,c){var f=s.pendingProps,y=!1,N=(s.flags&128)!==0,O;if((O=N)||(O=i!==null&&i.memoizedState===null?!1:(Ht.current&2)!==0),O&&(y=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,i===null){if(at){if(y?Ei(s):Ai(),(i=zt)?(i=r1(i,An),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:yi!==null?{id:oa,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},c=E0(i),c.return=s,s.child=c,Nr=s,zt=null)):i=null,i===null)throw _i(s);return Ev(i)?s.lanes=32:s.lanes=536870912,null}var R=f.children;return f=f.fallback,y?(Ai(),y=s.mode,R=ud({mode:"hidden",children:R},y),f=gs(f,y,c,null),R.return=s,f.return=s,R.sibling=f,s.child=R,f=s.child,f.memoizedState=Gh(c),f.childLanes=Hh(i,O,c),s.memoizedState=Fh,tc(null,f)):(Ei(s),Vh(s,R))}var G=i.memoizedState;if(G!==null&&(R=G.dehydrated,R!==null)){if(N)s.flags&256?(Ei(s),s.flags&=-257,s=Qh(i,s,c)):s.memoizedState!==null?(Ai(),s.child=i.child,s.flags|=128,s=null):(Ai(),R=f.fallback,y=s.mode,f=ud({mode:"visible",children:f.children},y),R=gs(R,y,c,null),R.flags|=2,f.return=s,R.return=s,f.sibling=R,s.child=f,Ss(s,i.child,null,c),f=s.child,f.memoizedState=Gh(c),f.childLanes=Hh(i,O,c),s.memoizedState=Fh,s=tc(null,f));else if(Ei(s),Ev(R)){if(O=R.nextSibling&&R.nextSibling.dataset,O)var le=O.dgst;O=le,f=Error(a(419)),f.stack="",f.digest=O,Fo({value:f,source:null,stack:null}),s=Qh(i,s,c)}else if(Wt||kl(i,s,c,!1),O=(c&i.childLanes)!==0,Wt||O){if(O=St,O!==null&&(f=Mj(O,c),f!==0&&f!==G.retryLane))throw G.retryLane=f,vs(i,f),en(O,i,f),Bh;Cv(R)||bd(),s=Qh(i,s,c)}else Cv(R)?(s.flags|=192,s.child=i.child,s=null):(i=G.treeContext,zt=kn(R.nextSibling),Nr=s,at=!0,ji=null,An=!1,i!==null&&k0(s,i),s=Vh(s,f.children),s.flags|=4096);return s}return y?(Ai(),R=f.fallback,y=s.mode,G=i.child,le=G.sibling,f=Oa(G,{mode:"hidden",children:f.children}),f.subtreeFlags=G.subtreeFlags&65011712,le!==null?R=Oa(le,R):(R=gs(R,y,c,null),R.flags|=2),R.return=s,f.return=s,f.sibling=R,s.child=f,tc(null,f),f=s.child,R=i.child.memoizedState,R===null?R=Gh(c):(y=R.cachePool,y!==null?(G=Yt._currentValue,y=y.parent!==G?{parent:G,pool:G}:y):y=q0(),R={baseLanes:R.baseLanes|c,cachePool:y}),f.memoizedState=R,f.childLanes=Hh(i,O,c),s.memoizedState=Fh,tc(i.child,f)):(Ei(s),c=i.child,i=c.sibling,c=Oa(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,i!==null&&(O=s.deletions,O===null?(s.deletions=[i],s.flags|=16):O.push(i)),s.child=c,s.memoizedState=null,c)}function Vh(i,s){return s=ud({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function ud(i,s){return i=on(22,i,null,s),i.lanes=0,i}function Qh(i,s,c){return Ss(s,i.child,null,c),i=Vh(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function K_(i,s,c){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),oh(i.return,s,c)}function Yh(i,s,c,f,y,N){var O=i.memoizedState;O===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:y,treeForkCount:N}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=f,O.tail=c,O.tailMode=y,O.treeForkCount=N)}function W_(i,s,c){var f=s.pendingProps,y=f.revealOrder,N=f.tail;f=f.children;var O=Ht.current,R=(O&2)!==0;if(R?(O=O&1|2,s.flags|=128):O&=1,ce(Ht,O),wr(i,s,f,c),f=at?Uo:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&K_(i,c,s);else if(i.tag===19)K_(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(c=s.child,y=null;c!==null;)i=c.alternate,i!==null&&Zu(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),Yh(s,!1,y,c,N,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Zu(i)===null){s.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}Yh(s,!0,c,null,N,f);break;case"together":Yh(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function Ra(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),Oi|=s.lanes,(c&s.childLanes)===0)if(i!==null){if(kl(i,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(a(153));if(s.child!==null){for(i=s.child,c=Oa(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=Oa(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function Kh(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Gu(i)))}function QT(i,s,c){switch(s.tag){case 3:Pe(s,s.stateNode.containerInfo),Ni(s,Yt,i.memoizedState.cache),xs();break;case 27:case 5:ee(s);break;case 4:Pe(s,s.stateNode.containerInfo);break;case 10:Ni(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,yh(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Ei(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Y_(i,s,c):(Ei(s),i=Ra(i,s,c),i!==null?i.sibling:null);Ei(s);break;case 19:var y=(i.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(kl(i,s,c,!1),f=(c&s.childLanes)!==0),y){if(f)return W_(i,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Ht,Ht.current),f)break;return null;case 22:return s.lanes=0,U_(i,s,c,s.pendingProps);case 24:Ni(s,Yt,i.memoizedState.cache)}return Ra(i,s,c)}function X_(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps)Wt=!0;else{if(!Kh(i,c)&&(s.flags&128)===0)return Wt=!1,QT(i,s,c);Wt=(i.flags&131072)!==0}else Wt=!1,at&&(s.flags&1048576)!==0&&z0(s,Uo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(i=_s(s.elementType),s.type=i,typeof i=="function")eh(i)?(f=Cs(i,f),s.tag=1,s=V_(null,s,i,f,c)):(s.tag=0,s=Uh(null,s,i,f,c));else{if(i!=null){var y=i.$$typeof;if(y===A){s.tag=11,s=L_(null,s,i,f,c);break e}else if(y===M){s.tag=14,s=$_(null,s,i,f,c);break e}}throw s=J(i)||i,Error(a(306,s,""))}}return s;case 0:return Uh(i,s,s.type,s.pendingProps,c);case 1:return f=s.type,y=Cs(f,s.pendingProps),V_(i,s,f,y,c);case 3:e:{if(Pe(s,s.stateNode.containerInfo),i===null)throw Error(a(387));f=s.pendingProps;var N=s.memoizedState;y=N.element,hh(i,s),Wo(s,f,null,c);var O=s.memoizedState;if(f=O.cache,Ni(s,Yt,f),f!==N.cache&&ch(s,[Yt],c,!0),Ko(),f=O.element,N.isDehydrated)if(N={element:f,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=N,s.memoizedState=N,s.flags&256){s=Q_(i,s,f,c);break e}else if(f!==y){y=wn(Error(a(424)),s),Fo(y),s=Q_(i,s,f,c);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,zt=kn(i.firstChild),Nr=s,at=!0,ji=null,An=!0,c=U0(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(xs(),f===y){s=Ra(i,s,c);break e}wr(i,s,f,c)}s=s.child}return s;case 26:return cd(i,s),i===null?(c=o1(s.type,null,s.pendingProps,null))?s.memoizedState=c:at||(c=s.type,i=s.pendingProps,f=Cd(F.current).createElement(c),f[_r]=s,f[Yr]=i,Cr(f,c,i),cr(f),s.stateNode=f):s.memoizedState=o1(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ee(s),i===null&&at&&(f=s.stateNode=i1(s.type,s.pendingProps,F.current),Nr=s,An=!0,y=zt,qi(s.type)?(Av=y,zt=kn(f.firstChild)):zt=y),wr(i,s,s.pendingProps.children,c),cd(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&at&&((y=f=zt)&&(f=Nq(f,s.type,s.pendingProps,An),f!==null?(s.stateNode=f,Nr=s,zt=kn(f.firstChild),An=!1,y=!0):y=!1),y||_i(s)),ee(s),y=s.type,N=s.pendingProps,O=i!==null?i.memoizedProps:null,f=N.children,Nv(y,N)?f=null:O!==null&&Nv(y,O)&&(s.flags|=32),s.memoizedState!==null&&(y=_h(i,s,IT,null,null,c),vc._currentValue=y),cd(i,s),wr(i,s,f,c),s.child;case 6:return i===null&&at&&((i=c=zt)&&(c=Sq(c,s.pendingProps,An),c!==null?(s.stateNode=c,Nr=s,zt=null,i=!0):i=!1),i||_i(s)),null;case 13:return Y_(i,s,c);case 4:return Pe(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=Ss(s,null,f,c):wr(i,s,f,c),s.child;case 11:return L_(i,s,s.type,s.pendingProps,c);case 7:return wr(i,s,s.pendingProps,c),s.child;case 8:return wr(i,s,s.pendingProps.children,c),s.child;case 12:return wr(i,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,Ni(s,s.type,f.value),wr(i,s,f.children,c),s.child;case 9:return y=s.type._context,f=s.pendingProps.children,ys(s),y=Sr(y),f=f(y),s.flags|=1,wr(i,s,f,c),s.child;case 14:return $_(i,s,s.type,s.pendingProps,c);case 15:return B_(i,s,s.type,s.pendingProps,c);case 19:return W_(i,s,c);case 31:return VT(i,s,c);case 22:return U_(i,s,c,s.pendingProps);case 24:return ys(s),f=Sr(Yt),i===null?(y=mh(),y===null&&(y=St,N=uh(),y.pooledCache=N,N.refCount++,N!==null&&(y.pooledCacheLanes|=c),y=N),s.memoizedState={parent:f,cache:y},ph(s),Ni(s,Yt,y)):((i.lanes&c)!==0&&(hh(i,s),Wo(s,null,null,c),Ko()),y=i.memoizedState,N=s.memoizedState,y.parent!==f?(y={parent:f,cache:f},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Ni(s,Yt,f)):(f=N.cache,Ni(s,Yt,f),f!==y.cache&&ch(s,[Yt],c,!0))),wr(i,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function Ia(i){i.flags|=4}function Wh(i,s,c,f,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(SN())i.flags|=8192;else throw Ns=Yu,fh}else i.flags&=-16777217}function Z_(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!f1(s))if(SN())i.flags|=8192;else throw Ns=Yu,fh}function dd(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?re():536870912,i.lanes|=s,Ul|=s)}function rc(i,s){if(!at)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function kt(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(s)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=f,i.childLanes=c,s}function YT(i,s,c){var f=s.pendingProps;switch(ah(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(s),null;case 1:return kt(s),null;case 3:return c=s.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Ma(Yt),ue(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(zl(s)?Ia(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sh())),kt(s),null;case 26:var y=s.type,N=s.memoizedState;return i===null?(Ia(s),N!==null?(kt(s),Z_(s,N)):(kt(s),Wh(s,y,null,f,c))):N?N!==i.memoizedState?(Ia(s),kt(s),Z_(s,N)):(kt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==f&&Ia(s),kt(s),Wh(s,y,i,f,c)),null;case 27:if(V(s),c=F.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&Ia(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return kt(s),null}i=xe.current,zl(s)?O0(s):(i=i1(y,f,c),s.stateNode=i,Ia(s))}return kt(s),null;case 5:if(V(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&Ia(s);else{if(!f){if(s.stateNode===null)throw Error(a(166));return kt(s),null}if(N=xe.current,zl(s))O0(s);else{var O=Cd(F.current);switch(N){case 1:N=O.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:N=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":N=O.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":N=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":N=O.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof f.is=="string"?O.createElement("select",{is:f.is}):O.createElement("select"),f.multiple?N.multiple=!0:f.size&&(N.size=f.size);break;default:N=typeof f.is=="string"?O.createElement(y,{is:f.is}):O.createElement(y)}}N[_r]=s,N[Yr]=f;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)N.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=N;e:switch(Cr(N,y,f),y){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Ia(s)}}return kt(s),Wh(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,c),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==f&&Ia(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(a(166));if(i=F.current,zl(s)){if(i=s.stateNode,c=s.memoizedProps,f=null,y=Nr,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}i[_r]=s,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||YN(i.nodeValue,c)),i||_i(s,!0)}else i=Cd(i).createTextNode(f),i[_r]=s,s.stateNode=i}return kt(s),null;case 31:if(c=s.memoizedState,i===null||i.memoizedState!==null){if(f=zl(s),c!==null){if(i===null){if(!f)throw Error(a(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[_r]=s}else xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;kt(s),i=!1}else c=sh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return s.flags&256?(un(s),s):(un(s),null);if((s.flags&128)!==0)throw Error(a(558))}return kt(s),null;case 13:if(f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=zl(s),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(a(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(a(317));y[_r]=s}else xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;kt(s),y=!1}else y=sh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(un(s),s):(un(s),null)}return un(s),(s.flags&128)!==0?(s.lanes=c,s):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=s.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool),N=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(N=f.memoizedState.cachePool.pool),N!==y&&(f.flags|=2048)),c!==i&&c&&(s.child.flags|=8192),dd(s,s.updateQueue),kt(s),null);case 4:return ue(),i===null&&xv(s.stateNode.containerInfo),kt(s),null;case 10:return Ma(s.type),kt(s),null;case 19:if(W(Ht),f=s.memoizedState,f===null)return kt(s),null;if(y=(s.flags&128)!==0,N=f.rendering,N===null)if(y)rc(f,!1);else{if(Lt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(N=Zu(i),N!==null){for(s.flags|=128,rc(f,!1),i=N.updateQueue,s.updateQueue=i,dd(s,i),s.subtreeFlags=0,i=c,c=s.child;c!==null;)C0(c,i),c=c.sibling;return ce(Ht,Ht.current&1|2),at&&Da(s,f.treeForkCount),s.child}i=i.sibling}f.tail!==null&&Le()>vd&&(s.flags|=128,y=!0,rc(f,!1),s.lanes=4194304)}else{if(!y)if(i=Zu(N),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,dd(s,i),rc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!N.alternate&&!at)return kt(s),null}else 2*Le()-f.renderingStartTime>vd&&c!==536870912&&(s.flags|=128,y=!0,rc(f,!1),s.lanes=4194304);f.isBackwards?(N.sibling=s.child,s.child=N):(i=f.last,i!==null?i.sibling=N:s.child=N,f.last=N)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Le(),i.sibling=null,c=Ht.current,ce(Ht,y?c&1|2:c&1),at&&Da(s,f.treeForkCount),i):(kt(s),null);case 22:case 23:return un(s),bh(),f=s.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(kt(s),s.subtreeFlags&6&&(s.flags|=8192)):kt(s),c=s.updateQueue,c!==null&&dd(s,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),i!==null&&W(js),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ma(Yt),kt(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function KT(i,s){switch(ah(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ma(Yt),ue(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return V(s),null;case 31:if(s.memoizedState!==null){if(un(s),s.alternate===null)throw Error(a(340));xs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(un(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(a(340));xs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return W(Ht),null;case 4:return ue(),null;case 10:return Ma(s.type),null;case 22:case 23:return un(s),bh(),i!==null&&W(js),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Ma(Yt),null;case 25:return null;default:return null}}function J_(i,s){switch(ah(s),s.tag){case 3:Ma(Yt),ue();break;case 26:case 27:case 5:V(s);break;case 4:ue();break;case 31:s.memoizedState!==null&&un(s);break;case 13:un(s);break;case 19:W(Ht);break;case 10:Ma(s.type);break;case 22:case 23:un(s),bh(),i!==null&&W(js);break;case 24:Ma(Yt)}}function nc(i,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var y=f.next;c=y;do{if((c.tag&i)===i){f=void 0;var N=c.create,O=c.inst;f=N(),O.destroy=f}c=c.next}while(c!==y)}}catch(R){ht(s,s.return,R)}}function zi(i,s,c){try{var f=s.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var N=y.next;f=N;do{if((f.tag&i)===i){var O=f.inst,R=O.destroy;if(R!==void 0){O.destroy=void 0,y=s;var G=c,le=R;try{le()}catch(ge){ht(y,G,ge)}}}f=f.next}while(f!==N)}}catch(ge){ht(s,s.return,ge)}}function eN(i){var s=i.updateQueue;if(s!==null){var c=i.stateNode;try{G0(s,c)}catch(f){ht(i,i.return,f)}}}function tN(i,s,c){c.props=Cs(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){ht(i,s,f)}}function ac(i,s){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(y){ht(i,s,y)}}function ua(i,s){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(y){ht(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){ht(i,s,y)}else c.current=null}function rN(i){var s=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(y){ht(i,i.return,y)}}function Xh(i,s,c){try{var f=i.stateNode;gq(f,i.type,c,s),f[Yr]=s}catch(y){ht(i,i.return,y)}}function nN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&qi(i.type)||i.tag===4}function Zh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||nN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&qi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jh(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(i),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=za));else if(f!==4&&(f===27&&qi(i.type)&&(c=i.stateNode,s=null),i=i.child,i!==null))for(Jh(i,s,c),i=i.sibling;i!==null;)Jh(i,s,c),i=i.sibling}function md(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(f!==4&&(f===27&&qi(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(md(i,s,c),i=i.sibling;i!==null;)md(i,s,c),i=i.sibling}function aN(i){var s=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Cr(s,f,c),s[_r]=i,s[Yr]=c}catch(N){ht(i,i.return,N)}}var La=!1,Xt=!1,ev=!1,iN=typeof WeakSet=="function"?WeakSet:Set,ur=null;function WT(i,s){if(i=i.containerInfo,jv=Pd,i=g0(i),Qp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var y=f.anchorOffset,N=f.focusNode;f=f.focusOffset;try{c.nodeType,N.nodeType}catch{c=null;break e}var O=0,R=-1,G=-1,le=0,ge=0,ye=i,oe=null;t:for(;;){for(var fe;ye!==c||y!==0&&ye.nodeType!==3||(R=O+y),ye!==N||f!==0&&ye.nodeType!==3||(G=O+f),ye.nodeType===3&&(O+=ye.nodeValue.length),(fe=ye.firstChild)!==null;)oe=ye,ye=fe;for(;;){if(ye===i)break t;if(oe===c&&++le===y&&(R=O),oe===N&&++ge===f&&(G=O),(fe=ye.nextSibling)!==null)break;ye=oe,oe=ye.parentNode}ye=fe}c=R===-1||G===-1?null:{start:R,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(_v={focusedElem:i,selectionRange:c},Pd=!1,ur=s;ur!==null;)if(s=ur,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ur=i;else for(;ur!==null;){switch(s=ur,N=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)y=i[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&N!==null){i=void 0,c=s,y=N.memoizedProps,N=N.memoizedState,f=c.stateNode;try{var ke=Cs(c.type,y);i=f.getSnapshotBeforeUpdate(ke,N),f.__reactInternalSnapshotBeforeUpdate=i}catch(Fe){ht(c,c.return,Fe)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,c=i.nodeType,c===9)wv(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":wv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=s.sibling,i!==null){i.return=s.return,ur=i;break}ur=s.return}}function sN(i,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Ba(i,c),f&4&&nc(5,c);break;case 1:if(Ba(i,c),f&4)if(i=c.stateNode,s===null)try{i.componentDidMount()}catch(O){ht(c,c.return,O)}else{var y=Cs(c.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(O){ht(c,c.return,O)}}f&64&&eN(c),f&512&&ac(c,c.return);break;case 3:if(Ba(i,c),f&64&&(i=c.updateQueue,i!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{G0(i,s)}catch(O){ht(c,c.return,O)}}break;case 27:s===null&&f&4&&aN(c);case 26:case 5:Ba(i,c),s===null&&f&4&&rN(c),f&512&&ac(c,c.return);break;case 12:Ba(i,c);break;case 31:Ba(i,c),f&4&&cN(i,c);break;case 13:Ba(i,c),f&4&&uN(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=iq.bind(null,c),wq(i,c))));break;case 22:if(f=c.memoizedState!==null||La,!f){s=s!==null&&s.memoizedState!==null||Xt,y=La;var N=Xt;La=f,(Xt=s)&&!N?Ua(i,c,(c.subtreeFlags&8772)!==0):Ba(i,c),La=y,Xt=N}break;case 30:break;default:Ba(i,c)}}function lN(i){var s=i.alternate;s!==null&&(i.alternate=null,lN(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&kp(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Pt=null,Wr=!1;function $a(i,s,c){for(c=c.child;c!==null;)oN(i,s,c),c=c.sibling}function oN(i,s,c){if(ie&&typeof ie.onCommitFiberUnmount=="function")try{ie.onCommitFiberUnmount(K,c)}catch{}switch(c.tag){case 26:Xt||ua(c,s),$a(i,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Xt||ua(c,s);var f=Pt,y=Wr;qi(c.type)&&(Pt=c.stateNode,Wr=!1),$a(i,s,c),fc(c.stateNode),Pt=f,Wr=y;break;case 5:Xt||ua(c,s);case 6:if(f=Pt,y=Wr,Pt=null,$a(i,s,c),Pt=f,Wr=y,Pt!==null)if(Wr)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(c.stateNode)}catch(N){ht(c,s,N)}else try{Pt.removeChild(c.stateNode)}catch(N){ht(c,s,N)}break;case 18:Pt!==null&&(Wr?(i=Pt,e1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Wl(i)):e1(Pt,c.stateNode));break;case 4:f=Pt,y=Wr,Pt=c.stateNode.containerInfo,Wr=!0,$a(i,s,c),Pt=f,Wr=y;break;case 0:case 11:case 14:case 15:zi(2,c,s),Xt||zi(4,c,s),$a(i,s,c);break;case 1:Xt||(ua(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&tN(c,s,f)),$a(i,s,c);break;case 21:$a(i,s,c);break;case 22:Xt=(f=Xt)||c.memoizedState!==null,$a(i,s,c),Xt=f;break;default:$a(i,s,c)}}function cN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Wl(i)}catch(c){ht(s,s.return,c)}}}function uN(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Wl(i)}catch(c){ht(s,s.return,c)}}function XT(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new iN),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new iN),s;default:throw Error(a(435,i.tag))}}function fd(i,s){var c=XT(i);s.forEach(function(f){if(!c.has(f)){c.add(f);var y=sq.bind(null,i,f);f.then(y,y)}})}function Xr(i,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var y=c[f],N=i,O=s,R=O;e:for(;R!==null;){switch(R.tag){case 27:if(qi(R.type)){Pt=R.stateNode,Wr=!1;break e}break;case 5:Pt=R.stateNode,Wr=!1;break e;case 3:case 4:Pt=R.stateNode.containerInfo,Wr=!0;break e}R=R.return}if(Pt===null)throw Error(a(160));oN(N,O,y),Pt=null,Wr=!1,N=y.alternate,N!==null&&(N.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)dN(s,i),s=s.sibling}var Qn=null;function dN(i,s){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Xr(s,i),Zr(i),f&4&&(zi(3,i,i.return),nc(3,i),zi(5,i,i.return));break;case 1:Xr(s,i),Zr(i),f&512&&(Xt||c===null||ua(c,c.return)),f&64&&La&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var y=Qn;if(Xr(s,i),Zr(i),f&512&&(Xt||c===null||ua(c,c.return)),f&4){var N=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":N=y.getElementsByTagName("title")[0],(!N||N[Oo]||N[_r]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=y.createElement(f),y.head.insertBefore(N,y.querySelector("head > title"))),Cr(N,f,c),N[_r]=i,cr(N),f=N;break e;case"link":var O=d1("link","href",y).get(f+(c.href||""));if(O){for(var R=0;R<O.length;R++)if(N=O[R],N.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&N.getAttribute("rel")===(c.rel==null?null:c.rel)&&N.getAttribute("title")===(c.title==null?null:c.title)&&N.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(R,1);break t}}N=y.createElement(f),Cr(N,f,c),y.head.appendChild(N);break;case"meta":if(O=d1("meta","content",y).get(f+(c.content||""))){for(R=0;R<O.length;R++)if(N=O[R],N.getAttribute("content")===(c.content==null?null:""+c.content)&&N.getAttribute("name")===(c.name==null?null:c.name)&&N.getAttribute("property")===(c.property==null?null:c.property)&&N.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&N.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(R,1);break t}}N=y.createElement(f),Cr(N,f,c),y.head.appendChild(N);break;default:throw Error(a(468,f))}N[_r]=i,cr(N),f=N}i.stateNode=f}else m1(y,i.type,i.stateNode);else i.stateNode=u1(y,f,i.memoizedProps);else N!==f?(N===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):N.count--,f===null?m1(y,i.type,i.stateNode):u1(y,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Xh(i,i.memoizedProps,c.memoizedProps)}break;case 27:Xr(s,i),Zr(i),f&512&&(Xt||c===null||ua(c,c.return)),c!==null&&f&4&&Xh(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Xr(s,i),Zr(i),f&512&&(Xt||c===null||ua(c,c.return)),i.flags&32){y=i.stateNode;try{bl(y,"")}catch(ke){ht(i,i.return,ke)}}f&4&&i.stateNode!=null&&(y=i.memoizedProps,Xh(i,y,c!==null?c.memoizedProps:y)),f&1024&&(ev=!0);break;case 6:if(Xr(s,i),Zr(i),f&4){if(i.stateNode===null)throw Error(a(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(ke){ht(i,i.return,ke)}}break;case 3:if(zd=null,y=Qn,Qn=Ed(s.containerInfo),Xr(s,i),Qn=y,Zr(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Wl(s.containerInfo)}catch(ke){ht(i,i.return,ke)}ev&&(ev=!1,mN(i));break;case 4:f=Qn,Qn=Ed(i.stateNode.containerInfo),Xr(s,i),Zr(i),Qn=f;break;case 12:Xr(s,i),Zr(i);break;case 31:Xr(s,i),Zr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,fd(i,f)));break;case 13:Xr(s,i),Zr(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(hd=Le()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,fd(i,f)));break;case 22:y=i.memoizedState!==null;var G=c!==null&&c.memoizedState!==null,le=La,ge=Xt;if(La=le||y,Xt=ge||G,Xr(s,i),Xt=ge,La=le,Zr(i),f&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(c===null||G||La||Xt||Es(i)),c=null,s=i;;){if(s.tag===5||s.tag===26){if(c===null){G=c=s;try{if(N=G.stateNode,y)O=N.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{R=G.stateNode;var ye=G.memoizedProps.style,oe=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;R.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ke){ht(G,G.return,ke)}}}else if(s.tag===6){if(c===null){G=s;try{G.stateNode.nodeValue=y?"":G.memoizedProps}catch(ke){ht(G,G.return,ke)}}}else if(s.tag===18){if(c===null){G=s;try{var fe=G.stateNode;y?t1(fe,!0):t1(G.stateNode,!1)}catch(ke){ht(G,G.return,ke)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,fd(i,c))));break;case 19:Xr(s,i),Zr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,fd(i,f)));break;case 30:break;case 21:break;default:Xr(s,i),Zr(i)}}function Zr(i){var s=i.flags;if(s&2){try{for(var c,f=i.return;f!==null;){if(nN(f)){c=f;break}f=f.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var y=c.stateNode,N=Zh(i);md(i,N,y);break;case 5:var O=c.stateNode;c.flags&32&&(bl(O,""),c.flags&=-33);var R=Zh(i);md(i,R,O);break;case 3:case 4:var G=c.stateNode.containerInfo,le=Zh(i);Jh(i,le,G);break;default:throw Error(a(161))}}catch(ge){ht(i,i.return,ge)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function mN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;mN(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Ba(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)sN(i,s.alternate,s),s=s.sibling}function Es(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:zi(4,s,s.return),Es(s);break;case 1:ua(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&tN(s,s.return,c),Es(s);break;case 27:fc(s.stateNode);case 26:case 5:ua(s,s.return),Es(s);break;case 22:s.memoizedState===null&&Es(s);break;case 30:Es(s);break;default:Es(s)}i=i.sibling}}function Ua(i,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,y=i,N=s,O=N.flags;switch(N.tag){case 0:case 11:case 15:Ua(y,N,c),nc(4,N);break;case 1:if(Ua(y,N,c),f=N,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(le){ht(f,f.return,le)}if(f=N,y=f.updateQueue,y!==null){var R=f.stateNode;try{var G=y.shared.hiddenCallbacks;if(G!==null)for(y.shared.hiddenCallbacks=null,y=0;y<G.length;y++)F0(G[y],R)}catch(le){ht(f,f.return,le)}}c&&O&64&&eN(N),ac(N,N.return);break;case 27:aN(N);case 26:case 5:Ua(y,N,c),c&&f===null&&O&4&&rN(N),ac(N,N.return);break;case 12:Ua(y,N,c);break;case 31:Ua(y,N,c),c&&O&4&&cN(y,N);break;case 13:Ua(y,N,c),c&&O&4&&uN(y,N);break;case 22:N.memoizedState===null&&Ua(y,N,c),ac(N,N.return);break;case 30:break;default:Ua(y,N,c)}s=s.sibling}}function tv(i,s){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Go(c))}function rv(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Go(i))}function Yn(i,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fN(i,s,c,f),s=s.sibling}function fN(i,s,c,f){var y=s.flags;switch(s.tag){case 0:case 11:case 15:Yn(i,s,c,f),y&2048&&nc(9,s);break;case 1:Yn(i,s,c,f);break;case 3:Yn(i,s,c,f),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Go(i)));break;case 12:if(y&2048){Yn(i,s,c,f),i=s.stateNode;try{var N=s.memoizedProps,O=N.id,R=N.onPostCommit;typeof R=="function"&&R(O,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(G){ht(s,s.return,G)}}else Yn(i,s,c,f);break;case 31:Yn(i,s,c,f);break;case 13:Yn(i,s,c,f);break;case 23:break;case 22:N=s.stateNode,O=s.alternate,s.memoizedState!==null?N._visibility&2?Yn(i,s,c,f):ic(i,s):N._visibility&2?Yn(i,s,c,f):(N._visibility|=2,Ll(i,s,c,f,(s.subtreeFlags&10256)!==0||!1)),y&2048&&tv(O,s);break;case 24:Yn(i,s,c,f),y&2048&&rv(s.alternate,s);break;default:Yn(i,s,c,f)}}function Ll(i,s,c,f,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var N=i,O=s,R=c,G=f,le=O.flags;switch(O.tag){case 0:case 11:case 15:Ll(N,O,R,G,y),nc(8,O);break;case 23:break;case 22:var ge=O.stateNode;O.memoizedState!==null?ge._visibility&2?Ll(N,O,R,G,y):ic(N,O):(ge._visibility|=2,Ll(N,O,R,G,y)),y&&le&2048&&tv(O.alternate,O);break;case 24:Ll(N,O,R,G,y),y&&le&2048&&rv(O.alternate,O);break;default:Ll(N,O,R,G,y)}s=s.sibling}}function ic(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=i,f=s,y=f.flags;switch(f.tag){case 22:ic(c,f),y&2048&&tv(f.alternate,f);break;case 24:ic(c,f),y&2048&&rv(f.alternate,f);break;default:ic(c,f)}s=s.sibling}}var sc=8192;function $l(i,s,c){if(i.subtreeFlags&sc)for(i=i.child;i!==null;)pN(i,s,c),i=i.sibling}function pN(i,s,c){switch(i.tag){case 26:$l(i,s,c),i.flags&sc&&i.memoizedState!==null&&Rq(c,Qn,i.memoizedState,i.memoizedProps);break;case 5:$l(i,s,c);break;case 3:case 4:var f=Qn;Qn=Ed(i.stateNode.containerInfo),$l(i,s,c),Qn=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=sc,sc=16777216,$l(i,s,c),sc=f):$l(i,s,c));break;default:$l(i,s,c)}}function hN(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function lc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];ur=f,gN(f,i)}hN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vN(i),i=i.sibling}function vN(i){switch(i.tag){case 0:case 11:case 15:lc(i),i.flags&2048&&zi(9,i,i.return);break;case 3:lc(i);break;case 12:lc(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,pd(i)):lc(i);break;default:lc(i)}}function pd(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];ur=f,gN(f,i)}hN(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:zi(8,s,s.return),pd(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,pd(s));break;default:pd(s)}i=i.sibling}}function gN(i,s){for(;ur!==null;){var c=ur;switch(c.tag){case 0:case 11:case 15:zi(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Go(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,ur=f;else e:for(c=i;ur!==null;){f=ur;var y=f.sibling,N=f.return;if(lN(f),f===c){ur=null;break e}if(y!==null){y.return=N,ur=y;break e}ur=N}}}var ZT={getCacheForType:function(i){var s=Sr(Yt),c=s.data.get(i);return c===void 0&&(c=i(),s.data.set(i,c)),c},cacheSignal:function(){return Sr(Yt).controller.signal}},JT=typeof WeakMap=="function"?WeakMap:Map,mt=0,St=null,Je=null,rt=0,pt=0,dn=null,ki=!1,Bl=!1,nv=!1,Fa=0,Lt=0,Oi=0,As=0,av=0,mn=0,Ul=0,oc=null,Jr=null,iv=!1,hd=0,xN=0,vd=1/0,gd=null,Di=null,ar=0,Pi=null,Fl=null,Ga=0,sv=0,lv=null,bN=null,cc=0,ov=null;function fn(){return(mt&2)!==0&&rt!==0?rt&-rt:q.T!==null?pv():Tj()}function yN(){if(mn===0)if((rt&536870912)===0||at){var i=cl;cl<<=1,(cl&3932160)===0&&(cl=262144),mn=i}else mn=536870912;return i=cn.current,i!==null&&(i.flags|=32),mn}function en(i,s,c){(i===St&&(pt===2||pt===9)||i.cancelPendingCommit!==null)&&(Gl(i,0),Mi(i,rt,mn,!1)),ft(i,c),((mt&2)===0||i!==St)&&(i===St&&((mt&2)===0&&(As|=c),Lt===4&&Mi(i,rt,mn,!1)),da(i))}function jN(i,s,c){if((mt&6)!==0)throw Error(a(327));var f=!c&&(s&127)===0&&(s&i.expiredLanes)===0||Hn(i,s),y=f?rq(i,s):uv(i,s,!0),N=f;do{if(y===0){Bl&&!f&&Mi(i,s,0,!1);break}else{if(c=i.current.alternate,N&&!eq(c)){y=uv(i,s,!1),N=!1;continue}if(y===2){if(N=s,i.errorRecoveryDisabledLanes&N)var O=0;else O=i.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var R=i;y=oc;var G=R.current.memoizedState.isDehydrated;if(G&&(Gl(R,O).flags|=256),O=uv(R,O,!1),O!==2){if(nv&&!G){R.errorRecoveryDisabledLanes|=N,As|=N,y=4;break e}N=Jr,Jr=y,N!==null&&(Jr===null?Jr=N:Jr.push.apply(Jr,N))}y=O}if(N=!1,y!==2)continue}}if(y===1){Gl(i,0),Mi(i,s,0,!0);break}e:{switch(f=i,N=y,N){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Mi(f,s,mn,!ki);break e;case 2:Jr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(y=hd+300-Le(),10<y)){if(Mi(f,s,mn,!ki),dl(f,0,!0)!==0)break e;Ga=s,f.timeoutHandle=ZN(_N.bind(null,f,c,Jr,gd,iv,s,mn,As,Ul,ki,N,"Throttled",-0,0),y);break e}_N(f,c,Jr,gd,iv,s,mn,As,Ul,ki,N,null,-0,0)}}break}while(!0);da(i)}function _N(i,s,c,f,y,N,O,R,G,le,ge,ye,oe,fe){if(i.timeoutHandle=-1,ye=s.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:za},pN(s,N,ye);var ke=(N&62914560)===N?hd-Le():(N&4194048)===N?xN-Le():0;if(ke=Iq(ye,ke),ke!==null){Ga=N,i.cancelPendingCommit=ke(kN.bind(null,i,s,N,c,f,y,O,R,G,ge,ye,null,oe,fe)),Mi(i,N,O,!le);return}}kN(i,s,N,c,f,y,O,R,G)}function eq(i){for(var s=i;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var y=c[f],N=y.getSnapshot;y=y.value;try{if(!ln(N(),y))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Mi(i,s,c,f){s&=~av,s&=~As,i.suspendedLanes|=s,i.pingedLanes&=~s,f&&(i.warmLanes|=s),f=i.expirationTimes;for(var y=s;0<y;){var N=31-Qe(y),O=1<<N;f[N]=-1,y&=~O}c!==0&&ml(i,c,s)}function xd(){return(mt&6)===0?(uc(0),!1):!0}function cv(){if(Je!==null){if(pt===0)var i=Je.return;else i=Je,Pa=bs=null,wh(i),Ml=null,Vo=0,i=Je;for(;i!==null;)J_(i.alternate,i),i=i.return;Je=null}}function Gl(i,s){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,yq(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Ga=0,cv(),St=i,Je=c=Oa(i.current,null),rt=s,pt=0,dn=null,ki=!1,Bl=Hn(i,s),nv=!1,Ul=mn=av=As=Oi=Lt=0,Jr=oc=null,iv=!1,(s&8)!==0&&(s|=s&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=s;0<f;){var y=31-Qe(f),N=1<<y;s|=i[y],f&=~N}return Fa=s,Lu(),c}function NN(i,s){Ye=null,q.H=ec,s===Pl||s===Qu?(s=L0(),pt=3):s===fh?(s=L0(),pt=4):pt=s===Bh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,dn=s,Je===null&&(Lt=1,ld(i,wn(s,i.current)))}function SN(){var i=cn.current;return i===null?!0:(rt&4194048)===rt?zn===null:(rt&62914560)===rt||(rt&536870912)!==0?i===zn:!1}function wN(){var i=q.H;return q.H=ec,i===null?ec:i}function CN(){var i=q.A;return q.A=ZT,i}function bd(){Lt=4,ki||(rt&4194048)!==rt&&cn.current!==null||(Bl=!0),(Oi&134217727)===0&&(As&134217727)===0||St===null||Mi(St,rt,mn,!1)}function uv(i,s,c){var f=mt;mt|=2;var y=wN(),N=CN();(St!==i||rt!==s)&&(gd=null,Gl(i,s)),s=!1;var O=Lt;e:do try{if(pt!==0&&Je!==null){var R=Je,G=dn;switch(pt){case 8:cv(),O=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(s=!0);var le=pt;if(pt=0,dn=null,Hl(i,R,G,le),c&&Bl){O=0;break e}break;default:le=pt,pt=0,dn=null,Hl(i,R,G,le)}}tq(),O=Lt;break}catch(ge){NN(i,ge)}while(!0);return s&&i.shellSuspendCounter++,Pa=bs=null,mt=f,q.H=y,q.A=N,Je===null&&(St=null,rt=0,Lu()),O}function tq(){for(;Je!==null;)EN(Je)}function rq(i,s){var c=mt;mt|=2;var f=wN(),y=CN();St!==i||rt!==s?(gd=null,vd=Le()+500,Gl(i,s)):Bl=Hn(i,s);e:do try{if(pt!==0&&Je!==null){s=Je;var N=dn;t:switch(pt){case 1:pt=0,dn=null,Hl(i,s,N,1);break;case 2:case 9:if(R0(N)){pt=0,dn=null,AN(s);break}s=function(){pt!==2&&pt!==9||St!==i||(pt=7),da(i)},N.then(s,s);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:R0(N)?(pt=0,dn=null,AN(s)):(pt=0,dn=null,Hl(i,s,N,7));break;case 5:var O=null;switch(Je.tag){case 26:O=Je.memoizedState;case 5:case 27:var R=Je;if(O?f1(O):R.stateNode.complete){pt=0,dn=null;var G=R.sibling;if(G!==null)Je=G;else{var le=R.return;le!==null?(Je=le,yd(le)):Je=null}break t}}pt=0,dn=null,Hl(i,s,N,5);break;case 6:pt=0,dn=null,Hl(i,s,N,6);break;case 8:cv(),Lt=6;break e;default:throw Error(a(462))}}nq();break}catch(ge){NN(i,ge)}while(!0);return Pa=bs=null,q.H=f,q.A=y,mt=c,Je!==null?0:(St=null,rt=0,Lu(),Lt)}function nq(){for(;Je!==null&&!pe();)EN(Je)}function EN(i){var s=X_(i.alternate,i,Fa);i.memoizedProps=i.pendingProps,s===null?yd(i):Je=s}function AN(i){var s=i,c=s.alternate;switch(s.tag){case 15:case 0:s=H_(c,s,s.pendingProps,s.type,void 0,rt);break;case 11:s=H_(c,s,s.pendingProps,s.type.render,s.ref,rt);break;case 5:wh(s);default:J_(c,s),s=Je=C0(s,Fa),s=X_(c,s,Fa)}i.memoizedProps=i.pendingProps,s===null?yd(i):Je=s}function Hl(i,s,c,f){Pa=bs=null,wh(s),Ml=null,Vo=0;var y=s.return;try{if(HT(i,y,s,c,rt)){Lt=1,ld(i,wn(c,i.current)),Je=null;return}}catch(N){if(y!==null)throw Je=y,N;Lt=1,ld(i,wn(c,i.current)),Je=null;return}s.flags&32768?(at||f===1?i=!0:Bl||(rt&536870912)!==0?i=!1:(ki=i=!0,(f===2||f===9||f===3||f===6)&&(f=cn.current,f!==null&&f.tag===13&&(f.flags|=16384))),zN(s,i)):yd(s)}function yd(i){var s=i;do{if((s.flags&32768)!==0){zN(s,ki);return}i=s.return;var c=YT(s.alternate,s,Fa);if(c!==null){Je=c;return}if(s=s.sibling,s!==null){Je=s;return}Je=s=i}while(s!==null);Lt===0&&(Lt=5)}function zN(i,s){do{var c=KT(i.alternate,i);if(c!==null){c.flags&=32767,Je=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(i=i.sibling,i!==null)){Je=i;return}Je=i=c}while(i!==null);Lt=6,Je=null}function kN(i,s,c,f,y,N,O,R,G){i.cancelPendingCommit=null;do jd();while(ar!==0);if((mt&6)!==0)throw Error(a(327));if(s!==null){if(s===i.current)throw Error(a(177));if(N=s.lanes|s.childLanes,N|=Zp,jn(i,c,N,O,R,G),i===St&&(Je=St=null,rt=0),Fl=s,Pi=i,Ga=c,sv=N,lv=y,bN=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,lq(nr,function(){return TN(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=q.T,q.T=null,y=U.p,U.p=2,O=mt,mt|=4;try{WT(i,s,c)}finally{mt=O,U.p=y,q.T=f}}ar=1,ON(),DN(),PN()}}function ON(){if(ar===1){ar=0;var i=Pi,s=Fl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=q.T,q.T=null;var f=U.p;U.p=2;var y=mt;mt|=4;try{dN(s,i);var N=_v,O=g0(i.containerInfo),R=N.focusedElem,G=N.selectionRange;if(O!==R&&R&&R.ownerDocument&&v0(R.ownerDocument.documentElement,R)){if(G!==null&&Qp(R)){var le=G.start,ge=G.end;if(ge===void 0&&(ge=le),"selectionStart"in R)R.selectionStart=le,R.selectionEnd=Math.min(ge,R.value.length);else{var ye=R.ownerDocument||document,oe=ye&&ye.defaultView||window;if(oe.getSelection){var fe=oe.getSelection(),ke=R.textContent.length,Fe=Math.min(G.start,ke),jt=G.end===void 0?Fe:Math.min(G.end,ke);!fe.extend&&Fe>jt&&(O=jt,jt=Fe,Fe=O);var ne=h0(R,Fe),X=h0(R,jt);if(ne&&X&&(fe.rangeCount!==1||fe.anchorNode!==ne.node||fe.anchorOffset!==ne.offset||fe.focusNode!==X.node||fe.focusOffset!==X.offset)){var se=ye.createRange();se.setStart(ne.node,ne.offset),fe.removeAllRanges(),Fe>jt?(fe.addRange(se),fe.extend(X.node,X.offset)):(se.setEnd(X.node,X.offset),fe.addRange(se))}}}}for(ye=[],fe=R;fe=fe.parentNode;)fe.nodeType===1&&ye.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ye.length;R++){var be=ye[R];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Pd=!!jv,_v=jv=null}finally{mt=y,U.p=f,q.T=c}}i.current=s,ar=2}}function DN(){if(ar===2){ar=0;var i=Pi,s=Fl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=q.T,q.T=null;var f=U.p;U.p=2;var y=mt;mt|=4;try{sN(i,s.alternate,s)}finally{mt=y,U.p=f,q.T=c}}ar=3}}function PN(){if(ar===4||ar===3){ar=0,Oe();var i=Pi,s=Fl,c=Ga,f=bN;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ar=5:(ar=0,Fl=Pi=null,MN(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Di=null),Ap(c),s=s.stateNode,ie&&typeof ie.onCommitFiberRoot=="function")try{ie.onCommitFiberRoot(K,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=q.T,y=U.p,U.p=2,q.T=null;try{for(var N=i.onRecoverableError,O=0;O<f.length;O++){var R=f[O];N(R.value,{componentStack:R.stack})}}finally{q.T=s,U.p=y}}(Ga&3)!==0&&jd(),da(i),y=i.pendingLanes,(c&261930)!==0&&(y&42)!==0?i===ov?cc++:(cc=0,ov=i):cc=0,uc(0)}}function MN(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Go(s)))}function jd(){return ON(),DN(),PN(),TN()}function TN(){if(ar!==5)return!1;var i=Pi,s=sv;sv=0;var c=Ap(Ga),f=q.T,y=U.p;try{U.p=32>c?32:c,q.T=null,c=lv,lv=null;var N=Pi,O=Ga;if(ar=0,Fl=Pi=null,Ga=0,(mt&6)!==0)throw Error(a(331));var R=mt;if(mt|=4,vN(N.current),fN(N,N.current,O,c),mt=R,uc(0,!1),ie&&typeof ie.onPostCommitFiberRoot=="function")try{ie.onPostCommitFiberRoot(K,N)}catch{}return!0}finally{U.p=y,q.T=f,MN(i,s)}}function qN(i,s,c){s=wn(c,s),s=$h(i.stateNode,s,2),i=Ci(i,s,2),i!==null&&(ft(i,2),da(i))}function ht(i,s,c){if(i.tag===3)qN(i,i,c);else for(;s!==null;){if(s.tag===3){qN(s,i,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Di===null||!Di.has(f))){i=wn(c,i),c=R_(2),f=Ci(s,c,2),f!==null&&(I_(c,f,s,i),ft(f,2),da(f));break}}s=s.return}}function dv(i,s,c){var f=i.pingCache;if(f===null){f=i.pingCache=new JT;var y=new Set;f.set(s,y)}else y=f.get(s),y===void 0&&(y=new Set,f.set(s,y));y.has(c)||(nv=!0,y.add(c),i=aq.bind(null,i,s,c),s.then(i,i))}function aq(i,s,c){var f=i.pingCache;f!==null&&f.delete(s),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,St===i&&(rt&c)===c&&(Lt===4||Lt===3&&(rt&62914560)===rt&&300>Le()-hd?(mt&2)===0&&Gl(i,0):av|=c,Ul===rt&&(Ul=0)),da(i)}function RN(i,s){s===0&&(s=re()),i=vs(i,s),i!==null&&(ft(i,s),da(i))}function iq(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),RN(i,c)}function sq(i,s){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(s),RN(i,c)}function lq(i,s){return Or(i,s)}var _d=null,Vl=null,mv=!1,Nd=!1,fv=!1,Ti=0;function da(i){i!==Vl&&i.next===null&&(Vl===null?_d=Vl=i:Vl=Vl.next=i),Nd=!0,mv||(mv=!0,cq())}function uc(i,s){if(!fv&&Nd){fv=!0;do for(var c=!1,f=_d;f!==null;){if(i!==0){var y=f.pendingLanes;if(y===0)var N=0;else{var O=f.suspendedLanes,R=f.pingedLanes;N=(1<<31-Qe(42|i)+1)-1,N&=y&~(O&~R),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(c=!0,BN(f,N))}else N=rt,N=dl(f,f===St?N:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(N&3)===0||Hn(f,N)||(c=!0,BN(f,N));f=f.next}while(c);fv=!1}}function oq(){IN()}function IN(){Nd=mv=!1;var i=0;Ti!==0&&bq()&&(i=Ti);for(var s=Le(),c=null,f=_d;f!==null;){var y=f.next,N=LN(f,s);N===0?(f.next=null,c===null?_d=y:c.next=y,y===null&&(Vl=c)):(c=f,(i!==0||(N&3)!==0)&&(Nd=!0)),f=y}ar!==0&&ar!==5||uc(i),Ti!==0&&(Ti=0)}function LN(i,s){for(var c=i.suspendedLanes,f=i.pingedLanes,y=i.expirationTimes,N=i.pendingLanes&-62914561;0<N;){var O=31-Qe(N),R=1<<O,G=y[O];G===-1?((R&c)===0||(R&f)!==0)&&(y[O]=Cp(R,s)):G<=s&&(i.expiredLanes|=R),N&=~R}if(s=St,c=rt,c=dl(i,i===s?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===s&&(pt===2||pt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&sn(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Hn(i,c)){if(s=c&-c,s===i.callbackPriority)return s;switch(f!==null&&sn(f),Ap(c)){case 2:case 8:c=Rt;break;case 32:c=nr;break;case 268435456:c=Dr;break;default:c=nr}return f=$N.bind(null,i),c=Or(c,f),i.callbackPriority=s,i.callbackNode=c,s}return f!==null&&f!==null&&sn(f),i.callbackPriority=2,i.callbackNode=null,2}function $N(i,s){if(ar!==0&&ar!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(jd()&&i.callbackNode!==c)return null;var f=rt;return f=dl(i,i===St?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(jN(i,f,s),LN(i,Le()),i.callbackNode!=null&&i.callbackNode===c?$N.bind(null,i):null)}function BN(i,s){if(jd())return null;jN(i,s,!0)}function cq(){jq(function(){(mt&6)!==0?Or(dt,oq):IN()})}function pv(){if(Ti===0){var i=Ol;i===0&&(i=la,la<<=1,(la&261888)===0&&(la=256)),Ti=i}return Ti}function UN(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ou(""+i)}function FN(i,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,i.id&&c.setAttribute("form",i.id),s.parentNode.insertBefore(c,s),i=new FormData(i),c.parentNode.removeChild(c),i}function uq(i,s,c,f,y){if(s==="submit"&&c&&c.stateNode===y){var N=UN((y[Yr]||null).action),O=f.submitter;O&&(s=(s=O[Yr]||null)?UN(s.formAction):O.getAttribute("formAction"),s!==null&&(N=s,O=null));var R=new Tu("action","action",null,f,y);i.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ti!==0){var G=O?FN(y,O):new FormData(y);Mh(c,{pending:!0,data:G,method:y.method,action:N},null,G)}}else typeof N=="function"&&(R.preventDefault(),G=O?FN(y,O):new FormData(y),Mh(c,{pending:!0,data:G,method:y.method,action:N},N,G))},currentTarget:y}]})}}for(var hv=0;hv<Xp.length;hv++){var vv=Xp[hv],dq=vv.toLowerCase(),mq=vv[0].toUpperCase()+vv.slice(1);Vn(dq,"on"+mq)}Vn(y0,"onAnimationEnd"),Vn(j0,"onAnimationIteration"),Vn(_0,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(AT,"onTransitionRun"),Vn(zT,"onTransitionStart"),Vn(kT,"onTransitionCancel"),Vn(N0,"onTransitionEnd"),gl("onMouseEnter",["mouseout","mouseover"]),gl("onMouseLeave",["mouseout","mouseover"]),gl("onPointerEnter",["pointerout","pointerover"]),gl("onPointerLeave",["pointerout","pointerover"]),ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dc));function GN(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],y=f.event;f=f.listeners;e:{var N=void 0;if(s)for(var O=f.length-1;0<=O;O--){var R=f[O],G=R.instance,le=R.currentTarget;if(R=R.listener,G!==N&&y.isPropagationStopped())break e;N=R,y.currentTarget=le;try{N(y)}catch(ge){Iu(ge)}y.currentTarget=null,N=G}else for(O=0;O<f.length;O++){if(R=f[O],G=R.instance,le=R.currentTarget,R=R.listener,G!==N&&y.isPropagationStopped())break e;N=R,y.currentTarget=le;try{N(y)}catch(ge){Iu(ge)}y.currentTarget=null,N=G}}}}function et(i,s){var c=s[zp];c===void 0&&(c=s[zp]=new Set);var f=i+"__bubble";c.has(f)||(HN(s,i,2,!1),c.add(f))}function gv(i,s,c){var f=0;s&&(f|=4),HN(c,i,f,s)}var Sd="_reactListening"+Math.random().toString(36).slice(2);function xv(i){if(!i[Sd]){i[Sd]=!0,Ij.forEach(function(c){c!=="selectionchange"&&(fq.has(c)||gv(c,!1,i),gv(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Sd]||(s[Sd]=!0,gv("selectionchange",!1,s))}}function HN(i,s,c,f){switch(y1(s)){case 2:var y=Bq;break;case 8:y=Uq;break;default:y=Pv}c=y.bind(null,s,c,i),y=void 0,!Ip||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),f?y!==void 0?i.addEventListener(s,c,{capture:!0,passive:y}):i.addEventListener(s,c,!0):y!==void 0?i.addEventListener(s,c,{passive:y}):i.addEventListener(s,c,!1)}function bv(i,s,c,f,y){var N=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var O=f.tag;if(O===3||O===4){var R=f.stateNode.containerInfo;if(R===y)break;if(O===4)for(O=f.return;O!==null;){var G=O.tag;if((G===3||G===4)&&O.stateNode.containerInfo===y)return;O=O.return}for(;R!==null;){if(O=pl(R),O===null)return;if(G=O.tag,G===5||G===6||G===26||G===27){f=N=O;continue e}R=R.parentNode}}f=f.return}Wj(function(){var le=N,ge=qp(c),ye=[];e:{var oe=S0.get(i);if(oe!==void 0){var fe=Tu,ke=i;switch(i){case"keypress":if(Pu(c)===0)break e;case"keydown":case"keyup":fe=sT;break;case"focusin":ke="focus",fe=Up;break;case"focusout":ke="blur",fe=Up;break;case"beforeblur":case"afterblur":fe=Up;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Jj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=YM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=cT;break;case y0:case j0:case _0:fe=XM;break;case N0:fe=dT;break;case"scroll":case"scrollend":fe=VM;break;case"wheel":fe=fT;break;case"copy":case"cut":case"paste":fe=JM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=t0;break;case"toggle":case"beforetoggle":fe=hT}var Fe=(s&4)!==0,jt=!Fe&&(i==="scroll"||i==="scrollend"),ne=Fe?oe!==null?oe+"Capture":null:oe;Fe=[];for(var X=le,se;X!==null;){var be=X;if(se=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||se===null||ne===null||(be=Po(X,ne),be!=null&&Fe.push(mc(X,be,se))),jt)break;X=X.return}0<Fe.length&&(oe=new fe(oe,ke,null,c,ge),ye.push({event:oe,listeners:Fe}))}}if((s&7)===0){e:{if(oe=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",oe&&c!==Tp&&(ke=c.relatedTarget||c.fromElement)&&(pl(ke)||ke[fl]))break e;if((fe||oe)&&(oe=ge.window===ge?ge:(oe=ge.ownerDocument)?oe.defaultView||oe.parentWindow:window,fe?(ke=c.relatedTarget||c.toElement,fe=le,ke=ke?pl(ke):null,ke!==null&&(jt=o(ke),Fe=ke.tag,ke!==jt||Fe!==5&&Fe!==27&&Fe!==6)&&(ke=null)):(fe=null,ke=le),fe!==ke)){if(Fe=Jj,be="onMouseLeave",ne="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Fe=t0,be="onPointerLeave",ne="onPointerEnter",X="pointer"),jt=fe==null?oe:Do(fe),se=ke==null?oe:Do(ke),oe=new Fe(be,X+"leave",fe,c,ge),oe.target=jt,oe.relatedTarget=se,be=null,pl(ge)===le&&(Fe=new Fe(ne,X+"enter",ke,c,ge),Fe.target=se,Fe.relatedTarget=jt,be=Fe),jt=be,fe&&ke)t:{for(Fe=pq,ne=fe,X=ke,se=0,be=ne;be;be=Fe(be))se++;be=0;for(var $e=X;$e;$e=Fe($e))be++;for(;0<se-be;)ne=Fe(ne),se--;for(;0<be-se;)X=Fe(X),be--;for(;se--;){if(ne===X||X!==null&&ne===X.alternate){Fe=ne;break t}ne=Fe(ne),X=Fe(X)}Fe=null}else Fe=null;fe!==null&&VN(ye,oe,fe,Fe,!1),ke!==null&&jt!==null&&VN(ye,jt,ke,Fe,!0)}}e:{if(oe=le?Do(le):window,fe=oe.nodeName&&oe.nodeName.toLowerCase(),fe==="select"||fe==="input"&&oe.type==="file")var ot=c0;else if(l0(oe))if(u0)ot=wT;else{ot=NT;var Me=_T}else fe=oe.nodeName,!fe||fe.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?le&&Mp(le.elementType)&&(ot=c0):ot=ST;if(ot&&(ot=ot(i,le))){o0(ye,ot,c,ge);break e}Me&&Me(i,oe,le),i==="focusout"&&le&&oe.type==="number"&&le.memoizedProps.value!=null&&Pp(oe,"number",oe.value)}switch(Me=le?Do(le):window,i){case"focusin":(l0(Me)||Me.contentEditable==="true")&&(Nl=Me,Yp=le,Bo=null);break;case"focusout":Bo=Yp=Nl=null;break;case"mousedown":Kp=!0;break;case"contextmenu":case"mouseup":case"dragend":Kp=!1,x0(ye,c,ge);break;case"selectionchange":if(ET)break;case"keydown":case"keyup":x0(ye,c,ge)}var We;if(Gp)e:{switch(i){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else _l?i0(i,c)&&(nt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(nt="onCompositionStart");nt&&(r0&&c.locale!=="ko"&&(_l||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&_l&&(We=Xj()):(bi=ge,Lp="value"in bi?bi.value:bi.textContent,_l=!0)),Me=wd(le,nt),0<Me.length&&(nt=new e0(nt,i,null,c,ge),ye.push({event:nt,listeners:Me}),We?nt.data=We:(We=s0(c),We!==null&&(nt.data=We)))),(We=gT?xT(i,c):bT(i,c))&&(nt=wd(le,"onBeforeInput"),0<nt.length&&(Me=new e0("onBeforeInput","beforeinput",null,c,ge),ye.push({event:Me,listeners:nt}),Me.data=We)),uq(ye,i,le,c,ge)}GN(ye,s)})}function mc(i,s,c){return{instance:i,listener:s,currentTarget:c}}function wd(i,s){for(var c=s+"Capture",f=[];i!==null;){var y=i,N=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||N===null||(y=Po(i,c),y!=null&&f.unshift(mc(i,y,N)),y=Po(i,s),y!=null&&f.push(mc(i,y,N))),i.tag===3)return f;i=i.return}return[]}function pq(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function VN(i,s,c,f,y){for(var N=s._reactName,O=[];c!==null&&c!==f;){var R=c,G=R.alternate,le=R.stateNode;if(R=R.tag,G!==null&&G===f)break;R!==5&&R!==26&&R!==27||le===null||(G=le,y?(le=Po(c,N),le!=null&&O.unshift(mc(c,le,G))):y||(le=Po(c,N),le!=null&&O.push(mc(c,le,G)))),c=c.return}O.length!==0&&i.push({event:s,listeners:O})}var hq=/\r\n?/g,vq=/\u0000|\uFFFD/g;function QN(i){return(typeof i=="string"?i:""+i).replace(hq,`
`).replace(vq,"")}function YN(i,s){return s=QN(s),QN(i)===s}function yt(i,s,c,f,y,N){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||bl(i,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&bl(i,""+f);break;case"className":zu(i,"class",f);break;case"tabIndex":zu(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":zu(i,c,f);break;case"style":Yj(i,f,N);break;case"data":if(s!=="object"){zu(i,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=Ou(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(c==="formAction"?(s!=="input"&&yt(i,s,"name",y.name,y,null),yt(i,s,"formEncType",y.formEncType,y,null),yt(i,s,"formMethod",y.formMethod,y,null),yt(i,s,"formTarget",y.formTarget,y,null)):(yt(i,s,"encType",y.encType,y,null),yt(i,s,"method",y.method,y,null),yt(i,s,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=Ou(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=za);break;case"onScroll":f!=null&&et("scroll",i);break;case"onScrollEnd":f!=null&&et("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(y.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=Ou(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":et("beforetoggle",i),et("toggle",i),Au(i,"popover",f);break;case"xlinkActuate":Aa(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Aa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Aa(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Aa(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Aa(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Aa(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Aa(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Aa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Aa(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Au(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=GM.get(c)||c,Au(i,c,f))}}function yv(i,s,c,f,y,N){switch(c){case"style":Yj(i,f,N);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(y.children!=null)throw Error(a(60));i.innerHTML=c}}break;case"children":typeof f=="string"?bl(i,f):(typeof f=="number"||typeof f=="bigint")&&bl(i,""+f);break;case"onScroll":f!=null&&et("scroll",i);break;case"onScrollEnd":f!=null&&et("scrollend",i);break;case"onClick":f!=null&&(i.onclick=za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lj.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),s=c.slice(2,y?c.length-7:void 0),N=i[Yr]||null,N=N!=null?N[c]:null,typeof N=="function"&&i.removeEventListener(s,N,y),typeof f=="function")){typeof N!="function"&&N!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(s,f,y);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):Au(i,c,f)}}}function Cr(i,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",i),et("load",i);var f=!1,y=!1,N;for(N in c)if(c.hasOwnProperty(N)){var O=c[N];if(O!=null)switch(N){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:yt(i,s,N,O,c,null)}}y&&yt(i,s,"srcSet",c.srcSet,c,null),f&&yt(i,s,"src",c.src,c,null);return;case"input":et("invalid",i);var R=N=O=y=null,G=null,le=null;for(f in c)if(c.hasOwnProperty(f)){var ge=c[f];if(ge!=null)switch(f){case"name":y=ge;break;case"type":O=ge;break;case"checked":G=ge;break;case"defaultChecked":le=ge;break;case"value":N=ge;break;case"defaultValue":R=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(a(137,s));break;default:yt(i,s,f,ge,c,null)}}Gj(i,N,R,G,le,O,y,!1);return;case"select":et("invalid",i),f=O=N=null;for(y in c)if(c.hasOwnProperty(y)&&(R=c[y],R!=null))switch(y){case"value":N=R;break;case"defaultValue":O=R;break;case"multiple":f=R;default:yt(i,s,y,R,c,null)}s=N,c=O,i.multiple=!!f,s!=null?xl(i,!!f,s,!1):c!=null&&xl(i,!!f,c,!0);return;case"textarea":et("invalid",i),N=y=f=null;for(O in c)if(c.hasOwnProperty(O)&&(R=c[O],R!=null))switch(O){case"value":f=R;break;case"defaultValue":y=R;break;case"children":N=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:yt(i,s,O,R,c,null)}Vj(i,f,y,N);return;case"option":for(G in c)c.hasOwnProperty(G)&&(f=c[G],f!=null)&&(G==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":yt(i,s,G,f,c,null));return;case"dialog":et("beforetoggle",i),et("toggle",i),et("cancel",i),et("close",i);break;case"iframe":case"object":et("load",i);break;case"video":case"audio":for(f=0;f<dc.length;f++)et(dc[f],i);break;case"image":et("error",i),et("load",i);break;case"details":et("toggle",i);break;case"embed":case"source":case"link":et("error",i),et("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in c)if(c.hasOwnProperty(le)&&(f=c[le],f!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:yt(i,s,le,f,c,null)}return;default:if(Mp(s)){for(ge in c)c.hasOwnProperty(ge)&&(f=c[ge],f!==void 0&&yv(i,s,ge,f,c,void 0));return}}for(R in c)c.hasOwnProperty(R)&&(f=c[R],f!=null&&yt(i,s,R,f,c,null))}function gq(i,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,N=null,O=null,R=null,G=null,le=null,ge=null;for(fe in c){var ye=c[fe];if(c.hasOwnProperty(fe)&&ye!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":G=ye;default:f.hasOwnProperty(fe)||yt(i,s,fe,null,f,ye)}}for(var oe in f){var fe=f[oe];if(ye=c[oe],f.hasOwnProperty(oe)&&(fe!=null||ye!=null))switch(oe){case"type":N=fe;break;case"name":y=fe;break;case"checked":le=fe;break;case"defaultChecked":ge=fe;break;case"value":O=fe;break;case"defaultValue":R=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(a(137,s));break;default:fe!==ye&&yt(i,s,oe,fe,f,ye)}}Dp(i,O,R,G,le,ge,N,y);return;case"select":fe=O=R=oe=null;for(N in c)if(G=c[N],c.hasOwnProperty(N)&&G!=null)switch(N){case"value":break;case"multiple":fe=G;default:f.hasOwnProperty(N)||yt(i,s,N,null,f,G)}for(y in f)if(N=f[y],G=c[y],f.hasOwnProperty(y)&&(N!=null||G!=null))switch(y){case"value":oe=N;break;case"defaultValue":R=N;break;case"multiple":O=N;default:N!==G&&yt(i,s,y,N,f,G)}s=R,c=O,f=fe,oe!=null?xl(i,!!c,oe,!1):!!f!=!!c&&(s!=null?xl(i,!!c,s,!0):xl(i,!!c,c?[]:"",!1));return;case"textarea":fe=oe=null;for(R in c)if(y=c[R],c.hasOwnProperty(R)&&y!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:yt(i,s,R,null,f,y)}for(O in f)if(y=f[O],N=c[O],f.hasOwnProperty(O)&&(y!=null||N!=null))switch(O){case"value":oe=y;break;case"defaultValue":fe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(a(91));break;default:y!==N&&yt(i,s,O,y,f,N)}Hj(i,oe,fe);return;case"option":for(var ke in c)oe=c[ke],c.hasOwnProperty(ke)&&oe!=null&&!f.hasOwnProperty(ke)&&(ke==="selected"?i.selected=!1:yt(i,s,ke,null,f,oe));for(G in f)oe=f[G],fe=c[G],f.hasOwnProperty(G)&&oe!==fe&&(oe!=null||fe!=null)&&(G==="selected"?i.selected=oe&&typeof oe!="function"&&typeof oe!="symbol":yt(i,s,G,oe,f,fe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in c)oe=c[Fe],c.hasOwnProperty(Fe)&&oe!=null&&!f.hasOwnProperty(Fe)&&yt(i,s,Fe,null,f,oe);for(le in f)if(oe=f[le],fe=c[le],f.hasOwnProperty(le)&&oe!==fe&&(oe!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,s));break;default:yt(i,s,le,oe,f,fe)}return;default:if(Mp(s)){for(var jt in c)oe=c[jt],c.hasOwnProperty(jt)&&oe!==void 0&&!f.hasOwnProperty(jt)&&yv(i,s,jt,void 0,f,oe);for(ge in f)oe=f[ge],fe=c[ge],!f.hasOwnProperty(ge)||oe===fe||oe===void 0&&fe===void 0||yv(i,s,ge,oe,f,fe);return}}for(var ne in c)oe=c[ne],c.hasOwnProperty(ne)&&oe!=null&&!f.hasOwnProperty(ne)&&yt(i,s,ne,null,f,oe);for(ye in f)oe=f[ye],fe=c[ye],!f.hasOwnProperty(ye)||oe===fe||oe==null&&fe==null||yt(i,s,ye,oe,f,fe)}function KN(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xq(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var y=c[f],N=y.transferSize,O=y.initiatorType,R=y.duration;if(N&&R&&KN(O)){for(O=0,R=y.responseEnd,f+=1;f<c.length;f++){var G=c[f],le=G.startTime;if(le>R)break;var ge=G.transferSize,ye=G.initiatorType;ge&&KN(ye)&&(G=G.responseEnd,O+=ge*(G<R?1:(R-le)/(G-le)))}if(--f,s+=8*(N+O)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var jv=null,_v=null;function Cd(i){return i.nodeType===9?i:i.ownerDocument}function WN(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XN(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Nv(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Sv=null;function bq(){var i=window.event;return i&&i.type==="popstate"?i===Sv?!1:(Sv=i,!0):(Sv=null,!1)}var ZN=typeof setTimeout=="function"?setTimeout:void 0,yq=typeof clearTimeout=="function"?clearTimeout:void 0,JN=typeof Promise=="function"?Promise:void 0,jq=typeof queueMicrotask=="function"?queueMicrotask:typeof JN<"u"?function(i){return JN.resolve(null).then(i).catch(_q)}:ZN;function _q(i){setTimeout(function(){throw i})}function qi(i){return i==="head"}function e1(i,s){var c=s,f=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(y),Wl(s);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")fc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,fc(c);for(var N=c.firstChild;N;){var O=N.nextSibling,R=N.nodeName;N[Oo]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&N.rel.toLowerCase()==="stylesheet"||c.removeChild(N),N=O}}else c==="body"&&fc(i.ownerDocument.body);c=y}while(c);Wl(s)}function t1(i,s){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function wv(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":wv(c),kp(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function Nq(i,s,c,f){for(;i.nodeType===1;){var y=c;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Oo])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(N=i.getAttribute("rel"),N==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(N!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(N=i.getAttribute("src"),(N!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&N&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var N=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===N)return i}else return i;if(i=kn(i.nextSibling),i===null)break}return null}function Sq(i,s,c){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=kn(i.nextSibling),i===null))return null;return i}function r1(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=kn(i.nextSibling),i===null))return null;return i}function Cv(i){return i.data==="$?"||i.data==="$~"}function Ev(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function wq(i,s){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||c.readyState!=="loading")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function kn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Av=null;function n1(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(s===0)return kn(i.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}i=i.nextSibling}return null}function a1(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return i;s--}else c!=="/$"&&c!=="/&"||s++}i=i.previousSibling}return null}function i1(i,s,c){switch(s=Cd(c),i){case"html":if(i=s.documentElement,!i)throw Error(a(452));return i;case"head":if(i=s.head,!i)throw Error(a(453));return i;case"body":if(i=s.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function fc(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);kp(i)}var On=new Map,s1=new Set;function Ed(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ha=U.d;U.d={f:Cq,r:Eq,D:Aq,C:zq,L:kq,m:Oq,X:Pq,S:Dq,M:Mq};function Cq(){var i=Ha.f(),s=xd();return i||s}function Eq(i){var s=hl(i);s!==null&&s.tag===5&&s.type==="form"?N_(s):Ha.r(i)}var Ql=typeof document>"u"?null:document;function l1(i,s,c){var f=Ql;if(f&&typeof s=="string"&&s){var y=Nn(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),s1.has(y)||(s1.add(y),i={rel:i,crossOrigin:c,href:s},f.querySelector(y)===null&&(s=f.createElement("link"),Cr(s,"link",i),cr(s),f.head.appendChild(s)))}}function Aq(i){Ha.D(i),l1("dns-prefetch",i,null)}function zq(i,s){Ha.C(i,s),l1("preconnect",i,s)}function kq(i,s,c){Ha.L(i,s,c);var f=Ql;if(f&&i&&s){var y='link[rel="preload"][as="'+Nn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Nn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Nn(c.imageSizes)+'"]')):y+='[href="'+Nn(i)+'"]';var N=y;switch(s){case"style":N=Yl(i);break;case"script":N=Kl(i)}On.has(N)||(i=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:i,as:s},c),On.set(N,i),f.querySelector(y)!==null||s==="style"&&f.querySelector(pc(N))||s==="script"&&f.querySelector(hc(N))||(s=f.createElement("link"),Cr(s,"link",i),cr(s),f.head.appendChild(s)))}}function Oq(i,s){Ha.m(i,s);var c=Ql;if(c&&i){var f=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+Nn(f)+'"][href="'+Nn(i)+'"]',N=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Kl(i)}if(!On.has(N)&&(i=v({rel:"modulepreload",href:i},s),On.set(N,i),c.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(hc(N)))return}f=c.createElement("link"),Cr(f,"link",i),cr(f),c.head.appendChild(f)}}}function Dq(i,s,c){Ha.S(i,s,c);var f=Ql;if(f&&i){var y=vl(f).hoistableStyles,N=Yl(i);s=s||"default";var O=y.get(N);if(!O){var R={loading:0,preload:null};if(O=f.querySelector(pc(N)))R.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},c),(c=On.get(N))&&zv(i,c);var G=O=f.createElement("link");cr(G),Cr(G,"link",i),G._p=new Promise(function(le,ge){G.onload=le,G.onerror=ge}),G.addEventListener("load",function(){R.loading|=1}),G.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Ad(O,s,f)}O={type:"stylesheet",instance:O,count:1,state:R},y.set(N,O)}}}function Pq(i,s){Ha.X(i,s);var c=Ql;if(c&&i){var f=vl(c).hoistableScripts,y=Kl(i),N=f.get(y);N||(N=c.querySelector(hc(y)),N||(i=v({src:i,async:!0},s),(s=On.get(y))&&kv(i,s),N=c.createElement("script"),cr(N),Cr(N,"link",i),c.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(y,N))}}function Mq(i,s){Ha.M(i,s);var c=Ql;if(c&&i){var f=vl(c).hoistableScripts,y=Kl(i),N=f.get(y);N||(N=c.querySelector(hc(y)),N||(i=v({src:i,async:!0,type:"module"},s),(s=On.get(y))&&kv(i,s),N=c.createElement("script"),cr(N),Cr(N,"link",i),c.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(y,N))}}function o1(i,s,c,f){var y=(y=F.current)?Ed(y):null;if(!y)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Yl(c.href),c=vl(y).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Yl(c.href);var N=vl(y).hoistableStyles,O=N.get(i);if(O||(y=y.ownerDocument||y,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(i,O),(N=y.querySelector(pc(i)))&&!N._p&&(O.instance=N,O.state.loading=5),On.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},On.set(i,c),N||Tq(y,i,c,O.state))),s&&f===null)throw Error(a(528,""));return O}if(s&&f!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Kl(c),c=vl(y).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function Yl(i){return'href="'+Nn(i)+'"'}function pc(i){return'link[rel="stylesheet"]['+i+"]"}function c1(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function Tq(i,s,c,f){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=i.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),Cr(s,"link",c),cr(s),i.head.appendChild(s))}function Kl(i){return'[src="'+Nn(i)+'"]'}function hc(i){return"script[async]"+i}function u1(i,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=i.querySelector('style[data-href~="'+Nn(c.href)+'"]');if(f)return s.instance=f,cr(f),f;var y=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),cr(f),Cr(f,"style",y),Ad(f,c.precedence,i),s.instance=f;case"stylesheet":y=Yl(c.href);var N=i.querySelector(pc(y));if(N)return s.state.loading|=4,s.instance=N,cr(N),N;f=c1(c),(y=On.get(y))&&zv(f,y),N=(i.ownerDocument||i).createElement("link"),cr(N);var O=N;return O._p=new Promise(function(R,G){O.onload=R,O.onerror=G}),Cr(N,"link",f),s.state.loading|=4,Ad(N,c.precedence,i),s.instance=N;case"script":return N=Kl(c.src),(y=i.querySelector(hc(N)))?(s.instance=y,cr(y),y):(f=c,(y=On.get(N))&&(f=v({},c),kv(f,y)),i=i.ownerDocument||i,y=i.createElement("script"),cr(y),Cr(y,"link",f),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,Ad(f,c.precedence,i));return s.instance}function Ad(i,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,N=y,O=0;O<f.length;O++){var R=f[O];if(R.dataset.precedence===s)N=R;else if(N!==y)break}N?N.parentNode.insertBefore(i,N.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(i,s.firstChild))}function zv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function kv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var zd=null;function d1(i,s,c){if(zd===null){var f=new Map,y=zd=new Map;y.set(c,f)}else y=zd,f=y.get(c),f||(f=new Map,y.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),y=0;y<c.length;y++){var N=c[y];if(!(N[Oo]||N[_r]||i==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var O=N.getAttribute(s)||"";O=i+O;var R=f.get(O);R?R.push(N):f.set(O,[N])}}return f}function m1(i,s,c){i=i.ownerDocument||i,i.head.insertBefore(c,s==="title"?i.querySelector("head > title"):null)}function qq(i,s,c){if(c===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function f1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Rq(i,s,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Yl(f.href),N=s.querySelector(pc(y));if(N){s=N._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=kd.bind(i),s.then(i,i)),c.state.loading|=4,c.instance=N,cr(N);return}N=s.ownerDocument||s,f=c1(f),(y=On.get(y))&&zv(f,y),N=N.createElement("link"),cr(N);var O=N;O._p=new Promise(function(R,G){O.onload=R,O.onerror=G}),Cr(N,"link",f),c.instance=N}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=kd.bind(i),s.addEventListener("load",c),s.addEventListener("error",c))}}var Ov=0;function Iq(i,s){return i.stylesheets&&i.count===0&&Dd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&Dd(i,i.stylesheets),i.unsuspend){var N=i.unsuspend;i.unsuspend=null,N()}},6e4+s);0<i.imgBytes&&Ov===0&&(Ov=62500*xq());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Dd(i,i.stylesheets),i.unsuspend)){var N=i.unsuspend;i.unsuspend=null,N()}},(i.imgBytes>Ov?50:800)+s);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(y)}}:null}function kd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Od=null;function Dd(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Od=new Map,s.forEach(Lq,i),Od=null,kd.call(i))}function Lq(i,s){if(!(s.state.loading&4)){var c=Od.get(i);if(c)var f=c.get(null);else{c=new Map,Od.set(i,c);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<y.length;N++){var O=y[N];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),f=O)}f&&c.set(null,f)}y=s.instance,O=y.getAttribute("data-precedence"),N=c.get(O)||f,N===f&&c.set(null,y),c.set(O,y),this.count++,f=kd.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),N?N.parentNode.insertBefore(y,N.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var vc={$$typeof:S,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function $q(i,s,c,f,y,N,O,R,G){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=N,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function p1(i,s,c,f,y,N,O,R,G,le,ge,ye){return i=new $q(i,s,c,O,G,le,ge,ye,R),s=1,N===!0&&(s|=24),N=on(3,null,null,s),i.current=N,N.stateNode=i,s=uh(),s.refCount++,i.pooledCache=s,s.refCount++,N.memoizedState={element:f,isDehydrated:c,cache:s},ph(N),i}function h1(i){return i?(i=Cl,i):Cl}function v1(i,s,c,f,y,N){y=h1(y),f.context===null?f.context=y:f.pendingContext=y,f=wi(s),f.payload={element:c},N=N===void 0?null:N,N!==null&&(f.callback=N),c=Ci(i,f,s),c!==null&&(en(c,i,s),Yo(c,i,s))}function g1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function Dv(i,s){g1(i,s),(i=i.alternate)&&g1(i,s)}function x1(i){if(i.tag===13||i.tag===31){var s=vs(i,67108864);s!==null&&en(s,i,67108864),Dv(i,67108864)}}function b1(i){if(i.tag===13||i.tag===31){var s=fn();s=Ep(s);var c=vs(i,s);c!==null&&en(c,i,s),Dv(i,s)}}var Pd=!0;function Bq(i,s,c,f){var y=q.T;q.T=null;var N=U.p;try{U.p=2,Pv(i,s,c,f)}finally{U.p=N,q.T=y}}function Uq(i,s,c,f){var y=q.T;q.T=null;var N=U.p;try{U.p=8,Pv(i,s,c,f)}finally{U.p=N,q.T=y}}function Pv(i,s,c,f){if(Pd){var y=Mv(f);if(y===null)bv(i,s,f,Md,c),j1(i,f);else if(Gq(y,i,s,c,f))f.stopPropagation();else if(j1(i,f),s&4&&-1<Fq.indexOf(i)){for(;y!==null;){var N=hl(y);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var O=Ea(N.pendingLanes);if(O!==0){var R=N;for(R.pendingLanes|=2,R.entangledLanes|=2;O;){var G=1<<31-Qe(O);R.entanglements[1]|=G,O&=~G}da(N),(mt&6)===0&&(vd=Le()+500,uc(0))}}break;case 31:case 13:R=vs(N,2),R!==null&&en(R,N,2),xd(),Dv(N,2)}if(N=Mv(f),N===null&&bv(i,s,f,Md,c),N===y)break;y=N}y!==null&&f.stopPropagation()}else bv(i,s,f,null,c)}}function Mv(i){return i=qp(i),Tv(i)}var Md=null;function Tv(i){if(Md=null,i=pl(i),i!==null){var s=o(i);if(s===null)i=null;else{var c=s.tag;if(c===13){if(i=u(s),i!==null)return i;i=null}else if(c===31){if(i=d(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Md=i,null}function y1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case dt:return 2;case Rt:return 8;case nr:case sa:return 32;case Dr:return 268435456;default:return 32}default:return 32}}var qv=!1,Ri=null,Ii=null,Li=null,gc=new Map,xc=new Map,$i=[],Fq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j1(i,s){switch(i){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":gc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(s.pointerId)}}function bc(i,s,c,f,y,N){return i===null||i.nativeEvent!==N?(i={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:N,targetContainers:[y]},s!==null&&(s=hl(s),s!==null&&x1(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function Gq(i,s,c,f,y){switch(s){case"focusin":return Ri=bc(Ri,i,s,c,f,y),!0;case"dragenter":return Ii=bc(Ii,i,s,c,f,y),!0;case"mouseover":return Li=bc(Li,i,s,c,f,y),!0;case"pointerover":var N=y.pointerId;return gc.set(N,bc(gc.get(N)||null,i,s,c,f,y)),!0;case"gotpointercapture":return N=y.pointerId,xc.set(N,bc(xc.get(N)||null,i,s,c,f,y)),!0}return!1}function _1(i){var s=pl(i.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){i.blockedOn=s,qj(i.priority,function(){b1(c)});return}}else if(s===31){if(s=d(c),s!==null){i.blockedOn=s,qj(i.priority,function(){b1(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Td(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=Mv(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);Tp=f,c.target.dispatchEvent(f),Tp=null}else return s=hl(c),s!==null&&x1(s),i.blockedOn=c,!1;s.shift()}return!0}function N1(i,s,c){Td(i)&&c.delete(s)}function Hq(){qv=!1,Ri!==null&&Td(Ri)&&(Ri=null),Ii!==null&&Td(Ii)&&(Ii=null),Li!==null&&Td(Li)&&(Li=null),gc.forEach(N1),xc.forEach(N1)}function qd(i,s){i.blockedOn===s&&(i.blockedOn=null,qv||(qv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hq)))}var Rd=null;function S1(i){Rd!==i&&(Rd=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Rd===i&&(Rd=null);for(var s=0;s<i.length;s+=3){var c=i[s],f=i[s+1],y=i[s+2];if(typeof f!="function"){if(Tv(f||c)===null)continue;break}var N=hl(c);N!==null&&(i.splice(s,3),s-=3,Mh(N,{pending:!0,data:y,method:c.method,action:f},f,y))}}))}function Wl(i){function s(G){return qd(G,i)}Ri!==null&&qd(Ri,i),Ii!==null&&qd(Ii,i),Li!==null&&qd(Li,i),gc.forEach(s),xc.forEach(s);for(var c=0;c<$i.length;c++){var f=$i[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<$i.length&&(c=$i[0],c.blockedOn===null);)_1(c),c.blockedOn===null&&$i.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var y=c[f],N=c[f+1],O=y[Yr]||null;if(typeof N=="function")O||S1(c);else if(O){var R=null;if(N&&N.hasAttribute("formAction")){if(y=N,O=N[Yr]||null)R=O.formAction;else if(Tv(y)!==null)continue}else R=O.action;typeof R=="function"?c[f+1]=R:(c.splice(f,3),f-=3),S1(c)}}}function w1(){function i(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(O){return y=O})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Rv(i){this._internalRoot=i}Id.prototype.render=Rv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,f=fn();v1(c,f,i,s,null,null)},Id.prototype.unmount=Rv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;v1(i.current,2,null,i,null,null),xd(),s[fl]=null}};function Id(i){this._internalRoot=i}Id.prototype.unstable_scheduleHydration=function(i){if(i){var s=Tj();i={blockedOn:null,target:i,priority:s};for(var c=0;c<$i.length&&s!==0&&s<$i[c].priority;c++);$i.splice(c,0,i),c===0&&_1(i)}};var C1=r.version;if(C1!=="19.2.4")throw Error(a(527,C1,"19.2.4"));U.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=p(s),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var Vq={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{K=Ld.inject(Vq),ie=Ld}catch{}}return jc.createRoot=function(i,s){if(!l(i))throw Error(a(299));var c=!1,f="",y=P_,N=M_,O=T_;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(N=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=p1(i,1,!1,null,null,c,f,null,y,N,O,w1),i[fl]=s.current,xv(i),new Rv(s)},jc.hydrateRoot=function(i,s,c){if(!l(i))throw Error(a(299));var f=!1,y="",N=P_,O=M_,R=T_,G=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(N=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.formState!==void 0&&(G=c.formState)),s=p1(i,1,!0,s,c??null,f,y,G,N,O,R,w1),s.context=h1(null),c=s.current,f=fn(),f=Ep(f),y=wi(f),y.callback=null,Ci(c,y,f),c=f,s.current.lanes=c,ft(s,c),da(s),i[fl]=s.current,xv(i),new Id(s)},jc.version="19.2.4",jc}var T1;function Y3(){if(T1)return Uv.exports;T1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Uv.exports=Q3(),Uv.exports}var K3=Y3();const W3=oi(K3),X3={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},Qb=Jq(X3),ro=e3(Qb),Q=t3(Qb,{localCache:r3({tabManager:a3()})}),Jt=n3(Qb),Z3=Object.freeze(Object.defineProperty({__proto__:null,auth:ro,db:Q,storage:Jt},Symbol.toStringTag,{value:"Module"})),q1={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},Hv=e=>q1[e]||q1.default,wA=g.createContext(null),J3=({children:e})=>{const[r,n]=g.useState(null),[a,l]=g.useState(!0),o=async x=>{try{const j=await gt(je(Q,"users",x));if(j.exists()){const _=j.data();return{uid:x,email:_.email,displayName:_.displayName,role:_.role,isPremium:_.isPremium||!1,subscriptionEnd:_.subscriptionEnd?.toDate()||null,subscriptionPlan:_.subscriptionPlan||void 0,coursChoisis:_.coursChoisis||[],usageRessources:_.usageRessourcesTotal??_.usageRessources??0,photoURL:_.photoURL,createdAt:_.createdAt?.toDate()||new Date,lastLogin:_.lastLogin?.toDate()}}return null}catch(j){return console.error("Erreur lors de la rcupration des donnes utilisateur:",j),null}},u=async(x,j)=>{const _=je(Q,"users",x.uid);(await gt(_)).exists()?await Ge(_,{lastLogin:Et()}):await lu(_,{email:x.email,displayName:x.displayName||j?.displayName||"",role:j?.role||"eleve",isPremium:!1,photoURL:x.photoURL,createdAt:Et(),lastLogin:Et()})},d=async(x,j)=>{try{const _=await d3(ro,x,j);await u(_.user)}catch(_){throw new Error(Hv(_.code))}},m=async x=>{try{if(x.password!==x.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const j=await l3(ro,x.email,x.password);await o3(j.user,{displayName:x.displayName}),await u(j.user,{displayName:x.displayName,role:x.role})}catch(j){throw j.message?j:new Error(Hv(j.code))}},p=async x=>{try{const j=new c3;j.setCustomParameters({prompt:"select_account"});const _=await u3(ro,j);await u(_.user,{role:x??"eleve"})}catch(j){throw new Error(Hv(j.code))}},h=async()=>{try{await s3(ro),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},v=async x=>{if(!r)throw new Error("Aucun utilisateur connect.");try{const j=je(Q,"users",r.uid);await Ge(j,{...x,updatedAt:Et()}),n(_=>_?{..._,...x}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};g.useEffect(()=>{const x=i3(ro,async j=>{if(j){const _=await o(j.uid);n(_)}else n(null);l(!1)});return()=>x()},[]);const b={currentUser:r,loading:a,login:d,loginWithGoogle:p,register:m,logout:h,updateProfile:v};return t.jsx(wA.Provider,{value:b,children:a?t.jsxs("div",{className:"loading-container",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Chargement..."})]}):e})},Ke=()=>{const e=g.useContext(wA);if(!e)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return e},Fi=({children:e,allowedRoles:r,requirePremium:n=!1})=>{const{currentUser:a,loading:l}=Ke();return l?t.jsxs("div",{className:"loading-container",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Vrification des autorisations..."})]}):a?r&&!r.includes(a.role)?t.jsxs("div",{className:"error-container",children:[t.jsx("h2",{children:"Accs non autoris"}),t.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),t.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!a.isPremium?t.jsxs("div",{className:"error-container premium-required",children:[t.jsx("h2",{children:"Contenu Premium"}),t.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),t.jsxs("div",{className:"premium-cta",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Ds 10 000 FCFA / 3 mois"}),"  Accs illimit"]}),t.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):t.jsx(t.Fragment,{children:e}):t.jsxs("div",{className:"error-container",children:[t.jsx("h2",{children:"Accs refus"}),t.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),t.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},Lr=({children:e})=>t.jsx(Fi,{allowedRoles:["admin"],children:e}),Kn=({children:e})=>t.jsx(Fi,{allowedRoles:["admin","prof"],children:e}),e5="http://localhost:3001",Ca="notifications";function CA(e,r){return{id:e,destinataireId:r.destinataireId,destinataireRole:r.destinataireRole,type:r.type,titre:r.titre,message:r.message,lienAction:r.lienAction,labelAction:r.labelAction,emetteurId:r.emetteurId,emetteurNom:r.emetteurNom,entiteId:r.entiteId,entiteType:r.entiteType,statut:r.statut,canal:r.canal,emailEnvoye:r.emailEnvoye,emailErreur:r.emailErreur,createdAt:r.createdAt?.toDate()??new Date,luAt:r.luAt?.toDate()??void 0}}async function t5(e){return(await Dt(_e(Q,Ca),{destinataireId:e.destinataireId,destinataireRole:e.destinataireRole,type:e.type,titre:e.titre,message:e.message,lienAction:e.lienAction??null,labelAction:e.labelAction??null,emetteurId:e.emetteurId??null,emetteurNom:e.emetteurNom??null,entiteId:e.entiteId??null,entiteType:e.entiteType??null,statut:"non_lue",canal:e.canal,emailEnvoye:!1,createdAt:Ae.now()})).id}async function r5(e){try{const r=await fetch(`${e5}/api/notifications/send-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.text();return{success:!1,error:`HTTP ${r.status}: ${a}`}}return await r.json()}catch(r){return{success:!1,error:r instanceof Error?r.message:"Erreur rseau inconnue"}}}async function n5(e){const r=await t5(e);let n=!1,a;if((e.canal==="email"||e.canal==="les_deux")&&e.emailDestinataire){const l=await r5({to:e.emailDestinataire,toName:e.emailDestinatairNom,type:e.type,titre:e.titre,message:e.message,lienAction:e.lienAction,labelAction:e.labelAction,emetteurNom:e.emetteurNom});n=l.success,a=l.error,await Ge(je(Q,Ca,r),{emailEnvoye:n,emailErreur:a??null})}return{notifId:r,emailEnvoye:n,emailErreur:a}}async function a5(e,r){const n=Ee(_e(Q,"inscriptions_groupe"),Se("groupeId","==",e),Se("statut","==","actif")),a=await Ce(n);let l=0;const o=Rn(Q);return a.docs.forEach(u=>{const d=u.data().eleveId,m=je(_e(Q,Ca));o.set(m,{destinataireId:d,destinataireRole:"eleve",type:r.type,titre:r.titre,message:r.message,lienAction:r.lienAction??null,labelAction:r.labelAction??null,emetteurId:r.emetteurId??null,emetteurNom:r.emetteurNom??null,entiteId:r.entiteId??null,entiteType:r.entiteType??null,statut:"non_lue",canal:r.canal,emailEnvoye:!1,createdAt:Ae.now()}),l++}),await o.commit(),l}async function i5(e,r){const n=e==="tous"?Ee(_e(Q,"users"),Gt(500)):Ee(_e(Q,"users"),Se("role","==",e),Gt(500)),a=await Ce(n);let l=0;const o=Rn(Q);return a.docs.forEach(u=>{const d=u.data(),m=je(_e(Q,Ca));o.set(m,{destinataireId:u.id,destinataireRole:d.role??e,type:r.type,titre:r.titre,message:r.message,lienAction:r.lienAction??null,labelAction:r.labelAction??null,emetteurId:r.emetteurId??null,emetteurNom:r.emetteurNom??null,entiteId:r.entiteId??null,entiteType:r.entiteType??null,statut:"non_lue",canal:r.canal,emailEnvoye:!1,createdAt:Ae.now()}),l++}),await o.commit(),l}async function s5(e,r={}){const{includeArchived:n=!1,limitCount:a=50}=r,l=[Se("destinataireId","==",e),Ve("createdAt","desc"),Gt(a)];n||l.splice(1,0,Se("statut","!=","archivee"));const o=Ee(_e(Q,Ca),...l);return(await Ce(o)).docs.map(d=>CA(d.id,d.data()))}function l5(e,r){const n=Ee(_e(Q,Ca),Se("destinataireId","==",e),Se("statut","==","non_lue"),Ve("createdAt","desc"),Gt(20));return Ef(n,a=>{const l=a.docs.map(o=>CA(o.id,o.data()));r(l)})}async function Mx(e){await Ge(je(Q,Ca,e),{statut:"lue",luAt:Ae.now()})}async function EA(e){const r=Ee(_e(Q,Ca),Se("destinataireId","==",e),Se("statut","==","non_lue")),n=await Ce(r),a=Rn(Q);n.docs.forEach(l=>{a.update(l.ref,{statut:"lue",luAt:Ae.now()})}),await a.commit()}async function o5(e){await Ge(je(Q,Ca,e),{statut:"archivee"})}async function c5(e){await Gr(je(Q,Ca,e))}const jm={nouveau_cours:{titreDefaut:"Nouveau cours disponible",messageDefaut:"Un nouveau cours vient d'tre publi dans votre matire.",icone:"",couleur:"#2563eb"},resultat_quiz:{titreDefaut:"Rsultat de votre quiz",messageDefaut:"Votre rsultat au quiz est disponible.",icone:"",couleur:"#10b981"},rappel_echeance:{titreDefaut:"Rappel d'chance",messageDefaut:"N'oubliez pas votre examen approche.",icone:"",couleur:"#f59e0b"},message_prof:{titreDefaut:"Message de votre professeur",messageDefaut:"",icone:"",couleur:"#8b5cf6"},annonce:{titreDefaut:"Annonce importante",messageDefaut:"",icone:"",couleur:"#ef4444"},nouveau_abonnement:{titreDefaut:"Abonnement Premium activ ",messageDefaut:"Votre abonnement Premium PedaClic est maintenant actif. Profitez de tous les contenus !",icone:"",couleur:"#f59e0b"},bienvenue:{titreDefaut:"Bienvenue sur PedaClic !",messageDefaut:"Bienvenue sur PedaClic, la plateforme ducative sngalaise. Commencez votre apprentissage ds maintenant !",icone:"",couleur:"#10b981"}},Yb={nouveau_cours:" Nouveau cours",resultat_quiz:" Rsultat quiz",rappel_echeance:" Rappel chance",message_prof:" Message prof",annonce:" Annonce",nouveau_abonnement:" Abonnement",bienvenue:" Bienvenue"},u5={eleve:" lves",parent:" Parents",prof:" Professeurs",admin:" Admins",tous:" Tous les utilisateurs"};function d5(e){const n=new Date().getTime()-e.getTime(),a=Math.floor(n/6e4),l=Math.floor(a/60),o=Math.floor(l/24);return a<1?" l'instant":a<60?`Il y a ${a} min`:l<24?`Il y a ${l}h`:o===1?"Hier":o<7?`Il y a ${o} jours`:e.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}const m5=()=>{const{currentUser:e}=Ke(),r=Ze(),[n,a]=g.useState([]),[l,o]=g.useState(!1),[u,d]=g.useState(!1),m=g.useRef(null);g.useEffect(()=>{if(!e)return;const x=l5(e.uid,j=>a(j));return()=>x()},[e]),g.useEffect(()=>{function x(j){m.current&&!m.current.contains(j.target)&&o(!1)}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const p=n.length,h=g.useCallback(async x=>{await Mx(x.id),o(!1),x.lienAction&&r(x.lienAction)},[r]),v=g.useCallback(async()=>{if(!(!e||u)){d(!0);try{await EA(e.uid)}finally{d(!1)}}},[e,u]),b=()=>{o(!1),r("/notifications")};return e?t.jsxs("div",{className:"notif-bell",ref:m,children:[t.jsxs("button",{className:"notif-bell__btn",onClick:()=>o(x=>!x),"aria-label":`Notifications${p>0?`  ${p} non lues`:""}`,"aria-expanded":l,"aria-haspopup":"true",children:[t.jsx("span",{className:"notif-bell__icon","aria-hidden":"true",children:""}),p>0&&t.jsx("span",{className:"notif-bell__badge","aria-hidden":"true",children:p>99?"99+":p})]}),l&&t.jsxs("div",{className:"notif-bell__dropdown",role:"dialog","aria-label":"Notifications rcentes",children:[t.jsxs("div",{className:"notif-bell__dropdown-header",children:[t.jsxs("h3",{className:"notif-bell__dropdown-title",children:[" Notifications",p>0&&t.jsxs("span",{className:"notif-bell__dropdown-count",children:[p," nouvelles"]})]}),p>0&&t.jsx("button",{className:"notif-bell__mark-all-btn",onClick:v,disabled:u,children:u?"":"Tout lire"})]}),t.jsx("div",{className:"notif-bell__list",children:n.length===0?t.jsxs("div",{className:"notif-bell__empty",children:[t.jsx("span",{className:"notif-bell__empty-icon",children:""}),t.jsx("p",{children:"Tout est  jour !"})]}):n.slice(0,5).map(x=>{const j=jm[x.type];return t.jsxs("button",{className:`notif-bell__item ${x.statut==="non_lue"?"notif-bell__item--unread":""}`,onClick:()=>h(x),children:[t.jsx("span",{className:"notif-bell__item-icon",style:{background:j.couleur+"20",color:j.couleur},"aria-hidden":"true",children:j.icone}),t.jsxs("div",{className:"notif-bell__item-content",children:[t.jsx("p",{className:"notif-bell__item-titre",children:x.titre}),t.jsx("p",{className:"notif-bell__item-message",children:x.message}),t.jsx("p",{className:"notif-bell__item-date",children:d5(x.createdAt)})]}),x.statut==="non_lue"&&t.jsx("span",{className:"notif-bell__item-dot","aria-hidden":"true"})]},x.id)})}),t.jsx("div",{className:"notif-bell__dropdown-footer",children:t.jsx("button",{className:"notif-bell__see-all-btn",onClick:b,children:"Voir toutes les notifications "})})]})]}):null},f5=()=>{const{currentUser:e,logout:r,loading:n}=Ke(),a=Ze(),l=Fb(),[o,u]=g.useState(!1),[d,m]=g.useState(!1),[p,h]=g.useState(!1),[v,b]=g.useState(null),x=g.useRef(null),j=[{path:"/",label:"Accueil",icon:t.jsx(Ox,{size:18})},{path:"/disciplines",label:"Disciplines",icon:t.jsx(gn,{size:18})},{path:"/ebooks",label:"Bibliothque",icon:t.jsx(gn,{size:18})},{path:"/mediatheque",label:"Mdiathque",icon:t.jsx(f3,{size:18})},{path:"/quiz-gratuits",label:"Quiz",icon:t.jsx(Bs,{size:18}),requireAuth:!1},{path:"/quizzes",label:"Quiz Avancs",icon:t.jsx(Bs,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/premium",label:"Premium",icon:t.jsx(vr,{size:18}),hideIfPremium:!0},{path:e?.role==="eleve"?"/eleve/dashboard":e?.role==="prof"?"/prof/dashboard":e?.role==="parent"?"/parent/dashboard":"/admin",label:"Tableau de bord",icon:t.jsx(E1,{size:18}),requireAuth:!0},{path:"/generateur",label:"Gnrateur IA",icon:t.jsx(p3,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:t.jsx(Us,{size:18}),requireAuth:!0,requireRole:["parent"]}];g.useEffect(()=>{const M=D=>{x.current&&!x.current.contains(D.target)&&m(!1)};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]),g.useEffect(()=>{const M=$=>{$.preventDefault(),b($)},D=()=>b(null);return window.addEventListener("beforeinstallprompt",M),window.addEventListener("appinstalled",D),()=>{window.removeEventListener("beforeinstallprompt",M),window.removeEventListener("appinstalled",D)}},[]);const _=g.useCallback(async()=>{if(!v)return;await v.prompt();const{outcome:M}=await v.userChoice;M==="accepted"&&b(null)},[v]);g.useEffect(()=>{u(!1),m(!1)},[l.pathname]),g.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);const C=async()=>{try{h(!0),await r(),m(!1),a("/")}catch(M){console.error("Erreur lors de la dconnexion:",M)}finally{h(!1)}},w=()=>{u(!o)},E=()=>{m(!d)},S=M=>!(M.requireAuth&&!e||M.requirePremium&&e&&!e.isPremium||M.hideIfPremium&&(e?.isPremium||e?.role==="admin")||M.requireRole&&e&&!M.requireRole.includes(e.role)),A=M=>M==="/"?l.pathname==="/":l.pathname.startsWith(M),z=M=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[M]||M,k=()=>e?e.displayName?e.displayName.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2):e.email[0].toUpperCase():"?";return t.jsxs("header",{className:"header",children:[t.jsxs("div",{className:"header__container",children:[t.jsxs(Re,{to:"/",className:"header__logo",children:[t.jsx(Bs,{className:"header__logo-icon",size:32}),t.jsxs("div",{className:"header__logo-text",children:[t.jsx("span",{className:"header__logo-name",children:"PedaClic"}),t.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),t.jsx("nav",{className:"header__nav header__nav--desktop",children:t.jsx("ul",{className:"header__nav-list",children:j.map(M=>S(M)&&t.jsx("li",{className:"header__nav-item",children:t.jsxs(Re,{to:M.path,className:`header__nav-link ${A(M.path)?"header__nav-link--active":""} ${M.hideIfPremium?"header__nav-link--premium-cta":""}`,children:[M.icon,t.jsx("span",{children:M.label}),M.requirePremium&&t.jsx(Pc,{size:14,className:"header__premium-badge"})]})},M.path))})}),t.jsxs("div",{className:"header__actions",children:[v&&t.jsxs("button",{className:"header__install-btn",onClick:_,title:"Installer PedaClic sur cet appareil",children:[t.jsx(jA,{size:16}),t.jsx("span",{children:"Installer"})]}),n?t.jsx("div",{className:"header__loading",children:t.jsx("div",{className:"header__spinner"})}):e?t.jsxs(t.Fragment,{children:[t.jsx(m5,{}),t.jsxs("div",{className:"header__user",ref:x,children:[e.isPremium&&t.jsxs("span",{className:"header__premium-tag",children:[t.jsx(Pc,{size:14}),"Premium"]}),t.jsxs("button",{className:"header__user-button",onClick:E,"aria-expanded":d,"aria-haspopup":"true",children:[t.jsx("div",{className:"header__avatar",children:e.photoURL?t.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):t.jsx("span",{className:"header__avatar-initials",children:k()})}),t.jsx("span",{className:"header__user-name",children:e.displayName||e.email.split("@")[0]}),t.jsx(xm,{size:16,className:`header__chevron ${d?"header__chevron--open":""}`})]}),d&&t.jsxs("div",{className:"header__dropdown",children:[t.jsxs("div",{className:"header__dropdown-header",children:[t.jsx("p",{className:"header__dropdown-email",children:e.email}),t.jsx("span",{className:`header__dropdown-role header__dropdown-role--${e.role}`,children:z(e.role)})]}),t.jsx("div",{className:"header__dropdown-divider"}),t.jsxs("nav",{className:"header__dropdown-nav",children:[t.jsxs(Re,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":e.role==="parent"?"/parent/dashboard":"/admin",className:"header__dropdown-link",children:[t.jsx(E1,{size:18}),t.jsx("span",{children:"Tableau de bord"})]}),e.role==="eleve"&&t.jsxs(Re,{to:"/eleve/suivi",className:"header__dropdown-link",children:[t.jsx(Us,{size:18}),t.jsx("span",{children:"Mes points  amliorer"})]}),e.role==="parent"&&t.jsxs(Re,{to:"/parent/dashboard",className:"header__dropdown-link",children:[t.jsx(Us,{size:18}),t.jsx("span",{children:"Espace Parent"})]}),t.jsxs(Re,{to:"/profil",className:"header__dropdown-link",children:[t.jsx(h3,{size:18}),t.jsx("span",{children:"Mon profil"})]}),e.role==="admin"&&t.jsxs(Re,{to:"/admin",className:"header__dropdown-link",children:[t.jsx(v3,{size:18}),t.jsx("span",{children:"Administration"})]}),!e.isPremium&&t.jsxs(Re,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[t.jsx(Pc,{size:18}),t.jsx("span",{children:"Passer Premium"})]})]}),t.jsx("div",{className:"header__dropdown-divider"}),t.jsxs("button",{className:"header__dropdown-logout",onClick:C,disabled:p,children:[t.jsx(A1,{size:18}),t.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]})]}):t.jsxs("div",{className:"header__auth-buttons",children:[t.jsx(Re,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),t.jsx(Re,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),t.jsx("button",{className:"header__mobile-toggle",onClick:w,"aria-label":o?"Fermer le menu":"Ouvrir le menu","aria-expanded":o,children:o?t.jsx(Ki,{size:24}):t.jsx(g3,{size:24})})]})]}),t.jsxs("div",{className:`header__mobile-menu ${o?"header__mobile-menu--open":""}`,children:[t.jsx("div",{className:"header__mobile-overlay",onClick:()=>u(!1)}),t.jsxs("div",{className:"header__mobile-content",children:[t.jsx("nav",{className:"header__mobile-nav",children:t.jsx("ul",{className:"header__mobile-list",children:j.map(M=>S(M)&&t.jsx("li",{className:"header__mobile-item",children:t.jsxs(Re,{to:M.path,className:`header__mobile-link ${A(M.path)?"header__mobile-link--active":""} ${M.hideIfPremium?"header__mobile-link--premium-cta":""}`,children:[M.icon,t.jsx("span",{children:M.label}),M.requirePremium&&t.jsx(Pc,{size:14,className:"header__premium-badge"})]})},M.path))})}),!e&&t.jsxs("div",{className:"header__mobile-auth",children:[t.jsx(Re,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),t.jsx(Re,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),e&&t.jsxs("div",{className:"header__mobile-user",children:[t.jsxs("div",{className:"header__mobile-user-info",children:[t.jsx("div",{className:"header__avatar header__avatar--large",children:e.photoURL?t.jsx("img",{src:e.photoURL,alt:e.displayName||"Avatar",className:"header__avatar-img"}):t.jsx("span",{className:"header__avatar-initials",children:k()})}),t.jsxs("div",{className:"header__mobile-user-details",children:[t.jsx("p",{className:"header__mobile-user-name",children:e.displayName||e.email.split("@")[0]}),t.jsx("p",{className:"header__mobile-user-email",children:e.email})]})]}),t.jsxs("button",{className:"header__mobile-logout",onClick:C,disabled:p,children:[t.jsx(A1,{size:18}),t.jsx("span",{children:p?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},p5=()=>{const e=new Date().getFullYear(),{currentUser:r}=Ke(),a=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Avancs",path:"/quizzes"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:(()=>{if(!r)return"/connexion";switch(r.role){case"eleve":return"/eleve/dashboard";case"prof":return"/prof/dashboard";case"parent":return"/parent/dashboard";case"admin":return"/admin";default:return"/connexion"}})()}],l=[{label:"Cours en ligne",path:"/cours",badge:"Nouveau",icon:t.jsx(N3,{size:14})},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],o=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:t.jsx(S3,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:t.jsx(w3,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:t.jsx(C3,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:t.jsx(E3,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:t.jsx(A3,{size:20})}];return t.jsxs("footer",{className:"footer",children:[t.jsx("div",{className:"footer__main",children:t.jsxs("div",{className:"footer__container",children:[t.jsxs("div",{className:"footer__column footer__column--about",children:[t.jsxs(Re,{to:"/",className:"footer__logo",children:[t.jsx(Bs,{className:"footer__logo-icon",size:36}),t.jsxs("div",{className:"footer__logo-text",children:[t.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),t.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),t.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),t.jsxs("div",{className:"footer__stats",children:[t.jsxs("div",{className:"footer__stat",children:[t.jsx(gn,{size:18}),t.jsx("span",{children:"500+ cours"})]}),t.jsxs("div",{className:"footer__stat",children:[t.jsx(cm,{size:18}),t.jsx("span",{children:"10 000+ lves"})]})]})]}),t.jsxs("div",{className:"footer__column",children:[t.jsxs("h3",{className:"footer__title",children:[t.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),t.jsx("nav",{className:"footer__nav",children:t.jsx("ul",{className:"footer__list",children:a.map((u,d)=>t.jsx("li",{className:"footer__item",children:t.jsx(Re,{to:u.path,className:"footer__link",children:u.label})},d))})})]}),t.jsxs("div",{className:"footer__column",children:[t.jsxs("h3",{className:"footer__title",children:[t.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),t.jsx("nav",{className:"footer__nav",children:t.jsx("ul",{className:"footer__list",children:l.map((u,d)=>t.jsx("li",{className:"footer__item",children:t.jsxs(Re,{to:u.path,className:`footer__link${u.badge?" footer__link--new":""}`,children:[u.icon&&t.jsx("span",{className:"footer__link-icon",children:u.icon}),u.label,u.badge&&t.jsx("span",{className:"footer__badge",children:u.badge})]})},d))})})]}),t.jsxs("div",{className:"footer__column",children:[t.jsxs("h3",{className:"footer__title",children:[t.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),t.jsxs("div",{className:"footer__contact",children:[t.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[t.jsx(x3,{size:16,className:"footer__contact-icon"}),t.jsx("span",{children:"contact@pedaclic.sn"})]}),t.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[t.jsx(b3,{size:16,className:"footer__contact-icon"}),t.jsx("span",{children:"+221 77 000 00 00"})]}),t.jsxs("div",{className:"footer__contact-item",children:[t.jsx(y3,{size:16,className:"footer__contact-icon"}),t.jsx("span",{children:"Dakar, Sngal"})]})]}),t.jsxs("div",{className:"footer__social",children:[t.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),t.jsx("div",{className:"footer__social-links",children:o.map((u,d)=>t.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:u.name,children:u.icon},d))})]})]})]})}),t.jsx("div",{className:"footer__bottom",children:t.jsxs("div",{className:"footer__container footer__bottom-content",children:[t.jsxs("p",{className:"footer__copyright",children:[" ",e," PedaClic. Tous droits rservs."]}),t.jsxs("p",{className:"footer__made-with",children:["Fait avec ",t.jsx(j3,{size:14,className:"footer__heart"})," au Sngal "]}),t.jsxs("nav",{className:"footer__legal",children:[t.jsxs(Re,{to:"/mentions-legales",className:"footer__legal-link",children:[t.jsx(_3,{size:14})," Mentions lgales"]}),t.jsxs(Re,{to:"/confidentialite",className:"footer__legal-link",children:[t.jsx(Hb,{size:14})," Confidentialit"]}),t.jsxs(Re,{to:"/aide",className:"footer__legal-link",children:[t.jsx(um,{size:14})," Aide"]})]})]})})]})},it=({children:e,hideHeader:r=!1,hideFooter:n=!1,className:a=""})=>t.jsxs("div",{className:"layout",children:[!r&&t.jsx(f5,{}),t.jsx("main",{className:`layout__main ${r?"":"layout__main--with-header"} ${a}`,children:e}),!n&&t.jsx(p5,{})]}),h5=()=>{const{currentUser:e}=Ke();return t.jsxs("div",{className:"home-page",children:[t.jsxs("section",{className:"home-page__hero",children:[t.jsxs("div",{className:"home-page__hero-content",children:[t.jsxs("div",{className:"home-page__hero-badge",children:[t.jsx(vr,{size:14}),t.jsx("span",{children:"Plateforme N1 au Sngal"})]}),t.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",t.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),t.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),t.jsx("div",{className:"home-page__hero-cta",children:e?t.jsxs(Re,{to:e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":e.role==="parent"?"/parent/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["Accder  mon espace",t.jsx(Os,{size:20})]}):t.jsxs(t.Fragment,{children:[t.jsxs(Re,{to:"/inscription",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",t.jsx(Os,{size:20})]}),t.jsxs(Re,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[t.jsx(io,{size:18}),"Dcouvrir les cours"]})]})}),t.jsxs("div",{className:"home-page__hero-stats",children:[t.jsxs("div",{className:"home-page__hero-stat",children:[t.jsx("strong",{children:"10 000+"}),t.jsx("span",{children:"lves inscrits"})]}),t.jsxs("div",{className:"home-page__hero-stat",children:[t.jsx("strong",{children:"500+"}),t.jsx("span",{children:"Cours disponibles"})]}),t.jsxs("div",{className:"home-page__hero-stat",children:[t.jsx("strong",{children:"95%"}),t.jsx("span",{children:"Taux de russite"})]})]})]}),t.jsx("div",{className:"home-page__hero-image",children:t.jsxs("div",{className:"home-page__hero-illustration",children:[t.jsx(Bs,{size:120}),t.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),t.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),t.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),t.jsx("section",{className:"home-page__levels",children:t.jsxs("div",{className:"home-page__container",children:[t.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),t.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),t.jsxs("div",{className:"home-page__levels-grid",children:[t.jsxs(Re,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[t.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),t.jsx("h3",{children:"Collge"}),t.jsx("p",{children:"6me  3me"}),t.jsxs("ul",{children:[t.jsxs("li",{children:[t.jsx(Bt,{size:16})," Prparation au BFEM"]}),t.jsxs("li",{children:[t.jsx(Bt,{size:16})," 9 matires disponibles"]}),t.jsxs("li",{children:[t.jsx(Bt,{size:16})," Exercices corrigs"]})]}),t.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",t.jsx(Os,{size:16})]})]}),t.jsxs(Re,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[t.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),t.jsx("h3",{children:"Lyce"}),t.jsx("p",{children:"2nde  Terminale"}),t.jsxs("ul",{children:[t.jsxs("li",{children:[t.jsx(Bt,{size:16})," Prparation au BAC"]}),t.jsxs("li",{children:[t.jsx(Bt,{size:16})," 12 matires disponibles"]}),t.jsxs("li",{children:[t.jsx(Bt,{size:16})," Annales d'examens"]})]}),t.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",t.jsx(Os,{size:16})]})]})]})]})}),t.jsx("section",{className:"home-page__features",children:t.jsxs("div",{className:"home-page__container",children:[t.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),t.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),t.jsxs("div",{className:"home-page__features-grid",children:[t.jsxs("div",{className:"home-page__feature-card",children:[t.jsx("div",{className:"home-page__feature-icon",children:t.jsx(gn,{size:28})}),t.jsx("h3",{children:"Cours complets"}),t.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),t.jsxs("div",{className:"home-page__feature-card",children:[t.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:t.jsx(_A,{size:28})}),t.jsx("h3",{children:"Quiz interactifs"}),t.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),t.jsxs("div",{className:"home-page__feature-card",children:[t.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:t.jsx(NA,{size:28})}),t.jsx("h3",{children:"Suivi de progression"}),t.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),t.jsxs("div",{className:"home-page__feature-card",children:[t.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:t.jsx(Hb,{size:28})}),t.jsx("h3",{children:"Contenu vrifi"}),t.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),t.jsxs("div",{className:"home-page__feature-card",children:[t.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:t.jsx(mo,{size:28})}),t.jsx("h3",{children:"Accessible 24/7"}),t.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),t.jsxs("div",{className:"home-page__feature-card",children:[t.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:t.jsx(ts,{size:28})}),t.jsx("h3",{children:"Certificats"}),t.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),t.jsx("section",{className:"home-page__premium",children:t.jsx("div",{className:"home-page__container",children:t.jsxs("div",{className:"home-page__premium-content",children:[t.jsxs("div",{className:"home-page__premium-text",children:[t.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),t.jsx("h2",{children:"Passez  la vitesse suprieure"}),t.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",t.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),t.jsxs("ul",{className:"home-page__premium-features",children:[t.jsxs("li",{children:[t.jsx(Bt,{size:18})," Quiz illimits dans toutes les matires"]}),t.jsxs("li",{children:[t.jsx(Bt,{size:18})," Corrections dtailles des exercices"]}),t.jsxs("li",{children:[t.jsx(Bt,{size:18})," Annales des examens (BFEM, BAC)"]}),t.jsxs("li",{children:[t.jsx(Bt,{size:18})," Support prioritaire"]})]}),t.jsxs(Re,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",t.jsx(Os,{size:20})]})]}),t.jsx("div",{className:"home-page__premium-pricing",children:t.jsxs("div",{className:"home-page__pricing-card",children:[t.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),t.jsx("h3",{children:"Accs illimit 6 mois"}),t.jsxs("div",{className:"home-page__pricing-price",children:[t.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),t.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),t.jsx("span",{className:"home-page__pricing-period",children:"/6 mois"})]}),t.jsx("p",{className:"home-page__pricing-save",children:"conomisez 10 000 FCFA vs 23 mois"}),t.jsx(Re,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),t.jsx("section",{className:"home-page__testimonials",children:t.jsxs("div",{className:"home-page__container",children:[t.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),t.jsxs("div",{className:"home-page__testimonials-grid",children:[t.jsxs("div",{className:"home-page__testimonial-card",children:[t.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(r=>t.jsx(vr,{size:16,fill:"#f59e0b",color:"#f59e0b"},r))}),t.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),t.jsxs("div",{className:"home-page__testimonial-author",children:[t.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Fatou Adara"}),t.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),t.jsxs("div",{className:"home-page__testimonial-card",children:[t.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(r=>t.jsx(vr,{size:16,fill:"#f59e0b",color:"#f59e0b"},r))}),t.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),t.jsxs("div",{className:"home-page__testimonial-author",children:[t.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Moussa Diallo"}),t.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),t.jsxs("div",{className:"home-page__testimonial-card",children:[t.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(r=>t.jsx(vr,{size:16,fill:"#f59e0b",color:"#f59e0b"},r))}),t.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),t.jsxs("div",{className:"home-page__testimonial-author",children:[t.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),t.jsxs("div",{children:[t.jsx("strong",{children:"Aminata Ndiaye"}),t.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),t.jsx("section",{className:"home-page__final-cta",children:t.jsxs("div",{className:"home-page__container",children:[t.jsx("h2",{children:"Prt  russir ?"}),t.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!e&&t.jsxs(Re,{to:"/inscription",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",t.jsx(Os,{size:24})]})]})})]})},AA=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],zA=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],kA=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],OA={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function R1(e){switch(e){case"college":return AA;case"lycee":return zA;case"formation_libre":return kA;default:return[]}}function DA(e){return[...AA,...zA,...kA].find(n=>n.value===e)?.label||e}const I1=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],v5=()=>{const[e,r]=g.useState("college"),[n,a]=g.useState([]),[l,o]=g.useState(!0),u=Ze();g.useEffect(()=>{const p=Ee(_e(Q,"disciplines"),Ve("ordre")),h=Ef(p,v=>{const b=v.docs.map(x=>({id:x.id,...x.data(),createdAt:x.data().createdAt?.toDate()||new Date,updatedAt:x.data().updatedAt?.toDate()||new Date}));a(b),o(!1)});return()=>h()},[]);const d=n.filter(p=>p.niveau===e),m=I1.find(p=>p.niveau===e);return t.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[t.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[t.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),t.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),t.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:I1.map(p=>{const h=e===p.niveau;return t.jsxs("button",{onClick:()=>r(p.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${h?p.color:"#e2e8f0"}`,background:h?p.bgLight:"#fff",color:h?p.color:"#718096",fontSize:"1rem",fontWeight:h?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:h?`0 2px 8px ${p.color}20`:"none"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:p.icon}),p.label]},p.niveau)})}),l&&t.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!l&&d.length===0&&t.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[t.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),t.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",OA[e]," pour le moment."]})]}),!l&&d.length>0&&t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:d.map(p=>t.jsxs("div",{onClick:()=>u(`/disciplines/${p.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${p.couleur||m.color}`},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[t.jsx("span",{style:{fontSize:"1.8rem"},children:p.icone||""}),t.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:p.nom})]}),p.description&&t.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:p.description.length>100?`${p.description.slice(0,100)}...`:p.description}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:t.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:m.bgLight,color:m.color},children:DA(p.classe)})}),p.coefficient!==void 0&&t.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",p.coefficient]})]},p.id))})]})},_c="disciplines",L1=e=>{const r=e.data();return{id:e.id,nom:r.nom,niveau:r.niveau,classe:r.classe,ordre:r.ordre,coefficient:r.coefficient,couleur:r.couleur,icone:r.icone,description:r.description,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()}},is={async getAll(e){try{const r=[Ve("ordre","asc")];e?.niveau&&r.unshift(Se("niveau","==",e.niveau)),e?.classe&&r.unshift(Se("classe","==",e.classe));const n=Ee(_e(Q,_c),...r);return(await Ce(n)).docs.map(L1)}catch(r){throw console.error("Erreur lors de la rcupration des disciplines:",r),new Error("Impossible de rcuprer les disciplines")}},async getById(e){try{const r=je(Q,_c,e),n=await gt(r);return n.exists()?L1(n):null}catch(r){throw console.error("Erreur lors de la rcupration de la discipline:",r),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(e){return this.getAll({niveau:e})},async getByClasse(e){return this.getAll({classe:e})},async create(e){try{return(await Dt(_e(Q,_c),{...e,createdAt:Et(),updatedAt:Et()})).id}catch(r){throw console.error("Erreur lors de la cration de la discipline:",r),new Error("Impossible de crer la discipline")}},async update(e,r){try{const n=je(Q,_c,e);await Ge(n,{...r,updatedAt:Et()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(e){try{const r=je(Q,_c,e);await Gr(r)}catch(r){throw console.error("Erreur lors de la suppression de la discipline:",r),new Error("Impossible de supprimer la discipline")}},async exists(e){return await this.getById(e)!==null},async countByNiveau(e){return(await this.getByNiveau(e)).length}},g5="modulepreload",x5=function(e){return"/"+e},$1={},B1=function(r,n,a){let l=Promise.resolve();if(n&&n.length>0){let m=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");l=m(n.map(p=>{if(p=x5(p),p in $1)return;$1[p]=!0;const h=p.endsWith(".css"),v=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const b=document.createElement("link");if(b.rel=h?"stylesheet":g5,h||(b.as="script"),b.crossOrigin="",b.href=p,d&&b.setAttribute("nonce",d),document.head.appendChild(b),h)return new Promise((x,j)=>{b.addEventListener("load",x),b.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return l.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return r().catch(o)})},zs="ressources",b5="ressources",U1=e=>{const r=e.data();return{id:e.id,disciplineId:r.disciplineId,titre:r.titre,type:r.type,contenu:r.contenu,description:r.description,isPremium:r.isPremium||!1,ordre:r.ordre||0,chapitre:r.chapitre,fichierURL:r.fichierURL,fichierNom:r.fichierNom,dureeEstimee:r.dureeEstimee,duree:r.duree,tags:r.tags||[],actif:r.actif!==!1,urlExterne:r.urlExterne,chapitreId:r.chapitreId,auteurId:r.auteurId,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()}},y5=e=>{const r=Date.now(),n=e.split(".").pop();return`${e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${r}.${n}`},ha={async getAll(e,r){try{const n=[Ve("ordre","asc")];e?.disciplineId&&n.unshift(Se("disciplineId","==",e.disciplineId)),e?.chapitreId&&n.unshift(Se("chapitre","==",e.chapitreId)),e?.type&&n.unshift(Se("type","==",e.type)),e?.isPremium!==void 0&&n.unshift(Se("isPremium","==",e.isPremium)),e?.auteurId&&n.unshift(Se("auteurId","==",e.auteurId)),r&&n.push(Gt(r));const a=Ee(_e(Q,zs),...n);return(await Ce(a)).docs.map(U1)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(e){try{const r=je(Q,zs,e),n=await gt(r);return n.exists()?U1(n):null}catch(r){throw console.error("Erreur lors de la rcupration de la ressource:",r),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(e){return this.getAll({disciplineId:e})},async getByChapitre(e){return this.getAll({chapitreId:e})},async getByType(e){return this.getAll({type:e})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(e,r){try{const n={...e,auteurId:r,createdAt:Et(),updatedAt:Et()};return Object.keys(n).forEach(l=>{n[l]===void 0&&delete n[l]}),(await Dt(_e(Q,zs),n)).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(e,r){try{const n={...r,updatedAt:Et()};Object.keys(n).forEach(l=>{n[l]===void 0&&delete n[l]});const a=je(Q,zs,e);await Ge(a,n)}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(e){try{const r=await this.getById(e);r?.fichierURL&&await this.deleteFile(r.fichierURL);const n=je(Q,zs,e);await Gr(n)}catch(r){throw console.error("Erreur lors de la suppression de la ressource:",r),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(e){try{const r=await this.getByDiscipline(e),n=Rn(Q);for(const a of r){a.fichierURL&&await this.deleteFile(a.fichierURL);const l=je(Q,zs,a.id);n.delete(l)}await n.commit()}catch(r){throw console.error("Erreur lors de la suppression des ressources:",r),new Error("Impossible de supprimer les ressources")}},async uploadFile(e,r){try{const n=y5(e.name),a=`${b5}/${r}/${n}`,l=sr(Jt,a);return await $s(l,e),await qn(l)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(e){try{const r=sr(Jt,e);await Ls(r)}catch(r){console.warn("Fichier non trouv ou dj supprim:",r)}},async reorder(e,r){try{const n=Rn(Q);r.forEach((a,l)=>{const o=je(Q,zs,a);n.update(o,{ordre:l+1,updatedAt:Et()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(e,r){await this.update(e,{isPremium:r})},async toggleActive(e,r){await this.update(e,{actif:r})},async countByType(e){return(await this.getByType(e)).length},async getStats(){try{const e=await this.getAll(),r={total:e.length,premium:e.filter(n=>n.isPremium).length,gratuit:e.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return e.forEach(n=>{r.parType[n.type]!==void 0&&r.parType[n.type]++}),r}catch(e){throw console.error("Erreur lors du calcul des statistiques:",e),new Error("Impossible de calculer les statistiques")}}},j5=()=>{const{id:e}=yn(),r=Ze(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[m,p]=g.useState(!0),[h,v]=g.useState(null),[b,x]=g.useState("tous"),[j,_]=g.useState(new Set),C=g.useCallback(async()=>{if(e)try{p(!0),v(null);const $=await is.getById(e);if(!$){v("Discipline introuvable."),p(!1);return}a($);const B=await ha.getAll({disciplineId:e}),H=new Map,T=[];for(const J of B){const P=J.chapitre||J.chapitreId;P?(H.has(P)||H.set(P,[]),H.get(P).push(J)):T.push(J)}const Y=Array.from(H.entries()).map(([J,P])=>({chapitreNom:J,ressources:P.sort((q,U)=>q.ordre-U.ordre)})).sort((J,P)=>J.chapitreNom.localeCompare(P.chapitreNom,"fr"));o(Y),d(T),Y.length>0&&_(new Set([Y[0].chapitreNom]))}catch($){console.error("Erreur chargement discipline:",$),v("Impossible de charger les donnes. Ressayez plus tard.")}finally{p(!1)}},[e]);g.useEffect(()=>{C()},[C]);const w=$=>{_(B=>{const H=new Set(B);return H.has($)?H.delete($):H.add($),H})},E=$=>b==="tous"?$:$.filter(B=>B.type===b),S=$=>{switch($){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},A=$=>{switch($){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return $}},z=$=>{switch($){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},k=$=>$==="college"?"Collge":"Lyce";if(m)return t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[t.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),t.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),t.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(h||!n)return t.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[t.jsx("span",{style:{fontSize:"3rem"},children:""}),t.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:h||"Discipline introuvable"}),t.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),t.jsx("button",{onClick:()=>r("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const M=[...l.flatMap($=>$.ressources),...u],D=[...new Set(M.map($=>$.type))];return t.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[t.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[t.jsx(Re,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),t.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),t.jsx(Re,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),t.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),t.jsx("span",{style:{color:"#374151"},children:n.nom})]}),t.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[t.jsx("span",{style:{fontSize:"2.5rem"},children:n.icone||""}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:n.nom}),n.description&&t.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:n.description})]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[t.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",k(n.niveau),"  ",n.classe]}),t.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",M.length," ressource",M.length!==1?"s":""]}),n.coefficient&&t.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",n.coefficient]})]})]}),D.length>1&&t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[t.jsxs("button",{onClick:()=>x("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:b==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:b==="tous"?"#2563eb":"#fff",color:b==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",M.length,")"]}),D.map($=>{const B=M.filter(T=>T.type===$).length,H=b===$;return t.jsxs("button",{onClick:()=>x($),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:H?`2px solid ${z($)}`:"1px solid #d1d5db",background:H?z($):"#fff",color:H?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[S($)," ",A($)," (",B,")"]},$)})]}),l.length===0&&u.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[t.jsx("span",{style:{fontSize:"3rem"},children:""}),t.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),t.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l.map($=>{const B=E($.ressources);if(B.length===0&&b!=="tous")return null;const H=j.has($.chapitreNom),T=b==="tous"?$.ressources:B;return t.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:H?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[t.jsx("button",{onClick:()=>w($.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:H?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.jsx("span",{style:{fontSize:"1.25rem",transform:H?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),t.jsxs("div",{children:[t.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:$.chapitreNom}),t.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[$.ressources.length," ressource",$.ressources.length!==1?"s":""]})]})]})}),H&&t.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:T.map(Y=>t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:J=>J.currentTarget.style.background="#eef2ff",onMouseLeave:J=>J.currentTarget.style.background="#f9fafb",children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:S(Y.type)}),t.jsxs("div",{children:[t.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:Y.titre}),Y.description&&t.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:Y.description})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[t.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:z(Y.type)},children:A(Y.type)}),Y.isPremium&&t.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),Y.dureeEstimee&&t.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",Y.dureeEstimee," min"]})]})]},Y.id))})]},$.chapitreNom)}),E(u).length>0&&t.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[t.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:E(u).map($=>t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.jsx("span",{style:{fontSize:"1.2rem"},children:S($.type)}),t.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:$.titre})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:z($.type)},children:A($.type)}),$.isPremium&&t.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},$.id))})]})]}),t.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:t.jsx(Re,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},_5=()=>{const{login:e,loginWithGoogle:r}=Ke(),n=Ze(),a=Fb(),l=new URLSearchParams(a.search).get("redirect"),o=a.state?.from||l||"/",[u,d]=g.useState({email:"",password:""}),[m,p]=g.useState(!1),[h,v]=g.useState(!1),[b,x]=g.useState(""),[j,_]=g.useState(!1),C=A=>{const{name:z,value:k}=A.target;d(M=>({...M,[z]:k})),b&&x("")},w=()=>u.email.trim()?u.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)?!0:(x("Veuillez entrer une adresse email valide."),!1):(x("Veuillez entrer votre mot de passe."),!1):(x("Veuillez entrer votre adresse email."),!1),E=async A=>{if(A.preventDefault(),!!w()){p(!0),x("");try{await e(u.email,u.password),n(o,{replace:!0})}catch(z){z instanceof Error?x(z.message):x("Une erreur est survenue lors de la connexion.")}finally{p(!1)}}},S=async()=>{v(!0),x("");try{await r(),n(o,{replace:!0})}catch(A){A instanceof Error&&x(A.message)}finally{v(!1)}};return t.jsx("div",{className:"auth-page",children:t.jsxs("div",{className:"auth-container",children:[t.jsxs("div",{className:"auth-card",children:[t.jsxs("div",{className:"auth-header",children:[t.jsxs(Re,{to:"/",className:"auth-logo",children:[t.jsx("div",{className:"auth-logo__icon",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),t.jsx("span",{children:"PedaClic"})]}),t.jsx("h1",{className:"auth-title",children:"Connexion"}),t.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),b&&t.jsxs("div",{className:"auth-error",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("path",{d:"M12 8v4M12 16h.01"})]}),t.jsx("span",{children:b})]}),t.jsxs("form",{onSubmit:E,className:"auth-form",children:[t.jsxs("div",{className:"auth-field",children:[t.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),t.jsxs("div",{className:"auth-input-wrapper",children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.jsx("input",{type:"email",id:"email",name:"email",value:u.email,onChange:C,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:m})]})]}),t.jsxs("div",{className:"auth-field",children:[t.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),t.jsxs("div",{className:"auth-input-wrapper",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[t.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),t.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),t.jsx("input",{type:j?"text":"password",id:"password",name:"password",value:u.password,onChange:C,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:m}),t.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>_(!j),"aria-label":j?"Masquer le mot de passe":"Afficher le mot de passe",children:j?t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsx("div",{className:"auth-forgot",children:t.jsx(Re,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),t.jsx("button",{type:"submit",className:"auth-button",disabled:m,children:m?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),t.jsx("div",{className:"auth-divider",children:t.jsx("span",{children:"ou"})}),t.jsx("button",{type:"button",className:"auth-google-btn",onClick:S,disabled:m||h,children:h?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"auth-button-spinner auth-button-spinner--dark"}),"Connexion en cours"]}):t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"auth-google-icon",viewBox:"0 0 24 24","aria-hidden":"true",children:[t.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),t.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]})}),t.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",t.jsx(Re,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),t.jsxs("div",{className:"auth-welcome",children:[t.jsx("h2",{children:"Bienvenue sur PedaClic !"}),t.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),t.jsxs("ul",{className:"auth-features",children:[t.jsxs("li",{children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),t.jsxs("li",{children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),t.jsxs("li",{children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),t.jsxs("li",{children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},N5=()=>{const{register:e,loginWithGoogle:r}=Ke(),n=Ze(),[a,l]=g.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[o,u]=g.useState(!1),[d,m]=g.useState(""),[p,h]=g.useState(!1),[v,b]=g.useState(!1),[x,j]=g.useState(!1),[_,C]=g.useState(!1),w=z=>{const{name:k,value:M}=z.target;l(D=>({...D,[k]:M})),d&&m("")},E=()=>a.displayName.trim()?a.displayName.trim().length<2?(m("Le nom doit contenir au moins 2 caractres."),!1):a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)?a.password?a.password.length<6?(m("Le mot de passe doit contenir au moins 6 caractres."),!1):a.password!==a.confirmPassword?(m("Les mots de passe ne correspondent pas."),!1):x?!0:(m("Veuillez accepter les conditions d'utilisation."),!1):(m("Veuillez entrer un mot de passe."),!1):(m("Veuillez entrer une adresse email valide."),!1):(m("Veuillez entrer votre adresse email."),!1):(m("Veuillez entrer votre nom complet."),!1),S=async z=>{if(z.preventDefault(),!!E()){u(!0),m("");try{await e(a),n("/disciplines",{replace:!0})}catch(k){k instanceof Error?m(k.message):m("Une erreur est survenue lors de l'inscription.")}finally{u(!1)}}},A=async()=>{if(!x){m("Veuillez accepter les conditions d'utilisation.");return}C(!0),m("");try{await r(a.role),n("/disciplines",{replace:!0})}catch(z){z instanceof Error&&m(z.message)}finally{C(!1)}};return t.jsx("div",{className:"auth-page",children:t.jsxs("div",{className:"auth-container",children:[t.jsxs("div",{className:"auth-card auth-card--register",children:[t.jsxs("div",{className:"auth-header",children:[t.jsxs(Re,{to:"/",className:"auth-logo",children:[t.jsx("div",{className:"auth-logo__icon",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),t.jsx("span",{children:"PedaClic"})]}),t.jsx("h1",{className:"auth-title",children:"Crer un compte"}),t.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),d&&t.jsxs("div",{className:"auth-error",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("path",{d:"M12 8v4M12 16h.01"})]}),t.jsx("span",{children:d})]}),t.jsxs("form",{onSubmit:S,className:"auth-form",children:[t.jsxs("div",{className:"auth-field",children:[t.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),t.jsxs("div",{className:"auth-input-wrapper",children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),t.jsx("input",{type:"text",id:"displayName",name:"displayName",value:a.displayName,onChange:w,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:o})]})]}),t.jsxs("div",{className:"auth-field",children:[t.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),t.jsxs("div",{className:"auth-input-wrapper",children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:w,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:o})]})]}),t.jsxs("div",{className:"auth-field",children:[t.jsx("label",{className:"auth-label",children:"Je suis :"}),t.jsxs("div",{className:"auth-role-selector",children:[t.jsxs("label",{className:`auth-role-option ${a.role==="eleve"?"auth-role-option--selected":""}`,children:[t.jsx("input",{type:"radio",name:"role",value:"eleve",checked:a.role==="eleve",onChange:w,className:"auth-role-input",disabled:o}),t.jsxs("div",{className:"auth-role-content",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),t.jsx("span",{children:"lve"})]})]}),t.jsxs("label",{className:`auth-role-option ${a.role==="prof"?"auth-role-option--selected":""}`,children:[t.jsx("input",{type:"radio",name:"role",value:"prof",checked:a.role==="prof",onChange:w,className:"auth-role-input",disabled:o}),t.jsxs("div",{className:"auth-role-content",children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),t.jsx("span",{children:"Professeur"})]})]}),t.jsxs("label",{className:`auth-role-option ${a.role==="parent"?"auth-role-option--selected":""}`,children:[t.jsx("input",{type:"radio",name:"role",value:"parent",checked:a.role==="parent",onChange:w,className:"auth-role-input",disabled:o}),t.jsxs("div",{className:"auth-role-content",children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),t.jsx("span",{children:"Parent d'lve"})]})]})]})]}),t.jsxs("div",{className:"auth-field",children:[t.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),t.jsxs("div",{className:"auth-input-wrapper",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[t.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),t.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),t.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:a.password,onChange:w,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:o}),t.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>h(!p),"aria-label":p?"Masquer":"Afficher",children:p?t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),t.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),t.jsxs("div",{className:"auth-field",children:[t.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),t.jsxs("div",{className:"auth-input-wrapper",children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),t.jsx("input",{type:v?"text":"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:w,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:o}),t.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>b(!v),"aria-label":v?"Masquer":"Afficher",children:v?t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),t.jsx("div",{className:"auth-checkbox-field",children:t.jsxs("label",{className:"auth-checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:x,onChange:z=>j(z.target.checked),className:"auth-checkbox",disabled:o}),t.jsx("span",{className:"auth-checkbox-custom"}),t.jsxs("span",{children:["J'accepte les"," ",t.jsx(Re,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",t.jsx(Re,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),t.jsx("button",{type:"submit",className:"auth-button",disabled:o,children:o?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),t.jsx("div",{className:"auth-divider",children:t.jsx("span",{children:"ou"})}),t.jsx("button",{type:"button",className:"auth-google-btn",onClick:A,disabled:o||_,children:_?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"auth-button-spinner auth-button-spinner--dark"}),"Cration du compte"]}):t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"auth-google-icon",viewBox:"0 0 24 24","aria-hidden":"true",children:[t.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),t.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"S'inscrire avec Google"]})}),t.jsx("p",{className:"auth-google-hint",children:"Le rle slectionn ci-dessus sera utilis pour votre compte Google."}),t.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",t.jsx(Re,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),t.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[t.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),t.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),t.jsxs("div",{className:"auth-stats",children:[t.jsxs("div",{className:"auth-stat",children:[t.jsx("span",{className:"auth-stat-number",children:"10 000+"}),t.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),t.jsxs("div",{className:"auth-stat",children:[t.jsx("span",{className:"auth-stat-number",children:"500+"}),t.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),t.jsxs("div",{className:"auth-stat",children:[t.jsx("span",{className:"auth-stat-number",children:"95%"}),t.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),t.jsxs("div",{className:"auth-testimonial",children:[t.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),t.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},S5=()=>{const e=async b=>{const{sendPasswordResetEmail:x}=await B1(async()=>{const{sendPasswordResetEmail:_}=await import("./vendor-firebase-LntcAirY.js").then(C=>C.K);return{sendPasswordResetEmail:_}},[]),{auth:j}=await B1(async()=>{const{auth:_}=await Promise.resolve().then(()=>Z3);return{auth:_}},void 0);await x(j,b)},[r,n]=g.useState(""),[a,l]=g.useState(!1),[o,u]=g.useState(""),[d,m]=g.useState(!1),p=()=>r.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?!0:(u("Veuillez entrer une adresse email valide."),!1):(u("Veuillez entrer votre adresse email."),!1),h=async b=>{if(b.preventDefault(),!!p()){l(!0),u("");try{await e(r),m(!0)}catch(x){x instanceof Error?u(x.message):u("Une erreur est survenue. Veuillez ressayer.")}finally{l(!1)}}},v=()=>{m(!1),n(""),u("")};return t.jsx("div",{className:"auth-page",children:t.jsx("div",{className:"auth-container auth-container--centered",children:t.jsxs("div",{className:"auth-card auth-card--narrow",children:[t.jsx("div",{className:"auth-header",children:t.jsxs(Re,{to:"/",className:"auth-logo",children:[t.jsx("div",{className:"auth-logo__icon",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),t.jsx("span",{children:"PedaClic"})]})}),d?t.jsxs("div",{className:"auth-success-content",children:[t.jsx("div",{className:"auth-success-icon",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),t.jsx("h1",{className:"auth-title",children:"Email envoy !"}),t.jsxs("p",{className:"auth-subtitle",children:["Nous avons envoy un lien de rinitialisation  ",t.jsx("strong",{children:r})]}),t.jsxs("div",{className:"auth-instructions",children:[t.jsx("p",{children:"Vrifiez votre bote de rception et cliquez sur le lien pour rinitialiser votre mot de passe."}),t.jsxs("p",{className:"auth-instructions-note",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"Si vous ne voyez pas l'email, vrifiez votre dossier spam."]})]}),t.jsxs("div",{className:"auth-success-actions",children:[t.jsx(Re,{to:"/connexion",className:"auth-button",children:"Retour  la connexion"}),t.jsx("button",{type:"button",className:"auth-button auth-button--outline",onClick:v,children:"Renvoyer l'email"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"auth-icon",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),t.jsx("h1",{className:"auth-title",children:"Mot de passe oubli ?"}),t.jsx("p",{className:"auth-subtitle",children:"Pas de panique ! Entrez votre email et nous vous enverrons un lien pour rinitialiser votre mot de passe."}),o&&t.jsxs("div",{className:"auth-error",children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10"}),t.jsx("path",{d:"M12 8v4M12 16h.01"})]}),t.jsx("span",{children:o})]}),t.jsxs("form",{onSubmit:h,className:"auth-form",children:[t.jsxs("div",{className:"auth-field",children:[t.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),t.jsxs("div",{className:"auth-input-wrapper",children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.jsx("input",{type:"email",id:"email",value:r,onChange:b=>{n(b.target.value),o&&u("")},placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:a,autoFocus:!0})]})]}),t.jsx("button",{type:"submit",className:"auth-button",disabled:a,children:a?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"auth-button-spinner"}),"Envoi en cours..."]}):"Envoyer le lien"})]}),t.jsx("div",{className:"auth-back",children:t.jsxs(Re,{to:"/connexion",className:"auth-back-link",children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour  la connexion"]})})]})]})})})},PA="https://api.pedaclic.sn",Va={a_la_carte_1:{label:"1 cours",montant:1e3,duree:"1 mois",description:"Choisissez 1 cours par discipline et niveau"},a_la_carte_3:{label:"3 cours",montant:2e3,duree:"1 mois",description:"Choisissez 3 cours par discipline et niveau"},a_la_carte_7:{label:"7 cours",montant:5e3,duree:"1 mois",description:"Choisissez 7 cours par discipline et niveau"},a_la_carte_tous:{label:"Tous les contenus",montant:25e3,duree:"9 mois",description:"Accs  l'intgralit du catalogue pendant 9 mois"},illimite_3m:{label:"3 mois",montant:1e4,duree:"3 mois",description:"Accs illimit aux cours, quiz et ressources pendant 3 mois"},illimite_6m:{label:"6 mois",montant:2e4,duree:"6 mois",description:"Accs illimit pendant 6 mois  conomisez 10 000 FCFA !"},illimite_1an:{label:"1 an",montant:3e4,duree:"1 an",description:"Accs illimit toute l'anne  conomisez 30 000 FCFA !"}};async function w5(e){const r=await fetch(`${PA}/api/moneroo/initiate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const a=await r.json().catch(()=>({}));throw new Error(a.error||`Erreur serveur (${r.status})`)}const n=await r.json();if(!n.success||!n.checkoutUrl)throw new Error("Rponse invalide du serveur de paiement");return n}async function C5(e){const r=await fetch(`${PA}/api/moneroo/verify/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Erreur vrification paiement (${r.status})`);return r.json()}function E5(e){window.location.href=e}function A5(){const e=new URLSearchParams(window.location.search);return{paymentId:e.get("paymentId"),paymentStatus:e.get("paymentStatus"),status:e.get("status")}}const z5={"6eme":1,"6me":1,"5eme":2,"5me":2,"4eme":3,"4me":3,"3eme":4,"3me":4,"2nde":5,seconde:5,"1ere":6,"1re":6,terminale:7};function F1(e){const r=e.toLowerCase().trim();return z5[r]??99}function na(){const[e,r]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{let m=!1;async function p(){o(!0),d(null);try{const h=Ee(_e(Q,"disciplines"),Ve("ordre")),v=await Ce(h);if(m)return;const b=new Set,x=new Set;v.forEach(C=>{const w=C.data();w.nom&&typeof w.nom=="string"&&b.add(w.nom.trim()),w.classe&&typeof w.classe=="string"&&x.add(w.classe.trim())});const j=Array.from(b).sort((C,w)=>C.localeCompare(w,"fr")).map(C=>({valeur:C,label:C})),_=Array.from(x).sort((C,w)=>{const E=F1(C),S=F1(w);return E!==S?E-S:C.localeCompare(w,"fr")}).map(C=>({valeur:C,label:C}));r(j),a(_)}catch(h){m||(console.error("[useDisciplinesOptions] Erreur Firestore :",h),d("Impossible de charger les matires/niveaux."))}finally{m||o(!1)}}return p(),()=>{m=!0}},[]),{matieres:e,niveaux:n,loading:l,error:u}}const hr=["6me","5me","4me","3me","2nde","1re","Terminale"],ss=hr.map(e=>({valeur:e,label:e==="3me"?"3me (BFEM)":e==="Terminale"?"Terminale (BAC)":e}));function Tx(e){return e?{"6eme":"6me","5eme":"5me","4eme":"4me","3eme":"3me","1ere":"1re"}[e]||e:""}ss.filter(e=>["6me","5me","4me","3me"].includes(e.valeur));ss.filter(e=>["2nde","1re","Terminale"].includes(e.valeur));const G1=["2023-2024","2024-2025","2025-2026","2026-2027"],k5=["#2563eb","#7c3aed","#059669","#d97706","#dc2626","#0891b2","#db2777","#65a30d"],Wi={cours:{label:"Cours",emoji:"",color:"#3b82f6"},exercices:{label:"Exercices",emoji:"",color:"#8b5cf6"},correction:{label:"Correction",emoji:"",color:"#10b981"},devoir_surveille:{label:"Devoir surveill",emoji:"",color:"#f59e0b"},devoir_maison:{label:"Devoir  la maison",emoji:"",color:"#6366f1"},travaux_pratiques:{label:"Travaux pratiques",emoji:"",color:"#14b8a6"},evaluation:{label:"valuation",emoji:"",color:"#ef4444"},revision:{label:"Rvision",emoji:"",color:"#f97316"}},Lc={realise:{label:"Ralis",color:"#059669",bg:"#d1fae5"},planifie:{label:"Planifi",color:"#d97706",bg:"#fef3c7"},annule:{label:"Annul",color:"#dc2626",bg:"#fee2e2"},reporte:{label:"Report",color:"#2563eb",bg:"#dbeafe"}},MA={interro:"Interrogation",ds:"Devoir Surveill",examen:"Examen",oral:"Oral",autre:"Autre"},TA={devoir:{label:"Devoir  corriger",emoji:""},evaluation:{label:"valuation  prparer",emoji:""},notes:{label:"Notes  saisir",emoji:""},cours:{label:"Cours  prparer",emoji:""},personnalise:{label:"Rappel personnalis",emoji:""}},O5=["Communiquer  l'crit","Communiquer  l'oral","Raisonner et rsoudre des problmes","Chercher et s'informer","Modliser","Reprsenter","Calculer et algorithmiser","Analyser et interprter","Exprimenter et observer","Cooprer et mutualiser"],D5=[{id:"illimite_3m",nom:"3 mois",description:"Accs illimit  tous les cours",prix:1e4,duree:"3 mois",nombreCoursMax:null,accesIllimite:!0},{id:"illimite_6m",nom:"6 mois",description:"Accs illimit  tous les cours",prix:2e4,duree:"6 mois",economie:"10 000 FCFA vs 23 mois",popular:!0,nombreCoursMax:null,accesIllimite:!0},{id:"illimite_1an",nom:"1 an",description:"Accs illimit  tous les cours",prix:3e4,duree:"12 mois",economie:"30 000 FCFA vs 43 mois",nombreCoursMax:null,accesIllimite:!0}],qA=[{id:"a_la_carte_1",nom:"1 cours",description:"Choisissez 1 cours par discipline et niveau",prix:1e3,duree:"1 mois",nombreCoursMax:1,accesIllimite:!1},{id:"a_la_carte_3",nom:"3 cours",description:"Choisissez 3 cours par discipline et niveau",prix:2e3,duree:"1 mois",nombreCoursMax:3,accesIllimite:!1},{id:"a_la_carte_7",nom:"7 cours",description:"Choisissez 7 cours par discipline et niveau",prix:5e3,duree:"1 mois",nombreCoursMax:7,accesIllimite:!1},{id:"a_la_carte_tous",nom:"Tous les contenus",description:"Accs  l'intgralit du catalogue",prix:25e3,duree:"9 mois",nombreCoursMax:null,accesIllimite:!0}],RA=[...qA,...D5];function jo(e){return e.startsWith("a_la_carte_")}function IA(e){return e?RA.find(n=>n.id===e)?.nombreCoursMax??null:null}function P5(e){const r=RA.find(n=>n.id===e);return r?r.accesIllimite:["mensuel","annuel","illimite_3m","illimite_6m","illimite_1an"].includes(e)}const M5=["illimite_1an","a_la_carte_tous"];function T5(e){return e?M5.includes(e):!1}const H1=30;function q5(e){return e&&T5(e)?null:H1}const LA=({matieres:e,niveaux:r,value:n,onChange:a,formule:l,hint:o,compact:u=!1})=>{const d=l?IA(l):null;return t.jsxs("div",{className:`matieres-niveaux-selector ${u?"matieres-niveaux-selector--compact":""}`,children:[t.jsxs("div",{className:"matieres-niveaux-selector__row",children:[t.jsxs("div",{className:"matieres-niveaux-selector__field",children:[t.jsx("label",{htmlFor:"mn-matiere",className:"matieres-niveaux-selector__label",children:"Matire"}),t.jsxs("select",{id:"mn-matiere",value:n.matiere,onChange:m=>a({...n,matiere:m.target.value}),className:"matieres-niveaux-selector__select","aria-label":"Filtrer par matire",children:[t.jsx("option",{value:"",children:"Toutes les matires"}),e.map(m=>t.jsx("option",{value:m.valeur,children:m.label},m.valeur))]})]}),t.jsxs("div",{className:"matieres-niveaux-selector__field",children:[t.jsx("label",{htmlFor:"mn-niveau",className:"matieres-niveaux-selector__label",children:"Niveau"}),t.jsxs("select",{id:"mn-niveau",value:n.niveau,onChange:m=>a({...n,niveau:m.target.value}),className:"matieres-niveaux-selector__select","aria-label":"Filtrer par niveau",children:[t.jsx("option",{value:"",children:"Tous les niveaux"}),r.map(m=>t.jsx("option",{value:m.valeur,children:m.label},m.valeur))]})]})]}),(o||d!=null)&&t.jsxs("p",{className:"matieres-niveaux-selector__hint",children:[o,d!=null&&t.jsxs("span",{children:[o?"  ":"","Slection possible : jusqu' ",t.jsxs("strong",{children:[d," cours"]}),"."]})]})]})},R5=[{icone:"",titre:"Cours complets",description:"Accs aux cours du programme sngalais 6me  Terminale"},{icone:"",titre:"Quiz illimits",description:"Tous les quiz par matire avec corrections dtailles et explications"},{icone:"",titre:"Suivi de progression",description:"Tableaux de bord analytiques pour suivre les performances en temps rel"},{icone:"",titre:"Bibliothque ebooks",description:"Accs aux manuels et ressources pdagogiques numriques"},{icone:"",titre:"Notifications",description:"Alertes personnalises pour devoirs, valuations et rappels scolaires"}],I5=[{icone:"",titre:"Cahier de textes",description:"Grez vos cahiers de textes numriques et partagez avec vos lves"},{icone:"",titre:"Gnrateur de contenus",description:"Gnration de cours, fiches et valuations par intelligence artificielle"},{icone:"",titre:"Cours en ligne",description:"Crez et publiez des cours pour vos lves"},{icone:"",titre:"Mdiathque",description:"Accdez  la mdiathque pdagogique et enrichissez vos squences"},{icone:"",titre:"Crateur de squences",description:"Construisez des squences pdagogiques compltes"},{icone:"",titre:"Suivi des groupes",description:"Suivez la progression de vos classes et lves"}],L5=[{nom:"Wave",couleur:"#1976D2",emoji:""},{nom:"Orange Money",couleur:"#FF6B00",emoji:""},{nom:"Free Money",couleur:"#E30613",emoji:""},{nom:"FLASH",couleur:"#6B21A8",emoji:""},{nom:"Carte Bancaire",couleur:"#059669",emoji:""}];function $5(){const e=Ze(),{currentUser:r}=Ke(),{matieres:n}=na(),[a,l]=g.useState("a_la_carte"),[o,u]=g.useState("a_la_carte_3"),[d,m]=g.useState(!1),[p,h]=g.useState(null),[v,b]=g.useState({matiere:"",niveau:""}),x=r?.isPremium===!0,j=r?.role==="prof",_=j?I5:R5,C=jo(o);async function w(){if(!r){e("/connexion?redirect=/premium");return}m(!0),h(null);try{const E=await w5({plan:o,userId:r.uid,userEmail:r.email||"",userFirstName:r.displayName?.split(" ")[0]||(j?"Professeur":"lve"),userLastName:r.displayName?.split(" ").slice(1).join(" ")||"PedaClic"});E5(E.checkoutUrl)}catch(E){h(E instanceof Error?E.message:"Une erreur est survenue. Veuillez ressayer."),m(!1)}}return t.jsxs("div",{className:"premium-page",children:[t.jsx("header",{className:"premium-hero",children:t.jsxs("div",{className:"premium-hero__content",children:[t.jsx("span",{className:"premium-hero__badge",children:" PREMIUM"}),t.jsx("h1",{className:"premium-hero__titre",children:j?"Premium Pro  Outils pdagogiques":"Dbloque tout PedaClic"}),t.jsx("p",{className:"premium-hero__sous-titre",children:j?"Cahier de textes, Gnrateur IA, Cours en ligne, Mdiathque Accdez  tous les outils Premium Pro.":"Accde  tous les cours, quiz et ressources du programme sngalais. Du 6me au BAC  L'cole en un clic !"})]})}),t.jsxs("div",{className:"premium-contenu",children:[x&&t.jsxs("section",{className:"premium-abonne",children:[t.jsx("div",{className:"premium-abonne__icone",children:""}),t.jsx("h2",{children:"Tu es dj abonn Premium !"}),t.jsx("p",{children:"Ton abonnement est actif. Profite de tous les contenus exclusifs."}),t.jsx("button",{className:"premium-btn premium-btn--secondaire",onClick:()=>{const E=r?.role==="eleve"?"/eleve/dashboard":r?.role==="prof"?"/prof/dashboard":r?.role==="parent"?"/parent/dashboard":"/";e(E)},children:"Aller au tableau de bord"})]}),!x&&t.jsxs("section",{className:"premium-plans",children:[t.jsx("h2",{className:"premium-section__titre",children:"Choisir un abonnement"}),t.jsxs("div",{className:"premium-pricing__tabs",style:{marginBottom:"1.5rem"},children:[t.jsx("button",{type:"button",className:`premium-pricing__tab ${a==="a_la_carte"?"premium-pricing__tab--active":""}`,onClick:()=>{l("a_la_carte"),u("a_la_carte_3")},children:" Cours  la carte"}),t.jsx("button",{type:"button",className:`premium-pricing__tab ${a==="illimite"?"premium-pricing__tab--active":""}`,onClick:()=>{l("illimite"),u("illimite_6m")},children:" Accs illimit"})]}),t.jsx("div",{className:"premium-plans__grille",style:{gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))"},children:a==="a_la_carte"?t.jsx(t.Fragment,{children:["a_la_carte_1","a_la_carte_3","a_la_carte_7","a_la_carte_tous"].map(E=>t.jsxs("div",{className:`premium-plan-card ${o===E?"premium-plan-card--actif":""} ${E==="a_la_carte_3"?"premium-plan-card--populaire":""}`,onClick:()=>u(E),role:"button",tabIndex:0,onKeyDown:S=>S.key==="Enter"&&u(E),children:[E==="a_la_carte_3"&&t.jsx("div",{className:"premium-plan-card__badge-populaire",children:"Populaire"}),t.jsx("div",{className:"premium-plan-card__select",children:t.jsx("span",{className:o===E?"premium-plan-card__radio--actif":"premium-plan-card__radio"})}),t.jsxs("div",{className:"premium-plan-card__header",children:[t.jsx("span",{className:"premium-plan-card__icone",children:""}),t.jsx("h3",{className:"premium-plan-card__nom",children:Va[E].label})]}),t.jsxs("div",{className:"premium-plan-card__prix",children:[t.jsx("span",{className:"premium-plan-card__montant",children:Va[E].montant.toLocaleString("fr-FR")}),t.jsxs("span",{className:"premium-plan-card__devise",children:["FCFA / ",Va[E].duree]})]}),t.jsx("p",{className:"premium-plan-card__description",children:Va[E].description})]},E))}):t.jsx(t.Fragment,{children:["illimite_3m","illimite_6m","illimite_1an"].map(E=>t.jsxs("div",{className:`premium-plan-card ${o===E?"premium-plan-card--actif":""} ${E==="illimite_6m"?"premium-plan-card--populaire":""}`,onClick:()=>u(E),role:"button",tabIndex:0,onKeyDown:S=>S.key==="Enter"&&u(E),children:[E==="illimite_6m"&&t.jsx("div",{className:"premium-plan-card__badge-populaire",children:" Meilleure offre"}),t.jsx("div",{className:"premium-plan-card__select",children:t.jsx("span",{className:o===E?"premium-plan-card__radio--actif":"premium-plan-card__radio"})}),t.jsxs("div",{className:"premium-plan-card__header",children:[t.jsx("span",{className:"premium-plan-card__icone",children:""}),t.jsx("h3",{className:"premium-plan-card__nom",children:Va[E].label})]}),t.jsxs("div",{className:"premium-plan-card__prix",children:[t.jsx("span",{className:"premium-plan-card__montant",children:Va[E].montant.toLocaleString("fr-FR")}),t.jsxs("span",{className:"premium-plan-card__devise",children:["FCFA / ",Va[E].duree]})]}),E==="illimite_6m"&&t.jsx("div",{className:"premium-plan-card__economie",children:" conomisez 10 000 FCFA vs 23 mois"}),E==="illimite_1an"&&t.jsx("div",{className:"premium-plan-card__economie",children:" conomisez 30 000 FCFA vs 43 mois"}),t.jsx("p",{className:"premium-plan-card__description",children:Va[E].description})]},E))})}),C&&t.jsxs("div",{className:"premium-plans__selector",style:{marginTop:"1.5rem",padding:"1rem",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[t.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem",color:"#475569"},children:"Aperu  Choisir matire et niveau"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"1rem"},children:"Aprs votre souscription, vous pourrez slectionner vos cours par matire et niveau. La slection du niveau affichera uniquement les contenus correspondants."}),t.jsx(LA,{matieres:n,niveaux:ss,value:v,onChange:b,formule:o,hint:"Filtrez pour prvisualiser les contenus disponibles."})]}),p&&t.jsxs("div",{className:"premium-erreur",role:"alert",children:[" ",p]}),t.jsxs("div",{className:"premium-paiement",children:[t.jsx("button",{className:"premium-btn premium-btn--principal",onClick:w,disabled:d,"aria-busy":d,children:d?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"premium-spinner","aria-hidden":"true"})," Redirection en cours"]}):t.jsxs(t.Fragment,{children:[" S'abonner  ",Va[o]?.montant.toLocaleString("fr-FR")," FCFA"]})}),t.jsx("p",{className:"premium-paiement__securite",children:" Paiement 100% scuris via Moneroo"}),t.jsxs("div",{className:"premium-moyens-paiement",children:[t.jsx("p",{className:"premium-moyens-paiement__titre",children:"Moyens de paiement accepts :"}),t.jsx("div",{className:"premium-moyens-paiement__liste",children:L5.map(E=>t.jsxs("span",{className:"premium-moyen-badge",style:{borderColor:E.couleur,color:E.couleur},title:E.nom,children:[E.emoji," ",E.nom]},E.nom))})]})]})]}),t.jsxs("section",{className:"premium-avantages",children:[t.jsx("h2",{className:"premium-section__titre",children:j?"Ce qui est inclus  Premium Pro":"Ce qui est inclus"}),t.jsx("div",{className:"premium-avantages__grille",children:_.map(E=>t.jsxs("div",{className:"premium-avantage-card",children:[t.jsx("span",{className:"premium-avantage-card__icone",children:E.icone}),t.jsxs("div",{className:"premium-avantage-card__texte",children:[t.jsx("h3",{children:E.titre}),t.jsx("p",{children:E.description})]})]},E.titre))})]}),t.jsxs("section",{className:"premium-faq",children:[t.jsx("h2",{className:"premium-section__titre",children:"Questions frquentes"}),t.jsxs("div",{className:"premium-faq__liste",children:[t.jsxs("div",{className:"premium-faq__item",children:[t.jsx("h3",{children:"Comment payer avec Wave ou Orange Money ?"}),t.jsx("p",{children:`Clique sur "S'abonner", tu seras redirig vers la page de paiement Moneroo. Choisis ton moyen de paiement prfr et suis les instructions.`})]}),t.jsxs("div",{className:"premium-faq__item",children:[t.jsx("h3",{children:"Mon accs est activ quand ?"}),t.jsx("p",{children:"L'accs Premium est activ automatiquement ds la confirmation de ton paiement, en quelques secondes."})]}),t.jsxs("div",{className:"premium-faq__item",children:[t.jsx("h3",{children:"Puis-je annuler mon abonnement ?"}),t.jsx("p",{children:"Oui. Contacte-nous via WhatsApp ou email. L'accs reste actif jusqu' la fin de la priode paye."})]}),t.jsxs("div",{className:"premium-faq__item",children:[t.jsx("h3",{children:"L'abonnement est-il renouvel automatiquement ?"}),t.jsx("p",{children:"Non. Tu recevras une notification avant l'expiration pour renouveler si tu le souhaites."})]})]})]})]})]})}const Un="cours_en_ligne",rl="cours_sections";function B5(e){const r=[/(?:youtube\.com\/watch\?v=)([^&\n?#]+)/,/(?:youtu\.be\/)([^&\n?#]+)/,/(?:youtube\.com\/embed\/)([^&\n?#]+)/];for(const n of r){const a=e.match(n);if(a)return a[1]}return null}async function $A(e){let r=Ee(_e(Q,Un),Se("statut","==","publie"),Ve("updatedAt","desc"),Gt(50));return(await Ce(r)).docs.map(l=>({id:l.id,...l.data()}))}async function BA(e){const r=await gt(je(Q,Un,e));return r.exists()?{id:r.id,...r.data()}:null}async function U5(e){const r=Ee(_e(Q,Un),Se("profId","==",e),Ve("updatedAt","desc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}async function F5(){const e=Ee(_e(Q,Un),Ve("updatedAt","desc"),Gt(200));return(await Ce(e)).docs.map(n=>({id:n.id,...n.data()}))}async function G5(e,r,n){const a=Ae.now();return(await Dt(_e(Q,Un),{...n,profId:e,profNom:r,statut:n.statut??"brouillon",nombreInscrits:0,nombreSections:0,createdAt:a,updatedAt:a})).id}async function H5(e,r){await Ge(je(Q,Un,e),{...r,updatedAt:Ae.now()})}async function qx(e){await Ge(je(Q,Un,e),{statut:"publie",publieAt:Ae.now(),updatedAt:Ae.now()})}async function V5(e){await Ge(je(Q,Un,e),{statut:"archive",updatedAt:Ae.now()})}async function Q5(e){const r=Rn(Q);(await Ce(Ee(_e(Q,rl),Se("coursId","==",e)))).docs.forEach(a=>r.delete(a.ref)),r.delete(je(Q,Un,e)),await r.commit()}async function UA(e){const r=Ee(_e(Q,rl),Se("coursId","==",e),Ve("ordre","asc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}async function Y5(e,r){const n=Rn(Q),a=Ae.now(),l=je(_e(Q,rl));return n.set(l,{...r,coursId:e,blocs:r.blocs??[],createdAt:a,updatedAt:a}),n.update(je(Q,Un,e),{nombreSections:as(1),updatedAt:a}),await n.commit(),l.id}async function V1(e,r){const n=Ae.now();let a={...r,updatedAt:n};r.blocs&&(a.dureeEstimee=FA(r.blocs)),await Ge(je(Q,rl,e),a)}async function K5(e,r){const n=Rn(Q),a=Ae.now();n.delete(je(Q,rl,e)),n.update(je(Q,Un,r),{nombreSections:as(-1),updatedAt:a}),await n.commit()}async function W5(e){const r=Rn(Q),n=Ae.now();e.forEach(({id:a,ordre:l})=>{r.update(je(Q,rl,a),{ordre:l,updatedAt:n})}),await r.commit()}async function X5(e,r){const n=r.map((a,l)=>({...a,ordre:l}));await Ge(je(Q,rl,e),{blocs:n,dureeEstimee:FA(n),updatedAt:Ae.now()})}function FA(e){let r=0;return e.forEach(n=>{switch(n.type){case"texte":r+=Math.max(1,Math.ceil(n.contenu.split(" ").length/200));break;case"video":r+=5;break;case"quiz":r+=2;break;case"exercice":r+=n.difficulte==="difficile"?10:n.difficulte==="moyen"?5:3;break;case"image":case"encadre":r+=1;break}}),Math.max(1,r)}async function Z5(e){await Ge(je(Q,Un,e),{nombreInscrits:as(1)})}async function J5(e,r){await Ge(je(Q,"users",e),{coursChoisis:r,updatedAt:Et()})}function eR(e,r,n,a){return r?P5(n||"illimite_6m")||!jo(n||"illimite_6m")?!0:a.includes(e):!1}function tR(){const{currentUser:e}=Ke(),r=Ze(),{matieres:n}=na(),[a,l]=g.useState([]),[o,u]=g.useState(!0),[d,m]=g.useState(!1),[p,h]=g.useState({matiere:"",niveau:""}),[v,b]=g.useState(e?.coursChoisis??[]),x=e?.subscriptionPlan,j=IA(x||"a_la_carte_1"),_=jo(x||"a_la_carte_1"),C=qA.find(z=>z.id===x);g.useEffect(()=>{w()},[]);async function w(){u(!0);try{let z=await $A();e?.role==="eleve"&&(z=z.filter(k=>!k.reservedPro)),l(z)}catch{l([])}finally{u(!1)}}const E=a.filter(z=>!(p.matiere&&z.matiere!==p.matiere||p.niveau&&z.niveau!==p.niveau));function S(z){if(!j)return;v.indexOf(z)>=0?b(v.filter(M=>M!==z)):v.length<j&&b([...v,z])}async function A(){if(e){m(!0);try{await J5(e.uid,v);const z=e.role==="eleve"?"/eleve/dashboard":e.role==="prof"?"/prof/dashboard":e.role==="parent"?"/parent/dashboard":"/";r(z,{state:{message:"Vos cours ont t mis  jour."}})}catch{m(!1)}}}return e?.isPremium?!_||j===null?t.jsx("div",{className:"cours-catalogue",children:t.jsxs("div",{className:"cours-catalogue__hero",children:[t.jsx("h1",{children:"Accs illimit"}),t.jsx("p",{children:"Votre formule vous donne accs  tous les cours. Aucun choix  faire !"}),t.jsx(Re,{to:"/cours",className:"btn btn--primary",children:"Voir le catalogue"})]})}):t.jsxs("div",{className:"cours-catalogue",children:[t.jsxs("section",{className:"cours-catalogue__hero",children:[t.jsx("h1",{className:"cours-catalogue__hero-titre",children:" Mes cours  la carte"}),t.jsxs("p",{className:"cours-catalogue__hero-sous-titre",children:["Choisissez jusqu' ",t.jsxs("strong",{children:[j," cours"]})," parmi le catalogue. Filtrez par discipline et niveau."]}),t.jsxs("div",{className:"premium-cours-choice__plan",children:[t.jsxs("span",{className:"badge badge--premium",children:[C?.nom,"  ",C?.prix.toLocaleString("fr-FR")," FCFA / ",C?.duree]}),t.jsxs("span",{className:"premium-cours-choice__count",children:[v.length," / ",j," cours slectionns"]})]})]}),t.jsx("section",{className:"cours-catalogue__filtres",children:t.jsx("div",{className:"cours-catalogue__filtres-inner",children:t.jsx(LA,{matieres:n,niveaux:NIVEAUX_COURS,value:p,onChange:h,formule:x,hint:"La slection du niveau affiche uniquement les contenus correspondants."})})}),t.jsx("main",{className:"cours-catalogue__contenu",children:o?t.jsx("div",{className:"cours-catalogue__grille","aria-busy":"true",children:[1,2,3,4].map(z=>t.jsxs("div",{className:"cours-card cours-card--skeleton",children:[t.jsx("div",{className:"skeleton cours-card__cover"}),t.jsxs("div",{className:"cours-card__body",children:[t.jsx("div",{className:"skeleton",style:{height:16,width:"60%",marginBottom:8}}),t.jsx("div",{className:"skeleton",style:{height:20,marginBottom:8}})]})]},z))}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"premium-cours-choice__actions",children:[t.jsx("button",{className:"btn-primary",onClick:A,disabled:d,children:d?"Enregistrement...":" Enregistrer mes choix"}),t.jsx(Re,{to:"/cours",className:"btn-secondary",children:"Voir le catalogue"})]}),t.jsx("div",{className:"cours-catalogue__grille",children:E.map(z=>{const k=v.includes(z.id),M=v.length<(j||0)||k,D=ss.find($=>$.valeur===z.niveau)?.label??z.niveau;return t.jsxs("article",{className:`cours-card ${k?"cours-card--selected":""}`,onClick:()=>M&&S(z.id),role:"button",tabIndex:0,onKeyDown:$=>$.key==="Enter"&&M&&S(z.id),children:[t.jsxs("div",{className:"cours-card__cover",children:[z.couvertureUrl?t.jsx("img",{src:z.couvertureUrl,alt:z.titre,loading:"lazy"}):t.jsx("div",{className:"cours-card__cover-placeholder",children:t.jsx("span",{children:z.matiere.charAt(0)})}),t.jsx("span",{className:`cours-card__badge ${k?"cours-card__badge--premium":"cours-card__badge--gratuit"}`,children:k?" Slectionn":"Cliquer pour ajouter"})]}),t.jsxs("div",{className:"cours-card__body",children:[t.jsxs("div",{className:"cours-card__meta",children:[t.jsx("span",{className:"cours-card__matiere",children:z.matiere}),t.jsx("span",{className:"cours-card__niveau",children:D})]}),t.jsx("h3",{className:"cours-card__titre",children:z.titre}),t.jsx("p",{className:"cours-card__description",children:z.description})]})]},z.id)})}),E.length===0&&!o&&t.jsxs("div",{className:"cours-catalogue__vide",children:[t.jsx("span",{children:""}),t.jsx("h3",{children:"Aucun cours trouv"}),t.jsx("p",{children:"Modifiez vos filtres ou consultez le catalogue complet."})]})]})})]}):t.jsx("div",{className:"cours-catalogue",children:t.jsxs("div",{className:"cours-catalogue__hero",children:[t.jsx("h1",{children:"Choix des cours"}),t.jsx("p",{children:"Cette page est rserve aux abonns Premium."}),t.jsx(Re,{to:"/premium",className:"btn btn--primary",children:"Dcouvrir Premium"})]})})}function rR(){const e=Ze(),[r,n]=g.useState("chargement"),[a,l]=g.useState(null);return g.useEffect(()=>{async function o(){const{paymentId:u,paymentStatus:d}=A5();if(!u){e("/premium");return}if(d==="failed"||d==="cancelled"){n("echec"),l("Le paiement a t annul ou a chou. Aucun montant n'a t dbit.");return}try{const m=await C5(u);m.status==="success"?n("succes"):m.status==="pending"?n("attente"):(n("echec"),l("Le paiement n'a pas pu tre confirm. Contactez le support si le montant a t dbit."))}catch{n("attente")}}o()},[e]),r==="chargement"?t.jsx("div",{className:"premium-confirmation",children:t.jsxs("div",{className:"premium-confirmation__card",children:[t.jsx("div",{className:"premium-spinner premium-spinner--lg","aria-label":"Vrification en cours"}),t.jsx("h2",{children:"Vrification du paiement"}),t.jsx("p",{children:"Merci de patienter quelques secondes."})]})}):r==="succes"?t.jsx("div",{className:"premium-confirmation",children:t.jsxs("div",{className:"premium-confirmation__card premium-confirmation__card--succes",children:[t.jsx("div",{className:"premium-confirmation__icone premium-confirmation__icone--succes",children:""}),t.jsx("h1",{children:"Bienvenue dans Premium ! "}),t.jsxs("p",{className:"premium-confirmation__message",children:["Ton abonnement est activ. Tu as maintenant accs  ",t.jsx("strong",{children:"tous les cours, quiz et ressources"})," de PedaClic."]}),t.jsxs("div",{className:"premium-confirmation__actions",children:[t.jsx("button",{className:"premium-btn premium-btn--principal",onClick:()=>e("/dashboard"),children:" Accder au tableau de bord"}),t.jsx("button",{className:"premium-btn premium-btn--secondaire",onClick:()=>e("/cours"),children:" Voir les cours"})]})]})}):r==="attente"?t.jsx("div",{className:"premium-confirmation",children:t.jsxs("div",{className:"premium-confirmation__card premium-confirmation__card--attente",children:[t.jsx("div",{className:"premium-confirmation__icone premium-confirmation__icone--attente",children:""}),t.jsx("h1",{children:"Paiement en cours de traitement"}),t.jsx("p",{className:"premium-confirmation__message",children:"Ton paiement est en cours de vrification. Ton accs Premium sera activ automatiquement ds confirmation (gnralement moins de 5 minutes)."}),t.jsx("p",{className:"premium-confirmation__message",children:"Tu recevras une notification ds que c'est prt. Tu peux fermer cette page."}),t.jsx("button",{className:"premium-btn premium-btn--secondaire",onClick:()=>e("/dashboard"),children:"Aller au tableau de bord"})]})}):t.jsx("div",{className:"premium-confirmation",children:t.jsxs("div",{className:"premium-confirmation__card premium-confirmation__card--echec",children:[t.jsx("div",{className:"premium-confirmation__icone premium-confirmation__icone--echec",children:""}),t.jsx("h1",{children:"Paiement non abouti"}),t.jsx("p",{className:"premium-confirmation__message",children:a||"Une erreur est survenue lors du paiement."}),t.jsxs("div",{className:"premium-confirmation__actions",children:[t.jsx("button",{className:"premium-btn premium-btn--principal",onClick:()=>e("/premium"),children:" Ressayer"}),t.jsx("button",{className:"premium-btn premium-btn--secondaire",onClick:()=>e("/dashboard"),children:"Retour au tableau de bord"})]})]})})}const nR=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"},{id:"cours",label:"Cours en ligne",icon:"",href:"/prof/cours"},{id:"ebooks",label:"Bibliothque Ebooks",icon:"",href:"/admin/ebooks"},{id:"mediatheque",label:"Mdiathque",icon:"",href:"/mediatheque"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz-avance",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Outils IA",items:[{id:"generateur",label:"Gnrateur IA",icon:"",href:"/generateur"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],pn=({children:e,currentPage:r="dashboard"})=>{const{currentUser:n,logout:a}=Ke(),[l,o]=g.useState(!0),[u,d]=g.useState(!1),m=Fb(),p=async()=>{try{d(!0),await a(),window.location.href="/connexion"}catch(x){console.error("Erreur lors de la dconnexion:",x),d(!1)}},h=()=>n?.displayName?n.displayName.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"AD",v=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}},b=x=>x.href==="/admin"?m.pathname==="/admin"||m.pathname==="/admin/":m.pathname.startsWith(x.href);return t.jsxs("div",{className:"admin-layout",children:[t.jsxs("aside",{className:`admin-sidebar ${l?"":"admin-sidebar--collapsed"}`,children:[t.jsx("header",{className:"admin-sidebar__header",children:t.jsxs(Re,{to:"/",className:"admin-sidebar__logo",children:[t.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),t.jsx("span",{children:"PedaClic"})]})}),t.jsx("nav",{className:"admin-sidebar__nav",children:nR.map((x,j)=>t.jsxs("div",{className:"admin-nav__section",children:[t.jsx("h3",{className:"admin-nav__title",children:x.title}),t.jsx("ul",{className:"admin-nav__list",children:x.items.map(_=>t.jsx("li",{className:"admin-nav__item",children:t.jsxs(Re,{to:_.href,className:`admin-nav__link ${b(_)?"admin-nav__link--active":""}`,children:[t.jsx("span",{className:"admin-nav__icon",children:_.icon}),t.jsx("span",{className:"admin-nav__label",children:_.label})]})},_.id))})]},j))}),t.jsx("footer",{className:"admin-sidebar__footer",children:t.jsxs("div",{className:"admin-user",children:[t.jsx("div",{className:"admin-user__avatar",children:h()}),t.jsxs("div",{className:"admin-user__info",children:[t.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),t.jsx("div",{className:"admin-user__role",children:v()})]}),t.jsx("button",{onClick:p,disabled:u,className:"admin-logout-btn",title:"Se dconnecter",children:u?"...":""})]})})]}),t.jsxs("main",{className:"admin-content",children:[t.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>o(!l),"aria-label":"Toggle sidebar",children:""}),e]}),t.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar rduite */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Ui="chapitres",aR=e=>Object.fromEntries(Object.entries(e).filter(([,r])=>r!==void 0)),Vv=e=>{const r=e.data();return{id:e.id,disciplineId:r.disciplineId,numero:r.numero,titre:r.titre,description:r.description,objectifs:r.objectifs||[],dureeEstimee:r.dureeEstimee,isPremium:r.isPremium||!1,actif:r.actif!==!1,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()}},Gi={async getByDiscipline(e){try{const r=Ee(_e(Q,Ui),Se("disciplineId","==",e),Ve("numero","asc"));return(await Ce(r)).docs.map(Vv)}catch(r){throw console.error("Erreur lors de la rcupration des chapitres:",r),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const e=Ee(_e(Q,Ui),Ve("numero","asc"));return(await Ce(e)).docs.map(Vv)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getById(e){try{const r=je(Q,Ui,e),n=await gt(r);return n.exists()?Vv(n):null}catch(r){throw console.error("Erreur lors de la rcupration du chapitre:",r),new Error("Impossible de rcuprer le chapitre")}},async create(e){try{return(await Dt(_e(Q,Ui),{...e,actif:e.actif!==!1,createdAt:Et(),updatedAt:Et()})).id}catch(r){throw console.error("Erreur lors de la cration du chapitre:",r),new Error("Impossible de crer le chapitre")}},async update(e,r){try{const n=je(Q,Ui,e),a=aR({...r,updatedAt:Et()});await Ge(n,a)}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(e){try{const r=je(Q,Ui,e);await Gr(r)}catch(r){throw console.error("Erreur lors de la suppression du chapitre:",r),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(e){try{const r=await this.getByDiscipline(e),n=Rn(Q);r.forEach(a=>{const l=je(Q,Ui,a.id);n.delete(l)}),await n.commit()}catch(r){throw console.error("Erreur lors de la suppression des chapitres:",r),new Error("Impossible de supprimer les chapitres")}},async reorder(e,r){try{const n=Rn(Q);r.forEach((a,l)=>{const o=je(Q,Ui,a);n.update(o,{numero:l+1,updatedAt:Et()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(e,r){await this.update(e,{actif:r})},async countByDiscipline(e){return(await this.getByDiscipline(e)).length},async getNextNumero(e){return await this.countByDiscipline(e)+1}},iR=()=>{const{currentUser:e}=Ke(),r=Ze(),[n,a]=g.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalCours:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{(async()=>{try{o(!0),d(null);const[p,h,v,b,x,j]=await Promise.all([is.getAll(),Gi.getAll(),ha.getStats(),Ce(_e(Q,"quizzes")),Ce(_e(Q,"quizzes_v2")),Ce(_e(Q,"cours_en_ligne"))]);a({totalDisciplines:p.length,totalChapitres:h.length,totalRessources:v.total,ressourcesPremium:v.premium,ressourcesGratuites:v.gratuit,totalCours:j.size,totalQuiz:b.size,totalQuizAvances:x.size,ressourcesParType:v.parType})}catch(p){console.error("Erreur lors du chargement des statistiques:",p),d("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),t.jsxs("div",{className:"admin-dashboard",children:[t.jsx("header",{className:"admin-page-header",children:t.jsxs("div",{className:"admin-page-header__info",children:[t.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),t.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",e?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),u&&t.jsxs("div",{className:"alert alert--error",children:[t.jsx("span",{className:"alert__icon",children:""}),t.jsx("div",{className:"alert__content",children:t.jsx("p",{className:"alert__message",children:u})})]}),l?t.jsxs("div",{className:"loading-container",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Chargement des statistiques..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("section",{className:"stats-grid",children:[t.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>r("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&r("/admin/disciplines"),children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.totalDisciplines}),t.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),t.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>r("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&r("/admin/chapitres"),children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.totalChapitres}),t.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),t.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>r("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&r("/admin/ressources"),children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.totalRessources}),t.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),t.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>r("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&r("/admin/ressources"),children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.ressourcesPremium}),t.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),t.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>r("/prof/cours"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&r("/prof/cours"),children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.totalCours}),t.jsx("div",{className:"stat-card__label",children:"Cours en ligne"})]})]}),t.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>r("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&r("/admin/quiz"),children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.totalQuiz}),t.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),t.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>r("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&r("/admin/quiz-avance"),children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.totalQuizAvances}),t.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),t.jsxs("section",{className:"content-card",children:[t.jsx("div",{className:"content-card__header",children:t.jsx("h2",{children:"Rpartition des ressources par type"})}),t.jsx("div",{className:"content-card__body",children:t.jsxs("div",{className:"resource-type-grid",children:[t.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>r("/admin/ressources"),role:"button",tabIndex:0,children:[t.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),t.jsxs("div",{className:"resource-type-info",children:[t.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.cours}),t.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),t.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>r("/admin/ressources"),role:"button",tabIndex:0,children:[t.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),t.jsxs("div",{className:"resource-type-info",children:[t.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.exercice}),t.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),t.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>r("/admin/ressources"),role:"button",tabIndex:0,children:[t.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),t.jsxs("div",{className:"resource-type-info",children:[t.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.video}),t.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),t.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>r("/admin/ressources"),role:"button",tabIndex:0,children:[t.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),t.jsxs("div",{className:"resource-type-info",children:[t.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.document}),t.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),t.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>r("/admin/quiz"),role:"button",tabIndex:0,children:[t.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),t.jsxs("div",{className:"resource-type-info",children:[t.jsx("span",{className:"resource-type-value",children:n.totalQuiz+n.totalQuizAvances}),t.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),t.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[t.jsx("div",{className:"content-card__header",children:t.jsx("h2",{children:"Actions rapides"})}),t.jsx("div",{className:"content-card__body",children:t.jsxs("div",{className:"quick-actions-grid",children:[t.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Grer les disciplines"}),t.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),t.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Grer les chapitres"}),t.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),t.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Grer les ressources"}),t.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),t.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Grer les quiz"}),t.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),t.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Quiz avancs"}),t.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),t.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Grer les utilisateurs"}),t.jsx("p",{children:"lves, professeurs et administrateurs"})]})]}),t.jsxs("a",{href:"/prof/cahiers",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Cahier de Textes"}),t.jsx("p",{children:"Planifier et suivre l'enseignement"})]})]}),t.jsxs("a",{href:"/prof/sequences",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Squences Pdagogiques"}),t.jsx("p",{children:"Crer et organiser des squences de cours"})]})]}),t.jsxs("a",{href:"/prof/cours",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Cours en ligne"}),t.jsx("p",{children:"Crer et grer les cours en ligne"})]})]}),t.jsxs("a",{href:"/mediatheque",className:"quick-action-card",children:[t.jsx("div",{className:"quick-action-icon",children:""}),t.jsxs("div",{className:"quick-action-content",children:[t.jsx("h3",{children:"Mdiathque"}),t.jsx("p",{children:"Vidos, podcasts et webinaires pdagogiques"})]})]})]})})]})]}),t.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},Ue={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},Qv={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},sR=()=>{const[e,r]=g.useState([]),[n,a]=g.useState(Qv),[l,o]=g.useState(null),[u,d]=g.useState(!1),[m,p]=g.useState("all");g.useEffect(()=>{const E=Ee(_e(Q,"disciplines"),Ve("nom")),S=Ef(E,A=>{const z=A.docs.map(k=>({id:k.id,...k.data(),createdAt:k.data().createdAt?.toDate()||new Date,updatedAt:k.data().updatedAt?.toDate()||new Date}));r(z)});return()=>S()},[]);const h=g.useCallback(E=>{const S=R1(E)[0]?.value||"6eme";a(A=>({...A,niveau:E,classe:S,coefficient:E==="formation_libre"?void 0:A.coefficient}))},[]),v=async E=>{if(E.preventDefault(),!!n.nom.trim()){d(!0);try{const S={nom:n.nom.trim(),niveau:n.niveau,classe:n.classe,ordre:n.ordre,...n.coefficient!==void 0&&{coefficient:n.coefficient},couleur:n.couleur||"",icone:n.icone||"",description:n.description||"",updatedAt:Ae.now()};l?await Ge(je(Q,"disciplines",l),S):await Dt(_e(Q,"disciplines"),{...S,createdAt:Ae.now()}),a(Qv),o(null)}catch(S){console.error("Erreur lors de la sauvegarde :",S),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{d(!1)}}},b=E=>{a({nom:E.nom,niveau:E.niveau,classe:E.classe,ordre:E.ordre,coefficient:E.coefficient,couleur:E.couleur||"",icone:E.icone||"",description:E.description||""}),o(E.id)},x=async(E,S)=>{if(window.confirm(`Supprimer la discipline "${S}" ? Cette action est irrversible.`))try{await Gr(je(Q,"disciplines",E))}catch(A){console.error("Erreur lors de la suppression :",A)}},j=()=>{a(Qv),o(null)},_=R1(n.niveau),C=m==="all"?e:e.filter(E=>E.niveau===m),w=E=>({...Ue.badge,...E==="college"?Ue.badgeCollege:{},...E==="lycee"?Ue.badgeLycee:{},...E==="formation_libre"?Ue.badgeFormationLibre:{}});return t.jsxs("div",{style:Ue.container,children:[t.jsx("h2",{style:Ue.title,children:" Gestion des Disciplines"}),t.jsxs("form",{style:Ue.form,onSubmit:v,children:[t.jsx("h3",{style:Ue.formTitle,children:l?" Modifier la discipline":" Ajouter une discipline"}),t.jsxs("div",{style:Ue.formGrid,children:[t.jsxs("div",{style:Ue.fieldGroup,children:[t.jsx("label",{style:Ue.label,children:"Nom de la discipline"}),t.jsx("input",{type:"text",style:Ue.input,value:n.nom,onChange:E=>a({...n,nom:E.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),t.jsxs("div",{style:Ue.fieldGroup,children:[t.jsx("label",{style:Ue.label,children:"Niveau"}),t.jsxs("select",{style:Ue.select,value:n.niveau,onChange:E=>h(E.target.value),children:[t.jsx("option",{value:"college",children:" Collge"}),t.jsx("option",{value:"lycee",children:" Lyce"}),t.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),t.jsxs("div",{style:Ue.fieldGroup,children:[t.jsx("label",{style:Ue.label,children:n.niveau==="formation_libre"?"Niveau de formation":"Classe"}),t.jsx("select",{style:Ue.select,value:n.classe,onChange:E=>a({...n,classe:E.target.value}),children:_.map(({value:E,label:S})=>t.jsx("option",{value:E,children:S},E))})]}),t.jsxs("div",{style:Ue.fieldGroup,children:[t.jsx("label",{style:Ue.label,children:"Ordre d'affichage"}),t.jsx("input",{type:"number",style:Ue.input,value:n.ordre,onChange:E=>a({...n,ordre:Number(E.target.value)}),placeholder:"Ex : 1",min:"0"})]}),t.jsxs("div",{style:Ue.fieldGroup,children:[t.jsxs("label",{style:Ue.label,children:["Coefficient",n.niveau==="formation_libre"&&t.jsx("span",{style:Ue.labelOptional,children:"(optionnel)"})]}),t.jsx("input",{type:"number",style:Ue.input,value:n.coefficient??"",onChange:E=>a({...n,coefficient:E.target.value?Number(E.target.value):void 0}),placeholder:n.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:n.niveau!=="formation_libre"})]}),t.jsxs("div",{style:Ue.fieldGroup,children:[t.jsxs("label",{style:Ue.label,children:["Couleur",t.jsx("span",{style:Ue.labelOptional,children:"(optionnel)"})]}),t.jsx("input",{type:"color",style:{...Ue.input,maxWidth:"80px",padding:"4px",height:"40px"},value:n.couleur||"#3182ce",onChange:E=>a({...n,couleur:E.target.value})})]})]}),t.jsxs("div",{style:{...Ue.fieldGroup,marginBottom:"20px"},children:[t.jsxs("label",{style:Ue.label,children:["Description",t.jsx("span",{style:Ue.labelOptional,children:"(optionnel)"})]}),t.jsx("textarea",{style:Ue.textarea,value:n.description,onChange:E=>a({...n,description:E.target.value}),placeholder:"Brve description de la discipline..."})]}),t.jsxs("div",{style:{...Ue.fieldGroup,marginBottom:"20px"},children:[t.jsxs("label",{style:Ue.label,children:["Icne (emoji)",t.jsx("span",{style:Ue.labelOptional,children:"(optionnel)"})]}),t.jsx("input",{type:"text",style:{...Ue.input,maxWidth:"120px"},value:n.icone,onChange:E=>a({...n,icone:E.target.value}),placeholder:""})]}),t.jsxs("div",{children:[t.jsx("button",{type:"submit",style:Ue.btnPrimary,disabled:u,children:u?"Enregistrement...":l?"Mettre  jour":"Ajouter la discipline"}),l&&t.jsx("button",{type:"button",style:Ue.btnSecondary,onClick:j,children:"Annuler"})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{style:Ue.formTitle,children:[" Disciplines existantes (",C.length,")"]}),t.jsxs("div",{style:Ue.tabs,children:[t.jsx("button",{style:{...Ue.tab,...m==="all"?Ue.tabActive:{}},onClick:()=>p("all"),children:"Toutes"}),t.jsx("button",{style:{...Ue.tab,...m==="college"?Ue.tabActive:{}},onClick:()=>p("college"),children:" Collge"}),t.jsx("button",{style:{...Ue.tab,...m==="lycee"?Ue.tabActive:{}},onClick:()=>p("lycee"),children:" Lyce"}),t.jsx("button",{style:{...Ue.tab,...m==="formation_libre"?Ue.tabActive:{}},onClick:()=>p("formation_libre"),children:" Formation libre"})]}),C.length===0?t.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):C.map(E=>t.jsxs("div",{style:Ue.card,children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[E.icone&&t.jsx("span",{style:{fontSize:"1.2rem"},children:E.icone}),t.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:E.nom}),t.jsx("span",{style:w(E.niveau),children:OA[E.niveau]})]}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[E.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",DA(E.classe),E.coefficient!==void 0&&t.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",E.coefficient]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"4px"},children:[t.jsx("button",{style:Ue.btnEdit,onClick:()=>b(E),children:"Modifier"}),t.jsx("button",{style:Ue.btnDanger,onClick:()=>x(E.id,E.nom),children:"Supprimer"})]})]},E.id))]})]})},Q1={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:0,isPremium:!1,actif:!0},lR=()=>{const[e,r]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(""),[u,d]=g.useState(!0),[m,p]=g.useState(!1),[h,v]=g.useState(!1),[b,x]=g.useState(null),[j,_]=g.useState(null),[C,w]=g.useState(null),[E,S]=g.useState(!1),[A,z]=g.useState(!1),[k,M]=g.useState(null),[D,$]=g.useState(null),[B,H]=g.useState({...Q1,disciplineId:""}),[T,Y]=g.useState({}),[J,P]=g.useState(""),q=g.useCallback(async()=>{try{d(!0);const V=await is.getAll();r(V),V.length>0&&!l&&o(V[0].id)}catch(V){console.error("Erreur lors du chargement des disciplines:",V),_("Impossible de charger les disciplines.")}finally{d(!1)}},[l]),U=g.useCallback(async()=>{if(!l){a([]);return}try{p(!0);const V=await Gi.getByDiscipline(l);a(V)}catch(V){console.error("Erreur lors du chargement des chapitres:",V),_("Impossible de charger les chapitres.")}finally{p(!1)}},[l]);g.useEffect(()=>{q()},[q]),g.useEffect(()=>{U()},[U]);const I=()=>{const V={};return B.disciplineId||(V.disciplineId="Veuillez slectionner une discipline"),B.titre.trim()?B.titre.length<3&&(V.titre="Le titre doit contenir au moins 3 caractres"):V.titre="Le titre du chapitre est requis",B.numero<1&&(V.numero="Le numro doit tre suprieur  0"),Y(V),Object.keys(V).length===0},te=V=>{o(V),_(null)},L=async()=>{const V=await Gi.getNextNumero(l);M(null),H({...Q1,disciplineId:l,numero:V}),Y({}),P(""),S(!0)},Z=V=>{M(V),H({disciplineId:V.disciplineId,numero:V.numero,titre:V.titre,description:V.description,objectifs:V.objectifs||[],dureeEstimee:V.dureeEstimee,isPremium:V.isPremium,actif:V.actif}),Y({}),P(""),S(!0)},W=V=>{$(V),z(!0)},ce=()=>{S(!1),z(!1),M(null),$(null),Y({}),P("")},xe=V=>{const{name:de,value:we,type:Te}=V.target,Xe=V.target.checked;H(tt=>({...tt,[de]:Te==="checkbox"?Xe:Te==="number"?Number(we):we})),T[de]&&Y(tt=>({...tt,[de]:void 0}))},he=()=>{J.trim()&&(H(V=>({...V,objectifs:[...V.objectifs||[],J.trim()]})),P(""))},F=V=>{H(de=>({...de,objectifs:(de.objectifs||[]).filter((we,Te)=>Te!==V)}))},ve=async V=>{if(V.preventDefault(),!!I())try{v(!0),_(null),k?(await Gi.update(k.id,B),w("Chapitre modifi avec succs !")):(await Gi.create(B),w("Chapitre cr avec succs !")),ce(),await U(),setTimeout(()=>w(null),3e3)}catch(de){console.error("Erreur lors de la sauvegarde:",de),_("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{v(!1)}},Pe=async()=>{if(D)try{x(D.id),await Gi.delete(D.id),w("Chapitre supprim avec succs !"),ce(),await U(),setTimeout(()=>w(null),3e3)}catch(V){console.error("Erreur lors de la suppression:",V),_("Erreur lors de la suppression. Veuillez ressayer.")}finally{x(null)}},ue=async V=>{try{await Gi.toggleActive(V.id,!V.actif),await U(),w(V.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>w(null),2e3)}catch{_("Erreur lors de la mise  jour")}},ee=V=>{const de=e.find(we=>we.id===V);return de?de.nom:"Non trouve"};return t.jsxs("div",{className:"chapitre-manager",children:[t.jsxs("header",{className:"admin-page-header",children:[t.jsxs("div",{className:"admin-page-header__info",children:[t.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),t.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),t.jsx("div",{className:"admin-page-header__actions",children:t.jsxs("button",{onClick:L,className:"btn btn--primary",disabled:!l||u,children:[t.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),j&&t.jsxs("div",{className:"alert alert--error",children:[t.jsx("span",{className:"alert__icon",children:""}),t.jsx("div",{className:"alert__content",children:t.jsx("p",{className:"alert__message",children:j})}),t.jsx("button",{onClick:()=>_(null),className:"alert__close",children:""})]}),C&&t.jsxs("div",{className:"alert alert--success",children:[t.jsx("span",{className:"alert__icon",children:""}),t.jsx("div",{className:"alert__content",children:t.jsx("p",{className:"alert__message",children:C})})]}),t.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:t.jsx("div",{className:"content-card__body",children:t.jsxs("div",{className:"discipline-selector",children:[t.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),u?t.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?t.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",t.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):t.jsx("div",{className:"discipline-tabs",children:e.map(V=>t.jsxs("button",{className:`discipline-tab ${l===V.id?"discipline-tab--active":""}`,onClick:()=>te(V.id),style:{"--discipline-color":V.couleur||"#2563eb"},children:[t.jsx("span",{className:"discipline-tab__icon",children:V.icone||""}),t.jsx("span",{className:"discipline-tab__name",children:V.nom}),t.jsx("span",{className:"discipline-tab__class",children:V.classe})]},V.id))})]})})}),t.jsxs("div",{className:"admin-table-container",children:[t.jsx("div",{className:"admin-table-header",children:t.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",l&&`- ${ee(l)}`,n.length>0&&` (${n.length})`]})}),m?t.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Chargement des chapitres..."})]}):l?n.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"empty-state__icon",children:""}),t.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),t.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),t.jsx("button",{onClick:L,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):t.jsx("div",{className:"chapitres-list",children:n.map(V=>t.jsxs("div",{className:`chapitre-card ${V.actif?"":"chapitre-card--inactive"}`,children:[t.jsx("div",{className:"chapitre-card__number",children:V.numero}),t.jsxs("div",{className:"chapitre-card__content",children:[t.jsxs("h3",{className:"chapitre-card__title",children:[V.titre,V.isPremium&&t.jsx("span",{className:"badge badge--premium",children:"Premium"}),!V.actif&&t.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),V.description&&t.jsx("p",{className:"chapitre-card__description",children:V.description}),t.jsxs("div",{className:"chapitre-card__meta",children:[V.dureeEstimee&&t.jsxs("span",{children:[" ",V.dureeEstimee,"h estime"]}),V.objectifs&&V.objectifs.length>0&&t.jsxs("span",{children:[" ",V.objectifs.length," objectif(s)"]})]})]}),t.jsxs("div",{className:"chapitre-card__actions",children:[t.jsx("button",{onClick:()=>ue(V),className:`table-action-btn ${V.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:V.actif?"Dsactiver":"Activer",children:V.actif?"":""}),t.jsx("button",{onClick:()=>Z(V),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),t.jsx("button",{onClick:()=>W(V),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:b===V.id,children:b===V.id?"":""})]})]},V.id))}):t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"empty-state__icon",children:""}),t.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),t.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),E&&t.jsx("div",{className:"modal-overlay",onClick:ce,children:t.jsxs("div",{className:"modal modal--lg",onClick:V=>V.stopPropagation(),children:[t.jsxs("div",{className:"modal__header",children:[t.jsx("h2",{className:"modal__title",children:k?"Modifier le chapitre":"Nouveau chapitre"}),t.jsx("button",{onClick:ce,className:"modal__close",children:""})]}),t.jsxs("form",{onSubmit:ve,children:[t.jsxs("div",{className:"modal__body",children:[!k&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),t.jsxs("select",{name:"disciplineId",className:`form-select ${T.disciplineId?"form-select--error":""}`,value:B.disciplineId,onChange:xe,children:[t.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(V=>t.jsxs("option",{value:V.id,children:[V.icone," ",V.nom," (",V.classe,")"]},V.id))]}),T.disciplineId&&t.jsx("span",{className:"form-error",children:T.disciplineId})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[t.jsx("label",{className:"form-label form-label--required",children:"N"}),t.jsx("input",{type:"number",name:"numero",className:`form-input ${T.numero?"form-input--error":""}`,min:"1",value:B.numero,onChange:xe}),T.numero&&t.jsx("span",{className:"form-error",children:T.numero})]}),t.jsxs("div",{className:"form-group",style:{flex:1},children:[t.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),t.jsx("input",{type:"text",name:"titre",className:`form-input ${T.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:B.titre,onChange:xe}),T.titre&&t.jsx("span",{className:"form-error",children:T.titre})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Description"}),t.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:B.description||"",onChange:xe})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),t.jsxs("div",{className:"objectifs-input",children:[t.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:J,onChange:V=>P(V.target.value),onKeyPress:V=>V.key==="Enter"&&(V.preventDefault(),he())}),t.jsx("button",{type:"button",onClick:he,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),B.objectifs&&B.objectifs.length>0&&t.jsx("ul",{className:"objectifs-list",children:B.objectifs.map((V,de)=>t.jsxs("li",{className:"objectif-item",children:[t.jsxs("span",{children:[" ",V]}),t.jsx("button",{type:"button",onClick:()=>F(de),className:"objectif-remove",children:""})]},de))})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),t.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:B.dureeEstimee||"",onChange:xe})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Options"}),t.jsxs("div",{className:"form-options",children:[t.jsxs("label",{className:"form-checkbox",children:[t.jsx("input",{type:"checkbox",name:"isPremium",checked:B.isPremium,onChange:xe}),t.jsx("span",{children:"Contenu Premium "})]}),t.jsxs("label",{className:"form-checkbox",children:[t.jsx("input",{type:"checkbox",name:"actif",checked:B.actif!==!1,onChange:xe}),t.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),t.jsxs("div",{className:"modal__footer",children:[t.jsx("button",{type:"button",onClick:ce,className:"btn btn--outline",disabled:h,children:"Annuler"}),t.jsx("button",{type:"submit",className:"btn btn--primary",disabled:h,children:h?"Enregistrement...":k?"Mettre  jour":"Crer le chapitre"})]})]})]})}),A&&D&&t.jsx("div",{className:"modal-overlay",onClick:ce,children:t.jsxs("div",{className:"modal",onClick:V=>V.stopPropagation(),children:[t.jsxs("div",{className:"modal__header",children:[t.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),t.jsx("button",{onClick:ce,className:"modal__close",children:""})]}),t.jsxs("div",{className:"modal__body",children:[t.jsxs("p",{children:["Supprimer le chapitre ",t.jsxs("strong",{children:[D.numero,". ",D.titre]})," ?"]}),t.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[t.jsx("span",{className:"alert__icon",children:""}),t.jsx("div",{className:"alert__content",children:t.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),t.jsxs("div",{className:"modal__footer",children:[t.jsx("button",{onClick:ce,className:"btn btn--outline",children:"Annuler"}),t.jsx("button",{onClick:Pe,className:"btn btn--danger",disabled:b!==null,children:b?"Suppression...":"Supprimer"})]})]})}),t.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},Bd=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],Ud={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},Yv=50,Y1={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},oR=()=>{const{currentUser:e}=Ke(),[r,n]=g.useState([]),[a,l]=g.useState([]),[o,u]=g.useState([]),[d,m]=g.useState([]),[p,h]=g.useState(""),[v,b]=g.useState(""),[x,j]=g.useState(""),[_,C]=g.useState(""),[w,E]=g.useState(""),[S,A]=g.useState(!0),[z,k]=g.useState(!1),[M,D]=g.useState(!1),[$,B]=g.useState(!1),[H,T]=g.useState(null),[Y,J]=g.useState(!1),[P,q]=g.useState(0),[U,I]=g.useState(null),[te,L]=g.useState(null),[Z,W]=g.useState(!1),[ce,xe]=g.useState(!1),[he,F]=g.useState(!1),[ve,Pe]=g.useState(null),[ue,ee]=g.useState(null),[V,de]=g.useState(null),[we,Te]=g.useState({...Y1,disciplineId:""}),[Xe,tt]=g.useState({}),[lt,rr]=g.useState(null),[kr,Or]=g.useState(null),sn=g.useRef(null),[pe,Oe]=g.useState(""),Le=g.useCallback(async()=>{try{A(!0);const re=await is.getAll();n(re),re.length>0&&!p&&h(re[0].id)}catch(re){console.error("Erreur lors du chargement des disciplines:",re),I("Impossible de charger les disciplines.")}finally{A(!1)}},[p]),He=g.useCallback(async()=>{if(!p){l([]);return}try{k(!0);const re=await Gi.getByDiscipline(p);l(re)}catch(re){console.error("Erreur lors du chargement des chapitres:",re)}finally{k(!1)}},[p]),dt=g.useCallback(async()=>{if(!p){u([]),m([]);return}try{D(!0);const re=await ha.getByDiscipline(p);u(re),m(re)}catch(re){console.error("Erreur lors du chargement des ressources:",re),I("Impossible de charger les ressources.")}finally{D(!1)}},[p]);g.useEffect(()=>{Le()},[Le]),g.useEffect(()=>{He()},[He]),g.useEffect(()=>{dt()},[dt]),g.useEffect(()=>{let re=[...o];if(v&&(re=re.filter(Be=>Be.chapitre===v)),x&&(re=re.filter(Be=>Be.type===x)),_==="premium"?re=re.filter(Be=>Be.isPremium):_==="free"&&(re=re.filter(Be=>!Be.isPremium)),w){const Be=w.toLowerCase();re=re.filter(ft=>ft.titre.toLowerCase().includes(Be)||ft.description?.toLowerCase().includes(Be)||ft.tags?.some(jn=>jn.toLowerCase().includes(Be)))}m(re)},[o,v,x,_,w]);const Rt=()=>{const re={};if(we.disciplineId||(re.disciplineId="Veuillez slectionner une discipline"),we.titre.trim()?we.titre.length<3&&(re.titre="Le titre doit contenir au moins 3 caractres"):re.titre="Le titre est requis",we.type||(re.type="Veuillez slectionner un type de ressource"),lt){const Be="."+lt.name.split(".").pop()?.toLowerCase(),ft=Ud[we.type];ft.includes(Be)||(re.fichier=`Extension non autorise. Extensions acceptes : ${ft.join(", ")}`),lt.size/(1024*1024)>Yv&&(re.fichier=`Le fichier est trop volumineux (max ${Yv} Mo)`)}return tt(re),Object.keys(re).length===0},nr=re=>{h(re),b(""),I(null)},sa=()=>{Pe(null),Te({...Y1,disciplineId:p}),tt({}),rr(null),Or(null),Oe(""),W(!0)},Dr=re=>{Pe(re),Te({disciplineId:re.disciplineId,titre:re.titre,type:re.type,description:re.description,contenu:re.contenu,chapitre:re.chapitre||"",ordre:re.ordre,isPremium:re.isPremium,actif:re.actif,tags:re.tags||[],duree:re.duree,urlExterne:re.urlExterne||""}),tt({}),rr(null),Or(re.fichierURL||null),Oe(""),W(!0)},Pr=re=>{de(re),F(!0)},ae=re=>{ee(re),xe(!0)},K=()=>{W(!1),xe(!1),F(!1),Pe(null),ee(null),de(null),tt({}),rr(null),Or(null),Oe("")},ie=re=>{const{name:Be,value:ft,type:jn}=re.target,ml=re.target.checked;Te(ds=>({...ds,[Be]:jn==="checkbox"?ml:jn==="number"?Number(ft):ft})),Xe[Be]&&tt(ds=>({...ds,[Be]:void 0}))},Ne=re=>{const Be=re.target.files?.[0];if(Be)if(rr(Be),tt(ft=>({...ft,fichier:void 0})),Be.type.startsWith("image/")||Be.type.startsWith("video/")){const ft=new FileReader;ft.onloadend=()=>{Or(ft.result)},ft.readAsDataURL(Be)}else Or(null)},Qe=()=>{rr(null),Or(null),sn.current&&(sn.current.value="")},At=()=>{pe.trim()&&!we.tags?.includes(pe.trim())&&(Te(re=>({...re,tags:[...re.tags||[],pe.trim()]})),Oe(""))},Qr=re=>{Te(Be=>({...Be,tags:(Be.tags||[]).filter((ft,jn)=>jn!==re)}))},Mr=async re=>{if(re.preventDefault(),!!Rt())try{B(!0),I(null);let Be=ve?.fichierURL,ft=ve?.fichierNom;if(lt){J(!0);const ml=ve?.id||`temp_${Date.now()}`;Be=await ha.uploadFile(lt,ml),ft=lt?.name||"fichier",J(!1)}const jn={...we,fichierURL:Be,fichierNom:ft};ve?(await ha.update(ve.id,jn),L("Ressource modifie avec succs !")):(await ha.create(jn,"admin"),L("Ressource cre avec succs !")),K(),await dt(),setTimeout(()=>L(null),3e3)}catch(Be){console.error("Erreur lors de la sauvegarde:",Be),I("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{B(!1),J(!1),q(0)}},la=async()=>{if(ue)try{T(ue.id),ue.fichierURL&&await ha.deleteFile(ue.fichierURL),await ha.delete(ue.id),L("Ressource supprime avec succs !"),K(),await dt(),setTimeout(()=>L(null),3e3)}catch(re){console.error("Erreur lors de la suppression:",re),I("Erreur lors de la suppression. Veuillez ressayer.")}finally{T(null)}},cl=async re=>{try{await ha.togglePremium(re.id,!re.isPremium),await dt(),L(re.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>L(null),2e3)}catch{I("Erreur lors de la mise  jour")}},ul=async re=>{try{await ha.toggleActive(re.id,re.actif===!1),await dt(),L(re.actif!==!1?"Ressource dsactive":"Ressource active"),setTimeout(()=>L(null),2e3)}catch{I("Erreur lors de la mise  jour")}},Ea=re=>{const Be=r.find(ft=>ft.id===re);return Be?Be.nom:"Non trouve"},dl=re=>{const Be=a.find(ft=>ft.id===re);return Be?`${Be.numero}. ${Be.titre}`:""},Hn=re=>Bd.find(Be=>Be.value===re)||Bd[0],Cp=re=>re<1024?re+" o":re<1024*1024?(re/1024).toFixed(1)+" Ko":(re/(1024*1024)).toFixed(1)+" Mo";return t.jsxs("div",{className:"resource-manager",children:[t.jsxs("header",{className:"admin-page-header",children:[t.jsxs("div",{className:"admin-page-header__info",children:[t.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),t.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),t.jsx("div",{className:"admin-page-header__actions",children:t.jsxs("button",{onClick:sa,className:"btn btn--primary",disabled:!p||S,children:[t.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),U&&t.jsxs("div",{className:"alert alert--error",children:[t.jsx("span",{className:"alert__icon",children:""}),t.jsx("div",{className:"alert__content",children:t.jsx("p",{className:"alert__message",children:U})}),t.jsx("button",{onClick:()=>I(null),className:"alert__close",children:""})]}),te&&t.jsxs("div",{className:"alert alert--success",children:[t.jsx("span",{className:"alert__icon",children:""}),t.jsx("div",{className:"alert__content",children:t.jsx("p",{className:"alert__message",children:te})})]}),t.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:t.jsx("div",{className:"content-card__body",children:t.jsxs("div",{className:"discipline-selector",children:[t.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),S?t.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):r.length===0?t.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",t.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):t.jsx("div",{className:"discipline-tabs",children:r.map(re=>t.jsxs("button",{className:`discipline-tab ${p===re.id?"discipline-tab--active":""}`,onClick:()=>nr(re.id),style:{"--discipline-color":re.couleur||"#2563eb"},children:[t.jsx("span",{className:"discipline-tab__icon",children:re.icone||""}),t.jsx("span",{className:"discipline-tab__name",children:re.nom}),t.jsx("span",{className:"discipline-tab__class",children:re.classe})]},re.id))})]})})}),t.jsxs("div",{className:"admin-table-container",children:[t.jsxs("div",{className:"admin-table-header",children:[t.jsxs("h2",{className:"admin-table-title",children:["Ressources ",p&&`- ${Ea(p)}`,d.length>0&&` (${d.length})`]}),t.jsxs("div",{className:"admin-table-actions",children:[t.jsxs("div",{className:"search-input",children:[t.jsx("span",{className:"search-input__icon",children:""}),t.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:w,onChange:re=>E(re.target.value)})]}),t.jsxs("select",{className:"form-select form-select--sm",value:v,onChange:re=>b(re.target.value),disabled:z||a.length===0,children:[t.jsx("option",{value:"",children:"Tous les chapitres"}),a.map(re=>t.jsxs("option",{value:re.id,children:[re.numero,". ",re.titre]},re.id))]}),t.jsxs("select",{className:"form-select form-select--sm",value:x,onChange:re=>j(re.target.value),children:[t.jsx("option",{value:"",children:"Tous les types"}),Bd.map(re=>t.jsxs("option",{value:re.value,children:[re.icon," ",re.label]},re.value))]}),t.jsxs("select",{className:"form-select form-select--sm",value:_,onChange:re=>C(re.target.value),children:[t.jsx("option",{value:"",children:"Tous"}),t.jsx("option",{value:"premium",children:" Premium"}),t.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),M?t.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Chargement des ressources..."})]}):p?d.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"empty-state__icon",children:""}),t.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),t.jsx("p",{className:"empty-state__message",children:w||x||_||v?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!w&&!x&&!_&&!v&&t.jsx("button",{onClick:sa,className:"btn btn--primary",children:"Crer la premire ressource"})]}):t.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:d.map(re=>{const Be=Hn(re.type);return t.jsxs("div",{className:"resource-item",children:[t.jsx("div",{className:`resource-item__icon resource-item__icon--${re.type}`,style:{backgroundColor:`${Be.color}15`,color:Be.color},children:Be.icon}),t.jsxs("div",{className:"resource-item__content",children:[t.jsxs("div",{className:"resource-item__title",children:[re.titre,re.isPremium&&t.jsx("span",{className:"badge badge--premium",children:"Premium"}),!re.actif&&t.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),t.jsxs("div",{className:"resource-item__meta",children:[t.jsx("span",{children:Be.label}),re.chapitre&&t.jsxs("span",{children:[" ",dl(re.chapitre)]}),re.duree&&t.jsxs("span",{children:[" ",re.duree," min"]}),re.fichierNom&&t.jsxs("span",{children:[" ",re.fichierNom]}),re.tags&&re.tags.length>0&&t.jsxs("span",{children:[" ",re.tags.join(", ")]})]})]}),t.jsxs("div",{className:"resource-item__actions",children:[t.jsx("button",{onClick:()=>cl(re),className:`table-action-btn ${re.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:re.isPremium?"Passer en gratuit":"Passer en Premium",children:re.isPremium?"":""}),t.jsx("button",{onClick:()=>ul(re),className:`table-action-btn ${re.actif!==!1?"table-action-btn--view":"table-action-btn--warning"}`,title:re.actif!==!1?"Dsactiver":"Activer",children:re.actif!==!1?"":""}),(re.fichierURL||re.urlExterne)&&t.jsx("button",{onClick:()=>Pr(re),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),t.jsx("button",{onClick:()=>Dr(re),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),t.jsx("button",{onClick:()=>ae(re),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:H===re.id,children:H===re.id?"":""})]})]},re.id)})}):t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"empty-state__icon",children:""}),t.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),t.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),Z&&t.jsx("div",{className:"modal-overlay",onClick:K,children:t.jsxs("div",{className:"modal modal--xl",onClick:re=>re.stopPropagation(),children:[t.jsxs("div",{className:"modal__header",children:[t.jsx("h2",{className:"modal__title",children:ve?"Modifier la ressource":"Nouvelle ressource"}),t.jsx("button",{onClick:K,className:"modal__close",children:""})]}),t.jsxs("form",{onSubmit:Mr,children:[t.jsxs("div",{className:"modal__body",children:[!ve&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),t.jsxs("select",{name:"disciplineId",className:`form-select ${Xe.disciplineId?"form-select--error":""}`,value:we.disciplineId,onChange:ie,children:[t.jsx("option",{value:"",children:"Slectionner une discipline"}),r.map(re=>t.jsxs("option",{value:re.id,children:[re.icone," ",re.nom," (",re.classe,")"]},re.id))]}),Xe.disciplineId&&t.jsx("span",{className:"form-error",children:Xe.disciplineId})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",style:{flex:2},children:[t.jsx("label",{className:"form-label form-label--required",children:"Titre"}),t.jsx("input",{type:"text",name:"titre",className:`form-input ${Xe.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:we.titre,onChange:ie}),Xe.titre&&t.jsx("span",{className:"form-error",children:Xe.titre})]}),t.jsxs("div",{className:"form-group",style:{flex:1},children:[t.jsx("label",{className:"form-label form-label--required",children:"Type"}),t.jsx("select",{name:"type",className:`form-select ${Xe.type?"form-select--error":""}`,value:we.type,onChange:ie,children:Bd.map(re=>t.jsxs("option",{value:re.value,children:[re.icon," ",re.label]},re.value))}),Xe.type&&t.jsx("span",{className:"form-error",children:Xe.type})]})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),t.jsxs("select",{name:"chapitre",className:"form-select",value:we.chapitre||we.chapitreId||"",onChange:ie,disabled:z,children:[t.jsx("option",{value:"",children:"Aucun chapitre"}),a.map(re=>t.jsxs("option",{value:re.id,children:[re.numero,". ",re.titre]},re.id))]})]}),t.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[t.jsx("label",{className:"form-label",children:"Ordre"}),t.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:we.ordre,onChange:ie})]}),t.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[t.jsx("label",{className:"form-label",children:"Dure (min)"}),t.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:we.duree||"",onChange:ie})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Description"}),t.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:we.description||"",onChange:ie})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"form-label",children:["Fichier",t.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",Ud[we.type].join(", ")," - max ",Yv," Mo)"]})]}),t.jsxs("div",{className:"file-upload",children:[t.jsx("input",{ref:sn,type:"file",accept:Ud[we.type].join(","),onChange:Ne,className:"file-upload__input",id:"file-input"}),!lt&&!kr?t.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[t.jsx("div",{className:"file-upload__icon",children:""}),t.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),t.jsx("p",{className:"file-upload__hint",children:Ud[we.type].join(", ")})]}):t.jsxs("div",{className:"file-upload__preview",children:[lt?.type.startsWith("image/")&&kr&&t.jsx("img",{src:kr,alt:"Aperu",className:"file-preview__image"}),lt?.type.startsWith("video/")&&kr&&t.jsx("video",{src:kr,controls:!0,className:"file-preview__video"}),!lt?.type.startsWith("image/")&&!lt?.type.startsWith("video/")&&t.jsx("div",{className:"file-preview__document",children:t.jsx("span",{className:"file-preview__icon",children:Hn(we.type).icon})}),t.jsxs("div",{className:"file-preview__info",children:[t.jsx("p",{className:"file-preview__name",children:lt?.name||ve?.fichierNom}),lt&&t.jsx("p",{className:"file-preview__size",children:Cp(lt.size)})]}),t.jsx("button",{type:"button",onClick:Qe,className:"file-preview__remove",children:""})]})]}),Xe.fichier&&t.jsx("span",{className:"form-error",children:Xe.fichier}),Y&&t.jsxs("div",{className:"upload-progress",children:[t.jsx("div",{className:"upload-progress__bar",style:{width:`${P}%`}}),t.jsxs("span",{className:"upload-progress__text",children:[P,"%"]})]})]}),we.type==="video"&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),t.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:we.urlExterne||"",onChange:ie}),t.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),we.type==="cours"&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Contenu du cours"}),t.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:we.contenu||"",onChange:ie}),t.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Tags"}),t.jsxs("div",{className:"tags-input",children:[t.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:pe,onChange:re=>Oe(re.target.value),onKeyPress:re=>re.key==="Enter"&&(re.preventDefault(),At())}),t.jsx("button",{type:"button",onClick:At,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),we.tags&&we.tags.length>0&&t.jsx("div",{className:"tags-list",children:we.tags.map((re,Be)=>t.jsxs("span",{className:"tag",children:[re,t.jsx("button",{type:"button",onClick:()=>Qr(Be),className:"tag__remove",children:""})]},Be))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Options"}),t.jsxs("div",{className:"form-options",children:[t.jsxs("label",{className:"form-checkbox",children:[t.jsx("input",{type:"checkbox",name:"isPremium",checked:we.isPremium,onChange:ie}),t.jsx("span",{children:"Contenu Premium "})]}),t.jsxs("label",{className:"form-checkbox",children:[t.jsx("input",{type:"checkbox",name:"actif",checked:we.actif!==!1,onChange:ie}),t.jsx("span",{children:"Ressource active"})]})]})]})]}),t.jsxs("div",{className:"modal__footer",children:[t.jsx("button",{type:"button",onClick:K,className:"btn btn--outline",disabled:$||Y,children:"Annuler"}),t.jsx("button",{type:"submit",className:"btn btn--primary",disabled:$||Y,children:$||Y?Y?`Upload ${P}%...`:"Enregistrement...":ve?"Mettre  jour":"Crer la ressource"})]})]})]})}),he&&V&&t.jsx("div",{className:"modal-overlay",onClick:K,children:t.jsxs("div",{className:"modal modal--xl",onClick:re=>re.stopPropagation(),children:[t.jsxs("div",{className:"modal__header",children:[t.jsxs("h2",{className:"modal__title",children:[Hn(V.type).icon," ",V.titre]}),t.jsx("button",{onClick:K,className:"modal__close",children:""})]}),t.jsxs("div",{className:"modal__body",children:[V.type==="video"&&V.urlExterne?t.jsx("div",{className:"preview-video",children:t.jsx("iframe",{src:V.urlExterne.replace("watch?v=","embed/"),title:V.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):V.fichierURL?t.jsx("div",{className:"preview-file",children:V.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?t.jsx("img",{src:V.fichierURL,alt:V.titre}):V.fichierURL.match(/\.(mp4|webm)$/i)?t.jsx("video",{src:V.fichierURL,controls:!0}):V.fichierURL.match(/\.pdf$/i)?t.jsx("iframe",{src:V.fichierURL,title:V.titre}):t.jsxs("div",{className:"preview-download",children:[t.jsx("span",{className:"preview-download__icon",children:Hn(V.type).icon}),t.jsx("p",{children:V.fichierNom}),t.jsx("a",{href:V.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):V.contenu?t.jsx("div",{className:"preview-content",children:t.jsx("p",{children:V.contenu})}):t.jsx("div",{className:"preview-empty",children:t.jsx("p",{children:"Aucun contenu  prvisualiser"})}),t.jsxs("div",{className:"preview-info",children:[V.description&&t.jsx("p",{className:"preview-description",children:V.description}),t.jsxs("div",{className:"preview-meta",children:[t.jsxs("span",{children:["Type : ",Hn(V.type).label]}),V.duree&&t.jsxs("span",{children:["Dure : ",V.duree," min"]}),V.isPremium&&t.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),ce&&ue&&t.jsx("div",{className:"modal-overlay",onClick:K,children:t.jsxs("div",{className:"modal",onClick:re=>re.stopPropagation(),children:[t.jsxs("div",{className:"modal__header",children:[t.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),t.jsx("button",{onClick:K,className:"modal__close",children:""})]}),t.jsxs("div",{className:"modal__body",children:[t.jsxs("p",{children:["Supprimer la ressource ",t.jsx("strong",{children:ue.titre})," ?"]}),ue.fichierURL&&t.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[t.jsx("span",{className:"alert__icon",children:""}),t.jsx("div",{className:"alert__content",children:t.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),t.jsxs("div",{className:"modal__footer",children:[t.jsx("button",{onClick:K,className:"btn btn--outline",children:"Annuler"}),t.jsx("button",{onClick:la,className:"btn btn--danger",disabled:H!==null,children:H?"Suppression...":"Supprimer"})]})]})}),t.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},GA=_e(Q,"quizzes"),HA=async e=>{try{let r=Ee(GA,Ve("titre","asc"));e?.disciplineId;let a=(await Ce(r)).docs.map(l=>({id:l.id,...l.data()}));return e?.isPremium,e?.difficulte,a}catch(r){throw console.error("Erreur lors de la rcupration des quiz :",r),r}},cR=async e=>{try{const r=await gt(je(Q,"quizzes",e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){throw console.error("Erreur lors de la rcupration du quiz :",r),r}},uR=async e=>{try{return(await Dt(GA,{...e,createdAt:Ae.now(),updatedAt:Ae.now()})).id}catch(r){throw console.error("Erreur lors de la cration du quiz :",r),r}},dR=async(e,r)=>{try{await Ge(je(Q,"quizzes",e),{...r,updatedAt:Ae.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du quiz :",n),n}},mR=async e=>{try{await Gr(je(Q,"quizzes",e))}catch(r){throw console.error("Erreur lors de la suppression du quiz :",r),r}},fR=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,K1=()=>({id:fR(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),W1=e=>{const r=e.questions||[],n=r.reduce((l,o)=>l+(o.points||1),0),a={facile:r.filter(l=>l.difficulte==="facile").length,moyen:r.filter(l=>l.difficulte==="moyen").length,difficile:r.filter(l=>l.difficulte==="difficile").length};return{nombreQuestions:r.length,totalPoints:n,parDifficulte:a,duree:e.duree||0}},pR=()=>{const[e,r]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(null),[h,v]=g.useState(""),[b,x]=g.useState(""),[j,_]=g.useState(""),[C,w]=g.useState(""),[E,S]=g.useState(!1),[A,z]=g.useState("list"),[k,M]=g.useState(null),[D,$]=g.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[B,H]=g.useState(null),[T,Y]=g.useState(!1),[J,P]=g.useState(null),[q,U]=g.useState(null),[I,te]=g.useState({}),[L,Z]=g.useState(!1),W=g.useCallback(async()=>{o(!0),d(null);try{const[pe,Oe]=await Promise.all([HA(),is.getAll()]);r(pe),a(Oe.map(Le=>({id:Le.id,nom:Le.nom||Le.name||Le.id})))}catch(pe){d("Erreur lors du chargement des donnes."),console.error(pe)}finally{o(!1)}},[]);g.useEffect(()=>{W()},[W]),g.useEffect(()=>{if(m){const pe=setTimeout(()=>p(null),4e3);return()=>clearTimeout(pe)}},[m]);const ce=e.filter(pe=>{if(h){const Oe=h.toLowerCase();if(!pe.titre.toLowerCase().includes(Oe))return!1}return!(b&&pe.disciplineId!==b||j==="true"&&!pe.isPremium||j==="false"&&pe.isPremium||C&&!pe.questions?.some(Le=>Le.difficulte===C))}),xe=()=>{M(null),$({disciplineId:"",titre:"",questions:[K1()],duree:15,isPremium:!1,noteMinimale:50}),H(null),z("form")},he=pe=>{M(pe),$({disciplineId:pe.disciplineId,titre:pe.titre,questions:pe.questions||[],duree:pe.duree||15,isPremium:pe.isPremium||!1,noteMinimale:pe.noteMinimale||50}),H(null),z("form")},F=async()=>{if(!D.titre.trim()){d("Le titre du quiz est obligatoire.");return}if(!D.disciplineId){d("Veuillez slectionner une discipline.");return}if(D.questions.length===0){d("Le quiz doit contenir au moins une question.");return}for(let pe=0;pe<D.questions.length;pe++){const Oe=D.questions[pe];if(!Oe.question.trim()){d(`La question ${pe+1} n'a pas d'nonc.`);return}if(Oe.options.filter(He=>!He.trim()).length>0){d(`La question ${pe+1} a des options vides.`);return}}Y(!0),d(null);try{k?(await dR(k.id,D),p("Quiz mis  jour avec succs !")):(await uR(D),p("Quiz cr avec succs !")),await W(),z("list")}catch(pe){d("Erreur lors de la sauvegarde du quiz."),console.error(pe)}finally{Y(!1)}},ve=async pe=>{try{await mR(pe),p("Quiz supprim avec succs."),P(null),await W()}catch(Oe){d("Erreur lors de la suppression du quiz."),console.error(Oe)}},Pe=()=>{const pe=K1();$(Oe=>({...Oe,questions:[...Oe.questions,pe]})),H(pe.id)},ue=pe=>{const Oe=D.questions.find(Rt=>Rt.id===pe);if(!Oe)return;const Le={...Oe,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${Oe.question} (copie)`},He=D.questions.findIndex(Rt=>Rt.id===pe),dt=[...D.questions];dt.splice(He+1,0,Le),$(Rt=>({...Rt,questions:dt})),H(Le.id)},ee=pe=>{$(Oe=>({...Oe,questions:Oe.questions.filter(Le=>Le.id!==pe)})),B===pe&&H(null)},V=(pe,Oe,Le)=>{$(He=>({...He,questions:He.questions.map(dt=>dt.id===pe?{...dt,[Oe]:Le}:dt)}))},de=(pe,Oe,Le)=>{$(He=>({...He,questions:He.questions.map(dt=>dt.id===pe?{...dt,options:dt.options.map((Rt,nr)=>nr===Oe?Le:Rt)}:dt)}))},we=pe=>{U(pe),te({}),Z(!1),z("preview")},Te=(pe,Oe)=>{L||te(Le=>({...Le,[pe]:Oe}))},Xe=()=>{Z(!0)},tt=pe=>n.find(Oe=>Oe.id===pe)?.nom||pe,lt=({level:pe})=>{const Oe={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return t.jsx("span",{className:`quiz-badge ${Oe[pe]||"quiz-badge-moyen"}`,children:pe.charAt(0).toUpperCase()+pe.slice(1)})},rr=()=>t.jsxs(t.Fragment,{children:[u&&t.jsxs("div",{className:"admin-message admin-message-error",children:[t.jsx(bm,{size:18}),t.jsx("span",{children:u}),t.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:t.jsx(Ki,{size:16})})]}),m&&t.jsxs("div",{className:"admin-message admin-message-success",children:[t.jsx(Bt,{size:18}),t.jsx("span",{children:m})]})]}),kr=()=>t.jsxs("div",{className:"quiz-manager",children:[t.jsxs("div",{className:"admin-header",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"admin-title",children:[t.jsx(gn,{size:24})," Gestion des Quiz"]}),t.jsxs("p",{className:"admin-subtitle",children:[e.length," quiz au total  ",ce.length," affich(s)"]})]}),t.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:xe,children:[t.jsx(Mc,{size:18})," Nouveau Quiz"]})]}),t.jsxs("div",{className:"admin-toolbar",children:[t.jsxs("div",{className:"admin-search-wrapper",children:[t.jsx(SA,{size:18,className:"admin-search-icon"}),t.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:h,onChange:pe=>v(pe.target.value)})]}),t.jsxs("button",{className:`admin-btn admin-btn-outline ${E?"active":""}`,onClick:()=>S(!E),children:[t.jsx(Vb,{size:16})," Filtres",E?t.jsx(Dx,{size:14}):t.jsx(xm,{size:14})]})]}),E&&t.jsxs("div",{className:"admin-filters-panel",children:[t.jsxs("div",{className:"admin-filter-group",children:[t.jsx("label",{className:"admin-filter-label",children:"Discipline"}),t.jsxs("select",{className:"admin-select",value:b,onChange:pe=>x(pe.target.value),children:[t.jsx("option",{value:"",children:"Toutes les disciplines"}),n.map(pe=>t.jsx("option",{value:pe.id,children:pe.nom},pe.id))]})]}),t.jsxs("div",{className:"admin-filter-group",children:[t.jsx("label",{className:"admin-filter-label",children:"Accs"}),t.jsxs("select",{className:"admin-select",value:j,onChange:pe=>_(pe.target.value),children:[t.jsx("option",{value:"",children:"Tous"}),t.jsx("option",{value:"false",children:"Gratuit"}),t.jsx("option",{value:"true",children:"Premium"})]})]}),t.jsxs("div",{className:"admin-filter-group",children:[t.jsx("label",{className:"admin-filter-label",children:"Difficult"}),t.jsxs("select",{className:"admin-select",value:C,onChange:pe=>w(pe.target.value),children:[t.jsx("option",{value:"",children:"Toutes"}),t.jsx("option",{value:"facile",children:"Facile"}),t.jsx("option",{value:"moyen",children:"Moyen"}),t.jsx("option",{value:"difficile",children:"Difficile"})]})]}),t.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),_(""),w(""),v("")},children:"Rinitialiser"})]}),l?t.jsxs("div",{className:"admin-loading",children:[t.jsx("div",{className:"admin-spinner"}),t.jsx("p",{children:"Chargement des quiz..."})]}):ce.length===0?t.jsxs("div",{className:"admin-empty-state",children:[t.jsx(um,{size:48}),t.jsx("h3",{children:"Aucun quiz trouv"}),t.jsx("p",{children:e.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),e.length===0&&t.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:xe,children:[t.jsx(Mc,{size:18})," Crer un quiz"]})]}):t.jsx("div",{className:"quiz-grid",children:ce.map(pe=>{const Oe=W1(pe);return t.jsxs("div",{className:"quiz-card",children:[t.jsxs("div",{className:"quiz-card-header",children:[t.jsxs("div",{className:"quiz-card-title-row",children:[t.jsx("h3",{className:"quiz-card-title",children:pe.titre}),pe.isPremium&&t.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[t.jsx(vr,{size:12})," Premium"]})]}),t.jsx("span",{className:"quiz-card-discipline",children:tt(pe.disciplineId)})]}),t.jsxs("div",{className:"quiz-card-stats",children:[t.jsxs("div",{className:"quiz-stat",children:[t.jsx(um,{size:14}),t.jsxs("span",{children:[Oe.nombreQuestions," question(s)"]})]}),t.jsxs("div",{className:"quiz-stat",children:[t.jsx(ts,{size:14}),t.jsxs("span",{children:[Oe.totalPoints," pts"]})]}),t.jsxs("div",{className:"quiz-stat",children:[t.jsx(mo,{size:14}),t.jsxs("span",{children:[Oe.duree," min"]})]})]}),t.jsxs("div",{className:"quiz-card-difficulty",children:[Oe.parDifficulte.facile>0&&t.jsx(lt,{level:"facile"}),Oe.parDifficulte.moyen>0&&t.jsx(lt,{level:"moyen"}),Oe.parDifficulte.difficile>0&&t.jsx(lt,{level:"difficile"})]}),t.jsxs("div",{className:"quiz-card-actions",children:[t.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>we(pe),title:"Prvisualiser",children:[t.jsx(oo,{size:14})," Aperu"]}),t.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>he(pe),title:"Modifier",children:[t.jsx(z3,{size:14})," Modifier"]}),J===pe.id?t.jsxs("div",{className:"quiz-delete-confirm",children:[t.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>ve(pe.id),children:"Confirmer"}),t.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>P(null),children:"Annuler"})]}):t.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>P(pe.id),title:"Supprimer",children:t.jsx(z1,{size:14})})]})]},pe.id)})})]}),Or=()=>t.jsxs("div",{className:"quiz-manager",children:[t.jsxs("div",{className:"admin-header",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"admin-title",children:[t.jsx(gn,{size:24}),k?"Modifier le quiz":"Nouveau quiz"]}),t.jsxs("p",{className:"admin-subtitle",children:[D.questions.length," question(s) ajoute(s)"]})]}),t.jsxs("div",{className:"admin-header-actions",children:[t.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>z("list"),children:[t.jsx(Ki,{size:18})," Annuler"]}),t.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:F,disabled:T,children:[t.jsx(k3,{size:18})," ",T?"Enregistrement...":"Enregistrer"]})]})]}),t.jsxs("div",{className:"admin-card quiz-form-section",children:[t.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),t.jsxs("div",{className:"quiz-form-grid",children:[t.jsxs("div",{className:"admin-form-group quiz-form-full",children:[t.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),t.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:D.titre,onChange:pe=>$(Oe=>({...Oe,titre:pe.target.value}))})]}),t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"Discipline *"}),t.jsxs("select",{className:"admin-select",value:D.disciplineId,onChange:pe=>$(Oe=>({...Oe,disciplineId:pe.target.value})),children:[t.jsx("option",{value:"",children:"-- Slectionner --"}),n.map(pe=>t.jsx("option",{value:pe.id,children:pe.nom},pe.id))]})]}),t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),t.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:D.duree,onChange:pe=>$(Oe=>({...Oe,duree:parseInt(pe.target.value)||15}))})]}),t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),t.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:D.noteMinimale,onChange:pe=>$(Oe=>({...Oe,noteMinimale:parseInt(pe.target.value)||50}))})]}),t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"Accs"}),t.jsxs("div",{className:`quiz-toggle ${D.isPremium?"quiz-toggle-active":""}`,onClick:()=>$(pe=>({...pe,isPremium:!pe.isPremium})),children:[t.jsx(vr,{size:16}),t.jsx("span",{children:D.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),t.jsxs("div",{className:"admin-card quiz-form-section",children:[t.jsxs("div",{className:"quiz-questions-header",children:[t.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",D.questions.length,")"]}),t.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Pe,children:[t.jsx(Mc,{size:14})," Ajouter une question"]})]}),D.questions.length===0?t.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[t.jsx(um,{size:36}),t.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):t.jsx("div",{className:"quiz-questions-list",children:D.questions.map((pe,Oe)=>t.jsxs("div",{className:`quiz-question-item ${B===pe.id?"expanded":""}`,children:[t.jsxs("div",{className:"quiz-question-header",onClick:()=>H(B===pe.id?null:pe.id),children:[t.jsxs("div",{className:"quiz-question-header-left",children:[t.jsx(O3,{size:16,className:"quiz-grip-icon"}),t.jsxs("span",{className:"quiz-question-number",children:["Q",Oe+1]}),t.jsx("span",{className:"quiz-question-preview",children:pe.question||"Question sans nonc..."})]}),t.jsxs("div",{className:"quiz-question-header-right",children:[t.jsx(lt,{level:pe.difficulte||"moyen"}),t.jsxs("span",{className:"quiz-question-points",children:[pe.points," pt(s)"]}),B===pe.id?t.jsx(Dx,{size:16}):t.jsx(xm,{size:16})]})]}),B===pe.id&&t.jsxs("div",{className:"quiz-question-body",children:[t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"nonc de la question *"}),t.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:pe.question,onChange:Le=>V(pe.id,"question",Le.target.value)})]}),t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),t.jsx("div",{className:"quiz-options-grid",children:pe.options.map((Le,He)=>t.jsxs("div",{className:`quiz-option-item ${pe.reponseCorrecte===He?"quiz-option-correct":""}`,children:[t.jsx("button",{type:"button",className:`quiz-option-radio ${pe.reponseCorrecte===He?"active":""}`,onClick:()=>V(pe.id,"reponseCorrecte",He),title:pe.reponseCorrecte===He?"Bonne rponse":"Marquer comme bonne rponse",children:pe.reponseCorrecte===He?t.jsx(Bt,{size:16}):t.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+He)})}),t.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+He)}`,value:Le,onChange:dt=>de(pe.id,He,dt.target.value)})]},He))})]}),t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),t.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:pe.explication,onChange:Le=>V(pe.id,"explication",Le.target.value)})]}),t.jsxs("div",{className:"quiz-question-meta",children:[t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"Difficult"}),t.jsxs("select",{className:"admin-select",value:pe.difficulte,onChange:Le=>V(pe.id,"difficulte",Le.target.value),children:[t.jsx("option",{value:"facile",children:"Facile"}),t.jsx("option",{value:"moyen",children:"Moyen"}),t.jsx("option",{value:"difficile",children:"Difficile"})]})]}),t.jsxs("div",{className:"admin-form-group",children:[t.jsx("label",{className:"admin-label",children:"Points"}),t.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:pe.points,onChange:Le=>V(pe.id,"points",parseInt(Le.target.value)||1)})]})]}),t.jsxs("div",{className:"quiz-question-actions",children:[t.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ue(pe.id),children:[t.jsx(D3,{size:14})," Dupliquer"]}),t.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>ee(pe.id),children:[t.jsx(z1,{size:14})," Supprimer"]})]})]})]},pe.id))}),D.questions.length>0&&t.jsx("div",{className:"quiz-add-question-bottom",children:t.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Pe,children:[t.jsx(Mc,{size:16})," Ajouter une question"]})})]})]}),sn=()=>{if(!q)return null;const pe=W1(q);let Oe=0,Le=0;return L&&q.questions.forEach(He=>{Le+=He.points||1,I[He.id]===He.reponseCorrecte&&(Oe+=He.points||1)}),t.jsxs("div",{className:"quiz-manager",children:[t.jsxs("div",{className:"admin-header",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"admin-title",children:[t.jsx(oo,{size:24})," Prvisualisation : ",q.titre]}),t.jsxs("p",{className:"admin-subtitle",children:[tt(q.disciplineId),"  ",pe.nombreQuestions," questions  ",pe.duree," min"]})]}),t.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{z("list"),U(null)},children:[t.jsx(Ki,{size:18})," Fermer"]})]}),L&&t.jsxs("div",{className:`quiz-preview-score ${Oe/Le>=(q.noteMinimale||50)/100?"success":"fail"}`,children:[t.jsx(ts,{size:32}),t.jsxs("div",{children:[t.jsxs("h3",{children:["Score : ",Oe,"/",Le," (",Math.round(Oe/Le*100),"%)"]}),t.jsxs("p",{children:["Note minimale : ",q.noteMinimale||50,"% "," ",Oe/Le>=(q.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),t.jsx("div",{className:"quiz-preview-questions",children:q.questions.map((He,dt)=>{const Rt=I[He.id],nr=Rt===He.reponseCorrecte;return t.jsxs("div",{className:"admin-card quiz-preview-question",children:[t.jsxs("div",{className:"quiz-preview-question-header",children:[t.jsxs("span",{className:"quiz-question-number",children:["Q",dt+1]}),t.jsx(lt,{level:He.difficulte||"moyen"}),t.jsxs("span",{className:"quiz-question-points",children:[He.points," pt(s)"]})]}),t.jsx("p",{className:"quiz-preview-question-text",children:He.question}),t.jsx("div",{className:"quiz-preview-options",children:He.options.map((sa,Dr)=>{let Pr="quiz-preview-option";return L?Dr===He.reponseCorrecte?Pr+=" correct":Dr===Rt&&!nr&&(Pr+=" incorrect"):Rt===Dr&&(Pr+=" selected"),t.jsxs("button",{className:Pr,onClick:()=>Te(He.id,Dr),disabled:L,children:[t.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+Dr)}),t.jsx("span",{children:sa}),L&&Dr===He.reponseCorrecte&&t.jsx(Bt,{size:16,className:"quiz-preview-check"})]},Dr)})}),L&&He.explication&&t.jsxs("div",{className:"quiz-preview-explication",children:[t.jsx("strong",{children:"Explication :"})," ",He.explication]})]},He.id)})}),!L&&t.jsx("div",{className:"quiz-preview-submit",children:t.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:Xe,disabled:Object.keys(I).length<q.questions.length,children:[t.jsx(Bt,{size:18})," Soumettre (",Object.keys(I).length,"/",q.questions.length,")"]})})]})};return t.jsxs("div",{className:"admin-container",children:[rr(),A==="list"&&kr(),A==="form"&&Or(),A==="preview"&&sn()]})},VA=_e(Q,"users"),hR=_e(Q,"quizResults"),vR=async e=>{try{let r=Ee(VA,Ve("displayName","asc"));e?.role;let a=(await Ce(r)).docs.map(l=>({uid:l.id,...l.data()}));return e?.isPremium,e?.isActive,e?.search,a}catch(r){throw console.error("Erreur lors de la rcupration des utilisateurs :",r),r}},gR=async(e,r)=>{try{await Ge(je(Q,"users",e),{role:r,updatedAt:Ae.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du rle :",n),n}},xR=async(e,r)=>{try{const n={isPremium:r,updatedAt:Ae.now()};if(r){const a=new Date;a.setDate(a.getDate()+30),n.subscriptionEnd=Ae.fromDate(a)}else n.subscriptionEnd=null;await Ge(je(Q,"users",e),n)}catch(n){throw console.error("Erreur lors de la mise  jour du statut Premium :",n),n}},bR=async(e,r)=>{try{await Ge(je(Q,"users",e),{isActive:r,updatedAt:Ae.now()})}catch(n){throw console.error("Erreur lors du changement de statut du compte :",n),n}},yR=async e=>{try{const r=Ee(hR,Se("userId","==",e)),a=(await Ce(r)).docs.map(m=>({id:m.id,...m.data()})),l=a.length,o=a.filter(m=>m.reussi).length,u=l>0?Math.round(a.reduce((m,p)=>m+p.score,0)/l):0,d=a.length>0?new Date(Math.max(...a.map(m=>{const p=m.datePassage;return p?.toDate?p.toDate().getTime():new Date(p).getTime()}))):null;return{totalQuizPasses:l,scoresMoyens:u,quizReussis:o,dernierQuiz:d}}catch(r){return console.error("Erreur lors du calcul des statistiques :",r),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},jR=async()=>{try{const r=(await Ce(VA)).docs.map(n=>n.data());return{total:r.length,admins:r.filter(n=>n.role==="admin").length,profs:r.filter(n=>n.role==="prof").length,eleves:r.filter(n=>n.role==="eleve").length,premium:r.filter(n=>n.isPremium).length,actifs:r.filter(n=>n.isActive!==!1).length}}catch(e){throw console.error("Erreur lors du calcul des stats globales :",e),e}},_R=()=>{const[e,r]=g.useState([]),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(null),[h,v]=g.useState(""),[b,x]=g.useState(""),[j,_]=g.useState(""),[C,w]=g.useState(""),[E,S]=g.useState(!1),[A]=bA();g.useEffect(()=>{A.get("filter")==="premium"&&_("true")},[A]);const[z,k]=g.useState(null),[M,D]=g.useState(null),[$,B]=g.useState(!1),[H,T]=g.useState(null),[Y,J]=g.useState(null),P=g.useCallback(async()=>{o(!0),d(null);try{const[F,ve]=await Promise.all([vR(),jR()]);r(F),a(ve)}catch(F){d("Erreur lors du chargement des utilisateurs."),console.error(F)}finally{o(!1)}},[]);g.useEffect(()=>{P()},[P]),g.useEffect(()=>{if(m){const F=setTimeout(()=>p(null),4e3);return()=>clearTimeout(F)}},[m]);const q=e.filter(F=>{if(h){const ve=h.toLowerCase();if(!F.displayName?.toLowerCase().includes(ve)&&!F.email?.toLowerCase().includes(ve))return!1}return!(b&&F.role!==b||j==="true"&&!F.isPremium||j==="false"&&F.isPremium||C==="true"&&F.isActive===!1||C==="false"&&F.isActive!==!1)}),U=async F=>{k(F),B(!0);try{const ve=await yR(F.uid);D(ve)}catch(ve){console.error("Erreur lors du chargement des statistiques :",ve),D(null)}finally{B(!1)}},I=async()=>{if(Y){T(Y.userId);try{switch(Y.type){case"role":await gR(Y.userId,Y.value),p("Rle mis  jour avec succs.");break;case"premium":await xR(Y.userId,Y.value),p(Y.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await bR(Y.userId,Y.value),p(Y.value?"Compte ractiv.":"Compte dsactiv.");break}await P()}catch(F){d("Erreur lors de l'excution de l'action."),console.error(F)}finally{T(null),J(null)}}},te=({role:F})=>{const ve={admin:{icon:t.jsx(Hb,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:t.jsx(Bs,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:t.jsx(gn,{size:12}),className:"user-badge-eleve",label:"lve"}},Pe=ve[F]||ve.eleve;return t.jsxs("span",{className:`user-badge ${Pe.className}`,children:[Pe.icon," ",Pe.label]})},L=F=>F?(F?.toDate?F.toDate():new Date(F)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",Z=F=>F?F.charAt(0).toUpperCase():"?",W=()=>t.jsxs(t.Fragment,{children:[u&&t.jsxs("div",{className:"admin-message admin-message-error",children:[t.jsx(bm,{size:18}),t.jsx("span",{children:u}),t.jsx("button",{onClick:()=>d(null),className:"admin-message-close",children:t.jsx(Ki,{size:16})})]}),m&&t.jsxs("div",{className:"admin-message admin-message-success",children:[t.jsx(Bt,{size:18}),t.jsx("span",{children:m})]})]}),ce=()=>{if(!n)return null;const F=[{label:"Total",value:n.total,icon:t.jsx(cm,{size:20}),color:"stat-blue"},{label:"lves",value:n.eleves,icon:t.jsx(gn,{size:20}),color:"stat-green"},{label:"Professeurs",value:n.profs,icon:t.jsx(Bs,{size:20}),color:"stat-purple"},{label:"Premium",value:n.premium,icon:t.jsx(vr,{size:20}),color:"stat-gold"}];return t.jsx("div",{className:"user-stats-grid",children:F.map(ve=>t.jsxs("div",{className:`user-stat-card ${ve.color}`,children:[t.jsx("div",{className:"user-stat-icon",children:ve.icon}),t.jsxs("div",{className:"user-stat-info",children:[t.jsx("span",{className:"user-stat-value",children:ve.value}),t.jsx("span",{className:"user-stat-label",children:ve.label})]})]},ve.label))})},xe=()=>Y?t.jsx("div",{className:"admin-modal-overlay",onClick:()=>J(null),children:t.jsxs("div",{className:"admin-modal",onClick:F=>F.stopPropagation(),children:[t.jsxs("div",{className:"admin-modal-header",children:[t.jsx("h3",{children:"Confirmer l'action"}),t.jsx("button",{className:"admin-modal-close",onClick:()=>J(null),children:t.jsx(Ki,{size:20})})]}),t.jsx("div",{className:"admin-modal-body",children:t.jsx("p",{children:Y.label})}),t.jsxs("div",{className:"admin-modal-footer",children:[t.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>J(null),children:"Annuler"}),t.jsx("button",{className:"admin-btn admin-btn-primary",onClick:I,disabled:H===Y.userId,children:H===Y.userId?"En cours...":"Confirmer"})]})]})}):null,he=()=>z?t.jsx("div",{className:"admin-modal-overlay",onClick:()=>k(null),children:t.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:F=>F.stopPropagation(),children:[t.jsxs("div",{className:"admin-modal-header",children:[t.jsx("h3",{children:"Dtail de l'utilisateur"}),t.jsx("button",{className:"admin-modal-close",onClick:()=>k(null),children:t.jsx(Ki,{size:20})})]}),t.jsxs("div",{className:"admin-modal-body",children:[t.jsxs("div",{className:"user-detail-profile",children:[t.jsx("div",{className:"user-detail-avatar",children:Z(z.displayName)}),t.jsxs("div",{className:"user-detail-info",children:[t.jsx("h4",{children:z.displayName||"Sans nom"}),t.jsx("p",{children:z.email}),t.jsxs("div",{className:"user-detail-badges",children:[t.jsx(te,{role:z.role}),z.isPremium&&t.jsxs("span",{className:"user-badge user-badge-premium",children:[t.jsx(vr,{size:12})," Premium"]}),t.jsx("span",{className:`user-badge ${z.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:z.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),t.jsxs("div",{className:"user-detail-dates",children:[t.jsxs("div",{children:[t.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),t.jsx("span",{children:L(z.createdAt)})]}),z.isPremium&&z.subscriptionEnd&&t.jsxs("div",{children:[t.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),t.jsx("span",{children:L(z.subscriptionEnd)})]})]}),t.jsxs("div",{className:"user-detail-stats-section",children:[t.jsxs("h4",{children:[t.jsx(Us,{size:18})," Statistiques"]}),$?t.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[t.jsx("div",{className:"admin-spinner"}),t.jsx("p",{children:"Chargement des statistiques..."})]}):M?t.jsxs("div",{className:"user-detail-stats-grid",children:[t.jsxs("div",{className:"user-detail-stat",children:[t.jsx(gn,{size:20}),t.jsx("span",{className:"user-detail-stat-value",children:M.totalQuizPasses}),t.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),t.jsxs("div",{className:"user-detail-stat",children:[t.jsx(Tc,{size:20}),t.jsxs("span",{className:"user-detail-stat-value",children:[M.scoresMoyens,"%"]}),t.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),t.jsxs("div",{className:"user-detail-stat",children:[t.jsx(ts,{size:20}),t.jsx("span",{className:"user-detail-stat-value",children:M.quizReussis}),t.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),t.jsxs("div",{className:"user-detail-stat",children:[t.jsx(mo,{size:20}),t.jsx("span",{className:"user-detail-stat-value",children:M.dernierQuiz?L(M.dernierQuiz):"Aucun"}),t.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):t.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return t.jsxs("div",{className:"admin-container",children:[W(),xe(),he(),t.jsxs("div",{className:"user-manager",children:[t.jsxs("div",{className:"admin-header",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"admin-title",children:[t.jsx(cm,{size:24})," Gestion des Utilisateurs"]}),t.jsxs("p",{className:"admin-subtitle",children:[e.length," utilisateur(s) au total  ",q.length," affich(s)"]})]}),t.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:P,children:[t.jsx(P3,{size:16})," Actualiser"]})]}),ce(),t.jsxs("div",{className:"admin-toolbar",children:[t.jsxs("div",{className:"admin-search-wrapper",children:[t.jsx(SA,{size:18,className:"admin-search-icon"}),t.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:h,onChange:F=>v(F.target.value)})]}),t.jsxs("button",{className:`admin-btn admin-btn-outline ${E?"active":""}`,onClick:()=>S(!E),children:[t.jsx(Vb,{size:16})," Filtres",E?t.jsx(Dx,{size:14}):t.jsx(xm,{size:14})]})]}),E&&t.jsxs("div",{className:"admin-filters-panel",children:[t.jsxs("div",{className:"admin-filter-group",children:[t.jsx("label",{className:"admin-filter-label",children:"Rle"}),t.jsxs("select",{className:"admin-select",value:b,onChange:F=>x(F.target.value),children:[t.jsx("option",{value:"",children:"Tous les rles"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"prof",children:"Professeur"}),t.jsx("option",{value:"eleve",children:"lve"})]})]}),t.jsxs("div",{className:"admin-filter-group",children:[t.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),t.jsxs("select",{className:"admin-select",value:j,onChange:F=>_(F.target.value),children:[t.jsx("option",{value:"",children:"Tous"}),t.jsx("option",{value:"true",children:"Premium"}),t.jsx("option",{value:"false",children:"Gratuit"})]})]}),t.jsxs("div",{className:"admin-filter-group",children:[t.jsx("label",{className:"admin-filter-label",children:"Statut"}),t.jsxs("select",{className:"admin-select",value:C,onChange:F=>w(F.target.value),children:[t.jsx("option",{value:"",children:"Tous"}),t.jsx("option",{value:"true",children:"Actifs"}),t.jsx("option",{value:"false",children:"Dsactivs"})]})]}),t.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),_(""),w(""),v("")},children:"Rinitialiser"})]}),l?t.jsxs("div",{className:"admin-loading",children:[t.jsx("div",{className:"admin-spinner"}),t.jsx("p",{children:"Chargement des utilisateurs..."})]}):q.length===0?t.jsxs("div",{className:"admin-empty-state",children:[t.jsx(cm,{size:48}),t.jsx("h3",{children:"Aucun utilisateur trouv"}),t.jsx("p",{children:e.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):t.jsx("div",{className:"user-table-wrapper",children:t.jsxs("table",{className:"user-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Utilisateur"}),t.jsx("th",{children:"Rle"}),t.jsx("th",{children:"Abonnement"}),t.jsx("th",{children:"Statut"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:q.map(F=>t.jsxs("tr",{className:F.isActive===!1?"user-row-inactive":"",children:[t.jsx("td",{children:t.jsxs("div",{className:"user-cell-info",children:[t.jsx("div",{className:"user-avatar-sm",children:Z(F.displayName)}),t.jsxs("div",{children:[t.jsx("span",{className:"user-cell-name",children:F.displayName||"Sans nom"}),t.jsx("span",{className:"user-cell-email",children:F.email})]})]})}),t.jsx("td",{children:t.jsxs("select",{className:"admin-select admin-select-sm",value:F.role,onChange:ve=>J({type:"role",userId:F.uid,value:ve.target.value,label:`Changer le rle de "${F.displayName||F.email}" en "${ve.target.value}" ?`}),children:[t.jsx("option",{value:"eleve",children:"lve"}),t.jsx("option",{value:"prof",children:"Professeur"}),t.jsx("option",{value:"admin",children:"Admin"})]})}),t.jsx("td",{children:t.jsx("button",{className:`user-premium-toggle ${F.isPremium?"active":""}`,onClick:()=>J({type:"premium",userId:F.uid,value:!F.isPremium,label:F.isPremium?`Dsactiver le statut Premium de "${F.displayName||F.email}" ?`:`Activer le statut Premium de "${F.displayName||F.email}" pour 30 jours ?`}),disabled:H===F.uid,children:F.isPremium?t.jsxs(t.Fragment,{children:[t.jsx(Pc,{size:14})," Premium"]}):t.jsxs(t.Fragment,{children:[t.jsx(vr,{size:14})," Gratuit"]})})}),t.jsx("td",{children:t.jsx("button",{className:`user-status-toggle ${F.isActive!==!1?"active":"inactive"}`,onClick:()=>J({type:"active",userId:F.uid,value:F.isActive===!1,label:F.isActive===!1?`Ractiver le compte de "${F.displayName||F.email}" ?`:`Dsactiver le compte de "${F.displayName||F.email}" ?`}),disabled:H===F.uid,children:F.isActive!==!1?t.jsxs(t.Fragment,{children:[t.jsx(M3,{size:14})," Actif"]}):t.jsxs(t.Fragment,{children:[t.jsx(T3,{size:14})," Dsactiv"]})})}),t.jsx("td",{children:t.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>U(F),title:"Voir les statistiques",children:[t.jsx(oo,{size:14})," Dtail"]})})]},F.uid))})]})})]})]})},NR=()=>{const[e,r]=g.useState([]),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(""),[h,v]=g.useState(""),[b,x]=g.useState(""),[j,_]=g.useState(!1),C=g.useCallback(async()=>{try{o(!0),d(null);const z=await Ce(_e(Q,"users")),k=new Map;z.docs.forEach(ce=>{const xe=ce.data();k.set(ce.id,{name:xe.displayName||"Sans nom",email:xe.email||""})});const M=await Ce(_e(Q,"quizzes")),D=new Map;M.docs.forEach(ce=>{const xe=ce.data();D.set(ce.id,{titre:xe.titre||xe.quizTitre||"Quiz sans titre",discipline:xe.disciplineNom||xe.matiereNom||""})});const $=await Ce(_e(Q,"quizzes_v2")),B=new Map;$.docs.forEach(ce=>{const xe=ce.data();B.set(ce.id,{titre:xe.titre||"Quiz avanc sans titre",discipline:xe.disciplineNom||""})});const H=[];try{(await Ce(Ee(_e(Q,"quiz_results"),Ve("datePassage","desc"),Gt(200)))).docs.forEach(xe=>{const he=xe.data(),F=k.get(he.userId)||{name:"Inconnu",email:""},ve=D.get(he.quizId)||{titre:he.quizTitre||"Quiz",discipline:he.disciplineNom||""},Pe=he.pourcentage??(he.totalPoints>0?Math.round(he.score/he.totalPoints*100):he.score>0?Math.round(he.score/20*100):0);H.push({id:xe.id,quizId:he.quizId||"",quizTitre:ve.titre,userId:he.userId||"",userName:F.name,userEmail:F.email,score:he.score||0,scoreMax:he.totalPoints||20,pourcentage:Pe,reussi:he.reussi??Pe>=50,tempsEcoule:he.tempsEcoule||0,datePassage:he.datePassage?.toDate?.()||new Date,type:"classique",disciplineNom:ve.discipline})})}catch(ce){console.warn("Pas de rsultats v1 ou index manquant:",ce)}const T=[];try{(await Ce(Ee(_e(Q,"quiz_results_v2"),Ve("datePassage","desc"),Gt(200)))).docs.forEach(xe=>{const he=xe.data(),F=k.get(he.userId)||{name:"Inconnu",email:""},ve=B.get(he.quizId)||{titre:he.quizTitre||"Quiz avanc",discipline:he.disciplineNom||""},Pe=he.scoreMax>0?Math.round(he.score/he.scoreMax*100):0;T.push({id:xe.id,quizId:he.quizId||"",quizTitre:ve.titre,userId:he.userId||"",userName:F.name,userEmail:F.email,score:he.score||0,scoreMax:he.scoreMax||0,pourcentage:Pe,reussi:he.reussi??Pe>=50,tempsEcoule:he.tempsTotal||he.tempsEcoule||0,datePassage:he.datePassage?.toDate?.()||new Date,type:"avance",disciplineNom:ve.discipline})})}catch(ce){console.warn("Pas de rsultats v2 ou index manquant:",ce)}const Y=[...H,...T].sort((ce,xe)=>xe.datePassage.getTime()-ce.datePassage.getTime());r(Y);const J=new Date,P=new Date(J.getFullYear(),J.getMonth(),J.getDate()),q=new Date(P.getTime()-10080*60*1e3),U=Y.length,I=U>0?Math.round(Y.reduce((ce,xe)=>ce+xe.pourcentage,0)/U):0,te=U>0?Math.round(Y.filter(ce=>ce.reussi).length/U*100):0,L=U>0?Math.round(Y.reduce((ce,xe)=>ce+xe.tempsEcoule,0)/U):0,Z=Y.filter(ce=>ce.datePassage>=P).length,W=Y.filter(ce=>ce.datePassage>=q).length;a({totalResultats:U,moyenneGenerale:I,tauxReussite:te,tempsEcouleMoyen:L,resultatsAujourdHui:Z,resultats7Jours:W})}catch(z){console.error("Erreur chargement rsultats:",z),d("Impossible de charger les rsultats. Vrifiez votre connexion.")}finally{o(!1)}},[]);g.useEffect(()=>{C()},[C]);const w=e.filter(z=>{if(m&&z.type!==m||h==="true"&&!z.reussi||h==="false"&&z.reussi)return!1;if(b){const k=b.toLowerCase();if(!z.userName.toLowerCase().includes(k)&&!z.userEmail.toLowerCase().includes(k)&&!z.quizTitre.toLowerCase().includes(k)&&!z.disciplineNom.toLowerCase().includes(k))return!1}return!0}),E=z=>{if(z<60)return`${z}s`;const k=Math.floor(z/60),M=z%60;return M>0?`${k}min ${M}s`:`${k}min`},S=z=>z.toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),A=z=>z>=80?"results-score--excellent":z>=60?"results-score--bien":z>=40?"results-score--moyen":"results-score--faible";return t.jsxs("div",{className:"results-admin",children:[t.jsxs("div",{className:"admin-page-header",children:[t.jsxs("div",{className:"admin-page-header__info",children:[t.jsx("h1",{className:"admin-page-header__title",children:" Rsultats des Quiz"}),t.jsx("p",{className:"admin-page-header__subtitle",children:"Vue d'ensemble des performances des lves"})]}),t.jsx("div",{className:"admin-page-header__actions",children:t.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:C,children:" Actualiser"})})]}),n&&t.jsxs("div",{className:"stats-grid",children:[t.jsxs("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.totalResultats}),t.jsx("div",{className:"stat-card__label",children:"Rsultats totaux"})]})]}),t.jsxs("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsxs("div",{className:"stat-card__value",children:[n.moyenneGenerale,"%"]}),t.jsx("div",{className:"stat-card__label",children:"Moyenne gnrale"})]})]}),t.jsxs("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsxs("div",{className:"stat-card__value",children:[n.tauxReussite,"%"]}),t.jsx("div",{className:"stat-card__label",children:"Taux de russite"})]})]}),t.jsxs("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),t.jsxs("div",{className:"stat-card__content",children:[t.jsx("div",{className:"stat-card__value",children:n.resultatsAujourdHui}),t.jsx("div",{className:"stat-card__label",children:"Aujourd'hui"})]})]})]}),t.jsxs("div",{className:"admin-toolbar",children:[t.jsxs("div",{className:"admin-search",children:[t.jsx("span",{className:"admin-search-icon",children:""}),t.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par lve, quiz ou discipline...",value:b,onChange:z=>x(z.target.value)})]}),t.jsx("button",{className:`admin-btn admin-btn-ghost ${j?"active":""}`,onClick:()=>_(!j),children:" Filtres"})]}),j&&t.jsxs("div",{className:"admin-filters-panel",children:[t.jsxs("div",{className:"admin-filter-group",children:[t.jsx("label",{className:"admin-filter-label",children:"Type de quiz"}),t.jsxs("select",{className:"admin-select",value:m,onChange:z=>p(z.target.value),children:[t.jsx("option",{value:"",children:"Tous les types"}),t.jsx("option",{value:"classique",children:"Classique (v1)"}),t.jsx("option",{value:"avance",children:"Avanc (v2)"})]})]}),t.jsxs("div",{className:"admin-filter-group",children:[t.jsx("label",{className:"admin-filter-label",children:"Rsultat"}),t.jsxs("select",{className:"admin-select",value:h,onChange:z=>v(z.target.value),children:[t.jsx("option",{value:"",children:"Tous"}),t.jsx("option",{value:"true",children:"Russis"}),t.jsx("option",{value:"false",children:"chous"})]})]}),t.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{p(""),v(""),x("")},children:"Rinitialiser"})]}),l?t.jsxs("div",{className:"admin-loading",children:[t.jsx("div",{className:"admin-spinner"}),t.jsx("p",{children:"Chargement des rsultats..."})]}):u?t.jsxs("div",{className:"admin-error",children:[t.jsxs("p",{children:[" ",u]}),t.jsx("button",{className:"admin-btn admin-btn-primary",onClick:C,children:"Ressayer"})]}):w.length===0?t.jsxs("div",{className:"admin-empty-state",children:[t.jsx("span",{style:{fontSize:"3rem"},children:""}),t.jsx("h3",{children:"Aucun rsultat trouv"}),t.jsx("p",{children:e.length===0?"Aucun lve n'a encore pass de quiz.":"Aucun rsultat ne correspond  vos filtres."})]}):t.jsxs("div",{className:"results-table-wrapper",children:[t.jsxs("table",{className:"results-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"lve"}),t.jsx("th",{children:"Quiz"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Score"}),t.jsx("th",{children:"Rsultat"}),t.jsx("th",{children:"Dure"}),t.jsx("th",{children:"Date"})]})}),t.jsx("tbody",{children:w.map(z=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsxs("div",{className:"results-cell-user",children:[t.jsx("span",{className:"results-cell-name",children:z.userName}),t.jsx("span",{className:"results-cell-email",children:z.userEmail})]})}),t.jsx("td",{children:t.jsxs("div",{className:"results-cell-quiz",children:[t.jsx("span",{className:"results-cell-quiz-title",children:z.quizTitre}),z.disciplineNom&&t.jsx("span",{className:"results-cell-discipline",children:z.disciplineNom})]})}),t.jsx("td",{children:t.jsx("span",{className:`results-badge results-badge--${z.type}`,children:z.type==="classique"?" Classique":" Avanc"})}),t.jsxs("td",{children:[t.jsxs("span",{className:`results-score ${A(z.pourcentage)}`,children:[z.pourcentage,"%"]}),t.jsxs("span",{className:"results-score-detail",children:[z.score,"/",z.scoreMax]})]}),t.jsx("td",{children:t.jsx("span",{className:`results-status ${z.reussi?"results-status--success":"results-status--fail"}`,children:z.reussi?" Russi":" chou"})}),t.jsx("td",{className:"results-cell-duration",children:E(z.tempsEcoule)}),t.jsx("td",{className:"results-cell-date",children:S(z.datePassage)})]},`${z.type}-${z.id}`))})]}),t.jsx("div",{className:"results-footer",children:t.jsxs("p",{children:[w.length," rsultat",w.length>1?"s":""," affich",w.length>1?"s":"",w.length!==e.length&&` sur ${e.length} au total`]})})]})]})},Xl={siteName:"PedaClic",siteDescription:"L'cole en un clic  Plateforme ducative sngalaise",contactEmail:"contact@pedaclic.sn",contactPhone:"+221 XX XXX XX XX",premium3m:1e4,premium6m:2e4,premium1an:3e4,quizDureeDefaut:15,quizNoteMinimale:10,quizTentativesMax:3,maintenanceMode:!1,maintenanceMessage:"PedaClic est en maintenance. Nous revenons bientt !",cahierPdfExport:!0},SR=()=>{const[e,r]=g.useState(Xl),[n,a]=g.useState(Xl),[l,o]=g.useState(!0),[u,d]=g.useState(!1),[m,p]=g.useState(null),[h,v]=g.useState(null),[b,x]=g.useState(!1),j=g.useCallback(async()=>{try{o(!0),p(null);const S=je(Q,"settings","platform"),A=await gt(S);if(A.exists()){const z=A.data(),k={...Xl,...z};r(k),a(k)}else r(Xl),a(Xl)}catch(S){console.error("Erreur chargement paramtres:",S),p("Impossible de charger les paramtres.")}finally{o(!1)}},[]);g.useEffect(()=>{j()},[j]),g.useEffect(()=>{if(h){const S=setTimeout(()=>v(null),4e3);return()=>clearTimeout(S)}},[h]),g.useEffect(()=>{const S=JSON.stringify(e)!==JSON.stringify(n);x(S)},[e,n]);const _=(S,A)=>{r(z=>({...z,[S]:A}))},C=async()=>{try{if(d(!0),p(null),e.premium3m<0||e.premium6m<0||e.premium1an<0){p("Les tarifs ne peuvent pas tre ngatifs.");return}if(e.quizNoteMinimale<0||e.quizNoteMinimale>20){p("La note minimale doit tre entre 0 et 20.");return}const S=je(Q,"settings","platform");await lu(S,{...e,updatedAt:Et()}),a(e),x(!1),v("Paramtres sauvegards avec succs !")}catch(S){console.error("Erreur sauvegarde paramtres:",S),p("Impossible de sauvegarder les paramtres.")}finally{d(!1)}},w=()=>{r(n),x(!1)},E=()=>{window.confirm("Rinitialiser tous les paramtres aux valeurs par dfaut ?")&&r(Xl)};return l?t.jsxs("div",{className:"admin-loading",children:[t.jsx("div",{className:"admin-spinner"}),t.jsx("p",{children:"Chargement des paramtres..."})]}):t.jsxs("div",{className:"settings-admin",children:[t.jsxs("div",{className:"admin-page-header",children:[t.jsxs("div",{className:"admin-page-header__info",children:[t.jsx("h1",{className:"admin-page-header__title",children:" Configuration"}),t.jsx("p",{className:"admin-page-header__subtitle",children:"Paramtres gnraux de la plateforme PedaClic"})]}),t.jsxs("div",{className:"admin-page-header__actions",children:[b&&t.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:w,children:"Annuler"}),t.jsx("button",{className:"admin-btn admin-btn-primary",onClick:C,disabled:!b||u,children:u?" Sauvegarde...":" Sauvegarder"})]})]}),b&&t.jsx("div",{className:"settings-unsaved-banner",children:" Vous avez des modifications non sauvegardes."}),m&&t.jsxs("div",{className:"admin-alert admin-alert--error",children:[" ",m]}),h&&t.jsxs("div",{className:"admin-alert admin-alert--success",children:[" ",h]}),t.jsxs("div",{className:"settings-section",children:[t.jsxs("div",{className:"settings-section__header",children:[t.jsx("h2",{className:"settings-section__title",children:" Informations gnrales"}),t.jsx("p",{className:"settings-section__description",children:"Informations de base de la plateforme"})]}),t.jsxs("div",{className:"settings-grid",children:[t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Nom du site"}),t.jsx("input",{type:"text",className:"admin-input",value:e.siteName,onChange:S=>_("siteName",S.target.value)})]}),t.jsxs("div",{className:"settings-field settings-field--full",children:[t.jsx("label",{className:"settings-label",children:"Description"}),t.jsx("input",{type:"text",className:"admin-input",value:e.siteDescription,onChange:S=>_("siteDescription",S.target.value)})]}),t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Email de contact"}),t.jsx("input",{type:"email",className:"admin-input",value:e.contactEmail,onChange:S=>_("contactEmail",S.target.value)})]}),t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Tlphone"}),t.jsx("input",{type:"tel",className:"admin-input",value:e.contactPhone,onChange:S=>_("contactPhone",S.target.value)})]})]})]}),t.jsxs("div",{className:"settings-section",children:[t.jsxs("div",{className:"settings-section__header",children:[t.jsx("h2",{className:"settings-section__title",children:" Tarifs Premium"}),t.jsx("p",{className:"settings-section__description",children:"Montants des abonnements en FCFA"})]}),t.jsxs("div",{className:"settings-grid",children:[t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Accs illimit 3 mois (FCFA)"}),t.jsx("input",{type:"number",className:"admin-input",value:e.premium3m,onChange:S=>_("premium3m",parseInt(S.target.value)||0),min:0,step:500})]}),t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Accs illimit 6 mois (FCFA)"}),t.jsx("input",{type:"number",className:"admin-input",value:e.premium6m,onChange:S=>_("premium6m",parseInt(S.target.value)||0),min:0,step:1e3}),t.jsxs("span",{className:"settings-hint",children:["conomie vs 23 mois : ",(e.premium3m*2-e.premium6m).toLocaleString("fr-FR")," FCFA"]})]}),t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Accs illimit 1 an (FCFA)"}),t.jsx("input",{type:"number",className:"admin-input",value:e.premium1an,onChange:S=>_("premium1an",parseInt(S.target.value)||0),min:0,step:1e3}),t.jsxs("span",{className:"settings-hint",children:["conomie vs 43 mois : ",(e.premium3m*4-e.premium1an).toLocaleString("fr-FR")," FCFA"]})]})]})]}),t.jsxs("div",{className:"settings-section",children:[t.jsxs("div",{className:"settings-section__header",children:[t.jsx("h2",{className:"settings-section__title",children:" Paramtres des Quiz"}),t.jsx("p",{className:"settings-section__description",children:"Valeurs par dfaut pour la cration de quiz"})]}),t.jsxs("div",{className:"settings-grid",children:[t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Dure par dfaut (minutes)"}),t.jsx("input",{type:"number",className:"admin-input",value:e.quizDureeDefaut,onChange:S=>_("quizDureeDefaut",parseInt(S.target.value)||0),min:1,max:120})]}),t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Note minimale pour russir (/20)"}),t.jsx("input",{type:"number",className:"admin-input",value:e.quizNoteMinimale,onChange:S=>_("quizNoteMinimale",parseInt(S.target.value)||0),min:0,max:20})]}),t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Tentatives max par quiz"}),t.jsx("input",{type:"number",className:"admin-input",value:e.quizTentativesMax,onChange:S=>_("quizTentativesMax",parseInt(S.target.value)||0),min:1,max:10}),t.jsx("span",{className:"settings-hint",children:"0 = illimit"})]})]})]}),t.jsxs("div",{className:"settings-section",children:[t.jsxs("div",{className:"settings-section__header",children:[t.jsx("h2",{className:"settings-section__title",children:" Cahier de Textes"}),t.jsx("p",{className:"settings-section__description",children:"Options des fonctionnalits du cahier de textes pour les professeurs"})]}),t.jsx("div",{className:"settings-grid",children:t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Export PDF du cahier"}),t.jsxs("div",{className:"settings-toggle-wrapper",children:[t.jsx("button",{className:`settings-toggle ${e.cahierPdfExport?"settings-toggle--active":""}`,onClick:()=>_("cahierPdfExport",!e.cahierPdfExport),children:t.jsx("span",{className:"settings-toggle__knob"})}),t.jsx("span",{className:`settings-toggle-label ${e.cahierPdfExport?"settings-toggle-label--active":""}`,children:e.cahierPdfExport?" Export PDF activ":" Export PDF dsactiv"})]}),t.jsx("span",{className:"settings-hint",children:'Affiche le bouton " PDF" dans les cahiers de textes des professeurs'})]})})]}),t.jsxs("div",{className:"settings-section",children:[t.jsxs("div",{className:"settings-section__header",children:[t.jsx("h2",{className:"settings-section__title",children:" Mode Maintenance"}),t.jsx("p",{className:"settings-section__description",children:"Activer pour bloquer l'accs au site pendant les mises  jour"})]}),t.jsxs("div",{className:"settings-grid",children:[t.jsxs("div",{className:"settings-field",children:[t.jsx("label",{className:"settings-label",children:"Mode maintenance"}),t.jsxs("div",{className:"settings-toggle-wrapper",children:[t.jsx("button",{className:`settings-toggle ${e.maintenanceMode?"settings-toggle--active":""}`,onClick:()=>_("maintenanceMode",!e.maintenanceMode),children:t.jsx("span",{className:"settings-toggle__knob"})}),t.jsx("span",{className:`settings-toggle-label ${e.maintenanceMode?"settings-toggle-label--active":""}`,children:e.maintenanceMode?" Maintenance active":" Site en ligne"})]})]}),t.jsxs("div",{className:"settings-field settings-field--full",children:[t.jsx("label",{className:"settings-label",children:"Message affich aux visiteurs"}),t.jsx("textarea",{className:"admin-input admin-textarea",rows:3,value:e.maintenanceMessage,onChange:S=>_("maintenanceMessage",S.target.value),disabled:!e.maintenanceMode})]})]})]}),t.jsxs("div",{className:"settings-actions",children:[t.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:E,children:" Rinitialiser aux valeurs par dfaut"}),t.jsx("button",{className:"admin-btn admin-btn-primary",onClick:C,disabled:!b||u,children:u?" Sauvegarde...":" Sauvegarder les modifications"})]})]})},wR=["#000000","#1f2937","#374151","#6b7280","#dc2626","#ef4444","#f97316","#d97706","#eab308","#65a30d","#059669","#14b8a6","#2563eb","#3b82f6","#0891b2","#7c3aed","#db2777","#ec4899","#be185d","#9333ea","#ffffff","#f3f4f6","#fef3c7","#dbeafe"],CR=["#fef08a","#fde68a","#fef3c7","#bbf7d0","#d1fae5","#a7f3d0","#bfdbfe","#dbeafe","#c7d2fe","#fecaca","#fee2e2","#fde8e8","#e9d5ff","#f3e8ff","#d8b4fe","#fed7aa","#ffedd5","#fce7f3","transparent","#ffffff"],ER=["#f0fdf4","#ecfdf5","#f0f9ff","#eff6ff","#faf5ff","#fdf2f8","#fff7ed","#fffbeb","#fef2f2","#f9fafb","#f3f4f6","transparent"],AR=[{tag:"p",label:" Paragraphe"},{tag:"h1",label:"H1  Titre 1"},{tag:"h2",label:"H2  Titre 2"},{tag:"h3",label:"H3  Titre 3"},{tag:"h4",label:"H4  Titre 4"},{tag:"pre",label:"</> Code"},{tag:"blockquote",label:" Citation"}],zR=[{value:"1",label:"Trs petit"},{value:"2",label:"Petit"},{value:"3",label:"Normal"},{value:"4",label:"Grand"},{value:"5",label:"Trs grand"},{value:"6",label:"norme"}],kR=["headinglevel","fontsize","separator","bold","italic","underline","strikethrough","separator","color","highlight","blockBg","separator","alignLeft","alignCenter","alignRight","alignJustify","separator","bulletList","numberedList","indent","outdent","separator","subscript","superscript","link","clean"],ja=({value:e,onChange:r,placeholder:n="Saisissez votre texte...",minHeight:a=120,maxHeight:l=500,toolbar:o=kR,disabled:u=!1,className:d=""})=>{const m=g.useRef(null),p=g.useRef(!1),[h,v]=g.useState(!1),[b,x]=g.useState(!1),[j,_]=g.useState(!1);g.useEffect(()=>{m.current&&!p.current&&m.current.innerHTML!==e&&(m.current.innerHTML=e||""),p.current=!1},[e]);const C=g.useCallback(()=>{m.current&&(p.current=!0,r(m.current.innerHTML))},[r]),w=g.useCallback((k,M)=>{m.current?.focus(),document.execCommand(k,!1,M),C()},[C]),E=g.useCallback(k=>{m.current?.focus();const M=window.getSelection();if(!M||!m.current)return;let D=M.anchorNode;for(;D&&D!==m.current;){if(D.nodeType===Node.ELEMENT_NODE){const $=D,B=$.tagName;if(["P","DIV","H1","H2","H3","H4","LI","BLOCKQUOTE","PRE"].includes(B)){$.style.backgroundColor=k==="transparent"?"":k,C();return}}D=D.parentNode}document.execCommand("hiliteColor",!1,k==="transparent"?"transparent":k),C()},[C]),S=g.useCallback(()=>{const k=prompt("URL du lien :","https://");k&&w("createLink",k)},[w]),A=g.useCallback(()=>{w("removeFormat"),w("formatBlock","p")},[w]);g.useEffect(()=>{const k=()=>{v(!1),x(!1),_(!1)};return document.addEventListener("click",k),()=>document.removeEventListener("click",k)},[]);const z=(k,M)=>{switch(k){case"separator":return t.jsx("span",{className:"rte-separator"},`sep-${M}`);case"bold":return t.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:D=>{D.preventDefault(),w("bold")},children:t.jsx("strong",{children:"G"})},"bold");case"italic":return t.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:D=>{D.preventDefault(),w("italic")},children:t.jsx("em",{children:"I"})},"italic");case"underline":return t.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:D=>{D.preventDefault(),w("underline")},children:t.jsx("u",{children:"S"})},"underline");case"strikethrough":return t.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:D=>{D.preventDefault(),w("strikeThrough")},children:t.jsx("s",{children:"R"})},"strike");case"headinglevel":return t.jsxs("select",{className:"rte-select",title:"Niveau de titre",defaultValue:"",onChange:D=>{const $=D.target.value;m.current?.focus(),document.execCommand("formatBlock",!1,$),C(),D.target.value=""},children:[t.jsx("option",{value:"",disabled:!0,children:"Titre"}),AR.map(D=>t.jsx("option",{value:D.tag,children:D.label},D.tag))]},"headinglevel");case"fontsize":return t.jsxs("select",{className:"rte-select",title:"Taille de police",defaultValue:"",onChange:D=>{const $=D.target.value;m.current?.focus(),document.execCommand("fontSize",!1,$),C(),D.target.value=""},children:[t.jsx("option",{value:"",disabled:!0,children:"Taille"}),zR.map(D=>t.jsx("option",{value:D.value,children:D.label},D.value))]},"fontsize");case"color":return t.jsxs("span",{className:"rte-dropdown-wrapper",onClick:D=>D.stopPropagation(),children:[t.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{v(D=>!D),x(!1),_(!1)},children:t.jsx("span",{style:{borderBottom:"3px solid #dc2626",paddingBottom:1},children:"A"})}),h&&t.jsx("div",{className:"rte-color-picker rte-color-picker--grid",children:wR.map(D=>t.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:D,border:D==="#ffffff"||D==="#f3f4f6"?"1px solid #d1d5db":"1px solid transparent"},title:D,onMouseDown:$=>{$.preventDefault(),w("foreColor",D),v(!1)}},D))})]},"color");case"highlight":return t.jsxs("span",{className:"rte-dropdown-wrapper",onClick:D=>D.stopPropagation(),children:[t.jsx("button",{type:"button",className:"rte-btn",title:"Fond de texte (surlignage)",onClick:()=>{x(D=>!D),v(!1),_(!1)},children:t.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px",borderRadius:2},children:"A"})}),b&&t.jsx("div",{className:"rte-color-picker rte-color-picker--grid",children:CR.map((D,$)=>t.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:D==="transparent"?"#fff":D,border:"1px solid #d1d5db"},title:D==="transparent"?"Aucun fond":D,onMouseDown:B=>{B.preventDefault(),w("hiliteColor",D==="transparent"?"transparent":D),x(!1)},children:D==="transparent"?t.jsx("span",{style:{fontSize:10,color:"#6b7280"},children:""}):null},$))})]},"highlight");case"blockBg":return t.jsxs("span",{className:"rte-dropdown-wrapper",onClick:D=>D.stopPropagation(),children:[t.jsx("button",{type:"button",className:"rte-btn",title:"Trame de fond du paragraphe",onClick:()=>{_(D=>!D),v(!1),x(!1)},children:t.jsx("span",{style:{background:"linear-gradient(135deg, #dbeafe 40%, #d1fae5 100%)",padding:"0 3px",borderRadius:2},children:""})}),j&&t.jsx("div",{className:"rte-color-picker rte-color-picker--grid",children:ER.map((D,$)=>t.jsx("button",{type:"button",className:"rte-color-swatch rte-color-swatch--block",style:{backgroundColor:D==="transparent"?"#fff":D,border:"1px solid #d1d5db"},title:D==="transparent"?"Aucun fond":"Fond de bloc",onMouseDown:B=>{B.preventDefault(),E(D),_(!1)},children:D==="transparent"?t.jsx("span",{style:{fontSize:10,color:"#6b7280"},children:""}):null},$))})]},"blockbg");case"alignLeft":return t.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:D=>{D.preventDefault(),w("justifyLeft")},children:t.jsx("svg",{width:"14",height:"14",fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M2 12.5a.5.5 0 010-1h7a.5.5 0 010 1H2zm0-3a.5.5 0 010-1h11a.5.5 0 010 1H2zm0-3a.5.5 0 010-1h7a.5.5 0 010 1H2zm0-3a.5.5 0 010-1h11a.5.5 0 010 1H2z"})})},"alignL");case"alignCenter":return t.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:D=>{D.preventDefault(),w("justifyCenter")},children:t.jsx("svg",{width:"14",height:"14",fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M4 12.5a.5.5 0 010-1h8a.5.5 0 010 1H4zm-2-3a.5.5 0 010-1h12a.5.5 0 010 1H2zm2-3a.5.5 0 010-1h8a.5.5 0 010 1H4zm-2-3a.5.5 0 010-1h12a.5.5 0 010 1H2z"})})},"alignC");case"alignRight":return t.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:D=>{D.preventDefault(),w("justifyRight")},children:t.jsx("svg",{width:"14",height:"14",fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M14 12.5a.5.5 0 010-1H7a.5.5 0 010 1h7zm0-3a.5.5 0 010-1H3a.5.5 0 010 1h11zm0-3a.5.5 0 010-1H7a.5.5 0 010 1h7zm0-3a.5.5 0 010-1H3a.5.5 0 010 1h11z"})})},"alignR");case"alignJustify":return t.jsx("button",{type:"button",className:"rte-btn",title:"Justifier",onMouseDown:D=>{D.preventDefault(),w("justifyFull")},children:t.jsx("svg",{width:"14",height:"14",fill:"currentColor",viewBox:"0 0 16 16",children:t.jsx("path",{d:"M2 12.5a.5.5 0 010-1h12a.5.5 0 010 1H2zm0-3a.5.5 0 010-1h12a.5.5 0 010 1H2zm0-3a.5.5 0 010-1h12a.5.5 0 010 1H2zm0-3a.5.5 0 010-1h12a.5.5 0 010 1H2z"})})},"alignJ");case"bulletList":return t.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:D=>{D.preventDefault(),w("insertUnorderedList")},children:""},"ul");case"numberedList":return t.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:D=>{D.preventDefault(),w("insertOrderedList")},children:"1"},"ol");case"indent":return t.jsx("button",{type:"button",className:"rte-btn",title:"Augmenter le retrait",onMouseDown:D=>{D.preventDefault(),w("indent")},children:""},"indent");case"outdent":return t.jsx("button",{type:"button",className:"rte-btn",title:"Diminuer le retrait",onMouseDown:D=>{D.preventDefault(),w("outdent")},children:""},"outdent");case"blockquote":return t.jsx("button",{type:"button",className:"rte-btn",title:"Citation",onMouseDown:D=>{D.preventDefault(),w("formatBlock","blockquote")},children:""},"blockquote");case"subscript":return t.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:D=>{D.preventDefault(),w("subscript")},children:["X",t.jsx("sub",{children:""})]},"sub");case"superscript":return t.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:D=>{D.preventDefault(),w("superscript")},children:["X",t.jsx("sup",{children:""})]},"sup");case"link":return t.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:D=>{D.preventDefault(),S()},children:""},"link");case"clean":return t.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Effacer le formatage",onMouseDown:D=>{D.preventDefault(),A()},children:""},"clean");default:return null}};return t.jsxs("div",{className:`rte-container ${u?"rte-disabled":""} ${d}`,children:[!u&&t.jsx("div",{className:"rte-toolbar",children:o.map((k,M)=>z(k,M))}),t.jsx("div",{ref:m,className:"rte-editor",contentEditable:!u,onInput:C,onBlur:C,"data-placeholder":n,style:{minHeight:`${a}px`,maxHeight:`${l}px`},suppressContentEditableWarning:!0})]})},fo={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},_m={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},Nm={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function Zt(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function OR(e,r){const n={id:Zt("q"),type:e,enonce:"",difficulte:"moyen",points:2,ordre:r};switch(e){case"qcm_unique":return{...n,typeData:{options:[{id:Zt("opt"),texte:"",isCorrect:!0},{id:Zt("opt"),texte:"",isCorrect:!1},{id:Zt("opt"),texte:"",isCorrect:!1},{id:Zt("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...n,typeData:{options:[{id:Zt("opt"),texte:"",isCorrect:!0},{id:Zt("opt"),texte:"",isCorrect:!0},{id:Zt("opt"),texte:"",isCorrect:!1},{id:Zt("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...n,typeData:{items:[{id:Zt("item"),texte:"",ordreCorrect:1},{id:Zt("item"),texte:"",ordreCorrect:2},{id:Zt("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...n,typeData:{paires:[{id:Zt("pair"),gauche:"",droite:""},{id:Zt("pair"),gauche:"",droite:""},{id:Zt("pair"),gauche:"",droite:""}]}};case"essai":return{...n,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const cu="quizzes_v2",DR="quiz_results_v2";async function PR(e,r){try{const n=await Dt(_e(Q,cu),{...e,auteurId:r,createdAt:Et(),updatedAt:Et()});return console.log(" Quiz avanc cr :",n.id),n.id}catch(n){throw console.error(" Erreur cration quiz avanc :",n),new Error("Impossible de crer le quiz")}}async function MR(e,r){try{const n=je(Q,cu,e);await Ge(n,{...r,updatedAt:Et()}),console.log(" Quiz avanc mis  jour :",e)}catch(n){throw console.error(" Erreur mise  jour quiz :",n),new Error("Impossible de mettre  jour le quiz")}}async function TR(e){try{await Gr(je(Q,cu,e)),console.log(" Quiz avanc supprim :",e)}catch(r){throw console.error(" Erreur suppression quiz :",r),new Error("Impossible de supprimer le quiz")}}async function QA(e){try{const r=await gt(je(Q,cu,e));if(!r.exists())return null;const n=r.data();return{id:r.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}}catch(r){throw console.error(" Erreur rcupration quiz :",r),new Error("Impossible de rcuprer le quiz")}}async function YA(){try{const e=Ee(_e(Q,cu),Ve("createdAt","desc"));return(await Ce(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||void 0}})}catch(e){throw console.error(" Erreur rcupration tous les quiz :",e),new Error("Impossible de rcuprer les quiz")}}function qR(e,r){let n=0,a=0;const l=[];for(const o of e.questions){a+=o.points;const u=r.find(v=>v.questionId===o.id);if(!u){l.push({questionId:o.id,type:o.type,pointsObtenus:0,pointsMax:o.points,isCorrect:!1});continue}let d=0,m=!1,p=!1,h=!1;switch(o.type){case"qcm_unique":{const b=o.typeData.options.find(x=>x.isCorrect);b&&u.selectedOptionId===b.id&&(d=o.points,m=!0);break}case"qcm_multiple":{const v=o.typeData,b=v.options.filter(w=>w.isCorrect).map(w=>w.id),x=v.options.filter(w=>!w.isCorrect).map(w=>w.id),j=u.selectedOptionIds||[],_=j.some(w=>x.includes(w)),C=j.filter(w=>b.includes(w)).length;!_&&C===b.length?(d=o.points,m=!0):v.scoringPartiel&&C>0&&!_&&(d=Math.round(o.points*C/b.length*100)/100,p=!0);break}case"drag_drop":{const v=o.typeData,b=u.ordrePropose||[],x=v.items.sort((_,C)=>_.ordreCorrect-C.ordreCorrect).map(_=>_.id);let j=0;for(let _=0;_<x.length;_++)b[_]===x[_]&&j++;j===x.length?(d=o.points,m=!0):j>0&&(d=Math.round(o.points*j/x.length*100)/100,p=!0);break}case"mise_en_relation":{const v=o.typeData,b=u.relationsProposees||{};let x=0;for(const j of v.paires)b[j.id]===j.id&&x++;x===v.paires.length?(d=o.points,m=!0):x>0&&(d=Math.round(o.points*x/v.paires.length*100)/100,p=!0);break}case"essai":{const v=o.typeData,b=u.texteReponse||"";if(v.correctionMode==="mots_cles"&&v.motsCles.length>0){const x=b.toLowerCase().replace(/<[^>]*>/g,"");let j=0,_=0;for(const C of v.motsCles)j+=C.poids,x.includes(C.mot.toLowerCase())&&(_+=C.poids);j>0&&(d=Math.round(o.points*_/j*100)/100,m=_===j,p=_>0&&_<j)}else h=!0;break}}n+=d,l.push({questionId:o.id,type:o.type,pointsObtenus:d,pointsMax:o.points,isCorrect:m,isPartiel:p,correctionManuelleRequise:h})}return{score:n,scoreMax:a,details:l}}async function RR(e,r,n,a){try{const{score:l,scoreMax:o,details:u}=qR(e,n),d=o>0?Math.round(l/o*20*100)/100:0,m=u.some(v=>v.correctionManuelleRequise),p={quizId:e.id,userId:r,reponses:n,score:l,scoreMax:o,note20:d,tempsEcoule:a,datePassage:new Date,reussi:d>=e.noteMinimale,correctionManuelle:m,detailsParQuestion:u},h=await Dt(_e(Q,DR),{...p,datePassage:Et()});return console.log(" Rsultat quiz enregistr :",h.id),{id:h.id,...p}}catch(l){throw console.error(" Erreur soumission quiz :",l),new Error("Impossible d'enregistrer le rsultat")}}const IR=({existingQuiz:e,disciplines:r,auteurId:n,onSave:a,onCancel:l})=>{const[o,u]=g.useState(e?.titre||""),[d,m]=g.useState(e?.description||""),[p,h]=g.useState(e?.disciplineId||""),[v,b]=g.useState(e?.duree||30),[x,j]=g.useState(e?.isPremium??!0),[_,C]=g.useState(e?.noteMinimale||10),[w,E]=g.useState(e?.melangerQuestions??!1),[S,A]=g.useState(e?.melangerOptions??!1),[z,k]=g.useState(e?.afficherCorrection??!0),[M,D]=g.useState(e?.tentativesMax||0),[$,B]=g.useState(e?.questions||[]),[H,T]=g.useState(null),[Y,J]=g.useState(!1),[P,q]=g.useState(null),[U,I]=g.useState(!1),te=g.useCallback(F=>{const ve=OR(F,$.length+1);B(Pe=>[...Pe,ve]),T($.length),I(!1)},[$.length]),L=g.useCallback(F=>{confirm("Supprimer cette question ?")&&(B(ve=>ve.filter((ue,ee)=>ee!==F).map((ue,ee)=>({...ue,ordre:ee+1}))),T(null))},[]),Z=g.useCallback(F=>{B(ve=>{const Pe=ve[F],ue={...JSON.parse(JSON.stringify(Pe)),id:Zt("q"),ordre:ve.length+1};return[...ve,ue]})},[]),W=g.useCallback((F,ve)=>{B(Pe=>{const ue=[...Pe],ee=ve==="up"?F-1:F+1;return ee<0||ee>=ue.length?Pe:([ue[F],ue[ee]]=[ue[ee],ue[F]],ue.map((V,de)=>({...V,ordre:de+1})))}),T(ve==="up"?H!==null?H-1:null:H!==null?H+1:null)},[H]),ce=g.useCallback((F,ve)=>{B(Pe=>Pe.map((ue,ee)=>ee===F?{...ue,...ve}:ue))},[]),xe=async()=>{if(!o.trim()){q("Le titre est obligatoire");return}if(!p){q("Slectionnez une discipline");return}if($.length===0){q("Ajoutez au moins une question");return}for(let F=0;F<$.length;F++)if(!$[F].enonce.replace(/<[^>]*>/g,"").trim()){q(`La question ${F+1} n'a pas d'nonc`),T(F);return}q(null),J(!0);try{const F={disciplineId:p,titre:o.trim(),description:d.trim()||void 0,questions:$,duree:v,isPremium:x,noteMinimale:_,melangerQuestions:w,melangerOptions:S,afficherCorrection:z,tentativesMax:M};let ve;e?.id?(await MR(e.id,F),ve=e.id):ve=await PR(F,n),a?.(ve)}catch(F){q(F.message||"Erreur lors de la sauvegarde")}finally{J(!1)}},he=$.reduce((F,ve)=>F+ve.points,0);return t.jsxs("div",{className:"quiz-editor",children:[t.jsxs("div",{className:"quiz-editor__header",children:[t.jsx("h2",{children:e?" Modifier le quiz":" Nouveau quiz avanc"}),t.jsxs("div",{className:"quiz-editor__header-actions",children:[t.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",he," pts"]}),t.jsxs("span",{className:"quiz-editor__count-badge",children:[$.length," question",$.length>1?"s":""]})]})]}),P&&t.jsxs("div",{className:"quiz-editor__error",children:[" ",P,t.jsx("button",{onClick:()=>q(null),children:""})]}),t.jsxs("div",{className:"quiz-editor__section",children:[t.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),t.jsxs("div",{className:"quiz-editor__grid",children:[t.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[t.jsx("label",{children:"Titre du quiz *"}),t.jsx("input",{type:"text",value:o,onChange:F=>u(F.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),t.jsxs("div",{className:"quiz-editor__field",children:[t.jsx("label",{children:"Discipline *"}),t.jsxs("select",{value:p,onChange:F=>h(F.target.value),className:"quiz-editor__select",children:[t.jsx("option",{value:"",children:" Slectionner "}),r.map(F=>t.jsxs("option",{value:F.id,children:[F.nom," (",F.classe,")"]},F.id))]})]}),t.jsxs("div",{className:"quiz-editor__field",children:[t.jsx("label",{children:"Dure (minutes)"}),t.jsx("input",{type:"number",value:v,onChange:F=>b(Number(F.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),t.jsxs("div",{className:"quiz-editor__field",children:[t.jsx("label",{children:"Note minimale (/20)"}),t.jsx("input",{type:"number",value:_,onChange:F=>C(Number(F.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),t.jsxs("div",{className:"quiz-editor__field",children:[t.jsx("label",{children:"Tentatives max (0 = illimit)"}),t.jsx("input",{type:"number",value:M,onChange:F=>D(Number(F.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),t.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[t.jsx("label",{children:"Description (optionnel)"}),t.jsx(ja,{value:d,onChange:m,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),t.jsxs("div",{className:"quiz-editor__options-row",children:[t.jsxs("label",{className:"quiz-editor__checkbox",children:[t.jsx("input",{type:"checkbox",checked:x,onChange:F=>j(F.target.checked)}),t.jsx("span",{children:" Premium"})]}),t.jsxs("label",{className:"quiz-editor__checkbox",children:[t.jsx("input",{type:"checkbox",checked:w,onChange:F=>E(F.target.checked)}),t.jsx("span",{children:" Mlanger les questions"})]}),t.jsxs("label",{className:"quiz-editor__checkbox",children:[t.jsx("input",{type:"checkbox",checked:S,onChange:F=>A(F.target.checked)}),t.jsx("span",{children:" Mlanger les options QCM"})]}),t.jsxs("label",{className:"quiz-editor__checkbox",children:[t.jsx("input",{type:"checkbox",checked:z,onChange:F=>k(F.target.checked)}),t.jsx("span",{children:" Afficher la correction"})]})]})]}),t.jsxs("div",{className:"quiz-editor__section",children:[t.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),t.jsx("div",{className:"quiz-editor__questions-list",children:$.map((F,ve)=>t.jsx(LR,{question:F,index:ve,isActive:H===ve,onToggle:()=>T(H===ve?null:ve),onUpdate:Pe=>ce(ve,Pe),onDelete:()=>L(ve),onDuplicate:()=>Z(ve),onMoveUp:()=>W(ve,"up"),onMoveDown:()=>W(ve,"down"),isFirst:ve===0,isLast:ve===$.length-1},F.id))}),t.jsxs("div",{className:"quiz-editor__add-wrapper",children:[t.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>I(!U),children:"+ Ajouter une question"}),U&&t.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(fo).map(F=>t.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>te(F),children:[t.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:Nm[F]},children:_m[F]}),t.jsx("span",{children:fo[F]})]},F))})]})]}),t.jsxs("div",{className:"quiz-editor__actions",children:[t.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:l,disabled:Y,children:"Annuler"}),t.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:xe,disabled:Y||$.length===0,children:Y?" Sauvegarde...":e?" Mettre  jour":" Crer le quiz"})]})]})},LR=({question:e,index:r,isActive:n,onToggle:a,onUpdate:l,onDelete:o,onDuplicate:u,onMoveUp:d,onMoveDown:m,isFirst:p,isLast:h})=>{const v=Nm[e.type],b=_m[e.type],x=fo[e.type],j=_=>{const C=_.replace(/<[^>]*>/g,"").trim();return C.length>80?C.substring(0,80)+"...":C||"(sans nonc)"};return t.jsxs("div",{className:`question-editor ${n?"question-editor--active":""}`,style:{borderLeftColor:v},children:[t.jsxs("div",{className:"question-editor__header",onClick:a,children:[t.jsxs("div",{className:"question-editor__header-left",children:[t.jsx("span",{className:"question-editor__number",children:r+1}),t.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:v},children:[b," ",x]}),!n&&t.jsx("span",{className:"question-editor__preview",children:j(e.enonce)})]}),t.jsxs("div",{className:"question-editor__header-right",children:[t.jsxs("span",{className:"question-editor__points",children:[e.points," pts"]}),t.jsx("span",{className:"question-editor__toggle",children:n?"":""})]})]}),n&&t.jsxs("div",{className:"question-editor__body",children:[t.jsxs("div",{className:"question-editor__toolbar",children:[t.jsx("button",{type:"button",onClick:d,disabled:p,title:"Monter",children:""}),t.jsx("button",{type:"button",onClick:m,disabled:h,title:"Descendre",children:""}),t.jsx("button",{type:"button",onClick:u,title:"Dupliquer",children:""}),t.jsx("button",{type:"button",onClick:o,className:"btn-danger",title:"Supprimer",children:""})]}),t.jsxs("div",{className:"question-editor__field",children:[t.jsx("label",{children:"nonc de la question *"}),t.jsx(ja,{value:e.enonce,onChange:_=>l({enonce:_}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),t.jsxs("div",{className:"question-editor__params",children:[t.jsxs("div",{className:"question-editor__param",children:[t.jsx("label",{children:"Difficult"}),t.jsxs("select",{value:e.difficulte,onChange:_=>l({difficulte:_.target.value}),children:[t.jsx("option",{value:"facile",children:" Facile"}),t.jsx("option",{value:"moyen",children:" Moyen"}),t.jsx("option",{value:"difficile",children:" Difficile"})]})]}),t.jsxs("div",{className:"question-editor__param",children:[t.jsx("label",{children:"Points"}),t.jsx("input",{type:"number",value:e.points,onChange:_=>l({points:Number(_.target.value)}),min:1,max:20})]})]}),t.jsxs("div",{className:"question-editor__type-specific",children:[e.type==="qcm_unique"&&t.jsx($R,{data:e.typeData,onChange:_=>l({typeData:_})}),e.type==="qcm_multiple"&&t.jsx(BR,{data:e.typeData,onChange:_=>l({typeData:_})}),e.type==="drag_drop"&&t.jsx(UR,{data:e.typeData,onChange:_=>l({typeData:_})}),e.type==="mise_en_relation"&&t.jsx(FR,{data:e.typeData,onChange:_=>l({typeData:_})}),e.type==="essai"&&t.jsx(GR,{data:e.typeData,onChange:_=>l({typeData:_})})]}),t.jsxs("div",{className:"question-editor__field",children:[t.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),t.jsx(ja,{value:e.explication||"",onChange:_=>l({explication:_}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},$R=({data:e,onChange:r})=>{const n=(o,u)=>{const d=e.options.map((m,p)=>p===o?{...m,...u}:u.isCorrect===!0?{...m,isCorrect:!1}:m);r({options:d})},a=()=>{e.options.length>=6||r({options:[...e.options,{id:Zt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||r({options:e.options.filter((u,d)=>d!==o)})};return t.jsxs("div",{className:"type-editor",children:[t.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),e.options.map((o,u)=>t.jsxs("div",{className:"type-editor__option-row",children:[t.jsx("input",{type:"radio",name:`qcm_unique_${o.id}`,checked:o.isCorrect,onChange:()=>n(u,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),t.jsx("div",{className:"type-editor__option-text",children:t.jsx(ja,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&t.jsx("span",{className:"type-editor__correct-badge",children:""}),t.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,title:"Supprimer cette option",children:""})]},o.id)),e.options.length<6&&t.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"})]})},BR=({data:e,onChange:r})=>{const n=(o,u)=>{const d=e.options.map((m,p)=>p===o?{...m,...u}:m);r({...e,options:d})},a=()=>{e.options.length>=8||r({...e,options:[...e.options,{id:Zt("opt"),texte:"",isCorrect:!1}]})},l=o=>{e.options.length<=2||r({...e,options:e.options.filter((u,d)=>d!==o)})};return t.jsxs("div",{className:"type-editor",children:[t.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),e.options.map((o,u)=>t.jsxs("div",{className:"type-editor__option-row",children:[t.jsx("input",{type:"checkbox",checked:o.isCorrect,onChange:d=>n(u,{isCorrect:d.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),t.jsx("div",{className:"type-editor__option-text",children:t.jsx(ja,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`Option ${u+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),o.isCorrect&&t.jsx("span",{className:"type-editor__correct-badge",children:""}),t.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.options.length<=2,children:""})]},o.id)),e.options.length<8&&t.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une option"}),t.jsxs("label",{className:"type-editor__sub-option",children:[t.jsx("input",{type:"checkbox",checked:e.scoringPartiel,onChange:o=>r({...e,scoringPartiel:o.target.checked})}),t.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},UR=({data:e,onChange:r})=>{const n=(o,u)=>{const d=e.items.map((m,p)=>p===o?{...m,...u}:m);r({...e,items:d})},a=()=>{e.items.length>=10||r({...e,items:[...e.items,{id:Zt("item"),texte:"",ordreCorrect:e.items.length+1}]})},l=o=>{if(e.items.length<=2)return;const u=e.items.filter((d,m)=>m!==o).map((d,m)=>({...d,ordreCorrect:m+1}));r({...e,items:u})};return t.jsxs("div",{className:"type-editor",children:[t.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),t.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),t.jsxs("div",{className:"type-editor__field-inline",children:[t.jsx("label",{children:"Consigne :"}),t.jsx("input",{type:"text",value:e.consigneOrdre,onChange:o=>r({...e,consigneOrdre:o.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),e.items.map((o,u)=>t.jsxs("div",{className:"type-editor__drag-row",children:[t.jsx("span",{className:"type-editor__drag-number",children:u+1}),t.jsx("div",{className:"type-editor__option-text",children:t.jsx(ja,{value:o.texte,onChange:d=>n(u,{texte:d}),placeholder:`lment ${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),t.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.items.length<=2,children:""})]},o.id)),e.items.length<10&&t.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter un lment"})]})},FR=({data:e,onChange:r})=>{const n=(o,u)=>{const d=e.paires.map((m,p)=>p===o?{...m,...u}:m);r({paires:d})},a=()=>{e.paires.length>=8||r({paires:[...e.paires,{id:Zt("pair"),gauche:"",droite:""}]})},l=o=>{e.paires.length<=2||r({paires:e.paires.filter((u,d)=>d!==o)})};return t.jsxs("div",{className:"type-editor",children:[t.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),t.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),t.jsxs("div",{className:"type-editor__relation-header",children:[t.jsx("span",{children:"Colonne A (gauche)"}),t.jsx("span",{}),t.jsx("span",{children:"Colonne B (droite)"}),t.jsx("span",{})]}),e.paires.map((o,u)=>t.jsxs("div",{className:"type-editor__relation-row",children:[t.jsx("div",{className:"type-editor__relation-cell",children:t.jsx(ja,{value:o.gauche,onChange:d=>n(u,{gauche:d}),placeholder:`lment A${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),t.jsx("span",{className:"type-editor__relation-arrow",children:""}),t.jsx("div",{className:"type-editor__relation-cell",children:t.jsx(ja,{value:o.droite,onChange:d=>n(u,{droite:d}),placeholder:`lment B${u+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),t.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),disabled:e.paires.length<=2,children:""})]},o.id)),e.paires.length<8&&t.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:a,children:"+ Ajouter une paire"})]})},GR=({data:e,onChange:r})=>{const n=()=>{r({...e,motsCles:[...e.motsCles,{mot:"",poids:1,obligatoire:!1}]})},a=(o,u)=>{const d=e.motsCles.map((m,p)=>p===o?{...m,...u}:m);r({...e,motsCles:d})},l=o=>{r({...e,motsCles:e.motsCles.filter((u,d)=>d!==o)})};return t.jsxs("div",{className:"type-editor",children:[t.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),t.jsxs("div",{className:"type-editor__params-row",children:[t.jsxs("div",{className:"type-editor__param-inline",children:[t.jsx("label",{children:"Mots minimum :"}),t.jsx("input",{type:"number",value:e.nombreMotsMin||"",onChange:o=>r({...e,nombreMotsMin:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),t.jsxs("div",{className:"type-editor__param-inline",children:[t.jsx("label",{children:"Mots maximum :"}),t.jsx("input",{type:"number",value:e.nombreMotsMax||"",onChange:o=>r({...e,nombreMotsMax:Number(o.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),t.jsxs("div",{className:"type-editor__field-inline",children:[t.jsx("label",{children:"Mode de correction :"}),t.jsxs("select",{value:e.correctionMode,onChange:o=>r({...e,correctionMode:o.target.value}),children:[t.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),t.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),t.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(e.correctionMode==="mots_cles"||e.correctionMode==="semi_auto")&&t.jsxs("div",{className:"type-editor__keywords",children:[t.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),e.motsCles.map((o,u)=>t.jsxs("div",{className:"type-editor__keyword-row",children:[t.jsx("input",{type:"text",value:o.mot,onChange:d=>a(u,{mot:d.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),t.jsxs("select",{value:o.poids,onChange:d=>a(u,{poids:Number(d.target.value)}),className:"type-editor__keyword-weight",children:[t.jsx("option",{value:1,children:"Poids 1"}),t.jsx("option",{value:2,children:"Poids 2"}),t.jsx("option",{value:3,children:"Poids 3"}),t.jsx("option",{value:4,children:"Poids 4"}),t.jsx("option",{value:5,children:"Poids 5"})]}),t.jsxs("label",{className:"type-editor__keyword-required",children:[t.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:d=>a(u,{obligatoire:d.target.checked})}),t.jsx("span",{children:"Obligatoire"})]}),t.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>l(u),children:""})]},u)),t.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un mot-cl"})]}),t.jsxs("div",{className:"type-editor__field-block",children:[t.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),t.jsx(ja,{value:e.reponseModele||"",onChange:o=>r({...e,reponseModele:o}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},X1=()=>{const{quizId:e}=yn(),r=Ze(),{currentUser:n}=Ke(),[a,l]=g.useState([]),[o,u]=g.useState(void 0),[d,m]=g.useState(!0),[p,h]=g.useState(null);return g.useEffect(()=>{(async()=>{try{m(!0);const b=await is.getAll();if(l(b.map(x=>({id:x.id,nom:x.nom,classe:x.classe||""}))),e){const x=await QA(e);x?u(x):h("Quiz introuvable")}}catch(b){console.error("Erreur chargement donnes:",b),h(b.message||"Erreur de chargement")}finally{m(!1)}})()},[e]),d?t.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:t.jsx("p",{children:" Chargement..."})}):p?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsxs("p",{style:{color:"#dc2626"},children:[" ",p]}),t.jsx("button",{onClick:()=>r(-1),children:" Retour"})]}):t.jsx(IR,{existingQuiz:o?{...o,id:o.id}:void 0,disciplines:a,auteurId:n?.uid||"",onSave:v=>{alert(" Quiz sauvegard avec succs !"),r("/admin/quiz")},onCancel:()=>r(-1)})},HR=()=>{const e=Ze(),{currentUser:r}=Ke(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState(null);g.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),d(null);const _=await YA();a(_)}catch(_){console.error("Erreur chargement quiz:",_),d("Impossible de charger les quiz")}finally{o(!1)}},v=async _=>{try{await TR(_),a(C=>C.filter(w=>w.id!==_)),p(null)}catch(C){console.error("Erreur suppression:",C),alert("Erreur lors de la suppression : "+C.message)}},b=_=>{const C={};return _.questions.forEach(w=>{C[w.type]=(C[w.type]||0)+1}),Object.entries(C).map(([w,E])=>`${E} ${fo[w]||w}`).join(", ")},x=_=>_?(_.toDate?_.toDate():new Date(_)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",j=_=>_.questions.reduce((C,w)=>C+w.points,0);return t.jsxs("div",{style:{padding:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),t.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[n.length," quiz cr",n.length!==1?"s":""]})]}),t.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),u&&t.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",u,t.jsx("button",{onClick:h,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),l&&t.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!l&&n.length===0&&!u&&t.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),t.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),t.jsx("button",{onClick:()=>e("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!l&&n.length>0&&t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(_=>t.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[t.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[t.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:_.titre}),_.isPremium&&t.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[t.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",_.questions.length," question",_.questions.length!==1?"s":""]}),t.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j(_)," pts"]}),t.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",_.duree," min"]})]}),t.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",b(_)]}),t.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",x(_.createdAt)]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>e(`/quiz-avance/${_.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),t.jsx("button",{onClick:()=>e(`/admin/quiz/modifier/${_.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),t.jsx("button",{onClick:()=>{const C=`${window.location.origin}/quiz-avance/${_.id}`;navigator.clipboard.writeText(C).then(()=>{alert(` Lien copi !

`+C+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),m===_.id?t.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[t.jsx("button",{onClick:()=>v(_.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),t.jsx("button",{onClick:()=>p(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):t.jsx("button",{onClick:()=>p(_.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},_.id))})]})},VR=({quiz:e,userId:r,onComplete:n,onQuit:a})=>{const l=g.useMemo(()=>{let D=[...e.questions];return e.melangerQuestions&&(D=D.sort(()=>Math.random()-.5)),D},[e]),[o,u]=g.useState(0),[d,m]=g.useState(new Map),[p,h]=g.useState(e.duree*60),[v,b]=g.useState(!1),[x,j]=g.useState(null),[_,C]=g.useState(!1),w=g.useRef(Date.now());g.useEffect(()=>{if(x)return;const D=setInterval(()=>{h($=>$<=1?(clearInterval(D),k(),0):$-1)},1e3);return()=>clearInterval(D)},[x]);const E=D=>{const $=Math.floor(D/60),B=D%60;return`${$.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`},S=l[o],A=g.useCallback((D,$)=>{m(B=>{const H=new Map(B),T=H.get(D)||{questionId:D,type:S.type};return H.set(D,{...T,...$}),H})},[S]),z=D=>{D>=0&&D<l.length&&u(D)},k=async()=>{C(!1),b(!0);try{const D=Array.from(d.values()),$=Math.round((Date.now()-w.current)/1e3),B=await RR(e,r,D,$);j(B),n?.(B)}catch(D){alert("Erreur lors de la soumission : "+D.message)}finally{b(!1)}},M=d.size;return x?t.jsx("div",{className:"quiz-player quiz-player--results",children:t.jsxs("div",{className:"quiz-results",children:[t.jsxs("div",{className:`quiz-results__header ${x.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[t.jsx("div",{className:"quiz-results__emoji",children:x.reussi?"":""}),t.jsx("h2",{children:x.reussi?"Flicitations !":"Quiz termin"}),t.jsxs("div",{className:"quiz-results__score",children:[t.jsxs("span",{className:"quiz-results__note",children:[x.note20,"/20"]}),t.jsxs("span",{className:"quiz-results__detail",children:[x.score,"/",x.scoreMax," points"]})]}),t.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",E(x.tempsEcoule)]}),x.correctionManuelle&&t.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),e.afficherCorrection&&t.jsxs("div",{className:"quiz-results__details",children:[t.jsx("h3",{children:" Dtail des rponses"}),l.map((D,$)=>{const B=x.detailsParQuestion.find(H=>H.questionId===D.id);return t.jsxs("div",{className:`quiz-results__question ${B?.isCorrect?"quiz-results__question--correct":B?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[t.jsxs("div",{className:"quiz-results__q-header",children:[t.jsxs("span",{children:["Q",$+1," "," ",t.jsxs("span",{style:{color:Nm[D.type]},children:[_m[D.type]," ",fo[D.type]]})]}),t.jsxs("span",{className:"quiz-results__q-score",children:[B?.pointsObtenus||0,"/",B?.pointsMax||D.points," pts",B?.isCorrect&&" ",B?.isPartiel&&" ",!B?.isCorrect&&!B?.isPartiel&&" "]})]}),t.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:D.enonce}}),D.explication&&t.jsxs("div",{className:"quiz-results__q-explanation",children:[t.jsx("strong",{children:" Explication :"}),t.jsx("div",{dangerouslySetInnerHTML:{__html:D.explication}})]})]},D.id)})]}),t.jsx("div",{className:"quiz-results__actions",children:t.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:a,children:"Retour au tableau de bord"})})]})}):t.jsxs("div",{className:"quiz-player",children:[t.jsxs("div",{className:"quiz-player__topbar",children:[t.jsxs("div",{className:"quiz-player__info",children:[t.jsx("span",{className:"quiz-player__title",children:e.titre}),t.jsxs("span",{className:"quiz-player__progress",children:["Question ",o+1,"/",l.length]})]}),t.jsxs("div",{className:"quiz-player__topbar-right",children:[t.jsxs("span",{className:`quiz-player__timer ${p<60?"quiz-player__timer--danger":p<300?"quiz-player__timer--warning":""}`,children:[" ",E(p)]}),t.jsxs("span",{className:"quiz-player__answered",children:[M,"/",l.length," rpondue",M>1?"s":""]})]})]}),t.jsx("div",{className:"quiz-player__progress-bar",children:t.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(o+1)/l.length*100}%`}})}),t.jsxs("div",{className:"quiz-player__question-area",children:[t.jsxs("div",{className:"quiz-player__question-meta",children:[t.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:Nm[S.type]},children:[_m[S.type]," ",fo[S.type]]}),t.jsxs("span",{className:"quiz-player__points",children:[S.points," point",S.points>1?"s":""]})]}),t.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:S.enonce}}),t.jsxs("div",{className:"quiz-player__answer-area",children:[S.type==="qcm_unique"&&t.jsx(QR,{question:S,reponse:d.get(S.id),onUpdate:D=>A(S.id,D),melangerOptions:e.melangerOptions}),S.type==="qcm_multiple"&&t.jsx(YR,{question:S,reponse:d.get(S.id),onUpdate:D=>A(S.id,D),melangerOptions:e.melangerOptions}),S.type==="drag_drop"&&t.jsx(KR,{question:S,reponse:d.get(S.id),onUpdate:D=>A(S.id,D)}),S.type==="mise_en_relation"&&t.jsx(WR,{question:S,reponse:d.get(S.id),onUpdate:D=>A(S.id,D)}),S.type==="essai"&&t.jsx(XR,{question:S,reponse:d.get(S.id),onUpdate:D=>A(S.id,D)})]})]}),t.jsxs("div",{className:"quiz-player__nav",children:[t.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>z(o-1),disabled:o===0,children:" Prcdent"}),t.jsx("div",{className:"quiz-player__pagination",children:l.map((D,$)=>t.jsx("button",{className:`quiz-player__page-dot ${$===o?"quiz-player__page-dot--current":""} ${d.has(D.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>z($),title:`Question ${$+1}`,children:$+1},D.id))}),o<l.length-1?t.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>z(o+1),children:"Suivant "}):t.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>C(!0),disabled:v,children:v?" Envoi...":" Soumettre le quiz"})]}),_&&t.jsx("div",{className:"quiz-player__modal-overlay",children:t.jsxs("div",{className:"quiz-player__modal",children:[t.jsx("h3",{children:"Soumettre le quiz ?"}),t.jsxs("p",{children:["Vous avez rpondu  ",t.jsx("strong",{children:M})," question",M>1?"s":""," sur"," ",t.jsx("strong",{children:l.length}),"."]}),M<l.length&&t.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",l.length-M," question",l.length-M>1?"s":""," sans rponse !"]}),t.jsxs("div",{className:"quiz-player__modal-actions",children:[t.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>C(!1),children:"Continuer le quiz"}),t.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:k,children:"Confirmer la soumission"})]})]})})]})},QR=({question:e,reponse:r,onUpdate:n,melangerOptions:a})=>{const l=e.typeData,o=g.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]);return t.jsx("div",{className:"player-qcm",children:o.map(u=>t.jsxs("label",{className:`player-qcm__option ${r?.selectedOptionId===u.id?"player-qcm__option--selected":""}`,children:[t.jsx("input",{type:"radio",name:`q_${e.id}`,checked:r?.selectedOptionId===u.id,onChange:()=>n({selectedOptionId:u.id})}),t.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:u.texte}})]},u.id))})},YR=({question:e,reponse:r,onUpdate:n,melangerOptions:a})=>{const l=e.typeData,o=g.useMemo(()=>a?[...l.options].sort(()=>Math.random()-.5):l.options,[l.options,a]),u=r?.selectedOptionIds||[],d=m=>{const p=u.includes(m)?u.filter(h=>h!==m):[...u,m];n({selectedOptionIds:p})};return t.jsxs("div",{className:"player-qcm",children:[t.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),o.map(m=>t.jsxs("label",{className:`player-qcm__option ${u.includes(m.id)?"player-qcm__option--selected":""}`,children:[t.jsx("input",{type:"checkbox",checked:u.includes(m.id),onChange:()=>d(m.id)}),t.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:m.texte}})]},m.id))]})},KR=({question:e,reponse:r,onUpdate:n})=>{const a=e.typeData,[l,o]=g.useState(()=>r?.ordrePropose?r.ordrePropose.map(b=>a.items.find(x=>x.id===b)).filter(Boolean):[...a.items].sort(()=>Math.random()-.5)),[u,d]=g.useState(null);g.useEffect(()=>{n({ordrePropose:l.map(b=>b.id)})},[l]);const m=b=>{d(b)},p=(b,x)=>{if(b.preventDefault(),u===null||u===x)return;const j=[...l],[_]=j.splice(u,1);j.splice(x,0,_),o(j),d(x)},h=()=>{d(null)},v=(b,x)=>{const j=x==="up"?b-1:b+1;if(j<0||j>=l.length)return;const _=[...l];[_[b],_[j]]=[_[j],_[b]],o(_)};return t.jsxs("div",{className:"player-dragdrop",children:[t.jsx("p",{className:"player-dragdrop__consigne",children:a.consigneOrdre}),t.jsx("div",{className:"player-dragdrop__list",children:l.map((b,x)=>t.jsxs("div",{className:`player-dragdrop__item ${u===x?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>m(x),onDragOver:j=>p(j,x),onDragEnd:h,children:[t.jsx("span",{className:"player-dragdrop__handle",children:""}),t.jsx("span",{className:"player-dragdrop__number",children:x+1}),t.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:b.texte}}),t.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[t.jsx("button",{type:"button",onClick:()=>v(x,"up"),disabled:x===0,children:""}),t.jsx("button",{type:"button",onClick:()=>v(x,"down"),disabled:x===l.length-1,children:""})]})]},b.id))})]})},WR=({question:e,reponse:r,onUpdate:n})=>{const a=e.typeData,l=g.useMemo(()=>[...a.paires].sort(()=>Math.random()-.5),[a.paires]),[o,u]=g.useState(r?.relationsProposees||{}),[d,m]=g.useState(null);g.useEffect(()=>{n({relationsProposees:o})},[o]);const p=x=>{m(x)},h=x=>{d&&(u(j=>({...j,[d]:x})),m(null))},v=x=>{u(j=>{const _={...j};return delete _[x],_})},b=new Set(Object.values(o));return t.jsxs("div",{className:"player-relation",children:[t.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),t.jsxs("div",{className:"player-relation__columns",children:[t.jsxs("div",{className:"player-relation__col",children:[t.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),a.paires.map(x=>t.jsxs("div",{className:`player-relation__item player-relation__item--left ${d===x.id?"player-relation__item--selected":""} ${o[x.id]?"player-relation__item--matched":""}`,onClick:()=>{o[x.id]?v(x.id):p(x.id)},children:[t.jsx("div",{dangerouslySetInnerHTML:{__html:x.gauche}}),o[x.id]&&t.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]}),t.jsxs("div",{className:"player-relation__col",children:[t.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),l.map(x=>t.jsxs("div",{className:`player-relation__item player-relation__item--right ${b.has(x.id)?"player-relation__item--matched":""} ${d&&!b.has(x.id)?"player-relation__item--clickable":""}`,onClick:()=>{d&&!b.has(x.id)&&h(x.id)},children:[t.jsx("div",{dangerouslySetInnerHTML:{__html:x.droite}}),b.has(x.id)&&t.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]})]})]})},XR=({question:e,reponse:r,onUpdate:n})=>{const a=e.typeData,[l,o]=g.useState(r?.texteReponse||""),u=l.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return g.useEffect(()=>{n({texteReponse:l})},[l]),t.jsxs("div",{className:"player-essai",children:[t.jsxs("div",{className:"player-essai__info",children:[a.nombreMotsMin&&t.jsxs("span",{className:u<a.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",a.nombreMotsMin," mots"]}),a.nombreMotsMax&&t.jsxs("span",{className:u>a.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",a.nombreMotsMax," mots"]}),t.jsxs("span",{className:"player-essai__count",children:[u," mot",u>1?"s":""]})]}),t.jsx("textarea",{className:"player-essai__textarea",value:l,onChange:d=>o(d.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},ZR=()=>{const{quizId:e}=yn(),r=Ze(),{currentUser:n}=Ke(),[a,l]=g.useState(null),[o,u]=g.useState(!0),[d,m]=g.useState(null);return g.useEffect(()=>{(async()=>{if(!e){m("ID du quiz manquant"),u(!1);return}try{const h=await QA(e);if(!h){m("Quiz introuvable");return}if(h.isPremium&&!n?.isPremium){m("Ce quiz est rserv aux abonns Premium");return}l(h)}catch(h){console.error("Erreur chargement quiz:",h),m(h.message||"Impossible de charger le quiz")}finally{u(!1)}})()},[e,n]),o?t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),t.jsx("p",{children:"Chargement du quiz..."})]}):d?t.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:t.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:d}),d.includes("Premium")&&t.jsx("button",{onClick:()=>r("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),t.jsx("button",{onClick:()=>r(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):a?t.jsx(VR,{quiz:a,userId:n?.uid||"",onComplete:p=>{console.log(" Quiz termin  Note:",p.note20,"/20")},onQuit:()=>r("/dashboard")}):t.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[t.jsx("p",{children:"Quiz introuvable"}),t.jsx("button",{onClick:()=>r(-1),children:" Retour"})]})},JR=e=>{if(!e?.length)return{label:"",color:"#9ca3af"};const r=e.map(a=>a.difficulte),n=r.reduce((a,l)=>a+(l==="facile"?1:l==="moyen"?2:3),0)/r.length;return n<1.5?{label:"Facile",color:"#059669"}:n<2.5?{label:"Moyen",color:"#d97706"}:{label:"Difficile",color:"#dc2626"}},eI=e=>e?.reduce((r,n)=>r+(n.points??0),0)??0,tI=()=>{const e=Ze(),{currentUser:r}=Ke(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(""),[m,p]=g.useState("");g.useEffect(()=>{(async()=>{try{const b=await YA();a(b)}catch{d("Impossible de charger les quiz.")}finally{o(!1)}})()},[]);const h=n.filter(v=>v.titre.toLowerCase().includes(m.toLowerCase())||(v.description??"").toLowerCase().includes(m.toLowerCase()));return t.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:"2rem 1rem"},children:[t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:800,color:"#1f2937",margin:"0 0 0.4rem"},children:" Quiz disponibles"}),t.jsx("p",{style:{color:"#6b7280",fontSize:"0.95rem",margin:0},children:"Testez vos connaissances avec nos quiz interactifs"})]}),t.jsx("div",{style:{marginBottom:"1.5rem"},children:t.jsx("input",{type:"text",placeholder:"Rechercher un quiz...",value:m,onChange:v=>p(v.target.value),style:{width:"100%",maxWidth:400,padding:"0.6rem 1rem",border:"1.5px solid #e5e7eb",borderRadius:10,fontSize:"0.9rem",outline:"none",boxSizing:"border-box"}})}),l&&t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:[t.jsx("div",{style:{width:36,height:36,border:"3px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto 1rem"}}),"Chargement des quiz..."]}),u&&t.jsxs("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.9rem 1.2rem",borderRadius:10,marginBottom:"1.5rem"},children:[" ",u]}),!l&&!u&&h.length===0&&t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#9ca3af"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.75rem",opacity:.4},children:""}),t.jsx("p",{style:{margin:0},children:m?"Aucun quiz ne correspond  votre recherche.":"Aucun quiz disponible pour le moment."})]}),!l&&!u&&h.length>0&&t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.25rem"},children:h.map(v=>{const b=JR(v.questions),x=eI(v.questions),j=v.questions?.length??0,_=v.isPremium,C=!_||r?.isPremium;return t.jsxs("div",{onClick:()=>C&&e(`/quiz-avance/${v.id}`),style:{background:"white",borderRadius:14,boxShadow:"0 2px 10px rgba(0,0,0,0.08)",padding:"1.25rem",cursor:C?"pointer":"default",opacity:C?1:.65,transition:"transform 0.15s, box-shadow 0.15s",border:"1.5px solid #f3f4f6",display:"flex",flexDirection:"column",gap:"0.6rem",position:"relative"},onMouseEnter:w=>{C&&(w.currentTarget.style.transform="translateY(-3px)",w.currentTarget.style.boxShadow="0 6px 20px rgba(0,0,0,0.12)")},onMouseLeave:w=>{w.currentTarget.style.transform="",w.currentTarget.style.boxShadow="0 2px 10px rgba(0,0,0,0.08)"},children:[_&&t.jsx("span",{style:{position:"absolute",top:12,right:12,background:"#fef3c7",color:"#d97706",fontSize:"0.7rem",fontWeight:700,padding:"0.15rem 0.5rem",borderRadius:20},children:" Premium"}),t.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0,lineHeight:1.3,paddingRight:_?"4rem":0},children:v.titre}),v.description&&t.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:0,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},dangerouslySetInnerHTML:{__html:v.description}}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginTop:"0.25rem"},children:[t.jsxs("span",{style:{fontSize:"0.75rem",background:"#eff6ff",color:"#2563eb",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",j," question",j>1?"s":""]}),t.jsxs("span",{style:{fontSize:"0.75rem",background:"#f3f4f6",color:"#374151",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",v.duree," min"]}),x>0&&t.jsxs("span",{style:{fontSize:"0.75rem",background:"#f0fdf4",color:"#059669",padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:600},children:[" ",x," pts"]}),t.jsx("span",{style:{fontSize:"0.75rem",background:"#fafafa",color:b.color,padding:"0.2rem 0.55rem",borderRadius:20,fontWeight:700,border:`1px solid ${b.color}30`},children:b.label})]}),t.jsx("button",{disabled:!C,onClick:w=>{w.stopPropagation(),C&&e(`/quiz-avance/${v.id}`)},style:{marginTop:"auto",padding:"0.55rem 1rem",background:C?"#2563eb":"#e5e7eb",color:C?"white":"#9ca3af",border:"none",borderRadius:8,fontWeight:600,fontSize:"0.85rem",cursor:C?"pointer":"not-allowed",transition:"background 0.15s"},children:C?" Commencer le quiz":" Premium requis"})]},v.id)})}),!l&&h.length>0&&t.jsxs("p",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.8rem",marginTop:"2rem"},children:[h.length," quiz",(h.length>1,"")," disponible",h.length>1?"s":""]})]})},rI="quizzes",nI="quizzes_v2",Z1=50;function aI(e){const r=e.data();return{id:e.id,titre:r.titre||"Quiz sans titre",description:r.description||"",matiere:r.matiere||r.disciplineId||"",niveau:r.niveau||"",classe:r.classe||"",nombreQuestions:Array.isArray(r.questions)?r.questions.length:0,duree:r.duree||void 0,difficulte:r.difficulte||"moyen",source:"quizzes",isPremium:!1,createdAt:r.createdAt||void 0}}function iI(e){const r=e.data();return{id:e.id,titre:r.titre||"Quiz sans titre",description:r.description||"",matiere:r.matiere||"",niveau:r.niveau||"",classe:r.classe||"",nombreQuestions:Array.isArray(r.questions)?r.questions.length:0,duree:r.dureeEstimee||void 0,difficulte:r.difficulte||"moyen",source:"quizzes_v2",isPremium:!1,createdAt:r.createdAt||void 0}}async function KA(){const[e,r]=await Promise.all([Ce(Ee(_e(Q,rI),Se("isPremium","==",!1),Ve("createdAt","desc"),Gt(Z1))),Ce(Ee(_e(Q,nI),Se("isPremium","==",!1),Ve("createdAt","desc"),Gt(Z1)))]),n=e.docs.map(aI),a=r.docs.map(iI);return[...n,...a].sort((l,o)=>{const u=l.createdAt?.toMillis()??0;return(o.createdAt?.toMillis()??0)-u})}async function sI(){return(await KA()).slice(0,3)}const lI={facile:{label:"Facile",color:"#059669",bg:"#d1fae5"},moyen:{label:"Moyen",color:"#d97706",bg:"#fef3c7"},difficile:{label:"Difficile",color:"#dc2626",bg:"#fee2e2"}},oI=({quiz:e,onJouer:r,estConnecte:n})=>{const a=lI[e.difficulte??"moyen"];return t.jsxs("div",{className:"qg-card",onClick:()=>r(e),children:[t.jsxs("div",{className:"qg-card__header",children:[t.jsx("span",{className:`qg-card__source qg-card__source--${e.source}`,children:e.source==="quizzes_v2"?" Quiz avanc":" Quiz"}),t.jsx("span",{className:"qg-card__difficulte",style:{color:a.color,background:a.bg},children:a.label})]}),t.jsx("h3",{className:"qg-card__titre",children:e.titre}),e.description&&t.jsx("p",{className:"qg-card__description",children:e.description}),t.jsxs("div",{className:"qg-card__meta",children:[e.matiere&&t.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.matiere]}),e.classe&&t.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.classe]}),t.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.nombreQuestions," question",e.nombreQuestions>1?"s":""]}),e.duree&&t.jsxs("span",{className:"qg-card__meta-item",children:[" ",e.duree," min"]})]}),t.jsx("button",{className:"qg-card__btn",children:n?" Commencer":" Aperu"})]})},cI=()=>t.jsxs("div",{className:"qg-banniere qg-banniere--inscription",children:[t.jsx("div",{className:"qg-banniere__icone",children:""}),t.jsxs("div",{className:"qg-banniere__texte",children:[t.jsx("h3",{children:"Connectez-vous pour accder  tous les quiz gratuits"}),t.jsx("p",{children:"Crez un compte gratuitement et commencez  vous entraner ds maintenant."})]}),t.jsxs("div",{className:"qg-banniere__actions",children:[t.jsx(Re,{to:"/inscription",className:"btn btn-primary",children:"Crer un compte gratuit"}),t.jsx(Re,{to:"/connexion",className:"btn btn-secondary",children:"Se connecter"})]})]}),uI=()=>t.jsxs("div",{className:"qg-banniere qg-banniere--premium",children:[t.jsx("div",{className:"qg-banniere__icone",children:""}),t.jsxs("div",{className:"qg-banniere__texte",children:[t.jsx("h3",{children:"Dbloquez les Quiz Avancs Premium"}),t.jsx("p",{children:"Accdez  des centaines de quiz avancs avec corrections dtailles, suivi de progression et bien plus encore."}),t.jsxs("p",{className:"qg-banniere__prix",children:[t.jsx("strong",{children:"Ds 10 000 FCFA / 3 mois"}),"  Accs illimit"]})]}),t.jsx(Re,{to:"/premium",className:"btn btn-premium",children:" Devenir Premium"})]}),dI=()=>{const e=Ze(),{currentUser:r}=Ke(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(""),[m,p]=g.useState(""),[h,v]=g.useState(""),[b,x]=g.useState(""),{matieres:j}=na(),_=!!r,C=r?.isPremium??!1,w=r?.role==="prof"||r?.role==="admin";g.useEffect(()=>{(async()=>{o(!0),d("");try{const z=_?await KA():await sI();a(z)}catch(z){console.error("Erreur chargement quiz gratuits:",z),d("Impossible de charger les quiz. Veuillez ressayer.")}finally{o(!1)}})()},[_]);const E=n.filter(A=>{const z=!b||A.titre.toLowerCase().includes(b.toLowerCase())||A.matiere.toLowerCase().includes(b.toLowerCase()),k=!m||A.matiere.toLowerCase().includes(m.toLowerCase()),M=!h||(A.niveau??"").toLowerCase().includes(h.toLowerCase())||(A.classe??"").toLowerCase().includes(h.toLowerCase());return z&&k&&M}),S=A=>{if(!_){e("/connexion");return}A.source==="quizzes_v2"?e(`/quiz-avance/${A.id}`):e(`/quiz/${A.id}`)};return t.jsxs("div",{className:"qg-page",children:[t.jsxs("div",{className:"qg-hero",children:[t.jsxs("div",{className:"qg-hero__content",children:[t.jsx("h1",{className:"qg-hero__titre",children:" Quiz Gratuits"}),t.jsx("p",{className:"qg-hero__sous-titre",children:"Entranez-vous gratuitement avec nos quiz de rvision pour tous les niveaux du collge au lyce."}),t.jsxs("div",{className:"qg-hero__stats",children:[t.jsxs("span",{className:"qg-hero__stat",children:[t.jsx("strong",{children:n.length}),_?" quiz disponibles":"+ quiz"]}),t.jsxs("span",{className:"qg-hero__stat",children:[t.jsx("strong",{children:"100%"})," gratuit"]}),t.jsxs("span",{className:"qg-hero__stat",children:[t.jsx("strong",{children:"6me"}),"  ",t.jsx("strong",{children:"Terminale"})]})]})]}),(C||w)&&t.jsx(Re,{to:"/quizzes",className:"qg-hero__lien-premium",children:" Voir les Quiz Premium "})]}),t.jsxs("div",{className:"qg-filtres",children:[t.jsx("div",{className:"qg-filtres__recherche",children:t.jsx("input",{type:"text",placeholder:" Rechercher un quiz...",value:b,onChange:A=>x(A.target.value),className:"qg-filtres__input"})}),t.jsxs("select",{value:m,onChange:A=>p(A.target.value),className:"qg-filtres__select",children:[t.jsx("option",{value:"",children:"Toutes les matires"}),j.map(A=>t.jsx("option",{value:A.valeur,children:A.label},A.valeur))]}),(m||h||b)&&t.jsx("button",{className:"qg-filtres__reset",onClick:()=>{p(""),v(""),x("")},children:" Rinitialiser"})]}),t.jsxs("div",{className:"qg-contenu",children:[l&&t.jsxs("div",{className:"qg-loading",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Chargement des quiz..."})]}),!l&&u&&t.jsxs("div",{className:"qg-erreur",children:[t.jsxs("p",{children:[" ",u]}),t.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"Ressayer"})]}),!l&&!u&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"qg-compteur",children:[E.length," quiz",E.length>1?"s":"",m?` en ${m}`:"",_?"":" (aperu  connectez-vous pour tout voir)"]}),E.length>0?t.jsx("div",{className:"qg-grille",children:E.map(A=>t.jsx(oI,{quiz:A,onJouer:S,estConnecte:_},`${A.source}-${A.id}`))}):t.jsxs("div",{className:"qg-vide",children:[t.jsx("p",{children:" Aucun quiz trouv pour ces critres."}),t.jsx("button",{onClick:()=>{p(""),x("")},className:"btn btn-secondary",children:"Voir tous les quiz"})]}),!_&&t.jsx(cI,{}),_&&!C&&!w&&t.jsx(uI,{})]})]})]})},WA=_e(Q,"quiz_results"),Kb=_e(Q,"progressions"),mI=async e=>{try{const r=await Dt(WA,{...e,datePassage:Ae.now()});return e.reussi&&await xI(e.userId,e.disciplineId,e.disciplineNom,e.quizId),r.id}catch(r){throw console.error("Erreur lors de la sauvegarde du rsultat :",r),r}},Af=async(e,r)=>{try{let n=Ee(WA,Se("userId","==",e),Ve("datePassage","desc"));return r&&(n=Ee(n,Gt(r))),(await Ce(n)).docs.map(l=>({id:l.id,...l.data()}))}catch(n){throw console.error("Erreur rcupration historique :",n),n}},fI=async e=>{try{const r=await Af(e);if(r.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const n=r.reduce((h,v)=>h+v.pourcentage,0),a=Math.round(n/r.length),l=Math.max(...r.map(h=>h.pourcentage)),o=r.reduce((h,v)=>h+(v.tempsEcoule||0),0),u=r.filter(h=>h.reussi).length;let d=0,m=0;for(const h of r)h.reussi?(d++,m=Math.max(m,d)):d=0;let p=0;for(const h of r)if(h.reussi)p++;else break;return{totalQuizPasses:r.length,totalQuizReussis:u,moyenneGenerale:a,tempsTotal:o,meilleurScore:l,serieReussites:p,meilleureSerieReussites:Math.max(m,p)}}catch(r){return console.error("Erreur calcul stats :",r),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},pI=async e=>{try{const r=await Af(e);if(r.length===0)return[];const n={};for(const a of r){const l=a.disciplineId;n[l]||(n[l]=[]),n[l].push(a)}return Object.entries(n).map(([a,l])=>{const o=Math.round(l.reduce((v,b)=>v+b.pourcentage,0)/l.length),u=Math.max(...l.map(v=>v.pourcentage)),d=l[0].pourcentage,m=l.filter(v=>v.reussi).length,p=l.reduce((v,b)=>v+(b.tempsEcoule||0),0);let h="stable";if(l.length>=4){const v=l.slice(0,3),b=l.slice(3,6),x=v.reduce((_,C)=>_+C.pourcentage,0)/v.length,j=b.reduce((_,C)=>_+C.pourcentage,0)/b.length;x-j>5?h="up":j-x>5&&(h="down")}return{disciplineId:a,disciplineNom:l[0].disciplineNom||a,nombreQuiz:l.length,moyenne:o,meilleurScore:u,dernierScore:d,quizReussis:m,tempsTotal:p,tendance:h}})}catch(r){return console.error("Erreur progression par discipline :",r),[]}},hI=async(e,r)=>{try{return(await Af(e,r||20)).reverse().map(a=>({date:(a.datePassage?.toDate?a.datePassage.toDate():new Date(a.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:a.pourcentage,discipline:a.disciplineNom||a.disciplineId}))}catch(n){return console.error("Erreur donnes temporelles :",n),[]}},vI=async(e,r,n)=>{const a=`${e}_${r}`,l=je(Kb,a),o=await gt(l);if(o.exists())return{...o.data()};const[u,d]=await Promise.all([J1("ressources",r),J1("quizzes",r)]),m={userId:e,disciplineId:r,disciplineNom:n,ressourcesVues:[],quizReussis:[],totalRessources:u,totalQuiz:d,pourcentage:0,dernierAcces:Ae.now(),createdAt:Ae.now(),updatedAt:Ae.now()};return await lu(l,m),m},J1=async(e,r)=>{try{const n=Ee(_e(Q,e),Se("disciplineId","==",r));return(await Ce(n)).size}catch{return 0}},gI=e=>{if(e.totalRessources+e.totalQuiz===0)return 0;const n=e.totalRessources>0?e.ressourcesVues.length/e.totalRessources*40:0,a=e.totalQuiz>0?e.quizReussis.length/e.totalQuiz*60:0;return e.totalRessources===0?Math.min(100,Math.round(e.quizReussis.length/e.totalQuiz*100)):e.totalQuiz===0?Math.min(100,Math.round(e.ressourcesVues.length/e.totalRessources*100)):Math.min(100,Math.round(n+a))},xI=async(e,r,n,a)=>{try{const l=`${e}_${r}`,o=je(Kb,l),u=await vI(e,r,n);if(u.quizReussis.includes(a))return await Ge(o,{dernierAcces:Ae.now()}),u;const d=[...u.quizReussis,a],m={...u,quizReussis:d,dernierAcces:Ae.now(),updatedAt:Ae.now(),pourcentage:0};return m.pourcentage=gI(m),await lu(o,m),m}catch(l){throw console.error("Erreur enregistrement quiz russi :",l),l}},bI=async e=>{try{const r=Ee(Kb,Se("userId","==",e));return(await Ce(r)).docs.map(a=>a.data())}catch(r){return console.error("Erreur rcupration progressions :",r),[]}},yI=async e=>{try{const r=await bI(e),n=await XA(e),a=r.reduce((d,m)=>d+m.ressourcesVues.length,0),l=r.reduce((d,m)=>d+m.quizReussis.length,0),o=r.length>0?Math.round(r.reduce((d,m)=>d+m.pourcentage,0)/r.length):0,u=r.filter(d=>d.pourcentage>=100).length;return{totalRessourcesVues:a,totalQuizReussis:l,pourcentageMoyen:o,disciplinesCommencees:r.length,disciplinesCompletees:u,streakActuel:n.streakActuel,meilleurStreak:n.meilleurStreak,parDiscipline:r}}catch(r){return console.error("Erreur progression globale :",r),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},jI=()=>new Date().toISOString().split("T")[0],_I=()=>{const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().split("T")[0]},XA=async e=>{try{const r=je(Q,"users",e),n=await gt(r);if(!n.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const a=n.data();return{streakActuel:a.streakActuel||0,meilleurStreak:a.meilleurStreak||0,dernierJourAcces:a.dernierJourAcces||""}}catch(r){return console.error("Erreur rcupration streak :",r),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},NI=async e=>{try{const r=je(Q,"users",e),n=await XA(e),a=jI();if(n.dernierJourAcces===a)return n;const l=_I();let o;n.dernierJourAcces===l?o=n.streakActuel+1:o=1;const u=Math.max(n.meilleurStreak,o);return await Ge(r,{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}),{streakActuel:o,meilleurStreak:u,dernierJourAcces:a}}catch(r){return console.error("Erreur mise  jour streak :",r),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},SI=(e,r,n)=>{const a=n?.totalRessourcesVues||0;n?.totalQuizReussis;const l=n?.disciplinesCompletees||0;n?.streakActuel;const o=n?.meilleurStreak||0,u=n?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:a>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:a>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:a>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:a>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:e.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:e.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:e.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:e.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:e.moyenneGenerale>=80&&e.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:e.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:l>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:u>=3||r.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:u>=5||r.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:o>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:o>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:o>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:a>=50&&e.totalQuizReussis>=20}]},ZA=e=>{if(e<60)return`${e} s`;const r=Math.floor(e/60),n=e%60;return n>0?`${r} min ${n.toString().padStart(2,"0")} s`:`${r} min`},no=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":"#ef4444",JA=e=>e>=80?"Excellent":e>=60?"Bien":e>=40?"Passable":" amliorer",wI=()=>{const{quizId:e}=yn(),r=Ze(),{currentUser:n}=Ke(),[a,l]=g.useState(null),[o,u]=g.useState(""),[d,m]=g.useState(!0),[p,h]=g.useState(null),[v,b]=g.useState("intro"),[x,j]=g.useState(0),[_,C]=g.useState({}),[w,E]=g.useState(0),[S,A]=g.useState(0),z=g.useRef(null),[k,M]=g.useState(0),[D,$]=g.useState(0),[B,H]=g.useState(0),[T,Y]=g.useState(!1),[J,P]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!e){h("ID du quiz manquant."),m(!1);return}try{const F=await cR(e);if(!F){h("Quiz introuvable."),m(!1);return}l(F),E(F.duree*60);try{const Pe=(await is.getAll()).find(ue=>ue.id===F.disciplineId);u(Pe?.nom||F.disciplineId)}catch{u(F.disciplineId)}}catch(F){h("Erreur lors du chargement du quiz."),console.error(F)}finally{m(!1)}})()},[e]),g.useEffect(()=>{if(v==="playing")return z.current=setInterval(()=>{E(he=>he<=1?(clearInterval(z.current),te(),0):he-1),A(he=>he+1)},1e3),()=>{z.current&&clearInterval(z.current)}},[v]);const q=()=>{b("playing"),j(0),C({}),A(0),a&&E(a.duree*60)},U=(he,F)=>{C(ve=>({...ve,[he]:F}))},I=he=>{a&&he>=0&&he<a.questions.length&&j(he)},te=g.useCallback(async()=>{if(!a||!n||v==="review")return;z.current&&clearInterval(z.current);let he=0,F=0,ve=0;a.questions.forEach(ee=>{const V=ee.points||1;F+=V,_[ee.id]===ee.reponseCorrecte&&(he+=V,ve++)});const Pe=F>0?Math.round(he/F*100):0,ue=Pe>=(a.noteMinimale||50);M(he),$(F),H(ve),b("review"),Y(!0);try{const ee={quizId:a.id,quizTitre:a.titre,disciplineId:a.disciplineId,disciplineNom:o,userId:n.uid,reponses:a.questions.map(V=>_[V.id]??-1),tempsEcoule:S,score:he,totalPoints:F,pourcentage:Pe,reussi:ue,nombreQuestions:a.questions.length,bonnesReponses:ve};await mI(ee),P(!0)}catch(ee){console.error("Erreur lors de la sauvegarde :",ee)}finally{Y(!1)}},[a,n,_,S,o,v]),L=he=>{const F=Math.floor(he/60),ve=he%60;return`${F.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`},Z=()=>{if(!a)return"";const he=a.duree*60,F=w/he;return F<=.1?"timer-critical":F<=.25?"timer-warning":""},W=Object.keys(_).length;if(d)return t.jsxs("div",{className:"quiz-player-loading",children:[t.jsx("div",{className:"admin-spinner"}),t.jsx("p",{children:"Chargement du quiz..."})]});if(p||!a)return t.jsxs("div",{className:"quiz-player-error",children:[t.jsx(bm,{size:48}),t.jsx("h3",{children:p||"Quiz introuvable"}),t.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>r("/eleve/dashboard"),children:[t.jsx(Ox,{size:18})," Retour au tableau de bord"]})]});if(a.isPremium&&!n?.isPremium)return t.jsx("div",{className:"quiz-player-locked",children:t.jsxs("div",{className:"qp-locked-card",children:[t.jsx(ym,{size:48}),t.jsx("h3",{children:"Quiz Premium"}),t.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),t.jsxs("p",{className:"qp-locked-price",children:[" partir de ",t.jsx("strong",{children:"2 000 FCFA/mois"})]}),t.jsxs("div",{className:"qp-locked-actions",children:[t.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>r("/premium"),children:[t.jsx(vr,{size:18})," Devenir Premium"]}),t.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>r("/eleve/dashboard"),children:[t.jsx(Iv,{size:18})," Retour"]})]})]})});if(v==="intro")return t.jsx("div",{className:"quiz-player-intro",children:t.jsxs("div",{className:"qp-intro-card",children:[t.jsxs("div",{className:"qp-intro-header",children:[t.jsxs("button",{className:"qp-back-btn",onClick:()=>r(-1),children:[t.jsx(Iv,{size:20})," Retour"]}),a.isPremium&&t.jsxs("span",{className:"qp-badge qp-badge-premium",children:[t.jsx(vr,{size:12})," Premium"]})]}),t.jsxs("div",{className:"qp-intro-content",children:[t.jsx("h1",{className:"qp-intro-title",children:a.titre}),t.jsx("span",{className:"qp-intro-discipline",children:o}),t.jsxs("div",{className:"qp-intro-stats",children:[t.jsxs("div",{className:"qp-intro-stat",children:[t.jsx(gn,{size:20}),t.jsxs("div",{children:[t.jsx("span",{className:"qp-intro-stat-value",children:a.questions.length}),t.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),t.jsxs("div",{className:"qp-intro-stat",children:[t.jsx(mo,{size:20}),t.jsxs("div",{children:[t.jsxs("span",{className:"qp-intro-stat-value",children:[a.duree," min"]}),t.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),t.jsxs("div",{className:"qp-intro-stat",children:[t.jsx(ts,{size:20}),t.jsxs("div",{children:[t.jsxs("span",{className:"qp-intro-stat-value",children:[a.noteMinimale||50,"%"]}),t.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),t.jsxs("div",{className:"qp-intro-instructions",children:[t.jsx("h3",{children:"Instructions"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),t.jsx("li",{children:"Chaque question a une seule bonne rponse"}),t.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),t.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),t.jsxs("li",{children:["Il faut obtenir au moins ",a.noteMinimale||50,"% pour russir"]})]})]})]}),t.jsxs("button",{className:"qp-btn qp-btn-start",onClick:q,children:[t.jsx(io,{size:20})," Commencer le quiz"]})]})});if(v==="playing"){const he=a.questions[x];return t.jsxs("div",{className:"quiz-player-game",children:[t.jsxs("div",{className:"qp-game-header",children:[t.jsxs("div",{className:"qp-game-info",children:[t.jsx("span",{className:"qp-game-title",children:a.titre}),t.jsx("span",{className:"qp-game-discipline",children:o})]}),t.jsxs("div",{className:`qp-timer ${Z()}`,children:[t.jsx(q3,{size:18}),t.jsx("span",{children:L(w)})]})]}),t.jsx("div",{className:"qp-progress-bar",children:t.jsx("div",{className:"qp-progress-fill",style:{width:`${(x+1)/a.questions.length*100}%`}})}),t.jsxs("div",{className:"qp-game-content",children:[t.jsxs("div",{className:"qp-question-header",children:[t.jsxs("span",{className:"qp-question-number",children:["Question ",x+1,"/",a.questions.length]}),t.jsxs("span",{className:"qp-question-points",children:[he.points||1," pt(s)"]})]}),t.jsx("h2",{className:"qp-question-text",children:he.question}),t.jsx("div",{className:"qp-options-list",children:he.options.map((F,ve)=>t.jsxs("button",{className:`qp-option ${_[he.id]===ve?"selected":""}`,onClick:()=>U(he.id,ve),children:[t.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+ve)}),t.jsx("span",{className:"qp-option-text",children:F}),_[he.id]===ve&&t.jsx(Bt,{size:18,className:"qp-option-check"})]},ve))})]}),t.jsxs("div",{className:"qp-game-footer",children:[t.jsx("div",{className:"qp-question-indicators",children:a.questions.map((F,ve)=>t.jsx("button",{className:`qp-indicator ${ve===x?"active":""} ${_[F.id]!==void 0?"answered":""}`,onClick:()=>I(ve),children:ve+1},F.id))}),t.jsxs("div",{className:"qp-nav-buttons",children:[t.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>I(x-1),disabled:x===0,children:[t.jsx(Iv,{size:16})," Prcdent"]}),x<a.questions.length-1?t.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>I(x+1),children:["Suivant ",t.jsx(Os,{size:16})]}):t.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:te,disabled:W<a.questions.length,children:[t.jsx(Bt,{size:16}),"Soumettre (",W,"/",a.questions.length,")"]})]})]})]})}const ce=D>0?Math.round(k/D*100):0,xe=ce>=(a.noteMinimale||50);return t.jsxs("div",{className:"quiz-player-review",children:[t.jsxs("div",{className:`qp-score-card ${xe?"success":"fail"}`,children:[t.jsx("div",{className:"qp-score-icon",children:xe?t.jsx(ts,{size:48}):t.jsx(bm,{size:48})}),t.jsx("h2",{className:"qp-score-title",children:xe?"Flicitations ! ":"Continuez vos efforts ! "}),t.jsxs("div",{className:"qp-score-circle",style:{borderColor:no(ce)},children:[t.jsxs("span",{className:"qp-score-value",children:[ce,"%"]}),t.jsx("span",{className:"qp-score-label",children:JA(ce)})]}),t.jsxs("div",{className:"qp-score-details",children:[t.jsxs("div",{className:"qp-score-detail",children:[t.jsxs("span",{children:[B,"/",a.questions.length]}),t.jsx("small",{children:"Bonnes rponses"})]}),t.jsxs("div",{className:"qp-score-detail",children:[t.jsxs("span",{children:[k,"/",D]}),t.jsx("small",{children:"Points"})]}),t.jsxs("div",{className:"qp-score-detail",children:[t.jsx("span",{children:ZA(S)}),t.jsx("small",{children:"Temps"})]})]}),T&&t.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),J&&t.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),t.jsxs("div",{className:"qp-review-actions",children:[t.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>r("/eleve/dashboard"),children:[t.jsx(Ox,{size:18})," Tableau de bord"]}),t.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:q,children:[t.jsx(R3,{size:18})," Recommencer"]})]}),t.jsxs("div",{className:"qp-review-questions",children:[t.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),a.questions.map((he,F)=>{const ve=_[he.id],Pe=ve===he.reponseCorrecte;return t.jsxs("div",{className:`qp-review-question ${Pe?"correct":"incorrect"}`,children:[t.jsxs("div",{className:"qp-review-question-header",children:[t.jsxs("span",{className:"qp-review-q-number",children:["Q",F+1]}),Pe?t.jsxs("span",{className:"qp-review-badge correct",children:[t.jsx(Bt,{size:14})," Correct"]}):t.jsxs("span",{className:"qp-review-badge incorrect",children:[t.jsx(Px,{size:14})," Incorrect"]}),t.jsxs("span",{className:"qp-review-q-points",children:[Pe?he.points||1:0,"/",he.points||1," pt(s)"]})]}),t.jsx("p",{className:"qp-review-q-text",children:he.question}),t.jsx("div",{className:"qp-review-options",children:he.options.map((ue,ee)=>{let V="qp-review-option";return ee===he.reponseCorrecte&&(V+=" correct-answer"),ee===ve&&!Pe&&(V+=" wrong-answer"),t.jsxs("div",{className:V,children:[t.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+ee)}),t.jsx("span",{children:ue}),ee===he.reponseCorrecte&&t.jsx(Bt,{size:14,className:"qp-review-check"}),ee===ve&&!Pe&&t.jsx(Px,{size:14,className:"qp-review-x"})]},ee)})}),he.explication&&t.jsxs("div",{className:"qp-review-explication",children:[t.jsx("strong",{children:" Explication :"})," ",he.explication]})]},he.id)})]})]})};function ez(e){var r,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(n=ez(e[r]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Nt(){for(var e,r,n=0,a="",l=arguments.length;n<l;n++)(e=arguments[n])&&(r=ez(e))&&(a&&(a+=" "),a+=r);return a}var CI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Wb(e){if(typeof e!="string")return!1;var r=CI;return r.includes(e)}var EI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],AI=new Set(EI);function tz(e){return typeof e!="string"?!1:AI.has(e)}function rz(e){return typeof e=="string"&&e.startsWith("data-")}function ea(e){if(typeof e!="object"||e===null)return{};var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(tz(n)||rz(n))&&(r[n]=e[n]);return r}function uu(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var r=e.props;return ea(r)}return typeof e=="object"&&!Array.isArray(e)?ea(e):null}function Ur(e){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(tz(n)||rz(n)||Wb(n))&&(r[n]=e[n]);return r}function zI(e){return e==null?null:g.isValidElement(e)?Ur(e.props):typeof e=="object"&&!Array.isArray(e)?Ur(e):null}var kI=["children","width","height","viewBox","className","style","title","desc"];function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rx.apply(null,arguments)}function OI(e,r){if(e==null)return{};var n,a,l=DI(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function DI(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var nz=g.forwardRef((e,r)=>{var{children:n,width:a,height:l,viewBox:o,className:u,style:d,title:m,desc:p}=e,h=OI(e,kI),v=o||{width:a,height:l,x:0,y:0},b=Nt("recharts-surface",u);return g.createElement("svg",Rx({},Ur(h),{className:b,width:a,height:l,style:d,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:r}),g.createElement("title",null,m),g.createElement("desc",null,p),n)}),PI=["children","className"];function Ix(){return Ix=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ix.apply(null,arguments)}function MI(e,r){if(e==null)return{};var n,a,l=TI(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function TI(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var In=g.forwardRef((e,r)=>{var{children:n,className:a}=e,l=MI(e,PI),o=Nt("recharts-layer",a);return g.createElement("g",Ix({className:o},Ur(l),{ref:r}),n)}),qI=g.createContext(null);function Ct(e){return function(){return e}}const az=Math.cos,Sm=Math.sin,aa=Math.sqrt,wm=Math.PI,zf=2*wm,Lx=Math.PI,$x=2*Lx,Ds=1e-6,RI=$x-Ds;function iz(e){this._+=e[0];for(let r=1,n=e.length;r<n;++r)this._+=arguments[r]+e[r]}function II(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return iz;const n=10**r;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*n)/n+a[l]}}class LI{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?iz:II(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,a,l){this._append`Q${+r},${+n},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(r,n,a,l,o,u){this._append`C${+r},${+n},${+a},${+l},${this._x1=+o},${this._y1=+u}`}arcTo(r,n,a,l,o){if(r=+r,n=+n,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let u=this._x1,d=this._y1,m=a-r,p=l-n,h=u-r,v=d-n,b=h*h+v*v;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(b>Ds)if(!(Math.abs(v*m-p*h)>Ds)||!o)this._append`L${this._x1=r},${this._y1=n}`;else{let x=a-u,j=l-d,_=m*m+p*p,C=x*x+j*j,w=Math.sqrt(_),E=Math.sqrt(b),S=o*Math.tan((Lx-Math.acos((_+b-C)/(2*w*E)))/2),A=S/E,z=S/w;Math.abs(A-1)>Ds&&this._append`L${r+A*h},${n+A*v}`,this._append`A${o},${o},0,0,${+(v*x>h*j)},${this._x1=r+z*m},${this._y1=n+z*p}`}}arc(r,n,a,l,o,u){if(r=+r,n=+n,a=+a,u=!!u,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(l),m=a*Math.sin(l),p=r+d,h=n+m,v=1^u,b=u?l-o:o-l;this._x1===null?this._append`M${p},${h}`:(Math.abs(this._x1-p)>Ds||Math.abs(this._y1-h)>Ds)&&this._append`L${p},${h}`,a&&(b<0&&(b=b%$x+$x),b>RI?this._append`A${a},${a},0,1,${v},${r-d},${n-m}A${a},${a},0,1,${v},${this._x1=p},${this._y1=h}`:b>Ds&&this._append`A${a},${a},0,${+(b>=Lx)},${v},${this._x1=r+a*Math.cos(o)},${this._y1=n+a*Math.sin(o)}`)}rect(r,n,a,l){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function Xb(e){let r=3;return e.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);r=a}return e},()=>new LI(r)}function Zb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sz(e){this._context=e}sz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._context.lineTo(e,r);break}}};function kf(e){return new sz(e)}function lz(e){return e[0]}function oz(e){return e[1]}function cz(e,r){var n=Ct(!0),a=null,l=kf,o=null,u=Xb(d);e=typeof e=="function"?e:e===void 0?lz:Ct(e),r=typeof r=="function"?r:r===void 0?oz:Ct(r);function d(m){var p,h=(m=Zb(m)).length,v,b=!1,x;for(a==null&&(o=l(x=u())),p=0;p<=h;++p)!(p<h&&n(v=m[p],p,m))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(v,p,m),+r(v,p,m));if(x)return o=null,x+""||null}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:Ct(+m),d):e},d.y=function(m){return arguments.length?(r=typeof m=="function"?m:Ct(+m),d):r},d.defined=function(m){return arguments.length?(n=typeof m=="function"?m:Ct(!!m),d):n},d.curve=function(m){return arguments.length?(l=m,a!=null&&(o=l(a)),d):l},d.context=function(m){return arguments.length?(m==null?a=o=null:o=l(a=m),d):a},d}function Fd(e,r,n){var a=null,l=Ct(!0),o=null,u=kf,d=null,m=Xb(p);e=typeof e=="function"?e:e===void 0?lz:Ct(+e),r=typeof r=="function"?r:Ct(r===void 0?0:+r),n=typeof n=="function"?n:n===void 0?oz:Ct(+n);function p(v){var b,x,j,_=(v=Zb(v)).length,C,w=!1,E,S=new Array(_),A=new Array(_);for(o==null&&(d=u(E=m())),b=0;b<=_;++b){if(!(b<_&&l(C=v[b],b,v))===w)if(w=!w)x=b,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=b-1;j>=x;--j)d.point(S[j],A[j]);d.lineEnd(),d.areaEnd()}w&&(S[b]=+e(C,b,v),A[b]=+r(C,b,v),d.point(a?+a(C,b,v):S[b],n?+n(C,b,v):A[b]))}if(E)return d=null,E+""||null}function h(){return cz().defined(l).curve(u).context(o)}return p.x=function(v){return arguments.length?(e=typeof v=="function"?v:Ct(+v),a=null,p):e},p.x0=function(v){return arguments.length?(e=typeof v=="function"?v:Ct(+v),p):e},p.x1=function(v){return arguments.length?(a=v==null?null:typeof v=="function"?v:Ct(+v),p):a},p.y=function(v){return arguments.length?(r=typeof v=="function"?v:Ct(+v),n=null,p):r},p.y0=function(v){return arguments.length?(r=typeof v=="function"?v:Ct(+v),p):r},p.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:Ct(+v),p):n},p.lineX0=p.lineY0=function(){return h().x(e).y(r)},p.lineY1=function(){return h().x(e).y(n)},p.lineX1=function(){return h().x(a).y(r)},p.defined=function(v){return arguments.length?(l=typeof v=="function"?v:Ct(!!v),p):l},p.curve=function(v){return arguments.length?(u=v,o!=null&&(d=u(o)),p):u},p.context=function(v){return arguments.length?(v==null?o=d=null:d=u(o=v),p):o},p}class uz{constructor(r,n){this._context=r,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,n){switch(r=+r,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,n,r,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,r,this._y0,r,n);break}}this._x0=r,this._y0=n}}function $I(e){return new uz(e,!0)}function BI(e){return new uz(e,!1)}const Jb={draw(e,r){const n=aa(r/wm);e.moveTo(n,0),e.arc(0,0,n,0,zf)}},UI={draw(e,r){const n=aa(r/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},dz=aa(1/3),FI=dz*2,GI={draw(e,r){const n=aa(r/FI),a=n*dz;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},HI={draw(e,r){const n=aa(r),a=-n/2;e.rect(a,a,n,n)}},VI=.8908130915292852,mz=Sm(wm/10)/Sm(7*wm/10),QI=Sm(zf/10)*mz,YI=-az(zf/10)*mz,KI={draw(e,r){const n=aa(r*VI),a=QI*n,l=YI*n;e.moveTo(0,-n),e.lineTo(a,l);for(let o=1;o<5;++o){const u=zf*o/5,d=az(u),m=Sm(u);e.lineTo(m*n,-d*n),e.lineTo(d*a-m*l,m*a+d*l)}e.closePath()}},Kv=aa(3),WI={draw(e,r){const n=-aa(r/(Kv*3));e.moveTo(0,n*2),e.lineTo(-Kv*n,-n),e.lineTo(Kv*n,-n),e.closePath()}},Dn=-.5,Pn=aa(3)/2,Bx=1/aa(12),XI=(Bx/2+1)*3,ZI={draw(e,r){const n=aa(r/XI),a=n/2,l=n*Bx,o=a,u=n*Bx+n,d=-o,m=u;e.moveTo(a,l),e.lineTo(o,u),e.lineTo(d,m),e.lineTo(Dn*a-Pn*l,Pn*a+Dn*l),e.lineTo(Dn*o-Pn*u,Pn*o+Dn*u),e.lineTo(Dn*d-Pn*m,Pn*d+Dn*m),e.lineTo(Dn*a+Pn*l,Dn*l-Pn*a),e.lineTo(Dn*o+Pn*u,Dn*u-Pn*o),e.lineTo(Dn*d+Pn*m,Dn*m-Pn*d),e.closePath()}};function JI(e,r){let n=null,a=Xb(l);e=typeof e=="function"?e:Ct(e||Jb),r=typeof r=="function"?r:Ct(r===void 0?64:+r);function l(){let o;if(n||(n=o=a()),e.apply(this,arguments).draw(n,+r.apply(this,arguments)),o)return n=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:Ct(o),l):e},l.size=function(o){return arguments.length?(r=typeof o=="function"?o:Ct(+o),l):r},l.context=function(o){return arguments.length?(n=o??null,l):n},l}function Cm(){}function Em(e,r,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+r)/6,(e._y0+4*e._y1+n)/6)}function fz(e){this._context=e}fz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Em(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Em(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function e6(e){return new fz(e)}function pz(e){this._context=e}pz.prototype={areaStart:Cm,areaEnd:Cm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x2=e,this._y2=r;break;case 1:this._point=2,this._x3=e,this._y3=r;break;case 2:this._point=3,this._x4=e,this._y4=r,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+r)/6);break;default:Em(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function t6(e){return new pz(e)}function hz(e){this._context=e}hz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Em(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function r6(e){return new hz(e)}function vz(e){this._context=e}vz.prototype={areaStart:Cm,areaEnd:Cm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,r){e=+e,r=+r,this._point?this._context.lineTo(e,r):(this._point=1,this._context.moveTo(e,r))}};function n6(e){return new vz(e)}function eS(e){return e<0?-1:1}function tS(e,r,n){var a=e._x1-e._x0,l=r-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),u=(n-e._y1)/(l||a<0&&-0),d=(o*l+u*a)/(a+l);return(eS(o)+eS(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(d))||0}function rS(e,r){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-r)/2:r}function Wv(e,r,n){var a=e._x0,l=e._y0,o=e._x1,u=e._y1,d=(o-a)/3;e._context.bezierCurveTo(a+d,l+d*r,o-d,u-d*n,o,u)}function Am(e){this._context=e}Am.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wv(this,this._t0,rS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){var n=NaN;if(e=+e,r=+r,!(e===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,Wv(this,rS(this,n=tS(this,e,r)),n);break;default:Wv(this,this._t0,n=tS(this,e,r));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r,this._t0=n}}};function gz(e){this._context=new xz(e)}(gz.prototype=Object.create(Am.prototype)).point=function(e,r){Am.prototype.point.call(this,r,e)};function xz(e){this._context=e}xz.prototype={moveTo:function(e,r){this._context.moveTo(r,e)},closePath:function(){this._context.closePath()},lineTo:function(e,r){this._context.lineTo(r,e)},bezierCurveTo:function(e,r,n,a,l,o){this._context.bezierCurveTo(r,e,a,n,o,l)}};function a6(e){return new Am(e)}function i6(e){return new gz(e)}function bz(e){this._context=e}bz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,r=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],r[0]):this._context.moveTo(e[0],r[0]),n===2)this._context.lineTo(e[1],r[1]);else for(var a=nS(e),l=nS(r),o=0,u=1;u<n;++o,++u)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[u],r[u]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,r){this._x.push(+e),this._y.push(+r)}};function nS(e){var r,n=e.length-1,a,l=new Array(n),o=new Array(n),u=new Array(n);for(l[0]=0,o[0]=2,u[0]=e[0]+2*e[1],r=1;r<n-1;++r)l[r]=1,o[r]=4,u[r]=4*e[r]+2*e[r+1];for(l[n-1]=2,o[n-1]=7,u[n-1]=8*e[n-1]+e[n],r=1;r<n;++r)a=l[r]/o[r-1],o[r]-=a,u[r]-=a*u[r-1];for(l[n-1]=u[n-1]/o[n-1],r=n-2;r>=0;--r)l[r]=(u[r]-l[r+1])/o[r];for(o[n-1]=(e[n]+l[n-1])/2,r=0;r<n-1;++r)o[r]=2*e[r+1]-l[r+1];return[l,o]}function s6(e){return new bz(e)}function Of(e,r){this._context=e,this._t=r}Of.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(e,r);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=e,this._y=r}};function l6(e){return new Of(e,.5)}function o6(e){return new Of(e,0)}function c6(e){return new Of(e,1)}function Vs(e,r){if((u=e.length)>1)for(var n=1,a,l,o=e[r[0]],u,d=o.length;n<u;++n)for(l=o,o=e[r[n]],a=0;a<d;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function Ux(e){for(var r=e.length,n=new Array(r);--r>=0;)n[r]=r;return n}function u6(e,r){return e[r]}function d6(e){const r=[];return r.key=e,r}function m6(){var e=Ct([]),r=Ux,n=Vs,a=u6;function l(o){var u=Array.from(e.apply(this,arguments),d6),d,m=u.length,p=-1,h;for(const v of o)for(d=0,++p;d<m;++d)(u[d][p]=[0,+a(v,u[d].key,p,o)]).data=v;for(d=0,h=Zb(r(u));d<m;++d)u[h[d]].index=d;return n(u,h),u}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Ct(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:Ct(+o),l):a},l.order=function(o){return arguments.length?(r=o==null?Ux:typeof o=="function"?o:Ct(Array.from(o)),l):r},l.offset=function(o){return arguments.length?(n=o??Vs,l):n},l}function f6(e,r){if((a=e.length)>0){for(var n,a,l=0,o=e[0].length,u;l<o;++l){for(u=n=0;n<a;++n)u+=e[n][l][1]||0;if(u)for(n=0;n<a;++n)e[n][l][1]/=u}Vs(e,r)}}function p6(e,r){if((l=e.length)>0){for(var n=0,a=e[r[0]],l,o=a.length;n<o;++n){for(var u=0,d=0;u<l;++u)d+=e[u][n][1]||0;a[n][1]+=a[n][0]=-d/2}Vs(e,r)}}function h6(e,r){if(!(!((u=e.length)>0)||!((o=(l=e[r[0]]).length)>0))){for(var n=0,a=1,l,o,u;a<o;++a){for(var d=0,m=0,p=0;d<u;++d){for(var h=e[r[d]],v=h[a][1]||0,b=h[a-1][1]||0,x=(v-b)/2,j=0;j<d;++j){var _=e[r[j]],C=_[a][1]||0,w=_[a-1][1]||0;x+=C-w}m+=v,p+=x*v}l[a-1][1]+=l[a-1][0]=n,m&&(n-=p/m)}l[a-1][1]+=l[a-1][0]=n,Vs(e,r)}}var Xv={},Zv={},aS;function v6(){return aS||(aS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n==="__proto__"}e.isUnsafeProperty=r})(Zv)),Zv}var Jv={},iS;function yz(){return iS||(iS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=r})(Jv)),Jv}var eg={},sS;function ey(){return sS||(sS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=r})(eg)),eg}var tg={},rg={},lS;function g6(){return lS||(lS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(r).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=r})(rg)),rg}var oS;function ty(){return oS||(oS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=g6(),n=ey();function a(l){if(Array.isArray(l))return l.map(n.toKey);if(typeof l=="symbol")return[l];l=r.toString(l);const o=[],u=l.length;if(u===0)return o;let d=0,m="",p="",h=!1;for(l.charCodeAt(0)===46&&(o.push(""),d++);d<u;){const v=l[d];p?v==="\\"&&d+1<u?(d++,m+=l[d]):v===p?p="":m+=v:h?v==='"'||v==="'"?p=v:v==="]"?(h=!1,o.push(m),m=""):m+=v:v==="["?(h=!0,m&&(o.push(m),m="")):v==="."?m&&(o.push(m),m=""):m+=v,d++}return m&&o.push(m),o}e.toPath=a})(tg)),tg}var cS;function ry(){return cS||(cS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=v6(),n=yz(),a=ey(),l=ty();function o(d,m,p){if(d==null)return p;switch(typeof m){case"string":{if(r.isUnsafeProperty(m))return p;const h=d[m];return h===void 0?n.isDeepKey(m)?o(d,l.toPath(m),p):p:h}case"number":case"symbol":{typeof m=="number"&&(m=a.toKey(m));const h=d[m];return h===void 0?p:h}default:{if(Array.isArray(m))return u(d,m,p);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),r.isUnsafeProperty(m))return p;const h=d[m];return h===void 0?p:h}}}function u(d,m,p){if(m.length===0)return p;let h=d;for(let v=0;v<m.length;v++){if(h==null||r.isUnsafeProperty(m[v]))return p;h=h[m[v]]}return h===void 0?p:h}e.get=o})(Xv)),Xv}var ng,uS;function x6(){return uS||(uS=1,ng=ry().get),ng}var b6=x6();const po=oi(b6);var y6=4;function Yi(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y6,n=10**r,a=Math.round(e*n)/n;return Object.is(a,-0)?0:a}function Ut(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return e.reduce((l,o,u)=>{var d=n[u-1];return typeof d=="string"?l+d+o:d!==void 0?l+Yi(d)+o:l+o},"")}var tn=e=>e===0?0:e>0?1:-1,_a=e=>typeof e=="number"&&e!=+e,Qs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,De=e=>(typeof e=="number"||e instanceof Number)&&!_a(e),Na=e=>De(e)||typeof e=="string",j6=0,Gc=e=>{var r=++j6;return"".concat(e||"").concat(r)},ta=function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(r)&&typeof r!="string")return a;var o;if(Qs(r)){if(n==null)return a;var u=r.indexOf("%");o=n*parseFloat(r.slice(0,u))/100}else o=+r;return _a(o)&&(o=a),l&&n!=null&&o>n&&(o=n),o},jz=e=>{if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[String(e[a])])n[String(e[a])]=!0;else return!0;return!1};function Ft(e,r,n){return De(e)&&De(r)?Yi(e+n*(r-e)):r}function _z(e,r,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof r=="function"?r(a):po(a,r))===n)}var qt=e=>e===null||typeof e>"u",du=e=>qt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function rn(e){return e!=null}function nl(){}var _6=["type","size","sizeType"];function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fx.apply(null,arguments)}function dS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function mS(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?dS(Object(n),!0).forEach(function(a){N6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function N6(e,r,n){return(r=S6(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function S6(e){var r=w6(e,"string");return typeof r=="symbol"?r:r+""}function w6(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function C6(e,r){if(e==null)return{};var n,a,l=E6(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function E6(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Nz={symbolCircle:Jb,symbolCross:UI,symbolDiamond:GI,symbolSquare:HI,symbolStar:KI,symbolTriangle:WI,symbolWye:ZI},A6=Math.PI/180,z6=e=>{var r="symbol".concat(du(e));return Nz[r]||Jb},k6=(e,r,n)=>{if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*A6;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},O6=(e,r)=>{Nz["symbol".concat(du(e))]=r},Sz=e=>{var{type:r="circle",size:n=64,sizeType:a="area"}=e,l=C6(e,_6),o=mS(mS({},l),{},{type:r,size:n,sizeType:a}),u="circle";typeof r=="string"&&(u=r);var d=()=>{var b=z6(u),x=JI().type(b).size(k6(n,a,u)),j=x();if(j!==null)return j},{className:m,cx:p,cy:h}=o,v=Ur(o);return De(p)&&De(h)&&De(n)?g.createElement("path",Fx({},v,{className:Nt("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};Sz.registerSymbol=O6;var wz=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,ny=(e,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(l=>{Wb(l)&&(a[l]=(o=>n[l](n,o)))}),a},D6=(e,r,n)=>a=>(e(r,n,a),null),ay=(e,r,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];Wb(l)&&typeof o=="function"&&(a||(a={}),a[l]=D6(o,r,n))}),a};function fS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function P6(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?fS(Object(n),!0).forEach(function(a){M6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function M6(e,r,n){return(r=T6(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function T6(e){var r=q6(e,"string");return typeof r=="symbol"?r:r+""}function q6(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Hr(e,r){var n=P6({},e),a=r,l=Object.keys(r),o=l.reduce((u,d)=>(u[d]===void 0&&a[d]!==void 0&&(u[d]=a[d]),u),n);return o}var ag={},ig={},pS;function R6(){return pS||(pS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a){const l=new Map;for(let o=0;o<n.length;o++){const u=n[o],d=a(u,o,n);l.has(d)||l.set(d,u)}return Array.from(l.values())}e.uniqBy=r})(ig)),ig}var sg={},hS;function I6(){return hS||(hS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a){return function(...l){return n.apply(this,l.slice(0,a))}}e.ary=r})(sg)),sg}var lg={},vS;function Cz(){return vS||(vS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n}e.identity=r})(lg)),lg}var og={},cg={},ug={},gS;function L6(){return gS||(gS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=r})(ug)),ug}var xS;function iy(){return xS||(xS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=L6();function n(a){return a!=null&&typeof a!="function"&&r.isLength(a.length)}e.isArrayLike=n})(cg)),cg}var dg={},bS;function $6(){return bS||(bS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="object"&&n!==null}e.isObjectLike=r})(dg)),dg}var yS;function B6(){return yS||(yS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=iy(),n=$6();function a(l){return n.isObjectLike(l)&&r.isArrayLike(l)}e.isArrayLikeObject=a})(og)),og}var mg={},fg={},jS;function U6(){return jS||(jS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=ry();function n(a){return function(l){return r.get(l,a)}}e.property=n})(fg)),fg}var pg={},hg={},vg={},gg={},_S;function Ez(){return _S||(_S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=r})(gg)),gg}var xg={},NS;function Az(){return NS||(NS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=r})(xg)),xg}var bg={},SS;function zz(){return SS||(SS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.isEqualsSameValueZero=r})(bg)),bg}var wS;function F6(){return wS||(wS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Ez(),n=Az(),a=zz();function l(h,v,b){return typeof b!="function"?l(h,v,()=>{}):o(h,v,function x(j,_,C,w,E,S){const A=b(j,_,C,w,E,S);return A!==void 0?!!A:o(j,_,x,S)},new Map)}function o(h,v,b,x){if(v===h)return!0;switch(typeof v){case"object":return u(h,v,b,x);case"function":return Object.keys(v).length>0?o(h,{...v},b,x):a.isEqualsSameValueZero(h,v);default:return r.isObject(h)?typeof v=="string"?v==="":!0:a.isEqualsSameValueZero(h,v)}}function u(h,v,b,x){if(v==null)return!0;if(Array.isArray(v))return m(h,v,b,x);if(v instanceof Map)return d(h,v,b,x);if(v instanceof Set)return p(h,v,b,x);const j=Object.keys(v);if(h==null||n.isPrimitive(h))return j.length===0;if(j.length===0)return!0;if(x?.has(v))return x.get(v)===h;x?.set(v,h);try{for(let _=0;_<j.length;_++){const C=j[_];if(!n.isPrimitive(h)&&!(C in h)||v[C]===void 0&&h[C]!==void 0||v[C]===null&&h[C]!==null||!b(h[C],v[C],C,h,v,x))return!1}return!0}finally{x?.delete(v)}}function d(h,v,b,x){if(v.size===0)return!0;if(!(h instanceof Map))return!1;for(const[j,_]of v.entries()){const C=h.get(j);if(b(C,_,j,h,v,x)===!1)return!1}return!0}function m(h,v,b,x){if(v.length===0)return!0;if(!Array.isArray(h))return!1;const j=new Set;for(let _=0;_<v.length;_++){const C=v[_];let w=!1;for(let E=0;E<h.length;E++){if(j.has(E))continue;const S=h[E];let A=!1;if(b(S,C,_,h,v,x)&&(A=!0),A){j.add(E),w=!0;break}}if(!w)return!1}return!0}function p(h,v,b,x){return v.size===0?!0:h instanceof Set?m([...h],[...v],b,x):!1}e.isMatchWith=l,e.isSetMatch=p})(vg)),vg}var CS;function kz(){return CS||(CS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=F6();function n(a,l){return r.isMatchWith(a,l,()=>{})}e.isMatch=n})(hg)),hg}var yg={},jg={},_g={},ES;function G6(){return ES||(ES=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=r})(_g)),_g}var Ng={},AS;function sy(){return AS||(AS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=r})(Ng)),Ng}var Sg={},zS;function Oz(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r="[object RegExp]",n="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",u="[object Symbol]",d="[object Date]",m="[object Map]",p="[object Set]",h="[object Array]",v="[object Function]",b="[object ArrayBuffer]",x="[object Object]",j="[object Error]",_="[object DataView]",C="[object Uint8Array]",w="[object Uint8ClampedArray]",E="[object Uint16Array]",S="[object Uint32Array]",A="[object BigUint64Array]",z="[object Int8Array]",k="[object Int16Array]",M="[object Int32Array]",D="[object BigInt64Array]",$="[object Float32Array]",B="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=b,e.arrayTag=h,e.bigInt64ArrayTag=D,e.bigUint64ArrayTag=A,e.booleanTag=l,e.dataViewTag=_,e.dateTag=d,e.errorTag=j,e.float32ArrayTag=$,e.float64ArrayTag=B,e.functionTag=v,e.int16ArrayTag=k,e.int32ArrayTag=M,e.int8ArrayTag=z,e.mapTag=m,e.numberTag=a,e.objectTag=x,e.regexpTag=r,e.setTag=p,e.stringTag=n,e.symbolTag=u,e.uint16ArrayTag=E,e.uint32ArrayTag=S,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=w})(Sg)),Sg}var wg={},kS;function H6(){return kS||(kS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=r})(wg)),wg}var OS;function Dz(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=G6(),n=sy(),a=Oz(),l=Az(),o=H6();function u(h,v){return d(h,void 0,h,new Map,v)}function d(h,v,b,x=new Map,j=void 0){const _=j?.(h,v,b,x);if(_!==void 0)return _;if(l.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const C=new Array(h.length);x.set(h,C);for(let w=0;w<h.length;w++)C[w]=d(h[w],w,b,x,j);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;x.set(h,C);for(const[w,E]of h)C.set(w,d(E,w,b,x,j));return C}if(h instanceof Set){const C=new Set;x.set(h,C);for(const w of h)C.add(d(w,void 0,b,x,j));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,C);for(let w=0;w<h.length;w++)C[w]=d(h[w],w,b,x,j);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,C),m(C,h,b,x,j),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return x.set(h,C),m(C,h,b,x,j),C}if(typeof Blob<"u"&&h instanceof Blob){const C=new Blob([h],{type:h.type});return x.set(h,C),m(C,h,b,x,j),C}if(h instanceof Error){const C=new h.constructor;return x.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,m(C,h,b,x,j),C}if(h instanceof Boolean){const C=new Boolean(h.valueOf());return x.set(h,C),m(C,h,b,x,j),C}if(h instanceof Number){const C=new Number(h.valueOf());return x.set(h,C),m(C,h,b,x,j),C}if(h instanceof String){const C=new String(h.valueOf());return x.set(h,C),m(C,h,b,x,j),C}if(typeof h=="object"&&p(h)){const C=Object.create(Object.getPrototypeOf(h));return x.set(h,C),m(C,h,b,x,j),C}return h}function m(h,v,b=h,x,j){const _=[...Object.keys(v),...r.getSymbols(v)];for(let C=0;C<_.length;C++){const w=_[C],E=Object.getOwnPropertyDescriptor(h,w);(E==null||E.writable)&&(h[w]=d(v[w],w,b,x,j))}}function p(h){switch(n.getTag(h)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=d,e.copyProperties=m})(jg)),jg}var DS;function V6(){return DS||(DS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Dz();function n(a){return r.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(yg)),yg}var PS;function Q6(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=kz(),n=V6();function a(l){return l=n.cloneDeep(l),o=>r.isMatch(o,l)}e.matches=a})(pg)),pg}var Cg={},Eg={},Ag={},MS;function Y6(){return MS||(MS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Dz(),n=sy(),a=Oz();function l(o,u){return r.cloneDeepWith(o,(d,m,p,h)=>{const v=u?.(d,m,p,h);if(v!==void 0)return v;if(typeof o=="object"){if(n.getTag(o)===a.objectTag&&typeof o.constructor!="function"){const b={};return h.set(o,b),r.copyProperties(b,o,p,h),b}switch(Object.prototype.toString.call(o)){case a.numberTag:case a.stringTag:case a.booleanTag:{const b=new o.constructor(o?.valueOf());return r.copyProperties(b,o),b}case a.argumentsTag:{const b={};return r.copyProperties(b,o),b.length=o.length,b[Symbol.iterator]=o[Symbol.iterator],b}default:return}}})}e.cloneDeepWith=l})(Ag)),Ag}var TS;function K6(){return TS||(TS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Y6();function n(a){return r.cloneDeepWith(a)}e.cloneDeep=n})(Eg)),Eg}var zg={},kg={},qS;function Pz(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;function n(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return r.test(a)}}e.isIndex=n})(kg)),kg}var Og={},RS;function W6(){return RS||(RS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=sy();function n(a){return a!==null&&typeof a=="object"&&r.getTag(a)==="[object Arguments]"}e.isArguments=n})(Og)),Og}var IS;function X6(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=yz(),n=Pz(),a=W6(),l=ty();function o(u,d){let m;if(Array.isArray(d)?m=d:typeof d=="string"&&r.isDeepKey(d)&&u?.[d]==null?m=l.toPath(d):m=[d],m.length===0)return!1;let p=u;for(let h=0;h<m.length;h++){const v=m[h];if((p==null||!Object.hasOwn(p,v))&&!((Array.isArray(p)||a.isArguments(p))&&n.isIndex(v)&&v<p.length))return!1;p=p[v]}return!0}e.has=o})(zg)),zg}var LS;function Z6(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=kz(),n=ey(),a=K6(),l=ry(),o=X6();function u(d,m){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return m=a.cloneDeep(m),function(p){const h=l.get(p,d);return h===void 0?o.has(p,d):m===void 0?h===void 0:r.isMatch(h,m)}}e.matchesProperty=u})(Cg)),Cg}var $S;function J6(){return $S||($S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Cz(),n=U6(),a=Q6(),l=Z6();function o(u){if(u==null)return r.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):a.matches(u);case"string":case"symbol":case"number":return n.property(u)}}e.iteratee=o})(mg)),mg}var BS;function e4(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=R6(),n=I6(),a=Cz(),l=B6(),o=J6();function u(d,m=a.identity){return l.isArrayLikeObject(d)?r.uniqBy(Array.from(d),n.ary(o.iteratee(m),1)):[]}e.uniqBy=u})(ag)),ag}var Dg,US;function t4(){return US||(US=1,Dg=e4().uniqBy),Dg}var r4=t4();const FS=oi(r4);function n4(e,r,n){return r===!0?FS(e,n):typeof r=="function"?FS(e,r):e}var Pg={exports:{}},Mg={},Tg={exports:{}},qg={};var GS;function a4(){if(GS)return qg;GS=1;var e=Cf();function r(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:r,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function d(v,b){var x=b(),j=a({inst:{value:x,getSnapshot:b}}),_=j[0].inst,C=j[1];return o(function(){_.value=x,_.getSnapshot=b,m(_)&&C({inst:_})},[v,x,b]),l(function(){return m(_)&&C({inst:_}),v(function(){m(_)&&C({inst:_})})},[v]),u(x),x}function m(v){var b=v.getSnapshot;v=v.value;try{var x=b();return!n(v,x)}catch{return!0}}function p(v,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return qg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,qg}var HS;function i4(){return HS||(HS=1,Tg.exports=a4()),Tg.exports}var VS;function s4(){if(VS)return Mg;VS=1;var e=Cf(),r=i4();function n(p,h){return p===h&&(p!==0||1/p===1/h)||p!==p&&h!==h}var a=typeof Object.is=="function"?Object.is:n,l=r.useSyncExternalStore,o=e.useRef,u=e.useEffect,d=e.useMemo,m=e.useDebugValue;return Mg.useSyncExternalStoreWithSelector=function(p,h,v,b,x){var j=o(null);if(j.current===null){var _={hasValue:!1,value:null};j.current=_}else _=j.current;j=d(function(){function w(k){if(!E){if(E=!0,S=k,k=b(k),x!==void 0&&_.hasValue){var M=_.value;if(x(M,k))return A=M}return A=k}if(M=A,a(S,k))return M;var D=b(k);return x!==void 0&&x(M,D)?(S=k,M):(S=k,A=D)}var E=!1,S,A,z=v===void 0?null:v;return[function(){return w(h())},z===null?void 0:function(){return w(z())}]},[h,v,b,x]);var C=l(p,j[0],j[1]);return u(function(){_.hasValue=!0,_.value=C},[C]),m(C),C},Mg}var QS;function l4(){return QS||(QS=1,Pg.exports=s4()),Pg.exports}var o4=l4(),ly=g.createContext(null),c4=e=>e,Qt=()=>{var e=g.useContext(ly);return e?e.store.dispatch:c4},dm=()=>{},u4=()=>dm,d4=(e,r)=>e===r;function Ie(e){var r=g.useContext(ly),n=g.useMemo(()=>r?a=>{if(a!=null)return e(a)}:dm,[r,e]);return o4.useSyncExternalStoreWithSelector(r?r.subscription.addNestedSub:u4,r?r.store.getState:dm,r?r.store.getState:dm,n,d4)}function m4(e,r=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(r)}function f4(e,r=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(r)}function p4(e,r="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${r}[${n}]`)}}var YS=e=>Array.isArray(e)?e:[e];function h4(e){const r=Array.isArray(e[0])?e[0]:e;return p4(r,"createSelector expects all input-selectors to be functions, but received the following types: "),r}function v4(e,r){const n=[],{length:a}=e;for(let l=0;l<a;l++)n.push(e[l].apply(null,r));return n}var g4=class{constructor(e){this.value=e}deref(){return this.value}},x4=typeof WeakRef<"u"?WeakRef:g4,b4=0,KS=1;function Gd(){return{s:b4,v:void 0,o:null,p:null}}function Mz(e,r={}){let n=Gd();const{resultEqualityCheck:a}=r;let l,o=0;function u(){let d=n;const{length:m}=arguments;for(let v=0,b=m;v<b;v++){const x=arguments[v];if(typeof x=="function"||typeof x=="object"&&x!==null){let j=d.o;j===null&&(d.o=j=new WeakMap);const _=j.get(x);_===void 0?(d=Gd(),j.set(x,d)):d=_}else{let j=d.p;j===null&&(d.p=j=new Map);const _=j.get(x);_===void 0?(d=Gd(),j.set(x,d)):d=_}}const p=d;let h;if(d.s===KS)h=d.v;else if(h=e.apply(null,arguments),o++,a){const v=l?.deref?.()??l;v!=null&&a(v,h)&&(h=v,o!==0&&o--),l=typeof h=="object"&&h!==null||typeof h=="function"?new x4(h):h}return p.s=KS,p.v=h,h}return u.clearCache=()=>{n=Gd(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function y4(e,...r){const n=typeof e=="function"?{memoize:e,memoizeOptions:r}:e,a=(...l)=>{let o=0,u=0,d,m={},p=l.pop();typeof p=="object"&&(m=p,p=l.pop()),m4(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const h={...n,...m},{memoize:v,memoizeOptions:b=[],argsMemoize:x=Mz,argsMemoizeOptions:j=[]}=h,_=YS(b),C=YS(j),w=h4(l),E=v(function(){return o++,p.apply(null,arguments)},..._),S=x(function(){u++;const z=v4(w,arguments);return d=E.apply(null,z),d},...C);return Object.assign(S,{resultFunc:p,memoizedResultFunc:E,dependencies:w,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:x})};return Object.assign(a,{withTypes:()=>a}),a}var me=y4(Mz),j4=Object.assign((e,r=me)=>{f4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(o=>e[o]);return r(a,(...o)=>o.reduce((u,d,m)=>(u[n[m]]=d,u),{}))},{withTypes:()=>j4}),Rg={},Ig={},Lg={},WS;function _4(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,l,o)=>{if(a!==l){const u=r(a),d=r(l);if(u===d&&u===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?d-u:u-d}return 0};e.compareValues=n})(Lg)),Lg}var $g={},Bg={},XS;function Tz(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=r})(Bg)),Bg}var ZS;function N4(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Tz(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,u){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||r.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||u!=null&&Object.hasOwn(u,o)}e.isKey=l})($g)),$g}var JS;function S4(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=_4(),n=N4(),a=ty();function l(o,u,d,m){if(o==null)return[];d=m?void 0:d,Array.isArray(o)||(o=Object.values(o)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(x=>String(x));const p=(x,j)=>{let _=x;for(let C=0;C<j.length&&_!=null;++C)_=_[j[C]];return _},h=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:p(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?p(j,x):typeof j=="object"?j[x]:j,v=u.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:a.toPath(x)}));return o.map(x=>({original:x,criteria:v.map(j=>h(j,x))})).slice().sort((x,j)=>{for(let _=0;_<v.length;_++){const C=r.compareValues(x.criteria[_],j.criteria[_],d[_]);if(C!==0)return C}return 0}).map(x=>x.original)}e.orderBy=l})(Ig)),Ig}var Ug={},ew;function w4(){return ew||(ew=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a=1){const l=[],o=Math.floor(a),u=(d,m)=>{for(let p=0;p<d.length;p++){const h=d[p];Array.isArray(h)&&m<o?u(h,m+1):l.push(h)}};return u(n,0),l}e.flatten=r})(Ug)),Ug}var Fg={},tw;function qz(){return tw||(tw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Pz(),n=iy(),a=Ez(),l=zz();function o(u,d,m){return a.isObject(m)&&(typeof d=="number"&&n.isArrayLike(m)&&r.isIndex(d)&&d<m.length||typeof d=="string"&&d in m)?l.isEqualsSameValueZero(m[d],u):!1}e.isIterateeCall=o})(Fg)),Fg}var rw;function C4(){return rw||(rw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=S4(),n=w4(),a=qz();function l(o,...u){const d=u.length;return d>1&&a.isIterateeCall(o,u[0],u[1])?u=[]:d>2&&a.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),r.orderBy(o,n.flatten(u),["asc"])}e.sortBy=l})(Rg)),Rg}var Gg,nw;function E4(){return nw||(nw=1,Gg=C4().sortBy),Gg}var A4=E4();const Df=oi(A4);var Rz=e=>e.legend.settings,z4=e=>e.legend.size,k4=e=>e.legend.payload;me([k4,Rz],(e,r)=>{var{itemSorter:n}=r,a=e.flat(1);return n?Df(a,n):a});var Hd=1;function O4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[r,n]=g.useState({height:0,left:0,top:0,width:0}),a=g.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),u={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(u.height-r.height)>Hd||Math.abs(u.left-r.left)>Hd||Math.abs(u.top-r.top)>Hd||Math.abs(u.width-r.width)>Hd)&&n({height:u.height,left:u.left,top:u.top,width:u.width})}},[r.width,r.height,r.top,r.left,...e]);return[r,a]}function Er(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var D4=typeof Symbol=="function"&&Symbol.observable||"@@observable",aw=D4,Hg=()=>Math.random().toString(36).substring(7).split("").join("."),P4={INIT:`@@redux/INIT${Hg()}`,REPLACE:`@@redux/REPLACE${Hg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Hg()}`},zm=P4;function oy(e){if(typeof e!="object"||e===null)return!1;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r||Object.getPrototypeOf(e)===null}function Iz(e,r,n){if(typeof e!="function")throw new Error(Er(2));if(typeof r=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof r=="function"&&typeof n>"u"&&(n=r,r=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Er(1));return n(Iz)(e,r)}let a=e,l=r,o=new Map,u=o,d=0,m=!1;function p(){u===o&&(u=new Map,o.forEach((C,w)=>{u.set(w,C)}))}function h(){if(m)throw new Error(Er(3));return l}function v(C){if(typeof C!="function")throw new Error(Er(4));if(m)throw new Error(Er(5));let w=!0;p();const E=d++;return u.set(E,C),function(){if(w){if(m)throw new Error(Er(6));w=!1,p(),u.delete(E),o=null}}}function b(C){if(!oy(C))throw new Error(Er(7));if(typeof C.type>"u")throw new Error(Er(8));if(typeof C.type!="string")throw new Error(Er(17));if(m)throw new Error(Er(9));try{m=!0,l=a(l,C)}finally{m=!1}return(o=u).forEach(E=>{E()}),C}function x(C){if(typeof C!="function")throw new Error(Er(10));a=C,b({type:zm.REPLACE})}function j(){const C=v;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Er(11));function E(){const A=w;A.next&&A.next(h())}return E(),{unsubscribe:C(E)}},[aw](){return this}}}return b({type:zm.INIT}),{dispatch:b,subscribe:v,getState:h,replaceReducer:x,[aw]:j}}function M4(e){Object.keys(e).forEach(r=>{const n=e[r];if(typeof n(void 0,{type:zm.INIT})>"u")throw new Error(Er(12));if(typeof n(void 0,{type:zm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Er(13))})}function Lz(e){const r=Object.keys(e),n={};for(let o=0;o<r.length;o++){const u=r[o];typeof e[u]=="function"&&(n[u]=e[u])}const a=Object.keys(n);let l;try{M4(n)}catch(o){l=o}return function(u={},d){if(l)throw l;let m=!1;const p={};for(let h=0;h<a.length;h++){const v=a[h],b=n[v],x=u[v],j=b(x,d);if(typeof j>"u")throw d&&d.type,new Error(Er(14));p[v]=j,m=m||j!==x}return m=m||a.length!==Object.keys(u).length,m?p:u}}function km(...e){return e.length===0?r=>r:e.length===1?e[0]:e.reduce((r,n)=>(...a)=>r(n(...a)))}function T4(...e){return r=>(n,a)=>{const l=r(n,a);let o=()=>{throw new Error(Er(15))};const u={getState:l.getState,dispatch:(m,...p)=>o(m,...p)},d=e.map(m=>m(u));return o=km(...d)(l.dispatch),{...l,dispatch:o}}}function $z(e){return oy(e)&&"type"in e&&typeof e.type=="string"}var Bz=Symbol.for("immer-nothing"),iw=Symbol.for("immer-draftable"),Fr=Symbol.for("immer-state");function Wn(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var vn=Object,ho=vn.getPrototypeOf,Om="constructor",Pf="prototype",Gx="configurable",Dm="enumerable",mm="writable",Hc="value",ti=e=>!!e&&!!e[Fr];function ra(e){return e?Uz(e)||Tf(e)||!!e[iw]||!!e[Om]?.[iw]||qf(e)||Rf(e):!1}var q4=vn[Pf][Om].toString(),sw=new WeakMap;function Uz(e){if(!e||!cy(e))return!1;const r=ho(e);if(r===null||r===vn[Pf])return!0;const n=vn.hasOwnProperty.call(r,Om)&&r[Om];if(n===Object)return!0;if(!ao(n))return!1;let a=sw.get(n);return a===void 0&&(a=Function.toString.call(n),sw.set(n,a)),a===q4}function Mf(e,r,n=!0){mu(e)===0?(n?Reflect.ownKeys(e):vn.keys(e)).forEach(l=>{r(l,e[l],e)}):e.forEach((a,l)=>r(l,a,e))}function mu(e){const r=e[Fr];return r?r.type_:Tf(e)?1:qf(e)?2:Rf(e)?3:0}var lw=(e,r,n=mu(e))=>n===2?e.has(r):vn[Pf].hasOwnProperty.call(e,r),Hx=(e,r,n=mu(e))=>n===2?e.get(r):e[r],Pm=(e,r,n,a=mu(e))=>{a===2?e.set(r,n):a===3?e.add(n):e[r]=n};function R4(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}var Tf=Array.isArray,qf=e=>e instanceof Map,Rf=e=>e instanceof Set,cy=e=>typeof e=="object",ao=e=>typeof e=="function",Vg=e=>typeof e=="boolean";function I4(e){const r=+e;return Number.isInteger(r)&&String(r)===e}var Qa=e=>e.copy_||e.base_,uy=e=>e.modified_?e.copy_:e.base_;function Vx(e,r){if(qf(e))return new Map(e);if(Rf(e))return new Set(e);if(Tf(e))return Array[Pf].slice.call(e);const n=Uz(e);if(r===!0||r==="class_only"&&!n){const a=vn.getOwnPropertyDescriptors(e);delete a[Fr];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d[mm]===!1&&(d[mm]=!0,d[Gx]=!0),(d.get||d.set)&&(a[u]={[Gx]:!0,[mm]:!0,[Dm]:d[Dm],[Hc]:e[u]})}return vn.create(ho(e),a)}else{const a=ho(e);if(a!==null&&n)return{...e};const l=vn.create(a);return vn.assign(l,e)}}function dy(e,r=!1){return If(e)||ti(e)||!ra(e)||(mu(e)>1&&vn.defineProperties(e,{set:Vd,add:Vd,clear:Vd,delete:Vd}),vn.freeze(e),r&&Mf(e,(n,a)=>{dy(a,!0)},!1)),e}function L4(){Wn(2)}var Vd={[Hc]:L4};function If(e){return e===null||!cy(e)?!0:vn.isFrozen(e)}var Mm="MapSet",Qx="Patches",ow="ArrayMethods",Fz={};function Ys(e){const r=Fz[e];return r||Wn(0,e),r}var cw=e=>!!Fz[e],Vc,Gz=()=>Vc,$4=(e,r)=>({drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:cw(Mm)?Ys(Mm):void 0,arrayMethodsPlugin_:cw(ow)?Ys(ow):void 0});function uw(e,r){r&&(e.patchPlugin_=Ys(Qx),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function Yx(e){Kx(e),e.drafts_.forEach(B4),e.drafts_=null}function Kx(e){e===Vc&&(Vc=e.parent_)}var dw=e=>Vc=$4(Vc,e);function B4(e){const r=e[Fr];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function mw(e,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];if(e!==void 0&&e!==n){n[Fr].modified_&&(Yx(r),Wn(4)),ra(e)&&(e=fw(r,e));const{patchPlugin_:l}=r;l&&l.generateReplacementPatches_(n[Fr].base_,e,r)}else e=fw(r,n);return U4(r,e,!0),Yx(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==Bz?e:void 0}function fw(e,r){if(If(r))return r;const n=r[Fr];if(!n)return Tm(r,e.handledSet_,e);if(!Lf(n,e))return r;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);Qz(n,e)}return n.copy_}function U4(e,r,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&dy(r,n)}function Hz(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Lf=(e,r)=>e.scope_===r,F4=[];function Vz(e,r,n,a){const l=Qa(e),o=e.type_;if(a!==void 0&&Hx(l,a,o)===r){Pm(l,a,n,o);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;Mf(l,(m,p)=>{if(ti(p)){const h=d.get(p)||[];h.push(m),d.set(p,h)}})}const u=e.draftLocations_.get(r)??F4;for(const d of u)Pm(l,d,n,o)}function G4(e,r,n){e.callbacks_.push(function(l){const o=r;if(!o||!Lf(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const u=uy(o);Vz(e,o.draft_??o,u,n),Qz(o,l)})}function Qz(e,r){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=r;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,r)}Hz(e)}}function H4(e,r,n){const{scope_:a}=e;if(ti(n)){const l=n[Fr];Lf(l,a)&&l.callbacks_.push(function(){fm(e);const u=uy(l);Vz(e,n,u,r)})}else ra(n)&&e.callbacks_.push(function(){const o=Qa(e);e.type_===3?o.has(n)&&Tm(n,a.handledSet_,a):Hx(o,r,e.type_)===n&&a.drafts_.length>1&&(e.assigned_.get(r)??!1)===!0&&e.copy_&&Tm(Hx(e.copy_,r,e.type_),a.handledSet_,a)})}function Tm(e,r,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||ti(e)||r.has(e)||!ra(e)||If(e)||(r.add(e),Mf(e,(a,l)=>{if(ti(l)){const o=l[Fr];if(Lf(o,n)){const u=uy(o);Pm(e,a,u,e.type_),Hz(o)}}else ra(l)&&Tm(l,r,n)})),e}function V4(e,r){const n=Tf(e),a={type_:n?1:0,scope_:r?r.scope_:Gz(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=a,o=qm;n&&(l=[a],o=Qc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,[d,a]}var qm={get(e,r){if(r===Fr)return e;let n=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof r=="string";if(a&&n?.isArrayOperationMethod(r))return n.createMethodInterceptor(e,r);const l=Qa(e);if(!lw(l,r,e.type_))return Q4(e,l,r);const o=l[r];if(e.finalized_||!ra(o)||a&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&I4(r))return o;if(o===Qg(e.base_,r)){fm(e);const u=e.type_===1?+r:r,d=Xx(e.scope_,o,e,u);return e.copy_[u]=d}return o},has(e,r){return r in Qa(e)},ownKeys(e){return Reflect.ownKeys(Qa(e))},set(e,r,n){const a=Yz(Qa(e),r);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Qg(Qa(e),r),o=l?.[Fr];if(o&&o.base_===n)return e.copy_[r]=n,e.assigned_.set(r,!1),!0;if(R4(n,l)&&(n!==void 0||lw(e.base_,r,e.type_)))return!0;fm(e),Wx(e)}return e.copy_[r]===n&&(n!==void 0||r in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=n,e.assigned_.set(r,!0),H4(e,r,n)),!0},deleteProperty(e,r){return fm(e),Qg(e.base_,r)!==void 0||r in e.base_?(e.assigned_.set(r,!1),Wx(e)):e.assigned_.delete(r),e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const n=Qa(e),a=Reflect.getOwnPropertyDescriptor(n,r);return a&&{[mm]:!0,[Gx]:e.type_!==1||r!=="length",[Dm]:a[Dm],[Hc]:n[r]}},defineProperty(){Wn(11)},getPrototypeOf(e){return ho(e.base_)},setPrototypeOf(){Wn(12)}},Qc={};for(let e in qm){let r=qm[e];Qc[e]=function(){const n=arguments;return n[0]=n[0][0],r.apply(this,n)}}Qc.deleteProperty=function(e,r){return Qc.set.call(this,e,r,void 0)};Qc.set=function(e,r,n){return qm.set.call(this,e[0],r,n,e[0])};function Qg(e,r){const n=e[Fr];return(n?Qa(n):e)[r]}function Q4(e,r,n){const a=Yz(r,n);return a?Hc in a?a[Hc]:a.get?.call(e.draft_):void 0}function Yz(e,r){if(!(r in e))return;let n=ho(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,r);if(a)return a;n=ho(n)}}function Wx(e){e.modified_||(e.modified_=!0,e.parent_&&Wx(e.parent_))}function fm(e){e.copy_||(e.assigned_=new Map,e.copy_=Vx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Y4=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,a,l)=>{if(ao(n)&&!ao(a)){const u=a;a=n;const d=this;return function(p=u,...h){return d.produce(p,v=>a.call(this,v,...h))}}ao(a)||Wn(6),l!==void 0&&!ao(l)&&Wn(7);let o;if(ra(n)){const u=dw(this),d=Xx(u,n,void 0);let m=!0;try{o=a(d),m=!1}finally{m?Yx(u):Kx(u)}return uw(u,l),mw(o,u)}else if(!n||!cy(n)){if(o=a(n),o===void 0&&(o=n),o===Bz&&(o=void 0),this.autoFreeze_&&dy(o,!0),l){const u=[],d=[];Ys(Qx).generateReplacementPatches_(n,o,{patches_:u,inversePatches_:d}),l(u,d)}return o}else Wn(1,n)},this.produceWithPatches=(n,a)=>{if(ao(n))return(d,...m)=>this.produceWithPatches(d,p=>n(p,...m));let l,o;return[this.produce(n,a,(d,m)=>{l=d,o=m}),l,o]},Vg(r?.autoFreeze)&&this.setAutoFreeze(r.autoFreeze),Vg(r?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),Vg(r?.useStrictIteration)&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){ra(r)||Wn(8),ti(r)&&(r=Jn(r));const n=dw(this),a=Xx(n,r,void 0);return a[Fr].isManual_=!0,Kx(n),a}finishDraft(r,n){const a=r&&r[Fr];(!a||!a.isManual_)&&Wn(9);const{scope_:l}=a;return uw(l,n),mw(void 0,l)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,n){let a;for(a=n.length-1;a>=0;a--){const o=n[a];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}a>-1&&(n=n.slice(a+1));const l=Ys(Qx).applyPatches_;return ti(r)?l(r,n):this.produce(r,o=>l(o,n))}};function Xx(e,r,n,a){const[l,o]=qf(r)?Ys(Mm).proxyMap_(r,n):Rf(r)?Ys(Mm).proxySet_(r,n):V4(r,n);return(n?.scope_??Gz()).drafts_.push(l),o.callbacks_=n?.callbacks_??[],o.key_=a,n&&a!==void 0?G4(n,o,a):o.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:p}=m;o.modified_&&p&&p.generatePatches_(o,[],m)}),l}function Jn(e){return ti(e)||Wn(10,e),Kz(e)}function Kz(e){if(!ra(e)||If(e))return e;const r=e[Fr];let n,a=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=Vx(e,r.scope_.immer_.useStrictShallowCopy_),a=r.scope_.immer_.shouldUseStrictIteration()}else n=Vx(e,!0);return Mf(n,(l,o)=>{Pm(n,l,Kz(o))},a),r&&(r.finalized_=!1),n}var K4=new Y4,Wz=K4.produce;function Xz(e){return({dispatch:n,getState:a})=>l=>o=>typeof o=="function"?o(n,a,e):l(o)}var W4=Xz(),X4=Xz,Z4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?km:km.apply(null,arguments)};function Ln(e,r){function n(...a){if(r){let l=r(...a);if(!l)throw new Error(xn(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>$z(a)&&a.type===e,n}var Zz=class qc extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,qc.prototype)}static get[Symbol.species](){return qc}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new qc(...r[0].concat(this)):new qc(...r.concat(this))}};function pw(e){return ra(e)?Wz(e,()=>{}):e}function Qd(e,r,n){return e.has(r)?e.get(r):e.set(r,n(r)).get(r)}function J4(e){return typeof e=="boolean"}var eL=()=>function(r){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=r??{};let u=new Zz;return n&&(J4(n)?u.push(W4):u.push(X4(n.extraArgument))),u},Jz="RTK_autoBatch",Mt=()=>e=>({payload:e,meta:{[Jz]:!0}}),hw=e=>r=>{setTimeout(r,e)},ek=(e={type:"raf"})=>r=>(...n)=>{const a=r(...n);let l=!0,o=!1,u=!1;const d=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:hw(10):e.type==="callback"?e.queueNotification:hw(e.timeout),p=()=>{u=!1,o&&(o=!1,d.forEach(h=>h()))};return Object.assign({},a,{subscribe(h){const v=()=>l&&h(),b=a.subscribe(v);return d.add(h),()=>{b(),d.delete(h)}},dispatch(h){try{return l=!h?.meta?.[Jz],o=!l,o&&(u||(u=!0,m(p))),a.dispatch(h)}finally{l=!0}}})},tL=e=>function(n){const{autoBatch:a=!0}=n??{};let l=new Zz(e);return a&&l.push(ek(typeof a=="object"?a:void 0)),l};function rL(e){const r=eL(),{reducer:n=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(oy(n))d=Lz(n);else throw new Error(xn(1));let m;typeof a=="function"?m=a(r):m=r();let p=km;l&&(p=Z4({trace:!1,...typeof l=="object"&&l}));const h=T4(...m),v=tL(h);let b=typeof u=="function"?u(v):v();const x=p(...b);return Iz(d,o,x)}function tk(e){const r={},n=[];let a;const l={addCase(o,u){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(xn(28));if(d in r)throw new Error(xn(29));return r[d]=u,l},addAsyncThunk(o,u){return u.pending&&(r[o.pending.type]=u.pending),u.rejected&&(r[o.rejected.type]=u.rejected),u.fulfilled&&(r[o.fulfilled.type]=u.fulfilled),u.settled&&n.push({matcher:o.settled,reducer:u.settled}),l},addMatcher(o,u){return n.push({matcher:o,reducer:u}),l},addDefaultCase(o){return a=o,l}};return e(l),[r,n,a]}function nL(e){return typeof e=="function"}function aL(e,r){let[n,a,l]=tk(r),o;if(nL(e))o=()=>pw(e());else{const d=pw(e);o=()=>d}function u(d=o(),m){let p=[n[m.type],...a.filter(({matcher:h})=>h(m)).map(({reducer:h})=>h)];return p.filter(h=>!!h).length===0&&(p=[l]),p.reduce((h,v)=>{if(v)if(ti(h)){const x=v(h,m);return x===void 0?h:x}else{if(ra(h))return Wz(h,b=>v(b,m));{const b=v(h,m);if(b===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return h},d)}return u.getInitialState=o,u}var iL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",sL=(e=21)=>{let r="",n=e;for(;n--;)r+=iL[Math.random()*64|0];return r},lL=Symbol.for("rtk-slice-createasyncthunk");function oL(e,r){return`${e}/${r}`}function cL({creators:e}={}){const r=e?.asyncThunk?.[lL];return function(a){const{name:l,reducerPath:o=l}=a;if(!l)throw new Error(xn(11));const u=(typeof a.reducers=="function"?a.reducers(dL()):a.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(S,A){const z=typeof S=="string"?S:S.type;if(!z)throw new Error(xn(12));if(z in m.sliceCaseReducersByType)throw new Error(xn(13));return m.sliceCaseReducersByType[z]=A,p},addMatcher(S,A){return m.sliceMatchers.push({matcher:S,reducer:A}),p},exposeAction(S,A){return m.actionCreators[S]=A,p},exposeCaseReducer(S,A){return m.sliceCaseReducersByName[S]=A,p}};d.forEach(S=>{const A=u[S],z={reducerName:S,type:oL(l,S),createNotation:typeof a.reducers=="function"};fL(A)?hL(z,A,p,r):mL(z,A,p)});function h(){const[S={},A=[],z=void 0]=typeof a.extraReducers=="function"?tk(a.extraReducers):[a.extraReducers],k={...S,...m.sliceCaseReducersByType};return aL(a.initialState,M=>{for(let D in k)M.addCase(D,k[D]);for(let D of m.sliceMatchers)M.addMatcher(D.matcher,D.reducer);for(let D of A)M.addMatcher(D.matcher,D.reducer);z&&M.addDefaultCase(z)})}const v=S=>S,b=new Map,x=new WeakMap;let j;function _(S,A){return j||(j=h()),j(S,A)}function C(){return j||(j=h()),j.getInitialState()}function w(S,A=!1){function z(M){let D=M[S];return typeof D>"u"&&A&&(D=Qd(x,z,C)),D}function k(M=v){const D=Qd(b,A,()=>new WeakMap);return Qd(D,M,()=>{const $={};for(const[B,H]of Object.entries(a.selectors??{}))$[B]=uL(H,M,()=>Qd(x,M,C),A);return $})}return{reducerPath:S,getSelectors:k,get selectors(){return k(z)},selectSlice:z}}const E={name:l,reducer:_,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:C,...w(o),injectInto(S,{reducerPath:A,...z}={}){const k=A??o;return S.inject({reducerPath:k,reducer:_},z),{...E,...w(k,!0)}}};return E}}function uL(e,r,n,a){function l(o,...u){let d=r(o);return typeof d>"u"&&a&&(d=n()),e(d,...u)}return l.unwrapped=e,l}var an=cL();function dL(){function e(r,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...n}}return e.withTypes=()=>e,{reducer(r){return Object.assign({[r.name](...n){return r(...n)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:n}},asyncThunk:e}}function mL({type:e,reducerName:r,createNotation:n},a,l){let o,u;if("reducer"in a){if(n&&!pL(a))throw new Error(xn(17));o=a.reducer,u=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(r,o).exposeAction(r,u?Ln(e,u):Ln(e))}function fL(e){return e._reducerDefinitionType==="asyncThunk"}function pL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function hL({type:e,reducerName:r},n,a,l){if(!l)throw new Error(xn(18));const{payloadCreator:o,fulfilled:u,pending:d,rejected:m,settled:p,options:h}=n,v=l(e,o,h);a.exposeAction(r,v),u&&a.addCase(v.fulfilled,u),d&&a.addCase(v.pending,d),m&&a.addCase(v.rejected,m),p&&a.addMatcher(v.settled,p),a.exposeCaseReducer(r,{fulfilled:u||Yd,pending:d||Yd,rejected:m||Yd,settled:p||Yd})}function Yd(){}var vL="task",rk="listener",nk="completed",my="cancelled",gL=`task-${my}`,xL=`task-${nk}`,Zx=`${rk}-${my}`,bL=`${rk}-${nk}`,$f=class{constructor(e){this.code=e,this.message=`${vL} ${my} (reason: ${e})`}name="TaskAbortError";message},fy=(e,r)=>{if(typeof e!="function")throw new TypeError(xn(32))},Rm=()=>{},ak=(e,r=Rm)=>(e.catch(r),e),ik=(e,r)=>(e.addEventListener("abort",r,{once:!0}),()=>e.removeEventListener("abort",r)),Fs=e=>{if(e.aborted)throw new $f(e.reason)};function sk(e,r){let n=Rm;return new Promise((a,l)=>{const o=()=>l(new $f(e.reason));if(e.aborted){o();return}n=ik(e,o),r.finally(()=>n()).then(a,l)}).finally(()=>{n=Rm})}var yL=async(e,r)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof $f?"cancelled":"rejected",error:n}}finally{r?.()}},Im=e=>r=>ak(sk(e,r).then(n=>(Fs(e),n))),lk=e=>{const r=Im(e);return n=>r(new Promise(a=>setTimeout(a,n)))},{assign:co}=Object,vw={},Bf="listenerMiddleware",jL=(e,r)=>{const n=a=>ik(e,()=>a.abort(e.reason));return(a,l)=>{fy(a);const o=new AbortController;n(o);const u=yL(async()=>{Fs(e),Fs(o.signal);const d=await a({pause:Im(o.signal),delay:lk(o.signal),signal:o.signal});return Fs(o.signal),d},()=>o.abort(xL));return l?.autoJoin&&r.push(u.catch(Rm)),{result:Im(e)(u),cancel(){o.abort(gL)}}}},_L=(e,r)=>{const n=async(a,l)=>{Fs(r);let o=()=>{};const d=[new Promise((m,p)=>{let h=e({predicate:a,effect:(v,b)=>{b.unsubscribe(),m([v,b.getState(),b.getOriginalState()])}});o=()=>{h(),p()}})];l!=null&&d.push(new Promise(m=>setTimeout(m,l,null)));try{const m=await sk(r,Promise.race(d));return Fs(r),m}finally{o()}};return(a,l)=>ak(n(a,l))},ok=e=>{let{type:r,actionCreator:n,matcher:a,predicate:l,effect:o}=e;if(r)l=Ln(r).match;else if(n)r=n.type,l=n.match;else if(a)l=a;else if(!l)throw new Error(xn(21));return fy(o),{predicate:l,type:r,effect:o}},ck=co(e=>{const{type:r,predicate:n,effect:a}=ok(e);return{id:sL(),effect:a,type:r,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(xn(22))}}},{withTypes:()=>ck}),gw=(e,r)=>{const{type:n,effect:a,predicate:l}=ok(r);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===l)&&o.effect===a)},Jx=e=>{e.pending.forEach(r=>{r.abort(Zx)})},NL=(e,r)=>()=>{for(const n of r.keys())Jx(n);e.clear()},xw=(e,r,n)=>{try{e(r,n)}catch(a){setTimeout(()=>{throw a},0)}},uk=co(Ln(`${Bf}/add`),{withTypes:()=>uk}),SL=Ln(`${Bf}/removeAll`),dk=co(Ln(`${Bf}/remove`),{withTypes:()=>dk}),wL=(...e)=>{console.error(`${Bf}/error`,...e)},fu=(e={})=>{const r=new Map,n=new Map,a=x=>{const j=n.get(x)??0;n.set(x,j+1)},l=x=>{const j=n.get(x)??1;j===1?n.delete(x):n.set(x,j-1)},{extra:o,onError:u=wL}=e;fy(u);const d=x=>(x.unsubscribe=()=>r.delete(x.id),r.set(x.id,x),j=>{x.unsubscribe(),j?.cancelActive&&Jx(x)}),m=x=>{const j=gw(r,x)??ck(x);return d(j)};co(m,{withTypes:()=>m});const p=x=>{const j=gw(r,x);return j&&(j.unsubscribe(),x.cancelActive&&Jx(j)),!!j};co(p,{withTypes:()=>p});const h=async(x,j,_,C)=>{const w=new AbortController,E=_L(m,w.signal),S=[];try{x.pending.add(w),a(x),await Promise.resolve(x.effect(j,co({},_,{getOriginalState:C,condition:(A,z)=>E(A,z).then(Boolean),take:E,delay:lk(w.signal),pause:Im(w.signal),extra:o,signal:w.signal,fork:jL(w.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{r.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((A,z,k)=>{A!==w&&(A.abort(Zx),k.delete(A))})},cancel:()=>{w.abort(Zx),x.pending.delete(w)},throwIfCancelled:()=>{Fs(w.signal)}})))}catch(A){A instanceof $f||xw(u,A,{raisedBy:"effect"})}finally{await Promise.all(S),w.abort(bL),l(x),x.pending.delete(w)}},v=NL(r,n);return{middleware:x=>j=>_=>{if(!$z(_))return j(_);if(uk.match(_))return m(_.payload);if(SL.match(_)){v();return}if(dk.match(_))return p(_.payload);let C=x.getState();const w=()=>{if(C===vw)throw new Error(xn(23));return C};let E;try{if(E=j(_),r.size>0){const S=x.getState(),A=Array.from(r.values());for(const z of A){let k=!1;try{k=z.predicate(_,S,C)}catch(M){k=!1,xw(u,M,{raisedBy:"predicate"})}k&&h(z,_,x,w)}}}finally{C=vw}return E},startListening:m,stopListening:p,clearListeners:v}};function xn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var CL={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},mk=an({name:"chartLayout",initialState:CL,reducers:{setLayout(e,r){e.layoutType=r.payload},setChartSize(e,r){e.width=r.payload.width,e.height=r.payload.height},setMargin(e,r){var n,a,l,o;e.margin.top=(n=r.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=r.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=r.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=r.payload.left)!==null&&o!==void 0?o:0},setScale(e,r){e.scale=r.payload}}}),{setMargin:EL,setLayout:AL,setChartSize:zL,setScale:kL}=mk.actions,OL=mk.reducer;function fk(e,r,n){return Array.isArray(e)&&e&&r+n!==0?e.slice(r,n+1):e}function st(e){return Number.isFinite(e)}function Sa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function bw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function so(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?bw(Object(n),!0).forEach(function(a){DL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function DL(e,r,n){return(r=PL(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function PL(e){var r=ML(e,"string");return typeof r=="symbol"?r:r+""}function ML(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function er(e,r,n){return qt(e)||qt(r)?n:Na(r)?po(e,r,n):typeof r=="function"?r(e):n}var TL=(e,r,n)=>{if(r&&n){var{width:a,height:l}=n,{align:o,verticalAlign:u,layout:d}=r;if((d==="vertical"||d==="horizontal"&&u==="middle")&&o!=="center"&&De(e[o]))return so(so({},e),{},{[o]:e[o]+(a||0)});if((d==="horizontal"||d==="vertical"&&o==="center")&&u!=="middle"&&De(e[u]))return so(so({},e),{},{[u]:e[u]+(l||0)})}return e},ci=(e,r)=>e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis",pk=(e,r,n,a)=>{if(a)return e.map(d=>d.coordinate);var l,o,u=e.map(d=>(d.coordinate===r&&(l=!0),d.coordinate===n&&(o=!0),d.coordinate));return l||u.push(r),o||u.push(n),u},hk=(e,r,n)=>{if(!e)return null;var{duplicateDomain:a,type:l,range:o,scale:u,realScaleType:d,isCategorical:m,categoricalDomain:p,tickCount:h,ticks:v,niceTicks:b,axisType:x}=e;if(!u)return null;var j=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,_=l==="category"&&u.bandwidth?u.bandwidth()/j:0;if(_=x==="angleAxis"&&o&&o.length>=2?tn(o[0]-o[1])*2*_:_,v||b){var C=(v||b||[]).map((w,E)=>{var S=a?a.indexOf(w):w,A=u.map(S);return st(A)?{coordinate:A+_,value:w,offset:_,index:E}:null}).filter(rn);return C}return m&&p?p.map((w,E)=>{var S=u.map(w);return st(S)?{coordinate:S+_,value:w,index:E,offset:_}:null}).filter(rn):u.ticks&&h!=null?u.ticks(h).map((w,E)=>{var S=u.map(w);return st(S)?{coordinate:S+_,value:w,index:E,offset:_}:null}).filter(rn):u.domain().map((w,E)=>{var S=u.map(w);return st(S)?{coordinate:S+_,value:a?a[w]:w,index:E,offset:_}:null}).filter(rn)},qL=(e,r)=>{if(!r||r.length!==2||!De(r[0])||!De(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),l=[e[0],e[1]];return(!De(e[0])||e[0]<n)&&(l[0]=n),(!De(e[1])||e[1]>a)&&(l[1]=a),l[0]>a&&(l[0]=a),l[1]<n&&(l[1]=n),l},RL=e=>{var r,n=e.length;if(!(n<=0)){var a=(r=e[0])===null||r===void 0?void 0:r.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0,d=0;d<n;++d){var m=e[d],p=m?.[l];if(p!=null){var h=p[1],v=p[0],b=_a(h)?v:h;b>=0?(p[0]=o,o+=b,p[1]=o):(p[0]=u,u+=b,p[1]=u)}}}},IL=e=>{var r,n=e.length;if(!(n<=0)){var a=(r=e[0])===null||r===void 0?void 0:r.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,u=0;u<n;++u){var d=e[u],m=d?.[l];if(m!=null){var p=_a(m[1])?m[0]:m[1];p>=0?(m[0]=o,o+=p,m[1]=o):(m[0]=0,m[1]=0)}}}},LL={sign:RL,expand:f6,none:Vs,silhouette:p6,wiggle:h6,positive:IL},$L=(e,r,n)=>{var a,l=(a=LL[n])!==null&&a!==void 0?a:Vs,o=m6().keys(r).value((d,m)=>Number(er(d,m,0))).order(Ux).offset(l),u=o(e);return u.forEach((d,m)=>{d.forEach((p,h)=>{var v=er(e[h],r[m],0);Array.isArray(v)&&v.length===2&&De(v[0])&&De(v[1])&&(p[0]=v[0],p[1]=v[1])})}),u};function BL(e){return e==null?void 0:String(e)}function yw(e){var{axis:r,ticks:n,bandSize:a,entry:l,index:o,dataKey:u}=e;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!qt(l[r.dataKey])){var d=_z(n,"value",l[r.dataKey]);if(d)return d.coordinate+a/2}return n!=null&&n[o]?n[o].coordinate+a/2:null}var m=er(l,qt(u)?r.dataKey:u),p=r.scale.map(m);return De(p)?p:null}var jw=e=>{var{axis:r,ticks:n,offset:a,bandSize:l,entry:o,index:u}=e;if(r.type==="category")return n[u]?n[u].coordinate+a:null;var d=er(o,r.dataKey,r.scale.domain()[u]);if(qt(d))return null;var m=r.scale.map(d);return De(m)?m-l/2+a:null},UL=e=>{var{numericAxis:r}=e,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return a<=0&&l>=0?0:l<0?l:a}return n[0]},FL=e=>{var r=e.flat(2).filter(De);return[Math.min(...r),Math.max(...r)]},GL=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],HL=(e,r,n)=>{if(e!=null)return GL(Object.keys(e).reduce((a,l)=>{var o=e[l];if(!o)return a;var{stackedData:u}=o,d=u.reduce((m,p)=>{var h=fk(p,r,n),v=FL(h);return!st(v[0])||!st(v[1])?m:[Math.min(m[0],v[0]),Math.max(m[1],v[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]))},_w=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Nw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vo=(e,r,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var l=Df(r,h=>h.coordinate),o=1/0,u=1,d=l.length;u<d;u++){var m=l[u],p=l[u-1];o=Math.min((m?.coordinate||0)-(p?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function Sw(e){var{tooltipEntrySettings:r,dataKey:n,payload:a,value:l,name:o}=e;return so(so({},r),{},{dataKey:n,payload:a,value:l,name:o})}function Uf(e,r){if(e)return String(e);if(typeof r=="string")return r}var VL=(e,r)=>{if(r==="horizontal")return e.chartX;if(r==="vertical")return e.chartY},QL=(e,r)=>r==="centric"?e.angle:e.radius,ui=e=>e.layout.width,di=e=>e.layout.height,YL=e=>e.layout.scale,vk=e=>e.layout.margin,Ff=me(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Gf=me(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),KL="data-recharts-item-index",WL="data-recharts-item-id",pu=60;function ww(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Kd(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ww(Object(n),!0).forEach(function(a){XL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ww(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XL(e,r,n){return(r=ZL(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function ZL(e){var r=JL(e,"string");return typeof r=="symbol"?r:r+""}function JL(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var e8=e=>e.brush.height;function t8(e){var r=Gf(e);return r.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:pu;return n+l}return n},0)}function r8(e){var r=Gf(e);return r.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:pu;return n+l}return n},0)}function n8(e){var r=Ff(e);return r.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function a8(e){var r=Ff(e);return r.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var xr=me([ui,di,vk,e8,t8,r8,n8,a8,Rz,z4],(e,r,n,a,l,o,u,d,m,p)=>{var h={left:(n.left||0)+l,right:(n.right||0)+o},v={top:(n.top||0)+u,bottom:(n.bottom||0)+d},b=Kd(Kd({},v),h),x=b.bottom;b.bottom+=a,b=TL(b,m,p);var j=e-b.left-b.right,_=r-b.top-b.bottom;return Kd(Kd({brushBottom:x},b),{},{width:Math.max(j,0),height:Math.max(_,0)})}),i8=me(xr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),py=me(ui,di,(e,r)=>({x:0,y:0,width:e,height:r})),s8=g.createContext(null),Rr=()=>g.useContext(s8)!=null,Hf=e=>e.brush,Vf=me([Hf,xr,vk],(e,r,n)=>({height:e.height,x:De(e.x)?e.x:r.left,y:De(e.y)?e.y:r.top+r.height+r.brushBottom-(n?.bottom||0),width:De(e.width)?e.width:r.width})),Yg={},Kg={},Wg={},Cw;function l8(){return Cw||(Cw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a,{signal:l,edges:o}={}){let u,d=null;const m=o!=null&&o.includes("leading"),p=o==null||o.includes("trailing"),h=()=>{d!==null&&(n.apply(u,d),u=void 0,d=null)},v=()=>{p&&h(),_()};let b=null;const x=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,v()},a)},j=()=>{b!==null&&(clearTimeout(b),b=null)},_=()=>{j(),u=void 0,d=null},C=()=>{h()},w=function(...E){if(l?.aborted)return;u=this,d=E;const S=b==null;x(),m&&S&&h()};return w.schedule=x,w.cancel=_,w.flush=C,l?.addEventListener("abort",_,{once:!0}),w}e.debounce=r})(Wg)),Wg}var Ew;function o8(){return Ew||(Ew=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=l8();function n(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:u=!1,trailing:d=!0,maxWait:m}=o,p=Array(2);u&&(p[0]="leading"),d&&(p[1]="trailing");let h,v=null;const b=r.debounce(function(..._){h=a.apply(this,_),v=null},l,{edges:p}),x=function(..._){return m!=null&&(v===null&&(v=Date.now()),Date.now()-v>=m)?(h=a.apply(this,_),v=Date.now(),b.cancel(),b.schedule(),h):(b.apply(this,_),h)},j=()=>(b.flush(),h);return x.cancel=b.cancel,x.flush=j,x}e.debounce=n})(Kg)),Kg}var Aw;function c8(){return Aw||(Aw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=o8();function n(a,l=0,o={}){const{leading:u=!0,trailing:d=!0}=o;return r.debounce(a,l,{leading:u,maxWait:l,trailing:d})}e.throttle=n})(Yg)),Yg}var Xg,zw;function u8(){return zw||(zw=1,Xg=c8().throttle),Xg}var d8=u8();const m8=oi(d8);var Lm=function(r,n){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!r))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(n.replace(/%s/g,()=>l[u++]))}},ga={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},gk=(e,r,n)=>{var{width:a=ga.width,height:l=ga.height,aspect:o,maxHeight:u}=n,d=Qs(a)?e:Number(a),m=Qs(l)?r:Number(l);return o&&o>0&&(d?m=d/o:m&&(d=m*o),u&&m!=null&&m>u&&(m=u)),{calculatedWidth:d,calculatedHeight:m}},f8={width:0,height:0,overflow:"visible"},p8={width:0,overflowX:"visible"},h8={height:0,overflowY:"visible"},v8={},g8=e=>{var{width:r,height:n}=e,a=Qs(r),l=Qs(n);return a&&l?f8:a?p8:l?h8:v8};function x8(e){var{width:r,height:n,aspect:a}=e,l=r,o=n;return l===void 0&&o===void 0?(l=ga.width,o=ga.height):l===void 0?l=a&&a>0?void 0:ga.width:o===void 0&&(o=a&&a>0?void 0:ga.height),{width:l,height:o}}function eb(){return eb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eb.apply(null,arguments)}function kw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ow(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?kw(Object(n),!0).forEach(function(a){b8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function b8(e,r,n){return(r=y8(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function y8(e){var r=j8(e,"string");return typeof r=="symbol"?r:r+""}function j8(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var xk=g.createContext(ga.initialDimension);function _8(e){return Sa(e.width)&&Sa(e.height)}function bk(e){var{children:r,width:n,height:a}=e,l=g.useMemo(()=>({width:n,height:a}),[n,a]);return _8(l)?g.createElement(xk.Provider,{value:l},r):null}var hy=()=>g.useContext(xk),N8=g.forwardRef((e,r)=>{var{aspect:n,initialDimension:a=ga.initialDimension,width:l,height:o,minWidth:u=ga.minWidth,minHeight:d,maxHeight:m,children:p,debounce:h=ga.debounce,id:v,className:b,onResize:x,style:j={}}=e,_=g.useRef(null),C=g.useRef();C.current=x,g.useImperativeHandle(r,()=>_.current);var[w,E]=g.useState({containerWidth:a.width,containerHeight:a.height}),S=g.useCallback((D,$)=>{E(B=>{var H=Math.round(D),T=Math.round($);return B.containerWidth===H&&B.containerHeight===T?B:{containerWidth:H,containerHeight:T}})},[]);g.useEffect(()=>{if(_.current==null||typeof ResizeObserver>"u")return nl;var D=T=>{var Y,J=T[0];if(J!=null){var{width:P,height:q}=J.contentRect;S(P,q),(Y=C.current)===null||Y===void 0||Y.call(C,P,q)}};h>0&&(D=m8(D,h,{trailing:!0,leading:!1}));var $=new ResizeObserver(D),{width:B,height:H}=_.current.getBoundingClientRect();return S(B,H),$.observe(_.current),()=>{$.disconnect()}},[S,h]);var{containerWidth:A,containerHeight:z}=w;Lm(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:k,calculatedHeight:M}=gk(A,z,{width:l,height:o,aspect:n,maxHeight:m});return Lm(k!=null&&k>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,M,l,o,u,d,n),g.createElement("div",{id:v?"".concat(v):void 0,className:Nt("recharts-responsive-container",b),style:Ow(Ow({},j),{},{width:l,height:o,minWidth:u,minHeight:d,maxHeight:m}),ref:_},g.createElement("div",{style:g8({width:l,height:o})},g.createElement(bk,{width:k,height:M},p)))}),Dw=g.forwardRef((e,r)=>{var n=hy();if(Sa(n.width)&&Sa(n.height))return e.children;var{width:a,height:l}=x8({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:u}=gk(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return De(o)&&De(u)?g.createElement(bk,{width:o,height:u},e.children):g.createElement(N8,eb({},e,{width:a,height:l,ref:r}))});function vy(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Qf=()=>{var e,r=Rr(),n=Ie(i8),a=Ie(Vf),l=(e=Ie(Hf))===null||e===void 0?void 0:e.padding;return!r||!a||!l?n:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},S8={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},yk=()=>{var e;return(e=Ie(xr))!==null&&e!==void 0?e:S8},jk=()=>Ie(ui),_k=()=>Ie(di),xt=e=>e.layout.layoutType,al=()=>Ie(xt),Nk=()=>{var e=al();if(e==="horizontal"||e==="vertical")return e},Sk=e=>{var r=e.layout.layoutType;if(r==="centric"||r==="radial")return r},w8=()=>{var e=al();return e!==void 0},hu=e=>{var r=Qt(),n=Rr(),{width:a,height:l}=e,o=hy(),u=a,d=l;return o&&(u=o.width>0?o.width:a,d=o.height>0?o.height:l),g.useEffect(()=>{!n&&Sa(u)&&Sa(d)&&r(zL({width:u,height:d}))},[r,n,u,d]),null},wk=Symbol.for("immer-nothing"),Pw=Symbol.for("immer-draftable"),bn=Symbol.for("immer-state");function Xn(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Yc=Object.getPrototypeOf;function go(e){return!!e&&!!e[bn]}function Ks(e){return e?Ck(e)||Array.isArray(e)||!!e[Pw]||!!e.constructor?.[Pw]||vu(e)||Kf(e):!1}var C8=Object.prototype.constructor.toString(),Mw=new WeakMap;function Ck(e){if(!e||typeof e!="object")return!1;const r=Object.getPrototypeOf(e);if(r===null||r===Object.prototype)return!0;const n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=Mw.get(n);return a===void 0&&(a=Function.toString.call(n),Mw.set(n,a)),a===C8}function $m(e,r,n=!0){Yf(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{r(l,e[l],e)}):e.forEach((a,l)=>r(l,a,e))}function Yf(e){const r=e[bn];return r?r.type_:Array.isArray(e)?1:vu(e)?2:Kf(e)?3:0}function tb(e,r){return Yf(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function Ek(e,r,n){const a=Yf(e);a===2?e.set(r,n):a===3?e.add(n):e[r]=n}function E8(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function vu(e){return e instanceof Map}function Kf(e){return e instanceof Set}function Ps(e){return e.copy_||e.base_}function rb(e,r){if(vu(e))return new Map(e);if(Kf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Ck(e);if(r===!0||r==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[bn];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const u=l[o],d=a[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(a[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(Yc(e),a)}else{const a=Yc(e);if(a!==null&&n)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function gy(e,r=!1){return Wf(e)||go(e)||!Ks(e)||(Yf(e)>1&&Object.defineProperties(e,{set:Wd,add:Wd,clear:Wd,delete:Wd}),Object.freeze(e),r&&Object.values(e).forEach(n=>gy(n,!0))),e}function A8(){Xn(2)}var Wd={value:A8};function Wf(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var z8={};function Ws(e){const r=z8[e];return r||Xn(0,e),r}var Kc;function Ak(){return Kc}function k8(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Tw(e,r){r&&(Ws("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function nb(e){ab(e),e.drafts_.forEach(O8),e.drafts_=null}function ab(e){e===Kc&&(Kc=e.parent_)}function qw(e){return Kc=k8(Kc,e)}function O8(e){const r=e[bn];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function Rw(e,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];return e!==void 0&&e!==n?(n[bn].modified_&&(nb(r),Xn(4)),Ks(e)&&(e=Bm(r,e),r.parent_||Um(r,e)),r.patches_&&Ws("Patches").generateReplacementPatches_(n[bn].base_,e,r.patches_,r.inversePatches_)):e=Bm(r,n,[]),nb(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==wk?e:void 0}function Bm(e,r,n){if(Wf(r))return r;const a=e.immer_.shouldUseStrictIteration(),l=r[bn];if(!l)return $m(r,(o,u)=>Iw(e,l,r,o,u,n),a),r;if(l.scope_!==e)return r;if(!l.modified_)return Um(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let u=o,d=!1;l.type_===3&&(u=new Set(o),o.clear(),d=!0),$m(u,(m,p)=>Iw(e,l,o,m,p,n,d),a),Um(e,o,!1),n&&e.patches_&&Ws("Patches").generatePatches_(l,n,e.patches_,e.inversePatches_)}return l.copy_}function Iw(e,r,n,a,l,o,u){if(l==null||typeof l!="object"&&!u)return;const d=Wf(l);if(!(d&&!u)){if(go(l)){const m=o&&r&&r.type_!==3&&!tb(r.assigned_,a)?o.concat(a):void 0,p=Bm(e,l,m);if(Ek(n,a,p),go(p))e.canAutoFreeze_=!1;else return}else u&&n.add(l);if(Ks(l)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||r&&r.base_&&r.base_[a]===l&&d)return;Bm(e,l),(!r||!r.scope_.parent_)&&typeof a!="symbol"&&(vu(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&Um(e,l)}}}function Um(e,r,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gy(r,n)}function D8(e,r){const n=Array.isArray(e),a={type_:n?1:0,scope_:r?r.scope_:Ak(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=xy;n&&(l=[a],o=Wc);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return a.draft_=d,a.revoke_=u,d}var xy={get(e,r){if(r===bn)return e;const n=Ps(e);if(!tb(n,r))return P8(e,n,r);const a=n[r];return e.finalized_||!Ks(a)?a:a===Zg(e.base_,r)?(Jg(e),e.copy_[r]=sb(a,e)):a},has(e,r){return r in Ps(e)},ownKeys(e){return Reflect.ownKeys(Ps(e))},set(e,r,n){const a=zk(Ps(e),r);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Zg(Ps(e),r),o=l?.[bn];if(o&&o.base_===n)return e.copy_[r]=n,e.assigned_[r]=!1,!0;if(E8(n,l)&&(n!==void 0||tb(e.base_,r)))return!0;Jg(e),ib(e)}return e.copy_[r]===n&&(n!==void 0||r in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=n,e.assigned_[r]=!0),!0},deleteProperty(e,r){return Zg(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,Jg(e),ib(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const n=Ps(e),a=Reflect.getOwnPropertyDescriptor(n,r);return a&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:a.enumerable,value:n[r]}},defineProperty(){Xn(11)},getPrototypeOf(e){return Yc(e.base_)},setPrototypeOf(){Xn(12)}},Wc={};$m(xy,(e,r)=>{Wc[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Wc.deleteProperty=function(e,r){return Wc.set.call(this,e,r,void 0)};Wc.set=function(e,r,n){return xy.set.call(this,e[0],r,n,e[0])};function Zg(e,r){const n=e[bn];return(n?Ps(n):e)[r]}function P8(e,r,n){const a=zk(r,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function zk(e,r){if(!(r in e))return;let n=Yc(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,r);if(a)return a;n=Yc(n)}}function ib(e){e.modified_||(e.modified_=!0,e.parent_&&ib(e.parent_))}function Jg(e){e.copy_||(e.copy_=rb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var M8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(r,n,a)=>{if(typeof r=="function"&&typeof n!="function"){const o=n;n=r;const u=this;return function(m=o,...p){return u.produce(m,h=>n.call(this,h,...p))}}typeof n!="function"&&Xn(6),a!==void 0&&typeof a!="function"&&Xn(7);let l;if(Ks(r)){const o=qw(this),u=sb(r,void 0);let d=!0;try{l=n(u),d=!1}finally{d?nb(o):ab(o)}return Tw(o,a),Rw(l,o)}else if(!r||typeof r!="object"){if(l=n(r),l===void 0&&(l=r),l===wk&&(l=void 0),this.autoFreeze_&&gy(l,!0),a){const o=[],u=[];Ws("Patches").generateReplacementPatches_(r,l,o,u),a(o,u)}return l}else Xn(1,r)},this.produceWithPatches=(r,n)=>{if(typeof r=="function")return(u,...d)=>this.produceWithPatches(u,m=>r(m,...d));let a,l;return[this.produce(r,n,(u,d)=>{a=u,l=d}),a,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ks(e)||Xn(8),go(e)&&(e=T8(e));const r=qw(this),n=sb(e,void 0);return n[bn].isManual_=!0,ab(r),n}finishDraft(e,r){const n=e&&e[bn];(!n||!n.isManual_)&&Xn(9);const{scope_:a}=n;return Tw(a,r),Rw(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const l=r[n];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}n>-1&&(r=r.slice(n+1));const a=Ws("Patches").applyPatches_;return go(e)?a(e,r):this.produce(e,l=>a(l,r))}};function sb(e,r){const n=vu(e)?Ws("MapSet").proxyMap_(e,r):Kf(e)?Ws("MapSet").proxySet_(e,r):D8(e,r);return(r?r.scope_:Ak()).drafts_.push(n),n}function T8(e){return go(e)||Xn(10,e),kk(e)}function kk(e){if(!Ks(e)||Wf(e))return e;const r=e[bn];let n,a=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=rb(e,r.scope_.immer_.useStrictShallowCopy_),a=r.scope_.immer_.shouldUseStrictIteration()}else n=rb(e,!0);return $m(n,(l,o)=>{Ek(n,l,kk(o))},a),r&&(r.finalized_=!1),n}var q8=new M8;q8.produce;var R8={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Ok=an({name:"legend",initialState:R8,reducers:{setLegendSize(e,r){e.size.width=r.payload.width,e.size.height=r.payload.height},setLegendSettings(e,r){e.settings.align=r.payload.align,e.settings.layout=r.payload.layout,e.settings.verticalAlign=r.payload.verticalAlign,e.settings.itemSorter=r.payload.itemSorter},addLegendPayload:{reducer(e,r){e.payload.push(r.payload)},prepare:Mt()},replaceLegendPayload:{reducer(e,r){var{prev:n,next:a}=r.payload,l=Jn(e).payload.indexOf(n);l>-1&&(e.payload[l]=a)},prepare:Mt()},removeLegendPayload:{reducer(e,r){var n=Jn(e).payload.indexOf(r.payload);n>-1&&e.payload.splice(n,1)},prepare:Mt()}}}),{setLegendSize:Qte,setLegendSettings:Yte,addLegendPayload:I8,replaceLegendPayload:L8,removeLegendPayload:$8}=Ok.actions,B8=Ok.reducer;function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lb.apply(null,arguments)}function Lw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Nc(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Lw(Object(n),!0).forEach(function(a){U8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function U8(e,r,n){return(r=F8(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function F8(e){var r=G8(e,"string");return typeof r=="symbol"?r:r+""}function G8(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function H8(e){return Array.isArray(e)&&Na(e[0])&&Na(e[1])?e.join(" ~ "):e}var Zl={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},V8=e=>{var{separator:r=Zl.separator,contentStyle:n,itemStyle:a,labelStyle:l=Zl.labelStyle,payload:o,formatter:u,itemSorter:d,wrapperClassName:m,labelClassName:p,label:h,labelFormatter:v,accessibilityLayer:b=Zl.accessibilityLayer}=e,x=()=>{if(o&&o.length){var z={padding:0,margin:0},k=(d?Df(o,d):o).map((M,D)=>{if(M.type==="none")return null;var $=M.formatter||u||H8,{value:B,name:H}=M,T=B,Y=H;if($){var J=$(B,H,M,D,o);if(Array.isArray(J))[T,Y]=J;else if(J!=null)T=J;else return null}var P=Nc(Nc({},Zl.itemStyle),{},{color:M.color||Zl.itemStyle.color},a);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:P},Na(Y)?g.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Na(Y)?g.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,g.createElement("span",{className:"recharts-tooltip-item-value"},T),g.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:z},k)}return null},j=Nc(Nc({},Zl.contentStyle),n),_=Nc({margin:0},l),C=!qt(h),w=C?h:"",E=Nt("recharts-default-tooltip",m),S=Nt("recharts-tooltip-label",p);C&&v&&o!==void 0&&o!==null&&(w=v(h,o));var A=b?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",lb({className:E,style:j},A),g.createElement("p",{className:S,style:_},g.isValidElement(w)?w:"".concat(w)),x())},Sc="recharts-tooltip-wrapper",Q8={visibility:"hidden"};function Y8(e){var{coordinate:r,translateX:n,translateY:a}=e;return Nt(Sc,{["".concat(Sc,"-right")]:De(n)&&r&&De(r.x)&&n>=r.x,["".concat(Sc,"-left")]:De(n)&&r&&De(r.x)&&n<r.x,["".concat(Sc,"-bottom")]:De(a)&&r&&De(r.y)&&a>=r.y,["".concat(Sc,"-top")]:De(a)&&r&&De(r.y)&&a<r.y})}function $w(e){var{allowEscapeViewBox:r,coordinate:n,key:a,offset:l,position:o,reverseDirection:u,tooltipDimension:d,viewBox:m,viewBoxDimension:p}=e;if(o&&De(o[a]))return o[a];var h=n[a]-d-(l>0?l:0),v=n[a]+l;if(r[a])return u[a]?h:v;var b=m[a];if(b==null)return 0;if(u[a]){var x=h,j=b;return x<j?Math.max(v,b):Math.max(h,b)}if(p==null)return 0;var _=v+d,C=b+p;return _>C?Math.max(h,b):Math.max(v,b)}function K8(e){var{translateX:r,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(r,"px, ").concat(n,"px, 0)"):"translate(".concat(r,"px, ").concat(n,"px)")}}function W8(e){var{allowEscapeViewBox:r,coordinate:n,offsetTop:a,offsetLeft:l,position:o,reverseDirection:u,tooltipBox:d,useTranslate3d:m,viewBox:p}=e,h,v,b;return d.height>0&&d.width>0&&n?(v=$w({allowEscapeViewBox:r,coordinate:n,key:"x",offset:l,position:o,reverseDirection:u,tooltipDimension:d.width,viewBox:p,viewBoxDimension:p.width}),b=$w({allowEscapeViewBox:r,coordinate:n,key:"y",offset:a,position:o,reverseDirection:u,tooltipDimension:d.height,viewBox:p,viewBoxDimension:p.height}),h=K8({translateX:v,translateY:b,useTranslate3d:m})):h=Q8,{cssProperties:h,cssClasses:Y8({translateX:v,translateY:b,coordinate:n})}}function Bw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Xd(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Bw(Object(n),!0).forEach(function(a){ob(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ob(e,r,n){return(r=X8(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function X8(e){var r=Z8(e,"string");return typeof r=="symbol"?r:r+""}function Z8(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class J8 extends g.PureComponent{constructor(){super(...arguments),ob(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ob(this,"handleKeyDown",r=>{if(r.key==="Escape"){var n,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var r,n;this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:l,children:o,coordinate:u,hasPayload:d,isAnimationActive:m,offset:p,position:h,reverseDirection:v,useTranslate3d:b,viewBox:x,wrapperStyle:j,lastBoundingBox:_,innerRef:C,hasPortalFromProps:w}=this.props,E=typeof p=="number"?p:p.x,S=typeof p=="number"?p:p.y,{cssClasses:A,cssProperties:z}=W8({allowEscapeViewBox:n,coordinate:u,offsetLeft:E,offsetTop:S,position:h,reverseDirection:v,tooltipBox:{height:_.height,width:_.width},useTranslate3d:b,viewBox:x}),k=w?{}:Xd(Xd({transition:m&&r?"transform ".concat(a,"ms ").concat(l):void 0},z),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&d?"visible":"hidden",position:"absolute",top:0,left:0}),M=Xd(Xd({},k),{},{visibility:!this.state.dismissed&&r&&d?"visible":"hidden"},j);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:A,style:M,ref:C},o)}}var Dk=()=>{var e;return(e=Ie(r=>r.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function cb(){return cb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cb.apply(null,arguments)}function Uw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Fw(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Uw(Object(n),!0).forEach(function(a){e$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function e$(e,r,n){return(r=t$(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function t$(e){var r=r$(e,"string");return typeof r=="symbol"?r:r+""}function r$(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Gw={curveBasisClosed:t6,curveBasisOpen:r6,curveBasis:e6,curveBumpX:$I,curveBumpY:BI,curveLinearClosed:n6,curveLinear:kf,curveMonotoneX:a6,curveMonotoneY:i6,curveNatural:s6,curveStep:l6,curveStepAfter:c6,curveStepBefore:o6},Fm=e=>st(e.x)&&st(e.y),Hw=e=>e.base!=null&&Fm(e.base)&&Fm(e),wc=e=>e.x,Cc=e=>e.y,n$=(e,r)=>{if(typeof e=="function")return e;var n="curve".concat(du(e));if((n==="curveMonotone"||n==="curveBump")&&r){var a=Gw["".concat(n).concat(r==="vertical"?"Y":"X")];if(a)return a}return Gw[n]||kf},Vw={connectNulls:!1,type:"linear"},a$=e=>{var{type:r=Vw.type,points:n=[],baseLine:a,layout:l,connectNulls:o=Vw.connectNulls}=e,u=n$(r,l),d=o?n.filter(Fm):n;if(Array.isArray(a)){var m,p=n.map((j,_)=>Fw(Fw({},j),{},{base:a[_]}));l==="vertical"?m=Fd().y(Cc).x1(wc).x0(j=>j.base.x):m=Fd().x(wc).y1(Cc).y0(j=>j.base.y);var h=m.defined(Hw).curve(u),v=o?p.filter(Hw):p;return h(v)}var b;l==="vertical"&&De(a)?b=Fd().y(Cc).x1(wc).x0(a):De(a)?b=Fd().x(wc).y1(Cc).y0(a):b=cz().x(wc).y(Cc);var x=b.defined(Fm).curve(u);return x(d)},Pk=e=>{var{className:r,points:n,path:a,pathRef:l}=e,o=al();if((!n||!n.length)&&!a)return null;var u={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},d=n&&n.length?a$(u):a;return g.createElement("path",cb({},ea(e),ny(e),{className:Nt("recharts-curve",r),d:d===null?void 0:d,ref:l}))},i$=["x","y","top","left","width","height","className"];function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ub.apply(null,arguments)}function Qw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function s$(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Qw(Object(n),!0).forEach(function(a){l$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function l$(e,r,n){return(r=o$(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o$(e){var r=c$(e,"string");return typeof r=="symbol"?r:r+""}function c$(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function u$(e,r){if(e==null)return{};var n,a,l=d$(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function d$(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var m$=(e,r,n,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n),f$=e=>{var{x:r=0,y:n=0,top:a=0,left:l=0,width:o=0,height:u=0,className:d}=e,m=u$(e,i$),p=s$({x:r,y:n,top:a,left:l,width:o,height:u},m);return!De(r)||!De(n)||!De(o)||!De(u)||!De(a)||!De(l)?null:g.createElement("path",ub({},Ur(p),{className:Nt("recharts-cross",d),d:m$(r,n,o,u,a,l)}))};function p$(e,r,n,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?r.x-l:n.left+.5,y:e==="horizontal"?n.top+.5:r.y-l,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function Yw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Kw(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Yw(Object(n),!0).forEach(function(a){h$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function h$(e,r,n){return(r=v$(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function v$(e){var r=g$(e,"string");return typeof r=="symbol"?r:r+""}function g$(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var x$=e=>e.replace(/([A-Z])/g,r=>"-".concat(r.toLowerCase())),Mk=(e,r,n)=>e.map(a=>"".concat(x$(a)," ").concat(r,"ms ").concat(n)).join(","),b$=(e,r)=>[Object.keys(e),Object.keys(r)].reduce((n,a)=>n.filter(l=>a.includes(l))),Xc=(e,r)=>Object.keys(r).reduce((n,a)=>Kw(Kw({},n),{},{[a]:e(a,r[a])}),{});function Ww(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ir(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ww(Object(n),!0).forEach(function(a){y$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ww(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function y$(e,r,n){return(r=j$(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function j$(e){var r=_$(e,"string");return typeof r=="symbol"?r:r+""}function _$(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Gm=(e,r,n)=>e+(r-e)*n,db=e=>{var{from:r,to:n}=e;return r!==n},Tk=(e,r,n)=>{var a=Xc((l,o)=>{if(db(o)){var[u,d]=e(o.from,o.to,o.velocity);return ir(ir({},o),{},{from:u,velocity:d})}return o},r);return n<1?Xc((l,o)=>db(o)&&a[l]!=null?ir(ir({},o),{},{velocity:Gm(o.velocity,a[l].velocity,n),from:Gm(o.from,a[l].from,n)}):o,r):Tk(e,a,n-1)};function N$(e,r,n,a,l,o){var u,d=a.reduce((b,x)=>ir(ir({},b),{},{[x]:{from:e[x],velocity:0,to:r[x]}}),{}),m=()=>Xc((b,x)=>x.from,d),p=()=>!Object.values(d).filter(db).length,h=null,v=b=>{u||(u=b);var x=b-u,j=x/n.dt;d=Tk(n,d,j),l(ir(ir(ir({},e),r),m())),u=b,p()||(h=o.setTimeout(v))};return()=>(h=o.setTimeout(v),()=>{var b;(b=h)===null||b===void 0||b()})}function S$(e,r,n,a,l,o,u){var d=null,m=l.reduce((v,b)=>{var x=e[b],j=r[b];return x==null||j==null?v:ir(ir({},v),{},{[b]:[x,j]})},{}),p,h=v=>{p||(p=v);var b=(v-p)/a,x=Xc((_,C)=>Gm(...C,n(b)),m);if(o(ir(ir(ir({},e),r),x)),b<1)d=u.setTimeout(h);else{var j=Xc((_,C)=>Gm(...C,n(1)),m);o(ir(ir(ir({},e),r),j))}};return()=>(d=u.setTimeout(h),()=>{var v;(v=d)===null||v===void 0||v()})}const w$=(e,r,n,a,l,o)=>{var u=b$(e,r);return n==null?()=>(l(ir(ir({},e),r)),()=>{}):n.isStepper===!0?N$(e,r,n,u,l,o):S$(e,r,n,a,u,l,o)};var Hm=1e-4,qk=(e,r)=>[0,3*e,3*r-6*e,3*e-3*r+1],Rk=(e,r)=>e.map((n,a)=>n*r**a).reduce((n,a)=>n+a),Xw=(e,r)=>n=>{var a=qk(e,r);return Rk(a,n)},C$=(e,r)=>n=>{var a=qk(e,r),l=[...a.map((o,u)=>o*u).slice(1),0];return Rk(l,n)},E$=e=>{var r,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var a=(r=n[1])===null||r===void 0||(r=r.split(")")[0])===null||r===void 0?void 0:r.split(",");if(a==null||a.length!==4)return null;var l=a.map(o=>parseFloat(o));return[l[0],l[1],l[2],l[3]]},A$=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l=E$(n[0]);if(l)return l}}return n.length===4?n:[0,0,1,1]},z$=(e,r,n,a)=>{var l=Xw(e,n),o=Xw(r,a),u=C$(e,n),d=p=>p>1?1:p<0?0:p,m=p=>{for(var h=p>1?1:p,v=h,b=0;b<8;++b){var x=l(v)-h,j=u(v);if(Math.abs(x-h)<Hm||j<Hm)return o(v);v=d(v-x/j)}return o(v)};return m.isStepper=!1,m},Zw=function(){return z$(...A$(...arguments))},k$=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:l=17}=r,o=(u,d,m)=>{var p=-(u-d)*n,h=m*a,v=m+(p-h)*l/1e3,b=m*l/1e3+u;return Math.abs(b-d)<Hm&&Math.abs(v)<Hm?[d,0]:[b,v]};return o.isStepper=!0,o.dt=l,o},O$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Zw(e);case"spring":return k$();default:if(e.split("(")[0]==="cubic-bezier")return Zw(e)}return typeof e=="function"?e:null};function D$(e){var r,n=()=>null,a=!1,l=null,o=u=>{if(!a){if(Array.isArray(u)){if(!u.length)return;var d=u,[m,...p]=d;if(typeof m=="number"){l=e.setTimeout(o.bind(null,p),m);return}o(m),l=e.setTimeout(o.bind(null,p));return}typeof u=="string"&&(r=u,n(r)),typeof u=="object"&&(r=u,n(r)),typeof u=="function"&&u()}};return{stop:()=>{a=!0},start:u=>{a=!1,l&&(l(),l=null),o(u)},subscribe:u=>(n=u,()=>{n=()=>null}),getTimeoutController:()=>e}}class P${setTimeout(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=u=>{u-a>=n?r(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function M$(){return D$(new P$)}var T$=g.createContext(M$);function q$(e,r){var n=g.useContext(T$);return g.useMemo(()=>r??n(e),[e,r,n])}var R$=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Xf={isSsr:R$()},I$={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Jw={t:0},ex={t:1};function Zf(e){var r=Hr(e,I$),{isActive:n,canBegin:a,duration:l,easing:o,begin:u,onAnimationEnd:d,onAnimationStart:m,children:p}=r,h=n==="auto"?!Xf.isSsr:n,v=q$(r.animationId,r.animationManager),[b,x]=g.useState(h?Jw:ex),j=g.useRef(null);return g.useEffect(()=>{h||x(ex)},[h]),g.useEffect(()=>{if(!h||!a)return nl;var _=w$(Jw,ex,O$(o),l,x,v.getTimeoutController()),C=()=>{j.current=_()};return v.start([m,u,C,l,d]),()=>{v.stop(),j.current&&j.current(),d()}},[h,a,l,o,u,m,d,v]),p(b.t)}function Jf(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=g.useRef(Gc(r)),a=g.useRef(e);return a.current!==e&&(n.current=Gc(r),a.current=e),n.current}var L$=["radius"],$$=["radius"],eC,tC,rC,nC,aC,iC,sC,lC,oC,cC;function uC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function dC(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?uC(Object(n),!0).forEach(function(a){B$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function B$(e,r,n){return(r=U$(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function U$(e){var r=F$(e,"string");return typeof r=="symbol"?r:r+""}function F$(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Vm(){return Vm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vm.apply(null,arguments)}function mC(e,r){if(e==null)return{};var n,a,l=G$(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function G$(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ma(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var fC=(e,r,n,a,l)=>{var o=Yi(n),u=Yi(a),d=Math.min(Math.abs(o)/2,Math.abs(u)/2),m=u>=0?1:-1,p=o>=0?1:-1,h=u>=0&&o>=0||u<0&&o<0?1:0,v;if(d>0&&Array.isArray(l)){for(var b=[0,0,0,0],x=0,j=4;x<j;x++){var _,C=(_=l[x])!==null&&_!==void 0?_:0;b[x]=C>d?d:C}v=Ut(eC||(eC=ma(["M",",",""])),e,r+m*b[0]),b[0]>0&&(v+=Ut(tC||(tC=ma(["A ",",",",0,0,",",",",",""])),b[0],b[0],h,e+p*b[0],r)),v+=Ut(rC||(rC=ma(["L ",",",""])),e+n-p*b[1],r),b[1]>0&&(v+=Ut(nC||(nC=ma(["A ",",",",0,0,",`,
        `,",",""])),b[1],b[1],h,e+n,r+m*b[1])),v+=Ut(aC||(aC=ma(["L ",",",""])),e+n,r+a-m*b[2]),b[2]>0&&(v+=Ut(iC||(iC=ma(["A ",",",",0,0,",`,
        `,",",""])),b[2],b[2],h,e+n-p*b[2],r+a)),v+=Ut(sC||(sC=ma(["L ",",",""])),e+p*b[3],r+a),b[3]>0&&(v+=Ut(lC||(lC=ma(["A ",",",",0,0,",`,
        `,",",""])),b[3],b[3],h,e,r+a-m*b[3])),v+="Z"}else if(d>0&&l===+l&&l>0){var w=Math.min(d,l);v=Ut(oC||(oC=ma(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,r+m*w,w,w,h,e+p*w,r,e+n-p*w,r,w,w,h,e+n,r+m*w,e+n,r+a-m*w,w,w,h,e+n-p*w,r+a,e+p*w,r+a,w,w,h,e,r+a-m*w)}else v=Ut(cC||(cC=ma(["M ",","," h "," v "," h "," Z"])),e,r,n,a,-n);return v},pC={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ik=e=>{var r=Hr(e,pC),n=g.useRef(null),[a,l]=g.useState(-1);g.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var U=n.current.getTotalLength();U&&l(U)}catch{}},[]);var{x:o,y:u,width:d,height:m,radius:p,className:h}=r,{animationEasing:v,animationDuration:b,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:_}=r,C=g.useRef(d),w=g.useRef(m),E=g.useRef(o),S=g.useRef(u),A=g.useMemo(()=>({x:o,y:u,width:d,height:m,radius:p}),[o,u,d,m,p]),z=Jf(A,"rectangle-");if(o!==+o||u!==+u||d!==+d||m!==+m||d===0||m===0)return null;var k=Nt("recharts-rectangle",h);if(!_){var M=Ur(r),{radius:D}=M,$=mC(M,L$);return g.createElement("path",Vm({},$,{x:Yi(o),y:Yi(u),width:Yi(d),height:Yi(m),radius:typeof p=="number"?p:void 0,className:k,d:fC(o,u,d,m,p)}))}var B=C.current,H=w.current,T=E.current,Y=S.current,J="0px ".concat(a===-1?1:a,"px"),P="".concat(a,"px 0px"),q=Mk(["strokeDasharray"],b,typeof v=="string"?v:pC.animationEasing);return g.createElement(Zf,{animationId:z,key:z,canBegin:a>0,duration:b,easing:v,isActive:_,begin:x},U=>{var I=Ft(B,d,U),te=Ft(H,m,U),L=Ft(T,o,U),Z=Ft(Y,u,U);n.current&&(C.current=I,w.current=te,E.current=L,S.current=Z);var W;j?U>0?W={transition:q,strokeDasharray:P}:W={strokeDasharray:J}:W={strokeDasharray:P};var ce=Ur(r),{radius:xe}=ce,he=mC(ce,$$);return g.createElement("path",Vm({},he,{radius:typeof p=="number"?p:void 0,className:k,d:fC(L,Z,I,te,p),ref:n,style:dC(dC({},W),r.style)}))})};function hC(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function vC(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?hC(Object(n),!0).forEach(function(a){H$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function H$(e,r,n){return(r=V$(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function V$(e){var r=Q$(e,"string");return typeof r=="symbol"?r:r+""}function Q$(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Qm=Math.PI/180,Y$=e=>e*180/Math.PI,zr=(e,r,n,a)=>({x:e+Math.cos(-Qm*a)*n,y:r+Math.sin(-Qm*a)*n}),K$=function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},W$=(e,r)=>{var{x:n,y:a}=e,{x:l,y:o}=r;return Math.sqrt((n-l)**2+(a-o)**2)},X$=(e,r)=>{var{x:n,y:a}=e,{cx:l,cy:o}=r,u=W$({x:n,y:a},{x:l,y:o});if(u<=0)return{radius:u,angle:0};var d=(n-l)/u,m=Math.acos(d);return a>o&&(m=2*Math.PI-m),{radius:u,angle:Y$(m),angleInRadian:m}},Z$=e=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),l=Math.floor(n/360),o=Math.min(a,l);return{startAngle:r-o*360,endAngle:n-o*360}},J$=(e,r)=>{var{startAngle:n,endAngle:a}=r,l=Math.floor(n/360),o=Math.floor(a/360),u=Math.min(l,o);return e+u*360},e7=(e,r)=>{var{chartX:n,chartY:a}=e,{radius:l,angle:o}=X$({x:n,y:a},r),{innerRadius:u,outerRadius:d}=r;if(l<u||l>d||l===0)return null;var{startAngle:m,endAngle:p}=Z$(r),h=o,v;if(m<=p){for(;h>p;)h-=360;for(;h<m;)h+=360;v=h>=m&&h<=p}else{for(;h>m;)h-=360;for(;h<p;)h+=360;v=h>=p&&h<=m}return v?vC(vC({},r),{},{radius:l,angle:J$(h,r)}):null};function Lk(e){var{cx:r,cy:n,radius:a,startAngle:l,endAngle:o}=e,u=zr(r,n,a,l),d=zr(r,n,a,o);return{points:[u,d],cx:r,cy:n,radius:a,startAngle:l,endAngle:o}}var gC,xC,bC,yC,jC,_C,NC;function mb(){return mb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mb.apply(null,arguments)}function Ts(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var t7=(e,r)=>{var n=tn(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Zd=e=>{var{cx:r,cy:n,radius:a,angle:l,sign:o,isExternal:u,cornerRadius:d,cornerIsExternal:m}=e,p=d*(u?1:-1)+a,h=Math.asin(d/p)/Qm,v=m?l:l+o*h,b=zr(r,n,p,v),x=zr(r,n,a,v),j=m?l-o*h:l,_=zr(r,n,p*Math.cos(h*Qm),j);return{center:b,circleTangency:x,lineTangency:_,theta:h}},$k=e=>{var{cx:r,cy:n,innerRadius:a,outerRadius:l,startAngle:o,endAngle:u}=e,d=t7(o,u),m=o+d,p=zr(r,n,l,o),h=zr(r,n,l,m),v=Ut(gC||(gC=Ts(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),p.x,p.y,l,l,+(Math.abs(d)>180),+(o>m),h.x,h.y);if(a>0){var b=zr(r,n,a,o),x=zr(r,n,a,m);v+=Ut(xC||(xC=Ts(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,a,a,+(Math.abs(d)>180),+(o<=m),b.x,b.y)}else v+=Ut(bC||(bC=Ts(["L ",","," Z"])),r,n);return v},r7=e=>{var{cx:r,cy:n,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:p}=e,h=tn(p-m),{circleTangency:v,lineTangency:b,theta:x}=Zd({cx:r,cy:n,radius:l,angle:m,sign:h,cornerRadius:o,cornerIsExternal:d}),{circleTangency:j,lineTangency:_,theta:C}=Zd({cx:r,cy:n,radius:l,angle:p,sign:-h,cornerRadius:o,cornerIsExternal:d}),w=d?Math.abs(m-p):Math.abs(m-p)-x-C;if(w<0)return u?Ut(yC||(yC=Ts(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),b.x,b.y,o,o,o*2,o,o,-o*2):$k({cx:r,cy:n,innerRadius:a,outerRadius:l,startAngle:m,endAngle:p});var E=Ut(jC||(jC=Ts(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),b.x,b.y,o,o,+(h<0),v.x,v.y,l,l,+(w>180),+(h<0),j.x,j.y,o,o,+(h<0),_.x,_.y);if(a>0){var{circleTangency:S,lineTangency:A,theta:z}=Zd({cx:r,cy:n,radius:a,angle:m,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),{circleTangency:k,lineTangency:M,theta:D}=Zd({cx:r,cy:n,radius:a,angle:p,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),$=d?Math.abs(m-p):Math.abs(m-p)-z-D;if($<0&&o===0)return"".concat(E,"L").concat(r,",").concat(n,"Z");E+=Ut(_C||(_C=Ts(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),M.x,M.y,o,o,+(h<0),k.x,k.y,a,a,+($>180),+(h>0),S.x,S.y,o,o,+(h<0),A.x,A.y)}else E+=Ut(NC||(NC=Ts(["L",",","Z"])),r,n);return E},n7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Bk=e=>{var r=Hr(e,n7),{cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:u,forceCornerRadius:d,cornerIsExternal:m,startAngle:p,endAngle:h,className:v}=r;if(o<l||p===h)return null;var b=Nt("recharts-sector",v),x=o-l,j=ta(u,x,0,!0),_;return j>0&&Math.abs(p-h)<360?_=r7({cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(j,x/2),forceCornerRadius:d,cornerIsExternal:m,startAngle:p,endAngle:h}):_=$k({cx:n,cy:a,innerRadius:l,outerRadius:o,startAngle:p,endAngle:h}),g.createElement("path",mb({},Ur(r),{className:b,d:_}))};function a7(e,r,n){if(e==="horizontal")return[{x:r.x,y:n.top},{x:r.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:r.y},{x:n.left+n.width,y:r.y}];if(wz(r)){if(e==="centric"){var{cx:a,cy:l,innerRadius:o,outerRadius:u,angle:d}=r,m=zr(a,l,o,d),p=zr(a,l,u,d);return[{x:m.x,y:m.y},{x:p.x,y:p.y}]}return Lk(r)}}var tx={},rx={},nx={},SC;function i7(){return SC||(SC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=Tz();function n(a){return r.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(nx)),nx}var wC;function s7(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=i7();function n(a){return a?(a=r.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(rx)),rx}var CC;function l7(){return CC||(CC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=qz(),n=s7();function a(l,o,u){u&&typeof u!="number"&&r.isIterateeCall(l,o,u)&&(o=u=void 0),l=n.toFinite(l),o===void 0?(o=l,l=0):o=n.toFinite(o),u=u===void 0?l<o?1:-1:n.toFinite(u);const d=Math.max(Math.ceil((o-l)/(u||1)),0),m=new Array(d);for(let p=0;p<d;p++)m[p]=l,l+=u;return m}e.range=a})(tx)),tx}var ax,EC;function o7(){return EC||(EC=1,ax=l7().range),ax}var c7=o7();const Uk=oi(c7);function Xi(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function u7(e,r){return e==null||r==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function by(e){let r,n,a;e.length!==2?(r=Xi,n=(d,m)=>Xi(e(d),m),a=(d,m)=>e(d)-m):(r=e===Xi||e===u7?e:d7,n=e,a=e);function l(d,m,p=0,h=d.length){if(p<h){if(r(m,m)!==0)return h;do{const v=p+h>>>1;n(d[v],m)<0?p=v+1:h=v}while(p<h)}return p}function o(d,m,p=0,h=d.length){if(p<h){if(r(m,m)!==0)return h;do{const v=p+h>>>1;n(d[v],m)<=0?p=v+1:h=v}while(p<h)}return p}function u(d,m,p=0,h=d.length){const v=l(d,m,p,h-1);return v>p&&a(d[v-1],m)>-a(d[v],m)?v-1:v}return{left:l,center:u,right:o}}function d7(){return 0}function Fk(e){return e===null?NaN:+e}function*m7(e,r){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const f7=by(Xi),gu=f7.right;by(Fk).center;class AC extends Map{constructor(r,n=v7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(const[a,l]of r)this.set(a,l)}get(r){return super.get(zC(this,r))}has(r){return super.has(zC(this,r))}set(r,n){return super.set(p7(this,r),n)}delete(r){return super.delete(h7(this,r))}}function zC({_intern:e,_key:r},n){const a=r(n);return e.has(a)?e.get(a):n}function p7({_intern:e,_key:r},n){const a=r(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function h7({_intern:e,_key:r},n){const a=r(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function v7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function g7(e=Xi){if(e===Xi)return Gk;if(typeof e!="function")throw new TypeError("compare is not a function");return(r,n)=>{const a=e(r,n);return a||a===0?a:(e(n,n)===0)-(e(r,r)===0)}}function Gk(e,r){return(e==null||!(e>=e))-(r==null||!(r>=r))||(e<r?-1:e>r?1:0)}const x7=Math.sqrt(50),b7=Math.sqrt(10),y7=Math.sqrt(2);function Ym(e,r,n){const a=(r-e)/Math.max(0,n),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),u=o>=x7?10:o>=b7?5:o>=y7?2:1;let d,m,p;return l<0?(p=Math.pow(10,-l)/u,d=Math.round(e*p),m=Math.round(r*p),d/p<e&&++d,m/p>r&&--m,p=-p):(p=Math.pow(10,l)*u,d=Math.round(e/p),m=Math.round(r/p),d*p<e&&++d,m*p>r&&--m),m<d&&.5<=n&&n<2?Ym(e,r,n*2):[d,m,p]}function fb(e,r,n){if(r=+r,e=+e,n=+n,!(n>0))return[];if(e===r)return[e];const a=r<e,[l,o,u]=a?Ym(r,e,n):Ym(e,r,n);if(!(o>=l))return[];const d=o-l+1,m=new Array(d);if(a)if(u<0)for(let p=0;p<d;++p)m[p]=(o-p)/-u;else for(let p=0;p<d;++p)m[p]=(o-p)*u;else if(u<0)for(let p=0;p<d;++p)m[p]=(l+p)/-u;else for(let p=0;p<d;++p)m[p]=(l+p)*u;return m}function pb(e,r,n){return r=+r,e=+e,n=+n,Ym(e,r,n)[2]}function hb(e,r,n){r=+r,e=+e,n=+n;const a=r<e,l=a?pb(r,e,n):pb(e,r,n);return(a?-1:1)*(l<0?1/-l:l)}function kC(e,r){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function OC(e,r){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function Hk(e,r,n=0,a=1/0,l){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=r&&r<=a))return e;for(l=l===void 0?Gk:g7(l);a>n;){if(a-n>600){const m=a-n+1,p=r-n+1,h=Math.log(m),v=.5*Math.exp(2*h/3),b=.5*Math.sqrt(h*v*(m-v)/m)*(p-m/2<0?-1:1),x=Math.max(n,Math.floor(r-p*v/m+b)),j=Math.min(a,Math.floor(r+(m-p)*v/m+b));Hk(e,r,x,j,l)}const o=e[r];let u=n,d=a;for(Ec(e,n,r),l(e[a],o)>0&&Ec(e,n,a);u<d;){for(Ec(e,u,d),++u,--d;l(e[u],o)<0;)++u;for(;l(e[d],o)>0;)--d}l(e[n],o)===0?Ec(e,n,d):(++d,Ec(e,d,a)),d<=r&&(n=d+1),r<=d&&(a=d-1)}return e}function Ec(e,r,n){const a=e[r];e[r]=e[n],e[n]=a}function j7(e,r,n){if(e=Float64Array.from(m7(e)),!(!(a=e.length)||isNaN(r=+r))){if(r<=0||a<2)return OC(e);if(r>=1)return kC(e);var a,l=(a-1)*r,o=Math.floor(l),u=kC(Hk(e,o).subarray(0,o+1)),d=OC(e.subarray(o+1));return u+(d-u)*(l-o)}}function _7(e,r,n=Fk){if(!(!(a=e.length)||isNaN(r=+r))){if(r<=0||a<2)return+n(e[0],0,e);if(r>=1)return+n(e[a-1],a-1,e);var a,l=(a-1)*r,o=Math.floor(l),u=+n(e[o],o,e),d=+n(e[o+1],o+1,e);return u+(d-u)*(l-o)}}function N7(e,r,n){e=+e,r=+r,n=(l=arguments.length)<2?(r=e,e=0,1):l<3?1:+n;for(var a=-1,l=Math.max(0,Math.ceil((r-e)/n))|0,o=new Array(l);++a<l;)o[a]=e+a*n;return o}function Fn(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function mi(e,r){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const vb=Symbol("implicit");function yy(){var e=new AC,r=[],n=[],a=vb;function l(o){let u=e.get(o);if(u===void 0){if(a!==vb)return a;e.set(o,u=r.push(o)-1)}return n[u%n.length]}return l.domain=function(o){if(!arguments.length)return r.slice();r=[],e=new AC;for(const u of o)e.has(u)||e.set(u,r.push(u)-1);return l},l.range=function(o){return arguments.length?(n=Array.from(o),l):n.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return yy(r,n).unknown(a)},Fn.apply(l,arguments),l}function jy(){var e=yy().unknown(void 0),r=e.domain,n=e.range,a=0,l=1,o,u,d=!1,m=0,p=0,h=.5;delete e.unknown;function v(){var b=r().length,x=l<a,j=x?l:a,_=x?a:l;o=(_-j)/Math.max(1,b-m+p*2),d&&(o=Math.floor(o)),j+=(_-j-o*(b-m))*h,u=o*(1-m),d&&(j=Math.round(j),u=Math.round(u));var C=N7(b).map(function(w){return j+o*w});return n(x?C.reverse():C)}return e.domain=function(b){return arguments.length?(r(b),v()):r()},e.range=function(b){return arguments.length?([a,l]=b,a=+a,l=+l,v()):[a,l]},e.rangeRound=function(b){return[a,l]=b,a=+a,l=+l,d=!0,v()},e.bandwidth=function(){return u},e.step=function(){return o},e.round=function(b){return arguments.length?(d=!!b,v()):d},e.padding=function(b){return arguments.length?(m=Math.min(1,p=+b),v()):m},e.paddingInner=function(b){return arguments.length?(m=Math.min(1,b),v()):m},e.paddingOuter=function(b){return arguments.length?(p=+b,v()):p},e.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),v()):h},e.copy=function(){return jy(r(),[a,l]).round(d).paddingInner(m).paddingOuter(p).align(h)},Fn.apply(v(),arguments)}function Vk(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Vk(r())},e}function S7(){return Vk(jy.apply(null,arguments).paddingInner(1))}function _y(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function Qk(e,r){var n=Object.create(e.prototype);for(var a in r)n[a]=r[a];return n}function xu(){}var Zc=.7,Km=1/Zc,uo="\\s*([+-]?\\d+)\\s*",Jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ba="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w7=/^#([0-9a-f]{3,8})$/,C7=new RegExp(`^rgb\\(${uo},${uo},${uo}\\)$`),E7=new RegExp(`^rgb\\(${ba},${ba},${ba}\\)$`),A7=new RegExp(`^rgba\\(${uo},${uo},${uo},${Jc}\\)$`),z7=new RegExp(`^rgba\\(${ba},${ba},${ba},${Jc}\\)$`),k7=new RegExp(`^hsl\\(${Jc},${ba},${ba}\\)$`),O7=new RegExp(`^hsla\\(${Jc},${ba},${ba},${Jc}\\)$`),DC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_y(xu,eu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:PC,formatHex:PC,formatHex8:D7,formatHsl:P7,formatRgb:MC,toString:MC});function PC(){return this.rgb().formatHex()}function D7(){return this.rgb().formatHex8()}function P7(){return Yk(this).formatHsl()}function MC(){return this.rgb().formatRgb()}function eu(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=w7.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?TC(r):n===3?new nn(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?Jd(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?Jd(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=C7.exec(e))?new nn(r[1],r[2],r[3],1):(r=E7.exec(e))?new nn(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=A7.exec(e))?Jd(r[1],r[2],r[3],r[4]):(r=z7.exec(e))?Jd(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=k7.exec(e))?IC(r[1],r[2]/100,r[3]/100,1):(r=O7.exec(e))?IC(r[1],r[2]/100,r[3]/100,r[4]):DC.hasOwnProperty(e)?TC(DC[e]):e==="transparent"?new nn(NaN,NaN,NaN,0):null}function TC(e){return new nn(e>>16&255,e>>8&255,e&255,1)}function Jd(e,r,n,a){return a<=0&&(e=r=n=NaN),new nn(e,r,n,a)}function M7(e){return e instanceof xu||(e=eu(e)),e?(e=e.rgb(),new nn(e.r,e.g,e.b,e.opacity)):new nn}function gb(e,r,n,a){return arguments.length===1?M7(e):new nn(e,r,n,a??1)}function nn(e,r,n,a){this.r=+e,this.g=+r,this.b=+n,this.opacity=+a}_y(nn,gb,Qk(xu,{brighter(e){return e=e==null?Km:Math.pow(Km,e),new nn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zc:Math.pow(Zc,e),new nn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nn(Gs(this.r),Gs(this.g),Gs(this.b),Wm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qC,formatHex:qC,formatHex8:T7,formatRgb:RC,toString:RC}));function qC(){return`#${qs(this.r)}${qs(this.g)}${qs(this.b)}`}function T7(){return`#${qs(this.r)}${qs(this.g)}${qs(this.b)}${qs((isNaN(this.opacity)?1:this.opacity)*255)}`}function RC(){const e=Wm(this.opacity);return`${e===1?"rgb(":"rgba("}${Gs(this.r)}, ${Gs(this.g)}, ${Gs(this.b)}${e===1?")":`, ${e})`}`}function Wm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function qs(e){return e=Gs(e),(e<16?"0":"")+e.toString(16)}function IC(e,r,n,a){return a<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new Zn(e,r,n,a)}function Yk(e){if(e instanceof Zn)return new Zn(e.h,e.s,e.l,e.opacity);if(e instanceof xu||(e=eu(e)),!e)return new Zn;if(e instanceof Zn)return e;e=e.rgb();var r=e.r/255,n=e.g/255,a=e.b/255,l=Math.min(r,n,a),o=Math.max(r,n,a),u=NaN,d=o-l,m=(o+l)/2;return d?(r===o?u=(n-a)/d+(n<a)*6:n===o?u=(a-r)/d+2:u=(r-n)/d+4,d/=m<.5?o+l:2-o-l,u*=60):d=m>0&&m<1?0:u,new Zn(u,d,m,e.opacity)}function q7(e,r,n,a){return arguments.length===1?Yk(e):new Zn(e,r,n,a??1)}function Zn(e,r,n,a){this.h=+e,this.s=+r,this.l=+n,this.opacity=+a}_y(Zn,q7,Qk(xu,{brighter(e){return e=e==null?Km:Math.pow(Km,e),new Zn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zc:Math.pow(Zc,e),new Zn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*r,l=2*n-a;return new nn(ix(e>=240?e-240:e+120,l,a),ix(e,l,a),ix(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new Zn(LC(this.h),em(this.s),em(this.l),Wm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wm(this.opacity);return`${e===1?"hsl(":"hsla("}${LC(this.h)}, ${em(this.s)*100}%, ${em(this.l)*100}%${e===1?")":`, ${e})`}`}}));function LC(e){return e=(e||0)%360,e<0?e+360:e}function em(e){return Math.max(0,Math.min(1,e||0))}function ix(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}const Ny=e=>()=>e;function R7(e,r){return function(n){return e+n*r}}function I7(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(a){return Math.pow(e+a*r,n)}}function L7(e){return(e=+e)==1?Kk:function(r,n){return n-r?I7(r,n,e):Ny(isNaN(r)?n:r)}}function Kk(e,r){var n=r-e;return n?R7(e,n):Ny(isNaN(e)?r:e)}const $C=(function e(r){var n=L7(r);function a(l,o){var u=n((l=gb(l)).r,(o=gb(o)).r),d=n(l.g,o.g),m=n(l.b,o.b),p=Kk(l.opacity,o.opacity);return function(h){return l.r=u(h),l.g=d(h),l.b=m(h),l.opacity=p(h),l+""}}return a.gamma=e,a})(1);function $7(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,a=r.slice(),l;return function(o){for(l=0;l<n;++l)a[l]=e[l]*(1-o)+r[l]*o;return a}}function B7(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function U7(e,r){var n=r?r.length:0,a=e?Math.min(n,e.length):0,l=new Array(a),o=new Array(n),u;for(u=0;u<a;++u)l[u]=_o(e[u],r[u]);for(;u<n;++u)o[u]=r[u];return function(d){for(u=0;u<a;++u)o[u]=l[u](d);return o}}function F7(e,r){var n=new Date;return e=+e,r=+r,function(a){return n.setTime(e*(1-a)+r*a),n}}function Xm(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}function G7(e,r){var n={},a={},l;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in e?n[l]=_o(e[l],r[l]):a[l]=r[l];return function(o){for(l in n)a[l]=n[l](o);return a}}var xb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sx=new RegExp(xb.source,"g");function H7(e){return function(){return e}}function V7(e){return function(r){return e(r)+""}}function Q7(e,r){var n=xb.lastIndex=sx.lastIndex=0,a,l,o,u=-1,d=[],m=[];for(e=e+"",r=r+"";(a=xb.exec(e))&&(l=sx.exec(r));)(o=l.index)>n&&(o=r.slice(n,o),d[u]?d[u]+=o:d[++u]=o),(a=a[0])===(l=l[0])?d[u]?d[u]+=l:d[++u]=l:(d[++u]=null,m.push({i:u,x:Xm(a,l)})),n=sx.lastIndex;return n<r.length&&(o=r.slice(n),d[u]?d[u]+=o:d[++u]=o),d.length<2?m[0]?V7(m[0].x):H7(r):(r=m.length,function(p){for(var h=0,v;h<r;++h)d[(v=m[h]).i]=v.x(p);return d.join("")})}function _o(e,r){var n=typeof r,a;return r==null||n==="boolean"?Ny(r):(n==="number"?Xm:n==="string"?(a=eu(r))?(r=a,$C):Q7:r instanceof eu?$C:r instanceof Date?F7:B7(r)?$7:Array.isArray(r)?U7:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?G7:Xm)(e,r)}function Sy(e,r){return e=+e,r=+r,function(n){return Math.round(e*(1-n)+r*n)}}function Y7(e,r){r===void 0&&(r=e,e=_o);for(var n=0,a=r.length-1,l=r[0],o=new Array(a<0?0:a);n<a;)o[n]=e(l,l=r[++n]);return function(u){var d=Math.max(0,Math.min(a-1,Math.floor(u*=a)));return o[d](u-d)}}function K7(e){return function(){return e}}function Zm(e){return+e}var BC=[0,1];function Br(e){return e}function bb(e,r){return(r-=e=+e)?function(n){return(n-e)/r}:K7(isNaN(r)?NaN:.5)}function W7(e,r){var n;return e>r&&(n=e,e=r,r=n),function(a){return Math.max(e,Math.min(r,a))}}function X7(e,r,n){var a=e[0],l=e[1],o=r[0],u=r[1];return l<a?(a=bb(l,a),o=n(u,o)):(a=bb(a,l),o=n(o,u)),function(d){return o(a(d))}}function Z7(e,r,n){var a=Math.min(e.length,r.length)-1,l=new Array(a),o=new Array(a),u=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++u<a;)l[u]=bb(e[u],e[u+1]),o[u]=n(r[u],r[u+1]);return function(d){var m=gu(e,d,1,a)-1;return o[m](l[m](d))}}function bu(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ep(){var e=BC,r=BC,n=_o,a,l,o,u=Br,d,m,p;function h(){var b=Math.min(e.length,r.length);return u!==Br&&(u=W7(e[0],e[b-1])),d=b>2?Z7:X7,m=p=null,v}function v(b){return b==null||isNaN(b=+b)?o:(m||(m=d(e.map(a),r,n)))(a(u(b)))}return v.invert=function(b){return u(l((p||(p=d(r,e.map(a),Xm)))(b)))},v.domain=function(b){return arguments.length?(e=Array.from(b,Zm),h()):e.slice()},v.range=function(b){return arguments.length?(r=Array.from(b),h()):r.slice()},v.rangeRound=function(b){return r=Array.from(b),n=Sy,h()},v.clamp=function(b){return arguments.length?(u=b?!0:Br,h()):u!==Br},v.interpolate=function(b){return arguments.length?(n=b,h()):n},v.unknown=function(b){return arguments.length?(o=b,v):o},function(b,x){return a=b,l=x,h()}}function wy(){return ep()(Br,Br)}function J7(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jm(e,r){if(!isFinite(e)||e===0)return null;var n=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"),a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function xo(e){return e=Jm(Math.abs(e)),e?e[1]:NaN}function eB(e,r){return function(n,a){for(var l=n.length,o=[],u=0,d=e[0],m=0;l>0&&d>0&&(m+d+1>a&&(d=Math.max(1,a-m)),o.push(n.substring(l-=d,l+d)),!((m+=d+1)>a));)d=e[u=(u+1)%e.length];return o.reverse().join(r)}}function tB(e){return function(r){return r.replace(/[0-9]/g,function(n){return e[+n]})}}var rB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tu(e){if(!(r=rB.exec(e)))throw new Error("invalid format: "+e);var r;return new Cy({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}tu.prototype=Cy.prototype;function Cy(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Cy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nB(e){e:for(var r=e.length,n=1,a=-1,l;n<r;++n)switch(e[n]){case".":a=l=n;break;case"0":a===0&&(a=n),l=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var ef;function aB(e,r){var n=Jm(e,r);if(!n)return ef=void 0,e.toPrecision(r);var a=n[0],l=n[1],o=l-(ef=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+Jm(e,Math.max(0,r+o-1))[0]}function UC(e,r){var n=Jm(e,r);if(!n)return e+"";var a=n[0],l=n[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const FC={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:J7,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>UC(e*100,r),r:UC,s:aB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function GC(e){return e}var HC=Array.prototype.map,VC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function iB(e){var r=e.grouping===void 0||e.thousands===void 0?GC:eB(HC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?GC:tB(HC.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function p(v,b){v=tu(v);var x=v.fill,j=v.align,_=v.sign,C=v.symbol,w=v.zero,E=v.width,S=v.comma,A=v.precision,z=v.trim,k=v.type;k==="n"?(S=!0,k="g"):FC[k]||(A===void 0&&(A=12),z=!0,k="g"),(w||x==="0"&&j==="=")&&(w=!0,x="0",j="=");var M=(b&&b.prefix!==void 0?b.prefix:"")+(C==="$"?n:C==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),D=(C==="$"?a:/[%p]/.test(k)?u:"")+(b&&b.suffix!==void 0?b.suffix:""),$=FC[k],B=/[defgprs%]/.test(k);A=A===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function H(T){var Y=M,J=D,P,q,U;if(k==="c")J=$(T)+J,T="";else{T=+T;var I=T<0||1/T<0;if(T=isNaN(T)?m:$(Math.abs(T),A),z&&(T=nB(T)),I&&+T==0&&_!=="+"&&(I=!1),Y=(I?_==="("?_:d:_==="-"||_==="("?"":_)+Y,J=(k==="s"&&!isNaN(T)&&ef!==void 0?VC[8+ef/3]:"")+J+(I&&_==="("?")":""),B){for(P=-1,q=T.length;++P<q;)if(U=T.charCodeAt(P),48>U||U>57){J=(U===46?l+T.slice(P+1):T.slice(P))+J,T=T.slice(0,P);break}}}S&&!w&&(T=r(T,1/0));var te=Y.length+T.length+J.length,L=te<E?new Array(E-te+1).join(x):"";switch(S&&w&&(T=r(L+T,L.length?E-J.length:1/0),L=""),j){case"<":T=Y+T+J+L;break;case"=":T=Y+L+T+J;break;case"^":T=L.slice(0,te=L.length>>1)+Y+T+J+L.slice(te);break;default:T=L+Y+T+J;break}return o(T)}return H.toString=function(){return v+""},H}function h(v,b){var x=Math.max(-8,Math.min(8,Math.floor(xo(b)/3)))*3,j=Math.pow(10,-x),_=p((v=tu(v),v.type="f",v),{suffix:VC[8+x/3]});return function(C){return _(j*C)}}return{format:p,formatPrefix:h}}var tm,Ey,Wk;sB({thousands:",",grouping:[3],currency:["$",""]});function sB(e){return tm=iB(e),Ey=tm.format,Wk=tm.formatPrefix,tm}function lB(e){return Math.max(0,-xo(Math.abs(e)))}function oB(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xo(r)/3)))*3-xo(Math.abs(e)))}function cB(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,xo(r)-xo(e))+1}function Xk(e,r,n,a){var l=hb(e,r,n),o;switch(a=tu(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(r));return a.precision==null&&!isNaN(o=oB(l,u))&&(a.precision=o),Wk(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=cB(l,Math.max(Math.abs(e),Math.abs(r))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=lB(l))&&(a.precision=o-(a.type==="%")*2);break}}return Ey(a)}function ls(e){var r=e.domain;return e.ticks=function(n){var a=r();return fb(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var l=r();return Xk(l[0],l[l.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=r(),l=0,o=a.length-1,u=a[l],d=a[o],m,p,h=10;for(d<u&&(p=u,u=d,d=p,p=l,l=o,o=p);h-- >0;){if(p=pb(u,d,n),p===m)return a[l]=u,a[o]=d,r(a);if(p>0)u=Math.floor(u/p)*p,d=Math.ceil(d/p)*p;else if(p<0)u=Math.ceil(u*p)/p,d=Math.floor(d*p)/p;else break;m=p}return e},e}function Zk(){var e=wy();return e.copy=function(){return bu(e,Zk())},Fn.apply(e,arguments),ls(e)}function Jk(e){var r;function n(a){return a==null||isNaN(a=+a)?r:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Zm),n):e.slice()},n.unknown=function(a){return arguments.length?(r=a,n):r},n.copy=function(){return Jk(e).unknown(r)},e=arguments.length?Array.from(e,Zm):[0,1],ls(n)}function eO(e,r){e=e.slice();var n=0,a=e.length-1,l=e[n],o=e[a],u;return o<l&&(u=n,n=a,a=u,u=l,l=o,o=u),e[n]=r.floor(l),e[a]=r.ceil(o),e}function QC(e){return Math.log(e)}function YC(e){return Math.exp(e)}function uB(e){return-Math.log(-e)}function dB(e){return-Math.exp(-e)}function mB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function fB(e){return e===10?mB:e===Math.E?Math.exp:r=>Math.pow(e,r)}function pB(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),r=>Math.log(r)/e)}function KC(e){return(r,n)=>-e(-r,n)}function Ay(e){const r=e(QC,YC),n=r.domain;let a=10,l,o;function u(){return l=pB(a),o=fB(a),n()[0]<0?(l=KC(l),o=KC(o),e(uB,dB)):e(QC,YC),r}return r.base=function(d){return arguments.length?(a=+d,u()):a},r.domain=function(d){return arguments.length?(n(d),u()):n()},r.ticks=d=>{const m=n();let p=m[0],h=m[m.length-1];const v=h<p;v&&([p,h]=[h,p]);let b=l(p),x=l(h),j,_;const C=d==null?10:+d;let w=[];if(!(a%1)&&x-b<C){if(b=Math.floor(b),x=Math.ceil(x),p>0){for(;b<=x;++b)for(j=1;j<a;++j)if(_=b<0?j/o(-b):j*o(b),!(_<p)){if(_>h)break;w.push(_)}}else for(;b<=x;++b)for(j=a-1;j>=1;--j)if(_=b>0?j/o(-b):j*o(b),!(_<p)){if(_>h)break;w.push(_)}w.length*2<C&&(w=fb(p,h,C))}else w=fb(b,x,Math.min(x-b,C)).map(o);return v?w.reverse():w},r.tickFormat=(d,m)=>{if(d==null&&(d=10),m==null&&(m=a===10?"s":","),typeof m!="function"&&(!(a%1)&&(m=tu(m)).precision==null&&(m.trim=!0),m=Ey(m)),d===1/0)return m;const p=Math.max(1,a*d/r.ticks().length);return h=>{let v=h/o(Math.round(l(h)));return v*a<a-.5&&(v*=a),v<=p?m(h):""}},r.nice=()=>n(eO(n(),{floor:d=>o(Math.floor(l(d))),ceil:d=>o(Math.ceil(l(d)))})),r}function tO(){const e=Ay(ep()).domain([1,10]);return e.copy=()=>bu(e,tO()).base(e.base()),Fn.apply(e,arguments),e}function WC(e){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/e))}}function XC(e){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*e}}function zy(e){var r=1,n=e(WC(r),XC(r));return n.constant=function(a){return arguments.length?e(WC(r=+a),XC(r)):r},ls(n)}function rO(){var e=zy(ep());return e.copy=function(){return bu(e,rO()).constant(e.constant())},Fn.apply(e,arguments)}function ZC(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function hB(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vB(e){return e<0?-e*e:e*e}function ky(e){var r=e(Br,Br),n=1;function a(){return n===1?e(Br,Br):n===.5?e(hB,vB):e(ZC(n),ZC(1/n))}return r.exponent=function(l){return arguments.length?(n=+l,a()):n},ls(r)}function Oy(){var e=ky(ep());return e.copy=function(){return bu(e,Oy()).exponent(e.exponent())},Fn.apply(e,arguments),e}function gB(){return Oy.apply(null,arguments).exponent(.5)}function JC(e){return Math.sign(e)*e*e}function xB(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function nO(){var e=wy(),r=[0,1],n=!1,a;function l(o){var u=xB(e(o));return isNaN(u)?a:n?Math.round(u):u}return l.invert=function(o){return e.invert(JC(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((r=Array.from(o,Zm)).map(JC)),l):r.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(n=!!o,l):n},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return nO(e.domain(),r).round(n).clamp(e.clamp()).unknown(a)},Fn.apply(l,arguments),ls(l)}function aO(){var e=[],r=[],n=[],a;function l(){var u=0,d=Math.max(1,r.length);for(n=new Array(d-1);++u<d;)n[u-1]=_7(e,u/d);return o}function o(u){return u==null||isNaN(u=+u)?a:r[gu(n,u)]}return o.invertExtent=function(u){var d=r.indexOf(u);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let d of u)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Xi),l()},o.range=function(u){return arguments.length?(r=Array.from(u),l()):r.slice()},o.unknown=function(u){return arguments.length?(a=u,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return aO().domain(e).range(r).unknown(a)},Fn.apply(o,arguments)}function iO(){var e=0,r=1,n=1,a=[.5],l=[0,1],o;function u(m){return m!=null&&m<=m?l[gu(a,m,0,n)]:o}function d(){var m=-1;for(a=new Array(n);++m<n;)a[m]=((m+1)*r-(m-n)*e)/(n+1);return u}return u.domain=function(m){return arguments.length?([e,r]=m,e=+e,r=+r,d()):[e,r]},u.range=function(m){return arguments.length?(n=(l=Array.from(m)).length-1,d()):l.slice()},u.invertExtent=function(m){var p=l.indexOf(m);return p<0?[NaN,NaN]:p<1?[e,a[0]]:p>=n?[a[n-1],r]:[a[p-1],a[p]]},u.unknown=function(m){return arguments.length&&(o=m),u},u.thresholds=function(){return a.slice()},u.copy=function(){return iO().domain([e,r]).range(l).unknown(o)},Fn.apply(ls(u),arguments)}function sO(){var e=[.5],r=[0,1],n,a=1;function l(o){return o!=null&&o<=o?r[gu(e,o,0,a)]:n}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,r.length-1),l):e.slice()},l.range=function(o){return arguments.length?(r=Array.from(o),a=Math.min(e.length,r.length-1),l):r.slice()},l.invertExtent=function(o){var u=r.indexOf(o);return[e[u-1],e[u]]},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return sO().domain(e).range(r).unknown(n)},Fn.apply(l,arguments)}const lx=new Date,ox=new Date;function lr(e,r,n,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),r(o,1),e(o),o),l.round=o=>{const u=l(o),d=l.ceil(o);return o-u<d-o?u:d},l.offset=(o,u)=>(r(o=new Date(+o),u==null?1:Math.floor(u)),o),l.range=(o,u,d)=>{const m=[];if(o=l.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return m;let p;do m.push(p=new Date(+o)),r(o,d),e(o);while(p<o&&o<u);return m},l.filter=o=>lr(u=>{if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;r(u,-1),!o(u););else for(;--d>=0;)for(;r(u,1),!o(u););}),n&&(l.count=(o,u)=>(lx.setTime(+o),ox.setTime(+u),e(lx),e(ox),Math.floor(n(lx,ox))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?u=>a(u)%o===0:u=>l.count(0,u)%o===0):l)),l}const tf=lr(()=>{},(e,r)=>{e.setTime(+e+r)},(e,r)=>r-e);tf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?lr(r=>{r.setTime(Math.floor(r/e)*e)},(r,n)=>{r.setTime(+r+n*e)},(r,n)=>(n-r)/e):tf);tf.range;const Wa=1e3,Tn=Wa*60,Xa=Tn*60,ri=Xa*24,Dy=ri*7,e2=ri*30,cx=ri*365,Rs=lr(e=>{e.setTime(e-e.getMilliseconds())},(e,r)=>{e.setTime(+e+r*Wa)},(e,r)=>(r-e)/Wa,e=>e.getUTCSeconds());Rs.range;const Py=lr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wa)},(e,r)=>{e.setTime(+e+r*Tn)},(e,r)=>(r-e)/Tn,e=>e.getMinutes());Py.range;const My=lr(e=>{e.setUTCSeconds(0,0)},(e,r)=>{e.setTime(+e+r*Tn)},(e,r)=>(r-e)/Tn,e=>e.getUTCMinutes());My.range;const Ty=lr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wa-e.getMinutes()*Tn)},(e,r)=>{e.setTime(+e+r*Xa)},(e,r)=>(r-e)/Xa,e=>e.getHours());Ty.range;const qy=lr(e=>{e.setUTCMinutes(0,0,0)},(e,r)=>{e.setTime(+e+r*Xa)},(e,r)=>(r-e)/Xa,e=>e.getUTCHours());qy.range;const yu=lr(e=>e.setHours(0,0,0,0),(e,r)=>e.setDate(e.getDate()+r),(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Tn)/ri,e=>e.getDate()-1);yu.range;const tp=lr(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/ri,e=>e.getUTCDate()-1);tp.range;const lO=lr(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/ri,e=>Math.floor(e/ri));lO.range;function il(e){return lr(r=>{r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*Tn)/Dy)}const rp=il(0),rf=il(1),bB=il(2),yB=il(3),bo=il(4),jB=il(5),_B=il(6);rp.range;rf.range;bB.range;yB.range;bo.range;jB.range;_B.range;function sl(e){return lr(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/Dy)}const np=sl(0),nf=sl(1),NB=sl(2),SB=sl(3),yo=sl(4),wB=sl(5),CB=sl(6);np.range;nf.range;NB.range;SB.range;yo.range;wB.range;CB.range;const Ry=lr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,r)=>{e.setMonth(e.getMonth()+r)},(e,r)=>r.getMonth()-e.getMonth()+(r.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ry.range;const Iy=lr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCMonth(e.getUTCMonth()+r)},(e,r)=>r.getUTCMonth()-e.getUTCMonth()+(r.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Iy.range;const ni=lr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r)},(e,r)=>r.getFullYear()-e.getFullYear(),e=>e.getFullYear());ni.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:lr(r=>{r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*e)});ni.range;const ai=lr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r)},(e,r)=>r.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:lr(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*e)});ai.range;function oO(e,r,n,a,l,o){const u=[[Rs,1,Wa],[Rs,5,5*Wa],[Rs,15,15*Wa],[Rs,30,30*Wa],[o,1,Tn],[o,5,5*Tn],[o,15,15*Tn],[o,30,30*Tn],[l,1,Xa],[l,3,3*Xa],[l,6,6*Xa],[l,12,12*Xa],[a,1,ri],[a,2,2*ri],[n,1,Dy],[r,1,e2],[r,3,3*e2],[e,1,cx]];function d(p,h,v){const b=h<p;b&&([p,h]=[h,p]);const x=v&&typeof v.range=="function"?v:m(p,h,v),j=x?x.range(p,+h+1):[];return b?j.reverse():j}function m(p,h,v){const b=Math.abs(h-p)/v,x=by(([,,C])=>C).right(u,b);if(x===u.length)return e.every(hb(p/cx,h/cx,v));if(x===0)return tf.every(Math.max(hb(p,h,v),1));const[j,_]=u[b/u[x-1][2]<u[x][2]/b?x-1:x];return j.every(_)}return[d,m]}const[EB,AB]=oO(ai,Iy,np,lO,qy,My),[zB,kB]=oO(ni,Ry,rp,yu,Ty,Py);function ux(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dx(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ac(e,r,n){return{y:e,m:r,d:n,H:0,M:0,S:0,L:0}}function OB(e){var r=e.dateTime,n=e.date,a=e.time,l=e.periods,o=e.days,u=e.shortDays,d=e.months,m=e.shortMonths,p=zc(l),h=kc(l),v=zc(o),b=kc(o),x=zc(u),j=kc(u),_=zc(d),C=kc(d),w=zc(m),E=kc(m),S={a:U,A:I,b:te,B:L,c:null,d:s2,e:s2,f:e9,g:u9,G:m9,H:XB,I:ZB,j:JB,L:cO,m:t9,M:r9,p:Z,q:W,Q:c2,s:u2,S:n9,u:a9,U:i9,V:s9,w:l9,W:o9,x:null,X:null,y:c9,Y:d9,Z:f9,"%":o2},A={a:ce,A:xe,b:he,B:F,c:null,d:l2,e:l2,f:g9,g:E9,G:z9,H:p9,I:h9,j:v9,L:dO,m:x9,M:b9,p:ve,q:Pe,Q:c2,s:u2,S:y9,u:j9,U:_9,V:N9,w:S9,W:w9,x:null,X:null,y:C9,Y:A9,Z:k9,"%":o2},z={a:B,A:H,b:T,B:Y,c:J,d:a2,e:a2,f:QB,g:n2,G:r2,H:i2,I:i2,j:FB,L:VB,m:UB,M:GB,p:$,q:BB,Q:KB,s:WB,S:HB,u:qB,U:RB,V:IB,w:TB,W:LB,x:P,X:q,y:n2,Y:r2,Z:$B,"%":YB};S.x=k(n,S),S.X=k(a,S),S.c=k(r,S),A.x=k(n,A),A.X=k(a,A),A.c=k(r,A);function k(ue,ee){return function(V){var de=[],we=-1,Te=0,Xe=ue.length,tt,lt,rr;for(V instanceof Date||(V=new Date(+V));++we<Xe;)ue.charCodeAt(we)===37&&(de.push(ue.slice(Te,we)),(lt=t2[tt=ue.charAt(++we)])!=null?tt=ue.charAt(++we):lt=tt==="e"?" ":"0",(rr=ee[tt])&&(tt=rr(V,lt)),de.push(tt),Te=we+1);return de.push(ue.slice(Te,we)),de.join("")}}function M(ue,ee){return function(V){var de=Ac(1900,void 0,1),we=D(de,ue,V+="",0),Te,Xe;if(we!=V.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(ee&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Te=dx(Ac(de.y,0,1)),Xe=Te.getUTCDay(),Te=Xe>4||Xe===0?nf.ceil(Te):nf(Te),Te=tp.offset(Te,(de.V-1)*7),de.y=Te.getUTCFullYear(),de.m=Te.getUTCMonth(),de.d=Te.getUTCDate()+(de.w+6)%7):(Te=ux(Ac(de.y,0,1)),Xe=Te.getDay(),Te=Xe>4||Xe===0?rf.ceil(Te):rf(Te),Te=yu.offset(Te,(de.V-1)*7),de.y=Te.getFullYear(),de.m=Te.getMonth(),de.d=Te.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Xe="Z"in de?dx(Ac(de.y,0,1)).getUTCDay():ux(Ac(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Xe+5)%7:de.w+de.U*7-(Xe+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,dx(de)):ux(de)}}function D(ue,ee,V,de){for(var we=0,Te=ee.length,Xe=V.length,tt,lt;we<Te;){if(de>=Xe)return-1;if(tt=ee.charCodeAt(we++),tt===37){if(tt=ee.charAt(we++),lt=z[tt in t2?ee.charAt(we++):tt],!lt||(de=lt(ue,V,de))<0)return-1}else if(tt!=V.charCodeAt(de++))return-1}return de}function $(ue,ee,V){var de=p.exec(ee.slice(V));return de?(ue.p=h.get(de[0].toLowerCase()),V+de[0].length):-1}function B(ue,ee,V){var de=x.exec(ee.slice(V));return de?(ue.w=j.get(de[0].toLowerCase()),V+de[0].length):-1}function H(ue,ee,V){var de=v.exec(ee.slice(V));return de?(ue.w=b.get(de[0].toLowerCase()),V+de[0].length):-1}function T(ue,ee,V){var de=w.exec(ee.slice(V));return de?(ue.m=E.get(de[0].toLowerCase()),V+de[0].length):-1}function Y(ue,ee,V){var de=_.exec(ee.slice(V));return de?(ue.m=C.get(de[0].toLowerCase()),V+de[0].length):-1}function J(ue,ee,V){return D(ue,r,ee,V)}function P(ue,ee,V){return D(ue,n,ee,V)}function q(ue,ee,V){return D(ue,a,ee,V)}function U(ue){return u[ue.getDay()]}function I(ue){return o[ue.getDay()]}function te(ue){return m[ue.getMonth()]}function L(ue){return d[ue.getMonth()]}function Z(ue){return l[+(ue.getHours()>=12)]}function W(ue){return 1+~~(ue.getMonth()/3)}function ce(ue){return u[ue.getUTCDay()]}function xe(ue){return o[ue.getUTCDay()]}function he(ue){return m[ue.getUTCMonth()]}function F(ue){return d[ue.getUTCMonth()]}function ve(ue){return l[+(ue.getUTCHours()>=12)]}function Pe(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var ee=k(ue+="",S);return ee.toString=function(){return ue},ee},parse:function(ue){var ee=M(ue+="",!1);return ee.toString=function(){return ue},ee},utcFormat:function(ue){var ee=k(ue+="",A);return ee.toString=function(){return ue},ee},utcParse:function(ue){var ee=M(ue+="",!0);return ee.toString=function(){return ue},ee}}}var t2={"-":"",_:" ",0:"0"},br=/^\s*\d+/,DB=/^%/,PB=/[\\^$*+?|[\]().{}]/g;function ut(e,r,n){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<n?new Array(n-o+1).join(r)+l:l)}function MB(e){return e.replace(PB,"\\$&")}function zc(e){return new RegExp("^(?:"+e.map(MB).join("|")+")","i")}function kc(e){return new Map(e.map((r,n)=>[r.toLowerCase(),n]))}function TB(e,r,n){var a=br.exec(r.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function qB(e,r,n){var a=br.exec(r.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function RB(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function IB(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function LB(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function r2(e,r,n){var a=br.exec(r.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function n2(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function $B(e,r,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function BB(e,r,n){var a=br.exec(r.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function UB(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function a2(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function FB(e,r,n){var a=br.exec(r.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function i2(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function GB(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function HB(e,r,n){var a=br.exec(r.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function VB(e,r,n){var a=br.exec(r.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function QB(e,r,n){var a=br.exec(r.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function YB(e,r,n){var a=DB.exec(r.slice(n,n+1));return a?n+a[0].length:-1}function KB(e,r,n){var a=br.exec(r.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function WB(e,r,n){var a=br.exec(r.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function s2(e,r){return ut(e.getDate(),r,2)}function XB(e,r){return ut(e.getHours(),r,2)}function ZB(e,r){return ut(e.getHours()%12||12,r,2)}function JB(e,r){return ut(1+yu.count(ni(e),e),r,3)}function cO(e,r){return ut(e.getMilliseconds(),r,3)}function e9(e,r){return cO(e,r)+"000"}function t9(e,r){return ut(e.getMonth()+1,r,2)}function r9(e,r){return ut(e.getMinutes(),r,2)}function n9(e,r){return ut(e.getSeconds(),r,2)}function a9(e){var r=e.getDay();return r===0?7:r}function i9(e,r){return ut(rp.count(ni(e)-1,e),r,2)}function uO(e){var r=e.getDay();return r>=4||r===0?bo(e):bo.ceil(e)}function s9(e,r){return e=uO(e),ut(bo.count(ni(e),e)+(ni(e).getDay()===4),r,2)}function l9(e){return e.getDay()}function o9(e,r){return ut(rf.count(ni(e)-1,e),r,2)}function c9(e,r){return ut(e.getFullYear()%100,r,2)}function u9(e,r){return e=uO(e),ut(e.getFullYear()%100,r,2)}function d9(e,r){return ut(e.getFullYear()%1e4,r,4)}function m9(e,r){var n=e.getDay();return e=n>=4||n===0?bo(e):bo.ceil(e),ut(e.getFullYear()%1e4,r,4)}function f9(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+ut(r/60|0,"0",2)+ut(r%60,"0",2)}function l2(e,r){return ut(e.getUTCDate(),r,2)}function p9(e,r){return ut(e.getUTCHours(),r,2)}function h9(e,r){return ut(e.getUTCHours()%12||12,r,2)}function v9(e,r){return ut(1+tp.count(ai(e),e),r,3)}function dO(e,r){return ut(e.getUTCMilliseconds(),r,3)}function g9(e,r){return dO(e,r)+"000"}function x9(e,r){return ut(e.getUTCMonth()+1,r,2)}function b9(e,r){return ut(e.getUTCMinutes(),r,2)}function y9(e,r){return ut(e.getUTCSeconds(),r,2)}function j9(e){var r=e.getUTCDay();return r===0?7:r}function _9(e,r){return ut(np.count(ai(e)-1,e),r,2)}function mO(e){var r=e.getUTCDay();return r>=4||r===0?yo(e):yo.ceil(e)}function N9(e,r){return e=mO(e),ut(yo.count(ai(e),e)+(ai(e).getUTCDay()===4),r,2)}function S9(e){return e.getUTCDay()}function w9(e,r){return ut(nf.count(ai(e)-1,e),r,2)}function C9(e,r){return ut(e.getUTCFullYear()%100,r,2)}function E9(e,r){return e=mO(e),ut(e.getUTCFullYear()%100,r,2)}function A9(e,r){return ut(e.getUTCFullYear()%1e4,r,4)}function z9(e,r){var n=e.getUTCDay();return e=n>=4||n===0?yo(e):yo.ceil(e),ut(e.getUTCFullYear()%1e4,r,4)}function k9(){return"+0000"}function o2(){return"%"}function c2(e){return+e}function u2(e){return Math.floor(+e/1e3)}var Jl,fO,pO;O9({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function O9(e){return Jl=OB(e),fO=Jl.format,Jl.parse,pO=Jl.utcFormat,Jl.utcParse,Jl}function D9(e){return new Date(e)}function P9(e){return e instanceof Date?+e:+new Date(+e)}function Ly(e,r,n,a,l,o,u,d,m,p){var h=wy(),v=h.invert,b=h.domain,x=p(".%L"),j=p(":%S"),_=p("%I:%M"),C=p("%I %p"),w=p("%a %d"),E=p("%b %d"),S=p("%B"),A=p("%Y");function z(k){return(m(k)<k?x:d(k)<k?j:u(k)<k?_:o(k)<k?C:a(k)<k?l(k)<k?w:E:n(k)<k?S:A)(k)}return h.invert=function(k){return new Date(v(k))},h.domain=function(k){return arguments.length?b(Array.from(k,P9)):b().map(D9)},h.ticks=function(k){var M=b();return e(M[0],M[M.length-1],k??10)},h.tickFormat=function(k,M){return M==null?z:p(M)},h.nice=function(k){var M=b();return(!k||typeof k.range!="function")&&(k=r(M[0],M[M.length-1],k??10)),k?b(eO(M,k)):h},h.copy=function(){return bu(h,Ly(e,r,n,a,l,o,u,d,m,p))},h}function M9(){return Fn.apply(Ly(zB,kB,ni,Ry,rp,yu,Ty,Py,Rs,fO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function T9(){return Fn.apply(Ly(EB,AB,ai,Iy,np,tp,qy,My,Rs,pO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ap(){var e=0,r=1,n,a,l,o,u=Br,d=!1,m;function p(v){return v==null||isNaN(v=+v)?m:u(l===0?.5:(v=(o(v)-n)*l,d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,r]=v,n=o(e=+e),a=o(r=+r),l=n===a?0:1/(a-n),p):[e,r]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function h(v){return function(b){var x,j;return arguments.length?([x,j]=b,u=v(x,j),p):[u(0),u(1)]}}return p.range=h(_o),p.rangeRound=h(Sy),p.unknown=function(v){return arguments.length?(m=v,p):m},function(v){return o=v,n=v(e),a=v(r),l=n===a?0:1/(a-n),p}}function os(e,r){return r.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hO(){var e=ls(ap()(Br));return e.copy=function(){return os(e,hO())},mi.apply(e,arguments)}function vO(){var e=Ay(ap()).domain([1,10]);return e.copy=function(){return os(e,vO()).base(e.base())},mi.apply(e,arguments)}function gO(){var e=zy(ap());return e.copy=function(){return os(e,gO()).constant(e.constant())},mi.apply(e,arguments)}function $y(){var e=ky(ap());return e.copy=function(){return os(e,$y()).exponent(e.exponent())},mi.apply(e,arguments)}function q9(){return $y.apply(null,arguments).exponent(.5)}function xO(){var e=[],r=Br;function n(a){if(a!=null&&!isNaN(a=+a))return r((gu(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Xi),n},n.interpolator=function(a){return arguments.length?(r=a,n):r},n.range=function(){return e.map((a,l)=>r(l/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(l,o)=>j7(e,o/a))},n.copy=function(){return xO(r).domain(e)},mi.apply(n,arguments)}function ip(){var e=0,r=.5,n=1,a=1,l,o,u,d,m,p=Br,h,v=!1,b;function x(_){return isNaN(_=+_)?b:(_=.5+((_=+h(_))-o)*(a*_<a*o?d:m),p(v?Math.max(0,Math.min(1,_)):_))}x.domain=function(_){return arguments.length?([e,r,n]=_,l=h(e=+e),o=h(r=+r),u=h(n=+n),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,x):[e,r,n]},x.clamp=function(_){return arguments.length?(v=!!_,x):v},x.interpolator=function(_){return arguments.length?(p=_,x):p};function j(_){return function(C){var w,E,S;return arguments.length?([w,E,S]=C,p=Y7(_,[w,E,S]),x):[p(0),p(.5),p(1)]}}return x.range=j(_o),x.rangeRound=j(Sy),x.unknown=function(_){return arguments.length?(b=_,x):b},function(_){return h=_,l=_(e),o=_(r),u=_(n),d=l===o?0:.5/(o-l),m=o===u?0:.5/(u-o),a=o<l?-1:1,x}}function bO(){var e=ls(ip()(Br));return e.copy=function(){return os(e,bO())},mi.apply(e,arguments)}function yO(){var e=Ay(ip()).domain([.1,1,10]);return e.copy=function(){return os(e,yO()).base(e.base())},mi.apply(e,arguments)}function jO(){var e=zy(ip());return e.copy=function(){return os(e,jO()).constant(e.constant())},mi.apply(e,arguments)}function By(){var e=ky(ip());return e.copy=function(){return os(e,By()).exponent(e.exponent())},mi.apply(e,arguments)}function R9(){return By.apply(null,arguments).exponent(.5)}const Rc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jy,scaleDiverging:bO,scaleDivergingLog:yO,scaleDivergingPow:By,scaleDivergingSqrt:R9,scaleDivergingSymlog:jO,scaleIdentity:Jk,scaleImplicit:vb,scaleLinear:Zk,scaleLog:tO,scaleOrdinal:yy,scalePoint:S7,scalePow:Oy,scaleQuantile:aO,scaleQuantize:iO,scaleRadial:nO,scaleSequential:hO,scaleSequentialLog:vO,scaleSequentialPow:$y,scaleSequentialQuantile:xO,scaleSequentialSqrt:q9,scaleSequentialSymlog:gO,scaleSqrt:gB,scaleSymlog:rO,scaleThreshold:sO,scaleTime:M9,scaleUtc:T9,tickFormat:Xk},Symbol.toStringTag,{value:"Module"}));var fi=e=>e.chartData,_O=me([fi],e=>{var r=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:r,dataStartIndex:0}}),Uy=(e,r,n,a)=>a?_O(e):fi(e),I9=(e,r,n)=>n?_O(e):fi(e);function ii(e){if(Array.isArray(e)&&e.length===2){var[r,n]=e;if(st(r)&&st(n))return!0}return!1}function d2(e,r,n){return n?e:[Math.min(e[0],r[0]),Math.max(e[1],r[1])]}function NO(e,r){if(r&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,l,o;if(st(n))l=n;else if(typeof n=="function")return;if(st(a))o=a;else if(typeof a=="function")return;var u=[l,o];if(ii(u))return u}}function L9(e,r,n){if(!(!n&&r==null)){if(typeof e=="function"&&r!=null)try{var a=e(r,n);if(ii(a))return d2(a,r,n)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,u,d;if(l==="auto")r!=null&&(u=Math.min(...r));else if(De(l))u=l;else if(typeof l=="function")try{r!=null&&(u=l(r?.[0]))}catch{}else if(typeof l=="string"&&_w.test(l)){var m=_w.exec(l);if(m==null||m[1]==null||r==null)u=void 0;else{var p=+m[1];u=r[0]-p}}else u=r?.[0];if(o==="auto")r!=null&&(d=Math.max(...r));else if(De(o))d=o;else if(typeof o=="function")try{r!=null&&(d=o(r?.[1]))}catch{}else if(typeof o=="string"&&Nw.test(o)){var h=Nw.exec(o);if(h==null||h[1]==null||r==null)d=void 0;else{var v=+h[1];d=r[1]+v}}else d=r?.[1];var b=[u,d];if(ii(b))return r==null?b:d2(b,r,n)}}}var No=1e9,$9={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Gy,Tt=!0,$n="[DecimalError] ",Hs=$n+"Invalid argument: ",Fy=$n+"Exponent out of range: ",So=Math.floor,Ms=Math.pow,B9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hn,pr=1e7,Ot=7,SO=9007199254740991,af=So(SO/Ot),ze={};ze.absoluteValue=ze.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ze.comparedTo=ze.cmp=function(e){var r,n,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,r=0,n=a<l?a:l;r<n;++r)if(o.d[r]!==e.d[r])return o.d[r]>e.d[r]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};ze.decimalPlaces=ze.dp=function(){var e=this,r=e.d.length-1,n=(r-e.e)*Ot;if(r=e.d[r],r)for(;r%10==0;r/=10)n--;return n<0?0:n};ze.dividedBy=ze.div=function(e){return Ja(this,new this.constructor(e))};ze.dividedToIntegerBy=ze.idiv=function(e){var r=this,n=r.constructor;return wt(Ja(r,new n(e),0,1),n.precision)};ze.equals=ze.eq=function(e){return!this.cmp(e)};ze.exponent=function(){return tr(this)};ze.greaterThan=ze.gt=function(e){return this.cmp(e)>0};ze.greaterThanOrEqualTo=ze.gte=function(e){return this.cmp(e)>=0};ze.isInteger=ze.isint=function(){return this.e>this.d.length-2};ze.isNegative=ze.isneg=function(){return this.s<0};ze.isPositive=ze.ispos=function(){return this.s>0};ze.isZero=function(){return this.s===0};ze.lessThan=ze.lt=function(e){return this.cmp(e)<0};ze.lessThanOrEqualTo=ze.lte=function(e){return this.cmp(e)<1};ze.logarithm=ze.log=function(e){var r,n=this,a=n.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(hn))throw Error($n+"NaN");if(n.s<1)throw Error($n+(n.s?"NaN":"-Infinity"));return n.eq(hn)?new a(0):(Tt=!1,r=Ja(ru(n,o),ru(e,o),o),Tt=!0,wt(r,l))};ze.minus=ze.sub=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?EO(r,e):wO(r,(e.s=-e.s,e))};ze.modulo=ze.mod=function(e){var r,n=this,a=n.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error($n+"NaN");return n.s?(Tt=!1,r=Ja(n,e,0,1).times(e),Tt=!0,n.minus(r)):wt(new a(n),l)};ze.naturalExponential=ze.exp=function(){return CO(this)};ze.naturalLogarithm=ze.ln=function(){return ru(this)};ze.negated=ze.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ze.plus=ze.add=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?wO(r,e):EO(r,(e.s=-e.s,e))};ze.precision=ze.sd=function(e){var r,n,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Hs+e);if(r=tr(l)+1,a=l.d.length-1,n=a*Ot+1,a=l.d[a],a){for(;a%10==0;a/=10)n--;for(a=l.d[0];a>=10;a/=10)n++}return e&&r>n?r:n};ze.squareRoot=ze.sqrt=function(){var e,r,n,a,l,o,u,d=this,m=d.constructor;if(d.s<1){if(!d.s)return new m(0);throw Error($n+"NaN")}for(e=tr(d),Tt=!1,l=Math.sqrt(+d),l==0||l==1/0?(r=xa(d.d),(r.length+e)%2==0&&(r+="0"),l=Math.sqrt(r),e=So((e+1)/2)-(e<0||e%2),l==1/0?r="5e"+e:(r=l.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),a=new m(r)):a=new m(l.toString()),n=m.precision,l=u=n+3;;)if(o=a,a=o.plus(Ja(d,o,u+2)).times(.5),xa(o.d).slice(0,u)===(r=xa(a.d)).slice(0,u)){if(r=r.slice(u-3,u+1),l==u&&r=="4999"){if(wt(o,n+1,0),o.times(o).eq(d)){a=o;break}}else if(r!="9999")break;u+=4}return Tt=!0,wt(a,n)};ze.times=ze.mul=function(e){var r,n,a,l,o,u,d,m,p,h=this,v=h.constructor,b=h.d,x=(e=new v(e)).d;if(!h.s||!e.s)return new v(0);for(e.s*=h.s,n=h.e+e.e,m=b.length,p=x.length,m<p&&(o=b,b=x,x=o,u=m,m=p,p=u),o=[],u=m+p,a=u;a--;)o.push(0);for(a=p;--a>=0;){for(r=0,l=m+a;l>a;)d=o[l]+x[a]*b[l-a-1]+r,o[l--]=d%pr|0,r=d/pr|0;o[l]=(o[l]+r)%pr|0}for(;!o[--u];)o.pop();return r?++n:o.shift(),e.d=o,e.e=n,Tt?wt(e,v.precision):e};ze.toDecimalPlaces=ze.todp=function(e,r){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(wa(e,0,No),r===void 0?r=a.rounding:wa(r,0,8),wt(n,e+tr(n)+1,r))};ze.toExponential=function(e,r){var n,a=this,l=a.constructor;return e===void 0?n=Xs(a,!0):(wa(e,0,No),r===void 0?r=l.rounding:wa(r,0,8),a=wt(new l(a),e+1,r),n=Xs(a,!0,e+1)),n};ze.toFixed=function(e,r){var n,a,l=this,o=l.constructor;return e===void 0?Xs(l):(wa(e,0,No),r===void 0?r=o.rounding:wa(r,0,8),a=wt(new o(l),e+tr(l)+1,r),n=Xs(a.abs(),!1,e+tr(a)+1),l.isneg()&&!l.isZero()?"-"+n:n)};ze.toInteger=ze.toint=function(){var e=this,r=e.constructor;return wt(new r(e),tr(e)+1,r.rounding)};ze.toNumber=function(){return+this};ze.toPower=ze.pow=function(e){var r,n,a,l,o,u,d=this,m=d.constructor,p=12,h=+(e=new m(e));if(!e.s)return new m(hn);if(d=new m(d),!d.s){if(e.s<1)throw Error($n+"Infinity");return d}if(d.eq(hn))return d;if(a=m.precision,e.eq(hn))return wt(d,a);if(r=e.e,n=e.d.length-1,u=r>=n,o=d.s,u){if((n=h<0?-h:h)<=SO){for(l=new m(hn),r=Math.ceil(a/Ot+4),Tt=!1;n%2&&(l=l.times(d),f2(l.d,r)),n=So(n/2),n!==0;)d=d.times(d),f2(d.d,r);return Tt=!0,e.s<0?new m(hn).div(l):wt(l,a)}}else if(o<0)throw Error($n+"NaN");return o=o<0&&e.d[Math.max(r,n)]&1?-1:1,d.s=1,Tt=!1,l=e.times(ru(d,a+p)),Tt=!0,l=CO(l),l.s=o,l};ze.toPrecision=function(e,r){var n,a,l=this,o=l.constructor;return e===void 0?(n=tr(l),a=Xs(l,n<=o.toExpNeg||n>=o.toExpPos)):(wa(e,1,No),r===void 0?r=o.rounding:wa(r,0,8),l=wt(new o(l),e,r),n=tr(l),a=Xs(l,e<=n||n<=o.toExpNeg,e)),a};ze.toSignificantDigits=ze.tosd=function(e,r){var n=this,a=n.constructor;return e===void 0?(e=a.precision,r=a.rounding):(wa(e,1,No),r===void 0?r=a.rounding:wa(r,0,8)),wt(new a(n),e,r)};ze.toString=ze.valueOf=ze.val=ze.toJSON=ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,r=tr(e),n=e.constructor;return Xs(e,r<=n.toExpNeg||r>=n.toExpPos)};function wO(e,r){var n,a,l,o,u,d,m,p,h=e.constructor,v=h.precision;if(!e.s||!r.s)return r.s||(r=new h(e)),Tt?wt(r,v):r;if(m=e.d,p=r.d,u=e.e,l=r.e,m=m.slice(),o=u-l,o){for(o<0?(a=m,o=-o,d=p.length):(a=p,l=u,d=m.length),u=Math.ceil(v/Ot),d=u>d?u+1:d+1,o>d&&(o=d,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(d=m.length,o=p.length,d-o<0&&(o=d,a=p,p=m,m=a),n=0;o;)n=(m[--o]=m[o]+p[o]+n)/pr|0,m[o]%=pr;for(n&&(m.unshift(n),++l),d=m.length;m[--d]==0;)m.pop();return r.d=m,r.e=l,Tt?wt(r,v):r}function wa(e,r,n){if(e!==~~e||e<r||e>n)throw Error(Hs+e)}function xa(e){var r,n,a,l=e.length-1,o="",u=e[0];if(l>0){for(o+=u,r=1;r<l;r++)a=e[r]+"",n=Ot-a.length,n&&(o+=Hi(n)),o+=a;u=e[r],a=u+"",n=Ot-a.length,n&&(o+=Hi(n))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}var Ja=(function(){function e(a,l){var o,u=0,d=a.length;for(a=a.slice();d--;)o=a[d]*l+u,a[d]=o%pr|0,u=o/pr|0;return u&&a.unshift(u),a}function r(a,l,o,u){var d,m;if(o!=u)m=o>u?1:-1;else for(d=m=0;d<o;d++)if(a[d]!=l[d]){m=a[d]>l[d]?1:-1;break}return m}function n(a,l,o){for(var u=0;o--;)a[o]-=u,u=a[o]<l[o]?1:0,a[o]=u*pr+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,u){var d,m,p,h,v,b,x,j,_,C,w,E,S,A,z,k,M,D,$=a.constructor,B=a.s==l.s?1:-1,H=a.d,T=l.d;if(!a.s)return new $(a);if(!l.s)throw Error($n+"Division by zero");for(m=a.e-l.e,M=T.length,z=H.length,x=new $(B),j=x.d=[],p=0;T[p]==(H[p]||0);)++p;if(T[p]>(H[p]||0)&&--m,o==null?E=o=$.precision:u?E=o+(tr(a)-tr(l))+1:E=o,E<0)return new $(0);if(E=E/Ot+2|0,p=0,M==1)for(h=0,T=T[0],E++;(p<z||h)&&E--;p++)S=h*pr+(H[p]||0),j[p]=S/T|0,h=S%T|0;else{for(h=pr/(T[0]+1)|0,h>1&&(T=e(T,h),H=e(H,h),M=T.length,z=H.length),A=M,_=H.slice(0,M),C=_.length;C<M;)_[C++]=0;D=T.slice(),D.unshift(0),k=T[0],T[1]>=pr/2&&++k;do h=0,d=r(T,_,M,C),d<0?(w=_[0],M!=C&&(w=w*pr+(_[1]||0)),h=w/k|0,h>1?(h>=pr&&(h=pr-1),v=e(T,h),b=v.length,C=_.length,d=r(v,_,b,C),d==1&&(h--,n(v,M<b?D:T,b))):(h==0&&(d=h=1),v=T.slice()),b=v.length,b<C&&v.unshift(0),n(_,v,C),d==-1&&(C=_.length,d=r(T,_,M,C),d<1&&(h++,n(_,M<C?D:T,C))),C=_.length):d===0&&(h++,_=[0]),j[p++]=h,d&&_[0]?_[C++]=H[A]||0:(_=[H[A]],C=1);while((A++<z||_[0]!==void 0)&&E--)}return j[0]||j.shift(),x.e=m,wt(x,u?o+tr(x)+1:o)}})();function CO(e,r){var n,a,l,o,u,d,m=0,p=0,h=e.constructor,v=h.precision;if(tr(e)>16)throw Error(Fy+tr(e));if(!e.s)return new h(hn);for(Tt=!1,d=v,u=new h(.03125);e.abs().gte(.1);)e=e.times(u),p+=5;for(a=Math.log(Ms(2,p))/Math.LN10*2+5|0,d+=a,n=l=o=new h(hn),h.precision=d;;){if(l=wt(l.times(e),d),n=n.times(++m),u=o.plus(Ja(l,n,d)),xa(u.d).slice(0,d)===xa(o.d).slice(0,d)){for(;p--;)o=wt(o.times(o),d);return h.precision=v,r==null?(Tt=!0,wt(o,v)):o}o=u}}function tr(e){for(var r=e.e*Ot,n=e.d[0];n>=10;n/=10)r++;return r}function mx(e,r,n){if(r>e.LN10.sd())throw Tt=!0,n&&(e.precision=n),Error($n+"LN10 precision limit exceeded");return wt(new e(e.LN10),r)}function Hi(e){for(var r="";e--;)r+="0";return r}function ru(e,r){var n,a,l,o,u,d,m,p,h,v=1,b=10,x=e,j=x.d,_=x.constructor,C=_.precision;if(x.s<1)throw Error($n+(x.s?"NaN":"-Infinity"));if(x.eq(hn))return new _(0);if(r==null?(Tt=!1,p=C):p=r,x.eq(10))return r==null&&(Tt=!0),mx(_,p);if(p+=b,_.precision=p,n=xa(j),a=n.charAt(0),o=tr(x),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(e),n=xa(x.d),a=n.charAt(0),v++;o=tr(x),a>1?(x=new _("0."+n),o++):x=new _(a+"."+n.slice(1))}else return m=mx(_,p+2,C).times(o+""),x=ru(new _(a+"."+n.slice(1)),p-b).plus(m),_.precision=C,r==null?(Tt=!0,wt(x,C)):x;for(d=u=x=Ja(x.minus(hn),x.plus(hn),p),h=wt(x.times(x),p),l=3;;){if(u=wt(u.times(h),p),m=d.plus(Ja(u,new _(l),p)),xa(m.d).slice(0,p)===xa(d.d).slice(0,p))return d=d.times(2),o!==0&&(d=d.plus(mx(_,p+2,C).times(o+""))),d=Ja(d,new _(v),p),_.precision=C,r==null?(Tt=!0,wt(d,C)):d;d=m,l+=2}}function m2(e,r){var n,a,l;for((n=r.indexOf("."))>-1&&(r=r.replace(".","")),(a=r.search(/e/i))>0?(n<0&&(n=a),n+=+r.slice(a+1),r=r.substring(0,a)):n<0&&(n=r.length),a=0;r.charCodeAt(a)===48;)++a;for(l=r.length;r.charCodeAt(l-1)===48;)--l;if(r=r.slice(a,l),r){if(l-=a,n=n-a-1,e.e=So(n/Ot),e.d=[],a=(n+1)%Ot,n<0&&(a+=Ot),a<l){for(a&&e.d.push(+r.slice(0,a)),l-=Ot;a<l;)e.d.push(+r.slice(a,a+=Ot));r=r.slice(a),a=Ot-r.length}else a-=l;for(;a--;)r+="0";if(e.d.push(+r),Tt&&(e.e>af||e.e<-af))throw Error(Fy+n)}else e.s=0,e.e=0,e.d=[0];return e}function wt(e,r,n){var a,l,o,u,d,m,p,h,v=e.d;for(u=1,o=v[0];o>=10;o/=10)u++;if(a=r-u,a<0)a+=Ot,l=r,p=v[h=0];else{if(h=Math.ceil((a+1)/Ot),o=v.length,h>=o)return e;for(p=o=v[h],u=1;o>=10;o/=10)u++;a%=Ot,l=a-Ot+u}if(n!==void 0&&(o=Ms(10,u-l-1),d=p/o%10|0,m=r<0||v[h+1]!==void 0||p%o,m=n<4?(d||m)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||m||n==6&&(a>0?l>0?p/Ms(10,u-l):0:v[h-1])%10&1||n==(e.s<0?8:7))),r<1||!v[0])return m?(o=tr(e),v.length=1,r=r-o-1,v[0]=Ms(10,(Ot-r%Ot)%Ot),e.e=So(-r/Ot)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(a==0?(v.length=h,o=1,h--):(v.length=h+1,o=Ms(10,Ot-a),v[h]=l>0?(p/Ms(10,u-l)%Ms(10,l)|0)*o:0),m)for(;;)if(h==0){(v[0]+=o)==pr&&(v[0]=1,++e.e);break}else{if(v[h]+=o,v[h]!=pr)break;v[h--]=0,o=1}for(a=v.length;v[--a]===0;)v.pop();if(Tt&&(e.e>af||e.e<-af))throw Error(Fy+tr(e));return e}function EO(e,r){var n,a,l,o,u,d,m,p,h,v,b=e.constructor,x=b.precision;if(!e.s||!r.s)return r.s?r.s=-r.s:r=new b(e),Tt?wt(r,x):r;if(m=e.d,v=r.d,a=r.e,p=e.e,m=m.slice(),u=p-a,u){for(h=u<0,h?(n=m,u=-u,d=v.length):(n=v,a=p,d=m.length),l=Math.max(Math.ceil(x/Ot),d)+2,u>l&&(u=l,n.length=1),n.reverse(),l=u;l--;)n.push(0);n.reverse()}else{for(l=m.length,d=v.length,h=l<d,h&&(d=l),l=0;l<d;l++)if(m[l]!=v[l]){h=m[l]<v[l];break}u=0}for(h&&(n=m,m=v,v=n,r.s=-r.s),d=m.length,l=v.length-d;l>0;--l)m[d++]=0;for(l=v.length;l>u;){if(m[--l]<v[l]){for(o=l;o&&m[--o]===0;)m[o]=pr-1;--m[o],m[l]+=pr}m[l]-=v[l]}for(;m[--d]===0;)m.pop();for(;m[0]===0;m.shift())--a;return m[0]?(r.d=m,r.e=a,Tt?wt(r,x):r):new b(0)}function Xs(e,r,n){var a,l=tr(e),o=xa(e.d),u=o.length;return r?(n&&(a=n-u)>0?o=o.charAt(0)+"."+o.slice(1)+Hi(a):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+Hi(-l-1)+o,n&&(a=n-u)>0&&(o+=Hi(a))):l>=u?(o+=Hi(l+1-u),n&&(a=n-l-1)>0&&(o=o+"."+Hi(a))):((a=l+1)<u&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-u)>0&&(l+1===u&&(o+="."),o+=Hi(a))),e.s<0?"-"+o:o}function f2(e,r){if(e.length>r)return e.length=r,!0}function AO(e){var r,n,a;function l(o){var u=this;if(!(u instanceof l))return new l(o);if(u.constructor=l,o instanceof l){u.s=o.s,u.e=o.e,u.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Hs+o);if(o>0)u.s=1;else if(o<0)o=-o,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(o===~~o&&o<1e7){u.e=0,u.d=[o];return}return m2(u,o.toString())}else if(typeof o!="string")throw Error(Hs+o);if(o.charCodeAt(0)===45?(o=o.slice(1),u.s=-1):u.s=1,B9.test(o))m2(u,o);else throw Error(Hs+o)}if(l.prototype=ze,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=AO,l.config=l.set=U9,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)e.hasOwnProperty(n=a[r++])||(e[n]=this[n]);return l.config(e),l}function U9(e){if(!e||typeof e!="object")throw Error($n+"Object expected");var r,n,a,l=["precision",1,No,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<l.length;r+=3)if((a=e[n=l[r]])!==void 0)if(So(a)===a&&a>=l[r+1]&&a<=l[r+2])this[n]=a;else throw Error(Hs+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(Hs+n+": "+a);return this}var Gy=AO($9);hn=new Gy(1);const vt=Gy;function zO(e){var r;return e===0?r=1:r=Math.floor(new vt(e).abs().log(10).toNumber())+1,r}function kO(e,r,n){for(var a=new vt(e),l=0,o=[];a.lt(r)&&l<1e5;)o.push(a.toNumber()),a=a.add(n),l++;return o}var OO=e=>{var[r,n]=e,[a,l]=[r,n];return r>n&&([a,l]=[n,r]),[a,l]},DO=(e,r,n)=>{if(e.lte(0))return new vt(0);var a=zO(e.toNumber()),l=new vt(10).pow(a),o=e.div(l),u=a!==1?.05:.1,d=new vt(Math.ceil(o.div(u).toNumber())).add(n).mul(u),m=d.mul(l);return r?new vt(m.toNumber()):new vt(Math.ceil(m.toNumber()))},F9=(e,r,n)=>{var a=new vt(1),l=new vt(e);if(!l.isint()&&n){var o=Math.abs(e);o<1?(a=new vt(10).pow(zO(e)-1),l=new vt(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new vt(Math.floor(e)))}else e===0?l=new vt(Math.floor((r-1)/2)):n||(l=new vt(Math.floor(e)));for(var u=Math.floor((r-1)/2),d=[],m=0;m<r;m++)d.push(l.add(new vt(m-u).mul(a)).toNumber());return d},PO=function(r,n,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-r)/(a-1)))return{step:new vt(0),tickMin:new vt(0),tickMax:new vt(0)};var u=DO(new vt(n).sub(r).div(a-1),l,o),d;r<=0&&n>=0?d=new vt(0):(d=new vt(r).add(n).div(2),d=d.sub(new vt(d).mod(u)));var m=Math.ceil(d.sub(r).div(u).toNumber()),p=Math.ceil(new vt(n).sub(d).div(u).toNumber()),h=m+p+1;return h>a?PO(r,n,a,l,o+1):(h<a&&(p=n>0?p+(a-h):p,m=n>0?m:m+(a-h)),{step:u,tickMin:d.sub(new vt(m).mul(u)),tickMax:d.add(new vt(p).mul(u))})},G9=function(r){var[n,a]=r,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[d,m]=OO([n,a]);if(d===-1/0||m===1/0){var p=m===1/0?[d,...Array(l-1).fill(1/0)]:[...Array(l-1).fill(-1/0),m];return n>a?p.reverse():p}if(d===m)return F9(d,l,o);var{step:h,tickMin:v,tickMax:b}=PO(d,m,u,o,0),x=kO(v,b.add(new vt(.1).mul(h)),h);return n>a?x.reverse():x},H9=function(r,n){var[a,l]=r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,d]=OO([a,l]);if(u===-1/0||d===1/0)return[a,l];if(u===d)return[u];var m=Math.max(n,2),p=DO(new vt(d).sub(u).div(m-1),o,0),h=[...kO(new vt(u),new vt(d),p),d];return o===!1&&(h=h.map(v=>Math.round(v))),a>l?h.reverse():h},MO=e=>e.rootProps.maxBarSize,V9=e=>e.rootProps.barGap,TO=e=>e.rootProps.barCategoryGap,Q9=e=>e.rootProps.barSize,sp=e=>e.rootProps.stackOffset,qO=e=>e.rootProps.reverseStackOrder,Hy=e=>e.options.chartName,Vy=e=>e.rootProps.syncId,RO=e=>e.rootProps.syncMethod,Qy=e=>e.options.eventEmitter,gr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ks={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},fa={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},lp=(e,r)=>{if(!(!e||!r))return e!=null&&e.reversed?[r[1],r[0]]:r};function op(e,r,n){if(n!=="auto")return n;if(e!=null)return ci(e,r)?"category":"number"}function p2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function sf(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?p2(Object(n),!0).forEach(function(a){Y9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Y9(e,r,n){return(r=K9(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function K9(e){var r=W9(e,"string");return typeof r=="symbol"?r:r+""}function W9(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var h2={allowDataOverflow:ks.allowDataOverflow,allowDecimals:ks.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ks.angleAxisId,includeHidden:!1,name:void 0,reversed:ks.reversed,scale:ks.scale,tick:ks.tick,tickCount:void 0,ticks:void 0,type:ks.type,unit:void 0},v2={allowDataOverflow:fa.allowDataOverflow,allowDecimals:fa.allowDecimals,allowDuplicatedCategory:fa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fa.radiusAxisId,includeHidden:fa.includeHidden,name:void 0,reversed:fa.reversed,scale:fa.scale,tick:fa.tick,tickCount:fa.tickCount,ticks:void 0,type:fa.type,unit:void 0},X9=(e,r)=>{if(r!=null)return e.polarAxis.angleAxis[r]},Yy=me([X9,Sk],(e,r)=>{var n;if(e!=null)return e;var a=(n=op(r,"angleAxis",h2.type))!==null&&n!==void 0?n:"category";return sf(sf({},h2),{},{type:a})}),Z9=(e,r)=>e.polarAxis.radiusAxis[r],Ky=me([Z9,Sk],(e,r)=>{var n;if(e!=null)return e;var a=(n=op(r,"radiusAxis",v2.type))!==null&&n!==void 0?n:"category";return sf(sf({},v2),{},{type:a})}),cp=e=>e.polarOptions,Wy=me([ui,di,xr],K$),IO=me([cp,Wy],(e,r)=>{if(e!=null)return ta(e.innerRadius,r,0)}),LO=me([cp,Wy],(e,r)=>{if(e!=null)return ta(e.outerRadius,r,r*.8)}),J9=e=>{if(e==null)return[0,0];var{startAngle:r,endAngle:n}=e;return[r,n]},$O=me([cp],J9);me([Yy,$O],lp);var BO=me([Wy,IO,LO],(e,r,n)=>{if(!(e==null||r==null||n==null))return[r,n]});me([Ky,BO],lp);var UO=me([xt,cp,IO,LO,ui,di],(e,r,n,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||r==null||n==null||a==null)){var{cx:u,cy:d,startAngle:m,endAngle:p}=r;return{cx:ta(u,l,l/2),cy:ta(d,o,o/2),innerRadius:n,outerRadius:a,startAngle:m,endAngle:p,clockWise:!1}}}),yr=(e,r)=>r,up=(e,r,n)=>n;function Xy(e){return e?.id}function FO(e,r,n){var{chartData:a=[]}=r,{allowDuplicatedCategory:l,dataKey:o}=n,u=new Map;return e.forEach(d=>{var m,p=(m=d.data)!==null&&m!==void 0?m:a;if(!(p==null||p.length===0)){var h=Xy(d);p.forEach((v,b)=>{var x=o==null||l?b:String(er(v,o,null)),j=er(v,d.dataKey,0),_;u.has(x)?_=u.get(x):_={},Object.assign(_,{[h]:j}),u.set(x,_)})}}),Array.from(u.values())}function dp(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var mp=(e,r)=>e===r?!0:e==null||r==null?!1:e[0]===r[0]&&e[1]===r[1];function fp(e,r){return Array.isArray(e)&&Array.isArray(r)&&e.length===0&&r.length===0?!0:e===r}function eU(e,r){if(e.length===r.length){for(var n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}return!1}var jr=e=>{var r=xt(e);return r==="horizontal"?"xAxis":r==="vertical"?"yAxis":r==="centric"?"angleAxis":"radiusAxis"},wo=e=>e.tooltip.settings.axisId;function tU(e){if(e in Rc)return Rc[e]();var r="scale".concat(du(e));if(r in Rc)return Rc[r]()}function g2(e){var r=e.ticks,n=e.bandwidth,a=e.range(),l=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(o){function u(){return o.apply(this,arguments)}return u.toString=function(){return o.toString()},u})(()=>l),rangeMin:()=>l[0],rangeMax:()=>l[1],isInRange(o){var u=l[0],d=l[1];return u<=d?o>=u&&o<=d:o>=d&&o<=u},bandwidth:n?()=>n.call(e):void 0,ticks:r?o=>r.call(e,o):void 0,map:(o,u)=>{var d=e(o);if(d!=null){if(e.bandwidth&&u!==null&&u!==void 0&&u.position){var m=e.bandwidth();switch(u.position){case"middle":d+=m/2;break;case"end":d+=m;break}}return d}}}}function x2(e,r,n){if(typeof e=="function")return g2(e.copy().domain(r).range(n));if(e!=null){var a=tU(e);if(a!=null)return a.domain(r).range(n),g2(a)}}var rU=(e,r)=>{if(r!=null)switch(e){case"linear":{if(!ii(r)){for(var n,a,l=0;l<r.length;l++){var o=r[l];st(o)&&((n===void 0||o<n)&&(n=o),(a===void 0||o>a)&&(a=o))}return n!==void 0&&a!==void 0?[n,a]:void 0}return r}default:return r}};function b2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function lf(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?b2(Object(n),!0).forEach(function(a){nU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nU(e,r,n){return(r=aU(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function aU(e){var r=iU(e,"string");return typeof r=="symbol"?r:r+""}function iU(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var yb=[0,"auto"],dr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},GO=(e,r)=>e.cartesianAxis.xAxis[r],pi=(e,r)=>{var n=GO(e,r);return n??dr},mr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:yb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:pu},HO=(e,r)=>e.cartesianAxis.yAxis[r],hi=(e,r)=>{var n=HO(e,r);return n??mr},sU={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Zy=(e,r)=>{var n=e.cartesianAxis.zAxis[r];return n??sU},Vr=(e,r,n)=>{switch(r){case"xAxis":return pi(e,n);case"yAxis":return hi(e,n);case"zAxis":return Zy(e,n);case"angleAxis":return Yy(e,n);case"radiusAxis":return Ky(e,n);default:throw new Error("Unexpected axis type: ".concat(r))}},lU=(e,r,n)=>{switch(r){case"xAxis":return pi(e,n);case"yAxis":return hi(e,n);default:throw new Error("Unexpected axis type: ".concat(r))}},ju=(e,r,n)=>{switch(r){case"xAxis":return pi(e,n);case"yAxis":return hi(e,n);case"angleAxis":return Yy(e,n);case"radiusAxis":return Ky(e,n);default:throw new Error("Unexpected axis type: ".concat(r))}},VO=e=>e.graphicalItems.cartesianItems.some(r=>r.type==="bar")||e.graphicalItems.polarItems.some(r=>r.type==="radialBar");function QO(e,r){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===r;case"yAxis":return"yAxisId"in n&&n.yAxisId===r;case"zAxis":return"zAxisId"in n&&n.zAxisId===r;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===r;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===r;default:return!1}}}var pp=e=>e.graphicalItems.cartesianItems,oU=me([yr,up],QO),YO=(e,r,n)=>e.filter(n).filter(a=>r?.includeHidden===!0?!0:!a.hide),_u=me([pp,Vr,oU],YO,{memoizeOptions:{resultEqualityCheck:fp}}),KO=me([_u],e=>e.filter(r=>r.type==="area"||r.type==="bar").filter(dp)),WO=e=>e.filter(r=>!("stackId"in r)||r.stackId===void 0),cU=me([_u],WO),XO=e=>e.map(r=>r.data).filter(Boolean).flat(1),uU=me([_u],XO,{memoizeOptions:{resultEqualityCheck:fp}}),ZO=(e,r)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:l}=r;return e.length>0?e:n.slice(a,l+1)},Jy=me([uU,Uy],ZO),JO=(e,r,n)=>r?.dataKey!=null?e.map(a=>({value:er(a,r.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:er(l,a)}))):e.map(a=>({value:a})),hp=me([Jy,Vr,_u],JO);function eD(e,r){switch(e){case"xAxis":return r.direction==="x";case"yAxis":return r.direction==="y";default:return!1}}function pm(e){if(Na(e)||e instanceof Date){var r=Number(e);if(st(r))return r}}function y2(e){if(Array.isArray(e)){var r=[pm(e[0]),pm(e[1])];return ii(r)?r:void 0}var n=pm(e);if(n!=null)return[n,n]}function si(e){return e.map(pm).filter(rn)}function dU(e,r,n){return!n||typeof r!="number"||_a(r)?[]:n.length?si(n.flatMap(a=>{var l=er(e,a.dataKey),o,u;if(Array.isArray(l)?[o,u]=l:o=u=l,!(!st(o)||!st(u)))return[r-o,r+u]})):[]}var or=e=>{var r=jr(e),n=wo(e);return ju(e,r,n)},Nu=me([or],e=>e?.dataKey),mU=me([KO,Uy,or],FO),tD=(e,r,n,a)=>{var l={},o=r.reduce((u,d)=>{if(d.stackId==null)return u;var m=u[d.stackId];return m==null&&(m=[]),m.push(d),u[d.stackId]=m,u},l);return Object.fromEntries(Object.entries(o).map(u=>{var[d,m]=u,p=a?[...m].reverse():m,h=p.map(Xy);return[d,{stackedData:$L(e,h,n),graphicalItems:p}]}))},jb=me([mU,KO,sp,qO],tD),rD=(e,r,n,a)=>{var{dataStartIndex:l,dataEndIndex:o}=r;if(a==null&&n!=="zAxis"){var u=HL(e,l,o);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},fU=me([Vr],e=>e.allowDataOverflow),ej=e=>{var r;if(e==null||!("domain"in e))return yb;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=si(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(r=e?.domain)!==null&&r!==void 0?r:yb},nD=me([Vr],ej),aD=me([nD,fU],NO),pU=me([jb,fi,yr,aD],rD,{memoizeOptions:{resultEqualityCheck:mp}}),tj=e=>e.errorBars,hU=(e,r,n)=>e.flatMap(a=>r[a.id]).filter(Boolean).filter(a=>eD(n,a)),of=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var l=n.filter(Boolean);if(l.length!==0){var o=l.flat(),u=Math.min(...o),d=Math.max(...o);return[u,d]}},iD=(e,r,n,a,l)=>{var o,u;if(n.length>0&&e.forEach(d=>{n.forEach(m=>{var p,h,v=(p=a[m.id])===null||p===void 0?void 0:p.filter(w=>eD(l,w)),b=er(d,(h=r.dataKey)!==null&&h!==void 0?h:m.dataKey),x=dU(d,b,v);if(x.length>=2){var j=Math.min(...x),_=Math.max(...x);(o==null||j<o)&&(o=j),(u==null||_>u)&&(u=_)}var C=y2(b);C!=null&&(o=o==null?C[0]:Math.min(o,C[0]),u=u==null?C[1]:Math.max(u,C[1]))})}),r?.dataKey!=null&&e.forEach(d=>{var m=y2(er(d,r.dataKey));m!=null&&(o=o==null?m[0]:Math.min(o,m[0]),u=u==null?m[1]:Math.max(u,m[1]))}),st(o)&&st(u))return[o,u]},vU=me([Jy,Vr,cU,tj,yr],iD,{memoizeOptions:{resultEqualityCheck:mp}});function gU(e){var{value:r}=e;if(Na(r)||r instanceof Date)return r}var xU=(e,r,n)=>{var a=e.map(gU).filter(l=>l!=null);return n&&(r.dataKey==null||r.allowDuplicatedCategory&&jz(a))?Uk(0,e.length):r.allowDuplicatedCategory?a:Array.from(new Set(a))},sD=e=>e.referenceElements.dots,Co=(e,r,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>r==="xAxis"?a.xAxisId===n:a.yAxisId===n),bU=me([sD,yr,up],Co),lD=e=>e.referenceElements.areas,yU=me([lD,yr,up],Co),oD=e=>e.referenceElements.lines,jU=me([oD,yr,up],Co),cD=(e,r)=>{if(e!=null){var n=si(e.map(a=>r==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},_U=me(bU,yr,cD),uD=(e,r)=>{if(e!=null){var n=si(e.flatMap(a=>[r==="xAxis"?a.x1:a.y1,r==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},NU=me([yU,yr],uD);function SU(e){var r;if(e.x!=null)return si([e.x]);var n=(r=e.segment)===null||r===void 0?void 0:r.map(a=>a.x);return n==null||n.length===0?[]:si(n)}function wU(e){var r;if(e.y!=null)return si([e.y]);var n=(r=e.segment)===null||r===void 0?void 0:r.map(a=>a.y);return n==null||n.length===0?[]:si(n)}var dD=(e,r)=>{if(e!=null){var n=e.flatMap(a=>r==="xAxis"?SU(a):wU(a));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},CU=me([jU,yr],dD),EU=me(_U,CU,NU,(e,r,n)=>of(e,n,r)),mD=(e,r,n,a,l,o,u,d)=>{if(n!=null)return n;var m=u==="vertical"&&d==="xAxis"||u==="horizontal"&&d==="yAxis",p=m?of(a,o,l):of(o,l);return L9(r,p,e.allowDataOverflow)},AU=me([Vr,nD,aD,pU,vU,EU,xt,yr],mD,{memoizeOptions:{resultEqualityCheck:mp}}),zU=[0,1],fD=(e,r,n,a,l,o,u)=>{if(!((e==null||n==null||n.length===0)&&u===void 0)){var{dataKey:d,type:m}=e,p=ci(r,o);if(p&&d==null){var h;return Uk(0,(h=n?.length)!==null&&h!==void 0?h:0)}return m==="category"?xU(a,e,p):l==="expand"?zU:u}},rj=me([Vr,xt,Jy,hp,sp,yr,AU],fD);function kU(e){return e in Rc}var pD=(e,r,n)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(du(a));return kU(o)?o:"point"}}},Eo=me([Vr,VO,Hy],pD);function nj(e,r,n,a){if(!(n==null||a==null))return typeof e.scale=="function"?x2(e.scale,n,a):x2(r,n,a)}var hD=(e,r,n)=>{var a=ej(r);if(!(n!=="auto"&&n!=="linear")){if(r!=null&&r.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&ii(e))return G9(e,r.tickCount,r.allowDecimals);if(r!=null&&r.tickCount&&r.type==="number"&&ii(e))return H9(e,r.tickCount,r.allowDecimals)}},aj=me([rj,ju,Eo],hD),vD=(e,r,n,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&ii(r)&&Array.isArray(n)&&n.length>0){var l,o,u=r[0],d=(l=n[0])!==null&&l!==void 0?l:0,m=r[1],p=(o=n[n.length-1])!==null&&o!==void 0?o:0;return[Math.min(u,d),Math.max(m,p)]}return r},OU=me([Vr,rj,aj,yr],vD),DU=me(hp,Vr,(e,r)=>{if(!(!r||r.type!=="number")){var n=1/0,a=Array.from(si(e.map(v=>v.value))).sort((v,b)=>v-b),l=a[0],o=a[a.length-1];if(l==null||o==null)return 1/0;var u=o-l;if(u===0)return 1/0;for(var d=0;d<a.length-1;d++){var m=a[d],p=a[d+1];if(!(m==null||p==null)){var h=p-m;n=Math.min(n,h)}}return n/u}}),gD=me(DU,xt,TO,xr,(e,r,n,a,l)=>l,(e,r,n,a,l)=>{if(!st(e))return 0;var o=r==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var u=ta(n,e*o),d=e*o/2;return d-u-(d-u)/o*u}return 0}),PU=(e,r,n)=>{var a=pi(e,r);return a==null||typeof a.padding!="string"?0:gD(e,"xAxis",r,n,a.padding)},MU=(e,r,n)=>{var a=hi(e,r);return a==null||typeof a.padding!="string"?0:gD(e,"yAxis",r,n,a.padding)},TU=me(pi,PU,(e,r)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:r,right:r}:{left:((n=l.left)!==null&&n!==void 0?n:0)+r,right:((a=l.right)!==null&&a!==void 0?a:0)+r}}),qU=me(hi,MU,(e,r)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:r,bottom:r}:{top:((n=l.top)!==null&&n!==void 0?n:0)+r,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+r}}),RU=me([xr,TU,Vf,Hf,(e,r,n)=>n],(e,r,n,a,l)=>{var{padding:o}=a;return l?[o.left,n.width-o.right]:[e.left+r.left,e.left+e.width-r.right]}),IU=me([xr,xt,qU,Vf,Hf,(e,r,n)=>n],(e,r,n,a,l,o)=>{var{padding:u}=l;return o?[a.height-u.bottom,u.top]:r==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Su=(e,r,n,a)=>{var l;switch(r){case"xAxis":return RU(e,n,a);case"yAxis":return IU(e,n,a);case"zAxis":return(l=Zy(e,n))===null||l===void 0?void 0:l.range;case"angleAxis":return $O(e);case"radiusAxis":return BO(e,n);default:return}},xD=me([Vr,Su],lp),LU=me([Eo,OU],rU),vp=me([Vr,Eo,LU,xD],nj);me([_u,tj,yr],hU);function bD(e,r){return e.id<r.id?-1:e.id>r.id?1:0}var gp=(e,r)=>r,xp=(e,r,n)=>n,$U=me(Ff,gp,xp,(e,r,n)=>e.filter(a=>a.orientation===r).filter(a=>a.mirror===n).sort(bD)),BU=me(Gf,gp,xp,(e,r,n)=>e.filter(a=>a.orientation===r).filter(a=>a.mirror===n).sort(bD)),yD=(e,r)=>({width:e.width,height:r.height}),UU=(e,r)=>{var n=typeof r.width=="number"?r.width:pu;return{width:n,height:e.height}},jD=me(xr,pi,yD),FU=(e,r,n)=>{switch(r){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},GU=(e,r,n)=>{switch(r){case"left":return e.left;case"right":return n-e.right;default:return 0}},HU=me(di,xr,$U,gp,xp,(e,r,n,a,l)=>{var o={},u;return n.forEach(d=>{var m=yD(r,d);u==null&&(u=FU(r,a,e));var p=a==="top"&&!l||a==="bottom"&&l;o[d.id]=u-Number(p)*m.height,u+=(p?-1:1)*m.height}),o}),VU=me(ui,xr,BU,gp,xp,(e,r,n,a,l)=>{var o={},u;return n.forEach(d=>{var m=UU(r,d);u==null&&(u=GU(r,a,e));var p=a==="left"&&!l||a==="right"&&l;o[d.id]=u-Number(p)*m.width,u+=(p?-1:1)*m.width}),o}),QU=(e,r)=>{var n=pi(e,r);if(n!=null)return HU(e,n.orientation,n.mirror)},YU=me([xr,pi,QU,(e,r)=>r],(e,r,n,a)=>{if(r!=null){var l=n?.[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),KU=(e,r)=>{var n=hi(e,r);if(n!=null)return VU(e,n.orientation,n.mirror)},WU=me([xr,hi,KU,(e,r)=>r],(e,r,n,a)=>{if(r!=null){var l=n?.[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),_D=me(xr,hi,(e,r)=>{var n=typeof r.width=="number"?r.width:pu;return{width:n,height:e.height}}),j2=(e,r,n)=>{switch(r){case"xAxis":return jD(e,n).width;case"yAxis":return _D(e,n).height;default:return}},ND=(e,r,n,a)=>{if(n!=null){var{allowDuplicatedCategory:l,type:o,dataKey:u}=n,d=ci(e,a),m=r.map(p=>p.value);if(u&&d&&o==="category"&&l&&jz(m))return m}},ij=me([xt,hp,Vr,yr],ND),SD=(e,r,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:l,scale:o}=n,u=ci(e,a);if(u&&(l==="number"||o!=="auto"))return r.map(d=>d.value)}},sj=me([xt,hp,ju,yr],SD),_2=me([xt,lU,Eo,vp,ij,sj,Su,aj,yr],(e,r,n,a,l,o,u,d,m)=>{if(r!=null){var p=ci(e,m);return{angle:r.angle,interval:r.interval,minTickGap:r.minTickGap,orientation:r.orientation,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit,axisType:m,categoricalDomain:o,duplicateDomain:l,isCategorical:p,niceTicks:d,range:u,realScaleType:n,scale:a}}}),XU=(e,r,n,a,l,o,u,d,m)=>{if(!(r==null||a==null)){var p=ci(e,m),{type:h,ticks:v,tickCount:b}=r,x=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,j=h==="category"&&a.bandwidth?a.bandwidth()/x:0;j=m==="angleAxis"&&o!=null&&o.length>=2?tn(o[0]-o[1])*2*j:j;var _=v||l;return _?_.map((C,w)=>{var E=u?u.indexOf(C):C,S=a.map(E);return st(S)?{index:w,coordinate:S+j,value:C,offset:j}:null}).filter(rn):p&&d?d.map((C,w)=>{var E=a.map(C);return st(E)?{coordinate:E+j,value:C,index:w,offset:j}:null}).filter(rn):a.ticks?a.ticks(b).map((C,w)=>{var E=a.map(C);return st(E)?{coordinate:E+j,value:C,index:w,offset:j}:null}).filter(rn):a.domain().map((C,w)=>{var E=a.map(C);return st(E)?{coordinate:E+j,value:u?u[C]:C,index:w,offset:j}:null}).filter(rn)}},wD=me([xt,ju,Eo,vp,aj,Su,ij,sj,yr],XU),ZU=(e,r,n,a,l,o,u)=>{if(!(r==null||n==null||a==null||a[0]===a[1])){var d=ci(e,u),{tickCount:m}=r,p=0;return p=u==="angleAxis"&&a?.length>=2?tn(a[0]-a[1])*2*p:p,d&&o?o.map((h,v)=>{var b=n.map(h);return st(b)?{coordinate:b+p,value:h,index:v,offset:p}:null}).filter(rn):n.ticks?n.ticks(m).map((h,v)=>{var b=n.map(h);return st(b)?{coordinate:b+p,value:h,index:v,offset:p}:null}).filter(rn):n.domain().map((h,v)=>{var b=n.map(h);return st(b)?{coordinate:b+p,value:l?l[h]:h,index:v,offset:p}:null}).filter(rn)}},rs=me([xt,ju,vp,Su,ij,sj,yr],ZU),ns=me(Vr,vp,(e,r)=>{if(!(e==null||r==null))return lf(lf({},e),{},{scale:r})}),JU=me([Vr,Eo,rj,xD],nj);me((e,r,n)=>Zy(e,n),JU,(e,r)=>{if(!(e==null||r==null))return lf(lf({},e),{},{scale:r})});var eF=me([xt,Ff,Gf],(e,r,n)=>{switch(e){case"horizontal":return r.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),CD=e=>e.options.defaultTooltipEventType,ED=e=>e.options.validateTooltipEventTypes;function AD(e,r,n){if(e==null)return r;var a=e?"axis":"item";return n==null?r:n.includes(a)?a:r}function lj(e,r){var n=CD(e),a=ED(e);return AD(r,n,a)}function tF(e){return Ie(r=>lj(r,e))}var zD=(e,r)=>{var n,a=Number(r);if(!(_a(a)||r==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},rF=e=>e.tooltip.settings,Qi={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},nF={itemInteraction:{click:Qi,hover:Qi},axisInteraction:{click:Qi,hover:Qi},keyboardInteraction:Qi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},kD=an({name:"tooltip",initialState:nF,reducers:{addTooltipEntrySettings:{reducer(e,r){e.tooltipItemPayloads.push(r.payload)},prepare:Mt()},replaceTooltipEntrySettings:{reducer(e,r){var{prev:n,next:a}=r.payload,l=Jn(e).tooltipItemPayloads.indexOf(n);l>-1&&(e.tooltipItemPayloads[l]=a)},prepare:Mt()},removeTooltipEntrySettings:{reducer(e,r){var n=Jn(e).tooltipItemPayloads.indexOf(r.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Mt()},setTooltipSettingsState(e,r){e.settings=r.payload},setActiveMouseOverItemIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=r.payload.activeIndex,e.itemInteraction.hover.dataKey=r.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=r.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=r.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,r){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=r.payload.activeIndex,e.itemInteraction.click.dataKey=r.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=r.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=r.payload.activeCoordinate},setMouseOverAxisIndex(e,r){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=r.payload.activeIndex,e.axisInteraction.hover.dataKey=r.payload.activeDataKey,e.axisInteraction.hover.coordinate=r.payload.activeCoordinate},setMouseClickAxisIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=r.payload.activeIndex,e.axisInteraction.click.dataKey=r.payload.activeDataKey,e.axisInteraction.click.coordinate=r.payload.activeCoordinate},setSyncInteraction(e,r){e.syncInteraction=r.payload},setKeyboardInteraction(e,r){e.keyboardInteraction.active=r.payload.active,e.keyboardInteraction.index=r.payload.activeIndex,e.keyboardInteraction.coordinate=r.payload.activeCoordinate}}}),{addTooltipEntrySettings:aF,replaceTooltipEntrySettings:iF,removeTooltipEntrySettings:sF,setTooltipSettingsState:lF,setActiveMouseOverItemIndex:OD,mouseLeaveItem:oF,mouseLeaveChart:DD,setActiveClickItemIndex:cF,setMouseOverAxisIndex:PD,setMouseClickAxisIndex:uF,setSyncInteraction:_b,setKeyboardInteraction:Nb}=kD.actions,dF=kD.reducer;function N2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function rm(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?N2(Object(n),!0).forEach(function(a){mF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mF(e,r,n){return(r=fF(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function fF(e){var r=pF(e,"string");return typeof r=="symbol"?r:r+""}function pF(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function hF(e,r,n){return r==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function vF(e){return e.index!=null}var MD=(e,r,n,a)=>{if(r==null)return Qi;var l=hF(e,r,n);if(l==null)return Qi;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(vF(l)){if(o)return rm(rm({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return rm(rm({},Qi),{},{coordinate:l.coordinate})};function gF(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var r=e.valueOf();return Number.isFinite(r)?r:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function xF(e,r){var n=gF(e),a=r[0],l=r[1];if(n===void 0)return!1;var o=Math.min(a,l),u=Math.max(a,l);return n>=o&&n<=u}function bF(e,r,n){if(n==null||r==null)return!0;var a=er(e,r);return a==null||!ii(n)?!0:xF(a,n)}var oj=(e,r,n,a)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!st(o))return l;var u=0,d=1/0;r.length>0&&(d=r.length-1);var m=Math.max(u,Math.min(o,d)),p=r[m];return p==null||bF(p,n,a)?String(m):null},TD=(e,r,n,a,l,o,u)=>{if(o!=null){var d=u[0],m=d?.getPosition(o);if(m!=null)return m;var p=l?.[Number(o)];if(p)return n==="horizontal"?{x:p.coordinate,y:(a.top+r)/2}:{x:(a.left+e)/2,y:p.coordinate}}},qD=(e,r,n,a)=>{if(r==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;if(n==="hover"?l=e.itemInteraction.hover.graphicalItemId:l=e.itemInteraction.click.graphicalItemId,l==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(u=>{var d;return((d=u.settings)===null||d===void 0?void 0:d.graphicalItemId)===l})},RD=e=>e.options.tooltipPayloadSearcher,Ao=e=>e.tooltip;function S2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function w2(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?S2(Object(n),!0).forEach(function(a){yF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yF(e,r,n){return(r=jF(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function jF(e){var r=_F(e,"string");return typeof r=="symbol"?r:r+""}function _F(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function NF(e,r){return e??r}var ID=(e,r,n,a,l,o,u)=>{if(!(r==null||o==null)){var{chartData:d,computedData:m,dataStartIndex:p,dataEndIndex:h}=n,v=[];return e.reduce((b,x)=>{var j,{dataDefinedOnItem:_,settings:C}=x,w=NF(_,d),E=Array.isArray(w)?fk(w,p,h):w,S=(j=C?.dataKey)!==null&&j!==void 0?j:a,A=C?.nameKey,z;if(a&&Array.isArray(E)&&!Array.isArray(E[0])&&u==="axis"?z=_z(E,a,l):z=o(E,r,m,A),Array.isArray(z))z.forEach(M=>{var D=w2(w2({},C),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});b.push(Sw({tooltipEntrySettings:D,dataKey:M.dataKey,payload:M.payload,value:er(M.payload,M.dataKey),name:M.name}))});else{var k;b.push(Sw({tooltipEntrySettings:C,dataKey:S,payload:z,value:er(z,S),name:(k=er(z,A))!==null&&k!==void 0?k:C?.name}))}return b},v)}},cj=me([or,VO,Hy],pD),SF=me([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,r)=>[...e,...r]),wF=me([jr,wo],QO),zo=me([SF,or,wF],YO,{memoizeOptions:{resultEqualityCheck:fp}}),CF=me([zo],e=>e.filter(dp)),EF=me([zo],XO,{memoizeOptions:{resultEqualityCheck:fp}}),ko=me([EF,fi],ZO),AF=me([CF,fi,or],FO),uj=me([ko,or,zo],JO),LD=me([or],ej),zF=me([or],e=>e.allowDataOverflow),$D=me([LD,zF],NO),kF=me([zo],e=>e.filter(dp)),OF=me([AF,kF,sp,qO],tD),DF=me([OF,fi,jr,$D],rD),PF=me([zo],WO),MF=me([ko,or,PF,tj,jr],iD,{memoizeOptions:{resultEqualityCheck:mp}}),TF=me([sD,jr,wo],Co),qF=me([TF,jr],cD),RF=me([lD,jr,wo],Co),IF=me([RF,jr],uD),LF=me([oD,jr,wo],Co),$F=me([LF,jr],dD),BF=me([qF,$F,IF],of),UF=me([or,LD,$D,DF,MF,BF,xt,jr],mD),wu=me([or,xt,ko,uj,sp,jr,UF],fD),FF=me([wu,or,cj],hD),GF=me([or,wu,FF,jr],vD),BD=e=>{var r=jr(e),n=wo(e),a=!1;return Su(e,r,n,a)},UD=me([or,BD],lp),FD=me([or,cj,GF,UD],nj),HF=me([xt,uj,or,jr],ND),VF=me([xt,uj,or,jr],SD),QF=(e,r,n,a,l,o,u,d)=>{if(r){var{type:m}=r,p=ci(e,d);if(a){var h=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,v=m==="category"&&a.bandwidth?a.bandwidth()/h:0;return v=d==="angleAxis"&&l!=null&&l?.length>=2?tn(l[0]-l[1])*2*v:v,p&&u?u.map((b,x)=>{var j=a.map(b);return st(j)?{coordinate:j+v,value:b,index:x,offset:v}:null}).filter(rn):a.domain().map((b,x)=>{var j=a.map(b);return st(j)?{coordinate:j+v,value:o?o[b]:b,index:x,offset:v}:null}).filter(rn)}}},vi=me([xt,or,cj,FD,BD,HF,VF,jr],QF),dj=me([CD,ED,rF],(e,r,n)=>AD(n.shared,e,r)),GD=e=>e.tooltip.settings.trigger,mj=e=>e.tooltip.settings.defaultIndex,Cu=me([Ao,dj,GD,mj],MD),Zs=me([Cu,ko,Nu,wu],oj),HD=me([vi,Zs],zD),VD=me([Cu],e=>{if(e)return e.dataKey});me([Cu],e=>{if(e)return e.graphicalItemId});var QD=me([Ao,dj,GD,mj],qD),YF=me([ui,di,xt,xr,vi,mj,QD],TD),KF=me([Cu,YF],(e,r)=>e!=null&&e.coordinate?e.coordinate:r),WF=me([Cu],e=>{var r;return(r=e?.active)!==null&&r!==void 0?r:!1}),XF=me([QD,Zs,fi,Nu,HD,RD,dj],ID),ZF=me([XF],e=>{if(e!=null){var r=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(r))}});function C2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function E2(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?C2(Object(n),!0).forEach(function(a){JF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JF(e,r,n){return(r=eG(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function eG(e){var r=tG(e,"string");return typeof r=="symbol"?r:r+""}function tG(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var rG=()=>Ie(or),nG=()=>{var e=rG(),r=Ie(vi),n=Ie(FD);return vo(!e||!n?void 0:E2(E2({},e),{},{scale:n}),r)};function A2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function eo(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?A2(Object(n),!0).forEach(function(a){aG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aG(e,r,n){return(r=iG(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function iG(e){var r=sG(e,"string");return typeof r=="symbol"?r:r+""}function sG(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var lG=(e,r,n,a)=>{var l=r.find(o=>o&&o.index===n);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:l.coordinate}}return{x:0,y:0}},oG=(e,r,n,a)=>{var l=r.find(p=>p&&p.index===n);if(l){if(e==="centric"){var o=l.coordinate,{radius:u}=a;return eo(eo(eo({},a),zr(a.cx,a.cy,u,o)),{},{angle:o,radius:u})}var d=l.coordinate,{angle:m}=a;return eo(eo(eo({},a),zr(a.cx,a.cy,d,m)),{},{angle:m,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function cG(e,r){var{chartX:n,chartY:a}=e;return n>=r.left&&n<=r.left+r.width&&a>=r.top&&a<=r.top+r.height}var YD=(e,r,n,a,l)=>{var o,u=(o=r?.length)!==null&&o!==void 0?o:0;if(u<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var d=0;d<u;d++){var m,p,h,v,b,x=d>0?(m=n[d-1])===null||m===void 0?void 0:m.coordinate:(p=n[u-1])===null||p===void 0?void 0:p.coordinate,j=(h=n[d])===null||h===void 0?void 0:h.coordinate,_=d>=u-1?(v=n[0])===null||v===void 0?void 0:v.coordinate:(b=n[d+1])===null||b===void 0?void 0:b.coordinate,C=void 0;if(!(x==null||j==null||_==null))if(tn(j-x)!==tn(_-j)){var w=[];if(tn(_-j)===tn(l[1]-l[0])){C=_;var E=j+l[1]-l[0];w[0]=Math.min(E,(E+x)/2),w[1]=Math.max(E,(E+x)/2)}else{C=x;var S=_+l[1]-l[0];w[0]=Math.min(j,(S+j)/2),w[1]=Math.max(j,(S+j)/2)}var A=[Math.min(j,(C+j)/2),Math.max(j,(C+j)/2)];if(e>A[0]&&e<=A[1]||e>=w[0]&&e<=w[1]){var z;return(z=n[d])===null||z===void 0?void 0:z.index}}else{var k=Math.min(x,_),M=Math.max(x,_);if(e>(k+j)/2&&e<=(M+j)/2){var D;return(D=n[d])===null||D===void 0?void 0:D.index}}}else if(r)for(var $=0;$<u;$++){var B=r[$];if(B!=null){var H=r[$+1],T=r[$-1];if($===0&&H!=null&&e<=(B.coordinate+H.coordinate)/2||$===u-1&&T!=null&&e>(B.coordinate+T.coordinate)/2||$>0&&$<u-1&&T!=null&&H!=null&&e>(B.coordinate+T.coordinate)/2&&e<=(B.coordinate+H.coordinate)/2)return B.index}}return-1},uG=()=>Ie(Hy),fj=(e,r)=>r,KD=(e,r,n)=>n,pj=(e,r,n,a)=>a,dG=me(vi,e=>Df(e,r=>r.coordinate)),hj=me([Ao,fj,KD,pj],MD),vj=me([hj,ko,Nu,wu],oj),mG=(e,r,n)=>{if(r!=null){var a=Ao(e);return r==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},WD=me([Ao,fj,KD,pj],qD),cf=me([ui,di,xt,xr,vi,pj,WD],TD),fG=me([hj,cf],(e,r)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:r}),XD=me([vi,vj],zD),pG=me([WD,vj,fi,Nu,XD,RD,fj],ID),hG=me([hj,vj],(e,r)=>({isActive:e.active&&r!=null,activeIndex:r})),vG=(e,r,n,a,l,o,u)=>{if(!(!e||!n||!a||!l)&&cG(e,u)){var d=VL(e,r),m=YD(d,o,l,n,a),p=lG(r,l,m,e);return{activeIndex:String(m),activeCoordinate:p}}},gG=(e,r,n,a,l,o,u)=>{if(!(!e||!a||!l||!o||!n)){var d=e7(e,n);if(d){var m=QL(d,r),p=YD(m,u,o,a,l),h=oG(r,o,p,d);return{activeIndex:String(p),activeCoordinate:h}}}},xG=(e,r,n,a,l,o,u,d)=>{if(!(!e||!r||!a||!l||!o))return r==="horizontal"||r==="vertical"?vG(e,r,a,l,o,u,d):gG(e,r,n,a,l,o,u)},bG=me(e=>e.zIndex.zIndexMap,(e,r)=>r,(e,r,n)=>n,(e,r,n)=>{if(r!=null){var a=e[r];if(a!=null)return n?a.panoramaElement:a.element}}),yG=me(e=>e.zIndex.zIndexMap,e=>{var r=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(gr)),n=Array.from(new Set(r));return n.sort((a,l)=>a-l)},{memoizeOptions:{resultEqualityCheck:eU}});function z2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function k2(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?z2(Object(n),!0).forEach(function(a){jG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function jG(e,r,n){return(r=_G(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function _G(e){var r=NG(e,"string");return typeof r=="symbol"?r:r+""}function NG(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var SG={},wG={zIndexMap:Object.values(gr).reduce((e,r)=>k2(k2({},e),{},{[r]:{element:void 0,panoramaElement:void 0,consumers:0}}),SG)},CG=new Set(Object.values(gr));function EG(e){return CG.has(e)}var ZD=an({name:"zIndex",initialState:wG,reducers:{registerZIndexPortal:{reducer:(e,r)=>{var{zIndex:n}=r.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Mt()},unregisterZIndexPortal:{reducer:(e,r)=>{var{zIndex:n}=r.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!EG(n)&&delete e.zIndexMap[n])},prepare:Mt()},registerZIndexPortalElement:{reducer:(e,r)=>{var{zIndex:n,element:a,isPanorama:l}=r.payload;e.zIndexMap[n]?l?e.zIndexMap[n].panoramaElement=a:e.zIndexMap[n].element=a:e.zIndexMap[n]={consumers:0,element:l?void 0:a,panoramaElement:l?a:void 0}},prepare:Mt()},unregisterZIndexPortalElement:{reducer:(e,r)=>{var{zIndex:n}=r.payload;e.zIndexMap[n]&&(r.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:Mt()}}}),{registerZIndexPortal:AG,unregisterZIndexPortal:zG,registerZIndexPortalElement:kG,unregisterZIndexPortalElement:OG}=ZD.actions,DG=ZD.reducer;function Gn(e){var{zIndex:r,children:n}=e,a=w8(),l=a&&r!==void 0&&r!==0,o=Rr(),u=Qt();g.useLayoutEffect(()=>l?(u(AG({zIndex:r})),()=>{u(zG({zIndex:r}))}):nl,[u,r,l]);var d=Ie(m=>bG(m,r,o));return l?d?yA.createPortal(n,d):null:n}function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sb.apply(null,arguments)}function O2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function nm(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?O2(Object(n),!0).forEach(function(a){PG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function PG(e,r,n){return(r=MG(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function MG(e){var r=TG(e,"string");return typeof r=="symbol"?r:r+""}function TG(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function qG(e){var{cursor:r,cursorComp:n,cursorProps:a}=e;return g.isValidElement(r)?g.cloneElement(r,a):g.createElement(n,a)}function RG(e){var r,{coordinate:n,payload:a,index:l,offset:o,tooltipAxisBandSize:u,layout:d,cursor:m,tooltipEventType:p,chartName:h}=e,v=n,b=a,x=l;if(!m||!v||h!=="ScatterChart"&&p!=="axis")return null;var j,_,C;if(h==="ScatterChart")j=v,_=f$,C=gr.cursorLine;else if(h==="BarChart")j=p$(d,v,o,u),_=Ik,C=gr.cursorRectangle;else if(d==="radial"&&wz(v)){var{cx:w,cy:E,radius:S,startAngle:A,endAngle:z}=Lk(v);j={cx:w,cy:E,startAngle:A,endAngle:z,innerRadius:S,outerRadius:S},_=Bk,C=gr.cursorLine}else j={points:a7(d,v,o)},_=Pk,C=gr.cursorLine;var k=typeof m=="object"&&"className"in m?m.className:void 0,M=nm(nm(nm(nm({stroke:"#ccc",pointerEvents:"none"},o),j),uu(m)),{},{payload:b,payloadIndex:x,className:Nt("recharts-tooltip-cursor",k)});return g.createElement(Gn,{zIndex:(r=e.zIndex)!==null&&r!==void 0?r:C},g.createElement(qG,{cursor:m,cursorComp:_,cursorProps:M}))}function IG(e){var r=nG(),n=yk(),a=al(),l=uG();return r==null||n==null||a==null||l==null?null:g.createElement(RG,Sb({},e,{offset:n,layout:a,tooltipAxisBandSize:r,chartName:l}))}var JD=g.createContext(null),LG=()=>g.useContext(JD),fx={exports:{}},D2;function $G(){return D2||(D2=1,(function(e){var r=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function l(m,p,h){this.fn=m,this.context=p,this.once=h||!1}function o(m,p,h,v,b){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new l(h,v||m,b),j=n?n+p:p;return m._events[j]?m._events[j].fn?m._events[j]=[m._events[j],x]:m._events[j].push(x):(m._events[j]=x,m._eventsCount++),m}function u(m,p){--m._eventsCount===0?m._events=new a:delete m._events[p]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],h,v;if(this._eventsCount===0)return p;for(v in h=this._events)r.call(h,v)&&p.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},d.prototype.listeners=function(p){var h=n?n+p:p,v=this._events[h];if(!v)return[];if(v.fn)return[v.fn];for(var b=0,x=v.length,j=new Array(x);b<x;b++)j[b]=v[b].fn;return j},d.prototype.listenerCount=function(p){var h=n?n+p:p,v=this._events[h];return v?v.fn?1:v.length:0},d.prototype.emit=function(p,h,v,b,x,j){var _=n?n+p:p;if(!this._events[_])return!1;var C=this._events[_],w=arguments.length,E,S;if(C.fn){switch(C.once&&this.removeListener(p,C.fn,void 0,!0),w){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,v),!0;case 4:return C.fn.call(C.context,h,v,b),!0;case 5:return C.fn.call(C.context,h,v,b,x),!0;case 6:return C.fn.call(C.context,h,v,b,x,j),!0}for(S=1,E=new Array(w-1);S<w;S++)E[S-1]=arguments[S];C.fn.apply(C.context,E)}else{var A=C.length,z;for(S=0;S<A;S++)switch(C[S].once&&this.removeListener(p,C[S].fn,void 0,!0),w){case 1:C[S].fn.call(C[S].context);break;case 2:C[S].fn.call(C[S].context,h);break;case 3:C[S].fn.call(C[S].context,h,v);break;case 4:C[S].fn.call(C[S].context,h,v,b);break;default:if(!E)for(z=1,E=new Array(w-1);z<w;z++)E[z-1]=arguments[z];C[S].fn.apply(C[S].context,E)}}return!0},d.prototype.on=function(p,h,v){return o(this,p,h,v,!1)},d.prototype.once=function(p,h,v){return o(this,p,h,v,!0)},d.prototype.removeListener=function(p,h,v,b){var x=n?n+p:p;if(!this._events[x])return this;if(!h)return u(this,x),this;var j=this._events[x];if(j.fn)j.fn===h&&(!b||j.once)&&(!v||j.context===v)&&u(this,x);else{for(var _=0,C=[],w=j.length;_<w;_++)(j[_].fn!==h||b&&!j[_].once||v&&j[_].context!==v)&&C.push(j[_]);C.length?this._events[x]=C.length===1?C[0]:C:u(this,x)}return this},d.prototype.removeAllListeners=function(p){var h;return p?(h=n?n+p:p,this._events[h]&&u(this,h)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(fx)),fx.exports}var BG=$G();const UG=oi(BG);var nu=new UG,wb="recharts.syncEvent.tooltip",P2="recharts.syncEvent.brush",eP=(e,r)=>{if(r&&Array.isArray(e)){var n=Number.parseInt(r,10);if(!_a(n))return e[n]}},FG={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},tP=an({name:"options",initialState:FG,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),GG=tP.reducer,{createEventEmitter:HG}=tP.actions;function VG(e){return e.tooltip.syncInteraction}var QG={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},rP=an({name:"chartData",initialState:QG,reducers:{setChartData(e,r){if(e.chartData=r.payload,r.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}r.payload.length>0&&e.dataEndIndex!==r.payload.length-1&&(e.dataEndIndex=r.payload.length-1)},setComputedData(e,r){e.computedData=r.payload},setDataStartEndIndexes(e,r){var{startIndex:n,endIndex:a}=r.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:M2,setDataStartEndIndexes:YG,setComputedData:Kte}=rP.actions,KG=rP.reducer,WG=["x","y"];function T2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function to(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?T2(Object(n),!0).forEach(function(a){XG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XG(e,r,n){return(r=ZG(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function ZG(e){var r=JG(e,"string");return typeof r=="symbol"?r:r+""}function JG(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function eH(e,r){if(e==null)return{};var n,a,l=tH(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function tH(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function rH(){var e=Ie(Vy),r=Ie(Qy),n=Qt(),a=Ie(RO),l=Ie(vi),o=al(),u=Qf(),d=Ie(m=>m.rootProps.className);g.useEffect(()=>{if(e==null)return nl;var m=(p,h,v)=>{if(r!==v&&e===p){if(a==="index"){var b;if(u&&h!==null&&h!==void 0&&(b=h.payload)!==null&&b!==void 0&&b.coordinate&&h.payload.sourceViewBox){var x=h.payload.coordinate,{x:j,y:_}=x,C=eH(x,WG),{x:w,y:E,width:S,height:A}=h.payload.sourceViewBox,z=to(to({},C),{},{x:u.x+(S?(j-w)/S:0)*u.width,y:u.y+(A?(_-E)/A:0)*u.height});n(to(to({},h),{},{payload:to(to({},h.payload),{},{coordinate:z})}))}else n(h);return}if(l!=null){var k;if(typeof a=="function"){var M={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},D=a(l,M);k=l[D]}else a==="value"&&(k=l.find(q=>String(q.value)===h.payload.label));var{coordinate:$}=h.payload;if(k==null||h.payload.active===!1||$==null||u==null){n(_b({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:B,y:H}=$,T=Math.min(B,u.x+u.width),Y=Math.min(H,u.y+u.height),J={x:o==="horizontal"?k.coordinate:T,y:o==="horizontal"?Y:k.coordinate},P=_b({active:h.payload.active,coordinate:J,dataKey:h.payload.dataKey,index:String(k.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(P)}}};return nu.on(wb,m),()=>{nu.off(wb,m)}},[d,n,r,e,a,l,o,u])}function nH(){var e=Ie(Vy),r=Ie(Qy),n=Qt();g.useEffect(()=>{if(e==null)return nl;var a=(l,o,u)=>{r!==u&&e===l&&n(YG(o))};return nu.on(P2,a),()=>{nu.off(P2,a)}},[n,r,e])}function aH(){var e=Qt();g.useEffect(()=>{e(HG())},[e]),rH(),nH()}function iH(e,r,n,a,l,o){var u=Ie(x=>mG(x,e,r)),d=Ie(Qy),m=Ie(Vy),p=Ie(RO),h=Ie(VG),v=h?.active,b=Qf();g.useEffect(()=>{if(!v&&m!=null&&d!=null){var x=_b({active:o,coordinate:n,dataKey:u,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:b,graphicalItemId:void 0});nu.emit(wb,m,x,d)}},[v,n,u,l,a,d,m,p,o,b])}function q2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function R2(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?q2(Object(n),!0).forEach(function(a){sH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sH(e,r,n){return(r=lH(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function lH(e){var r=oH(e,"string");return typeof r=="symbol"?r:r+""}function oH(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function cH(e){return e.dataKey}function uH(e,r){return g.isValidElement(e)?g.cloneElement(e,r):typeof e=="function"?g.createElement(e,r):g.createElement(V8,r)}var I2=[],dH={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function L2(e){var r,n,a=Hr(e,dH),{active:l,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:m,filterNull:p,isAnimationActive:h,offset:v,payloadUniqBy:b,position:x,reverseDirection:j,useTranslate3d:_,wrapperStyle:C,cursor:w,shared:E,trigger:S,defaultIndex:A,portal:z,axisId:k}=a,M=Qt(),D=typeof A=="number"?String(A):A;g.useEffect(()=>{M(lF({shared:E,trigger:S,axisId:k,active:l,defaultIndex:D}))},[M,E,S,k,l,D]);var $=Qf(),B=Dk(),H=tF(E),{activeIndex:T,isActive:Y}=(r=Ie(ve=>hG(ve,H,S,D)))!==null&&r!==void 0?r:{},J=Ie(ve=>pG(ve,H,S,D)),P=Ie(ve=>XD(ve,H,S,D)),q=Ie(ve=>fG(ve,H,S,D)),U=J,I=LG(),te=(n=l??Y)!==null&&n!==void 0?n:!1,[L,Z]=O4([U,te]),W=H==="axis"?P:void 0;iH(H,S,q,W,T,te);var ce=z??I;if(ce==null||$==null||H==null)return null;var xe=U??I2;te||(xe=I2),p&&xe.length&&(xe=n4(xe.filter(ve=>ve.value!=null&&(ve.hide!==!0||a.includeHidden)),b,cH));var he=xe.length>0,F=g.createElement(J8,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:h,active:te,coordinate:q,hasPayload:he,offset:v,position:x,reverseDirection:j,useTranslate3d:_,viewBox:$,wrapperStyle:C,lastBoundingBox:L,innerRef:Z,hasPortalFromProps:!!z},uH(m,R2(R2({},a),{},{payload:xe,label:W,active:te,activeIndex:T,coordinate:q,accessibilityLayer:B})));return g.createElement(g.Fragment,null,yA.createPortal(F,ce),te&&g.createElement(IG,{cursor:w,tooltipEventType:H,coordinate:q,payload:xe,index:T}))}var gj=e=>null;gj.displayName="Cell";function mH(e,r,n){return(r=fH(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function fH(e){var r=pH(e,"string");return typeof r=="symbol"?r:r+""}function pH(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class hH{constructor(r){mH(this,"cache",new Map),this.maxSize=r}get(r){var n=this.cache.get(r);return n!==void 0&&(this.cache.delete(r),this.cache.set(r,n)),n}set(r,n){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(r,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function $2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function vH(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?$2(Object(n),!0).forEach(function(a){gH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gH(e,r,n){return(r=xH(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function xH(e){var r=bH(e,"string");return typeof r=="symbol"?r:r+""}function bH(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var yH={cacheSize:2e3,enableCache:!0},nP=vH({},yH),B2=new hH(nP.cacheSize),jH={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},U2="recharts_measurement_span";function _H(e,r){var n=r.fontSize||"",a=r.fontFamily||"",l=r.fontWeight||"",o=r.fontStyle||"",u=r.letterSpacing||"",d=r.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(u,"|").concat(d)}var F2=(e,r)=>{try{var n=document.getElementById(U2);n||(n=document.createElement("span"),n.setAttribute("id",U2),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,jH,r),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},$c=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||Xf.isSsr)return{width:0,height:0};if(!nP.enableCache)return F2(r,n);var a=_H(r,n),l=B2.get(a);if(l)return l;var o=F2(r,n);return B2.set(a,o),o},aP;function NH(e,r,n){return(r=SH(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function SH(e){var r=wH(e,"string");return typeof r=="symbol"?r:r+""}function wH(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var G2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,H2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CH=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,EH=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,AH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zH=["cm","mm","pt","pc","in","Q","px"];function kH(e){return zH.includes(e)}var lo="NaN";function OH(e,r){return e*AH[r]}class Ar{static parse(r){var n,[,a,l]=(n=EH.exec(r))!==null&&n!==void 0?n:[];return a==null?Ar.NaN:new Ar(parseFloat(a),l??"")}constructor(r,n){this.num=r,this.unit=n,this.num=r,this.unit=n,_a(r)&&(this.unit=""),n!==""&&!CH.test(n)&&(this.num=NaN,this.unit=""),kH(n)&&(this.num=OH(r,n),this.unit="px")}add(r){return this.unit!==r.unit?new Ar(NaN,""):new Ar(this.num+r.num,this.unit)}subtract(r){return this.unit!==r.unit?new Ar(NaN,""):new Ar(this.num-r.num,this.unit)}multiply(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Ar(NaN,""):new Ar(this.num*r.num,this.unit||r.unit)}divide(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new Ar(NaN,""):new Ar(this.num/r.num,this.unit||r.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return _a(this.num)}}aP=Ar;NH(Ar,"NaN",new aP(NaN,""));function iP(e){if(e==null||e.includes(lo))return lo;for(var r=e;r.includes("*")||r.includes("/");){var n,[,a,l,o]=(n=G2.exec(r))!==null&&n!==void 0?n:[],u=Ar.parse(a??""),d=Ar.parse(o??""),m=l==="*"?u.multiply(d):u.divide(d);if(m.isNaN())return lo;r=r.replace(G2,m.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var p,[,h,v,b]=(p=H2.exec(r))!==null&&p!==void 0?p:[],x=Ar.parse(h??""),j=Ar.parse(b??""),_=v==="+"?x.add(j):x.subtract(j);if(_.isNaN())return lo;r=r.replace(H2,_.toString())}return r}var V2=/\(([^()]*)\)/;function DH(e){for(var r=e,n;(n=V2.exec(r))!=null;){var[,a]=n;r=r.replace(V2,iP(a))}return r}function PH(e){var r=e.replace(/\s+/g,"");return r=DH(r),r=iP(r),r}function MH(e){try{return PH(e)}catch{return lo}}function px(e){var r=MH(e.slice(5,-1));return r===lo?"":r}var TH=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],qH=["dx","dy","angle","className","breakAll"];function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cb.apply(null,arguments)}function Q2(e,r){if(e==null)return{};var n,a,l=RH(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function RH(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var sP=/[ \f\n\r\t\v\u2028\u2029]+/,lP=e=>{var{children:r,breakAll:n,style:a}=e;try{var l=[];qt(r)||(n?l=r.toString().split(""):l=r.toString().split(sP));var o=l.map(d=>({word:d,width:$c(d,a).width})),u=n?0:$c("",a).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}};function IH(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var oP=(e,r,n,a)=>e.reduce((l,o)=>{var{word:u,width:d}=o,m=l[l.length-1];if(m&&d!=null&&(r==null||a||m.width+d+n<Number(r)))m.words.push(u),m.width+=d+n;else{var p={words:[u],width:d};l.push(p)}return l},[]),cP=e=>e.reduce((r,n)=>r.width>n.width?r:n),LH="",Y2=(e,r,n,a,l,o,u,d)=>{var m=e.slice(0,r),p=lP({breakAll:n,style:a,children:m+LH});if(!p)return[!1,[]];var h=oP(p.wordsWithComputedWidth,o,u,d),v=h.length>l||cP(h).width>Number(o);return[v,h]},$H=(e,r,n,a,l)=>{var{maxLines:o,children:u,style:d,breakAll:m}=e,p=De(o),h=String(u),v=oP(r,a,n,l);if(!p||l)return v;var b=v.length>o||cP(v).width>Number(a);if(!b)return v;for(var x=0,j=h.length-1,_=0,C;x<=j&&_<=h.length-1;){var w=Math.floor((x+j)/2),E=w-1,[S,A]=Y2(h,E,m,d,o,a,n,l),[z]=Y2(h,w,m,d,o,a,n,l);if(!S&&!z&&(x=w+1),S&&z&&(j=w-1),!S&&z){C=A;break}_++}return C||v},K2=e=>{var r=qt(e)?[]:e.toString().split(sP);return[{words:r,width:void 0}]},BH=e=>{var{width:r,scaleToFit:n,children:a,style:l,breakAll:o,maxLines:u}=e;if((r||n)&&!Xf.isSsr){var d,m,p=lP({breakAll:o,children:a,style:l});if(p){var{wordsWithComputedWidth:h,spaceWidth:v}=p;d=h,m=v}else return K2(a);return $H({breakAll:o,children:a,maxLines:u,style:l},d,m,r,!!n)}return K2(a)},uP="#808080",UH={angle:0,breakAll:!1,capHeight:"0.71em",fill:uP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},xj=g.forwardRef((e,r)=>{var n=Hr(e,UH),{x:a,y:l,lineHeight:o,capHeight:u,fill:d,scaleToFit:m,textAnchor:p,verticalAnchor:h}=n,v=Q2(n,TH),b=g.useMemo(()=>BH({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:m,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,m,v.style,v.width]),{dx:x,dy:j,angle:_,className:C,breakAll:w}=v,E=Q2(v,qH);if(!Na(a)||!Na(l)||b.length===0)return null;var S=Number(a)+(De(x)?x:0),A=Number(l)+(De(j)?j:0);if(!st(S)||!st(A))return null;var z;switch(h){case"start":z=px("calc(".concat(u,")"));break;case"middle":z=px("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:z=px("calc(".concat(b.length-1," * -").concat(o,")"));break}var k=[],M=b[0];if(m&&M!=null){var D=M.width,{width:$}=v;k.push("scale(".concat(De($)&&De(D)?$/D:1,")"))}return _&&k.push("rotate(".concat(_,", ").concat(S,", ").concat(A,")")),k.length&&(E.transform=k.join(" ")),g.createElement("text",Cb({},Ur(E),{ref:r,x:S,y:A,className:Nt("recharts-text",C),textAnchor:p,fill:d.includes("url")?uP:d}),b.map((B,H)=>{var T=B.words.join(w?"":" ");return g.createElement("tspan",{x:S,dy:H===0?z:o,key:"".concat(T,"-").concat(H)},T)}))});xj.displayName="Text";function W2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function pa(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?W2(Object(n),!0).forEach(function(a){FH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FH(e,r,n){return(r=GH(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function GH(e){var r=HH(e,"string");return typeof r=="symbol"?r:r+""}function HH(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var VH=e=>{var{viewBox:r,position:n,offset:a=0,parentViewBox:l}=e,{x:o,y:u,height:d,upperWidth:m,lowerWidth:p}=vy(r),h=o,v=o+(m-p)/2,b=(h+v)/2,x=(m+p)/2,j=h+m/2,_=d>=0?1:-1,C=_*a,w=_>0?"end":"start",E=_>0?"start":"end",S=m>=0?1:-1,A=S*a,z=S>0?"end":"start",k=S>0?"start":"end",M=l;if(n==="top"){var D={x:h+m/2,y:u-C,horizontalAnchor:"middle",verticalAnchor:w};return M&&(D.height=Math.max(u-M.y,0),D.width=m),D}if(n==="bottom"){var $={x:v+p/2,y:u+d+C,horizontalAnchor:"middle",verticalAnchor:E};return M&&($.height=Math.max(M.y+M.height-(u+d),0),$.width=p),$}if(n==="left"){var B={x:b-A,y:u+d/2,horizontalAnchor:z,verticalAnchor:"middle"};return M&&(B.width=Math.max(B.x-M.x,0),B.height=d),B}if(n==="right"){var H={x:b+x+A,y:u+d/2,horizontalAnchor:k,verticalAnchor:"middle"};return M&&(H.width=Math.max(M.x+M.width-H.x,0),H.height=d),H}var T=M?{width:x,height:d}:{};return n==="insideLeft"?pa({x:b+A,y:u+d/2,horizontalAnchor:k,verticalAnchor:"middle"},T):n==="insideRight"?pa({x:b+x-A,y:u+d/2,horizontalAnchor:z,verticalAnchor:"middle"},T):n==="insideTop"?pa({x:h+m/2,y:u+C,horizontalAnchor:"middle",verticalAnchor:E},T):n==="insideBottom"?pa({x:v+p/2,y:u+d-C,horizontalAnchor:"middle",verticalAnchor:w},T):n==="insideTopLeft"?pa({x:h+A,y:u+C,horizontalAnchor:k,verticalAnchor:E},T):n==="insideTopRight"?pa({x:h+m-A,y:u+C,horizontalAnchor:z,verticalAnchor:E},T):n==="insideBottomLeft"?pa({x:v+A,y:u+d-C,horizontalAnchor:k,verticalAnchor:w},T):n==="insideBottomRight"?pa({x:v+p-A,y:u+d-C,horizontalAnchor:z,verticalAnchor:w},T):n&&typeof n=="object"&&(De(n.x)||Qs(n.x))&&(De(n.y)||Qs(n.y))?pa({x:o+ta(n.x,x),y:u+ta(n.y,d),horizontalAnchor:"end",verticalAnchor:"end"},T):pa({x:j,y:u+d/2,horizontalAnchor:"middle",verticalAnchor:"middle"},T)},QH=["labelRef"],YH=["content"];function X2(e,r){if(e==null)return{};var n,a,l=KH(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function KH(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Z2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Ic(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Z2(Object(n),!0).forEach(function(a){WH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function WH(e,r,n){return(r=XH(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function XH(e){var r=ZH(e,"string");return typeof r=="symbol"?r:r+""}function ZH(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ya.apply(null,arguments)}var dP=g.createContext(null),JH=e=>{var{x:r,y:n,upperWidth:a,lowerWidth:l,width:o,height:u,children:d}=e,m=g.useMemo(()=>({x:r,y:n,upperWidth:a,lowerWidth:l,width:o,height:u}),[r,n,a,l,o,u]);return g.createElement(dP.Provider,{value:m},d)},mP=()=>{var e=g.useContext(dP),r=Qf();return e||(r?vy(r):void 0)},eV=g.createContext(null),tV=()=>{var e=g.useContext(eV),r=Ie(UO);return e||r},rV=e=>{var{value:r,formatter:n}=e,a=qt(e.children)?r:e.children;return typeof n=="function"?n(a):a},bj=e=>e!=null&&typeof e=="function",nV=(e,r)=>{var n=tn(r-e),a=Math.min(Math.abs(r-e),360);return n*a},aV=(e,r,n,a,l)=>{var{offset:o,className:u}=e,{cx:d,cy:m,innerRadius:p,outerRadius:h,startAngle:v,endAngle:b,clockWise:x}=l,j=(p+h)/2,_=nV(v,b),C=_>=0?1:-1,w,E;switch(r){case"insideStart":w=v+C*o,E=x;break;case"insideEnd":w=b-C*o,E=!x;break;case"end":w=b+C*o,E=x;break;default:throw new Error("Unsupported position ".concat(r))}E=_<=0?E:!E;var S=zr(d,m,j,w),A=zr(d,m,j,w+(E?1:-1)*359),z="M".concat(S.x,",").concat(S.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(A.x,",").concat(A.y),k=qt(e.id)?Gc("recharts-radial-line-"):e.id;return g.createElement("text",Ya({},a,{dominantBaseline:"central",className:Nt("recharts-radial-bar-label",u)}),g.createElement("defs",null,g.createElement("path",{id:k,d:z})),g.createElement("textPath",{xlinkHref:"#".concat(k)},n))},iV=(e,r,n)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:u,startAngle:d,endAngle:m}=e,p=(d+m)/2;if(n==="outside"){var{x:h,y:v}=zr(a,l,u+r,p);return{x:h,y:v,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(o+u)/2,{x,y:j}=zr(a,l,b,p);return{x,y:j,textAnchor:"middle",verticalAnchor:"middle"}},hm=e=>e!=null&&"cx"in e&&De(e.cx),sV={angle:0,offset:5,zIndex:gr.label,position:"middle",textBreakAll:!1};function lV(e){if(!hm(e))return e;var{cx:r,cy:n,outerRadius:a}=e,l=a*2;return{x:r-a,y:n-a,width:l,upperWidth:l,lowerWidth:l,height:l}}function Vi(e){var r=Hr(e,sV),{viewBox:n,parentViewBox:a,position:l,value:o,children:u,content:d,className:m="",textBreakAll:p,labelRef:h}=r,v=tV(),b=mP(),x=l==="center"?b:v??b,j,_,C;n==null?j=x:hm(n)?j=n:j=vy(n);var w=lV(j);if(!j||qt(o)&&qt(u)&&!g.isValidElement(d)&&typeof d!="function")return null;var E=Ic(Ic({},r),{},{viewBox:j});if(g.isValidElement(d)){var{labelRef:S}=E,A=X2(E,QH);return g.cloneElement(d,A)}if(typeof d=="function"){var{content:z}=E,k=X2(E,YH);if(_=g.createElement(d,k),g.isValidElement(_))return _}else _=rV(r);var M=Ur(r);if(hm(j)){if(l==="insideStart"||l==="insideEnd"||l==="end")return aV(r,l,_,M,j);C=iV(j,r.offset,r.position)}else{if(!w)return null;var D=VH({viewBox:w,position:l,offset:r.offset,parentViewBox:hm(a)?void 0:a});C=Ic(Ic({x:D.x,y:D.y,textAnchor:D.horizontalAnchor,verticalAnchor:D.verticalAnchor},D.width!==void 0?{width:D.width}:{}),D.height!==void 0?{height:D.height}:{})}return g.createElement(Gn,{zIndex:r.zIndex},g.createElement(xj,Ya({ref:h,className:Nt("recharts-label",m)},M,C,{textAnchor:IH(M.textAnchor)?M.textAnchor:C.textAnchor,breakAll:p}),_))}Vi.displayName="Label";var oV=(e,r,n)=>{if(!e)return null;var a={viewBox:r,labelRef:n};return e===!0?g.createElement(Vi,Ya({key:"label-implicit"},a)):Na(e)?g.createElement(Vi,Ya({key:"label-implicit",value:e},a)):g.isValidElement(e)?e.type===Vi?g.cloneElement(e,Ic({key:"label-implicit"},a)):g.createElement(Vi,Ya({key:"label-implicit",content:e},a)):bj(e)?g.createElement(Vi,Ya({key:"label-implicit",content:e},a)):e&&typeof e=="object"?g.createElement(Vi,Ya({},e,{key:"label-implicit"},a)):null};function cV(e){var{label:r,labelRef:n}=e,a=mP();return oV(r,a,n)||null}var hx={},vx={},J2;function uV(){return J2||(J2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n[n.length-1]}e.last=r})(vx)),vx}var gx={},eE;function dV(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=r})(gx)),gx}var tE;function mV(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=uV(),n=dV(),a=iy();function l(o){if(a.isArrayLike(o))return r.last(n.toArray(o))}e.last=l})(hx)),hx}var xx,rE;function fV(){return rE||(rE=1,xx=mV().last),xx}var pV=fV();const hV=oi(pV);var vV=["valueAccessor"],gV=["dataKey","clockWise","id","textBreakAll","zIndex"];function uf(){return uf=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},uf.apply(null,arguments)}function nE(e,r){if(e==null)return{};var n,a,l=xV(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function xV(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var bV=e=>Array.isArray(e.value)?hV(e.value):e.value,fP=g.createContext(void 0),pP=fP.Provider,hP=g.createContext(void 0);hP.Provider;function yV(){return g.useContext(fP)}function jV(){return g.useContext(hP)}function vm(e){var{valueAccessor:r=bV}=e,n=nE(e,vV),{dataKey:a,clockWise:l,id:o,textBreakAll:u,zIndex:d}=n,m=nE(n,gV),p=yV(),h=jV(),v=p||h;return!v||!v.length?null:g.createElement(Gn,{zIndex:d??gr.label},g.createElement(In,{className:"recharts-label-list"},v.map((b,x)=>{var j,_=qt(a)?r(b,x):er(b.payload,a),C=qt(o)?{}:{id:"".concat(o,"-").concat(x)};return g.createElement(Vi,uf({key:"label-".concat(x)},Ur(b),m,C,{fill:(j=n.fill)!==null&&j!==void 0?j:b.fill,parentViewBox:b.parentViewBox,value:_,textBreakAll:u,viewBox:b.viewBox,index:x,zIndex:0}))})))}vm.displayName="LabelList";function vP(e){var{label:r}=e;return r?r===!0?g.createElement(vm,{key:"labelList-implicit"}):g.isValidElement(r)||bj(r)?g.createElement(vm,{key:"labelList-implicit",content:r}):typeof r=="object"?g.createElement(vm,uf({key:"labelList-implicit"},r,{type:String(r.type)})):null:null}function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Eb.apply(null,arguments)}var gP=e=>{var{cx:r,cy:n,r:a,className:l}=e,o=Nt("recharts-dot",l);return De(r)&&De(n)&&De(a)?g.createElement("circle",Eb({},ea(e),ny(e),{className:o,cx:r,cy:n,r:a})):null},_V={radiusAxis:{},angleAxis:{}},xP=an({name:"polarAxis",initialState:_V,reducers:{addRadiusAxis(e,r){e.radiusAxis[r.payload.id]=r.payload},removeRadiusAxis(e,r){delete e.radiusAxis[r.payload.id]},addAngleAxis(e,r){e.angleAxis[r.payload.id]=r.payload},removeAngleAxis(e,r){delete e.angleAxis[r.payload.id]}}}),{addRadiusAxis:Wte,removeRadiusAxis:Xte,addAngleAxis:Zte,removeAngleAxis:Jte}=xP.actions,NV=xP.reducer;function SV(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var bx={exports:{}},_t={};var aE;function wV(){if(aE)return _t;aE=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function j(_){if(typeof _=="object"&&_!==null){var C=_.$$typeof;switch(C){case e:switch(_=_.type,_){case n:case l:case a:case m:case p:case b:return _;default:switch(_=_&&_.$$typeof,_){case u:case d:case v:case h:return _;case o:return _;default:return C}}case r:return C}}}return _t.ContextConsumer=o,_t.ContextProvider=u,_t.Element=e,_t.ForwardRef=d,_t.Fragment=n,_t.Lazy=v,_t.Memo=h,_t.Portal=r,_t.Profiler=l,_t.StrictMode=a,_t.Suspense=m,_t.SuspenseList=p,_t.isContextConsumer=function(_){return j(_)===o},_t.isContextProvider=function(_){return j(_)===u},_t.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===e},_t.isForwardRef=function(_){return j(_)===d},_t.isFragment=function(_){return j(_)===n},_t.isLazy=function(_){return j(_)===v},_t.isMemo=function(_){return j(_)===h},_t.isPortal=function(_){return j(_)===r},_t.isProfiler=function(_){return j(_)===l},_t.isStrictMode=function(_){return j(_)===a},_t.isSuspense=function(_){return j(_)===m},_t.isSuspenseList=function(_){return j(_)===p},_t.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===n||_===l||_===a||_===m||_===p||typeof _=="object"&&_!==null&&(_.$$typeof===v||_.$$typeof===h||_.$$typeof===u||_.$$typeof===o||_.$$typeof===d||_.$$typeof===x||_.getModuleId!==void 0)},_t.typeOf=j,_t}var iE;function CV(){return iE||(iE=1,bx.exports=wV()),bx.exports}var EV=CV(),sE=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",lE=null,yx=null,bP=e=>{if(e===lE&&Array.isArray(yx))return yx;var r=[];return g.Children.forEach(e,n=>{qt(n)||(EV.isFragment(n)?r=r.concat(bP(n.props.children)):r.push(n))}),yx=r,lE=e,r};function AV(e,r){var n=[],a=[];return Array.isArray(r)?a=r.map(l=>sE(l)):a=[sE(r)],bP(e).forEach(l=>{var o=po(l,"type.displayName")||po(l,"type.name");o&&a.indexOf(o)!==-1&&n.push(l)}),n}var yP=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,jx={},oE;function zV(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const l=n[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${l}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=r})(jx)),jx}var _x,cE;function kV(){return cE||(cE=1,_x=zV().isPlainObject),_x}var OV=kV();const DV=oi(OV);var uE,dE,mE,fE,pE;function hE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function vE(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?hE(Object(n),!0).forEach(function(a){PV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function PV(e,r,n){return(r=MV(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function MV(e){var r=TV(e,"string");return typeof r=="symbol"?r:r+""}function TV(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function df(){return df=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},df.apply(null,arguments)}function Oc(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var gE=(e,r,n,a,l)=>{var o=n-a,u;return u=Ut(uE||(uE=Oc(["M ",",",""])),e,r),u+=Ut(dE||(dE=Oc(["L ",",",""])),e+n,r),u+=Ut(mE||(mE=Oc(["L ",",",""])),e+n-o/2,r+l),u+=Ut(fE||(fE=Oc(["L ",",",""])),e+n-o/2-a,r+l),u+=Ut(pE||(pE=Oc(["L ",","," Z"])),e,r),u},qV={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RV=e=>{var r=Hr(e,qV),{x:n,y:a,upperWidth:l,lowerWidth:o,height:u,className:d}=r,{animationEasing:m,animationDuration:p,animationBegin:h,isUpdateAnimationActive:v}=r,b=g.useRef(null),[x,j]=g.useState(-1),_=g.useRef(l),C=g.useRef(o),w=g.useRef(u),E=g.useRef(n),S=g.useRef(a),A=Jf(e,"trapezoid-");if(g.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var J=b.current.getTotalLength();J&&j(J)}catch{}},[]),n!==+n||a!==+a||l!==+l||o!==+o||u!==+u||l===0&&o===0||u===0)return null;var z=Nt("recharts-trapezoid",d);if(!v)return g.createElement("g",null,g.createElement("path",df({},Ur(r),{className:z,d:gE(n,a,l,o,u)})));var k=_.current,M=C.current,D=w.current,$=E.current,B=S.current,H="0px ".concat(x===-1?1:x,"px"),T="".concat(x,"px 0px"),Y=Mk(["strokeDasharray"],p,m);return g.createElement(Zf,{animationId:A,key:A,canBegin:x>0,duration:p,easing:m,isActive:v,begin:h},J=>{var P=Ft(k,l,J),q=Ft(M,o,J),U=Ft(D,u,J),I=Ft($,n,J),te=Ft(B,a,J);b.current&&(_.current=P,C.current=q,w.current=U,E.current=I,S.current=te);var L=J>0?{transition:Y,strokeDasharray:T}:{strokeDasharray:H};return g.createElement("path",df({},Ur(r),{className:z,d:gE(I,te,P,q,U),ref:b,style:vE(vE({},L),r.style)}))})},IV=["option","shapeType","activeClassName"];function LV(e,r){if(e==null)return{};var n,a,l=$V(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function $V(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function xE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function mf(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?xE(Object(n),!0).forEach(function(a){BV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function BV(e,r,n){return(r=UV(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function UV(e){var r=FV(e,"string");return typeof r=="symbol"?r:r+""}function FV(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function GV(e,r){return mf(mf({},r),e)}function HV(e,r){return e==="symbols"}function bE(e){var{shapeType:r,elementProps:n}=e;switch(r){case"rectangle":return g.createElement(Ik,n);case"trapezoid":return g.createElement(RV,n);case"sector":return g.createElement(Bk,n);case"symbols":if(HV(r))return g.createElement(Sz,n);break;case"curve":return g.createElement(Pk,n);default:return null}}function VV(e){return g.isValidElement(e)?e.props:e}function jP(e){var{option:r,shapeType:n,activeClassName:a="recharts-active-shape"}=e,l=LV(e,IV),o;if(g.isValidElement(r))o=g.cloneElement(r,mf(mf({},l),VV(r)));else if(typeof r=="function")o=r(l,l.index);else if(DV(r)&&typeof r!="boolean"){var u=GV(r,l);o=g.createElement(bE,{shapeType:n,elementProps:u})}else{var d=l;o=g.createElement(bE,{shapeType:n,elementProps:d})}return l.isActive?g.createElement(In,{className:a},o):o}var _P=(e,r,n)=>{var a=Qt();return(l,o)=>u=>{e?.(l,o,u),a(OD({activeIndex:String(o),activeDataKey:r,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}},NP=e=>{var r=Qt();return(n,a)=>l=>{e?.(n,a,l),r(oF())}},SP=(e,r,n)=>{var a=Qt();return(l,o)=>u=>{e?.(l,o,u),a(cF({activeIndex:String(o),activeDataKey:r,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}};function wP(e){var{tooltipEntrySettings:r}=e,n=Qt(),a=Rr(),l=g.useRef(null);return g.useLayoutEffect(()=>{a||(l.current===null?n(aF(r)):l.current!==r&&n(iF({prev:l.current,next:r})),l.current=r)},[r,n,a]),g.useLayoutEffect(()=>()=>{l.current&&(n(sF(l.current)),l.current=null)},[n]),null}function CP(e){var{legendPayload:r}=e,n=Qt(),a=Rr(),l=g.useRef(null);return g.useLayoutEffect(()=>{a||(l.current===null?n(I8(r)):l.current!==r&&n(L8({prev:l.current,next:r})),l.current=r)},[n,a,r]),g.useLayoutEffect(()=>()=>{l.current&&(n($8(l.current)),l.current=null)},[n]),null}var Nx,QV=()=>{var[e]=g.useState(()=>Gc("uid-"));return e},YV=(Nx=Kq.useId)!==null&&Nx!==void 0?Nx:QV;function KV(e,r){var n=YV();return r||(e?"".concat(e,"-").concat(n):n)}var WV=g.createContext(void 0),EP=e=>{var{id:r,type:n,children:a}=e,l=KV("recharts-".concat(n),r);return g.createElement(WV.Provider,{value:l},a(l))},XV={cartesianItems:[],polarItems:[]},AP=an({name:"graphicalItems",initialState:XV,reducers:{addCartesianGraphicalItem:{reducer(e,r){e.cartesianItems.push(r.payload)},prepare:Mt()},replaceCartesianGraphicalItem:{reducer(e,r){var{prev:n,next:a}=r.payload,l=Jn(e).cartesianItems.indexOf(n);l>-1&&(e.cartesianItems[l]=a)},prepare:Mt()},removeCartesianGraphicalItem:{reducer(e,r){var n=Jn(e).cartesianItems.indexOf(r.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Mt()},addPolarGraphicalItem:{reducer(e,r){e.polarItems.push(r.payload)},prepare:Mt()},removePolarGraphicalItem:{reducer(e,r){var n=Jn(e).polarItems.indexOf(r.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Mt()}}}),{addCartesianGraphicalItem:ZV,replaceCartesianGraphicalItem:JV,removeCartesianGraphicalItem:eQ,addPolarGraphicalItem:ere,removePolarGraphicalItem:tre}=AP.actions,tQ=AP.reducer,rQ=e=>{var r=Qt(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?r(ZV(e)):n.current!==e&&r(JV({prev:n.current,next:e})),n.current=e},[r,e]),g.useLayoutEffect(()=>()=>{n.current&&(r(eQ(n.current)),n.current=null)},[r]),null},zP=g.memo(rQ),nQ=["points"];function yE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Sx(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?yE(Object(n),!0).forEach(function(a){aQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aQ(e,r,n){return(r=iQ(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function iQ(e){var r=sQ(e,"string");return typeof r=="symbol"?r:r+""}function sQ(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ff.apply(null,arguments)}function lQ(e,r){if(e==null)return{};var n,a,l=oQ(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function oQ(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function cQ(e){var{option:r,dotProps:n,className:a}=e;if(g.isValidElement(r))return g.cloneElement(r,n);if(typeof r=="function")return r(n);var l=Nt(a,typeof r!="boolean"?r.className:""),o=n??{},{points:u}=o,d=lQ(o,nQ);return g.createElement(gP,ff({},d,{className:l}))}function uQ(e,r){return e==null?!1:r?!0:e.length===1}function dQ(e){var{points:r,dot:n,className:a,dotClassName:l,dataKey:o,baseProps:u,needClip:d,clipPathId:m,zIndex:p=gr.scatter}=e;if(!uQ(r,n))return null;var h=yP(n),v=zI(n),b=r.map((j,_)=>{var C,w,E=Sx(Sx(Sx({r:3},u),v),{},{index:_,cx:(C=j.x)!==null&&C!==void 0?C:void 0,cy:(w=j.y)!==null&&w!==void 0?w:void 0,dataKey:o,value:j.value,payload:j.payload,points:r});return g.createElement(cQ,{key:"dot-".concat(_),option:n,dotProps:E,className:l})}),x={};return d&&m!=null&&(x.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(m,")")),g.createElement(Gn,{zIndex:p},g.createElement(In,ff({className:a},x),b))}function jE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function _E(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?jE(Object(n),!0).forEach(function(a){mQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mQ(e,r,n){return(r=fQ(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function fQ(e){var r=pQ(e,"string");return typeof r=="symbol"?r:r+""}function pQ(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var kP=0,hQ={xAxis:{},yAxis:{},zAxis:{}},OP=an({name:"cartesianAxis",initialState:hQ,reducers:{addXAxis:{reducer(e,r){e.xAxis[r.payload.id]=r.payload},prepare:Mt()},replaceXAxis:{reducer(e,r){var{prev:n,next:a}=r.payload;e.xAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:Mt()},removeXAxis:{reducer(e,r){delete e.xAxis[r.payload.id]},prepare:Mt()},addYAxis:{reducer(e,r){e.yAxis[r.payload.id]=r.payload},prepare:Mt()},replaceYAxis:{reducer(e,r){var{prev:n,next:a}=r.payload;e.yAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:Mt()},removeYAxis:{reducer(e,r){delete e.yAxis[r.payload.id]},prepare:Mt()},addZAxis:{reducer(e,r){e.zAxis[r.payload.id]=r.payload},prepare:Mt()},replaceZAxis:{reducer(e,r){var{prev:n,next:a}=r.payload;e.zAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:Mt()},removeZAxis:{reducer(e,r){delete e.zAxis[r.payload.id]},prepare:Mt()},updateYAxisWidth(e,r){var{id:n,width:a}=r.payload,l=e.yAxis[n];if(l){var o,u=l.widthHistory||[];if(u.length===3&&u[0]===u[2]&&a===u[1]&&a!==l.width&&Math.abs(a-((o=u[0])!==null&&o!==void 0?o:0))<=1)return;var d=[...u,a].slice(-3);e.yAxis[n]=_E(_E({},l),{},{width:a,widthHistory:d})}}}}),{addXAxis:vQ,replaceXAxis:gQ,removeXAxis:xQ,addYAxis:bQ,replaceYAxis:yQ,removeYAxis:jQ,addZAxis:rre,replaceZAxis:nre,removeZAxis:are,updateYAxisWidth:_Q}=OP.actions,NQ=OP.reducer,SQ=me([xr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),wQ=me([SQ,ui,di],(e,r,n)=>{if(!(!e||r==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,r-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),yj=()=>Ie(wQ),CQ=()=>Ie(ZF);function NE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function wx(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?NE(Object(n),!0).forEach(function(a){EQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function EQ(e,r,n){return(r=AQ(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function AQ(e){var r=zQ(e,"string");return typeof r=="symbol"?r:r+""}function zQ(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var kQ=e=>{var{point:r,childIndex:n,mainColor:a,activeDot:l,dataKey:o,clipPath:u}=e;if(l===!1||r.x==null||r.y==null)return null;var d={index:n,dataKey:o,cx:r.x,cy:r.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},m=wx(wx(wx({},d),uu(l)),ny(l)),p;return g.isValidElement(l)?p=g.cloneElement(l,m):typeof l=="function"?p=l(m):p=g.createElement(gP,m),g.createElement(In,{className:"recharts-active-dot",clipPath:u},p)};function OQ(e){var{points:r,mainColor:n,activeDot:a,itemDataKey:l,clipPath:o,zIndex:u=gr.activeDot}=e,d=Ie(Zs),m=CQ();if(r==null||m==null)return null;var p=r.find(h=>m.includes(h.payload));return qt(p)?null:g.createElement(Gn,{zIndex:u},g.createElement(kQ,{point:p,childIndex:Number(d),mainColor:n,dataKey:l,activeDot:a,clipPath:o}))}var SE=(e,r,n)=>{var a=n??e;if(!qt(a))return ta(a,r,0)},DQ=(e,r,n)=>{var a={},l=e.filter(dp),o=e.filter(p=>p.stackId==null),u=l.reduce((p,h)=>{var v=p[h.stackId];return v==null&&(v=[]),v.push(h),p[h.stackId]=v,p},a),d=Object.entries(u).map(p=>{var h,[v,b]=p,x=b.map(_=>_.dataKey),j=SE(r,n,(h=b[0])===null||h===void 0?void 0:h.barSize);return{stackId:v,dataKeys:x,barSize:j}}),m=o.map(p=>{var h=[p.dataKey].filter(b=>b!=null),v=SE(r,n,p.barSize);return{stackId:void 0,dataKeys:h,barSize:v}});return[...d,...m]};function wE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function am(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?wE(Object(n),!0).forEach(function(a){PQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function PQ(e,r,n){return(r=MQ(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function MQ(e){var r=TQ(e,"string");return typeof r=="symbol"?r:r+""}function TQ(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function qQ(e,r,n,a,l){var o,u=a.length;if(!(u<1)){var d=ta(e,n,0,!0),m,p=[];if(st((o=a[0])===null||o===void 0?void 0:o.barSize)){var h=!1,v=n/u,b=a.reduce((E,S)=>E+(S.barSize||0),0);b+=(u-1)*d,b>=n&&(b-=(u-1)*d,d=0),b>=n&&v>0&&(h=!0,v*=.9,b=u*v);var x=(n-b)/2>>0,j={offset:x-d,size:0};m=a.reduce((E,S)=>{var A,z={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:j.offset+j.size+d,size:h?v:(A=S.barSize)!==null&&A!==void 0?A:0}},k=[...E,z];return j=z.position,k},p)}else{var _=ta(r,n,0,!0);n-2*_-(u-1)*d<=0&&(d=0);var C=(n-2*_-(u-1)*d)/u;C>1&&(C>>=0);var w=st(l)?Math.min(C,l):C;m=a.reduce((E,S,A)=>[...E,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:_+(C+d)*A+(C-w)/2,size:w}}],p)}return m}}var RQ=(e,r,n,a,l,o,u)=>{var d=qt(u)?r:u,m=qQ(n,a,l!==o?l:o,e,d);return l!==o&&m!=null&&(m=m.map(p=>am(am({},p),{},{position:am(am({},p.position),{},{offset:p.position.offset-l/2})}))),m},IQ=(e,r)=>{var n=Xy(r);if(!(!e||n==null||r==null)){var{stackId:a}=r;if(a!=null){var l=e[a];if(l){var{stackedData:o}=l;if(o)return o.find(u=>u.key===n)}}}},LQ=(e,r)=>{if(!(e==null||r==null)){var n=e.find(a=>a.stackId===r.stackId&&r.dataKey!=null&&a.dataKeys.includes(r.dataKey));if(n!=null)return n.position}};function $Q(e,r){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&st(e.zIndex)?e.zIndex:r}var BQ=e=>{var{chartData:r}=e,n=Qt(),a=Rr();return g.useEffect(()=>a?()=>{}:(n(M2(r)),()=>{n(M2(void 0))}),[r,n,a]),null},CE={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},DP=an({name:"brush",initialState:CE,reducers:{setBrushSettings(e,r){return r.payload==null?CE:r.payload}}}),{setBrushSettings:ire}=DP.actions,UQ=DP.reducer;function FQ(e){return(e%180+180)%180}var GQ=function(r){var{width:n,height:a}=r,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=FQ(l),u=o*Math.PI/180,d=Math.atan(a/n),m=u>d&&u<Math.PI-d?a/Math.sin(u):n/Math.cos(u);return Math.abs(m)},HQ={dots:[],areas:[],lines:[]},PP=an({name:"referenceElements",initialState:HQ,reducers:{addDot:(e,r)=>{e.dots.push(r.payload)},removeDot:(e,r)=>{var n=Jn(e).dots.findIndex(a=>a===r.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,r)=>{e.areas.push(r.payload)},removeArea:(e,r)=>{var n=Jn(e).areas.findIndex(a=>a===r.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,r)=>{e.lines.push(r.payload)},removeLine:(e,r)=>{var n=Jn(e).lines.findIndex(a=>a===r.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:sre,removeDot:lre,addArea:ore,removeArea:cre,addLine:ure,removeLine:dre}=PP.actions,VQ=PP.reducer,QQ=g.createContext(void 0),YQ=e=>{var{children:r}=e,[n]=g.useState("".concat(Gc("recharts"),"-clip")),a=yj();if(a==null)return null;var{x:l,y:o,width:u,height:d}=a;return g.createElement(QQ.Provider,{value:n},g.createElement("defs",null,g.createElement("clipPath",{id:n},g.createElement("rect",{x:l,y:o,height:d,width:u}))),r)};function MP(e,r){if(r<1)return[];if(r===1)return e;for(var n=[],a=0;a<e.length;a+=r){var l=e[a];l!==void 0&&n.push(l)}return n}function KQ(e,r,n){var a={width:e.width+r.width,height:e.height+r.height};return GQ(a,n)}function WQ(e,r,n){var a=n==="width",{x:l,y:o,width:u,height:d}=e;return r===1?{start:a?l:o,end:a?l+u:o+d}:{start:a?l+u:o+d,end:a?l:o}}function au(e,r,n,a,l){if(e*r<e*a||e*r>e*l)return!1;var o=n();return e*(r-e*o/2-a)>=0&&e*(r+e*o/2-l)<=0}function XQ(e,r){return MP(e,r+1)}function ZQ(e,r,n,a,l){for(var o=(a||[]).slice(),{start:u,end:d}=r,m=0,p=1,h=u,v=function(){var j=a?.[m];if(j===void 0)return{v:MP(a,p)};var _=m,C,w=()=>(C===void 0&&(C=n(j,_)),C),E=j.coordinate,S=m===0||au(e,E,w,h,d);S||(m=0,h=u,p+=1),S&&(h=E+e*(w()/2+l),m+=p)},b;p<=o.length;)if(b=v(),b)return b.v;return[]}function JQ(e,r,n,a,l){var o=(a||[]).slice(),u=o.length;if(u===0)return[];for(var{start:d,end:m}=r,p=1;p<=u;p++){for(var h=(u-1)%p,v=d,b=!0,x=function(){var A=a[_];if(A==null)return 0;var z=_,k,M=()=>(k===void 0&&(k=n(A,z)),k),D=A.coordinate,$=_===h||au(e,D,M,v,m);if(!$)return b=!1,1;$&&(v=D+e*(M()/2+l))},j,_=h;_<u&&(j=x(),!(j!==0&&j===1));_+=p);if(b){for(var C=[],w=h;w<u;w+=p){var E=a[w];E!=null&&C.push(E)}return C}}return[]}function EE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Tr(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?EE(Object(n),!0).forEach(function(a){eY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eY(e,r,n){return(r=tY(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function tY(e){var r=rY(e,"string");return typeof r=="symbol"?r:r+""}function rY(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function nY(e,r,n,a,l){for(var o=(a||[]).slice(),u=o.length,{start:d}=r,{end:m}=r,p=function(b){var x=o[b];if(x==null)return 1;var j=x,_,C=()=>(_===void 0&&(_=n(x,b)),_);if(b===u-1){var w=e*(j.coordinate+e*C()/2-m);o[b]=j=Tr(Tr({},j),{},{tickCoord:w>0?j.coordinate-w*e:j.coordinate})}else o[b]=j=Tr(Tr({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var E=au(e,j.tickCoord,C,d,m);E&&(m=j.tickCoord-e*(C()/2+l),o[b]=Tr(Tr({},j),{},{isShow:!0}))}},h=u-1;h>=0;h--)p(h);return o}function aY(e,r,n,a,l,o){var u=(a||[]).slice(),d=u.length,{start:m,end:p}=r;if(o){var h=a[d-1];if(h!=null){var v=n(h,d-1),b=e*(h.coordinate+e*v/2-p);if(u[d-1]=h=Tr(Tr({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate}),h.tickCoord!=null){var x=au(e,h.tickCoord,()=>v,m,p);x&&(p=h.tickCoord-e*(v/2+l),u[d-1]=Tr(Tr({},h),{},{isShow:!0}))}}}for(var j=o?d-1:d,_=function(E){var S=u[E];if(S==null)return 1;var A=S,z,k=()=>(z===void 0&&(z=n(S,E)),z);if(E===0){var M=e*(A.coordinate-e*k()/2-m);u[E]=A=Tr(Tr({},A),{},{tickCoord:M<0?A.coordinate-M*e:A.coordinate})}else u[E]=A=Tr(Tr({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var D=au(e,A.tickCoord,k,m,p);D&&(m=A.tickCoord+e*(k()/2+l),u[E]=Tr(Tr({},A),{},{isShow:!0}))}},C=0;C<j;C++)_(C);return u}function jj(e,r,n){var{tick:a,ticks:l,viewBox:o,minTickGap:u,orientation:d,interval:m,tickFormatter:p,unit:h,angle:v}=e;if(!l||!l.length||!a)return[];if(De(m)||Xf.isSsr){var b;return(b=XQ(l,De(m)?m:0))!==null&&b!==void 0?b:[]}var x=[],j=d==="top"||d==="bottom"?"width":"height",_=h&&j==="width"?$c(h,{fontSize:r,letterSpacing:n}):{width:0,height:0},C=(z,k)=>{var M=typeof p=="function"?p(z.value,k):z.value;return j==="width"?KQ($c(M,{fontSize:r,letterSpacing:n}),_,v):$c(M,{fontSize:r,letterSpacing:n})[j]},w=l[0],E=l[1],S=l.length>=2&&w!=null&&E!=null?tn(E.coordinate-w.coordinate):1,A=WQ(o,S,j);return m==="equidistantPreserveStart"?ZQ(S,A,C,l,u):m==="equidistantPreserveEnd"?JQ(S,A,C,l,u):(m==="preserveStart"||m==="preserveStartEnd"?x=aY(S,A,C,l,u,m==="preserveStartEnd"):x=nY(S,A,C,l,u),x.filter(z=>z.isShow))}var iY=e=>{var{ticks:r,label:n,labelGapWithTick:a=5,tickSize:l=0,tickMargin:o=0}=e,u=0;if(r){Array.from(r).forEach(h=>{if(h){var v=h.getBoundingClientRect();v.width>u&&(u=v.width)}});var d=n?n.getBoundingClientRect().width:0,m=l+o,p=u+m+d+(n?a:0);return Math.round(p)}return 0},sY=["axisLine","width","height","className","hide","ticks","axisType"];function lY(e,r){if(e==null)return{};var n,a,l=oY(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function oY(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Js.apply(null,arguments)}function AE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function $t(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?AE(Object(n),!0).forEach(function(a){cY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cY(e,r,n){return(r=uY(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function uY(e){var r=dY(e,"string");return typeof r=="symbol"?r:r+""}function dY(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var ei={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:gr.axis};function mY(e){var{x:r,y:n,width:a,height:l,orientation:o,mirror:u,axisLine:d,otherSvgProps:m}=e;if(!d)return null;var p=$t($t($t({},m),ea(d)),{},{fill:"none"});if(o==="top"||o==="bottom"){var h=+(o==="top"&&!u||o==="bottom"&&u);p=$t($t({},p),{},{x1:r,y1:n+h*l,x2:r+a,y2:n+h*l})}else{var v=+(o==="left"&&!u||o==="right"&&u);p=$t($t({},p),{},{x1:r+v*a,y1:n,x2:r+v*a,y2:n+l})}return g.createElement("line",Js({},p,{className:Nt("recharts-cartesian-axis-line",po(d,"className"))}))}function fY(e,r,n,a,l,o,u,d,m){var p,h,v,b,x,j,_=d?-1:1,C=e.tickSize||u,w=De(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":p=h=e.coordinate,b=n+ +!d*l,v=b-_*C,j=v-_*m,x=w;break;case"left":v=b=e.coordinate,h=r+ +!d*a,p=h-_*C,x=p-_*m,j=w;break;case"right":v=b=e.coordinate,h=r+ +d*a,p=h+_*C,x=p+_*m,j=w;break;default:p=h=e.coordinate,b=n+ +d*l,v=b+_*C,j=v+_*m,x=w;break}return{line:{x1:p,y1:v,x2:h,y2:b},tick:{x,y:j}}}function pY(e,r){switch(e){case"left":return r?"start":"end";case"right":return r?"end":"start";default:return"middle"}}function hY(e,r){switch(e){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}function vY(e){var{option:r,tickProps:n,value:a}=e,l,o=Nt(n.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(r))l=g.cloneElement(r,$t($t({},n),{},{className:o}));else if(typeof r=="function")l=r($t($t({},n),{},{className:o}));else{var u="recharts-cartesian-axis-tick-value";typeof r!="boolean"&&(u=Nt(u,SV(r))),l=g.createElement(xj,Js({},n,{className:u}),a)}return l}var gY=g.forwardRef((e,r)=>{var{ticks:n=[],tick:a,tickLine:l,stroke:o,tickFormatter:u,unit:d,padding:m,tickTextProps:p,orientation:h,mirror:v,x:b,y:x,width:j,height:_,tickSize:C,tickMargin:w,fontSize:E,letterSpacing:S,getTicksConfig:A,events:z,axisType:k}=e,M=jj($t($t({},A),{},{ticks:n}),E,S),D=pY(h,v),$=hY(h,v),B=ea(A),H=uu(a),T={};typeof l=="object"&&(T=l);var Y=$t($t({},B),{},{fill:"none"},T),J=M.map(U=>$t({entry:U},fY(U,b,x,j,_,h,C,v,w))),P=J.map(U=>{var{entry:I,line:te}=U;return g.createElement(In,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(I.value,"-").concat(I.coordinate,"-").concat(I.tickCoord)},l&&g.createElement("line",Js({},Y,te,{className:Nt("recharts-cartesian-axis-tick-line",po(l,"className"))})))}),q=J.map((U,I)=>{var te,L,{entry:Z,tick:W}=U,ce=$t($t($t($t({verticalAnchor:$},B),{},{textAnchor:D,stroke:"none",fill:o},W),{},{index:I,payload:Z,visibleTicksCount:M.length,tickFormatter:u,padding:m},p),{},{angle:(te=(L=p?.angle)!==null&&L!==void 0?L:B.angle)!==null&&te!==void 0?te:0}),xe=$t($t({},ce),H);return g.createElement(In,Js({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Z.value,"-").concat(Z.coordinate,"-").concat(Z.tickCoord)},ay(z,Z,I)),a&&g.createElement(vY,{option:a,tickProps:xe,value:"".concat(typeof u=="function"?u(Z.value,I):Z.value).concat(d||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},q.length>0&&g.createElement(Gn,{zIndex:gr.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:r},q)),P.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},P))}),xY=g.forwardRef((e,r)=>{var{axisLine:n,width:a,height:l,className:o,hide:u,ticks:d,axisType:m}=e,p=lY(e,sY),[h,v]=g.useState(""),[b,x]=g.useState(""),j=g.useRef(null);g.useImperativeHandle(r,()=>({getCalculatedWidth:()=>{var C;return iY({ticks:j.current,label:(C=e.labelRef)===null||C===void 0?void 0:C.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var _=g.useCallback(C=>{if(C){var w=C.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=w;var E=w[0];if(E){var S=window.getComputedStyle(E),A=S.fontSize,z=S.letterSpacing;(A!==h||z!==b)&&(v(A),x(z))}}},[h,b]);return u||a!=null&&a<=0||l!=null&&l<=0?null:g.createElement(Gn,{zIndex:e.zIndex},g.createElement(In,{className:Nt("recharts-cartesian-axis",o)},g.createElement(mY,{x:e.x,y:e.y,width:a,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:ea(e)}),g.createElement(gY,{ref:_,axisType:m,events:p,fontSize:h,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(JH,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(cV,{label:e.label,labelRef:e.labelRef}),e.children)))}),_j=g.forwardRef((e,r)=>{var n=Hr(e,ei);return g.createElement(xY,Js({},n,{ref:r}))});_j.displayName="CartesianAxis";var bY=["x1","y1","x2","y2","key"],yY=["offset"],jY=["xAxisId","yAxisId"],_Y=["xAxisId","yAxisId"];function zE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function qr(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?zE(Object(n),!0).forEach(function(a){NY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function NY(e,r,n){return(r=SY(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function SY(e){var r=wY(e,"string");return typeof r=="symbol"?r:r+""}function wY(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Is(){return Is=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Is.apply(null,arguments)}function pf(e,r){if(e==null)return{};var n,a,l=CY(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function CY(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var EY=e=>{var{fill:r}=e;if(!r||r==="none")return null;var{fillOpacity:n,x:a,y:l,width:o,height:u,ry:d}=e;return g.createElement("rect",{x:a,y:l,ry:d,width:o,height:u,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function TP(e){var{option:r,lineItemProps:n}=e,a;if(g.isValidElement(r))a=g.cloneElement(r,n);else if(typeof r=="function")a=r(n);else{var l,{x1:o,y1:u,x2:d,y2:m,key:p}=n,h=pf(n,bY),v=(l=ea(h))!==null&&l!==void 0?l:{},{offset:b}=v,x=pf(v,yY);a=g.createElement("line",Is({},x,{x1:o,y1:u,x2:d,y2:m,fill:"none",key:p}))}return a}function AY(e){var{x:r,width:n,horizontal:a=!0,horizontalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=pf(e,jY),m=l.map((p,h)=>{var v=qr(qr({},d),{},{x1:r,y1:p,x2:r+n,y2:p,key:"line-".concat(h),index:h});return g.createElement(TP,{key:"line-".concat(h),option:a,lineItemProps:v})});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function zY(e){var{y:r,height:n,vertical:a=!0,verticalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=pf(e,_Y),m=l.map((p,h)=>{var v=qr(qr({},d),{},{x1:p,y1:r,x2:p,y2:r+n,key:"line-".concat(h),index:h});return g.createElement(TP,{option:a,lineItemProps:v,key:"line-".concat(h)})});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function kY(e){var{horizontalFill:r,fillOpacity:n,x:a,y:l,width:o,height:u,horizontalPoints:d,horizontal:m=!0}=e;if(!m||!r||!r.length||d==null)return null;var p=d.map(v=>Math.round(v+l-l)).sort((v,b)=>v-b);l!==p[0]&&p.unshift(0);var h=p.map((v,b)=>{var x=p[b+1],j=x==null,_=j?l+u-v:x-v;if(_<=0)return null;var C=b%r.length;return g.createElement("rect",{key:"react-".concat(b),y:v,x:a,height:_,width:o,stroke:"none",fill:r[C],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function OY(e){var{vertical:r=!0,verticalFill:n,fillOpacity:a,x:l,y:o,width:u,height:d,verticalPoints:m}=e;if(!r||!n||!n.length)return null;var p=m.map(v=>Math.round(v+l-l)).sort((v,b)=>v-b);l!==p[0]&&p.unshift(0);var h=p.map((v,b)=>{var x=p[b+1],j=x==null,_=j?l+u-v:x-v;if(_<=0)return null;var C=b%n.length;return g.createElement("rect",{key:"react-".concat(b),x:v,y:o,width:_,height:d,stroke:"none",fill:n[C],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var DY=(e,r)=>{var{xAxis:n,width:a,height:l,offset:o}=e;return pk(jj(qr(qr(qr({},ei),n),{},{ticks:hk(n),viewBox:{x:0,y:0,width:a,height:l}})),o.left,o.left+o.width,r)},PY=(e,r)=>{var{yAxis:n,width:a,height:l,offset:o}=e;return pk(jj(qr(qr(qr({},ei),n),{},{ticks:hk(n),viewBox:{x:0,y:0,width:a,height:l}})),o.top,o.top+o.height,r)},MY={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:gr.grid};function Ab(e){var r=jk(),n=_k(),a=yk(),l=qr(qr({},Hr(e,MY)),{},{x:De(e.x)?e.x:a.left,y:De(e.y)?e.y:a.top,width:De(e.width)?e.width:a.width,height:De(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:u,x:d,y:m,width:p,height:h,syncWithTicks:v,horizontalValues:b,verticalValues:x}=l,j=Rr(),_=Ie($=>_2($,"xAxis",o,j)),C=Ie($=>_2($,"yAxis",u,j));if(!Sa(p)||!Sa(h)||!De(d)||!De(m))return null;var w=l.verticalCoordinatesGenerator||DY,E=l.horizontalCoordinatesGenerator||PY,{horizontalPoints:S,verticalPoints:A}=l;if((!S||!S.length)&&typeof E=="function"){var z=b&&b.length,k=E({yAxis:C?qr(qr({},C),{},{ticks:z?b:C.ticks}):void 0,width:r??p,height:n??h,offset:a},z?!0:v);Lm(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(S=k)}if((!A||!A.length)&&typeof w=="function"){var M=x&&x.length,D=w({xAxis:_?qr(qr({},_),{},{ticks:M?x:_.ticks}):void 0,width:r??p,height:n??h,offset:a},M?!0:v);Lm(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(A=D)}return g.createElement(Gn,{zIndex:l.zIndex},g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(EY,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),g.createElement(kY,Is({},l,{horizontalPoints:S})),g.createElement(OY,Is({},l,{verticalPoints:A})),g.createElement(AY,Is({},l,{offset:a,horizontalPoints:S,xAxis:_,yAxis:C})),g.createElement(zY,Is({},l,{offset:a,verticalPoints:A,xAxis:_,yAxis:C}))))}Ab.displayName="CartesianGrid";var TY={},qP=an({name:"errorBars",initialState:TY,reducers:{addErrorBar:(e,r)=>{var{itemId:n,errorBar:a}=r.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,r)=>{var{itemId:n,prev:a,next:l}=r.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,r)=>{var{itemId:n,errorBar:a}=r.payload;e[n]&&(e[n]=e[n].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:mre,replaceErrorBar:fre,removeErrorBar:pre}=qP.actions,qY=qP.reducer,RY=["children"];function IY(e,r){if(e==null)return{};var n,a,l=LY(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function LY(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var $Y={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},BY=g.createContext($Y);function RP(e){var{children:r}=e,n=IY(e,RY);return g.createElement(BY.Provider,{value:n},r)}function Nj(e,r){var n,a,l=Ie(p=>pi(p,e)),o=Ie(p=>hi(p,r)),u=(n=l?.allowDataOverflow)!==null&&n!==void 0?n:dr.allowDataOverflow,d=(a=o?.allowDataOverflow)!==null&&a!==void 0?a:mr.allowDataOverflow,m=u||d;return{needClip:m,needClipX:u,needClipY:d}}function IP(e){var{xAxisId:r,yAxisId:n,clipPathId:a}=e,l=yj(),{needClipX:o,needClipY:u,needClip:d}=Nj(r,n);if(!d||!l)return null;var{x:m,y:p,width:h,height:v}=l;return g.createElement("clipPath",{id:"clipPath-".concat(a)},g.createElement("rect",{x:o?m:m-h/2,y:u?p:p-v/2,width:o?h:h*2,height:u?v:v*2}))}var LP=(e,r,n,a)=>ns(e,"xAxis",r,a),$P=(e,r,n,a)=>rs(e,"xAxis",r,a),BP=(e,r,n,a)=>ns(e,"yAxis",n,a),UP=(e,r,n,a)=>rs(e,"yAxis",n,a),UY=me([xt,LP,BP,$P,UP],(e,r,n,a,l)=>ci(e,"xAxis")?vo(r,a,!1):vo(n,l,!1)),FY=(e,r,n,a,l)=>l;function GY(e){return e.type==="line"}var HY=me([pp,FY],(e,r)=>e.filter(GY).find(n=>n.id===r)),VY=me([xt,LP,BP,$P,UP,HY,UY,Uy],(e,r,n,a,l,o,u,d)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:h}=d;if(!(o==null||r==null||n==null||a==null||l==null||a.length===0||l.length===0||u==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:b}=o,x;if(b!=null&&b.length>0?x=b:x=m?.slice(p,h+1),x!=null)return PK({layout:e,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:l,dataKey:v,bandSize:u,displayedData:x})}});function QY(e){var r=uu(e),n=3,a=2;if(r!=null){var{r:l,strokeWidth:o}=r,u=Number(l),d=Number(o);return(Number.isNaN(u)||u<0)&&(u=n),(Number.isNaN(d)||d<0)&&(d=a),{r:u,strokeWidth:d}}return{r:n,strokeWidth:a}}var Cx={exports:{}},Ex={};var kE;function YY(){if(kE)return Ex;kE=1;var e=Cf();function r(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Ex.useSyncExternalStoreWithSelector=function(m,p,h,v,b){var x=l(null);if(x.current===null){var j={hasValue:!1,value:null};x.current=j}else j=x.current;x=u(function(){function C(z){if(!w){if(w=!0,E=z,z=v(z),b!==void 0&&j.hasValue){var k=j.value;if(b(k,z))return S=k}return S=z}if(k=S,n(E,z))return k;var M=v(z);return b!==void 0&&b(k,M)?(E=z,k):(E=z,S=M)}var w=!1,E,S,A=h===void 0?null:h;return[function(){return C(p())},A===null?void 0:function(){return C(A())}]},[p,h,v,b]);var _=a(m,x[0],x[1]);return o(function(){j.hasValue=!0,j.value=_},[_]),d(_),_},Ex}var OE;function KY(){return OE||(OE=1,Cx.exports=YY()),Cx.exports}KY();function WY(e){e()}function XY(){let e=null,r=null;return{clear(){e=null,r=null},notify(){WY(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const l=r={callback:n,next:null,prev:r};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:r=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var DE={notify(){},get:()=>[]};function ZY(e,r){let n,a=DE,l=0,o=!1;function u(_){h();const C=a.subscribe(_);let w=!1;return()=>{w||(w=!0,C(),v())}}function d(){a.notify()}function m(){j.onStateChange&&j.onStateChange()}function p(){return o}function h(){l++,n||(n=e.subscribe(m),a=XY())}function v(){l--,n&&l===0&&(n(),n=void 0,a.clear(),a=DE)}function b(){o||(o=!0,h())}function x(){o&&(o=!1,v())}const j={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:p,trySubscribe:b,tryUnsubscribe:x,getListeners:()=>a};return j}var JY=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eK=JY(),tK=()=>typeof navigator<"u"&&navigator.product==="ReactNative",rK=tK(),nK=()=>eK||rK?g.useLayoutEffect:g.useEffect,aK=nK();function PE(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function iK(e,r){if(PE(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;const n=Object.keys(e),a=Object.keys(r);if(n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(!Object.prototype.hasOwnProperty.call(r,n[l])||!PE(e[n[l]],r[n[l]]))return!1;return!0}var sK=Symbol.for("react-redux-context"),lK=typeof globalThis<"u"?globalThis:{};function oK(){if(!g.createContext)return{};const e=lK[sK]??=new Map;let r=e.get(g.createContext);return r||(r=g.createContext(null),e.set(g.createContext,r)),r}var cK=oK();function uK(e){const{children:r,context:n,serverState:a,store:l}=e,o=g.useMemo(()=>{const m=ZY(l);return{store:l,subscription:m,getServerState:a?()=>a:void 0}},[l,a]),u=g.useMemo(()=>l.getState(),[l]);aK(()=>{const{subscription:m}=o;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==l.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[o,u]);const d=n||cK;return g.createElement(d.Provider,{value:o},r)}var dK=uK,mK=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function fK(e,r){return e==null&&r==null?!0:typeof e=="number"&&typeof r=="number"?e===r||e!==e&&r!==r:e===r}function bp(e,r){var n=new Set([...Object.keys(e),...Object.keys(r)]);for(var a of n)if(mK.has(a)){if(e[a]==null&&r[a]==null)continue;if(!iK(e[a],r[a]))return!1}else if(!fK(e[a],r[a]))return!1;return!0}var pK=["id"],hK=["type","layout","connectNulls","needClip","shape"],vK=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},iu.apply(null,arguments)}function ME(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function va(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ME(Object(n),!0).forEach(function(a){gK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gK(e,r,n){return(r=xK(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function xK(e){var r=bK(e,"string");return typeof r=="symbol"?r:r+""}function bK(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Sj(e,r){if(e==null)return{};var n,a,l=yK(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function yK(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var jK=e=>{var{dataKey:r,name:n,stroke:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:r,type:l,color:a,value:Uf(n,r),payload:e}]},_K=g.memo(e=>{var{dataKey:r,data:n,stroke:a,strokeWidth:l,fill:o,name:u,hide:d,unit:m,tooltipType:p,id:h}=e,v={dataDefinedOnItem:n,getPosition:nl,settings:{stroke:a,strokeWidth:l,fill:o,dataKey:r,nameKey:void 0,name:Uf(u,r),hide:d,type:p,color:a,unit:m,graphicalItemId:h}};return g.createElement(wP,{tooltipEntrySettings:v})}),FP=(e,r)=>"".concat(r,"px ").concat(e-r,"px");function NK(e,r){for(var n=e.length%2!==0?[...e,0]:e,a=[],l=0;l<r;++l)a=[...a,...n];return a}var SK=(e,r,n)=>{var a=n.reduce((x,j)=>x+j);if(!a)return FP(r,e);for(var l=Math.floor(e/a),o=e%a,u=r-e,d=[],m=0,p=0;m<n.length;p+=(h=n[m])!==null&&h!==void 0?h:0,++m){var h,v=n[m];if(v!=null&&p+v>o){d=[...n.slice(0,m),o-p];break}}var b=d.length%2===0?[0,u]:[u];return[...NK(n,l),...d,...b].map(x=>"".concat(x,"px")).join(", ")};function wK(e){var{clipPathId:r,points:n,props:a}=e,{dot:l,dataKey:o,needClip:u}=a,{id:d}=a,m=Sj(a,pK),p=ea(m);return g.createElement(dQ,{points:n,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:p,needClip:u,clipPathId:r})}function CK(e){var{showLabels:r,children:n,points:a}=e,l=g.useMemo(()=>a?.map(o=>{var u,d,m={x:(u=o.x)!==null&&u!==void 0?u:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return va(va({},m),{},{value:o.value,payload:o.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return g.createElement(pP,{value:r?l:void 0},n)}function TE(e){var{clipPathId:r,pathRef:n,points:a,strokeDasharray:l,props:o}=e,{type:u,layout:d,connectNulls:m,needClip:p,shape:h}=o,v=Sj(o,hK),b=va(va({},Ur(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(r,")"):void 0,points:a,type:u,layout:d,connectNulls:m,strokeDasharray:l??o.strokeDasharray});return g.createElement(g.Fragment,null,a?.length>1&&g.createElement(jP,iu({shapeType:"curve",option:h},b,{pathRef:n})),g.createElement(wK,{points:a,clipPathId:r,props:o}))}function EK(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function AK(e){var{clipPathId:r,props:n,pathRef:a,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:u,strokeDasharray:d,isAnimationActive:m,animationBegin:p,animationDuration:h,animationEasing:v,animateNewValues:b,width:x,height:j,onAnimationEnd:_,onAnimationStart:C}=n,w=l.current,E=Jf(u,"recharts-line-"),S=g.useRef(E),[A,z]=g.useState(!1),k=!A,M=g.useCallback(()=>{typeof _=="function"&&_(),z(!1)},[_]),D=g.useCallback(()=>{typeof C=="function"&&C(),z(!0)},[C]),$=EK(a.current),B=g.useRef(0);S.current!==E&&(B.current=o.current,S.current=E);var H=B.current;return g.createElement(CK,{points:u,showLabels:k},n.children,g.createElement(Zf,{animationId:E,begin:p,duration:h,isActive:m,easing:v,onAnimationEnd:M,onAnimationStart:D,key:E},T=>{var Y=Ft(H,$+H,T),J=Math.min(Y,$),P;if(m)if(d){var q="".concat(d).split(/[,\s]+/gim).map(te=>parseFloat(te));P=SK(J,$,q)}else P=FP($,J);else P=d==null?void 0:String(d);if(T>0&&$>0&&(l.current=u,o.current=Math.max(o.current,J)),w){var U=w.length/u.length,I=T===1?u:u.map((te,L)=>{var Z=Math.floor(L*U);if(w[Z]){var W=w[Z];return va(va({},te),{},{x:Ft(W.x,te.x,T),y:Ft(W.y,te.y,T)})}return b?va(va({},te),{},{x:Ft(x*2,te.x,T),y:Ft(j/2,te.y,T)}):va(va({},te),{},{x:te.x,y:te.y})});return l.current=I,g.createElement(TE,{props:n,points:I,clipPathId:r,pathRef:a,strokeDasharray:P})}return g.createElement(TE,{props:n,points:u,clipPathId:r,pathRef:a,strokeDasharray:P})}),g.createElement(vP,{label:n.label}))}function zK(e){var{clipPathId:r,props:n}=e,a=g.useRef(null),l=g.useRef(0),o=g.useRef(null);return g.createElement(AK,{props:n,clipPathId:r,previousPointsRef:a,longestAnimatedLengthRef:l,pathRef:o})}var kK=(e,r)=>{var n,a;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:er(e.payload,r)}};class OK extends g.Component{render(){var{hide:r,dot:n,points:a,className:l,xAxisId:o,yAxisId:u,top:d,left:m,width:p,height:h,id:v,needClip:b,zIndex:x}=this.props;if(r)return null;var j=Nt("recharts-line",l),_=v,{r:C,strokeWidth:w}=QY(n),E=yP(n),S=C*2+w,A=b?"url(#clipPath-".concat(E?"":"dots-").concat(_,")"):void 0;return g.createElement(Gn,{zIndex:x},g.createElement(In,{className:j},b&&g.createElement("defs",null,g.createElement(IP,{clipPathId:_,xAxisId:o,yAxisId:u}),!E&&g.createElement("clipPath",{id:"clipPath-dots-".concat(_)},g.createElement("rect",{x:m-S/2,y:d-S/2,width:p+S,height:h+S}))),g.createElement(RP,{xAxisId:o,yAxisId:u,data:a,dataPointFormatter:kK,errorBarOffset:0},g.createElement(zK,{props:this.props,clipPathId:_}))),g.createElement(OQ,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var GP={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:gr.line,type:"linear"};function DK(e){var r=Hr(e,GP),{activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:d,dot:m,hide:p,isAnimationActive:h,label:v,legendType:b,xAxisId:x,yAxisId:j,id:_}=r,C=Sj(r,vK),{needClip:w}=Nj(x,j),E=yj(),S=al(),A=Rr(),z=Ie(B=>VY(B,x,j,A,_));if(S!=="horizontal"&&S!=="vertical"||z==null||E==null)return null;var{height:k,width:M,x:D,y:$}=E;return g.createElement(OK,iu({},C,{id:_,connectNulls:d,dot:m,activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:u,isAnimationActive:h,hide:p,label:v,legendType:b,xAxisId:x,yAxisId:j,points:z,layout:S,height:k,width:M,left:D,top:$,needClip:w}))}function PK(e){var{layout:r,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,dataKey:u,bandSize:d,displayedData:m}=e;return m.map((p,h)=>{var v=er(p,u);if(r==="horizontal"){var b=yw({axis:n,ticks:l,bandSize:d,entry:p,index:h}),x=qt(v)?null:a.scale.map(v);return{x:b,y:x??null,value:v,payload:p}}var j=qt(v)?null:n.scale.map(v),_=yw({axis:a,ticks:o,bandSize:d,entry:p,index:h});return j==null||_==null?null:{x:j,y:_,value:v,payload:p}}).filter(Boolean)}function MK(e){var r=Hr(e,GP),n=Rr();return g.createElement(EP,{id:r.id,type:"line"},a=>g.createElement(g.Fragment,null,g.createElement(CP,{legendPayload:jK(r)}),g.createElement(_K,{dataKey:r.dataKey,data:r.data,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType,id:a}),g.createElement(zP,{type:"line",id:a,data:r.data,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,hide:r.hide,isPanorama:n}),g.createElement(DK,iu({},r,{id:a}))))}var HP=g.memo(MK,bp);HP.displayName="Line";function ll(e,r){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===r))===null||a===void 0?void 0:a.xAxisId)!==null&&n!==void 0?n:kP}function ol(e,r){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===r))===null||a===void 0?void 0:a.yAxisId)!==null&&n!==void 0?n:kP}var TK="Invariant failed";function qK(e,r){throw new Error(TK)}function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zb.apply(null,arguments)}function hf(e){return g.createElement(jP,zb({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var RK=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,l)=>{if(De(r))return r;var o=De(a)||qt(a);return o?r(a,l):(o||qK(),n)}},IK=(e,r,n)=>n,LK=(e,r)=>r,Eu=me([pp,LK],(e,r)=>e.filter(n=>n.type==="bar").find(n=>n.id===r)),$K=me([Eu],e=>e?.maxBarSize),BK=(e,r,n,a)=>a,UK=me([xt,pp,ll,ol,IK],(e,r,n,a,l)=>r.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===a).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),FK=(e,r,n)=>{var a=xt(e),l=ll(e,r),o=ol(e,r);if(!(l==null||o==null))return a==="horizontal"?jb(e,"yAxis",o,n):jb(e,"xAxis",l,n)},GK=(e,r)=>{var n=xt(e),a=ll(e,r),l=ol(e,r);if(!(a==null||l==null))return n==="horizontal"?j2(e,"xAxis",a):j2(e,"yAxis",l)},HK=me([UK,Q9,GK],DQ),VK=(e,r,n)=>{var a,l,o=Eu(e,r);if(o==null)return 0;var u=ll(e,r),d=ol(e,r);if(u==null||d==null)return 0;var m=xt(e),p=MO(e),{maxBarSize:h}=o,v=qt(h)?p:h,b,x;return m==="horizontal"?(b=ns(e,"xAxis",u,n),x=rs(e,"xAxis",u,n)):(b=ns(e,"yAxis",d,n),x=rs(e,"yAxis",d,n)),(a=(l=vo(b,x,!0))!==null&&l!==void 0?l:v)!==null&&a!==void 0?a:0},VP=(e,r,n)=>{var a=xt(e),l=ll(e,r),o=ol(e,r);if(!(l==null||o==null)){var u,d;return a==="horizontal"?(u=ns(e,"xAxis",l,n),d=rs(e,"xAxis",l,n)):(u=ns(e,"yAxis",o,n),d=rs(e,"yAxis",o,n)),vo(u,d)}},QK=me([HK,MO,V9,TO,VK,VP,$K],RQ),YK=(e,r,n)=>{var a=ll(e,r);if(a!=null)return ns(e,"xAxis",a,n)},KK=(e,r,n)=>{var a=ol(e,r);if(a!=null)return ns(e,"yAxis",a,n)},WK=(e,r,n)=>{var a=ll(e,r);if(a!=null)return rs(e,"xAxis",a,n)},XK=(e,r,n)=>{var a=ol(e,r);if(a!=null)return rs(e,"yAxis",a,n)},ZK=me([QK,Eu],LQ),JK=me([FK,Eu],IQ),eW=me([xr,py,YK,KK,WK,XK,ZK,xt,I9,VP,JK,Eu,BK],(e,r,n,a,l,o,u,d,m,p,h,v,b)=>{var{chartData:x,dataStartIndex:j,dataEndIndex:_}=m;if(!(v==null||u==null||r==null||d!=="horizontal"&&d!=="vertical"||n==null||a==null||l==null||o==null||p==null)){var{data:C}=v,w;if(C!=null&&C.length>0?w=C:w=x?.slice(j,_+1),w!=null)return AW({layout:d,barSettings:v,pos:u,parentViewBox:r,bandSize:p,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,stackedData:h,displayedData:w,offset:e,cells:b,dataStartIndex:j})}}),tW=["index"];function kb(){return kb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kb.apply(null,arguments)}function rW(e,r){if(e==null)return{};var n,a,l=nW(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function nW(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var QP=g.createContext(void 0),aW=e=>{var r=g.useContext(QP);if(r!=null)return r.stackId;if(e!=null)return BL(e)},iW=(e,r)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(r),sW=e=>{var r=g.useContext(QP);if(r!=null){var{stackId:n}=r;return"url(#".concat(iW(n,e),")")}},YP=e=>{var{index:r}=e,n=rW(e,tW),a=sW(r);return g.createElement(In,kb({className:"recharts-bar-stack-layer",clipPath:a},n))},lW=["onMouseEnter","onMouseLeave","onClick"],oW=["value","background","tooltipPosition"],cW=["id"],uW=["onMouseEnter","onClick","onMouseLeave"];function li(){return li=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},li.apply(null,arguments)}function qE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function $r(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?qE(Object(n),!0).forEach(function(a){dW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dW(e,r,n){return(r=mW(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function mW(e){var r=fW(e,"string");return typeof r=="symbol"?r:r+""}function fW(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function vf(e,r){if(e==null)return{};var n,a,l=pW(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function pW(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var hW=e=>{var{dataKey:r,name:n,fill:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:r,type:l,color:a,value:Uf(n,r),payload:e}]},vW=g.memo(e=>{var{dataKey:r,stroke:n,strokeWidth:a,fill:l,name:o,hide:u,unit:d,tooltipType:m,id:p}=e,h={dataDefinedOnItem:void 0,getPosition:nl,settings:{stroke:n,strokeWidth:a,fill:l,dataKey:r,nameKey:void 0,name:Uf(o,r),hide:u,type:m,color:l,unit:d,graphicalItemId:p}};return g.createElement(wP,{tooltipEntrySettings:h})});function gW(e){var r=Ie(Zs),{data:n,dataKey:a,background:l,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:d,onClick:m}=o,p=vf(o,lW),h=_P(u,a,o.id),v=NP(d),b=SP(m,a,o.id);if(!l||n==null)return null;var x=uu(l);return g.createElement(Gn,{zIndex:$Q(l,gr.barBackground)},n.map((j,_)=>{var{value:C,background:w,tooltipPosition:E}=j,S=vf(j,oW);if(!w)return null;var A=h(j,_),z=v(j,_),k=b(j,_),M=$r($r($r($r($r({option:l,isActive:String(_)===r},S),{},{fill:"#eee"},w),x),ay(p,j,_)),{},{onMouseEnter:A,onMouseLeave:z,onClick:k,dataKey:a,index:_,className:"recharts-bar-background-rectangle"});return g.createElement(hf,li({key:"background-bar-".concat(_)},M))}))}function xW(e){var{showLabels:r,children:n,rects:a}=e,l=a?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return $r($r({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return g.createElement(pP,{value:r?l:void 0},n)}function bW(e){var{shape:r,activeBar:n,baseProps:a,entry:l,index:o,dataKey:u}=e,d=Ie(Zs),m=Ie(VD),p=n&&String(o)===d&&(m==null||u===m),h=p?n:r;return p?g.createElement(Gn,{zIndex:gr.activeBar},g.createElement(YP,{index:o},g.createElement(hf,li({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u})))):g.createElement(hf,li({},a,{name:String(a.name)},l,{isActive:p,option:h,index:o,dataKey:u}))}function yW(e){var{shape:r,baseProps:n,entry:a,index:l,dataKey:o}=e;return g.createElement(hf,li({},n,{name:String(n.name)},a,{isActive:!1,option:r,index:l,dataKey:o}))}function jW(e){var r,{data:n,props:a}=e,l=(r=ea(a))!==null&&r!==void 0?r:{},{id:o}=l,u=vf(l,cW),{shape:d,dataKey:m,activeBar:p}=a,{onMouseEnter:h,onClick:v,onMouseLeave:b}=a,x=vf(a,uW),j=_P(h,m,o),_=NP(b),C=SP(v,m,o);return n?g.createElement(g.Fragment,null,n.map((w,E)=>g.createElement(YP,li({index:E,key:"rectangle-".concat(w?.x,"-").concat(w?.y,"-").concat(w?.value,"-").concat(E),className:"recharts-bar-rectangle"},ay(x,w,E),{onMouseEnter:j(w,E),onMouseLeave:_(w,E),onClick:C(w,E)}),p?g.createElement(bW,{shape:d,activeBar:p,baseProps:u,entry:w,index:E,dataKey:m}):g.createElement(yW,{shape:d,baseProps:u,entry:w,index:E,dataKey:m})))):null}function _W(e){var{props:r,previousRectanglesRef:n}=e,{data:a,layout:l,isAnimationActive:o,animationBegin:u,animationDuration:d,animationEasing:m,onAnimationEnd:p,onAnimationStart:h}=r,v=n.current,b=Jf(r,"recharts-bar-"),[x,j]=g.useState(!1),_=!x,C=g.useCallback(()=>{typeof p=="function"&&p(),j(!1)},[p]),w=g.useCallback(()=>{typeof h=="function"&&h(),j(!0)},[h]);return g.createElement(xW,{showLabels:_,rects:a},g.createElement(Zf,{animationId:b,begin:u,duration:d,isActive:o,easing:m,onAnimationEnd:C,onAnimationStart:w,key:b},E=>{var S=E===1?a:a?.map((A,z)=>{var k=v&&v[z];if(k)return $r($r({},A),{},{x:Ft(k.x,A.x,E),y:Ft(k.y,A.y,E),width:Ft(k.width,A.width,E),height:Ft(k.height,A.height,E)});if(l==="horizontal"){var M=Ft(0,A.height,E),D=Ft(A.stackedBarStart,A.y,E);return $r($r({},A),{},{y:D,height:M})}var $=Ft(0,A.width,E),B=Ft(A.stackedBarStart,A.x,E);return $r($r({},A),{},{width:$,x:B})});return E>0&&(n.current=S??null),S==null?null:g.createElement(In,null,g.createElement(jW,{props:r,data:S}))}),g.createElement(vP,{label:r.label}),r.children)}function NW(e){var r=g.useRef(null);return g.createElement(_W,{previousRectanglesRef:r,props:e})}var KP=0,SW=(e,r)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:er(e,r)}};class wW extends g.PureComponent{render(){var{hide:r,data:n,dataKey:a,className:l,xAxisId:o,yAxisId:u,needClip:d,background:m,id:p}=this.props;if(r||n==null)return null;var h=Nt("recharts-bar",l),v=p;return g.createElement(In,{className:h,id:p},d&&g.createElement("defs",null,g.createElement(IP,{clipPathId:v,xAxisId:o,yAxisId:u})),g.createElement(In,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(v,")"):void 0},g.createElement(gW,{data:n,dataKey:a,background:m,allOtherBarProps:this.props}),g.createElement(NW,this.props)))}}var CW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:KP,xAxisId:0,yAxisId:0,zIndex:gr.bar};function EW(e){var{xAxisId:r,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:p,isAnimationActive:h}=e,{needClip:v}=Nj(r,n),b=al(),x=Rr(),j=AV(e.children,gj),_=Ie(E=>eW(E,e.id,x,j));if(b!=="vertical"&&b!=="horizontal")return null;var C,w=_?.[0];return w==null||w.height==null||w.width==null?C=0:C=b==="vertical"?w.height/2:w.width/2,g.createElement(RP,{xAxisId:r,yAxisId:n,data:_,dataPointFormatter:SW,errorBarOffset:C},g.createElement(wW,li({},e,{layout:b,needClip:v,data:_,xAxisId:r,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:u,animationBegin:d,animationDuration:m,animationEasing:p,isAnimationActive:h})))}function AW(e){var{layout:r,barSettings:{dataKey:n,minPointSize:a},pos:l,bandSize:o,xAxis:u,yAxis:d,xAxisTicks:m,yAxisTicks:p,stackedData:h,displayedData:v,offset:b,cells:x,parentViewBox:j,dataStartIndex:_}=e,C=r==="horizontal"?d:u,w=h?C.scale.domain():null,E=UL({numericAxis:C}),S=C.scale.map(E);return v.map((A,z)=>{var k,M,D,$,B,H;if(h){var T=h[z+_];if(T==null)return null;k=qL(T,w)}else k=er(A,n),Array.isArray(k)||(k=[E,k]);var Y=RK(a,KP)(k[1],z);if(r==="horizontal"){var J,P=d.scale.map(k[0]),q=d.scale.map(k[1]);if(P==null||q==null)return null;M=jw({axis:u,ticks:m,bandSize:o,offset:l.offset,entry:A,index:z}),D=(J=q??P)!==null&&J!==void 0?J:void 0,$=l.size;var U=P-q;if(B=_a(U)?0:U,H={x:M,y:b.top,width:$,height:b.height},Math.abs(Y)>0&&Math.abs(B)<Math.abs(Y)){var I=tn(B||Y)*(Math.abs(Y)-Math.abs(B));D-=I,B+=I}}else{var te=u.scale.map(k[0]),L=u.scale.map(k[1]);if(te==null||L==null)return null;if(M=te,D=jw({axis:d,ticks:p,bandSize:o,offset:l.offset,entry:A,index:z}),$=L-te,B=l.size,H={x:b.left,y:D,width:b.width,height:B},Math.abs(Y)>0&&Math.abs($)<Math.abs(Y)){var Z=tn($||Y)*(Math.abs(Y)-Math.abs($));$+=Z}}if(M==null||D==null||$==null||B==null)return null;var W=$r($r({},A),{},{stackedBarStart:S,x:M,y:D,width:$,height:B,value:h?k:k[1],payload:A,background:H,tooltipPosition:{x:M+$/2,y:D+B/2},parentViewBox:j},x&&x[z]&&x[z].props);return W}).filter(Boolean)}function zW(e){var r=Hr(e,CW),n=aW(r.stackId),a=Rr();return g.createElement(EP,{id:r.id,type:"bar"},l=>g.createElement(g.Fragment,null,g.createElement(CP,{legendPayload:hW(r)}),g.createElement(vW,{dataKey:r.dataKey,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:r.fill,name:r.name,hide:r.hide,unit:r.unit,tooltipType:r.tooltipType,id:l}),g.createElement(zP,{type:"bar",id:l,data:void 0,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,stackId:n,hide:r.hide,barSize:r.barSize,minPointSize:r.minPointSize,maxBarSize:r.maxBarSize,isPanorama:a}),g.createElement(Gn,{zIndex:r.zIndex},g.createElement(EW,li({},r,{id:l})))))}var WP=g.memo(zW,bp);WP.displayName="Bar";var kW=["domain","range"],OW=["domain","range"];function RE(e,r){if(e==null)return{};var n,a,l=DW(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function DW(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function IE(e,r){return e===r?!0:Array.isArray(e)&&e.length===2&&Array.isArray(r)&&r.length===2?e[0]===r[0]&&e[1]===r[1]:!1}function XP(e,r){if(e===r)return!0;var{domain:n,range:a}=e,l=RE(e,kW),{domain:o,range:u}=r,d=RE(r,OW);return!IE(n,o)||!IE(a,u)?!1:bp(l,d)}var PW=["type"],MW=["dangerouslySetInnerHTML","ticks","scale"],TW=["id","scale"];function Ob(){return Ob=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ob.apply(null,arguments)}function LE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function $E(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?LE(Object(n),!0).forEach(function(a){qW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qW(e,r,n){return(r=RW(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function RW(e){var r=IW(e,"string");return typeof r=="symbol"?r:r+""}function IW(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Db(e,r){if(e==null)return{};var n,a,l=LW(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function LW(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function $W(e){var r=Qt(),n=g.useRef(null),a=Nk(),{type:l}=e,o=Db(e,PW),u=op(a,"xAxis",l),d=g.useMemo(()=>{if(u!=null)return $E($E({},o),{},{type:u})},[o,u]);return g.useLayoutEffect(()=>{d!=null&&(n.current===null?r(vQ(d)):n.current!==d&&r(gQ({prev:n.current,next:d})),n.current=d)},[d,r]),g.useLayoutEffect(()=>()=>{n.current&&(r(xQ(n.current)),n.current=null)},[r]),null}var BW=e=>{var{xAxisId:r,className:n}=e,a=Ie(py),l=Rr(),o="xAxis",u=Ie(w=>wD(w,o,r,l)),d=Ie(w=>jD(w,r)),m=Ie(w=>YU(w,r)),p=Ie(w=>GO(w,r));if(d==null||m==null||p==null)return null;var{dangerouslySetInnerHTML:h,ticks:v,scale:b}=e,x=Db(e,MW),{id:j,scale:_}=p,C=Db(p,TW);return g.createElement(_j,Ob({},x,C,{x:m.x,y:m.y,width:d.width,height:d.height,className:Nt("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:u,axisType:o}))},UW={allowDataOverflow:dr.allowDataOverflow,allowDecimals:dr.allowDecimals,allowDuplicatedCategory:dr.allowDuplicatedCategory,angle:dr.angle,axisLine:ei.axisLine,height:dr.height,hide:!1,includeHidden:dr.includeHidden,interval:dr.interval,label:!1,minTickGap:dr.minTickGap,mirror:dr.mirror,orientation:dr.orientation,padding:dr.padding,reversed:dr.reversed,scale:dr.scale,tick:dr.tick,tickCount:dr.tickCount,tickLine:ei.tickLine,tickSize:ei.tickSize,type:dr.type,xAxisId:0},FW=e=>{var r=Hr(e,UW);return g.createElement(g.Fragment,null,g.createElement($W,{allowDataOverflow:r.allowDataOverflow,allowDecimals:r.allowDecimals,allowDuplicatedCategory:r.allowDuplicatedCategory,angle:r.angle,dataKey:r.dataKey,domain:r.domain,height:r.height,hide:r.hide,id:r.xAxisId,includeHidden:r.includeHidden,interval:r.interval,minTickGap:r.minTickGap,mirror:r.mirror,name:r.name,orientation:r.orientation,padding:r.padding,reversed:r.reversed,scale:r.scale,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit}),g.createElement(BW,r))},Pb=g.memo(FW,XP);Pb.displayName="XAxis";var GW=["type"],HW=["dangerouslySetInnerHTML","ticks","scale"],VW=["id","scale"];function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mb.apply(null,arguments)}function BE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function UE(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?BE(Object(n),!0).forEach(function(a){QW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function QW(e,r,n){return(r=YW(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function YW(e){var r=KW(e,"string");return typeof r=="symbol"?r:r+""}function KW(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Tb(e,r){if(e==null)return{};var n,a,l=WW(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function WW(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function XW(e){var r=Qt(),n=g.useRef(null),a=Nk(),{type:l}=e,o=Tb(e,GW),u=op(a,"yAxis",l),d=g.useMemo(()=>{if(u!=null)return UE(UE({},o),{},{type:u})},[u,o]);return g.useLayoutEffect(()=>{d!=null&&(n.current===null?r(bQ(d)):n.current!==d&&r(yQ({prev:n.current,next:d})),n.current=d)},[d,r]),g.useLayoutEffect(()=>()=>{n.current&&(r(jQ(n.current)),n.current=null)},[r]),null}function ZW(e){var{yAxisId:r,className:n,width:a,label:l}=e,o=g.useRef(null),u=g.useRef(null),d=Ie(py),m=Rr(),p=Qt(),h="yAxis",v=Ie(k=>_D(k,r)),b=Ie(k=>WU(k,r)),x=Ie(k=>wD(k,h,r,m)),j=Ie(k=>HO(k,r));if(g.useLayoutEffect(()=>{if(!(a!=="auto"||!v||bj(l)||g.isValidElement(l)||j==null)){var k=o.current;if(k){var M=k.getCalculatedWidth();Math.round(v.width)!==Math.round(M)&&p(_Q({id:r,width:M}))}}},[x,v,p,l,r,a,j]),v==null||b==null||j==null)return null;var{dangerouslySetInnerHTML:_,ticks:C,scale:w}=e,E=Tb(e,HW),{id:S,scale:A}=j,z=Tb(j,VW);return g.createElement(_j,Mb({},E,z,{ref:o,labelRef:u,x:b.x,y:b.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:v.width,height:v.height,className:Nt("recharts-".concat(h," ").concat(h),n),viewBox:d,ticks:x,axisType:h}))}var JW={allowDataOverflow:mr.allowDataOverflow,allowDecimals:mr.allowDecimals,allowDuplicatedCategory:mr.allowDuplicatedCategory,angle:mr.angle,axisLine:ei.axisLine,hide:!1,includeHidden:mr.includeHidden,interval:mr.interval,label:!1,minTickGap:mr.minTickGap,mirror:mr.mirror,orientation:mr.orientation,padding:mr.padding,reversed:mr.reversed,scale:mr.scale,tick:mr.tick,tickCount:mr.tickCount,tickLine:ei.tickLine,tickSize:ei.tickSize,type:mr.type,width:mr.width,yAxisId:0},eX=e=>{var r=Hr(e,JW);return g.createElement(g.Fragment,null,g.createElement(XW,{interval:r.interval,id:r.yAxisId,scale:r.scale,type:r.type,domain:r.domain,allowDataOverflow:r.allowDataOverflow,dataKey:r.dataKey,allowDuplicatedCategory:r.allowDuplicatedCategory,allowDecimals:r.allowDecimals,tickCount:r.tickCount,padding:r.padding,includeHidden:r.includeHidden,reversed:r.reversed,ticks:r.ticks,width:r.width,orientation:r.orientation,mirror:r.mirror,hide:r.hide,unit:r.unit,name:r.name,angle:r.angle,minTickGap:r.minTickGap,tick:r.tick,tickFormatter:r.tickFormatter}),g.createElement(ZW,r))},qb=g.memo(eX,XP);qb.displayName="YAxis";var tX=(e,r)=>r,wj=me([tX,xt,UO,jr,UD,vi,dG,xr],xG),Cj=e=>{var r=e.currentTarget.getBoundingClientRect(),n=r.width/e.currentTarget.offsetWidth,a=r.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-r.left)/n),chartY:Math.round((e.clientY-r.top)/a)}},ZP=Ln("mouseClick"),JP=fu();JP.startListening({actionCreator:ZP,effect:(e,r)=>{var n=e.payload,a=wj(r.getState(),Cj(n));a?.activeIndex!=null&&r.dispatch(uF({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var Rb=Ln("mouseMove"),eM=fu(),im=null;eM.startListening({actionCreator:Rb,effect:(e,r)=>{var n=e.payload;im!==null&&cancelAnimationFrame(im);var a=Cj(n);im=requestAnimationFrame(()=>{var l=r.getState(),o=lj(l,l.tooltip.settings.shared);if(o==="axis"){var u=wj(l,a);u?.activeIndex!=null?r.dispatch(PD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):r.dispatch(DD())}im=null})}});function rX(e,r){return r instanceof HTMLElement?"HTMLElement <".concat(r.tagName,' class="').concat(r.className,'">'):r===window?"global.window":e==="children"&&typeof r=="object"&&r!==null?"<<CHILDREN>>":r}var FE={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},tM=an({name:"rootProps",initialState:FE,reducers:{updateOptions:(e,r)=>{var n;e.accessibilityLayer=r.payload.accessibilityLayer,e.barCategoryGap=r.payload.barCategoryGap,e.barGap=(n=r.payload.barGap)!==null&&n!==void 0?n:FE.barGap,e.barSize=r.payload.barSize,e.maxBarSize=r.payload.maxBarSize,e.stackOffset=r.payload.stackOffset,e.syncId=r.payload.syncId,e.syncMethod=r.payload.syncMethod,e.className=r.payload.className,e.baseValue=r.payload.baseValue,e.reverseStackOrder=r.payload.reverseStackOrder}}}),nX=tM.reducer,{updateOptions:aX}=tM.actions,iX=null,sX={updatePolarOptions:(e,r)=>r.payload},rM=an({name:"polarOptions",initialState:iX,reducers:sX}),{updatePolarOptions:hre}=rM.actions,lX=rM.reducer,nM=Ln("keyDown"),aM=Ln("focus"),Ej=fu();Ej.startListening({actionCreator:nM,effect:(e,r)=>{var n=r.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var u=oj(l,ko(n),Nu(n),wu(n)),d=u==null?-1:Number(u);if(!(!Number.isFinite(d)||d<0)){var m=vi(n);if(o==="Enter"){var p=cf(n,"axis","hover",String(l.index));r.dispatch(Nb({active:!l.active,activeIndex:l.index,activeCoordinate:p}));return}var h=eF(n),v=h==="left-to-right"?1:-1,b=o==="ArrowRight"?1:-1,x=d+b*v;if(!(m==null||x>=m.length||x<0)){var j=cf(n,"axis","hover",String(x));r.dispatch(Nb({active:!0,activeIndex:x.toString(),activeCoordinate:j}))}}}}}});Ej.startListening({actionCreator:aM,effect:(e,r)=>{var n=r.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip;if(!l.active&&l.index==null){var o="0",u=cf(n,"axis","hover",String(o));r.dispatch(Nb({active:!0,activeIndex:o,activeCoordinate:u}))}}}});var Mn=Ln("externalEvent"),iM=fu(),Ax=new Map;iM.startListening({actionCreator:Mn,effect:(e,r)=>{var{handler:n,reactEvent:a}=e.payload;if(n!=null){a.persist();var l=a.type,o=Ax.get(l);o!==void 0&&cancelAnimationFrame(o);var u=requestAnimationFrame(()=>{try{var d=r.getState(),m={activeCoordinate:KF(d),activeDataKey:VD(d),activeIndex:Zs(d),activeLabel:HD(d),activeTooltipIndex:Zs(d),isTooltipActive:WF(d)};n(m,a)}finally{Ax.delete(l)}});Ax.set(l,u)}}});var oX=me([Ao],e=>e.tooltipItemPayloads),cX=me([oX,(e,r)=>r,(e,r,n)=>n],(e,r,n)=>{if(r!=null){var a=e.find(o=>o.settings.graphicalItemId===n);if(a!=null){var{getPosition:l}=a;if(l!=null)return l(r)}}}),sM=Ln("touchMove"),lM=fu();lM.startListening({actionCreator:sM,effect:(e,r)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var a=r.getState(),l=lj(a,a.tooltip.settings.shared);if(l==="axis"){var o=n.touches[0];if(o==null)return;var u=wj(a,Cj({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));u?.activeIndex!=null&&r.dispatch(PD({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(l==="item"){var d,m=n.touches[0];if(document.elementFromPoint==null||m==null)return;var p=document.elementFromPoint(m.clientX,m.clientY);if(!p||!p.getAttribute)return;var h=p.getAttribute(KL),v=(d=p.getAttribute(WL))!==null&&d!==void 0?d:void 0,b=zo(a).find(_=>_.id===v);if(h==null||b==null||v==null)return;var{dataKey:x}=b,j=cX(a,h,v);r.dispatch(OD({activeDataKey:x,activeIndex:h,activeCoordinate:j,activeGraphicalItemId:v}))}}}});var uX=Lz({brush:UQ,cartesianAxis:NQ,chartData:KG,errorBars:qY,graphicalItems:tQ,layout:OL,legend:B8,options:GG,polarAxis:NV,polarOptions:lX,referenceElements:VQ,rootProps:nX,tooltip:dF,zIndex:DG}),dX=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return rL({reducer:uX,preloadedState:r,middleware:a=>{var l;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((l="es6")!==null&&l!==void 0?l:"")}).concat([JP.middleware,eM.middleware,Ej.middleware,iM.middleware,lM.middleware])},enhancers:a=>{var l=a;return typeof a=="function"&&(l=a()),l.concat(ek({type:"raf"}))},devTools:{serialize:{replacer:rX},name:"recharts-".concat(n)}})};function mX(e){var{preloadedState:r,children:n,reduxStoreName:a}=e,l=Rr(),o=g.useRef(null);if(l)return n;o.current==null&&(o.current=dX(r,a));var u=ly;return g.createElement(dK,{context:u,store:o.current},n)}function fX(e){var{layout:r,margin:n}=e,a=Qt(),l=Rr();return g.useEffect(()=>{l||(a(AL(r)),a(EL(n)))},[a,l,r,n]),null}var pX=g.memo(fX,bp);function hX(e){var r=Qt();return g.useEffect(()=>{r(aX(e))},[r,e]),null}function GE(e){var{zIndex:r,isPanorama:n}=e,a=g.useRef(null),l=Qt();return g.useLayoutEffect(()=>(a.current&&l(kG({zIndex:r,element:a.current,isPanorama:n})),()=>{l(OG({zIndex:r,isPanorama:n}))}),[l,r,n]),g.createElement("g",{tabIndex:-1,ref:a})}function HE(e){var{children:r,isPanorama:n}=e,a=Ie(yG);if(!a||a.length===0)return r;var l=a.filter(u=>u<0),o=a.filter(u=>u>0);return g.createElement(g.Fragment,null,l.map(u=>g.createElement(GE,{key:u,zIndex:u,isPanorama:n})),r,o.map(u=>g.createElement(GE,{key:u,zIndex:u,isPanorama:n})))}var vX=["children"];function gX(e,r){if(e==null)return{};var n,a,l=xX(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function xX(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function gf(){return gf=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gf.apply(null,arguments)}var bX={width:"100%",height:"100%",display:"block"},yX=g.forwardRef((e,r)=>{var n=jk(),a=_k(),l=Dk();if(!Sa(n)||!Sa(a))return null;var{children:o,otherAttributes:u,title:d,desc:m}=e,p,h;return u!=null&&(typeof u.tabIndex=="number"?p=u.tabIndex:p=l?0:void 0,typeof u.role=="string"?h=u.role:h=l?"application":void 0),g.createElement(nz,gf({},u,{title:d,desc:m,role:h,tabIndex:p,width:n,height:a,style:bX,ref:r}),o)}),jX=e=>{var{children:r}=e,n=Ie(Vf);if(!n)return null;var{width:a,height:l,y:o,x:u}=n;return g.createElement(nz,{width:a,height:l,x:u,y:o},r)},VE=g.forwardRef((e,r)=>{var{children:n}=e,a=gX(e,vX),l=Rr();return l?g.createElement(jX,null,g.createElement(HE,{isPanorama:!0},n)):g.createElement(yX,gf({ref:r},a),g.createElement(HE,{isPanorama:!1},n))});function _X(){var e=Qt(),[r,n]=g.useState(null),a=Ie(YL);return g.useEffect(()=>{if(r!=null){var l=r.getBoundingClientRect(),o=l.width/r.offsetWidth;st(o)&&o!==a&&e(kL(o))}},[r,e,a]),n}function QE(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function NX(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?QE(Object(n),!0).forEach(function(a){SX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SX(e,r,n){return(r=wX(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function wX(e){var r=CX(e,"string");return typeof r=="symbol"?r:r+""}function CX(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Zi(){return Zi=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zi.apply(null,arguments)}var EX=()=>(aH(),null);function xf(e){if(typeof e=="number")return e;if(typeof e=="string"){var r=parseFloat(e);if(!Number.isNaN(r))return r}return 0}var AX=g.forwardRef((e,r)=>{var n,a,l=g.useRef(null),[o,u]=g.useState({containerWidth:xf((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:xf((a=e.style)===null||a===void 0?void 0:a.height)}),d=g.useCallback((p,h)=>{u(v=>{var b=Math.round(p),x=Math.round(h);return v.containerWidth===b&&v.containerHeight===x?v:{containerWidth:b,containerHeight:x}})},[]),m=g.useCallback(p=>{if(typeof r=="function"&&r(p),p!=null&&typeof ResizeObserver<"u"){var{width:h,height:v}=p.getBoundingClientRect();d(h,v);var b=j=>{var _=j[0];if(_!=null){var{width:C,height:w}=_.contentRect;d(C,w)}},x=new ResizeObserver(b);x.observe(p),l.current=x}},[r,d]);return g.useEffect(()=>()=>{var p=l.current;p?.disconnect()},[d]),g.createElement(g.Fragment,null,g.createElement(hu,{width:o.containerWidth,height:o.containerHeight}),g.createElement("div",Zi({ref:m},e)))}),zX=g.forwardRef((e,r)=>{var{width:n,height:a}=e,[l,o]=g.useState({containerWidth:xf(n),containerHeight:xf(a)}),u=g.useCallback((m,p)=>{o(h=>{var v=Math.round(m),b=Math.round(p);return h.containerWidth===v&&h.containerHeight===b?h:{containerWidth:v,containerHeight:b}})},[]),d=g.useCallback(m=>{if(typeof r=="function"&&r(m),m!=null){var{width:p,height:h}=m.getBoundingClientRect();u(p,h)}},[r,u]);return g.createElement(g.Fragment,null,g.createElement(hu,{width:l.containerWidth,height:l.containerHeight}),g.createElement("div",Zi({ref:d},e)))}),kX=g.forwardRef((e,r)=>{var{width:n,height:a}=e;return g.createElement(g.Fragment,null,g.createElement(hu,{width:n,height:a}),g.createElement("div",Zi({ref:r},e)))}),OX=g.forwardRef((e,r)=>{var{width:n,height:a}=e;return typeof n=="string"||typeof a=="string"?g.createElement(zX,Zi({},e,{ref:r})):typeof n=="number"&&typeof a=="number"?g.createElement(kX,Zi({},e,{width:n,height:a,ref:r})):g.createElement(g.Fragment,null,g.createElement(hu,{width:n,height:a}),g.createElement("div",Zi({ref:r},e)))});function DX(e){return e?AX:OX}var PX=g.forwardRef((e,r)=>{var{children:n,className:a,height:l,onClick:o,onContextMenu:u,onDoubleClick:d,onMouseDown:m,onMouseEnter:p,onMouseLeave:h,onMouseMove:v,onMouseUp:b,onTouchEnd:x,onTouchMove:j,onTouchStart:_,style:C,width:w,responsive:E,dispatchTouchEvents:S=!0}=e,A=g.useRef(null),z=Qt(),[k,M]=g.useState(null),[D,$]=g.useState(null),B=_X(),H=hy(),T=H?.width>0?H.width:w,Y=H?.height>0?H.height:l,J=g.useCallback(ue=>{B(ue),typeof r=="function"&&r(ue),M(ue),$(ue),ue!=null&&(A.current=ue)},[B,r,M,$]),P=g.useCallback(ue=>{z(ZP(ue)),z(Mn({handler:o,reactEvent:ue}))},[z,o]),q=g.useCallback(ue=>{z(Rb(ue)),z(Mn({handler:p,reactEvent:ue}))},[z,p]),U=g.useCallback(ue=>{z(DD()),z(Mn({handler:h,reactEvent:ue}))},[z,h]),I=g.useCallback(ue=>{z(Rb(ue)),z(Mn({handler:v,reactEvent:ue}))},[z,v]),te=g.useCallback(()=>{z(aM())},[z]),L=g.useCallback(ue=>{z(nM(ue.key))},[z]),Z=g.useCallback(ue=>{z(Mn({handler:u,reactEvent:ue}))},[z,u]),W=g.useCallback(ue=>{z(Mn({handler:d,reactEvent:ue}))},[z,d]),ce=g.useCallback(ue=>{z(Mn({handler:m,reactEvent:ue}))},[z,m]),xe=g.useCallback(ue=>{z(Mn({handler:b,reactEvent:ue}))},[z,b]),he=g.useCallback(ue=>{z(Mn({handler:_,reactEvent:ue}))},[z,_]),F=g.useCallback(ue=>{S&&z(sM(ue)),z(Mn({handler:j,reactEvent:ue}))},[z,S,j]),ve=g.useCallback(ue=>{z(Mn({handler:x,reactEvent:ue}))},[z,x]),Pe=DX(E);return g.createElement(JD.Provider,{value:k},g.createElement(qI.Provider,{value:D},g.createElement(Pe,{width:T??C?.width,height:Y??C?.height,className:Nt("recharts-wrapper",a),style:NX({position:"relative",cursor:"default",width:T,height:Y},C),onClick:P,onContextMenu:Z,onDoubleClick:W,onFocus:te,onKeyDown:L,onMouseDown:ce,onMouseEnter:q,onMouseLeave:U,onMouseMove:I,onMouseUp:xe,onTouchEnd:ve,onTouchMove:F,onTouchStart:he,ref:J},g.createElement(EX,null),n)))}),MX=["width","height","responsive","children","className","style","compact","title","desc"];function TX(e,r){if(e==null)return{};var n,a,l=qX(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function qX(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var RX=g.forwardRef((e,r)=>{var{width:n,height:a,responsive:l,children:o,className:u,style:d,compact:m,title:p,desc:h}=e,v=TX(e,MX),b=ea(v);return m?g.createElement(g.Fragment,null,g.createElement(hu,{width:n,height:a}),g.createElement(VE,{otherAttributes:b,title:p,desc:h},o)):g.createElement(PX,{className:u,style:d,width:n,height:a,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(VE,{otherAttributes:b,title:p,desc:h,ref:r},g.createElement(YQ,null,o)))});function Ib(){return Ib=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ib.apply(null,arguments)}var IX={top:5,right:5,bottom:5,left:5},LX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:IX,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},oM=g.forwardRef(function(r,n){var a,l=Hr(r.categoricalChartProps,LX),{chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,categoricalChartProps:p}=r,h={chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return g.createElement(mX,{preloadedState:{options:h},reduxStoreName:(a=p.id)!==null&&a!==void 0?a:o},g.createElement(BQ,{chartData:p.data}),g.createElement(pX,{layout:l.layout,margin:l.margin}),g.createElement(hX,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),g.createElement(RX,Ib({},l,{ref:n})))}),$X=["axis"],BX=g.forwardRef((e,r)=>g.createElement(oM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:$X,tooltipPayloadSearcher:eP,categoricalChartProps:e,ref:r})),UX=["axis","item"],FX=g.forwardRef((e,r)=>g.createElement(oM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:UX,tooltipPayloadSearcher:eP,categoricalChartProps:e,ref:r}));const GX=8,HX=12,VX=14,QX=1;function Aj(e){return e instanceof Ae?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function YE(e,r){return e.getFullYear()===r.getFullYear()&&e.getMonth()===r.getMonth()&&e.getDate()===r.getDate()}function yp(){const e=new Date,r=e.getDay(),n=r===0?-6:1-r,a=new Date(e);return a.setDate(e.getDate()+n),a.setHours(0,0,0,0),a}function YX(){const e=yp(),r=new Date(e);return r.setDate(e.getDate()+6),r.setHours(23,59,59,999),r}function zx(e,r){return Math.floor(Math.abs(r.getTime()-e.getTime())/864e5)}async function jp(e){try{const r=Ee(_e(Q,"quiz_results"),Se("userId","==",e),Ve("datePassage","desc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}catch(r){return console.error("Erreur rcupration rsultats lve:",r),[]}}async function KX(e){try{const r=await jp(e);if(r.length===0)return[];const n=new Map;r.forEach(o=>{const u=o.disciplineId;n.has(u)||n.set(u,[]),n.get(u).push(o)});const a=[];n.forEach((o,u)=>{if(o.length<QX)return;const d=o.map(C=>C.pourcentage/100*20),m=d.reduce((C,w)=>C+w,0)/d.length;if(m>=VX)return;let p="stable";if(d.length>=3){const C=d.slice(0,2),w=d.slice(2,4),E=C.reduce((z,k)=>z+k,0)/C.length,S=w.reduce((z,k)=>z+k,0)/w.length,A=E-S;A>1.5?p="hausse":A<-1.5&&(p="baisse")}let h="modere";m<GX?h="critique":m<HX&&(h="important");const v=d[0],b=Math.max(...d),x=Math.min(...d),j=Aj(o[0].datePassage),_=o[0].disciplineNom||"Discipline inconnue";a.push({id:`lacune_${u}`,disciplineId:u,disciplineNom:_,moyenne:Math.round(m*10)/10,nombreQuiz:o.length,tendance:p,niveauUrgence:h,dernierQuizDate:j,scoreDetails:{dernierScore:Math.round(v*10)/10,meilleurScore:Math.round(b*10)/10,pireScore:Math.round(x*10)/10}})});const l={critique:0,important:1,modere:2};return a.sort((o,u)=>{const d=l[o.niveauUrgence]-l[u.niveauUrgence];return d!==0?d:o.moyenne-u.moyenne}),a}catch(r){return console.error("Erreur dtection lacunes:",r),[]}}function WX(e){const r=[];let n=1;return e.forEach(a=>{const{id:l,disciplineNom:o,niveauUrgence:u,moyenne:d,tendance:m}=a;switch(u){case"critique":r.push({id:`reco_cours_${l}`,lacuneId:l,type:"revoir_cours",titre:` Revoir les cours de ${o}`,description:`Ta moyenne est de ${d}/20 en ${o}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),r.push({id:`reco_quiz_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Refaire les quiz de ${o}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"important":r.push({id:`reco_exercice_${l}`,lacuneId:l,type:"exercice_cible",titre:` Exercices cibls en ${o}`,description:`Avec ${d}/20 de moyenne, concentre-toi sur les exercices pratiques. ${m==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date}),r.push({id:`reco_cours2_${l}`,lacuneId:l,type:"revoir_cours",titre:` Rviser les points cls en ${o}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break;case"modere":r.push({id:`reco_consolider_${l}`,lacuneId:l,type:"refaire_quiz",titre:` Consolider tes acquis en ${o}`,description:`Tu es proche du niveau attendu (${d}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:o,priorite:n++,completee:!1,dateCreation:new Date});break}}),r}async function XX(e){try{const r=await jp(e);if(r.length===0)return{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const n=new Set;r.forEach(_=>{const C=Aj(_.datePassage),w=`${C.getFullYear()}-${C.getMonth()}-${C.getDate()}`;n.add(w)});const a=Array.from(n).map(_=>{const[C,w,E]=_.split("-").map(Number);return new Date(C,w,E)}).sort((_,C)=>C.getTime()-_.getTime()),l=a.length,o=a[0];let u=0;const d=new Date;d.setHours(0,0,0,0);const m=a[0];if(zx(m,d)<=1){u=1;for(let _=1;_<a.length&&zx(a[_],a[_-1])===1;_++)u++}let h=0,v=1;for(let _=1;_<a.length;_++)zx(a[_],a[_-1])===1?v++:(h=Math.max(h,v),v=1);h=Math.max(h,v,u);const b=yp(),x=[];for(let _=0;_<7;_++){const C=new Date(b);C.setDate(b.getDate()+_);const w=a.some(E=>YE(E,C));x.push(w)}const j=[];for(let _=0;_<4;_++){const C=new Date(b);C.setDate(b.getDate()-_*7);let w=0;for(let S=0;S<7;S++){const A=new Date(C);A.setDate(C.getDate()+S),a.some(z=>YE(z,A))&&w++}const E=Math.ceil((C.getDate()+new Date(C.getFullYear(),C.getMonth(),1).getDay())/7);j.push({semaine:_===0?"Cette sem.":`Sem. -${_}`,joursActifs:w})}return{userId:e,streakActuel:u,meilleurStreak:h,dernierJourActif:o,totalJoursActifs:l,semaineCourante:x,historiqueHebdo:j.reverse()}}catch(r){return console.error("Erreur calcul streak:",r),{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function ZX(e,r,n){const a=[],l=yp(),o=YX(),u=r.length>2?5:3;if(a.push({id:`obj_quiz_${e}_${l.getTime()}`,userId:e,titre:`Passer ${u} quiz cette semaine`,description:`Entrane-toi en passant au moins ${u} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:u,progression:0,statut:"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Travailleur"'}),r.length>0){const m=r[0],p=Math.min(m.moyenne+3,14);a.push({id:`obj_score_${e}_${l.getTime()}`,userId:e,titre:`Atteindre ${Math.round(p)}/20 en ${m.disciplineNom}`,description:`Ta moyenne actuelle est de ${m.moyenne}/20. Vise ${Math.round(p)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(p),progression:Math.round(m.moyenne),statut:"en_cours",disciplineId:m.disciplineId,disciplineNom:m.disciplineNom,dateDebut:l,dateFin:o,recompense:' Badge "En progrs"'})}const d=n.streakActuel>=5?7:n.streakActuel+2;return a.push({id:`obj_streak_${e}_${l.getTime()}`,userId:e,titre:`Maintenir un streak de ${d} jours`,description:`Tu es actuellement  ${n.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:d,progression:n.streakActuel,statut:n.streakActuel>=d?"atteint":"en_cours",dateDebut:l,dateFin:o,recompense:' Badge "Flamme"'}),a}function JX(e,r,n,a){let l=0;if(a.length>0){const v=a.reduce((b,x)=>b+x.pourcentage/100*20,0)/a.length;l=Math.min(v/20*100,100)}let o=100;const u=e.filter(v=>v.niveauUrgence==="critique").length,d=e.filter(v=>v.niveauUrgence==="important").length;o-=u*25,o-=d*15,o=Math.max(o,0);const m=Math.min(r.streakActuel/7*100,100);let p=0;n.length>0&&(p=n.filter(b=>b.statut==="atteint").length/n.length*100);const h=l*.4+o*.25+m*.2+p*.15;return Math.round(Math.min(Math.max(h,0),100))}function eZ(e,r,n){const a=yp(),l=r.filter(o=>Aj(o.datePassage)>=a);return e.map(o=>{const u={...o};switch(o.type){case"quiz_count":u.progression=l.length;break;case"score_min":if(o.disciplineId){const d=l.filter(m=>m.disciplineId===o.disciplineId);if(d.length>0){const m=Math.max(...d.map(p=>p.pourcentage));u.progression=Math.round(m/100*20)}}break;case"streak":u.progression=n.streakActuel;break}return u.progression>=u.cible&&(u.statut="atteint"),u})}async function zj(e){try{const r=await KX(e),n=WX(r),a=await XX(e);let l=ZX(e,r,a);const o=await jp(e);l=eZ(l,o,a);const u=JX(r,a,l,o);return{lacunes:r,recommandations:n,streak:a,objectifs:l,scoreGlobal:u}}catch(r){return console.error("Erreur suivi complet:",r),{lacunes:[],recommandations:[],streak:{userId:e,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function bf(e){switch(e){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function cM(e){switch(e){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function uM(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function tZ(e){return e>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":e>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":e>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":e>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function rZ(e){return e.cible===0?0:Math.min(Math.round(e.progression/e.cible*100),100)}const nZ="PEDA",aZ=4,iZ=5,sZ=40,dM=5;function Za(e){return e instanceof Ae?e.toDate():e instanceof Date?e:e?.seconds?new Date(e.seconds*1e3):new Date(e)}function mM(e){const r=new Date,n=r.getDay(),a=n===0?-6:1-n,l=new Date(r);return l.setDate(r.getDate()+a),l.setHours(0,0,0,0),l}function lZ(e){const r=mM(),n=new Date(r);return n.setDate(r.getDate()+6),n.setHours(23,59,59,999),n}function KE(e){const r=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${e.getDate()} ${r[e.getMonth()]}`}function fM(e,r){return Math.floor(Math.abs(r.getTime()-e.getTime())/864e5)}async function oZ(e){try{const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="",a="";for(let u=0;u<aZ;u++)n+=r.charAt(Math.floor(Math.random()*r.length)),a+=r.charAt(Math.floor(Math.random()*r.length));const l=`${nZ}-${n}-${a}`,o=je(Q,"users",e);return await Ge(o,{codeParent:l,codeParentGenere:new Date}),l}catch(r){throw console.error("Erreur gnration code invitation:",r),new Error("Impossible de gnrer le code d'invitation")}}async function cZ(e){try{const r=je(Q,"users",e),n=await gt(r);if(!n.exists())throw new Error("lve introuvable");const a=n.data();return a.codeParent?a.codeParent:await oZ(e)}catch(r){throw console.error("Erreur rcupration code invitation:",r),new Error("Impossible de rcuprer le code d'invitation")}}async function uZ(e,r){try{const n=r.trim().toUpperCase(),a=_e(Q,"users"),l=Ee(a,Se("codeParent","==",n),Se("role","==","eleve"),Gt(1)),o=await Ce(l);if(o.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=o.docs[0],d=u.data(),m=u.id,p=_e(Q,"liens_parent_enfant"),h=Ee(p,Se("parentId","==",e),Se("enfantId","==",m),Se("statut","==","actif"),Gt(1));if(!(await Ce(h)).empty)throw new Error("Cet enfant est dj li  votre compte.");const b={parentId:e,enfantId:m,enfantNom:d.displayName||d.email,enfantEmail:d.email,enfantClasse:d.classe||void 0,codeInvitation:n,statut:"actif",dateCreation:new Date};return{id:(await Dt(p,b)).id,...b}}catch(n){throw console.error("Erreur liaison parent-enfant:",n),n}}async function dZ(e){try{const r=_e(Q,"liens_parent_enfant"),n=Ee(r,Se("parentId","==",e),Se("statut","==","actif"),Ve("dateCreation","desc"));return(await Ce(n)).docs.map(l=>({id:l.id,...l.data(),dateCreation:Za(l.data().dateCreation),dateDerniereConsultation:l.data().dateDerniereConsultation?Za(l.data().dateDerniereConsultation):void 0}))}catch(r){return console.error("Erreur rcupration enfants lis:",r),[]}}async function mZ(e,r){try{const n=je(Q,"liens_parent_enfant",e),a=await gt(n);if(!a.exists())throw new Error("Lien introuvable");if(a.data().parentId!==r)throw new Error("Action non autorise");await Ge(n,{statut:"revoque",dateRevocation:new Date})}catch(n){throw console.error("Erreur rvocation lien:",n),n}}async function fZ(e,r){try{const n=_e(Q,"liens_parent_enfant"),a=Ee(n,Se("parentId","==",e),Se("enfantId","==",r),Se("statut","==","actif"),Gt(1)),l=await Ce(a);if(l.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const o=je(Q,"users",r),u=await gt(o);if(!u.exists())throw new Error("Profil de l'enfant introuvable.");const d=u.data(),m=await zj(r),p=await jp(r),h=p.slice(0,dM).map(j=>({quizTitre:j.quizTitre||"Quiz",disciplineNom:j.disciplineNom||"Discipline",pourcentage:j.pourcentage,noteSur20:Math.round(j.pourcentage/100*20*10)/10,reussi:j.reussi,datePassage:Za(j.datePassage)})),v=await pZ(e,r,d.displayName||d.email,m.lacunes,m.streak,m.scoreGlobal,p),b=hZ(r,d.displayName||d.email,m,p),x=l.docs[0];return await Ge(je(Q,"liens_parent_enfant",x.id),{dateDerniereConsultation:new Date}),{enfant:{id:r,nom:d.displayName||d.email,email:d.email,classe:d.classe||void 0,derniereConnexion:d.lastLogin?Za(d.lastLogin):void 0},scoreGlobal:m.scoreGlobal,streak:{actuel:m.streak.streakActuel,meilleur:m.streak.meilleurStreak,semaineCourante:m.streak.semaineCourante},lacunes:m.lacunes.map(j=>({disciplineNom:j.disciplineNom,moyenne:j.moyenne,niveauUrgence:j.niveauUrgence,tendance:j.tendance})),objectifs:m.objectifs.map(j=>({titre:j.titre,progression:j.progression,cible:j.cible,statut:j.statut})),derniersQuiz:h,resume:b,alertes:v}}catch(n){throw console.error("Erreur dashboard parent:",n),n}}async function pZ(e,r,n,a,l,o,u){const d=[],m=new Date;if(a.filter(h=>h.niveauUrgence==="critique").forEach(h=>{d.push({id:`alerte_parent_lacune_${h.id}`,parentId:e,enfantId:r,enfantNom:n,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${h.disciplineNom}`,message:`${n} a une moyenne de ${h.moyenne}/20 en ${h.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:m})}),l.dernierJourActif){const h=fM(Za(l.dernierJourActif),m);h>=iZ&&d.push({id:`alerte_parent_inactif_${r}`,parentId:e,enfantId:r,enfantNom:n,type:"inactivite",niveau:"important",titre:` ${n} est inactif`,message:`${n} n'a pas utilis PedaClic depuis ${h} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:m})}else u.length===0&&d.push({id:`alerte_parent_jamais_actif_${r}`,parentId:e,enfantId:r,enfantNom:n,type:"inactivite",niveau:"modere",titre:` ${n} n'a pas encore commenc`,message:`${n} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:m});o<sZ&&u.length>0&&d.push({id:`alerte_parent_score_${r}`,parentId:e,enfantId:r,enfantNom:n,type:"score_bas",niveau:"important",titre:` Score global bas : ${o}/100`,message:`Le score de sant global de ${n} est de ${o}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:m}),a.filter(h=>h.tendance==="hausse").forEach(h=>{d.push({id:`alerte_parent_progression_${h.id}`,parentId:e,enfantId:r,enfantNom:n,type:"progression",niveau:"info",titre:` Progression en ${h.disciplineNom}`,message:`Bonne nouvelle ! ${n} montre une tendance  la hausse en ${h.disciplineNom}.`,lue:!1,dateCreation:m})}),l.streakActuel>=5&&d.push({id:`alerte_parent_streak_${r}`,parentId:e,enfantId:r,enfantNom:n,type:"objectif_atteint",niveau:"info",titre:` Streak de ${l.streakActuel} jours !`,message:`Flicitations ! ${n} maintient un streak de ${l.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:m});const p={critique:0,important:1,modere:2,info:3};return d.sort((h,v)=>p[h.niveau]-p[v.niveau]),d}function hZ(e,r,n,a){const l=mM(),o=lZ(),u=new Date(l);u.setDate(u.getDate()-7);const d=new Date(o);d.setDate(d.getDate()-7);const m=a.filter(A=>{const z=Za(A.datePassage);return z>=l&&z<=o}),p=a.filter(A=>{const z=Za(A.datePassage);return z>=u&&z<=d}),h=m.slice(0,dM).map(A=>({quizTitre:A.quizTitre||"Quiz",disciplineNom:A.disciplineNom||"Discipline",pourcentage:A.pourcentage,noteSur20:Math.round(A.pourcentage/100*20*10)/10,reussi:A.reussi,datePassage:Za(A.datePassage)})),v=vZ(m,p),b=new Set;m.forEach(A=>{const z=Za(A.datePassage);b.add(`${z.getFullYear()}-${z.getMonth()}-${z.getDate()}`)});const x=m.reduce((A,z)=>A+(z.tempsEcoule||5),0);let j=0;if(p.length>0){const A=p.reduce((z,k)=>z+k.pourcentage,0)/p.length;j=Math.round(A)}let _="stable";const C=n.scoreGlobal-j;C>5?_="hausse":C<-5&&(_="baisse");const w=n.lacunes.filter(A=>A.niveauUrgence==="critique"||A.niveauUrgence==="important").map(A=>A.disciplineNom),E=n.objectifs.filter(A=>A.statut==="atteint").length,S=`${KE(l)} - ${KE(o)} ${o.getFullYear()}`;return{enfantId:e,enfantNom:r,semaine:S,dateDebut:l,dateFin:o,scoreGlobal:n.scoreGlobal,scoreGlobalPrecedent:j,evolutionScore:_,nombreQuizSemaine:m.length,tempsEstimeMinutes:Math.round(x),joursActifsSemaine:b.size,streakActuel:n.streak.streakActuel,derniersQuiz:h,evolutionDisciplines:v,lacunesCritiques:n.lacunes.filter(A=>A.niveauUrgence==="critique").length,lacunesImportantes:n.lacunes.filter(A=>A.niveauUrgence==="important").length,disciplinesEnDifficulte:w,objectifsAtteints:E,objectifsTotal:n.objectifs.length}}function vZ(e,r){const n=new Map;e.forEach(o=>{n.has(o.disciplineId)||n.set(o.disciplineId,{scores:[],nom:o.disciplineNom||"Discipline"}),n.get(o.disciplineId).scores.push(o.pourcentage)});const a=new Map;r.forEach(o=>{a.has(o.disciplineId)||a.set(o.disciplineId,[]),a.get(o.disciplineId).push(o.pourcentage)});const l=[];return n.forEach((o,u)=>{const d=o.scores.reduce((j,_)=>j+_,0)/o.scores.length,m=a.get(u)||[],p=m.length>0?m.reduce((j,_)=>j+_,0)/m.length:d,h=Math.round(d/100*20*10)/10,v=Math.round(p/100*20*10)/10,b=Math.round((h-v)*10)/10;let x="stable";b>1?x="hausse":b<-1&&(x="baisse"),l.push({disciplineNom:o.nom,disciplineId:u,moyenneSemainePrecedente:v,moyenneSemaineCourante:h,evolution:x,ecart:b})}),l}function gZ(e){return bf(e)}function xZ(e){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[e]||"Alerte"}function WE(e){switch(e){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function bZ(e){return e>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":e>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":e>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":e>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function kx(e){const n=fM(e,new Date);return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaine(s)`:`Il y a ${Math.floor(n/30)} mois`}const yZ="PROF",jZ=4,sm="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",pM=8,_Z=7,NZ=16;function el(e){return e instanceof Ae?e.toDate():e instanceof Date?e:e?.seconds?new Ae(e.seconds,e.nanoseconds||0).toDate():new Date(e)}function SZ(e,r){return Math.floor(Math.abs(r.getTime()-e.getTime())/864e5)}async function hM(){let e=0;const r=10;for(;e<r;){let n="",a="";for(let d=0;d<jZ;d++)n+=sm.charAt(Math.floor(Math.random()*sm.length)),a+=sm.charAt(Math.floor(Math.random()*sm.length));const l=`${yZ}-${n}-${a}`,o=Ee(_e(Q,"groupes_prof"),Se("codeInvitation","==",l),Gt(1));if((await Ce(o)).empty)return l;e++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function wZ(e,r,n){try{const a=await hM(),l={profId:e,profNom:r,nom:n.nom.trim(),description:n.description?.trim()||"",matiereId:n.matiereId,matiereNom:n.matiereNom,classeNiveau:n.classeNiveau,codeInvitation:a,nombreInscrits:0,statut:"actif",anneeScolaire:n.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},o=await Dt(_e(Q,"groupes_prof"),l);return console.log(` Groupe "${n.nom}" cr avec code: ${a}`),{id:o.id,...l}}catch(a){throw console.error(" Erreur cration groupe:",a),new Error("Impossible de crer le groupe. Ressayez.")}}async function vM(e){try{const r=Ee(_e(Q,"groupes_prof"),Se("profId","==",e),Ve("dateCreation","desc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data(),dateCreation:el(a.data().dateCreation),dateMiseAJour:a.data().dateMiseAJour?el(a.data().dateMiseAJour):void 0}))}catch(r){throw console.error(" Erreur rcupration groupes:",r),new Error("Impossible de charger vos groupes.")}}async function CZ(e){try{const r=await gt(je(Q,"groupes_prof",e));if(!r.exists())return null;const n=r.data();return{id:r.id,...n,dateCreation:el(n.dateCreation),dateMiseAJour:n.dateMiseAJour?el(n.dateMiseAJour):void 0}}catch(r){return console.error(" Erreur rcupration groupe:",r),null}}async function gM(e,r){try{const n=je(Q,"groupes_prof",e);await Ge(n,{...r,dateMiseAJour:new Date}),console.log(` Groupe ${e} mis  jour`)}catch(n){throw console.error(" Erreur modification groupe:",n),new Error("Impossible de modifier le groupe.")}}async function EZ(e){try{const r=Rn(Q),n=Ee(_e(Q,"inscriptions_groupe"),Se("groupeId","==",e));(await Ce(n)).docs.forEach(l=>r.delete(l.ref)),r.delete(je(Q,"groupes_prof",e)),await r.commit(),console.log(` Groupe ${e} et ses inscriptions supprims`)}catch(r){throw console.error(" Erreur suppression groupe:",r),new Error("Impossible de supprimer le groupe.")}}async function AZ(e){await gM(e,{statut:"archive"})}async function zZ(e){try{const r=await hM();return await Ge(je(Q,"groupes_prof",e),{codeInvitation:r,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${e}: ${r}`),r}catch(r){throw console.error(" Erreur rgnration code:",r),new Error("Impossible de rgnrer le code.")}}async function kZ(e,r,n,a){try{const l=a.trim().toUpperCase(),o=Ee(_e(Q,"groupes_prof"),Se("codeInvitation","==",l),Gt(1)),u=await Ce(o);if(u.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const d=u.docs[0],m=d.data();if(m.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const p=Ee(_e(Q,"inscriptions_groupe"),Se("groupeId","==",d.id),Se("eleveId","==",e),Se("statut","==","actif"),Gt(1));if(!(await Ce(p)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const v={groupeId:d.id,eleveId:e,eleveNom:r,eleveEmail:n,statut:"actif",dateInscription:new Date},b=await Dt(_e(Q,"inscriptions_groupe"),v);return await Ge(je(Q,"groupes_prof",d.id),{nombreInscrits:as(1),dateMiseAJour:new Date}),console.log(` lve ${r} inscrit au groupe "${m.nom}"`),{id:b.id,...v}}catch(l){throw console.error(" Erreur inscription groupe:",l),l}}async function _p(e,r="actif"){try{const n=Ee(_e(Q,"inscriptions_groupe"),Se("groupeId","==",e),Se("statut","==",r),Ve("dateInscription","asc"));return(await Ce(n)).docs.map(l=>({id:l.id,...l.data(),dateInscription:el(l.data().dateInscription),dateRetrait:l.data().dateRetrait?el(l.data().dateRetrait):void 0}))}catch(n){throw console.error(" Erreur rcupration lves groupe:",n),new Error("Impossible de charger les lves du groupe.")}}async function OZ(e){try{const r=Ee(_e(Q,"inscriptions_groupe"),Se("eleveId","==",e),Se("statut","==","actif")),n=await Ce(r);if(n.empty)return[];const a=[];for(const l of n.docs){const o=l.data().groupeId,u=await CZ(o);u&&u.statut==="actif"&&a.push(u)}return a}catch(r){return console.error(" Erreur rcupration groupes lve:",r),[]}}async function DZ(e,r){try{await Ge(je(Q,"inscriptions_groupe",e),{statut:"retire",dateRetrait:new Date}),await Ge(je(Q,"groupes_prof",r),{nombreInscrits:as(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(n){throw console.error(" Erreur retrait lve:",n),new Error("Impossible de retirer l'lve du groupe.")}}async function kj(e){try{const n=(await _p(e)).map(b=>b.eleveId);if(n.length===0)return{groupeId:e,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const a=[],l=[];for(let b=0;b<n.length;b+=10)l.push(n.slice(b,b+10));for(const b of l){const x=Ee(_e(Q,"quiz_results"),Se("userId","in",b));(await Ce(x)).docs.forEach(_=>a.push({id:_.id,..._.data()}))}const o=new Map;for(const b of a){const x=b.userId;o.has(x)||o.set(x,{total:0,somme:0,reussis:0});const j=o.get(x);j.total++,j.somme+=b.score||0,(b.score||0)>=10&&j.reussis++}let u=0,d=0,m=0,p=0,h=20,v=0;for(const[,b]of o){const x=b.total>0?b.somme/b.total:0;u+=x,d++,v+=b.total,x<pM&&m++,x>p&&(p=x),x<h&&(h=x)}return d===0&&(h=0),{groupeId:e,nombreEleves:n.length,moyenneClasse:d>0?Math.round(u/d*10)/10:0,tauxReussite:v>0?Math.round(Array.from(o.values()).reduce((b,x)=>b+x.reussis,0)/v*100):0,tauxParticipation:Math.round(d/n.length*100),totalQuizPasses:v,elevesEnDifficulte:m,meilleureNote:Math.round(p*10)/10,pireNote:Math.round(h*10)/10,derniereMiseAJour:new Date}}catch(r){throw console.error(" Erreur calcul stats groupe:",r),new Error("Impossible de calculer les statistiques du groupe.")}}async function PZ(e){try{const r=await _p(e);if(r.length===0)return[];const n=[];for(const a of r)try{const l=await zj(a.eleveId),o=Ee(_e(Q,"quiz_results"),Se("userId","==",a.eleveId),Ve("datePassage","desc")),d=(await Ce(o)).docs.map(x=>x.data());let m=0,p=0,h;if(d.length>0){const x=d.reduce((j,_)=>j+(_.score||0),0);m=Math.round(x/d.length*10)/10,p=Math.round(d.filter(j=>(j.score||0)>=10).length/d.length*100),h=el(d[0].datePassage)}let v="stable";if(d.length>=4){const x=d.slice(0,Math.ceil(d.length/2)),j=d.slice(Math.ceil(d.length/2)),_=x.reduce((w,E)=>w+(E.score||0),0)/x.length,C=j.reduce((w,E)=>w+(E.score||0),0)/j.length;_-C>1?v="hausse":C-_>1&&(v="baisse")}const b=l.lacunes.map(x=>({disciplineNom:x.disciplineNom,chapitre:x.chapitre,moyenne:x.moyenne,niveauUrgence:x.niveauUrgence}));n.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:m,totalQuiz:d.length,tauxReussite:p,scoreGlobal:l.scoreGlobal,streak:{actuel:l.streak.streakActuel,meilleur:l.streak.meilleurStreak},lacunes:b,dernierQuiz:h,tendance:v})}catch(l){console.warn(` Suivi incomplet pour lve ${a.eleveNom}:`,l),n.push({eleveId:a.eleveId,eleveNom:a.eleveNom,eleveEmail:a.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return n.sort((a,l)=>l.moyenne-a.moyenne),n}catch(r){throw console.error(" Erreur stats lves groupe:",r),new Error("Impossible de charger les statistiques des lves.")}}async function MZ(e,r,n){try{const l=(await _p(e)).map(x=>x.eleveId);if(l.length===0)return null;let o=null,u="quiz_results";if(n!=="quizzes_v2"){if(n!=="quizzes"){const x=await gt(je(Q,"quizzes_v2",r));if(x.exists())o=x.data(),u="quiz_results_v2";else{const j=await gt(je(Q,"quizzes",r));j.exists()&&(o=j.data(),u="quiz_results")}}}if(!o)return null;const d=[],m=[];for(let x=0;x<l.length;x+=10)m.push(l.slice(x,x+10));for(const x of m){const j=Ee(_e(Q,u),Se("quizId","==",r),Se("userId","in",x));(await Ce(j)).docs.forEach(C=>d.push(C.data()))}if(d.length===0)return null;const p=u==="quiz_results_v2",h=d.map(x=>p?x.note20||(x.scoreMax>0?x.score/x.scoreMax*20:0):x.score||0),v=d.map(x=>x.tempsEcoule||0),b=[];if(p&&o.questions)for(let x=0;x<o.questions.length;x++){const j=o.questions[x];let _=0,C=0;for(const S of d){const A=S.detailsParQuestion?.find(z=>z.questionId===j.id);A&&(C++,A.isCorrect||_++)}const w=C>0?Math.round(_/C*100):0,E=j.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${x+1}`;b.push({questionIndex:x,questionTexte:E,tauxEchec:w,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(o.questions)for(let x=0;x<o.questions.length;x++){const j=o.questions[x];let _=0;const C=new Map;for(const S of d){const A=S.reponses?.[x];A!==void 0&&(C.set(A,(C.get(A)||0)+1),A!==j.reponseCorrecte&&_++)}const w=Math.round(_/d.length*100),E=Array.from(C.entries()).filter(([S])=>S!==j.reponseCorrecte).map(([S,A])=>({reponse:j.options?.[S]||`Option ${S+1}`,nombre:A})).sort((S,A)=>A.nombre-S.nombre);b.push({questionIndex:x,questionTexte:j.question,tauxEchec:w,reponseCorrecte:j.options?.[j.reponseCorrecte]||"N/A",reponsesFrequentes:E})}return b.sort((x,j)=>j.tauxEchec-x.tauxEchec),{quizId:r,quizTitre:o.titre||"Quiz sans titre",disciplineNom:o.disciplineNom||o.matiereNom||"",totalPassages:d.length,moyenneScore:Math.round(h.reduce((x,j)=>x+j,0)/h.length*10)/10,tauxReussite:Math.round(h.filter(x=>x>=10).length/h.length*100),tempsEcouleMoyen:Math.round(v.reduce((x,j)=>x+j,0)/v.length),questionsRatees:b}}catch(a){return console.error(" Erreur analyse quiz groupe:",a),null}}async function TZ(e){try{const r=[];try{const n=Ee(_e(Q,"quizzes"),Se("disciplineId","==",e),Ve("createdAt","desc"));(await Ce(n)).docs.forEach(l=>{r.push({id:l.id,titre:l.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(n){console.warn(" Recherche quizzes choue (index manquant ?):",n)}try{const n=Ee(_e(Q,"quizzes_v2"),Se("disciplineId","==",e),Ve("createdAt","desc"));(await Ce(n)).docs.forEach(l=>{r.push({id:l.id,titre:l.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(n){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",n)}return console.log(` ${r.length} quiz trouv(s) pour discipline ${e}`),r}catch(r){return console.error(" Erreur rcupration quiz par matire:",r),[]}}function qZ(e,r){const n=[],a=new Date;for(const o of e){if(o.totalQuiz>0&&o.moyenne<pM&&n.push({id:`diff-${o.eleveId}`,type:"difficulte",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:r,message:`${o.eleveNom} a une moyenne de ${o.moyenne}/20. Lacunes : ${o.lacunes.map(u=>u.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:o.moyenne<5?"critique":"important",dateCreation:a}),o.dernierQuiz){const u=SZ(o.dernierQuiz,a);u>=_Z&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:r,message:`${o.eleveNom} n'a pas fait de quiz depuis ${u} jours.`,niveauUrgence:u>=14?"important":"info",dateCreation:a})}else o.totalQuiz===0&&n.push({id:`inact-${o.eleveId}`,type:"inactivite",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:r,message:`${o.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:a});o.tendance==="baisse"&&o.totalQuiz>=4&&n.push({id:`baisse-${o.eleveId}`,type:"baisse",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:r,message:`${o.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:a}),o.moyenne>=NZ&&o.totalQuiz>=3&&n.push({id:`felicite-${o.eleveId}`,type:"felicitation",eleveNom:o.eleveNom,eleveId:o.eleveId,groupeNom:r,message:`${o.eleveNom} excelle avec ${o.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:a})}const l={critique:0,important:1,info:2};return n.sort((o,u)=>l[o.niveauUrgence]-l[u.niveauUrgence]),n}function RZ(e,r){const n=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],a=e.map(o=>{const u=o.lacunes.map(d=>`${d.disciplineNom} (${d.moyenne}/20)`).join(" | ")||"Aucune";return[`"${o.eleveNom}"`,`"${o.eleveEmail}"`,o.moyenne.toString(),o.totalQuiz.toString(),o.tauxReussite.toString(),o.streak.actuel.toString(),`"${u}"`,o.tendance].join(",")});return"\uFEFF"+[n.join(","),...a].join(`
`)}function IZ(e,r){const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`${r}.csv`,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}const LZ=()=>{const{currentUser:e}=Ke(),[r,n]=g.useState([]),[a,l]=g.useState(!1),[o,u]=g.useState(""),[d,m]=g.useState(!0),[p,h]=g.useState(!1),[v,b]=g.useState(null),[x,j]=g.useState(null),_=g.useCallback(async()=>{if(e?.uid)try{m(!0);const w=await OZ(e.uid);n(w)}catch(w){console.error("Erreur chargement groupes:",w)}finally{m(!1)}},[e?.uid]);g.useEffect(()=>{_()},[_]);const C=async w=>{if(w.preventDefault(),!(!e?.uid||!o.trim()))try{h(!0),b(null),j(null),await kZ(e.uid,e.displayName||e.email||"lve",e.email||"",o),j("Tu as rejoint le groupe avec succs ! "),u(""),l(!1),await _(),setTimeout(()=>j(null),5e3)}catch(E){b(E.message||"Impossible de rejoindre le groupe.")}finally{h(!1)}};return t.jsxs("div",{className:"rejoindre-groupe-section",children:[t.jsxs("div",{className:"rejoindre-groupe-header",children:[t.jsx("h3",{children:" Mes groupes-classes"}),t.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>l(!a),children:a?" Annuler":" Rejoindre un groupe"})]}),v&&t.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",v,t.jsx("button",{onClick:()=>b(null),className:"prof-alert-close",children:""})]}),x&&t.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:x}),a&&t.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[t.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),t.jsxs("form",{onSubmit:C,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[t.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:o,onChange:w=>u(w.target.value.toUpperCase()),maxLength:14,disabled:p,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),t.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:p||o.length<14,children:p?" Vrification...":" Rejoindre"})]})]}),d?t.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):r.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[t.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),t.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.map(w=>t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[t.jsxs("div",{children:[t.jsx("strong",{style:{color:"#1f2937"},children:w.nom}),t.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[w.matiereNom,"  Prof: ",w.profNom]})]}),t.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},w.id))})]})},$Z=e=>e>=80?"#10b981":e>=60?"#3b82f6":e>=40?"#f59e0b":e>0?"#ef4444":"#d1d5db",XE=({pourcentage:e,label:r,size:n="md",showPercent:a=!0,color:l,showCheck:o=!0,className:u=""})=>{const[d,m]=g.useState(0);g.useEffect(()=>{const x=setTimeout(()=>{m(Math.min(100,Math.max(0,e)))},100);return()=>clearTimeout(x)},[e]);const h={sm:"4px",md:"8px",lg:"12px"}[n],v=l||$Z(e),b=e>=100;return t.jsxs("div",{className:`progress-bar-wrapper ${u}`,children:[(r||a)&&t.jsxs("div",{className:"progress-bar-header",children:[r&&t.jsx("span",{className:"progress-bar-label",children:r}),a&&t.jsxs("span",{className:"progress-bar-percent",style:{color:v},children:[b&&o?" ":"",e,"%"]})]}),t.jsx("div",{className:"progress-bar-track",style:{height:h},children:t.jsx("div",{className:"progress-bar-fill",style:{width:`${d}%`,backgroundColor:v,height:"100%"}})})]})},BZ=()=>{const e=Ze(),{currentUser:r}=Ke(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[m,p]=g.useState([]),[h,v]=g.useState([]),[b,x]=g.useState(null),[j,_]=g.useState([]),[C,w]=g.useState("all"),[E,S]=g.useState(!0),[A,z]=g.useState("overview"),[k,M]=g.useState(null),[D,$]=g.useState(!1),[B,H]=g.useState(!1),T=async()=>{if(r){$(!0);try{const I=await cZ(r.uid);M(I)}catch(I){console.error("Erreur gnration code parent :",I)}finally{$(!1)}}},Y=()=>{k&&(navigator.clipboard.writeText(k),H(!0),setTimeout(()=>H(!1),2e3))};if(g.useEffect(()=>{(async()=>{if(r){S(!0);try{await NI(r.uid);const[te,L,Z,W,ce,xe]=await Promise.all([fI(r.uid),pI(r.uid),hI(r.uid,20),Af(r.uid,10),HA().catch(()=>[]),yI(r.uid)]);a(te),o(L),d(Z),p(W),v(ce),x(xe);const he=SI(te,L,xe);_(he)}catch(te){console.error("Erreur chargement dashboard :",te)}finally{S(!1)}}})()},[r]),E)return t.jsxs("div",{className:"sd-loading",children:[t.jsx("div",{className:"admin-spinner"}),t.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const J=j.filter(I=>I.obtenu),P=j.length,q=r?.displayName||r?.email?.split("@")[0]||"lve",U=C==="all"?j:j.filter(I=>I.categorie===C);return t.jsxs("div",{className:"student-dashboard",children:[t.jsxs("div",{className:"sd-welcome",children:[t.jsxs("div",{className:"sd-welcome-text",children:[t.jsxs("h1",{children:["Bienvenue, ",q," "]}),t.jsx("p",{children:n&&n.totalQuizPasses>0?`Vous avez pass ${n.totalQuizPasses} quiz avec une moyenne de ${n.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),t.jsxs("div",{className:"sd-welcome-badges-row",children:[r?.isPremium&&t.jsxs("span",{className:"sd-premium-badge",children:[t.jsx(vr,{size:14})," Premium"]}),b&&b.streakActuel>0&&t.jsxs("span",{className:"sd-streak-badge",children:[" ",b.streakActuel," jour",b.streakActuel>1?"s":""]})]})]}),t.jsxs("div",{className:"sd-stats-grid",children:[t.jsxs("div",{className:"sd-stat-card",children:[t.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:t.jsx(gn,{size:22})}),t.jsxs("div",{className:"sd-stat-content",children:[t.jsx("span",{className:"sd-stat-value",children:n?.totalQuizPasses||0}),t.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),t.jsxs("div",{className:"sd-stat-card",children:[t.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:t.jsx(Lv,{size:22})}),t.jsxs("div",{className:"sd-stat-content",children:[t.jsxs("span",{className:"sd-stat-value",style:{color:no(n?.moyenneGenerale||0)},children:[n?.moyenneGenerale||0,"%"]}),t.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),t.jsxs("div",{className:"sd-stat-card",children:[t.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:t.jsx(oo,{size:22})}),t.jsxs("div",{className:"sd-stat-content",children:[t.jsx("span",{className:"sd-stat-value",children:b?.totalRessourcesVues||0}),t.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),t.jsxs("div",{className:"sd-stat-card",children:[t.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:t.jsx(_A,{size:22})}),t.jsxs("div",{className:"sd-stat-content",children:[t.jsxs("span",{className:"sd-stat-value",children:[b?.streakActuel||0," "]}),t.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),t.jsxs("div",{className:"sd-stat-card",children:[t.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:t.jsx(NA,{size:22})}),t.jsxs("div",{className:"sd-stat-content",children:[t.jsxs("span",{className:"sd-stat-value",children:[n?.meilleurScore||0,"%"]}),t.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),t.jsxs("div",{className:"sd-stat-card",children:[t.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:t.jsx(ts,{size:22})}),t.jsxs("div",{className:"sd-stat-content",children:[t.jsxs("span",{className:"sd-stat-value",children:[b?.disciplinesCompletees||0,"/",b?.disciplinesCommencees||0]}),t.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),t.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[t.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),t.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),k?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[t.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:k}),t.jsx("button",{className:"sd-btn",onClick:Y,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:B?"#10b981":"#f3f4f6",color:B?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:B?" Copi !":" Copier"})]}):t.jsx("button",{className:"sd-btn sd-btn-primary",onClick:T,disabled:D,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:D?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):t.jsx(t.Fragment,{children:" Gnrer mon code"})})]}),t.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:t.jsx(LZ,{})}),t.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[t.jsxs("h3",{className:"sd-section-title",children:[t.jsx(gn,{size:18})," Cours en ligne"]}),t.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Des cours complets du programme sngalais, accessibles partout."}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",alignItems:"center"},children:[t.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e("/cours"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(io,{size:16})," Accder aux cours"]}),r?.isPremium&&jo(r.subscriptionPlan)&&t.jsxs("button",{className:"sd-btn",onClick:()=>e("/premium/mes-cours"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",background:"#f0fdf4",color:"#15803d",border:"1px solid #86efac"},children:[t.jsx(vr,{size:16})," Choisir mes cours"]})]}),!r?.isPremium&&t.jsxs("div",{style:{marginTop:"1.25rem",padding:"1rem",background:"#eff6ff",borderRadius:"12px",border:"1px solid #93c5fd"},children:[t.jsx("p",{style:{fontWeight:600,color:"#1e40af",marginBottom:"0.5rem"},children:"Passer Premium"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#3b82f6",marginBottom:"0.75rem"},children:"Dbloquez tous les cours premium et accdez aux quiz illimits."}),t.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e("/premium"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(vr,{size:16})," Dcouvrir les formules"]})]})]}),t.jsxs("div",{className:"sd-tabs",children:[t.jsxs("button",{className:`sd-tab ${A==="overview"?"active":""}`,onClick:()=>z("overview"),children:[t.jsx(Us,{size:16})," Vue d'ensemble"]}),t.jsxs("button",{className:`sd-tab ${A==="progression"?"active":""}`,onClick:()=>z("progression"),children:[t.jsx(Tc,{size:16})," Progression"]}),t.jsxs("button",{className:`sd-tab ${A==="history"?"active":""}`,onClick:()=>z("history"),children:[t.jsx($v,{size:16})," Historique"]}),t.jsxs("button",{className:`sd-tab ${A==="badges"?"active":""}`,onClick:()=>z("badges"),children:[t.jsx(ts,{size:16})," Badges (",J.length,"/",P,")"]})]}),A==="overview"&&t.jsxs("div",{className:"sd-overview",children:[u.length>1&&t.jsxs("div",{className:"sd-chart-card",children:[t.jsxs("h3",{className:"sd-section-title",children:[t.jsx(Tc,{size:18})," volution de vos scores"]}),t.jsx("div",{className:"sd-chart-container",children:t.jsx(Dw,{width:"100%",height:280,children:t.jsxs(BX,{data:u,children:[t.jsx(Ab,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),t.jsx(Pb,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),t.jsx(qb,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),t.jsx(L2,{formatter:I=>[`${I}%`,"Score"],labelFormatter:I=>`Date : ${I}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),t.jsx(HP,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),l.length>0&&t.jsxs("div",{className:"sd-chart-card",children:[t.jsxs("h3",{className:"sd-section-title",children:[t.jsx(Us,{size:18})," Moyennes par discipline"]}),t.jsx("div",{className:"sd-chart-container",children:t.jsx(Dw,{width:"100%",height:280,children:t.jsxs(FX,{data:l,layout:"vertical",children:[t.jsx(Ab,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),t.jsx(Pb,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),t.jsx(qb,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),t.jsx(L2,{formatter:I=>[`${I}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),t.jsx(WP,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:l.map((I,te)=>t.jsx(gj,{fill:no(I.moyenne)},te))})]})})})]}),h.length>0&&t.jsxs("div",{className:"sd-chart-card",children:[t.jsxs("h3",{className:"sd-section-title",children:[t.jsx(io,{size:18})," Quiz disponibles"]}),t.jsx("div",{className:"sd-quiz-grid",children:h.slice(0,6).map(I=>{const te=I.isPremium&&!r?.isPremium;return t.jsxs("div",{className:`sd-quiz-card ${te?"locked":""}`,onClick:()=>!te&&e(`/quiz/${I.id}`),children:[I.isPremium&&t.jsxs("span",{className:"sd-quiz-badge-premium",children:[te?t.jsx(ym,{size:10}):t.jsx(vr,{size:10})," Premium"]}),t.jsx("h4",{className:"sd-quiz-title",children:I.titre}),t.jsxs("div",{className:"sd-quiz-meta",children:[t.jsxs("span",{children:[t.jsx(gn,{size:12})," ",I.questions.length," questions"]}),t.jsxs("span",{children:[t.jsx(mo,{size:12})," ",I.duree," min"]})]}),!te&&t.jsxs("button",{className:"sd-quiz-play-btn",children:[t.jsx(io,{size:14})," Commencer"]}),te&&t.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:L=>{L.stopPropagation(),e("/premium")},children:[t.jsx(ym,{size:14})," Dbloquer"]})]},I.id)})})]}),n&&n.totalQuizPasses===0&&(!b||b.totalRessourcesVues===0)&&t.jsxs("div",{className:"sd-empty-state",children:[t.jsx(Lv,{size:48}),t.jsx("h3",{children:"Commencez votre parcours !"}),t.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),h.length>0&&t.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>e(`/quiz/${h[0].id}`),children:[t.jsx(io,{size:18})," Passer un quiz"]})]})]}),A==="progression"&&t.jsxs("div",{className:"sd-progression",children:[t.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[t.jsxs("h3",{className:"sd-section-title",children:[t.jsx(Tc,{size:18})," Avancement global"]}),t.jsx(XE,{pourcentage:b?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),t.jsxs("div",{className:"sd-prog-stats-row",children:[t.jsxs("div",{className:"sd-prog-stat-item",children:[t.jsx("span",{className:"sd-prog-stat-number",children:b?.totalRessourcesVues||0}),t.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),t.jsxs("div",{className:"sd-prog-stat-item",children:[t.jsx("span",{className:"sd-prog-stat-number",children:b?.totalQuizReussis||0}),t.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),t.jsxs("div",{className:"sd-prog-stat-item",children:[t.jsx("span",{className:"sd-prog-stat-number",children:b?.disciplinesCommencees||0}),t.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),t.jsxs("div",{className:"sd-prog-stat-item",children:[t.jsxs("span",{className:"sd-prog-stat-number",children:[" ",b?.streakActuel||0]}),t.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",b?.meilleurStreak||0,")"]})]})]})]}),b&&b.parDiscipline.length>0?t.jsxs("div",{className:"sd-chart-card",children:[t.jsxs("h3",{className:"sd-section-title",children:[t.jsx(Us,{size:18})," Par discipline"]}),t.jsx("div",{className:"sd-prog-disciplines",children:b.parDiscipline.map(I=>t.jsxs("div",{className:"sd-prog-disc-card",children:[t.jsxs("div",{className:"sd-prog-disc-header",children:[t.jsx("span",{className:"sd-prog-disc-name",children:I.disciplineNom}),I.pourcentage>=100&&t.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),t.jsx(XE,{pourcentage:I.pourcentage,size:"md",showPercent:!0}),t.jsxs("div",{className:"sd-prog-disc-details",children:[t.jsxs("span",{children:[t.jsx(oo,{size:12})," ",I.ressourcesVues.length,"/",I.totalRessources," ressources"]}),t.jsxs("span",{children:[t.jsx(Bt,{size:12})," ",I.quizReussis.length,"/",I.totalQuiz," quiz russis"]})]})]},I.disciplineId))})]}):t.jsxs("div",{className:"sd-empty-state",children:[t.jsx(oo,{size:48}),t.jsx("h3",{children:"Aucune progression enregistre"}),t.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),l.length>0&&t.jsxs("div",{className:"sd-chart-card",children:[t.jsxs("h3",{className:"sd-section-title",children:[t.jsx(Lv,{size:18})," Performance quiz par discipline"]}),t.jsx("div",{className:"sd-disc-list",children:l.map(I=>t.jsxs("div",{className:"sd-disc-card",children:[t.jsxs("div",{className:"sd-disc-header",children:[t.jsx("span",{className:"sd-disc-name",children:I.disciplineNom}),t.jsxs("span",{className:"sd-disc-tendance",children:[I.tendance==="up"&&t.jsx(Tc,{size:16,className:"tendance-up"}),I.tendance==="down"&&t.jsx(I3,{size:16,className:"tendance-down"}),I.tendance==="stable"&&t.jsx(L3,{size:16,className:"tendance-stable"})]})]}),t.jsxs("div",{className:"sd-disc-stats",children:[t.jsxs("div",{className:"sd-disc-stat",children:[t.jsxs("span",{className:"sd-disc-stat-value",style:{color:no(I.moyenne)},children:[I.moyenne,"%"]}),t.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),t.jsxs("div",{className:"sd-disc-stat",children:[t.jsx("span",{className:"sd-disc-stat-value",children:I.nombreQuiz}),t.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),t.jsxs("div",{className:"sd-disc-stat",children:[t.jsxs("span",{className:"sd-disc-stat-value",children:[I.meilleurScore,"%"]}),t.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),t.jsxs("div",{className:"sd-disc-stat",children:[t.jsxs("span",{className:"sd-disc-stat-value",children:[I.quizReussis,"/",I.nombreQuiz]}),t.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),t.jsx("div",{className:"sd-disc-bar",children:t.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${I.moyenne}%`,background:no(I.moyenne)}})})]},I.disciplineId))})]})]}),A==="history"&&t.jsx("div",{className:"sd-history",children:m.length===0?t.jsxs("div",{className:"sd-empty-state",children:[t.jsx($v,{size:48}),t.jsx("h3",{children:"Aucun quiz pass"}),t.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):t.jsx("div",{className:"sd-history-list",children:m.map(I=>{const te=I.datePassage?.toDate?I.datePassage.toDate():new Date(I.datePassage);return t.jsxs("div",{className:`sd-history-item ${I.reussi?"success":"fail"}`,children:[t.jsx("div",{className:`sd-history-icon ${I.reussi?"success":"fail"}`,children:I.reussi?t.jsx(Bt,{size:20}):t.jsx(Px,{size:20})}),t.jsxs("div",{className:"sd-history-content",children:[t.jsxs("div",{className:"sd-history-top",children:[t.jsx("span",{className:"sd-history-title",children:I.quizTitre}),t.jsx("span",{className:"sd-history-discipline",children:I.disciplineNom})]}),t.jsxs("div",{className:"sd-history-meta",children:[t.jsxs("span",{children:[t.jsx($v,{size:12}),te.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),t.jsxs("span",{children:[t.jsx(mo,{size:12})," ",ZA(I.tempsEcoule)]}),t.jsxs("span",{children:[t.jsx(Bt,{size:12})," ",I.bonnesReponses,"/",I.nombreQuestions]})]})]}),t.jsxs("div",{className:"sd-history-score",style:{color:no(I.pourcentage)},children:[t.jsxs("span",{className:"sd-history-score-value",children:[I.pourcentage,"%"]}),t.jsx("span",{className:"sd-history-score-label",children:JA(I.pourcentage)})]})]},I.id)})})}),A==="badges"&&t.jsxs("div",{className:"sd-badges",children:[t.jsxs("div",{className:"sd-badges-summary",children:[t.jsxs("div",{className:"sd-badges-circle",children:[t.jsx("span",{className:"sd-badges-count",children:J.length}),t.jsxs("span",{className:"sd-badges-total",children:["/ ",P]})]}),t.jsx("p",{children:"badges obtenus"}),t.jsx("div",{className:"sd-badges-progress",children:t.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${J.length/P*100}%`}})})]}),t.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(I=>t.jsx("button",{className:`sd-badge-filter-btn ${C===I.key?"active":""}`,onClick:()=>w(I.key),children:I.label},I.key))}),t.jsx("div",{className:"sd-badges-grid",children:U.map(I=>t.jsxs("div",{className:`sd-badge-card ${I.obtenu?"obtained":"locked"}`,children:[t.jsx("span",{className:"sd-badge-icon",children:I.icone}),t.jsx("h4",{className:"sd-badge-name",children:I.nom}),t.jsx("p",{className:"sd-badge-description",children:I.description}),t.jsx("span",{className:"sd-badge-condition",children:I.condition}),I.obtenu&&t.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),t.jsx("span",{className:"sd-badge-category",children:I.categorie})]},I.id))}),U.length===0&&t.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[t.jsx(Vb,{size:36}),t.jsx("h3",{children:"Aucun badge dans cette catgorie"}),t.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},UZ=()=>{const{currentUser:e}=Ke(),r=Ze(),[n,a]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null),m=["L","M","M","J","V","S","D"],p=g.useCallback(async()=>{if(e?.uid)try{o(!0),d(null);const S=await zj(e.uid);a(S)}catch(S){console.error("Erreur chargement suivi:",S),d("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{o(!1)}},[e?.uid]);g.useEffect(()=>{p()},[p]);const h=(()=>{const S=new Date().getDay();return S===0?6:S-1})();if(l)return t.jsx("div",{className:"suivi-page",children:t.jsx("div",{className:"suivi-container",children:t.jsxs("div",{className:"suivi-loading",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(u)return t.jsx("div",{className:"suivi-page",children:t.jsx("div",{className:"suivi-container",children:t.jsxs("div",{className:"suivi-error",children:[t.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),t.jsx("p",{className:"suivi-error-text",children:u}),t.jsx("button",{className:"suivi-btn-retry",onClick:p,children:" Ressayer"})]})})});if(!n)return null;const{lacunes:v,recommandations:b,streak:x,objectifs:j,scoreGlobal:_}=n,C=2*Math.PI*40,w=C-_/100*C,E=_>=60?"#10b981":_>=30?"#f59e0b":"#ef4444";return t.jsx("div",{className:"suivi-page",children:t.jsxs("div",{className:"suivi-container",children:[t.jsx("div",{className:"suivi-header",children:t.jsxs("div",{className:"suivi-header-content",children:[t.jsxs("div",{children:[t.jsx("h1",{children:" Mes points  amliorer"}),t.jsx("p",{className:"suivi-motivation",children:tZ(_)})]}),t.jsxs("div",{className:"score-global-circle",children:[t.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[t.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),t.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:E,strokeDasharray:C,strokeDashoffset:w}),t.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:_})]}),t.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),t.jsxs("div",{className:"streak-card",children:[t.jsxs("div",{className:"streak-header",children:[t.jsx("span",{className:"streak-flamme",children:x.streakActuel>0?"":""}),t.jsxs("div",{children:[t.jsx("div",{className:"streak-nombre",children:x.streakActuel}),t.jsx("div",{className:"streak-label",children:x.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),t.jsx("div",{className:"streak-semaine",children:m.map((S,A)=>t.jsxs("div",{className:"streak-jour",children:[t.jsx("span",{className:"streak-jour-label",children:S}),t.jsx("div",{className:`streak-jour-indicateur ${x.semaineCourante[A]?"actif":"inactif"} ${A===h?"aujourd-hui":""}`,children:x.semaineCourante[A]?"":""})]},A))}),t.jsxs("div",{className:"streak-stats",children:[t.jsxs("div",{className:"streak-stat",children:[t.jsx("span",{className:"streak-stat-icon",children:""}),t.jsx("span",{className:"streak-stat-value",children:x.meilleurStreak}),t.jsx("span",{className:"streak-stat-label",children:"record"})]}),t.jsxs("div",{className:"streak-stat",children:[t.jsx("span",{className:"streak-stat-icon",children:""}),t.jsx("span",{className:"streak-stat-value",children:x.totalJoursActifs}),t.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),x.dernierJourActif&&t.jsxs("div",{className:"streak-stat",children:[t.jsx("span",{className:"streak-stat-icon",children:""}),t.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(x.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),t.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",t.jsx("span",{className:"suivi-section-badge",children:j.length})]}),j.length>0?t.jsx("div",{className:"objectifs-grid",children:j.map(S=>{const A=rZ(S);return t.jsxs("div",{className:`objectif-card ${S.statut==="atteint"?"atteint":""}`,children:[t.jsxs("div",{className:"objectif-header",children:[t.jsx("span",{className:"objectif-titre",children:S.titre}),S.recompense&&t.jsx("span",{className:"objectif-recompense",children:S.recompense})]}),t.jsx("p",{className:"objectif-description",children:S.description}),t.jsxs("div",{className:"objectif-progress",children:[t.jsxs("div",{className:"objectif-progress-labels",children:[t.jsxs("span",{className:"objectif-progress-value",children:[S.progression," / ",S.cible]}),t.jsxs("span",{className:"objectif-progress-cible",children:[A,"%"]})]}),t.jsx("div",{className:"objectif-progress-track",children:t.jsx("div",{className:`objectif-progress-fill ${S.statut==="atteint"?"atteint":""}`,style:{width:`${A}%`}})})]}),t.jsx("p",{className:`objectif-statut ${S.statut}`,children:S.statut==="atteint"?" Objectif atteint !":S.statut==="en_cours"?" En cours...":" Non commenc"})]},S.id)})}):t.jsxs("div",{className:"suivi-empty",children:[t.jsx("div",{className:"suivi-empty-icon",children:""}),t.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),t.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),t.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",v.length>0&&t.jsx("span",{className:"suivi-section-badge",children:v.length})]}),v.length>0?t.jsx("div",{className:"lacunes-grid",children:v.map(S=>t.jsxs("div",{className:`lacune-card ${S.niveauUrgence}`,children:[t.jsxs("div",{className:"lacune-card-header",children:[t.jsx("span",{className:"lacune-discipline",children:S.disciplineNom}),t.jsx("span",{className:`lacune-badge ${S.niveauUrgence}`,children:cM(S.niveauUrgence)})]}),t.jsxs("div",{className:"lacune-score-bar",children:[t.jsxs("div",{className:"lacune-score-labels",children:[t.jsxs("span",{className:"lacune-score-value",style:{color:bf(S.niveauUrgence)},children:[S.moyenne,"/20"]}),t.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),t.jsx("div",{className:"lacune-progress-track",children:t.jsx("div",{className:`lacune-progress-fill ${S.niveauUrgence}`,style:{width:`${S.moyenne/20*100}%`}})})]}),t.jsxs("div",{className:"lacune-details",children:[t.jsxs("span",{className:"lacune-detail-tag",children:[uM(S.tendance)," ",S.tendance]}),t.jsxs("span",{className:"lacune-detail-tag",children:[" ",S.nombreQuiz," quiz"]}),t.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",S.scoreDetails.dernierScore,"/20"]})]})]},S.id))}):t.jsxs("div",{className:"suivi-empty",children:[t.jsx("div",{className:"suivi-empty-icon",children:""}),t.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),t.jsx("p",{className:"suivi-empty-text",children:_>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),t.jsx("button",{className:"suivi-cta-btn",onClick:()=>r("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),b.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",t.jsx("span",{className:"suivi-section-badge",children:b.length})]}),t.jsx("div",{className:"recommandations-list",children:b.map(S=>t.jsxs("div",{className:"recommandation-card",children:[t.jsx("div",{className:"recommandation-priorite",children:S.priorite}),t.jsxs("div",{className:"recommandation-content",children:[t.jsx("p",{className:"recommandation-titre",children:S.titre}),t.jsx("p",{className:"recommandation-description",children:S.description}),t.jsx("span",{className:"recommandation-discipline-tag",children:S.disciplineNom})]})]},S.id))})]}),t.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:t.jsx("button",{className:"suivi-cta-btn",onClick:()=>r("/disciplines"),children:" Passer un quiz maintenant"})})]})})},FZ=()=>{const e=new Date,r=e.getFullYear(),a=e.getMonth()>=9?r:r-1,l=[];for(let o=-1;o<=3;o++){const u=a+o;l.push(`${u}-${u+1}`)}return l},ZE=FZ(),Dc=()=>{const e=new Date,r=e.getFullYear(),a=e.getMonth()>=9?r:r-1;return`${a}-${a+1}`},JE=ss.map(e=>({value:e.valeur,label:e.label})),GZ=({onSelectGroupe:e})=>{const{currentUser:r}=Ke(),[n,a]=g.useState([]),[l,o]=g.useState(new Map),[u,d]=g.useState([]),[m,p]=g.useState(!0),[h,v]=g.useState(null),[b,x]=g.useState(!1),[j,_]=g.useState(!1),[C,w]=g.useState(null),[E,S]=g.useState(null),[A,z]=g.useState(null),[k,M]=g.useState(!1),[D,$]=g.useState(null),[B,H]=g.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:hr[0],anneeScolaire:Dc()}),[T,Y]=g.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:hr[0],anneeScolaire:Dc()}),[J,P]=g.useState("actif");g.useEffect(()=>{(async()=>{try{const V=await is.getAll();d(V.map(de=>({id:de.id,nom:de.nom,classe:de.classe||""})))}catch(V){console.warn(" Impossible de charger les disciplines:",V)}})()},[]);const q=g.useCallback(async()=>{if(r?.uid)try{p(!0),v(null);const ee=await vM(r.uid);a(ee);const V=new Map;for(const de of ee)if(de.statut==="actif")try{const we=await kj(de.id);V.set(de.id,we)}catch{console.warn(`Stats indisponibles pour ${de.nom}`)}o(V)}catch(ee){console.error("Erreur chargement groupes:",ee),v("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{p(!1)}},[r?.uid]);g.useEffect(()=>{q()},[q]);const U=(ee,V=!1)=>{const de=u.find(Te=>Te.id===ee),we=de?`${de.nom}${de.classe?` (${de.classe})`:""}`:"";V?Y(Te=>({...Te,matiereId:ee,matiereNom:we})):H(Te=>({...Te,matiereId:ee,matiereNom:we}))},I=async ee=>{if(ee.preventDefault(),!(!r?.uid||!B.nom.trim()||!B.matiereId))try{_(!0),await wZ(r.uid,r.displayName||r.email||"Professeur",B),H({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:hr[0],anneeScolaire:Dc()}),x(!1),$("Groupe cr avec succs !"),setTimeout(()=>$(null),3e3),await q()}catch(V){v(V.message||"Erreur lors de la cration du groupe.")}finally{_(!1)}},te=ee=>{z(ee);const V=Tx(ee.classeNiveau)||hr[0];Y({nom:ee.nom,description:ee.description||"",matiereId:ee.matiereId,matiereNom:ee.matiereNom,classeNiveau:V,anneeScolaire:ee.anneeScolaire}),x(!1)},L=()=>{z(null),Y({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:hr[0],anneeScolaire:Dc()})},Z=async ee=>{if(ee.preventDefault(),!(!A||!T.nom.trim()||!T.matiereId))try{M(!0),await gM(A.id,{nom:T.nom.trim(),description:T.description?.trim()||"",matiereId:T.matiereId,matiereNom:T.matiereNom,classeNiveau:T.classeNiveau,anneeScolaire:T.anneeScolaire}),z(null),$("Groupe modifi avec succs !"),setTimeout(()=>$(null),3e3),await q()}catch(V){v(V.message||"Erreur lors de la modification du groupe.")}finally{M(!1)}},W=async ee=>{try{await navigator.clipboard.writeText(ee),w(ee),setTimeout(()=>w(null),2e3)}catch{const V=document.createElement("textarea");V.value=ee,document.body.appendChild(V),V.select(),document.execCommand("copy"),document.body.removeChild(V),w(ee),setTimeout(()=>w(null),2e3)}},ce=async ee=>{try{await EZ(ee),S(null),await q()}catch(V){v(V.message)}},xe=async ee=>{try{await AZ(ee),await q()}catch(V){v(V.message)}},he=async ee=>{try{await zZ(ee),await q()}catch(V){v(V.message)}},F=(ee,V)=>{H(de=>({...de,[ee]:V}))},ve=(ee,V)=>{Y(de=>({...de,[ee]:V}))},Pe=n.filter(ee=>J==="tous"?!0:ee.statut===J),ue=(ee,V,de)=>t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:ee,children:"Discipline / Matire *"}),t.jsxs("select",{id:ee,value:V,onChange:we=>de(we.target.value),className:"prof-select",required:!0,children:[t.jsx("option",{value:"",children:" Slectionner une discipline "}),u.map(we=>t.jsxs("option",{value:we.id,children:[we.nom,we.classe?` (${we.classe})`:""]},we.id))]}),u.length===0&&t.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return m?t.jsxs("div",{className:"prof-loading",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):t.jsxs("div",{className:"groupe-manager",children:[t.jsxs("div",{className:"groupe-manager-header",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),t.jsxs("p",{className:"groupe-manager-subtitle",children:[n.length," groupe",n.length!==1?"s":"","  Anne ",Dc()]})]}),t.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{x(!b),A&&L()},children:b?" Annuler":" Nouveau groupe"})]}),h&&t.jsxs("div",{className:"prof-alert prof-alert-error",children:[t.jsx("span",{children:""})," ",h,t.jsx("button",{onClick:()=>v(null),className:"prof-alert-close",children:""})]}),D&&t.jsxs("div",{className:"prof-alert prof-alert-success",children:[t.jsx("span",{children:""})," ",D,t.jsx("button",{onClick:()=>$(null),className:"prof-alert-close",children:""})]}),b&&t.jsxs("div",{className:"groupe-form-container",children:[t.jsx("h3",{children:"Crer un nouveau groupe-classe"}),t.jsxs("form",{onSubmit:I,className:"groupe-form",children:[t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),t.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:B.nom,onChange:ee=>F("nom",ee.target.value),required:!0,className:"prof-input",maxLength:60})]}),t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),t.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:B.description||"",onChange:ee=>F("description",ee.target.value),className:"prof-input",maxLength:120})]}),t.jsxs("div",{className:"prof-form-row",children:[t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),t.jsx("select",{id:"groupe-niveau",value:B.classeNiveau,onChange:ee=>F("classeNiveau",ee.target.value),className:"prof-select",children:JE.map(ee=>t.jsx("option",{value:ee.value,children:ee.label},ee.value))})]}),t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),t.jsx("select",{id:"groupe-annee",value:B.anneeScolaire,onChange:ee=>F("anneeScolaire",ee.target.value),className:"prof-select",children:ZE.map(ee=>t.jsx("option",{value:ee,children:ee},ee))})]})]}),ue("groupe-discipline",B.matiereId,ee=>U(ee,!1)),t.jsx("div",{className:"prof-form-actions",children:t.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:j||!B.nom.trim()||!B.matiereId,children:j?" Cration...":" Crer le groupe"})})]})]}),A&&t.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[t.jsxs("h3",{children:[" Modifier le groupe : ",A.nom]}),t.jsxs("form",{onSubmit:Z,className:"groupe-form",children:[t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),t.jsx("input",{id:"edit-groupe-nom",type:"text",value:T.nom,onChange:ee=>ve("nom",ee.target.value),required:!0,className:"prof-input",maxLength:60})]}),t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),t.jsx("input",{id:"edit-groupe-desc",type:"text",value:T.description||"",onChange:ee=>ve("description",ee.target.value),className:"prof-input",maxLength:120})]}),t.jsxs("div",{className:"prof-form-row",children:[t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),t.jsx("select",{id:"edit-groupe-niveau",value:T.classeNiveau,onChange:ee=>ve("classeNiveau",ee.target.value),className:"prof-select",children:JE.map(ee=>t.jsx("option",{value:ee.value,children:ee.label},ee.value))})]}),t.jsxs("div",{className:"prof-form-group",children:[t.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),t.jsx("select",{id:"edit-groupe-annee",value:T.anneeScolaire,onChange:ee=>ve("anneeScolaire",ee.target.value),className:"prof-select",children:ZE.map(ee=>t.jsx("option",{value:ee,children:ee},ee))})]})]}),ue("edit-groupe-discipline",T.matiereId,ee=>U(ee,!0)),t.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[t.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:k||!T.nom.trim()||!T.matiereId,children:k?" Enregistrement...":" Enregistrer"}),t.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:L,disabled:k,children:" Annuler"})]})]})]}),t.jsxs("div",{className:"groupe-filtres",children:[t.jsxs("button",{className:`prof-filtre-btn ${J==="actif"?"active":""}`,onClick:()=>P("actif"),children:["Actifs (",n.filter(ee=>ee.statut==="actif").length,")"]}),t.jsxs("button",{className:`prof-filtre-btn ${J==="archive"?"active":""}`,onClick:()=>P("archive"),children:["Archivs (",n.filter(ee=>ee.statut==="archive").length,")"]}),t.jsxs("button",{className:`prof-filtre-btn ${J==="tous"?"active":""}`,onClick:()=>P("tous"),children:["Tous (",n.length,")"]})]}),Pe.length===0?t.jsxs("div",{className:"prof-empty-state",children:[t.jsx("div",{className:"prof-empty-icon",children:""}),t.jsx("h3",{children:J==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),t.jsx("p",{children:J==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),J!=="archive"&&t.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>x(!0),children:" Crer mon premier groupe"})]}):t.jsx("div",{className:"groupe-grid",children:Pe.map(ee=>{const V=l.get(ee.id),de=A?.id===ee.id;return t.jsxs("div",{className:`groupe-card ${ee.statut==="archive"?"groupe-card-archive":""} ${de?"groupe-card-editing":""}`,children:[t.jsxs("div",{className:"groupe-card-header",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"groupe-card-titre",children:ee.nom}),t.jsx("span",{className:"groupe-card-matiere",children:ee.matiereNom})]}),t.jsx("span",{className:`groupe-badge groupe-badge-${ee.statut}`,children:ee.statut==="actif"?" Actif":" Archiv"})]}),ee.description&&t.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:ee.description}),t.jsxs("div",{className:"groupe-card-infos",children:[t.jsxs("span",{children:[" ",ee.classeNiveau]}),t.jsxs("span",{children:[" ",ee.anneeScolaire]}),t.jsxs("span",{children:[" ",ee.nombreInscrits," lve",ee.nombreInscrits!==1?"s":""]})]}),t.jsxs("div",{className:"groupe-card-code",children:[t.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),t.jsxs("div",{className:"groupe-code-box",children:[t.jsx("code",{className:"groupe-code-value",children:ee.codeInvitation}),t.jsx("button",{className:"prof-btn-icon",onClick:we=>{we.stopPropagation(),W(ee.codeInvitation)},title:"Copier le code",children:C===ee.codeInvitation?"":""}),ee.statut==="actif"&&t.jsx("button",{className:"prof-btn-icon",onClick:we=>{we.stopPropagation(),he(ee.id)},title:"Rgnrer le code",children:""})]})]}),V&&V.nombreEleves>0&&t.jsxs("div",{className:"groupe-card-stats",children:[t.jsxs("div",{className:"groupe-stat-item",children:[t.jsx("span",{className:"groupe-stat-value",children:V.moyenneClasse}),t.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),t.jsxs("div",{className:"groupe-stat-item",children:[t.jsxs("span",{className:"groupe-stat-value",children:[V.tauxReussite,"%"]}),t.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),t.jsxs("div",{className:"groupe-stat-item",children:[t.jsx("span",{className:"groupe-stat-value",children:V.elevesEnDifficulte}),t.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),t.jsxs("div",{className:"groupe-card-actions",children:[ee.statut==="actif"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>e(ee),children:" Voir dtails"}),t.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>te(ee),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),t.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>xe(ee.id),children:" Archiver"})]}),E===ee.id?t.jsxs("div",{className:"groupe-confirm-suppression",children:[t.jsx("span",{children:"Confirmer ?"}),t.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>ce(ee.id),children:"Oui, supprimer"}),t.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>S(null),children:"Non"})]}):t.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>S(ee.id),children:" Supprimer"})]})]},ee.id)})})]})},HZ=({groupe:e,onRetour:r})=>{const[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState([]),[m,p]=g.useState([]),[h,v]=g.useState(null),[b,x]=g.useState(!0),[j,_]=g.useState(null),[C,w]=g.useState("apercu"),[E,S]=g.useState("moyenne_desc"),[A,z]=g.useState(null),[k,M]=g.useState(null),[D,$]=g.useState(!1),[B,H]=g.useState(null),T=g.useCallback(async()=>{try{x(!0),_(null);const[L,Z,W]=await Promise.all([kj(e.id),PZ(e.id),TZ(e.matiereId)]);a(L),o(Z),p(W);const ce=qZ(Z,e.nom);d(ce)}catch(L){console.error("Erreur chargement dtail groupe:",L),_("Impossible de charger les donnes du groupe.")}finally{x(!1)}},[e.id,e.matiereId,e.nom]);g.useEffect(()=>{T()},[T]);const Y=async L=>{try{$(!0),M(L);const Z=await MZ(e.id,L);v(Z)}catch(Z){console.error("Erreur analyse quiz:",Z)}finally{$(!1)}},J=()=>{const L=RZ(l,e.nom),Z=`PedaClic_${e.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;IZ(L,Z)},P=async L=>{try{H(L);const W=(await _p(e.id)).find(ce=>ce.eleveId===L);W&&(await DZ(W.id,e.id),await T())}catch(Z){_(Z.message)}finally{H(null)}},q=[...l].sort((L,Z)=>{switch(E){case"moyenne_desc":return Z.moyenne-L.moyenne;case"moyenne_asc":return L.moyenne-Z.moyenne;case"nom":return L.eleveNom.localeCompare(Z.eleveNom);case"streak":return Z.streak.actuel-L.streak.actuel;case"quiz_count":return Z.totalQuiz-L.totalQuiz;default:return 0}}),U=L=>L>=16?"prof-note-excellent":L>=12?"prof-note-bien":L>=10?"prof-note-passable":L>=8?"prof-note-insuffisant":"prof-note-critique",I=L=>{switch(L){case"hausse":return"";case"baisse":return"";default:return""}},te=L=>{switch(L){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return b?t.jsxs("div",{className:"prof-loading",children:[t.jsx("div",{className:"spinner"}),t.jsxs("p",{children:['Chargement des donnes de "',e.nom,'"...']})]}):t.jsxs("div",{className:"groupe-detail",children:[t.jsxs("div",{className:"groupe-detail-header",children:[t.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:r,children:" Retour aux groupes"}),t.jsxs("div",{className:"groupe-detail-titre-section",children:[t.jsx("h2",{className:"groupe-detail-titre",children:e.nom}),t.jsxs("p",{className:"groupe-detail-subtitle",children:[e.matiereNom,"  ",e.classeNiveau,"  ",e.anneeScolaire]})]}),t.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:J,children:" Export CSV"})]}),j&&t.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",j,t.jsx("button",{onClick:()=>_(null),className:"prof-alert-close",children:""})]}),t.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:l.length},{id:"quiz",label:" Quiz",count:m.length},{id:"alertes",label:" Alertes",count:u.length}].map(L=>t.jsxs("button",{className:`groupe-onglet ${C===L.id?"active":""}`,onClick:()=>w(L.id),children:[L.label,L.count!==null&&L.count>0&&t.jsx("span",{className:"groupe-onglet-badge",children:L.count})]},L.id))}),C==="apercu"&&n&&t.jsxs("div",{className:"groupe-apercu",children:[t.jsxs("div",{className:"groupe-stats-grid",children:[t.jsxs("div",{className:"groupe-stat-card",children:[t.jsx("div",{className:"groupe-stat-card-icon",children:""}),t.jsxs("div",{className:"groupe-stat-card-content",children:[t.jsxs("span",{className:`groupe-stat-card-value ${U(n.moyenneClasse)}`,children:[n.moyenneClasse,"/20"]}),t.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),t.jsxs("div",{className:"groupe-stat-card",children:[t.jsx("div",{className:"groupe-stat-card-icon",children:""}),t.jsxs("div",{className:"groupe-stat-card-content",children:[t.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxReussite,"%"]}),t.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),t.jsxs("div",{className:"groupe-stat-card",children:[t.jsx("div",{className:"groupe-stat-card-icon",children:""}),t.jsxs("div",{className:"groupe-stat-card-content",children:[t.jsx("span",{className:"groupe-stat-card-value",children:n.nombreEleves}),t.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),t.jsxs("div",{className:"groupe-stat-card",children:[t.jsx("div",{className:"groupe-stat-card-icon",children:""}),t.jsxs("div",{className:"groupe-stat-card-content",children:[t.jsx("span",{className:"groupe-stat-card-value",children:n.totalQuizPasses}),t.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),t.jsxs("div",{className:"groupe-stat-card",children:[t.jsx("div",{className:"groupe-stat-card-icon",children:""}),t.jsxs("div",{className:"groupe-stat-card-content",children:[t.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxParticipation,"%"]}),t.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),t.jsxs("div",{className:"groupe-stat-card",children:[t.jsx("div",{className:"groupe-stat-card-icon",children:""}),t.jsxs("div",{className:"groupe-stat-card-content",children:[t.jsx("span",{className:`groupe-stat-card-value ${n.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:n.elevesEnDifficulte}),t.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),t.jsx("div",{className:"groupe-apercu-notes",children:t.jsxs("div",{className:"groupe-note-range",children:[t.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),t.jsxs("span",{className:"prof-note-critique",children:[n.pireNote,"/20"]}),t.jsx("div",{className:"groupe-note-barre",children:t.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${n.pireNote/20*100}%`,width:`${(n.meilleureNote-n.pireNote)/20*100}%`}})}),t.jsxs("span",{className:"prof-note-excellent",children:[n.meilleureNote,"/20"]})]})}),l.length>=3&&t.jsxs("div",{className:"groupe-apercu-classement",children:[t.jsxs("div",{className:"groupe-classement-section",children:[t.jsx("h4",{children:" Top 3"}),l.slice(0,3).map((L,Z)=>t.jsxs("div",{className:"groupe-classement-item",children:[t.jsx("span",{className:"groupe-classement-rang",children:Z===0?"":Z===1?"":""}),t.jsx("span",{className:"groupe-classement-nom",children:L.eleveNom}),t.jsxs("span",{className:`groupe-classement-note ${U(L.moyenne)}`,children:[L.moyenne,"/20"]})]},L.eleveId))]}),t.jsxs("div",{className:"groupe-classement-section",children:[t.jsx("h4",{children:"  surveiller"}),l.filter(L=>L.moyenne<8&&L.totalQuiz>0).slice(0,3).map(L=>t.jsxs("div",{className:"groupe-classement-item",children:[t.jsx("span",{className:"groupe-classement-rang",children:""}),t.jsx("span",{className:"groupe-classement-nom",children:L.eleveNom}),t.jsxs("span",{className:`groupe-classement-note ${U(L.moyenne)}`,children:[L.moyenne,"/20"]})]},L.eleveId)),l.filter(L=>L.moyenne<8&&L.totalQuiz>0).length===0&&t.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),C==="eleves"&&t.jsxs("div",{className:"groupe-eleves",children:[t.jsxs("div",{className:"groupe-eleves-toolbar",children:[t.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),t.jsxs("select",{id:"tri-eleves",value:E,onChange:L=>S(L.target.value),className:"prof-select prof-select-sm",children:[t.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),t.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),t.jsx("option",{value:"nom",children:"Nom (A-Z)"}),t.jsx("option",{value:"streak",children:"Streak ()"}),t.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),t.jsxs("span",{className:"groupe-eleves-count",children:[l.length," lve",l.length!==1?"s":""]})]}),l.length===0?t.jsxs("div",{className:"prof-empty-state",children:[t.jsx("div",{className:"prof-empty-icon",children:""}),t.jsx("h3",{children:"Aucun lve inscrit"}),t.jsxs("p",{children:["Partagez le code ",t.jsx("strong",{children:e.codeInvitation}),"  vos lves."]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"groupe-eleves-table-wrapper",children:t.jsxs("table",{className:"groupe-eleves-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"#"}),t.jsx("th",{children:"lve"}),t.jsx("th",{children:"Moyenne"}),t.jsx("th",{children:"Quiz"}),t.jsx("th",{children:"Russite"}),t.jsx("th",{children:"Streak"}),t.jsx("th",{children:"Tendance"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:q.map((L,Z)=>t.jsxs("tr",{className:`${A===L.eleveId?"groupe-eleve-row-active":""}`,children:[t.jsx("td",{className:"groupe-eleve-rang",children:Z+1}),t.jsx("td",{className:"groupe-eleve-nom-cell",children:t.jsxs("div",{children:[t.jsx("strong",{children:L.eleveNom}),t.jsx("span",{className:"groupe-eleve-email",children:L.eleveEmail})]})}),t.jsx("td",{children:t.jsxs("span",{className:`groupe-note-badge ${U(L.moyenne)}`,children:[L.moyenne,"/20"]})}),t.jsx("td",{children:L.totalQuiz}),t.jsxs("td",{children:[L.tauxReussite,"%"]}),t.jsx("td",{children:t.jsxs("span",{className:"groupe-streak",children:[" ",L.streak.actuel,"j"]})}),t.jsxs("td",{children:[I(L.tendance)," ",L.tendance]}),t.jsxs("td",{className:"groupe-eleve-actions",children:[t.jsx("button",{className:"prof-btn-icon",onClick:()=>z(A===L.eleveId?null:L.eleveId),title:"Voir dtails",children:A===L.eleveId?"":""}),t.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>P(L.eleveId),disabled:B===L.eleveId,title:"Retirer du groupe",children:B===L.eleveId?"":""})]})]},L.eleveId))})]})}),A&&(()=>{const L=l.find(Z=>Z.eleveId===A);return L?t.jsxs("div",{className:"groupe-eleve-detail",children:[t.jsxs("div",{className:"groupe-eleve-detail-header",children:[t.jsxs("h3",{children:[" Dtail  ",L.eleveNom]}),t.jsx("button",{className:"prof-btn-icon",onClick:()=>z(null),children:""})]}),t.jsxs("div",{className:"groupe-eleve-detail-grid",children:[t.jsxs("div",{className:"groupe-eleve-detail-card",children:[t.jsx("h4",{children:"Score global"}),t.jsx("div",{className:"groupe-eleve-score-circle",children:t.jsxs("span",{className:U(L.scoreGlobal/5),children:[L.scoreGlobal,"/100"]})})]}),t.jsxs("div",{className:"groupe-eleve-detail-card",children:[t.jsx("h4",{children:" Streak"}),t.jsxs("p",{children:["Actuel : ",t.jsxs("strong",{children:[L.streak.actuel," jour",L.streak.actuel!==1?"s":""]})]}),t.jsxs("p",{children:["Meilleur : ",L.streak.meilleur," jours"]})]}),t.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[t.jsx("h4",{children:" Lacunes dtectes"}),L.lacunes.length===0?t.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):t.jsx("ul",{className:"groupe-lacunes-liste",children:L.lacunes.map((Z,W)=>t.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${Z.niveauUrgence}`,children:[t.jsxs("span",{className:"groupe-lacune-nom",children:[Z.disciplineNom,Z.chapitre&&`  ${Z.chapitre}`]}),t.jsxs("span",{className:"groupe-lacune-moyenne",children:[Z.moyenne,"/20"]}),t.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${Z.niveauUrgence}`,children:Z.niveauUrgence})]},W))})]})]})]}):null})()]})]}),C==="quiz"&&t.jsxs("div",{className:"groupe-quiz",children:[t.jsxs("div",{className:"groupe-quiz-selector",children:[t.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),t.jsxs("select",{id:"select-quiz",value:k||"",onChange:L=>{L.target.value&&Y(L.target.value)},className:"prof-select",children:[t.jsx("option",{value:"",children:" Choisir un quiz "}),m.map(L=>t.jsx("option",{value:L.id,children:L.titre},L.id))]})]}),!k&&t.jsxs("div",{className:"prof-empty-state",children:[t.jsx("div",{className:"prof-empty-icon",children:""}),t.jsx("h3",{children:"Analyse par quiz"}),t.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),D&&t.jsxs("div",{className:"prof-loading",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Analyse en cours..."})]}),h&&!D&&t.jsxs("div",{className:"groupe-quiz-resultats",children:[t.jsxs("div",{className:"groupe-quiz-stats-header",children:[t.jsx("h3",{children:h.quizTitre}),t.jsxs("div",{className:"groupe-quiz-stats-grid",children:[t.jsxs("div",{className:"groupe-stat-mini",children:[t.jsx("span",{className:"groupe-stat-mini-value",children:h.totalPassages}),t.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),t.jsxs("div",{className:"groupe-stat-mini",children:[t.jsxs("span",{className:`groupe-stat-mini-value ${U(h.moyenneScore)}`,children:[h.moyenneScore,"/20"]}),t.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),t.jsxs("div",{className:"groupe-stat-mini",children:[t.jsxs("span",{className:"groupe-stat-mini-value",children:[h.tauxReussite,"%"]}),t.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),t.jsxs("div",{className:"groupe-stat-mini",children:[t.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(h.tempsEcouleMoyen/60),"min"]}),t.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),t.jsxs("div",{className:"groupe-quiz-questions",children:[t.jsx("h4",{children:" Questions les plus rates"}),h.questionsRatees.filter(L=>L.tauxEchec>30).map((L,Z)=>t.jsxs("div",{className:"groupe-quiz-question-card",children:[t.jsxs("div",{className:"groupe-quiz-question-header",children:[t.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",L.questionIndex+1]}),t.jsxs("span",{className:"groupe-quiz-question-echec",children:[L.tauxEchec,"% d'chec"]})]}),t.jsx("p",{className:"groupe-quiz-question-texte",children:L.questionTexte}),t.jsx("div",{className:"groupe-quiz-question-reponse",children:t.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",L.reponseCorrecte]})}),L.reponsesFrequentes.length>0&&t.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[t.jsx("span",{children:"Erreurs frquentes :"}),L.reponsesFrequentes.slice(0,2).map((W,ce)=>t.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",W.reponse," (",W.nombre," lve",W.nombre>1?"s":"",")"]},ce))]})]},Z)),h.questionsRatees.filter(L=>L.tauxEchec>30).length===0&&t.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),C==="alertes"&&t.jsx("div",{className:"groupe-alertes",children:u.length===0?t.jsxs("div",{className:"prof-empty-state",children:[t.jsx("div",{className:"prof-empty-icon",children:""}),t.jsx("h3",{children:"Aucune alerte"}),t.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):t.jsx("div",{className:"groupe-alertes-liste",children:u.map(L=>t.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${L.niveauUrgence}`,children:[t.jsxs("div",{className:"groupe-alerte-header",children:[t.jsx("span",{className:"groupe-alerte-emoji",children:te(L.type)}),t.jsx("span",{className:"groupe-alerte-eleve",children:L.eleveNom}),t.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${L.niveauUrgence}`,children:L.niveauUrgence})]}),t.jsx("p",{className:"groupe-alerte-message",children:L.message}),t.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{w("eleves"),z(L.eleveId)},children:" Voir dtail"})]},L.id))})})]})},VZ=()=>{const{currentUser:e}=Ke(),r=Ze(),[n,a]=g.useState("overview"),[l,o]=g.useState(null),[u,d]=g.useState(0),[m,p]=g.useState(0),[h,v]=g.useState(0),[b,x]=g.useState(0),[j,_]=g.useState([]),[C,w]=g.useState(!0),E=g.useCallback(async()=>{if(e?.uid)try{w(!0);const k=(await vM(e.uid)).filter(T=>T.statut==="actif");d(k.length);let M=0,D=0,$=0,B=0;const H=[];for(const T of k)try{const Y=await kj(T.id);M+=Y.nombreEleves,Y.nombreEleves>0&&(D+=Y.moyenneClasse,$++),B+=Y.elevesEnDifficulte,H.push({...T,stats:Y})}catch{H.push({...T})}p(M),v($>0?Math.round(D/$*10)/10:0),x(B),_(H)}catch(z){console.error("Erreur chargement rsum prof:",z)}finally{w(!1)}},[e?.uid]);g.useEffect(()=>{E()},[E]);const S=z=>{o(z),a("detail")},A=()=>{o(null),a("groupes"),E()};return C?t.jsxs("div",{className:"prof-loading",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Chargement de votre espace professeur..."})]}):t.jsxs("div",{className:"prof-dashboard",children:[t.jsxs("header",{className:"prof-dashboard-header",style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),t.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",e?.displayName||"Professeur"," ",e?.isPremium&&t.jsxs("span",{style:{marginLeft:"0.5rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[t.jsx(vr,{size:14,style:{color:"#f59e0b"}})," Premium"]})]})]}),e?.isPremium&&jo(e.subscriptionPlan)&&t.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:()=>r("/premium/mes-cours"),style:{fontSize:"0.875rem"},children:" Choisir mes cours"})]}),n!=="detail"&&t.jsxs("nav",{className:"prof-nav",children:[t.jsx("button",{className:`prof-nav-btn ${n==="overview"?"active":""}`,onClick:()=>a("overview"),children:" Vue d'ensemble"}),t.jsx("button",{className:`prof-nav-btn ${n==="groupes"?"active":""}`,onClick:()=>a("groupes"),children:" Mes groupes-classes"}),t.jsx("button",{className:"prof-nav-btn",onClick:()=>r("/prof/cahiers"),children:" Cahier de textes"}),t.jsx("button",{className:"prof-nav-btn",onClick:()=>r("/prof/sequences"),children:" Squences pdagogiques"}),t.jsx("button",{className:"prof-nav-btn",onClick:()=>r("/prof/cours"),children:" Cours en ligne"})]}),n==="overview"&&t.jsxs("div",{className:"prof-overview",children:[t.jsxs("div",{className:"prof-overview-cards",children:[t.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>a("groupes"),children:[t.jsx("div",{className:"prof-overview-card-icon",children:""}),t.jsxs("div",{className:"prof-overview-card-content",children:[t.jsx("span",{className:"prof-overview-card-value",children:u}),t.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",u!==1?"s":""," actif",u!==1?"s":""]})]})]}),t.jsxs("div",{className:"prof-overview-card",children:[t.jsx("div",{className:"prof-overview-card-icon",children:""}),t.jsxs("div",{className:"prof-overview-card-content",children:[t.jsx("span",{className:"prof-overview-card-value",children:m}),t.jsxs("span",{className:"prof-overview-card-label",children:["lve",m!==1?"s":""," inscrit",m!==1?"s":""]})]})]}),t.jsxs("div",{className:"prof-overview-card",children:[t.jsx("div",{className:"prof-overview-card-icon",children:""}),t.jsxs("div",{className:"prof-overview-card-content",children:[t.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),t.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),t.jsxs("div",{className:"prof-overview-card",children:[t.jsx("div",{className:"prof-overview-card-icon",children:""}),t.jsxs("div",{className:"prof-overview-card-content",children:[t.jsx("span",{className:`prof-overview-card-value ${b>0?"prof-note-critique":""}`,children:b}),t.jsxs("span",{className:"prof-overview-card-label",children:["lve",b!==1?"s":""," en difficult"]})]})]})]}),!e?.isPremium&&t.jsxs("div",{className:"prof-premium-apercu",style:{marginBottom:"2rem",padding:"1.5rem",background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",borderRadius:"16px",border:"1px solid #93c5fd"},children:[t.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:700,color:"#1e40af",marginBottom:"0.5rem"},children:" Premium Pro  Outils pdagogiques"}),t.jsx("p",{style:{color:"#3b82f6",fontSize:"0.9375rem",marginBottom:"1.25rem"},children:"Cahier de textes, Gnrateur de contenus IA, Cours en ligne, Mdiathque"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[{icone:"",titre:"Cahier de textes",path:"/prof/cahiers"},{icone:"",titre:"Gnrateur IA",path:"/generateur"},{icone:"",titre:"Cours en ligne",path:"/prof/cours"},{icone:"",titre:"Mdiathque",path:"/mediatheque"},{icone:"",titre:"Squences",path:"/prof/sequences"}].map(z=>t.jsxs("div",{onClick:()=>r("/premium"),role:"button",tabIndex:0,onKeyDown:k=>k.key==="Enter"&&r("/premium"),style:{padding:"1rem",background:"rgba(255,255,255,0.8)",borderRadius:"12px",border:"2px dashed #93c5fd",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.5rem"},children:z.icone}),t.jsx("span",{style:{fontWeight:600,fontSize:"0.875rem",color:"#1e40af",textAlign:"center"},children:z.titre}),t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:"#64748b"},children:[t.jsx(ym,{size:12})," Premium Pro"]})]},z.path))}),t.jsxs("button",{className:"prof-btn prof-btn-primary",onClick:()=>r("/premium"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(vr,{size:18})," Choisir une formule Premium"]})]}),j.length===0?t.jsxs("div",{className:"prof-empty-state",children:[t.jsx("div",{className:"prof-empty-icon",children:""}),t.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),t.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),t.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>a("groupes"),children:" Crer un groupe-classe"})]}):t.jsxs("div",{className:"prof-overview-groupes",children:[t.jsx("h2",{children:"Mes groupes"}),t.jsx("div",{className:"prof-overview-groupes-grid",children:j.map(z=>t.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>S(z),children:[t.jsxs("div",{className:"prof-overview-groupe-header",children:[t.jsx("h3",{children:z.nom}),t.jsx("span",{className:"prof-overview-groupe-matiere",children:z.matiereNom})]}),z.stats&&t.jsxs("div",{className:"prof-overview-groupe-stats",children:[t.jsxs("div",{children:[t.jsx("span",{className:"prof-overview-groupe-stat-value",children:z.stats.nombreEleves}),t.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[z.stats.moyenneClasse,"/20"]}),t.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[z.stats.tauxReussite,"%"]}),t.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),t.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},z.id))})]})]}),n==="groupes"&&t.jsx(GZ,{onSelectGroupe:S}),n==="detail"&&l&&t.jsx(HZ,{groupe:l,onRetour:A})]})},cs="cahiers_textes",ia="entrees_cahier",QZ="groupes_prof",YZ="ebooks";async function KZ(e,r){const n=[Se("profId","==",e),Ve("updatedAt","desc")],a=Ee(_e(Q,cs),...n);return(await Ce(a)).docs.map(o=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...o.data(),id:o.id}))}const xM=e=>KZ(e);async function WZ(){const e=Ee(_e(Q,cs),Ve("updatedAt","desc"),Gt(100));return(await Ce(e)).docs.map(n=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...n.data(),id:n.id}))}function XZ(e,r,n,a){const l=[Se("profId","==",e),Ve("updatedAt","desc")];r&&l.splice(1,0,Se("anneeScolaire","==",r));const o=Ee(_e(Q,cs),...l);return Ef(o,u=>{n(u.docs.map(d=>({groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...d.data(),id:d.id})))},a)}async function bM(e){const r=await gt(je(Q,cs,e));return r.exists()?{groupeIds:[],groupeNoms:[],isPartage:!1,isArchived:!1,...r.data(),id:r.id}:null}const yM=e=>iJ(e);async function ZZ(e){const r=await gt(je(Q,ia,e));return r.exists()?{id:r.id,...r.data()}:null}async function JZ(e,r,n,a){const l=`${Date.now()}_${n.name}`,o=`cahiers/${e}/${r}/${l}`,u=sr(Jt,o),d=ou(u,n);return new Promise((m,p)=>{d.on("state_changed",h=>{},p,async()=>{const h=await qn(d.snapshot.ref);m({id:l,nom:n.name,url:h,type:n.type,taille:n.size,mimeType:n.type,uploadedAt:new Date().toISOString()})})})}async function eA(e,r,n){await Ge(je(Q,ia,e),{piecesJointes:Gb(...n),updatedAt:Ae.now()})}async function eJ(e,r,n){const a=r.find(l=>l.url===n);try{a?.id&&await Ls(sr(Jt,`cahiers/${a.id}`))}catch{}a&&await Ge(je(Q,ia,e),{piecesJointes:m3(a),updatedAt:Ae.now()})}async function tJ(e,r){const n=Ae.now(),a=r.titre?.trim()||`${r.matiere} ${r.classe} ${r.anneeScolaire}`;return(await Dt(_e(Q,cs),{profId:e,titre:a,matiere:r.matiere,classe:r.classe,anneeScolaire:r.anneeScolaire,description:r.description||"",couleur:r.couleur,nombreSeancesPrevu:r.nombreSeancesPrevu,nombreSeancesRealise:0,isArchived:!1,groupeIds:r.groupeIds??[],groupeNoms:r.groupeNoms??[],isPartage:r.isPartage??!1,createdAt:n,updatedAt:n})).id}async function yf(e,r){const n={...r};if("matiere"in r&&"classe"in r&&!("id"in r)){const a=r;a.titre?.trim()||(n.titre=`${a.matiere} ${a.classe} ${a.anneeScolaire}`)}await Ge(je(Q,cs,e),{...n,updatedAt:Ae.now()})}async function rJ(e){await Gr(je(Q,cs,e))}async function nJ(e){const r=await gt(je(Q,cs,e));if(!r.exists())return null;const n=r.data();return n.isPartage?{id:r.id,...n}:null}async function jM(e){const r=Ee(_e(Q,QZ),Se("profId","==",e),Ve("nom","asc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}async function aJ(){return(await Ce(_e(Q,YZ))).docs.map(r=>({id:r.id,...r.data()}))}async function iJ(e){const r=Ee(_e(Q,ia),Se("cahierId","==",e),Ve("ordre","asc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}const sJ=async(e,r,n)=>{const a=Ae.fromDate(new Date(r,n,1)),l=Ae.fromDate(new Date(r,n+1,0,23,59,59)),o=Ee(_e(Q,ia),Se("cahierId","==",e),Se("date",">=",a),Se("date","<=",l),Ve("date","asc"));return(await Ce(o)).docs.map(d=>({id:d.id,...d.data()}))},lJ=async(e,r)=>{const n=[Se("profId","==",e),Se("isMarqueEvaluation","==",!0),Ve("date","desc")];r&&n.unshift(Se("cahierId","==",r));const a=Ee(_e(Q,ia),...n);return(await Ce(a)).docs.map(o=>({id:o.id,...o.data()}))},oJ=async e=>{const n=(await Ce(Ee(_e(Q,ia),Se("cahierId","==",e)))).docs.map(u=>u.data()),a=n.length,l={realise:0,planifie:0,annule:0,reporte:0},o={};for(const u of n){const d=u.statut;d in l&&l[d]++,u.typeContenu&&(o[u.typeContenu]=(o[u.typeContenu]??0)+1)}return{total:a,...l,parType:o,tauxRealisation:a>0?Math.round(l.realise/a*100):0}};async function cJ(e){const r=Ee(_e(Q,ia),Se("cahierId","==",e),Se("statut","==","realise"),Ve("date","desc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}async function uJ(e,r,n){const a=Ae.now();let l;if(typeof e=="string"){const u=n;l={cahierId:e,profId:r,date:Ae.fromDate(new Date(u.date)),heureDebut:u.heureDebut||"",heureFin:u.heureFin||"",chapitre:u.chapitre,typeContenu:u.typeContenu,contenu:u.contenu,objectifs:u.objectifs||"",competences:u.competences||[],statut:u.statut,motifAnnulation:u.motifAnnulation||"",dateReport:u.dateReport?Ae.fromDate(new Date(u.dateReport)):null,notesPrivees:u.notesPrivees||"",isMarqueEvaluation:u.isMarqueEvaluation,typeEvaluation:u.typeEvaluation||null,dateEvaluationPrevue:u.dateEvaluationPrevue?Ae.fromDate(new Date(u.dateEvaluationPrevue)):null,statutEvaluation:u.statutEvaluation,ordre:Date.now(),piecesJointes:[],liens:[],ebooksLies:[],contenuIA:[]}}else l={liens:[],ebooksLies:[],piecesJointes:[],contenuIA:[],...e};return(await Dt(_e(Q,ia),{...l,createdAt:a,updatedAt:a})).id}async function Bc(e,r,n){let a;if(typeof r=="string"&&n){const l=n;a={date:Ae.fromDate(new Date(l.date)),heureDebut:l.heureDebut||"",heureFin:l.heureFin||"",chapitre:l.chapitre,typeContenu:l.typeContenu,contenu:l.contenu,objectifs:l.objectifs||"",competences:l.competences||[],statut:l.statut,motifAnnulation:l.motifAnnulation||"",dateReport:l.dateReport?Ae.fromDate(new Date(l.dateReport)):null,notesPrivees:l.notesPrivees||"",isMarqueEvaluation:l.isMarqueEvaluation,typeEvaluation:l.typeEvaluation||null,dateEvaluationPrevue:l.dateEvaluationPrevue?Ae.fromDate(new Date(l.dateEvaluationPrevue)):null,statutEvaluation:l.statutEvaluation}}else a={...r};await Ge(je(Q,ia,e),{...a,updatedAt:Ae.now()})}async function dJ(e){await Gr(je(Q,ia,e))}const tA=()=>({classe:"3me",matiere:"Mathmatiques",anneeScolaire:"2025-2026",titre:"",description:"",couleur:"#2563eb",nombreSeancesPrevu:30,groupeIds:[],groupeNoms:[],isPartage:!1}),mJ=()=>{const{currentUser:e}=Ke(),r=Ze(),[n]=bA(),[a,l]=g.useState([]),[o,u]=g.useState(!0),[d,m]=g.useState("2025-2026"),[p,h]=g.useState(!1),[v,b]=g.useState(null),[x,j]=g.useState(tA()),[_,C]=g.useState(!1),[w,E]=g.useState(""),{matieres:S,loading:A}=na(),[z,k]=g.useState([]),[M,D]=g.useState([]);if(!e?.isPremium&&e?.role!=="admin")return t.jsx("div",{className:"cahier-textes-page",children:t.jsxs("div",{className:"premium-gate",children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),t.jsx("h2",{children:"Cahier de Textes Numrique"}),t.jsxs("p",{children:["Cette fonctionnalit est rserve aux enseignants Premium.",t.jsx("br",{}),"Passez au Premium pour organiser, planifier et suivre votre enseignement."]}),t.jsx("button",{className:"btn-primary",onClick:()=>r("/premium"),children:" Passer au Premium  2 000 FCFA/mois"})]})});g.useEffect(()=>{if(!e?.uid)return;u(!0);const P=XZ(e.uid,d||void 0,q=>{l(q),u(!1)},q=>{console.error("Erreur chargement cahiers:",q),u(!1)});return()=>P()},[e?.uid,d]),g.useEffect(()=>{if(!e?.uid)return;jM(e.uid).then(k).catch(I=>console.error("Erreur chargement groupes:",I));const P=n.get("groupeId"),q=n.get("groupeNom"),U=n.get("classe");P&&q&&(D([P]),j(I=>({...I,classe:U||I.classe,groupeIds:[P],groupeNoms:[q]})),b(null),E(""),h(!0))},[e?.uid]);const $=()=>{b(null),j(tA()),D([]),E(""),h(!0)},B=(P,q)=>{q.stopPropagation(),b(P),D(P.groupeIds??[]),j({classe:P.classe,matiere:P.matiere,anneeScolaire:P.anneeScolaire,titre:P.titre,description:P.description||"",couleur:P.couleur,nombreSeancesPrevu:P.nombreSeancesPrevu,groupeIds:P.groupeIds??[],groupeNoms:P.groupeNoms??[],isPartage:P.isPartage??!1}),E(""),h(!0)},H=P=>{D(q=>{const U=q.includes(P)?q.filter(te=>te!==P):[...q,P],I=U.map(te=>z.find(L=>L.id===te)?.nom??"").filter(Boolean);return j(te=>({...te,groupeIds:U,groupeNoms:I})),U})},T=async P=>{if(P.preventDefault(),!!e?.uid){C(!0),E("");try{v?await yf(v.id,x):await tJ(e.uid,x),h(!1)}catch(q){const U=q instanceof Error?q.message:String(q);E("Erreur : "+U)}finally{C(!1)}}},Y=async(P,q)=>{if(q.stopPropagation(),!!confirm(`Supprimer le cahier "${P.titre}" et toutes ses entres ?`))try{await rJ(P.id),l(U=>U.filter(I=>I.id!==P.id))}catch{alert("Erreur lors de la suppression.")}},J=P=>P.nombreSeancesPrevu>0?Math.min(100,Math.round(P.nombreSeancesRealise/P.nombreSeancesPrevu*100)):0;return t.jsxs("div",{className:"cahier-textes-page",children:[t.jsxs("div",{className:"cahier-page-header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"cahier-page-title",children:" Cahier de Textes"}),t.jsx("p",{className:"cahier-page-subtitle",children:"Organisez et planifiez votre enseignement"})]}),t.jsx("button",{className:"btn-primary",onClick:$,children:"+ Nouveau cahier"})]}),t.jsxs("div",{className:"cahier-filtres",children:[t.jsx("label",{style:{fontSize:"0.85rem",color:"#6b7280",fontWeight:600},children:"Anne scolaire :"}),t.jsxs("select",{className:"filtre-select",value:d,onChange:P=>m(P.target.value),children:[t.jsx("option",{value:"",children:"Toutes les annes"}),G1.map(P=>t.jsx("option",{value:P,children:P},P))]})]}),o?t.jsx("div",{className:"loading-spinner",children:t.jsx("div",{className:"spinner-circle"})}):a.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{style:{fontSize:"3rem",opacity:.3,marginBottom:"0.75rem"},children:""}),t.jsxs("h3",{children:["Aucun cahier pour ",d||"cette priode"]}),t.jsx("p",{children:"Crez votre premier cahier de textes pour commencer  planifier votre enseignement."}),t.jsx("button",{className:"btn-primary",onClick:$,style:{marginTop:"1rem"},children:"+ Crer mon premier cahier"})]}):t.jsx("div",{className:"cahiers-grid",children:a.map(P=>{const q=J(P);return t.jsxs("div",{className:"cahier-card",onClick:()=>r(`/prof/cahiers/${P.id}`),children:[t.jsx("div",{style:{height:4,background:P.couleur,borderRadius:"12px 12px 0 0"}}),t.jsx("div",{className:"cahier-card-header",children:t.jsxs("div",{style:{flex:1},children:[t.jsx("h3",{className:"cahier-card-titre",children:P.titre}),t.jsxs("div",{className:"cahier-card-meta",children:[t.jsx("span",{className:"badge-classe",children:P.classe}),t.jsx("span",{className:"badge-matiere",children:P.matiere}),t.jsx("span",{className:"badge-annee",children:P.anneeScolaire})]}),(P.groupeIds?.length??0)>0&&t.jsxs("span",{className:`badge-partage ${P.isPartage?"actif":""}`,style:{marginTop:6,display:"inline-flex"},children:[P.isPartage?" Partag avec":" Li "," ",P.groupeIds.length," groupe",P.groupeIds.length>1?"s":""]})]})}),t.jsxs("div",{className:"cahier-card-body",children:[P.description&&t.jsxs("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 0.75rem",lineHeight:1.5},children:[P.description.substring(0,80),P.description.length>80?"...":""]}),t.jsxs("div",{className:"progression-bar-wrap",children:[t.jsxs("div",{className:"progression-label",children:[t.jsx("span",{children:"Progression"}),t.jsxs("span",{style:{fontWeight:700,color:P.couleur},children:[q,"%"]})]}),t.jsx("div",{className:"progression-bar-bg",children:t.jsx("div",{className:"progression-bar-fill",style:{width:`${q}%`,background:P.couleur}})}),t.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:"0.3rem"},children:[P.nombreSeancesRealise," / ",P.nombreSeancesPrevu," sances ralises"]})]})]}),t.jsxs("div",{className:"cahier-card-footer",children:[t.jsxs("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:["Mis  jour le ",P.updatedAt?.toDate().toLocaleDateString("fr-FR")||""]}),t.jsxs("div",{className:"cahier-actions",children:[t.jsx("button",{className:"btn-icon",onClick:U=>B(P,U),title:"Modifier",children:""}),t.jsx("button",{className:"btn-icon",onClick:U=>Y(P,U),title:"Supprimer",style:{color:"#ef4444"},children:""})]})]})]},P.id)})}),p&&t.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:t.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[t.jsxs("h2",{className:"modal-title",children:[" ",v?"Modifier le cahier":"Nouveau cahier de textes"]}),t.jsxs("form",{onSubmit:T,children:[t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Classe *"}),t.jsx("select",{className:"form-select",value:x.classe,onChange:P=>j(q=>({...q,classe:P.target.value})),required:!0,children:hr.map(P=>t.jsx("option",{value:P,children:P},P))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Matire *"}),t.jsxs("select",{className:"form-select",value:x.matiere,onChange:P=>j(q=>({...q,matiere:P.target.value})),required:!0,disabled:A,children:[t.jsx("option",{value:"",children:A?"Chargement":" Slectionner "}),S.map(P=>t.jsx("option",{value:P.valeur,children:P.label},P.valeur)),x.matiere&&!S.find(P=>P.valeur===x.matiere)&&t.jsx("option",{value:x.matiere,children:x.matiere})]})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Anne scolaire *"}),t.jsx("select",{className:"form-select",value:x.anneeScolaire,onChange:P=>j(q=>({...q,anneeScolaire:P.target.value})),children:G1.map(P=>t.jsx("option",{value:P,children:P},P))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Titre personnalis"}),t.jsx("input",{className:"form-input",placeholder:`Ex: Maths 3me A - ${x.anneeScolaire}`,value:x.titre,onChange:P=>j(q=>({...q,titre:P.target.value}))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Nombre de sances prvues"}),t.jsx("input",{type:"number",className:"form-input",min:"1",max:"200",value:x.nombreSeancesPrevu,onChange:P=>j(q=>({...q,nombreSeancesPrevu:Number(P.target.value)}))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Description / Objectifs (optionnel)"}),t.jsx("textarea",{className:"form-textarea",placeholder:"Objectifs gnraux, groupe classe, notes...",value:x.description,onChange:P=>j(q=>({...q,description:P.target.value})),rows:2})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Couleur du cahier"}),t.jsx("div",{className:"couleur-picker",children:k5.map(P=>t.jsx("div",{className:`couleur-option ${x.couleur===P?"selected":""}`,style:{background:P},onClick:()=>j(q=>({...q,couleur:P})),title:P},P))})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{className:"form-label",children:["Groupes classes lis"," ",t.jsx("span",{style:{fontWeight:400,color:"#9ca3af"},children:"(optionnel)"})]}),z.length===0?t.jsxs("p",{style:{fontSize:"0.82rem",color:"#9ca3af",margin:0},children:["Aucun groupe cr."," ",t.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",padding:0,fontSize:"0.82rem"},onClick:()=>r("/prof/groupes"),children:"Crer un groupe "})]}):t.jsx("div",{className:"groupe-selector",children:z.map(P=>{const q=M.includes(P.id);return t.jsxs("div",{className:`groupe-option ${q?"selected":""}`,onClick:()=>H(P.id),children:[t.jsx("input",{type:"checkbox",checked:q,readOnly:!0,tabIndex:-1}),t.jsxs("span",{children:[t.jsx("strong",{children:P.nom}),"  ",P.classe," (",P.anneeScolaire,")"]})]},P.id)})}),M.length>0&&t.jsx("div",{className:"groupes-tags",children:M.map(P=>{const q=z.find(U=>U.id===P);return q?t.jsxs("span",{className:"groupe-tag",children:[q.nom,t.jsx("button",{type:"button",onClick:()=>H(P),"aria-label":`Retirer ${q.nom}`,children:""})]},P):null})}),M.length>0&&t.jsxs("label",{className:"toggle-partage",style:{marginTop:10},children:[t.jsx("input",{type:"checkbox",checked:x.isPartage??!1,onChange:P=>j(q=>({...q,isPartage:P.target.checked}))}),t.jsx("span",{children:" Rendre visible aux lves des groupes lis"})]})]}),w&&t.jsx("div",{style:{color:"#dc2626",fontSize:"0.85rem",marginBottom:"0.75rem",background:"#fee2e2",padding:"0.5rem 0.75rem",borderRadius:8},children:w}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>h(!1),children:"Annuler"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:_,children:_?"Enregistrement...":v?"Mettre  jour":"Crer le cahier"})]})]})]})})]})},fJ=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],pJ=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],hJ=(e,r,n)=>{const a=new Date(e,r,1),l=new Date(e,r+1,0);let o=a.getDay()-1;o<0&&(o=6);const u=new Date,d=[];for(let p=o-1;p>=0;p--){const h=new Date(e,r,-p);d.push({date:h,isCurrentMonth:!1,isToday:!1,entrees:[]})}for(let p=1;p<=l.getDate();p++){const h=new Date(e,r,p),v=h.toDateString()===u.toDateString(),b=n.filter(x=>{const j=x.date.toDate();return j.getFullYear()===e&&j.getMonth()===r&&j.getDate()===p});d.push({date:h,isCurrentMonth:!0,isToday:v,entrees:b})}let m=1;for(;d.length<42;){const p=new Date(e,r+1,m++);d.push({date:p,isCurrentMonth:!1,isToday:!1,entrees:[]})}return d},vJ=({cahierId:e})=>{const r=Ze(),n=new Date,[a,l]=g.useState(n.getFullYear()),[o,u]=g.useState(n.getMonth()),[d,m]=g.useState([]),[p,h]=g.useState(!1),[v,b]=g.useState(null),[x,j]=g.useState({x:0,y:0});g.useEffect(()=>{(async()=>{h(!0);try{const A=await sJ(e,a,o);m(A)}catch(A){console.error("Erreur chargement entres calendrier:",A)}finally{h(!1)}})()},[e,a,o]);const _=hJ(a,o,d),C=()=>{o===0?(l(S=>S-1),u(11)):u(S=>S-1)},w=()=>{o===11?(l(S=>S+1),u(0)):u(S=>S+1)},E=(S,A)=>{if(!S.isCurrentMonth||S.entrees.length===0)return;const z=A.target.getBoundingClientRect();j({x:z.left,y:z.bottom+window.scrollY+8}),b(S)};return t.jsxs("div",{className:"cahier-calendar",onClick:()=>b(null),children:[t.jsxs("div",{className:"calendar-nav",children:[t.jsx("button",{className:"calendar-nav-btn",onClick:C,"aria-label":"Mois prcdent",children:""}),t.jsxs("span",{className:"calendar-nav-title",children:[pJ[o]," ",a,p&&" ..."]}),t.jsx("button",{className:"calendar-nav-btn",onClick:w,"aria-label":"Mois suivant",children:""})]}),t.jsx("div",{className:"calendar-weekdays",children:fJ.map(S=>t.jsx("div",{className:"calendar-weekday",children:S},S))}),t.jsx("div",{className:"calendar-grid",onClick:S=>S.stopPropagation(),children:_.map((S,A)=>t.jsxs("div",{className:`calendar-day ${S.isCurrentMonth?"":"other-month"} ${S.isToday?"today":""} ${v?.date.toDateString()===S.date.toDateString()?"selected":""}`,onClick:z=>E(S,z),children:[t.jsx("div",{className:"calendar-day-num",children:S.date.getDate()}),t.jsxs("div",{className:"calendar-day-events",children:[S.entrees.slice(0,3).map(z=>{const k=Wi[z.typeContenu];return t.jsxs("div",{className:"calendar-event-dot",style:{background:k.color},title:z.chapitre,children:[k.emoji," ",z.chapitre.substring(0,12)]},z.id)}),S.entrees.length>3&&t.jsxs("div",{className:"calendar-more",children:["+",S.entrees.length-3]})]})]},A))}),t.jsx("div",{className:"calendar-legend",children:Object.entries(Wi).slice(0,5).map(([S,A])=>t.jsxs("div",{className:"legend-item",children:[t.jsx("div",{className:"legend-dot",style:{background:A.color}}),A.label]},S))}),v&&v.entrees.length>0&&t.jsxs("div",{className:"calendar-day-popup",style:{top:x.y,left:Math.min(x.x,window.innerWidth-300)},onClick:S=>S.stopPropagation(),children:[t.jsxs("div",{className:"calendar-day-popup-title",children:[" ",v.date.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})]}),v.entrees.map(S=>{const A=Wi[S.typeContenu];return t.jsxs("div",{className:"calendar-popup-entree",onClick:()=>r(`/prof/cahiers/${e}/modifier/${S.id}`),children:[t.jsx("span",{className:"calendar-popup-entree-type",children:A.emoji}),t.jsxs("div",{className:"calendar-popup-entree-info",children:[t.jsx("div",{className:"calendar-popup-entree-chapitre",children:S.chapitre}),S.heureDebut&&t.jsxs("div",{className:"calendar-popup-entree-heure",children:[S.heureDebut,S.heureFin?`  ${S.heureFin}`:""]})]})]},S.id)})]})]})},Np="rappels_prof",gJ=async(e,r)=>(await Dt(_e(Q,Np),{profId:e,titre:r.titre,description:r.description||"",typeRappel:r.typeRappel,dateRappel:Ae.fromDate(new Date(r.dateRappel)),recurrence:r.recurrence,priorite:r.priorite,cahierId:r.cahierId||null,isLu:!1,isDone:!1,createdAt:Ae.now()})).id,xJ=async e=>{const r=Ee(_e(Q,Np),Se("profId","==",e),Se("isDone","==",!1),Ve("dateRappel","asc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))},bJ=async(e,r)=>{await Ge(je(Q,Np,e),{isDone:r,isLu:r})},yJ=async e=>{await Gr(je(Q,Np,e))},rA=()=>({titre:"",description:"",typeRappel:"personnalise",dateRappel:new Date(Date.now()+36e5).toISOString().slice(0,16),recurrence:"unique",priorite:"normale"}),lm=({profId:e,cahierId:r})=>{const[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(!1),[m,p]=g.useState(rA()),[h,v]=g.useState(!1),b=async()=>{try{o(!0);const S=await xJ(e);a(S)}catch(S){console.error("Erreur rappels:",S)}finally{o(!1)}};g.useEffect(()=>{b()},[e]);const x=async S=>{if(S.preventDefault(),!!m.titre.trim()){v(!0);try{await gJ(e,{...m,cahierId:r}),d(!1),p(rA()),await b()}catch(A){console.error("Erreur cration rappel:",A)}finally{v(!1)}}},j=async S=>{await bJ(S,!0),a(A=>A.filter(z=>z.id!==S))},_=async S=>{confirm("Supprimer ce rappel ?")&&(await yJ(S),a(A=>A.filter(z=>z.id!==S)))},C=new Date,w=n.filter(S=>S.dateRappel.toDate()<=C),E=n.filter(S=>S.dateRappel.toDate()>C);return t.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",overflow:"hidden"},children:[t.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.1rem"},children:""}),t.jsx("span",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937"},children:"Rappels"}),w.length>0&&t.jsx("span",{style:{background:"#dc2626",color:"white",borderRadius:20,padding:"1px 7px",fontSize:"0.7rem",fontWeight:700},children:w.length})]}),t.jsx("button",{className:"btn-primary",style:{padding:"0.35rem 0.75rem",fontSize:"0.8rem"},onClick:()=>d(S=>!S),children:"+ Ajouter"})]}),u&&t.jsxs("form",{onSubmit:x,style:{padding:"1rem 1.25rem",borderBottom:"1px solid #f3f4f6",background:"#f9fafb"},children:[t.jsx("div",{className:"form-group",children:t.jsx("input",{className:"form-input",placeholder:"Titre du rappel *",value:m.titre,onChange:S=>p(A=>({...A,titre:S.target.value})),required:!0})}),t.jsx("div",{className:"form-group",children:t.jsx("select",{className:"form-select",value:m.typeRappel,onChange:S=>p(A=>({...A,typeRappel:S.target.value})),children:Object.entries(TA).map(([S,A])=>t.jsxs("option",{value:S,children:[A.emoji," ",A.label]},S))})}),t.jsx("div",{className:"form-group",children:t.jsx("input",{type:"datetime-local",className:"form-input",value:m.dateRappel,onChange:S=>p(A=>({...A,dateRappel:S.target.value})),required:!0})}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsxs("select",{className:"form-select",value:m.priorite,onChange:S=>p(A=>({...A,priorite:S.target.value})),children:[t.jsx("option",{value:"normale",children:"Normale"}),t.jsx("option",{value:"urgente",children:" Urgente"})]}),t.jsxs("select",{className:"form-select",value:m.recurrence,onChange:S=>p(A=>({...A,recurrence:S.target.value})),children:[t.jsx("option",{value:"unique",children:"Une fois"}),t.jsx("option",{value:"hebdomadaire",children:"Hebdo"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[t.jsx("button",{type:"submit",className:"btn-primary",disabled:h,style:{flex:1},children:h?"...":"Enregistrer"}),t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(!1),children:"Annuler"})]})]}),t.jsx("div",{style:{padding:"0.75rem 1.25rem"},children:l?t.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:"Chargement..."}):n.length===0?t.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:"1rem",fontSize:"0.85rem"},children:[t.jsx("div",{children:""}),t.jsx("div",{children:"Aucun rappel actif"})]}):t.jsxs(t.Fragment,{children:[w.length>0&&t.jsxs("div",{style:{marginBottom:"0.75rem"},children:[t.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#dc2626",textTransform:"uppercase",marginBottom:"0.4rem"},children:" En retard"}),w.map(S=>t.jsx(nA,{rappel:S,onDone:j,onDelete:_},S.id))]}),E.length>0&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"#6b7280",textTransform:"uppercase",marginBottom:"0.4rem"},children:" venir"}),E.slice(0,5).map(S=>t.jsx(nA,{rappel:S,onDone:j,onDelete:_},S.id))]})]})})]})},nA=({rappel:e,onDone:r,onDelete:n})=>{const a=TA[e.typeRappel],l=e.dateRappel.toDate(),o=e.priorite==="urgente",u=l<=new Date;return t.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.5rem 0",borderBottom:"1px solid #f9fafb"},children:[t.jsx("button",{onClick:()=>r(e.id),style:{width:20,height:20,border:`2px solid ${o?"#dc2626":"#d1d5db"}`,borderRadius:4,background:"white",cursor:"pointer",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",marginTop:2},title:"Marquer termin"}),t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsxs("div",{style:{fontSize:"0.82rem",fontWeight:600,color:u?"#dc2626":"#1f2937",display:"flex",alignItems:"center",gap:"0.3rem"},children:[a.emoji," ",e.titre,o&&t.jsx("span",{style:{fontSize:"0.65rem",color:"#dc2626"},children:""})]}),t.jsxs("div",{style:{fontSize:"0.72rem",color:"#9ca3af",marginTop:2},children:[l.toLocaleDateString("fr-FR",{day:"numeric",month:"short"}),"  ",l.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),t.jsx("button",{onClick:()=>n(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"0.9rem",flexShrink:0},title:"Supprimer",children:""})]})},jJ=({profId:e,cahierId:r})=>{const n=Ze(),[a,l]=g.useState([]),[o,u]=g.useState(!0),[d,m]=g.useState("tous");g.useEffect(()=>{(async()=>{u(!0);try{const x=await lJ(e,r);l(x)}catch(x){console.error("Erreur signets:",x)}finally{u(!1)}})()},[e,r]);const p=async(b,x)=>{try{await Bc(b.id,{statutEvaluation:x}),l(j=>j.map(_=>_.id===b.id?{..._,statutEvaluation:x}:_))}catch(j){console.error("Erreur mise  jour statut:",j)}},h=d==="tous"?a:a.filter(b=>b.statutEvaluation===d),v=[{value:"tous",label:"Tous",color:"#6b7280"},{value:"a_evaluer",label:" valuer",color:"#d97706"},{value:"evaluation_creee",label:"Cre",color:"#2563eb"},{value:"evaluation_terminee",label:"Termine",color:"#059669"}];return t.jsxs("div",{children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:t.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:700,color:"#1f2937",margin:0},children:[" Signets d'valuation (",a.length,")"]})}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:v.map(b=>t.jsx("button",{onClick:()=>m(b.value),style:{padding:"0.3rem 0.85rem",borderRadius:20,border:`1.5px solid ${d===b.value?b.color:"#e5e7eb"}`,background:d===b.value?b.color:"white",color:d===b.value?"white":"#4b5563",fontSize:"0.8rem",fontWeight:600,cursor:"pointer",transition:"all 0.15s"},children:b.label},b.value))}),o?t.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Chargement..."}):h.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"2.5rem",color:"#9ca3af"},children:[t.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),t.jsx("div",{style:{fontWeight:600,color:"#6b7280",marginBottom:"0.25rem"},children:"Aucun signet trouv"}),t.jsx("div",{style:{fontSize:"0.85rem"},children:"Marquez des entres pour valuation depuis l'diteur de sance."})]}):t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:h.map(b=>{const x=Wi[b.typeContenu];return Lc[b.statut],t.jsxs("div",{style:{background:"white",borderRadius:10,boxShadow:"0 2px 8px rgba(0,0,0,0.07)",padding:"1rem",borderLeft:"4px solid #f59e0b"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem",marginBottom:"0.5rem"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.9rem",fontWeight:700,color:"#1f2937"},children:b.chapitre}),t.jsx("div",{style:{fontSize:"0.78rem",color:"#9ca3af",marginTop:"0.15rem"},children:b.date.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),t.jsx("button",{onClick:()=>n(`/prof/cahiers/${r}/modifier/${b.id}`),style:{background:"none",border:"none",cursor:"pointer",color:"#2563eb",fontSize:"0.8rem",fontWeight:600,whiteSpace:"nowrap"},children:" Modifier"})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[t.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:x.color+"22",color:x.color},children:[x.emoji," ",x.label]}),b.typeEvaluation&&t.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",fontWeight:600,background:"#fef3c7",color:"#92400e"},children:[" ",MA[b.typeEvaluation]]}),b.dateEvaluationPrevue&&t.jsxs("span",{style:{padding:"0.15rem 0.6rem",borderRadius:20,fontSize:"0.72rem",background:"#f3f4f6",color:"#4b5563"},children:[" ",b.dateEvaluationPrevue.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]}),t.jsx("div",{style:{display:"flex",gap:"0.4rem",flexWrap:"wrap"},children:["a_evaluer","evaluation_creee","evaluation_terminee"].map(j=>{const _=b.statutEvaluation===j,C={a_evaluer:" valuer",evaluation_creee:"Cre",evaluation_terminee:" Termine"},w={a_evaluer:"#d97706",evaluation_creee:"#2563eb",evaluation_terminee:"#059669"};return t.jsx("button",{onClick:()=>p(b,j),style:{padding:"0.25rem 0.7rem",borderRadius:20,border:`1.5px solid ${_?w[j]:"#e5e7eb"}`,background:_?w[j]:"white",color:_?"white":"#6b7280",fontSize:"0.72rem",fontWeight:600,cursor:"pointer"},children:C[j]},j)})})]},b.id)})})]})},_J=({cahier:e})=>{const[r,n]=g.useState(null),[a,l]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const d=await oJ(e.id);n(d)}catch{}finally{l(!1)}})()},[e.id]);const o=e.nombreSeancesPrevu>0?Math.min(100,Math.round(e.nombreSeancesRealise/e.nombreSeancesPrevu*100)):0;return a?t.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#9ca3af",fontSize:"0.85rem"},children:"Chargement des stats..."}):r?t.jsxs("div",{style:{background:"white",borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"1.25rem"},children:[t.jsx("div",{style:{fontWeight:700,fontSize:"0.95rem",color:"#1f2937",marginBottom:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Statistiques du cahier"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.25rem"},children:[t.jsx(om,{value:r.total,label:"Sances total",color:"#2563eb",bg:"#dbeafe"}),t.jsx(om,{value:r.realise,label:"Ralises",color:"#059669",bg:"#d1fae5"}),t.jsx(om,{value:r.planifie,label:"Planifies",color:"#d97706",bg:"#fef3c7"}),t.jsx(om,{value:`${r.tauxRealisation}%`,label:"Taux de ralisation",color:"#7c3aed",bg:"#ede9fe"})]}),t.jsxs("div",{style:{marginBottom:"1.25rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.4rem"},children:[t.jsx("span",{children:"Progression du programme"}),t.jsxs("span",{style:{fontWeight:700,color:e.couleur},children:[o,"%"]})]}),t.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:10,overflow:"hidden"},children:t.jsx("div",{style:{height:"100%",width:`${o}%`,background:e.couleur,borderRadius:10,transition:"width 0.5s ease"}})}),t.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.3rem"},children:[e.nombreSeancesRealise," / ",e.nombreSeancesPrevu," sances prvues"]})]}),Object.keys(r.parType).length>0&&t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"0.78rem",fontWeight:700,color:"#9ca3af",textTransform:"uppercase",marginBottom:"0.6rem"},children:"Rpartition par type"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:Object.entries(r.parType).sort((u,d)=>d[1]-u[1]).map(([u,d])=>{const m=Wi[u];if(!m)return null;const p=r.total>0?Math.round(d/r.total*100):0;return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.78rem",color:"#4b5563",marginBottom:"0.2rem"},children:[t.jsxs("span",{children:[m.emoji," ",m.label]}),t.jsxs("span",{style:{fontWeight:600},children:[d," (",p,"%)"]})]}),t.jsx("div",{style:{height:4,background:"#f3f4f6",borderRadius:10,overflow:"hidden"},children:t.jsx("div",{style:{height:"100%",width:`${p}%`,background:m.color,borderRadius:10}})})]},u)})})]})]}):null},om=({value:e,label:r,color:n,bg:a})=>t.jsxs("div",{style:{background:a,borderRadius:10,padding:"0.75rem",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"1.5rem",fontWeight:800,color:n},children:e}),t.jsx("div",{style:{fontSize:"0.72rem",color:"#6b7280",marginTop:"0.15rem"},children:r})]});function aA(e){const r=new Date(e),n=r.getDay(),a=n===0?-6:1-n;return r.setDate(r.getDate()+a),r.setHours(0,0,0,0),r}function NJ(e){const r=new Date(e);return r.setDate(r.getDate()+6),r}function iA(e){const r=new Date(e),n=NJ(r),a={day:"numeric",month:"short"};return`${r.toLocaleDateString("fr-FR",a)}  ${n.toLocaleDateString("fr-FR",a)}`}function sA(e){const[r,n]=e.split("-");return new Date(Number(r),Number(n)-1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}const SJ=()=>{const{cahierId:e}=yn(),{currentUser:r}=Ke(),n=Ze(),[a,l]=g.useState(null),[o,u]=g.useState([]),[d,m]=g.useState(!0),[p,h]=g.useState(!0),[v,b]=g.useState("liste"),[x,j]=g.useState("tous"),[_,C]=g.useState("tous"),[w,E]=g.useState("tous"),[S,A]=g.useState(null),[z,k]=g.useState("asc"),[M,D]=g.useState(!0),[$,B]=g.useState(!1);g.useEffect(()=>{gt(je(Q,"settings","platform")).then(L=>{if(L.exists()){const Z=L.data();D(Z.cahierPdfExport!==!1)}}).catch(()=>{})},[]),g.useEffect(()=>{if(!e)return;(async()=>{m(!0);try{const Z=await bM(e);if(!Z){n("/prof/cahiers");return}l(Z)}finally{m(!1)}})()},[e,n]);const H=g.useCallback(async()=>{if(e){h(!0);try{const L=await yM(e);u(L)}finally{h(!1)}}},[e]);g.useEffect(()=>{H()},[H]);const T=async L=>{if(confirm(`Supprimer la sance "${L.chapitre}" ?`))try{await dJ(L.id);const Z=o.filter(ce=>ce.id!==L.id);u(Z);const W=Z.filter(ce=>ce.statut==="realise").length;await yf(e,{nombreSeancesRealise:W}),l(ce=>ce&&{...ce,nombreSeancesRealise:W})}catch{alert("Erreur lors de la suppression.")}},Y=async(L,Z)=>{try{await Bc(L.id,{statut:Z});const W=o.map(xe=>xe.id===L.id?{...xe,statut:Z}:xe);u(W);const ce=W.filter(xe=>xe.statut==="realise").length;await yf(e,{nombreSeancesRealise:ce}),l(xe=>xe&&{...xe,nombreSeancesRealise:ce})}catch{alert("Erreur mise  jour statut.")}},J=g.useCallback(()=>{B(!0),setTimeout(()=>{window.print(),B(!1)},100)},[]),P=g.useMemo(()=>Array.from(new Set(o.map(L=>{const Z=L.date.toDate();return`${Z.getFullYear()}-${String(Z.getMonth()+1).padStart(2,"0")}`}))).sort(),[o]),q=g.useMemo(()=>{const L=w==="tous"?o:o.filter(W=>{const ce=W.date.toDate();return`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}`===w}),Z=new Map;return L.forEach(W=>{const xe=aA(W.date.toDate()).toISOString().slice(0,10);Z.set(xe,(Z.get(xe)||0)+1)}),Array.from(Z.entries()).sort(([W],[ce])=>W.localeCompare(ce)).map(([W,ce])=>({start:W,count:ce}))},[o,w]),U=g.useMemo(()=>{const L=new Map;return o.forEach(Z=>{const W=Z.date.toDate(),ce=`${W.getFullYear()}-${String(W.getMonth()+1).padStart(2,"0")}`;L.set(ce,(L.get(ce)||0)+1)}),L},[o]),I=g.useMemo(()=>o.filter(L=>{const Z=L.date.toDate(),W=x==="tous"||L.statut===x,ce=_==="tous"||L.typeContenu===_;let xe=!0;w!=="tous"&&(xe=`${Z.getFullYear()}-${String(Z.getMonth()+1).padStart(2,"0")}`===w);let he=!0;return S&&(he=aA(Z).toISOString().slice(0,10)===S),W&&ce&&xe&&he}).sort((L,Z)=>{const W=L.date.toMillis()-Z.date.toMillis();return z==="asc"?W:-W}),[o,x,_,w,S,z]);if(d)return t.jsx("div",{className:"loading-spinner",children:t.jsx("div",{className:"spinner-circle"})});if(!a)return null;const te=a.nombreSeancesPrevu>0?Math.round(o.filter(L=>L.statut==="realise").length/a.nombreSeancesPrevu*100):0;return t.jsxs("div",{className:"cahier-detail-page",id:"cahier-detail-print-zone",children:[t.jsxs("div",{className:"cahier-detail-header",children:[t.jsx("button",{className:"btn-retour no-print",onClick:()=>n("/prof/cahiers"),title:"Retour  la liste",children:" Retour"}),t.jsx("div",{className:"cahier-detail-couleur-barre",style:{background:a.couleur}}),t.jsxs("div",{className:"cahier-detail-info",children:[t.jsx("h1",{className:"cahier-detail-titre",children:a.titre}),t.jsxs("div",{className:"cahier-detail-badges",children:[t.jsx("span",{className:"badge-classe",children:a.classe}),t.jsx("span",{className:"badge-matiere",children:a.matiere}),t.jsx("span",{className:"badge-annee",children:a.anneeScolaire}),a.isPartage&&t.jsx("span",{className:"badge-partage",children:" Partag"})]}),a.description&&t.jsx("p",{className:"cahier-detail-description",children:a.description}),t.jsxs("div",{className:"cahier-detail-progression",children:[t.jsx("div",{className:"progression-bar-bg",style:{width:200},children:t.jsx("div",{className:"progression-bar-fill",style:{width:`${te}%`,background:a.couleur}})}),t.jsxs("span",{className:"progression-pct",children:[o.filter(L=>L.statut==="realise").length," / ",a.nombreSeancesPrevu," sances (",te,"%)"]})]})]}),t.jsxs("div",{className:"cahier-detail-actions no-print",children:[M&&t.jsxs("button",{className:"btn-pdf",onClick:J,disabled:$,title:"Tlcharger en PDF",children:[$?"":""," PDF"]}),t.jsx("button",{className:"btn-primary",onClick:()=>n(`/prof/cahiers/${e}/nouvelle`),children:"+ Nouvelle sance"})]})]}),t.jsx("div",{className:"view-tabs no-print",children:[{id:"liste",label:" Liste"},{id:"calendrier",label:" Calendrier"},{id:"signets",label:" Signets"},{id:"stats",label:" Statistiques"}].map(L=>t.jsx("button",{className:`view-tab ${v===L.id?"active":""}`,onClick:()=>b(L.id),children:L.label},L.id))}),v==="calendrier"&&t.jsxs("div",{className:"cahier-detail-layout",children:[t.jsx("div",{children:t.jsx(vJ,{cahierId:a.id})}),t.jsx("div",{children:t.jsx(lm,{profId:r.uid,cahierId:a.id})})]}),v==="signets"&&t.jsxs("div",{className:"cahier-detail-layout",children:[t.jsx(jJ,{profId:r.uid,cahierId:a.id}),t.jsx(lm,{profId:r.uid,cahierId:a.id})]}),v==="stats"&&t.jsxs("div",{className:"cahier-detail-layout",children:[t.jsx(_J,{cahier:{...a,nombreSeancesRealise:o.filter(L=>L.statut==="realise").length}}),t.jsx(lm,{profId:r.uid,cahierId:a.id})]}),v==="liste"&&t.jsxs("div",{className:"cahier-three-col-layout",children:[t.jsxs("aside",{className:"cahier-nav-sidebar no-print",children:[t.jsxs("div",{className:"nav-sidebar-header",children:[t.jsx("span",{className:"nav-sidebar-icon",children:""}),t.jsx("span",{className:"nav-sidebar-title",children:"Navigation"})]}),t.jsxs("button",{className:`nav-month-item ${w==="tous"?"active":""}`,onClick:()=>{E("tous"),A(null)},children:[t.jsx("span",{children:"Tout afficher"}),t.jsx("span",{className:"nav-count-badge",children:o.length})]}),P.length>0&&t.jsx("div",{className:"nav-months-list",children:P.map(L=>t.jsxs("button",{className:`nav-month-item ${w===L?"active":""}`,onClick:()=>{E(L),A(null)},children:[t.jsx("span",{className:"nav-month-label",children:sA(L)}),t.jsx("span",{className:"nav-count-badge",children:U.get(L)||0})]},L))}),w!=="tous"&&q.length>0&&t.jsxs("div",{className:"nav-weeks-section",children:[t.jsx("div",{className:"nav-weeks-header",children:"Semaines"}),t.jsxs("button",{className:`nav-week-item ${S===null?"active":""}`,onClick:()=>A(null),children:[t.jsx("span",{children:"Tout le mois"}),t.jsx("span",{className:"nav-count-badge nav-count-badge--sm",children:U.get(w)||0})]}),q.map(L=>t.jsxs("button",{className:`nav-week-item ${S===L.start?"active":""}`,onClick:()=>A(L.start),children:[t.jsx("span",{className:"nav-week-label",children:iA(L.start)}),t.jsx("span",{className:"nav-count-badge nav-count-badge--sm",children:L.count})]},L.start))]}),o.length===0&&t.jsx("p",{className:"nav-sidebar-empty",children:"Aucune sance pour l'instant"})]}),t.jsxs("div",{className:"cahier-content-col",children:[t.jsxs("div",{className:"entrees-controls no-print",children:[t.jsx("div",{className:"entrees-statut-filters",children:["tous","realise","planifie","annule","reporte"].map(L=>{const Z=L==="tous"?null:Lc[L];return t.jsx("button",{className:`statut-chip ${x===L?"active":""}`,style:x===L&&Z?{borderColor:Z.color,background:Z.bg,color:Z.color}:{},onClick:()=>j(L),children:L==="tous"?"Tous":Z?.label},L)})}),t.jsxs("div",{className:"entrees-right-controls",children:[t.jsxs("select",{className:"filtre-select",value:_,onChange:L=>C(L.target.value),children:[t.jsx("option",{value:"tous",children:"Tous types"}),Object.entries(Wi).map(([L,Z])=>t.jsxs("option",{value:L,children:[Z.emoji," ",Z.label]},L))]}),t.jsx("button",{className:"btn-sort",onClick:()=>k(L=>L==="asc"?"desc":"asc"),title:z==="asc"?"Ordre croissant (cliquer pour inverser)":"Ordre dcroissant (cliquer pour inverser)",children:z==="asc"?" Plus ancien":" Plus rcent"})]})]}),(w!=="tous"||S||x!=="tous"||_!=="tous")&&t.jsxs("div",{className:"filtre-actif-bar no-print",children:[t.jsxs("span",{className:"filtre-actif-label",children:[I.length," sance",I.length!==1?"s":"",S?`  Semaine du ${iA(S)}`:"",w!=="tous"&&!S?`  ${sA(w)}`:""]}),t.jsx("button",{className:"filtre-actif-reset",onClick:()=>{j("tous"),C("tous"),E("tous"),A(null)},children:" Rinitialiser"})]}),p&&I.length===0?t.jsx("div",{className:"loading-spinner",children:t.jsx("div",{className:"spinner-circle"})}):I.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{style:{fontSize:"2.5rem",opacity:.3,marginBottom:"0.5rem"},children:""}),t.jsx("h3",{children:x!=="tous"||_!=="tous"||w!=="tous"?"Aucune sance correspondant aux filtres":"Aucune sance pour l'instant"}),x==="tous"&&_==="tous"&&w==="tous"&&t.jsx("button",{className:"btn-primary",onClick:()=>n(`/prof/cahiers/${e}/nouvelle`),style:{marginTop:"1rem"},children:"+ Ajouter la premire sance"})]}):t.jsx("div",{className:"entrees-list",children:I.map((L,Z)=>{const W=Wi[L.typeContenu],ce=Lc[L.statut],xe=L.date.toDate();return t.jsxs("div",{className:"entree-card",style:{borderLeftColor:W.color},onClick:()=>n(`/prof/cahiers/${e}/modifier/${L.id}`),children:[t.jsx("div",{className:"entree-num",children:t.jsx("span",{style:{background:W.color},children:z==="asc"?Z+1:I.length-Z})}),t.jsxs("div",{className:"entree-card-inner",children:[t.jsxs("div",{className:"entree-card-top",children:[t.jsxs("div",{className:"entree-card-gauche",children:[t.jsxs("div",{className:"entree-date",children:[" ",xe.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),L.heureDebut&&t.jsxs("span",{className:"entree-heure",children:[" ",L.heureDebut,L.heureFin?`  ${L.heureFin}`:""]})]}),t.jsx("h3",{className:"entree-chapitre",children:L.chapitre}),t.jsxs("div",{className:"entree-badges",children:[t.jsxs("span",{className:"entree-type-badge",style:{background:W.color},children:[W.emoji," ",W.label]}),t.jsx("span",{className:"entree-statut-badge",style:{background:ce.bg,color:ce.color},children:ce.label}),L.isMarqueEvaluation&&t.jsx("span",{className:"signet-badge",children:" valuation"}),L.piecesJointes&&L.piecesJointes.length>0&&t.jsxs("span",{className:"badge-pj",children:[" ",L.piecesJointes.length]})]})]}),t.jsxs("div",{className:"entree-actions no-print",children:[t.jsx("button",{className:"btn-icon",onClick:he=>{he.stopPropagation(),n(`/prof/cahiers/${e}/modifier/${L.id}`)},title:"Modifier",children:""}),t.jsx("button",{className:"btn-icon btn-icon--danger",onClick:he=>{he.stopPropagation(),T(L)},title:"Supprimer",children:""})]})]}),L.contenu&&t.jsx("div",{className:"entree-contenu-preview",dangerouslySetInnerHTML:{__html:L.contenu}}),L.objectifs&&t.jsxs("div",{className:"entree-objectifs",children:[" ",t.jsx("em",{children:L.objectifs})]}),t.jsxs("div",{className:"entree-card-footer no-print",children:[t.jsx("div",{className:"entree-statuts-rapides",children:["realise","planifie","annule"].map(he=>{const F=Lc[he],ve=L.statut===he;return t.jsx("button",{className:`statut-quick-btn ${ve?"active":""}`,style:ve?{borderColor:F.color,background:F.bg,color:F.color}:{},onClick:Pe=>{Pe.stopPropagation(),Y(L,he)},children:F.label},he)})}),L.notesPrivees&&t.jsx("span",{className:"entree-has-notes",title:"Contient des notes prives",children:" Notes prives"})]})]})]},L.id)})})]}),t.jsx("div",{className:"cahier-sidebar-right no-print",children:t.jsx(lm,{profId:r.uid,cahierId:a.id})})]})]})};function wJ(e){return{video:"",article:"",exercice:"",autre:""}[e]??""}function CJ(e){const r=/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_\-]{11})/,n=e.match(r);return n?n[1]:null}const EJ=({onAjouter:e,onAnnuler:r})=>{const[n,a]=g.useState(""),[l,o]=g.useState(""),[u,d]=g.useState("article"),[m,p]=g.useState(""),[h,v]=g.useState("");function b(j){o(j),(j.includes("youtube.com")||j.includes("youtu.be"))&&d("video")}function x(){if(!n.trim()){v("Le titre est requis.");return}if(!l.trim()||!l.startsWith("http://")&&!l.startsWith("https://")){v("Entrez une URL valide commenant par https://");return}const j={id:String(Date.now()),titre:n.trim(),url:l.trim(),type:u,description:m.trim()||void 0};e(j)}return t.jsxs("div",{className:"lien-form",children:[t.jsx("input",{type:"text",placeholder:"Titre du lien *",value:n,onChange:j=>a(j.target.value),"aria-label":"Titre du lien"}),t.jsx("input",{type:"url",placeholder:"https://... *",value:l,onChange:j=>b(j.target.value),"aria-label":"URL du lien"}),t.jsxs("select",{value:u,onChange:j=>d(j.target.value),"aria-label":"Type de lien",children:[t.jsx("option",{value:"article",children:" Article"}),t.jsx("option",{value:"video",children:" Vido"}),t.jsx("option",{value:"exercice",children:" Exercice"}),t.jsx("option",{value:"autre",children:" Autre"})]}),t.jsx("textarea",{placeholder:"Description (optionnelle)",value:m,onChange:j=>p(j.target.value),rows:2,"aria-label":"Description du lien"}),h&&t.jsx("p",{style:{color:"#dc2626",fontSize:"0.8rem",margin:0},children:h}),t.jsxs("div",{className:"lien-form-actions",children:[t.jsx("button",{className:"btn-secondary",onClick:r,type:"button",children:"Annuler"}),t.jsx("button",{className:"btn-pedaclic",onClick:x,type:"button",children:" Ajouter"})]})]})},AJ=({videoId:e})=>t.jsx("div",{className:"youtube-embed",children:t.jsx("iframe",{src:`https://www.youtube.com/embed/${e}`,title:"Vido YouTube",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}),_M=({liens:e,onChange:r,readonly:n=!1})=>{const[a,l]=g.useState(!1);function o(d){r([...e,d]),l(!1)}function u(d){r(e.filter(m=>m.id!==d))}return t.jsxs("section",{className:"liens-section","aria-label":"Liens externes",children:[t.jsx("h4",{children:" Liens et ressources"}),e.length>0&&t.jsx("div",{className:"liens-liste",children:e.map(d=>{const m=CJ(d.url);return t.jsxs("div",{className:"lien-card",children:[t.jsx("span",{className:"lien-icone","aria-hidden":"true",children:wJ(d.type)}),t.jsxs("div",{className:"lien-infos",children:[t.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"lien-titre",title:d.url,children:d.titre}),d.description&&t.jsx("p",{className:"lien-description",children:d.description}),m&&t.jsx(AJ,{videoId:m})]}),!n&&t.jsx("button",{className:"lien-suppr",onClick:()=>u(d.id),title:"Supprimer ce lien",type:"button","aria-label":`Supprimer le lien ${d.titre}`,children:""})]},d.id)})}),e.length===0&&!n&&t.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun lien ajout. Ajoutez des ressources pour enrichir cette sance."}),!n&&t.jsx(t.Fragment,{children:a?t.jsx(EJ,{onAjouter:o,onAnnuler:()=>l(!1)}):t.jsx("button",{className:"btn-secondary",onClick:()=>l(!0),type:"button",children:" Ajouter un lien"})})]})},zJ=({selectedIds:e,onSelect:r,onFermer:n})=>{const[a,l]=g.useState(""),[o,u]=g.useState([]),[d,m]=g.useState(!0),[p,h]=g.useState("");g.useEffect(()=>{async function x(){try{const j=await aJ();u(j)}catch{h("Impossible de charger la bibliothque.")}finally{m(!1)}}x()},[]);const v=g.useMemo(()=>{const x=a.toLowerCase().trim();return x?o.filter(j=>j.titre.toLowerCase().includes(x)||j.auteur.toLowerCase().includes(x)||j.categorie.toLowerCase().includes(x)):o},[o,a]);function b(x){x.target===x.currentTarget&&n()}return t.jsx("div",{className:"ebook-selector-overlay",onClick:b,role:"dialog","aria-modal":"true","aria-label":"Slectionner un ebook",children:t.jsxs("div",{className:"ebook-selector-panel",children:[t.jsxs("div",{className:"ebook-selector-header",children:[t.jsx("h3",{children:" Bibliothque PedaClic"}),t.jsx("button",{onClick:n,"aria-label":"Fermer",style:{background:"none",border:"none",fontSize:"1.3rem",cursor:"pointer",color:"#6b7280"},type:"button",children:""})]}),t.jsx("div",{className:"ebook-search",children:t.jsx("input",{type:"search",placeholder:" Rechercher par titre, auteur ou catgorie...",value:a,onChange:x=>l(x.target.value),autoFocus:!0,"aria-label":"Recherche ebook"})}),t.jsxs("div",{className:"ebook-liste",children:[d&&t.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:" Chargement de la bibliothque"}),p&&t.jsx("p",{style:{color:"#dc2626",textAlign:"center"},children:p}),!d&&!p&&v.length===0&&t.jsx("p",{style:{color:"#9ca3af",textAlign:"center"},children:"Aucun ebook ne correspond  votre recherche."}),!d&&v.map(x=>{const j=e.includes(x.id);return t.jsxs("button",{type:"button",className:`ebook-item ${j?"selected":""}`,onClick:()=>!j&&r(x),disabled:j,"aria-pressed":j,"aria-label":`${j?"Dj li : ":""}${x.titre}`,children:[x.couvertureUrl?t.jsx("img",{src:x.couvertureUrl,alt:`Couverture de ${x.titre}`,loading:"lazy"}):t.jsx("div",{style:{width:36,height:48,background:"#e5e7eb",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",flexShrink:0},"aria-hidden":"true",children:""}),t.jsxs("div",{className:"ebook-item-info",children:[t.jsx("div",{className:"ebook-item-titre",children:x.titre}),t.jsxs("div",{className:"ebook-item-meta",children:[x.auteur,"  ",x.categorie]}),j&&t.jsx("div",{style:{fontSize:"0.75rem",color:"#2563eb",marginTop:2},children:" Dj li  cette sance"})]})]},x.id)})]})]})})},NM=({ebooksLies:e,onChange:r,readonly:n=!1})=>{const[a,l]=g.useState(!1),o=e.map(m=>m.ebookId);function u(m){const p={ebookId:m.id,titre:m.titre,categorie:m.categorie,auteur:m.auteur};r([...e,p]),l(!1)}function d(m){r(e.filter(p=>p.ebookId!==m))}return t.jsxs("section",{"aria-label":"Ebooks lis  la sance",style:{marginTop:16},children:[t.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 8px"},children:" Ebooks de la bibliothque"}),e.length>0&&t.jsx("div",{className:"ebooks-lies",children:e.map(m=>t.jsxs("span",{className:"ebook-chip",children:[t.jsxs("a",{href:`/bibliotheque/${m.ebookId}`,className:"ebook-chip",style:{textDecoration:"none"},title:`Lire : ${m.titre}`,children:[" ",m.titre]}),!n&&t.jsx("button",{onClick:()=>d(m.ebookId),title:`Retirer ${m.titre}`,type:"button","aria-label":`Retirer l'ebook ${m.titre}`,children:""})]},m.ebookId))}),e.length===0&&!n&&t.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 8px"},children:"Aucun ebook li. Associez un ebook de la bibliothque  cette sance."}),!n&&t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(!0),style:{marginTop:8},children:" Choisir dans la bibliothque"}),a&&t.jsx(zJ,{selectedIds:o,onSelect:u,onFermer:()=>l(!1)})]})},SM="https://api.pedaclic.sn",kJ=12e4,OJ=1,fr={cours_complet:"Cours complet",fiche_revision:"Fiche de rvision",exercices_corriges:"Exercices corrigs",quiz_auto:"Quiz auto-gnr",sujet_examen:"Sujet type examen",evaluation_personnalisee:"valuation personnalise"},DJ={cours_complet:"Un cours structur avec introduction, dveloppement et conclusion adapt au programme sngalais.",fiche_revision:"Synthse des points cls pour rviser efficacement avant un examen.",exercices_corriges:"Srie d'exercices progressifs avec corrections dtailles tape par tape.",quiz_auto:"10 questions QCM avec 4 options, corrections et explications. Sauvegard directement comme quiz jouable.",sujet_examen:"Sujet conforme au format officiel BFEM ou BAC avec barme.",evaluation_personnalisee:"valuation sur mesure avec barme /20 et corrig-type."},Ka={cours_complet:"",fiche_revision:"",exercices_corriges:"",quiz_auto:"",sujet_examen:"",evaluation_personnalisee:""};async function PJ(e,r,n=kJ){const a=new AbortController,l=setTimeout(()=>a.abort(),n);try{const o=await fetch(e,{...r,signal:a.signal});return clearTimeout(l),o}catch(o){throw clearTimeout(l),o.name==="AbortError"?new Error(`La gnration a pris trop de temps (>${n/1e3}s). Le serveur est peut-tre surcharg. Veuillez ressayer dans quelques instants.`):o}}async function wM(e,r=OJ){try{return await e()}catch(n){if(r<=0)throw n;return console.warn(`[aiGeneratorService] chec, nouvelle tentative dans 3s... (${r} restante(s))`),await new Promise(a=>setTimeout(a,3e3)),wM(e,r-1)}}async function lA(){try{(await fetch(`${SM}/api/health`,{method:"GET"})).ok&&console.log("[aiGeneratorService] Ping Railway OK")}catch{}}async function MJ(e){const r=JSON.stringify(e),n={method:"POST",headers:{"Content-Type":"application/json"},body:r},a=await wM(()=>PJ(`${SM}/api/generate`,n)).catch(o=>{throw console.error("[aiGeneratorService] Erreur gnration:",o),o instanceof TypeError&&o.message.includes("fetch")?new Error("Impossible de contacter le serveur. Vrifiez votre connexion internet."):o});if(!a.ok){const u=(await a.json().catch(()=>({}))).error||`Erreur serveur (${a.status})`;throw new Error(u)}const l=await a.json();if(!l.success)throw new Error(l.error||"La gnration a chou.");return l}async function TJ(e,r,n,a){try{const l=await Dt(_e(Q,"generated_content"),{userId:e,type:r.type,discipline:r.discipline,disciplineId:a,classe:r.classe,chapitre:r.chapitre,content:n,options:r.options||null,createdAt:Ae.now()});return console.log("[aiGeneratorService] Contenu sauvegard:",l.id),l.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde contenu:",l),new Error("Erreur lors de la sauvegarde du contenu gnr.")}}async function qJ(e,r,n,a){try{const l=n.map((d,m)=>({id:`q_${Date.now()}_${m}`,question:d.question,options:d.options,reponseCorrecte:d.reponseCorrecte,explication:d.explication||"",difficulte:d.difficulte||"moyen",points:d.points||2})),o={disciplineId:a,titre:`Quiz IA  ${r.chapitre}`,description:`Quiz auto-gnr pour ${r.discipline} (${r.classe})  Chapitre : ${r.chapitre}`,questions:l,duree:15,isPremium:!0,noteMinimale:10,auteurId:e,source:"ia_generator",createdAt:Ae.now()},u=await Dt(_e(Q,"quizzes"),o);return console.log("[aiGeneratorService] Quiz sauvegard:",u.id),u.id}catch(l){throw console.error("[aiGeneratorService] Erreur sauvegarde quiz:",l),new Error("Erreur lors de la sauvegarde du quiz gnr.")}}async function Lb(e,r=20){try{const n=Ee(_e(Q,"generated_content"),Se("userId","==",e),Ve("createdAt","desc")),a=await Ce(n),l=[];return a.forEach(o=>{l.length<r&&l.push({id:o.id,...o.data()})}),l}catch(n){throw console.error("[aiGeneratorService] Erreur chargement historique:",n),new Error("Erreur lors du chargement de l'historique.")}}async function RJ(e){try{await Gr(je(Q,"generated_content",e)),console.log("[aiGeneratorService] Contenu supprim:",e)}catch(r){throw console.error("[aiGeneratorService] Erreur suppression:",r),new Error("Erreur lors de la suppression du contenu.")}}const IJ=({userId:e,selectedIds:r,onSelect:n,onFermer:a})=>{const[l,o]=g.useState(""),[u,d]=g.useState([]),[m,p]=g.useState(!0),[h,v]=g.useState("");g.useEffect(()=>{async function j(){try{const _=await Lb(e,50);d(_)}catch{v("Impossible de charger les contenus gnrs.")}finally{p(!1)}}j()},[e]);const b=g.useMemo(()=>{const j=l.toLowerCase().trim();return j?u.filter(_=>_.chapitre.toLowerCase().includes(j)||_.discipline.toLowerCase().includes(j)||_.classe.toLowerCase().includes(j)||fr[_.type]?.toLowerCase().includes(j)):u},[u,l]);function x(j){j.target===j.currentTarget&&a()}return t.jsx("div",{className:"ebook-selector-overlay",onClick:x,role:"dialog","aria-modal":"true","aria-label":"Slectionner un contenu IA",children:t.jsxs("div",{className:"ebook-selector-panel",children:[t.jsxs("div",{className:"ebook-selector-header",children:[t.jsx("h3",{children:" Contenus gnrs par l'IA"}),t.jsx("button",{onClick:a,"aria-label":"Fermer",type:"button",style:{background:"none",border:"none",fontSize:"1.3rem",cursor:"pointer",color:"#6b7280"},children:""})]}),t.jsx("div",{className:"ebook-search",children:t.jsx("input",{type:"search",placeholder:" Rechercher par chapitre, discipline ou classe",value:l,onChange:j=>o(j.target.value),autoFocus:!0,"aria-label":"Recherche contenu IA"})}),t.jsxs("div",{className:"ebook-liste",children:[m&&t.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:" Chargement"}),h&&t.jsx("p",{style:{color:"#dc2626",textAlign:"center"},children:h}),!m&&!h&&b.length===0&&t.jsx("p",{style:{color:"#9ca3af",textAlign:"center"},children:"Aucun contenu ne correspond  votre recherche."}),!m&&b.map(j=>{const _=j.id?r.includes(j.id):!1,C=j.createdAt?.toDate?j.createdAt.toDate().toLocaleDateString("fr-FR"):"";return t.jsxs("button",{type:"button",className:`ebook-item ${_?"selected":""}`,onClick:()=>!_&&n(j),disabled:_,"aria-pressed":_,children:[t.jsx("div",{style:{width:36,height:48,background:"#eff6ff",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.4rem",flexShrink:0},"aria-hidden":"true",children:Ka[j.type]}),t.jsxs("div",{className:"ebook-item-info",children:[t.jsx("div",{className:"ebook-item-titre",children:j.chapitre}),t.jsxs("div",{className:"ebook-item-meta",children:[fr[j.type],"  ",j.discipline,"  ",j.classe,C&&`  ${C}`]}),_&&t.jsx("div",{style:{fontSize:"0.75rem",color:"#2563eb",marginTop:2},children:" Dj li  cette sance"})]})]},j.id)})]})]})})},LJ=({userId:e,contenuIA:r,onChange:n,readonly:a=!1})=>{const[l,o]=g.useState(!1),u=r.map(p=>p.contenuId);function d(p){if(!p.id)return;const h={contenuId:p.id,type:p.type,discipline:p.discipline,classe:p.classe,chapitre:p.chapitre,createdAt:p.createdAt?.toDate?p.createdAt.toDate().toISOString():void 0};n([...r,h]),o(!1)}function m(p){n(r.filter(h=>h.contenuId!==p))}return t.jsxs("section",{"aria-label":"Contenus IA lis  la sance",style:{marginTop:16},children:[t.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 8px"},children:" Contenus gnrs par l'IA"}),r.length>0&&t.jsx("div",{className:"ebooks-lies",children:r.map(p=>t.jsxs("span",{className:"ebook-chip ebook-chip--ia",children:[t.jsxs("span",{title:`${p.discipline}  ${p.classe}  ${p.chapitre}`,children:[Ka[p.type]??""," ",p.chapitre]}),!a&&t.jsx("button",{onClick:()=>m(p.contenuId),title:`Retirer : ${p.chapitre}`,type:"button","aria-label":`Retirer le contenu ${p.chapitre}`,children:""})]},p.contenuId))}),r.length===0&&!a&&t.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 8px"},children:"Aucun contenu IA li. Associez un contenu gnr  cette sance."}),!a&&t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o(!0),style:{marginTop:8},children:" Choisir un contenu IA"}),l&&t.jsx(IJ,{userId:e,selectedIds:u,onSelect:d,onFermer:()=>o(!1)})]})},$J=()=>({date:new Date().toISOString().slice(0,10),heureDebut:"",heureFin:"",chapitre:"",typeContenu:"cours",contenu:"",objectifs:"",competences:[],statut:"realise",motifAnnulation:"",dateReport:"",notesPrivees:"",isMarqueEvaluation:!1,typeEvaluation:"",dateEvaluationPrevue:"",statutEvaluation:"a_evaluer"}),oA=()=>{const{cahierId:e,entreeId:r}=yn(),{currentUser:n}=Ke(),a=Ze(),[l,o]=g.useState(null),[u,d]=g.useState(null),[m,p]=g.useState($J()),[h,v]=g.useState([]),[b,x]=g.useState(!0),[j,_]=g.useState(!1),[C,w]=g.useState(!1),[E,S]=g.useState(""),[A,z]=g.useState([]),[k,M]=g.useState([]),[D,$]=g.useState([]),B=!!r;g.useEffect(()=>{if(!e)return;(async()=>{x(!0);try{const q=await bM(e);if(!q){a("/prof/cahiers");return}if(o(q),B&&r){const U=await ZZ(r);U&&(d(U),v(U.piecesJointes||[]),z(U.liens??[]),M(U.ebooksLies??[]),$(U.contenuIA??[]),p({date:U.date.toDate().toISOString().slice(0,10),heureDebut:U.heureDebut||"",heureFin:U.heureFin||"",chapitre:U.chapitre,typeContenu:U.typeContenu,contenu:U.contenu,objectifs:U.objectifs||"",competences:U.competences||[],statut:U.statut,motifAnnulation:U.motifAnnulation||"",dateReport:U.dateReport?U.dateReport.toDate().toISOString().slice(0,10):"",notesPrivees:U.notesPrivees||"",isMarqueEvaluation:U.isMarqueEvaluation,typeEvaluation:U.typeEvaluation||"",dateEvaluationPrevue:U.dateEvaluationPrevue?U.dateEvaluationPrevue.toDate().toISOString().slice(0,10):"",statutEvaluation:U.statutEvaluation||"a_evaluer"}))}}finally{x(!1)}})()},[e,r]);const H=P=>{p(q=>({...q,competences:q.competences.includes(P)?q.competences.filter(U=>U!==P):[...q.competences,P]}))},T=async P=>{if(!P.target.files?.length||!n?.uid||!e)return;const q=P.target.files[0];if(q.size>10*1024*1024){alert("Fichier trop volumineux (max 10 Mo)");return}w(!0);try{const U=await JZ(n.uid,e,q),I=[...h,U];v(I),B&&r&&u&&await eA(r,h,[U])}catch{alert("Erreur upload fichier.")}finally{w(!1),P.target.value=""}},Y=async P=>{if(!r){v(q=>q.filter(U=>U.url!==P));return}try{await eJ(r,h,P),v(q=>q.filter(U=>U.url!==P))}catch{alert("Erreur suppression fichier.")}},J=async P=>{if(P.preventDefault(),!m.chapitre.trim()){S("Le chapitre est obligatoire.");return}if(!m.date){S("La date est obligatoire.");return}if(!(!n?.uid||!e)){_(!0),S("");try{if(B&&r)await Bc(r,e,m),await Bc(r,{liens:A,ebooksLies:k,contenuIA:D});else{const I=await uJ(e,n.uid,m);h.length>0&&await eA(I,[],h),(A.length>0||k.length>0||D.length>0)&&await Bc(I,{liens:A,ebooksLies:k,contenuIA:D})}const U=(await yM(e)).filter(I=>I.statut==="realise").length;await yf(e,{nombreSeancesRealise:U}),a(`/prof/cahiers/${e}`)}catch(q){const U=q instanceof Error?q.message:String(q);S("Erreur : "+U)}finally{_(!1)}}};return b?t.jsx("div",{className:"loading-spinner",children:t.jsx("div",{className:"spinner-circle"})}):l?t.jsxs("div",{className:"entree-editor-page",children:[t.jsxs("div",{className:"editor-header",children:[t.jsx("button",{onClick:()=>a(`/prof/cahiers/${e}`),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1.2rem"},children:""}),t.jsxs("div",{children:[t.jsx("h1",{style:{fontSize:"1.4rem",fontWeight:700,color:"#1f2937",margin:"0 0 0.2rem"},children:B?" Modifier la sance":" Nouvelle sance"}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[l.titre,"  ",l.classe,"  ",l.matiere]})]})]}),t.jsxs("form",{onSubmit:J,children:[t.jsxs("div",{className:"editor-card",children:[t.jsx("div",{className:"editor-section-title",children:" Informations de la sance"}),t.jsxs("div",{className:"form-row",style:{gridTemplateColumns:"1.5fr 1fr 1fr"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Date *"}),t.jsx("input",{type:"date",className:"form-input",value:m.date,onChange:P=>p(q=>({...q,date:P.target.value})),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Heure dbut"}),t.jsx("input",{type:"time",className:"form-input",value:m.heureDebut,onChange:P=>p(q=>({...q,heureDebut:P.target.value}))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Heure fin"}),t.jsx("input",{type:"time",className:"form-input",value:m.heureFin,onChange:P=>p(q=>({...q,heureFin:P.target.value}))})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Chapitre / Titre de la sance *"}),t.jsx("input",{className:"form-input",placeholder:"Ex: Chapitre 3  Les fonctions affines",value:m.chapitre,onChange:P=>p(q=>({...q,chapitre:P.target.value})),required:!0})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Type de sance"}),t.jsx("select",{className:"form-select",value:m.typeContenu,onChange:P=>p(q=>({...q,typeContenu:P.target.value})),children:Object.entries(Wi).map(([P,q])=>t.jsxs("option",{value:P,children:[q.emoji," ",q.label]},P))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Statut"}),t.jsx("select",{className:"form-select",value:m.statut,onChange:P=>p(q=>({...q,statut:P.target.value})),children:Object.entries(Lc).map(([P,q])=>t.jsx("option",{value:P,children:q.label},P))})]})]}),m.statut==="annule"&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Motif d'annulation"}),t.jsx("input",{className:"form-input",placeholder:"Ex: Grve enseignants, sortie scolaire...",value:m.motifAnnulation,onChange:P=>p(q=>({...q,motifAnnulation:P.target.value}))})]}),m.statut==="reporte"&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Nouvelle date (report)"}),t.jsx("input",{type:"date",className:"form-input",value:m.dateReport,onChange:P=>p(q=>({...q,dateReport:P.target.value}))})]})]}),t.jsxs("div",{className:"editor-card",children:[t.jsx("div",{className:"editor-section-title",children:" Contenu de la sance"}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Contenu (mise en forme riche)"}),t.jsx(ja,{value:m.contenu,onChange:P=>p(q=>({...q,contenu:P})),placeholder:"Dcrivez le contenu enseign, les exemples traits, les formules vues...",minHeight:220,maxHeight:600})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),t.jsx("textarea",{className:"form-textarea",placeholder:"Ex: L'lve sera capable de rsoudre une quation du second degr...",value:m.objectifs,onChange:P=>p(q=>({...q,objectifs:P.target.value})),rows:2})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Comptences vises"}),t.jsx("div",{className:"competences-container",children:O5.map(P=>t.jsx("button",{type:"button",className:`competence-tag ${m.competences.includes(P)?"selected":""}`,onClick:()=>H(P),children:P},P))})]})]}),t.jsxs("div",{className:"editor-card",children:[t.jsx("div",{className:"editor-section-title",children:" Signet d'valuation"}),t.jsxs("div",{className:"signet-section",children:[t.jsxs("div",{className:"signet-toggle",onClick:()=>p(P=>({...P,isMarqueEvaluation:!P.isMarqueEvaluation})),children:[t.jsx("div",{className:`toggle-switch ${m.isMarqueEvaluation?"on":""}`}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"#1f2937"},children:"Marquer pour valuation"}),t.jsx("div",{style:{fontSize:"0.78rem",color:"#6b7280"},children:"Ce contenu sera valu ultrieurement"})]})]}),m.isMarqueEvaluation&&t.jsx("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Type d'valuation"}),t.jsxs("select",{className:"form-select",value:m.typeEvaluation,onChange:P=>p(q=>({...q,typeEvaluation:P.target.value})),children:[t.jsx("option",{value:"",children:"Choisir..."}),Object.entries(MA).map(([P,q])=>t.jsx("option",{value:P,children:q},P))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Date prvue d'valuation"}),t.jsx("input",{type:"date",className:"form-input",value:m.dateEvaluationPrevue,onChange:P=>p(q=>({...q,dateEvaluationPrevue:P.target.value}))})]})]})})]})]}),t.jsxs("div",{className:"editor-card",children:[t.jsx("div",{className:"editor-section-title",children:" Pices jointes"}),h.length>0&&t.jsx("div",{className:"pieces-jointes-list",children:h.map(P=>t.jsxs("div",{className:"piece-jointe-item",children:[t.jsx("span",{children:""}),t.jsx("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",children:P.nom}),t.jsxs("span",{style:{color:"#9ca3af",fontSize:"0.75rem"},children:["(",Math.round((P.taille??0)/1024)," Ko)"]}),t.jsx("button",{type:"button",onClick:()=>Y(P.url),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",marginLeft:"auto"},children:""})]},P.url))}),t.jsxs("label",{className:"upload-zone",children:[C?"Envoi en cours...":" Cliquer pour ajouter un fichier (PDF, image  max 10 Mo)",t.jsx("input",{type:"file",style:{display:"none"},accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.ppt,.pptx",onChange:T,disabled:C})]})]}),t.jsxs("div",{className:"editor-card",children:[t.jsx("div",{className:"editor-section-title",children:" Ressources enrichies"}),t.jsx("p",{style:{fontSize:"0.82rem",color:"#6b7280",margin:"0 0 4px"},children:"Ajoutez des liens ou des ebooks pour enrichir cette sance."}),t.jsx(_M,{liens:A,onChange:z}),t.jsx(NM,{ebooksLies:k,onChange:M}),t.jsx(LJ,{userId:n.uid,contenuIA:D,onChange:$})]}),t.jsxs("div",{className:"editor-card",children:[t.jsx("div",{className:"editor-section-title",children:" Notes prives"}),t.jsx("textarea",{className:"form-textarea",placeholder:"Notes personnelles (non visibles par l'administration)...",value:m.notesPrivees,onChange:P=>p(q=>({...q,notesPrivees:P.target.value})),rows:3}),t.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem"},children:"Ces notes sont uniquement visibles par vous."})]}),E&&t.jsx("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem 1rem",borderRadius:8,marginBottom:"1rem",fontSize:"0.85rem"},children:E}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingBottom:"2rem"},children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(`/prof/cahiers/${e}`),children:"Annuler"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:j,style:{minWidth:160},children:j?"Enregistrement...":B?" Mettre  jour":" Enregistrer la sance"})]})]})]}):null},BJ=50*1024*1024,UJ="image/jpeg,image/png,image/gif,image/webp,audio/mpeg,audio/wav,audio/ogg,video/mp4";function FJ(e){return e.startsWith("image/")?"image":e.startsWith("audio/")?"audio":e.startsWith("video/")?"video":"autre"}function CM(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/1024/1024).toFixed(1)} Mo`}const GJ=({src:e,alt:r,onFermer:n})=>t.jsx("div",{className:"image-fullscreen-overlay",onClick:n,role:"dialog","aria-modal":"true","aria-label":"Image en plein cran",children:t.jsx("img",{src:e,alt:r})}),HJ=({pj:e,onSupprimer:r,readonly:n=!1})=>{const[a,l]=g.useState(!1);return t.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",marginBottom:10,background:"#fff"},children:[e.type==="image"&&t.jsxs(t.Fragment,{children:[t.jsx("img",{src:e.url,alt:e.nom,className:"media-image",onClick:()=>l(!0),style:{maxWidth:"100%",display:"block"},loading:"lazy"}),a&&t.jsx(GJ,{src:e.url,alt:e.nom,onFermer:()=>l(!1)})]}),e.type==="audio"&&t.jsx("div",{className:"media-player",children:t.jsxs("audio",{controls:!0,preload:"metadata",children:[t.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture audio."]})}),e.type==="video"&&t.jsx("div",{className:"media-player",children:t.jsxs("video",{controls:!0,preload:"none",playsInline:!0,children:[t.jsx("source",{src:e.url,type:e.mimeType}),"Votre navigateur ne supporte pas la lecture vido."]})}),(e.type==="pdf"||e.type==="autre")&&t.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",textDecoration:"none",color:"#2563eb"},children:[" ",e.nom]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 12px",background:"#f9fafb",borderTop:"1px solid #f3f4f6"},children:[t.jsxs("span",{style:{fontSize:"0.78rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.nom,e.taille&&`  ${CM(e.taille)}`]}),!n&&r&&t.jsx("button",{type:"button",onClick:()=>r(e.id),title:"Supprimer ce fichier",style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"1rem",padding:"0 4px"},"aria-label":`Supprimer ${e.nom}`,children:""})]})]})},VJ=({piecesJointes:e,entreeId:r,profId:n,onChange:a,readonly:l=!1})=>{const o=g.useRef(null),[u,d]=g.useState(null),[m,p]=g.useState("");async function h(b){const x=b.target.files?.[0];if(!x)return;if(x.size>BJ){p(`Fichier trop volumineux (max 50 Mo). Ce fichier fait ${CM(x.size)}.`);return}p("");const j=`${Date.now()}_${x.name}`,_=`cahiers/${n}/${r}/${j}`,C=sr(Jt,_),w=ou(C,x);w.on("state_changed",E=>{const S=Math.round(E.bytesTransferred/E.totalBytes*100);d(S)},E=>{p(`Erreur d'envoi : ${E.message}`),d(null)},async()=>{const E=await qn(w.snapshot.ref),S=FJ(x.type),A={id:String(Date.now()),nom:x.name,url:E,type:S,taille:x.size,mimeType:x.type};a([...e,A]),d(null),o.current&&(o.current.value="")})}function v(b){a(e.filter(x=>x.id!==b))}return t.jsxs("section",{"aria-label":"Fichiers mdias",style:{marginTop:20},children:[t.jsx("h4",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827",margin:"0 0 12px"},children:" Fichiers mdias"}),e.map(b=>t.jsx(HJ,{pj:b,onSupprimer:v,readonly:l},b.id)),e.length===0&&!l&&t.jsx("p",{style:{fontSize:"0.85rem",color:"#9ca3af",margin:"0 0 12px"},children:"Aucun fichier ajout. Formats accepts : images, audio, vido (max 50 Mo)."}),!l&&t.jsxs(t.Fragment,{children:[u!==null&&t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{height:8,background:"#e5e7eb",borderRadius:9999,overflow:"hidden"},children:t.jsx("div",{style:{height:"100%",width:`${u}%`,background:"#2563eb",transition:"width 0.3s ease"},role:"progressbar","aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100})}),t.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:"4px 0 0"},children:["Envoi en cours ",u,"%"]})]}),m&&t.jsxs("p",{style:{fontSize:"0.8rem",color:"#dc2626",margin:"0 0 8px"},children:[" ",m]}),t.jsx("input",{ref:o,type:"file",accept:UJ,onChange:h,style:{display:"none"},"aria-label":"Choisir un fichier mdia"}),t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>o.current?.click(),disabled:u!==null,children:" Ajouter un fichier (image / audio / vido)"}),t.jsx("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:6},children:"Max 50 Mo  JPG, PNG, GIF, WebP, MP3, WAV, OGG, MP4"})]})]})};function QJ(e){return e.toDate().toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}const YJ=()=>{const{cahierId:e}=yn(),r=Ze(),[n,a]=g.useState(null),[l,o]=g.useState([]),[u,d]=g.useState(!0),[m,p]=g.useState(""),[h,v]=g.useState(null);g.useEffect(()=>{async function x(){if(e){d(!0);try{const j=await nJ(e);if(!j){p("Ce cahier n'est pas accessible ou n'existe pas.");return}a(j);const _=await cJ(e);o(_)}catch{p("Une erreur est survenue lors du chargement.")}finally{d(!1)}}}x()},[e]);function b(x){v(j=>j===x?null:x)}return u?t.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#6b7280"},children:[t.jsx("div",{style:{fontSize:"2rem"},children:""}),t.jsx("p",{children:"Chargement du cahier de textes"})]}):m||!n?t.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[t.jsx("div",{style:{fontSize:"2.5rem"},children:""}),t.jsx("p",{style:{color:"#dc2626",fontWeight:600},children:m||"Accs non autoris"}),t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>r(-1),style:{marginTop:12},children:" Retour"})]}):t.jsxs("main",{style:{maxWidth:760,margin:"0 auto",padding:"20px 16px"},children:[t.jsxs("header",{className:"eleve-cahier-header",children:[t.jsx("button",{type:"button",onClick:()=>r(-1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff",cursor:"pointer",borderRadius:8,padding:"4px 10px",fontSize:"0.85rem",marginBottom:10,display:"inline-flex",alignItems:"center",gap:4},children:" Retour"}),t.jsx("h1",{children:n.titre}),t.jsxs("p",{children:[n.matiere,"  ",n.classe,"  ",n.anneeScolaire]}),t.jsx("span",{className:"badge-lecture-seule",children:" Lecture seule  Sances ralises"})]}),n.description&&t.jsx("div",{style:{background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:10,padding:14,marginBottom:20,fontSize:"0.9rem",color:"#0c4a6e"},children:n.description}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:16},children:l.length===0?"Aucune sance ralise pour l'instant.":`${l.length} sance${l.length>1?"s":""} ralise${l.length>1?"s":""}`}),l.length===0&&t.jsxs("div",{className:"eleve-vide",children:[t.jsx("span",{className:"emoji",children:""}),t.jsx("p",{children:"Votre professeur n'a pas encore enregistr de sance ralise."}),t.jsx("p",{style:{fontSize:"0.8rem"},children:"Revenez plus tard !"})]}),l.map(x=>{const j=h===x.id,_=(x.piecesJointes?.length??0)>0,C=(x.liens?.length??0)>0,w=(x.ebooksLies?.length??0)>0;return t.jsxs("article",{className:"seance-card-eleve",children:[t.jsxs("button",{type:"button",onClick:()=>b(x.id),style:{width:"100%",background:"none",border:"none",cursor:"pointer",textAlign:"left",padding:0},"aria-expanded":j,"aria-controls":`seance-corps-${x.id}`,children:[t.jsxs("div",{className:"seance-card-eleve-date",children:[" ",QJ(x.date),x.heureDebut?`  ${x.heureDebut}${x.heureFin?`  ${x.heureFin}`:""}`:""]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h3",{style:{margin:0},children:x.chapitre}),t.jsx("span",{style:{fontSize:"1.1rem",transition:"transform 0.2s",transform:j?"rotate(180deg)":"rotate(0)",display:"inline-block"},"aria-hidden":"true",children:""})]}),t.jsxs("div",{style:{display:"flex",gap:6,marginTop:6,flexWrap:"wrap"},children:[C&&t.jsx("span",{style:{fontSize:"0.72rem",background:"#eff6ff",color:"#2563eb",padding:"2px 8px",borderRadius:9999},children:" Ressources"}),w&&t.jsx("span",{style:{fontSize:"0.72rem",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:9999},children:" Ebooks"}),_&&t.jsx("span",{style:{fontSize:"0.72rem",background:"#f0fdf4",color:"#16a34a",padding:"2px 8px",borderRadius:9999},children:" Mdias"})]})]}),j&&t.jsxs("div",{id:`seance-corps-${x.id}`,style:{marginTop:14,borderTop:"1px solid #f3f4f6",paddingTop:14},children:[x.objectifs&&t.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:8,padding:10,fontSize:"0.875rem",color:"#166534",marginBottom:12},children:[t.jsx("strong",{children:" Objectifs :"})," ",x.objectifs]}),t.jsx("div",{className:"seance-card-eleve-contenu",children:x.contenu}),C&&t.jsx(_M,{liens:x.liens??[],onChange:()=>{},readonly:!0}),w&&t.jsx(NM,{ebooksLies:x.ebooksLies??[],onChange:()=>{},readonly:!0}),_&&t.jsx(VJ,{piecesJointes:x.piecesJointes??[],entreeId:x.id,profId:"",onChange:()=>{},readonly:!0})]})]},x.id)})]})},us="sequences_pedagogiques",KJ="entrees_cahier";function EM(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function Sp(e){return e.filter(r=>r.estEvaluation&&r.typeEvaluation).map(r=>({id:r.id,titre:r.titre,type:r.typeEvaluation,seanceNumero:r.numero,noteMax:r.noteMax??20,coefficient:r.coefficient??1,datePrevue:r.datePrevue}))}async function WJ(e){const r=Ee(_e(Q,us),Se("profId","==",e),Ve("updatedAt","desc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}async function su(e){const r=await gt(je(Q,us,e));return r.exists()?{id:r.id,...r.data()}:null}async function XJ(e,r){const n=Ae.now(),a=r.seances.map(u=>({...u,id:u.id||EM(),exporterVersCahier:u.exporterVersCahier??!0,entreesCahierIds:u.entreesCahierIds??[]})),l=Sp(a);return(await Dt(_e(Q,us),{...r,profId:e,seances:a,evaluationsPrevues:l,statut:r.statut??"brouillon",genereeParIA:r.genereeParIA??!1,competences:r.competences??[],createdAt:n,updatedAt:n})).id}async function ZJ(e,r){const n={...r,updatedAt:Ae.now()};r.seances&&(n.evaluationsPrevues=Sp(r.seances)),await Ge(je(Q,us,e),n)}async function JJ(e,r){await Ge(je(Q,us,e),{statut:r,updatedAt:Ae.now()})}async function AM(e){await Gr(je(Q,us,e))}async function eee(e,r){const n=await su(e);if(!n)throw new Error(`Squence ${e} introuvable`);const a=Ae.now(),l=n.seances.map(u=>({...u,id:EM(),exporterVersCahier:!0,entreesCahierIds:[],datePrevue:void 0}));return(await Dt(_e(Q,us),{titre:`[Copie] ${n.titre}`,description:n.description,niveau:n.niveau,matiere:n.matiere,theme:n.theme,competences:n.competences,objectifGeneral:n.objectifGeneral,prerequis:n.prerequis,nombreSeances:n.nombreSeances,dureeSeanceMinutes:n.dureeSeanceMinutes,trimestre:n.trimestre,seances:l,evaluationsPrevues:Sp(l),genereeParIA:n.genereeParIA,profId:r,statut:"brouillon",groupeClasseId:void 0,groupeClasseNom:void 0,cahierDeTextesId:void 0,cahierDeTextesNom:void 0,createdAt:a,updatedAt:a})).id}async function tee(e){const{sequenceId:r,cahierDeTextesId:n,profId:a,datesParSeance:l}=e,o=await su(r);if(!o)throw new Error(`Squence ${r} introuvable`);const u=Ae.now(),d=[],m=[],p=Object.keys(l),h=[...o.seances];for(const v of p){const b=h.findIndex(_=>_.id===v);if(b===-1){m.push(v);continue}const x=h[b],j=l[v];try{const _={cahierId:n,profId:a,date:j,chapitre:x.titre,typeContenu:"cours",contenu:x.contenu,objectifs:x.objectifSpecifique,statut:"planifie",notesPrivees:x.ressources.length>0?`Ressources : ${x.ressources.join(" | ")}`:void 0,isMarqueEvaluation:!1,ordre:b,liens:[],ebooksLies:[],piecesJointes:[]},C=await Dt(_e(Q,KJ),{..._,createdAt:u,updatedAt:u});d.push(C.id),h[b]={...x,exporterVersCahier:!1,entreesCahierIds:[...x.entreesCahierIds??[],C.id]}}catch(_){console.error(`[exporterVersCahier] Erreur sance ${v}:`,_),m.push(v)}}return d.length>0&&await Ge(je(Q,us,r),{seances:h,evaluationsPrevues:Sp(h),cahierDeTextesId:n,cahierDeTextesNom:o.cahierDeTextesNom??"",exporteAt:u,updatedAt:u}),{nbExportees:d.length,idsEntrees:d,erreurs:m}}function ree(e,r){return e.filter(n=>{if(r.matiere&&n.matiere!==r.matiere||r.niveau&&n.niveau!==r.niveau||r.statut&&n.statut!==r.statut||r.groupeClasseId&&n.groupeClasseId!==r.groupeClasseId)return!1;if(r.recherche){const a=r.recherche.toLowerCase();if(!(n.titre.toLowerCase().includes(a)||n.matiere.toLowerCase().includes(a)||n.theme.toLowerCase().includes(a)||n.description.toLowerCase().includes(a)))return!1}return!0})}const jf={cours:"Cours",td:"TD",tp:"TP",evaluation:"valuation",revision:"Rvision",projet:"Projet",correction:"Correction"},Oj={formative:"Formative",sommative:"Sommative",diagnostique:"Diagnostique",devoir:"Devoir sur table",composition:"Composition (BFEM/BAC)",interrogation:"Interrogation"},wp={brouillon:{label:"Brouillon",couleur:"#6b7280"},active:{label:"En cours",couleur:"#2563eb"},terminee:{label:"Termine",couleur:"#16a34a"},archivee:{label:"Archive",couleur:"#9ca3af"}},nee=[{valeur:"6eme",label:"6me"},{valeur:"5eme",label:"5me"},{valeur:"4eme",label:"4me"},{valeur:"3eme",label:"3me (BFEM)"},{valeur:"2nde",label:"2nde"},{valeur:"1ere",label:"1re"},{valeur:"terminale",label:"Terminale (BAC)"}],_f=[30,45,55,60,90,120],aee=({statut:e})=>{const{label:r}=wp[e];return t.jsxs("span",{className:`statut-badge statut-badge--${e}`,children:[t.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"currentColor",display:"inline-block"}}),r]})},iee=({sequence:e,onView:r,onEdit:n,onDuplicate:a,onDelete:l})=>{const o=e.seances.filter(u=>u.estEvaluation).length;return t.jsxs("article",{className:"sequence-card",onClick:r,role:"button",tabIndex:0,onKeyDown:u=>u.key==="Enter"&&r(),children:[t.jsxs("div",{className:"sequence-card__badges",children:[t.jsx(aee,{statut:e.statut}),e.genereeParIA&&t.jsx("span",{className:"badge-ia",children:" IA"})]}),t.jsx("h3",{className:"sequence-card__title",children:e.titre}),t.jsxs("div",{className:"sequence-card__meta",children:[t.jsx("span",{className:"sequence-card__meta-chip",children:e.matiere}),t.jsx("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:e.niveau}),e.trimestre&&t.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:["T",e.trimestre]})]}),e.description&&t.jsx("p",{className:"sequence-card__desc",children:e.description}),t.jsxs("div",{className:"sequence-card__footer",children:[t.jsxs("span",{className:"sequence-card__seances-count",children:[" ",e.seances.length," sance",e.seances.length>1?"s":"",o>0&&`   ${o} val.`]}),e.groupeClasseNom&&t.jsxs("span",{className:"sequence-card__groupe",children:[" ",e.groupeClasseNom]})]}),t.jsxs("div",{className:"sequence-card__actions",onClick:u=>u.stopPropagation(),children:[t.jsx("button",{className:"sequence-card__action-btn",onClick:n,title:"Modifier","aria-label":"Modifier la squence",children:""}),t.jsx("button",{className:"sequence-card__action-btn",onClick:a,title:"Dupliquer","aria-label":"Dupliquer la squence",children:""}),t.jsx("button",{className:"sequence-card__action-btn sequence-card__action-btn--danger",onClick:l,title:"Supprimer","aria-label":"Supprimer la squence",children:""})]})]})},see=()=>{const e=Ze(),{currentUser:r}=Ke(),{matieres:n}=na(),[a,l]=g.useState([]),[o,u]=g.useState(!0),[d,m]=g.useState(null),[p,h]=g.useState(null),[v,b]=g.useState({matiere:"",niveau:"",statut:"",recherche:""}),x=g.useCallback(async()=>{if(r?.uid){u(!0),m(null);try{const S=await WJ(r.uid);l(S)}catch(S){console.error("[SequencesPage] Chargement:",S),m("Impossible de charger vos squences. Vrifiez votre connexion.")}finally{u(!1)}}},[r?.uid]);if(g.useEffect(()=>{x()},[x]),!r?.isPremium&&r?.role!=="admin")return t.jsxs("div",{className:"premium-gate",children:[t.jsx("span",{className:"premium-gate__icon",children:""}),t.jsx("h2",{className:"premium-gate__title",children:"Fonctionnalit Premium"}),t.jsx("p",{className:"premium-gate__text",children:"Le Gnrateur de Squences Pdagogiques est rserv aux enseignants Premium. Passez  Premium pour crer des squences structures et les exporter vers votre Cahier de Textes."}),t.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/premium"),children:" Passer  Premium  2 000 FCFA/mois"})]});const j=ree(a,v),_=n.length>0?n.map(S=>S.valeur):[...new Set(a.map(S=>S.matiere))].sort(),C=async S=>{if(window.confirm(`Supprimer la squence "${S.titre}" ?

Cette action est irrversible.`)){h(S.id);try{await AM(S.id),l(z=>z.filter(k=>k.id!==S.id))}catch(z){console.error("[SequencesPage] Suppression:",z),m("Erreur lors de la suppression. Ressayez.")}finally{h(null)}}},w=async S=>{if(r?.uid){h(S.id);try{const A=await eee(S.id,r.uid);e(`/prof/sequences/${A}/modifier`)}catch(A){console.error("[SequencesPage] Duplication:",A),m("Erreur lors de la duplication. Ressayez."),h(null)}}},E={total:a.length,active:a.filter(S=>S.statut==="active").length,terminee:a.filter(S=>S.statut==="terminee").length,ia:a.filter(S=>S.genereeParIA).length};return t.jsxs("div",{className:"sequences-page",children:[t.jsxs("div",{className:"sequences-page__header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"sequences-page__title",children:" Squences Pdagogiques"}),t.jsxs("p",{className:"sequences-page__subtitle",children:[E.total," squence",E.total>1?"s":"",E.active>0&&`  ${E.active} en cours`,E.ia>0&&`  ${E.ia} assiste${E.ia>1?"s":""} par IA`]})]}),t.jsx("button",{className:"sequences-page__btn-new",onClick:()=>e("/prof/sequences/nouvelle"),children:"+ Nouvelle squence"})]}),d&&t.jsxs("div",{className:"error-banner",role:"alert",children:[" ",d,t.jsx("button",{onClick:x,style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",color:"#dc2626",fontWeight:600},children:"Ressayer"})]}),t.jsxs("div",{className:"sequences-filters",role:"search",children:[t.jsx("input",{type:"search",className:"sequences-filters__search",placeholder:" Rechercher une squence...",value:v.recherche??"",onChange:S=>b(A=>({...A,recherche:S.target.value})),"aria-label":"Rechercher une squence"}),t.jsxs("select",{className:"sequences-filters__select",value:v.matiere??"",onChange:S=>b(A=>({...A,matiere:S.target.value})),"aria-label":"Filtrer par matire",children:[t.jsx("option",{value:"",children:"Toutes les matires"}),_.map(S=>t.jsx("option",{value:S,children:S},S))]}),t.jsxs("select",{className:"sequences-filters__select",value:v.niveau??"",onChange:S=>b(A=>({...A,niveau:S.target.value})),"aria-label":"Filtrer par niveau",children:[t.jsx("option",{value:"",children:"Tous les niveaux"}),hr.map(S=>t.jsx("option",{value:S,children:S},S))]}),t.jsxs("select",{className:"sequences-filters__select",value:v.statut??"",onChange:S=>b(A=>({...A,statut:S.target.value})),"aria-label":"Filtrer par statut",children:[t.jsx("option",{value:"",children:"Tous les statuts"}),Object.entries(wp).map(([S,{label:A}])=>t.jsx("option",{value:S,children:A},S))]})]}),o?t.jsx("div",{className:"sequences-grid",children:[1,2,3].map(S=>t.jsxs("div",{className:"sequence-card",style:{minHeight:180},children:[t.jsx("div",{className:"skeleton",style:{height:20,width:"40%",marginBottom:10}}),t.jsx("div",{className:"skeleton",style:{height:22,width:"80%",marginBottom:8}}),t.jsx("div",{className:"skeleton",style:{height:14,width:"60%"}})]},S))}):t.jsx("div",{className:"sequences-grid",role:"list",children:j.length===0?t.jsxs("div",{className:"sequences-empty",children:[t.jsx("span",{className:"sequences-empty__icon",children:""}),t.jsx("p",{className:"sequences-empty__text",children:a.length===0?"Aucune squence pour l'instant":"Aucune squence ne correspond  vos filtres"}),t.jsx("p",{className:"sequences-empty__hint",children:a.length===0?'Cliquez sur "+ Nouvelle squence" pour commencer':"Modifiez ou effacez les filtres pour voir plus de rsultats"})]}):j.map(S=>t.jsx("div",{role:"listitem",style:{opacity:p===S.id?.6:1},children:t.jsx(iee,{sequence:S,onView:()=>e(`/prof/sequences/${S.id}`),onEdit:()=>e(`/prof/sequences/${S.id}/modifier`),onDuplicate:()=>w(S),onDelete:()=>C(S)})},S.id))})]})},$b="usageRessourcesTotal";async function lee(e){try{const r=await gt(je(Q,"users",e));return r.exists()?r.data()[$b]??0:0}catch{return 0}}async function Dj(e){const r=je(Q,"users",e),a=(await gt(r)).data()?.[$b]??0;await Ge(r,{[$b]:a+1,updatedAt:Et()})}async function Nf(e,r){const n=await lee(e),a=q5(r);return{autorise:a===null||n<a,usage:n,limite:a}}const oee="https://votre-app.railway.app",cee=["cours","td","tp","evaluation","revision","projet","correction"],uee=["formative","sommative","diagnostique","devoir","composition","interrogation"];function dee(e){return cee.includes(e)?e:"cours"}function mee(e){if(e)return uee.includes(e)?e:"formative"}function fee(e){if(!e||typeof e!="object")throw new Error("Rponse IA invalide : non-objet");if(!Array.isArray(e.seances)||e.seances.length===0)throw new Error("Rponse IA invalide : tableau seances absent ou vide");const r=e.seances.map((n,a)=>({numero:Number(n.numero)||a+1,titre:String(n.titre??`Sance ${a+1}`),dureeMinutes:Number(n.dureeMinutes)||55,objectifSpecifique:String(n.objectifSpecifique??""),contenu:String(n.contenu??""),ressources:Array.isArray(n.ressources)?n.ressources.map(String):[],typeActivite:dee(String(n.typeActivite??"cours")),estEvaluation:!!n.estEvaluation,typeEvaluation:mee(n.typeEvaluation),noteMax:typeof n.noteMax=="number"?n.noteMax:void 0,coefficient:typeof n.coefficient=="number"?n.coefficient:void 0}));return{titre:String(e.titre??""),description:String(e.description??""),objectifGeneral:String(e.objectifGeneral??""),prerequis:String(e.prerequis??""),competences:Array.isArray(e.competences)?e.competences.map(String):[],seances:r}}function pee(){return`Tu es un expert en ingnierie pdagogique pour le systme ducatif sngalais 
(programme du Ministre de l'ducation Nationale du Sngal).

Tu gnres des squences pdagogiques structures pour des professeurs du secondaire 
(collges et lyces sngalais, niveaux 6me  Terminale).

RPONDRE UNIQUEMENT EN JSON valide. Aucun texte avant ou aprs le JSON.
Aucune balise markdown, aucun \`\`\`json.

Structure JSON attendue :
{
  "titre": "string",
  "description": "string (2-3 phrases contextuelles)",
  "objectifGeneral": "string (formulation en termes de comptences, verbes d'action)",
  "prerequis": "string (connaissances ncessaires avant cette squence)",
  "competences": ["string", "string", ...],
  "seances": [
    {
      "numero": 1,
      "titre": "string",
      "dureeMinutes": 55,
      "objectifSpecifique": "string (verbe d'action + contenu)",
      "contenu": "string (droulement dtaill de la sance)",
      "ressources": ["string", ...],
      "typeActivite": "cours|td|tp|evaluation|revision|projet|correction",
      "estEvaluation": false,
      "typeEvaluation": null,
      "noteMax": null,
      "coefficient": null
    }
  ]
}

Rgles :
- Respecte les programmes officiels sngalais
- Les trimestres au Sngal : 1er (Oct-Dc), 2me (Jan-Mars), 3me (Avr-Juin)
- Inclure des sances de rvision avant les valuations
- Pour les valuations (estEvaluation=true), prciser typeEvaluation
- Les contenus doivent tre adapts aux ralits sngalaises (exemples locaux)
- Note maximale habituelle : 20 (systme franais)
- Niveaux  fort enjeu : 3me (BFEM), Terminale (BAC)
- Langue : franais`}async function hee(e){const r=`
Gnre une squence pdagogique complte pour :
- Matire : ${e.matiere}
- Niveau : ${e.niveau}
- Thme/Chapitre : ${e.theme}
- Nombre de sances : ${e.nombreSeances}
- Dure par sance : ${e.dureeSeanceMinutes} minutes
${e.trimestre?`- Trimestre : ${e.trimestre}me trimestre`:""}
${e.instructionsSupplementaires?`- Instructions supplmentaires : ${e.instructionsSupplementaires}`:""}

Distribue intelligemment les sances : cours  TD/TP  rvision  valuation.
Assure-toi que les objectifs spcifiques sont progressifs et mesurables.
  `.trim();let n;try{n=await fetch(`${oee}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({systemPrompt:pee(),userPrompt:r,maxTokens:4e3})})}catch{throw new Error("Impossible de contacter le serveur IA. Vrifiez votre connexion Internet.")}if(!n.ok){const d=await n.text().catch(()=>"Erreur inconnue");throw new Error(`Erreur serveur IA (${n.status}) : ${d}`)}const a=await n.json(),l=a.content??a.result??a.text??"";if(!l)throw new Error("Rponse IA vide  le serveur a renvoy un contenu vide.");const o=l.replace(/^```json\s*/i,"").replace(/^```\s*/,"").replace(/```\s*$/,"").trim();let u;try{u=JSON.parse(o)}catch{throw new Error(`Rponse IA non parsable : ${o.substring(0,200)}...`)}return fee(u)}function zM(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function vee(e){return{id:zM(),numero:e,titre:"",dureeMinutes:55,objectifSpecifique:"",contenu:"",ressources:[],typeActivite:"cours",estEvaluation:!1,exporterVersCahier:!0,entreesCahierIds:[]}}const gee=({seance:e,onChange:r,onDelete:n,onMoveUp:a,onMoveDown:l,isFirst:o,isLast:u})=>{const[d,m]=g.useState(e.titre===""),[p,h]=g.useState(""),v=j=>r({...e,...j}),b=()=>{const j=p.trim();j&&(v({ressources:[...e.ressources,j]}),h(""))},x=j=>v({ressources:e.ressources.filter((_,C)=>C!==j)});return t.jsxs("div",{className:"seance-card",children:[t.jsxs("div",{className:"seance-card__header",onClick:()=>m(j=>!j),children:[t.jsx("div",{className:`seance-card__numero${e.estEvaluation?" seance-card__numero--eval":""}`,children:e.numero}),t.jsx("span",{className:"seance-card__header-title",children:e.titre||`Sance ${e.numero} (sans titre)`}),t.jsxs("div",{className:"seance-card__header-badges",children:[t.jsx("span",{className:`type-activite-badge type-activite-badge--${e.typeActivite}`,children:jf[e.typeActivite]}),t.jsxs("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:[e.dureeMinutes,"min"]})]}),t.jsx("span",{className:`seance-card__toggle-icon${d?" seance-card__toggle-icon--open":""}`,children:""})]}),d&&t.jsxs("div",{className:"seance-card__body",children:[t.jsxs("div",{className:"editor-form-grid",children:[t.jsxs("div",{className:"form-group editor-form-grid--full",children:[t.jsxs("label",{children:["Titre de la sance ",t.jsx("span",{className:"required",children:"*"})]}),t.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Introduction aux vecteurs",value:e.titre,onChange:j=>v({titre:j.target.value})})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Type d'activit"}),t.jsx("select",{className:"form-control",value:e.typeActivite,onChange:j=>v({typeActivite:j.target.value,estEvaluation:j.target.value==="evaluation"?!0:e.estEvaluation}),children:Object.entries(jf).map(([j,_])=>t.jsx("option",{value:j,children:_},j))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Dure (minutes)"}),t.jsxs("select",{className:"form-control",value:e.dureeMinutes,onChange:j=>v({dureeMinutes:Number(j.target.value)}),children:[_f.map(j=>t.jsxs("option",{value:j,children:[j," min"]},j)),t.jsx("option",{value:e.dureeMinutes,children:_f.includes(e.dureeMinutes)?null:`${e.dureeMinutes} min (personnalis)`})]})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Objectif spcifique"}),t.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Ex : L'lve sera capable de calculer le module d'un vecteur",value:e.objectifSpecifique,onChange:j=>v({objectifSpecifique:j.target.value}),rows:2})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Contenu / Droulement"}),t.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Dcrivez le droulement de la sance : activits, tapes, mthodes...",value:e.contenu,onChange:j=>v({contenu:j.target.value}),rows:4})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Supports / Ressources"}),e.ressources.length>0&&t.jsx("div",{className:"timeline-card__ressources",style:{marginBottom:6},children:e.ressources.map((j,_)=>t.jsxs("span",{className:"ressource-chip",style:{cursor:"pointer"},onClick:()=>x(_),title:"Cliquer pour supprimer",children:[j," "]},_))}),t.jsxs("div",{className:"competence-input-row",children:[t.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Manuel p.42, GeoGebra, Calculatrice...",value:p,onChange:j=>h(j.target.value),onKeyDown:j=>j.key==="Enter"&&(j.preventDefault(),b())}),t.jsx("button",{type:"button",className:"btn-add-competence",onClick:b,children:"+ Ajouter"})]})]}),t.jsx("div",{className:"form-group",children:t.jsxs("label",{style:{flexDirection:"row",alignItems:"center",display:"flex",gap:8},children:[t.jsx("input",{type:"checkbox",checked:e.estEvaluation,onChange:j=>v({estEvaluation:j.target.checked,typeEvaluation:j.target.checked?e.typeEvaluation??"formative":void 0}),style:{width:16,height:16,accentColor:"#2563eb"}}),"Cette sance est une valuation"]})}),e.estEvaluation&&t.jsxs("div",{className:"editor-form-grid",style:{background:"#fef2f2",padding:12,borderRadius:8,border:"1px solid #fecaca"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Type d'valuation"}),t.jsx("select",{className:"form-control",value:e.typeEvaluation??"formative",onChange:j=>v({typeEvaluation:j.target.value}),children:Object.entries(Oj).map(([j,_])=>t.jsx("option",{value:j,children:_},j))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Note maximale"}),t.jsx("input",{type:"number",className:"form-control",min:1,max:100,value:e.noteMax??20,onChange:j=>v({noteMax:Number(j.target.value)})})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Coefficient"}),t.jsx("input",{type:"number",className:"form-control",min:1,max:10,step:.5,value:e.coefficient??1,onChange:j=>v({coefficient:Number(j.target.value)})})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{style:{flexDirection:"row",alignItems:"center",display:"flex",gap:8},children:[t.jsx("input",{type:"checkbox",checked:e.exporterVersCahier,onChange:j=>v({exporterVersCahier:j.target.checked}),style:{width:16,height:16,accentColor:"#2563eb"}}),"Inclure dans l'export vers le Cahier de Textes"]}),e.entreesCahierIds&&e.entreesCahierIds.length>0&&t.jsxs("span",{className:"export-seance-row__exported",style:{marginTop:4},children:[" Dj exporte (",e.entreesCahierIds.length," entre",e.entreesCahierIds.length>1?"s":"",")"]})]}),t.jsxs("div",{className:"seance-card__actions",children:[t.jsx("button",{type:"button",className:"btn-seance-action btn-secondary",onClick:a,disabled:o,title:"Monter",children:""}),t.jsx("button",{type:"button",className:"btn-seance-action btn-secondary",onClick:l,disabled:u,title:"Descendre",children:""}),t.jsx("button",{type:"button",className:"btn-seance-action btn-seance-action--delete",onClick:n,children:" Supprimer cette sance"})]})]})]})},xee=({onSequenceGeneree:e,defaultMatiere:r,defaultNiveau:n,matieres:a})=>{const[l,o]=g.useState(r??""),[u,d]=g.useState(n??""),[m,p]=g.useState(""),[h,v]=g.useState(8),[b,x]=g.useState(55),[j,_]=g.useState(1),[C,w]=g.useState(""),[E,S]=g.useState(!1),[A,z]=g.useState({type:"idle",message:""}),k=async()=>{if(!l||!u||!m){z({type:"error",message:"Veuillez remplir la matire, le niveau et le thme."});return}S(!0),z({type:"loading",message:"L'IA gnre votre squence... (30-45 secondes)"});try{const M=await hee({matiere:l,niveau:u,theme:m,nombreSeances:h,dureeSeanceMinutes:b,trimestre:j,instructionsSupplementaires:C||void 0}),D=M.seances.map($=>({...$,ressources:$.ressources??[]}));e({titre:M.titre,description:M.description,objectifGeneral:M.objectifGeneral,prerequis:M.prerequis,competences:M.competences,seances:D}),z({type:"success",message:` Squence gnre avec ${D.length} sances ! Vrifiez et compltez les informations.`})}catch(M){const D=M instanceof Error?M.message:"Erreur inconnue";z({type:"error",message:`Erreur IA : ${D}`})}finally{S(!1)}};return t.jsxs("div",{className:"ia-panel",children:[t.jsx("h3",{className:"ia-panel__title",children:" Gnration assiste par IA"}),t.jsx("p",{className:"ia-panel__subtitle",children:"Dcrivez votre squence et Claude gnre la structure complte"}),t.jsxs("div",{className:"ia-panel__form-grid",children:[t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{children:["Matire ",t.jsx("span",{className:"required",children:"*"})]}),t.jsxs("select",{className:"form-control",value:l,onChange:M=>o(M.target.value),children:[t.jsx("option",{value:"",children:"Slectionner..."}),a.map(M=>t.jsx("option",{value:M,children:M},M))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{children:["Niveau ",t.jsx("span",{className:"required",children:"*"})]}),t.jsxs("select",{className:"form-control",value:u,onChange:M=>d(M.target.value),children:[t.jsx("option",{value:"",children:"Slectionner..."}),hr.map(M=>t.jsx("option",{value:M,children:M},M))]})]}),t.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[t.jsxs("label",{children:["Thme / Chapitre ",t.jsx("span",{className:"required",children:"*"})]}),t.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Les fonctions affines, La photosynthse, La Rvolution franaise...",value:m,onChange:M=>p(M.target.value)})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Nombre de sances"}),t.jsx("input",{type:"number",className:"form-control",min:2,max:25,value:h,onChange:M=>v(Number(M.target.value))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Dure par sance"}),t.jsx("select",{className:"form-control",value:b,onChange:M=>x(Number(M.target.value)),children:_f.map(M=>t.jsxs("option",{value:M,children:[M," min"]},M))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Trimestre"}),t.jsxs("select",{className:"form-control",value:j,onChange:M=>_(Number(M.target.value)),children:[t.jsx("option",{value:1,children:"1er trimestre (OctDc)"}),t.jsx("option",{value:2,children:"2me trimestre (JanMars)"}),t.jsx("option",{value:3,children:"3me trimestre (AvrJuin)"})]})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Instructions supplmentaires (optionnel)"}),t.jsx("textarea",{className:"ia-panel__instructions",placeholder:"Ex : Insister sur la rsolution graphique, Inclure un TP sur GeoGebra, Prvoir une sance de remdiation...",value:C,onChange:M=>w(M.target.value),rows:2})]}),t.jsxs("button",{type:"button",className:"ia-panel__btn-generate",onClick:k,disabled:E,children:[E?t.jsx("span",{className:"spinner"}):"",E?"Gnration en cours...":"Gnrer avec l'IA"]}),A.type!=="idle"&&t.jsxs("div",{className:`ia-panel__status ia-panel__status--${A.type}`,children:[A.type==="loading"&&t.jsx("span",{className:"spinner spinner--blue"}),A.message]})]})},cA=()=>{const e=Ze(),{id:r}=yn(),{currentUser:n}=Ke(),{matieres:a}=na(),l=!!r,[o,u]=g.useState({titre:"",description:"",niveau:"",matiere:"",theme:"",competences:[],objectifGeneral:"",prerequis:"",nombreSeances:6,dureeSeanceMinutes:55,seances:[],evaluationsPrevues:[],statut:"brouillon",genereeParIA:!1,trimestre:void 0,groupeClasseId:void 0,groupeClasseNom:void 0,cahierDeTextesId:void 0,cahierDeTextesNom:void 0}),[d,m]=g.useState([]),[p,h]=g.useState([]),[v,b]=g.useState([]),[x,j]=g.useState(l),[_,C]=g.useState(!1),[w,E]=g.useState(null),[S,A]=g.useState(null),[z,k]=g.useState(""),[M,D]=g.useState(!l);g.useEffect(()=>{(async()=>{if(!n?.uid)return;const[te,L]=await Promise.all([xM(n.uid).catch(()=>[]),jM(n.uid).catch(()=>[])]);if(h(te),b(L),l&&r){j(!0);try{const Z=await su(r);if(!Z){E("Squence introuvable.");return}if(Z.profId!==n.uid){E("Accs non autoris.");return}u({titre:Z.titre,description:Z.description,niveau:Z.niveau,matiere:Z.matiere,theme:Z.theme,competences:Z.competences,objectifGeneral:Z.objectifGeneral,prerequis:Z.prerequis,nombreSeances:Z.nombreSeances,dureeSeanceMinutes:Z.dureeSeanceMinutes,statut:Z.statut,genereeParIA:Z.genereeParIA,trimestre:Z.trimestre,groupeClasseId:Z.groupeClasseId,groupeClasseNom:Z.groupeClasseNom,cahierDeTextesId:Z.cahierDeTextesId,cahierDeTextesNom:Z.cahierDeTextesNom}),m(Z.seances)}catch{E("Erreur de chargement. Ressayez.")}finally{j(!1)}}})()},[n?.uid,r,l]);const $=()=>{m(I=>[...I,vee(I.length+1)])},B=(I,te)=>{m(L=>L.map((Z,W)=>W===I?te:Z))},H=I=>{m(te=>te.filter((L,Z)=>Z!==I).map((L,Z)=>({...L,numero:Z+1})))},T=I=>{I!==0&&m(te=>{const L=[...te];return[L[I-1],L[I]]=[L[I],L[I-1]],L.map((Z,W)=>({...Z,numero:W+1}))})},Y=I=>{m(te=>{if(I===te.length-1)return te;const L=[...te];return[L[I],L[I+1]]=[L[I+1],L[I]],L.map((Z,W)=>({...Z,numero:W+1}))})},J=()=>{const I=z.trim();I&&(u(te=>({...te,competences:[...te.competences??[],I]})),k(""))},P=I=>{u(te=>({...te,competences:(te.competences??[]).filter((L,Z)=>Z!==I)}))},q=I=>{u(L=>({...L,titre:I.titre,description:I.description,objectifGeneral:I.objectifGeneral,prerequis:I.prerequis,competences:I.competences,genereeParIA:!0}));const te=I.seances.map(L=>({...L,id:zM(),exporterVersCahier:!0,entreesCahierIds:[]}));m(te),D(!1),window.scrollTo({top:0,behavior:"smooth"})},U=async()=>{if(!n?.uid)return;if(!o.titre?.trim()){E("Le titre est obligatoire.");return}if(!o.matiere?.trim()){E("La matire est obligatoire.");return}if(!o.niveau?.trim()){E("Le niveau est obligatoire.");return}const I=d.find(W=>!W.titre.trim());if(I){E(`La sance n${I.numero} n'a pas de titre.`);return}C(!0),E(null);const te=v.find(W=>W.id===o.groupeClasseId),L=p.find(W=>W.id===o.cahierDeTextesId),Z={titre:o.titre.trim(),description:o.description?.trim()??"",niveau:o.niveau,matiere:o.matiere.trim(),theme:o.theme?.trim()??"",competences:o.competences??[],objectifGeneral:o.objectifGeneral?.trim()??"",prerequis:o.prerequis?.trim()??"",nombreSeances:d.length,dureeSeanceMinutes:o.dureeSeanceMinutes??55,statut:o.statut??"brouillon",genereeParIA:o.genereeParIA??!1,trimestre:o.trimestre??null,seances:d,evaluationsPrevues:[],groupeClasseId:o.groupeClasseId||null,groupeClasseNom:te?.nom||o.groupeClasseNom||null,cahierDeTextesId:o.cahierDeTextesId||null,cahierDeTextesNom:L?.titre||o.cahierDeTextesNom||null};try{if(l&&r)await ZJ(r,Z),A("Squence mise  jour avec succs !"),setTimeout(()=>e(`/prof/sequences/${r}`),1200);else{const{autorise:W,usage:ce,limite:xe}=await Nf(n.uid,n.subscriptionPlan);if(!W&&xe!==null){E(`Limite de ${xe} ressources atteinte (${ce}/${xe}). Passez  Premium Pro pour un accs illimit.`),C(!1);return}const he=await XJ(n.uid,Z);await Dj(n.uid),A("Squence cre avec succs !"),setTimeout(()=>e(`/prof/sequences/${he}`),1200)}}catch(W){console.error("[SequenceEditorPage] Sauvegarde:",W),E("Erreur lors de la sauvegarde. Ressayez.")}finally{C(!1)}};return x?t.jsxs("div",{className:"sequence-editor",children:[t.jsx("div",{className:"skeleton",style:{height:30,width:"50%",marginBottom:20}}),t.jsx("div",{className:"skeleton",style:{height:200,borderRadius:12}})]}):t.jsxs("div",{className:"sequence-editor",children:[t.jsxs("div",{className:"sequence-editor__header",children:[t.jsxs("p",{className:"sequence-editor__breadcrumb",children:[t.jsx("a",{onClick:()=>e("/prof/sequences"),style:{cursor:"pointer"},children:" Squences"})," / ",l?"Modifier":"Nouvelle squence"]}),t.jsx("h1",{className:"sequence-editor__title",children:l?" Modifier la squence":" Nouvelle squence"})]}),w&&t.jsxs("div",{className:"error-banner",role:"alert",children:[" ",w]}),S&&t.jsxs("div",{className:"success-banner",role:"status",children:[" ",S]}),t.jsx("div",{style:{marginBottom:8},children:t.jsx("button",{type:"button",className:"btn-secondary",style:{marginBottom:12},onClick:()=>D(I=>!I),children:M?" Masquer":" Gnrer avec l'IA"})}),M&&t.jsx(xee,{onSequenceGeneree:q,defaultMatiere:o.matiere,defaultNiveau:o.niveau,matieres:a.map(I=>I.valeur)}),t.jsxs("section",{className:"editor-section",children:[t.jsx("h2",{className:"editor-section__title",children:" Informations gnrales"}),t.jsxs("div",{className:"editor-form-grid",children:[t.jsxs("div",{className:"form-group editor-form-grid--full",children:[t.jsxs("label",{children:["Titre de la squence ",t.jsx("span",{className:"required",children:"*"})]}),t.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Les fonctions affines  Terminale S",value:o.titre??"",onChange:I=>u(te=>({...te,titre:I.target.value})),required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{children:["Matire ",t.jsx("span",{className:"required",children:"*"})]}),t.jsxs("select",{className:"form-control",value:o.matiere??"",onChange:I=>u(te=>({...te,matiere:I.target.value})),children:[t.jsx("option",{value:"",children:"Slectionner..."}),a.map(I=>t.jsx("option",{value:I.valeur,children:I.label},I.valeur))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{children:["Niveau ",t.jsx("span",{className:"required",children:"*"})]}),t.jsxs("select",{className:"form-control",value:o.niveau??"",onChange:I=>u(te=>({...te,niveau:I.target.value})),children:[t.jsx("option",{value:"",children:"Slectionner..."}),hr.map(I=>t.jsx("option",{value:I,children:I},I))]})]}),t.jsxs("div",{className:"form-group editor-form-grid--full",children:[t.jsx("label",{children:"Thme / Chapitre du programme"}),t.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Chapitre 4  Les vecteurs du plan",value:o.theme??"",onChange:I=>u(te=>({...te,theme:I.target.value}))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Trimestre"}),t.jsxs("select",{className:"form-control",value:o.trimestre??"",onChange:I=>u(te=>({...te,trimestre:I.target.value?Number(I.target.value):void 0})),children:[t.jsx("option",{value:"",children:"Non prcis"}),t.jsx("option",{value:"1",children:"1er trimestre (OctDc)"}),t.jsx("option",{value:"2",children:"2me trimestre (JanMars)"}),t.jsx("option",{value:"3",children:"3me trimestre (AvrJuin)"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Dure standard d'une sance"}),t.jsx("select",{className:"form-control",value:o.dureeSeanceMinutes??55,onChange:I=>u(te=>({...te,dureeSeanceMinutes:Number(I.target.value)})),children:_f.map(I=>t.jsxs("option",{value:I,children:[I," minutes"]},I))})]}),t.jsxs("div",{className:"form-group editor-form-grid--full",children:[t.jsx("label",{children:"Description / Contexte"}),t.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Contexte de la squence dans le programme, niveau de la classe, prrequis globaux...",value:o.description??"",onChange:I=>u(te=>({...te,description:I.target.value})),rows:3})]}),t.jsxs("div",{className:"form-group editor-form-grid--full",children:[t.jsx("label",{children:"Objectif gnral"}),t.jsx("textarea",{className:"form-control form-control--textarea",placeholder:" la fin de cette squence, les lves seront capables de...",value:o.objectifGeneral??"",onChange:I=>u(te=>({...te,objectifGeneral:I.target.value})),rows:2})]}),t.jsxs("div",{className:"form-group editor-form-grid--full",children:[t.jsx("label",{children:"Prrequis"}),t.jsx("textarea",{className:"form-control form-control--textarea",placeholder:"Connaissances ncessaires avant cette squence...",value:o.prerequis??"",onChange:I=>u(te=>({...te,prerequis:I.target.value})),rows:2})]})]}),t.jsxs("div",{className:"form-group",style:{marginTop:14},children:[t.jsx("label",{children:"Comptences vises"}),t.jsx("div",{className:"competences-list",children:(o.competences??[]).map((I,te)=>t.jsxs("span",{className:"competence-tag",children:[I,t.jsx("button",{type:"button",className:"competence-tag__remove",onClick:()=>P(te),"aria-label":"Supprimer la comptence",children:""})]},te))}),t.jsxs("div",{className:"competence-input-row",children:[t.jsx("input",{type:"text",className:"form-control",placeholder:"Ex : Rsoudre une quation du second degr",value:z,onChange:I=>k(I.target.value),onKeyDown:I=>I.key==="Enter"&&(I.preventDefault(),J())}),t.jsx("button",{type:"button",className:"btn-add-competence",onClick:J,children:"+ Ajouter"})]})]})]}),t.jsxs("section",{className:"editor-section",children:[t.jsx("h2",{className:"editor-section__title",children:" Liens optionnels"}),t.jsxs("div",{className:"editor-form-grid",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Groupe-classe"}),t.jsxs("select",{className:"form-control",value:o.groupeClasseId??"",onChange:I=>u(te=>({...te,groupeClasseId:I.target.value||void 0})),children:[t.jsx("option",{value:"",children:"Aucun groupe"}),v.map(I=>t.jsxs("option",{value:I.id,children:[I.nom,"  ",I.classe]},I.id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Cahier de Textes"}),t.jsxs("select",{className:"form-control",value:o.cahierDeTextesId??"",onChange:I=>u(te=>({...te,cahierDeTextesId:I.target.value||void 0})),children:[t.jsx("option",{value:"",children:" Aucun cahier "}),p.filter(I=>o.matiere&&o.niveau?I.matiere===o.matiere&&I.classe===o.niveau:o.matiere?I.matiere===o.matiere:o.niveau?I.classe===o.niveau:!0).map(I=>t.jsxs("option",{value:I.id,children:[I.titre,"  ",I.classe,"  ",I.anneeScolaire]},I.id))]}),o.niveau&&o.matiere&&p.filter(I=>I.classe===o.niveau&&I.matiere===o.matiere).length===0&&t.jsxs("p",{style:{fontSize:"0.8rem",color:"#f59e0b",marginTop:6},children:[" Aucun cahier pour ",o.matiere,"  ",o.niveau,"."," ",t.jsx("a",{href:"/prof/cahiers",style:{color:"#2563eb",textDecoration:"underline"},children:"Crer un cahier"})]}),(!o.niveau||!o.matiere)&&p.length>0&&t.jsx("p",{style:{fontSize:"0.8rem",color:"#94a3b8",marginTop:6},children:" Slectionnez la matire et le niveau pour filtrer les cahiers."})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Statut"}),t.jsxs("select",{className:"form-control",value:o.statut??"brouillon",onChange:I=>u(te=>({...te,statut:I.target.value})),children:[t.jsx("option",{value:"brouillon",children:"Brouillon"}),t.jsx("option",{value:"active",children:"En cours"}),t.jsx("option",{value:"terminee",children:"Termine"}),t.jsx("option",{value:"archivee",children:"Archive"})]})]})]})]}),t.jsxs("section",{className:"editor-section",children:[t.jsxs("div",{className:"seances-editor__header",children:[t.jsx("h2",{className:"editor-section__title",style:{margin:0},children:" Sances"}),t.jsxs("span",{className:"seances-editor__count",children:[d.length," sance",d.length>1?"s":"",d.filter(I=>I.estEvaluation).length>0&&`  ${d.filter(I=>I.estEvaluation).length} val.`]})]}),t.jsx("div",{className:"seances-list",children:d.length===0?t.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",textAlign:"center",padding:"20px 0"},children:"Aucune sance. Utilisez le bouton ci-dessous ou gnrez avec l'IA."}):d.map((I,te)=>t.jsx(gee,{seance:I,onChange:L=>B(te,L),onDelete:()=>H(te),onMoveUp:()=>T(te),onMoveDown:()=>Y(te),isFirst:te===0,isLast:te===d.length-1},I.id))}),t.jsx("button",{type:"button",className:"btn-add-seance",style:{marginTop:14},onClick:$,children:"+ Ajouter une sance"})]}),t.jsxs("div",{style:{position:"sticky",bottom:16,display:"flex",justifyContent:"flex-end",gap:10,background:"rgba(248,250,252,0.95)",backdropFilter:"blur(6px)",padding:"12px 0",zIndex:10},children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>e("/prof/sequences"),disabled:_,children:"Annuler"}),t.jsx("button",{type:"button",className:"btn-primary",onClick:U,disabled:_,children:_?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner"})," Enregistrement..."]}):l?" Mettre  jour":" Crer la squence"})]})]})},bee=({statut:e})=>{const{label:r}=wp[e];return t.jsxs("span",{className:`statut-badge statut-badge--${e}`,children:[t.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:"currentColor",display:"inline-block"}}),r]})},yee=({sequence:e,cahiers:r,profId:n,onClose:a,onSuccess:l})=>{const[o,u]=g.useState(e.cahierDeTextesId??(r.length===1?r[0].id:"")),[d,m]=g.useState(()=>{const w=new Date().toISOString().split("T")[0],E={};return e.seances.forEach(S=>{E[S.id]=w}),E}),[p,h]=g.useState(()=>{const w={};return e.seances.forEach(E=>{w[E.id]=E.exporterVersCahier&&(!E.entreesCahierIds||E.entreesCahierIds.length===0)}),w}),[v,b]=g.useState(!1),[x,j]=g.useState(null),_=Object.values(p).filter(Boolean).length,C=async()=>{if(!o){j("Veuillez slectionner un Cahier de Textes.");return}if(_===0){j("Slectionnez au moins une sance  exporter.");return}b(!0),j(null);const w={};e.seances.filter(E=>p[E.id]).forEach(E=>{const S=d[E.id];if(S){const A=Ae.fromDate(new Date(S+"T08:00:00"));w[E.id]=A}});try{const E=await tee({sequenceId:e.id,cahierDeTextesId:o,profId:n,datesParSeance:w});E.erreurs.length>0&&j(`${E.erreurs.length} sance(s) n'ont pas pu tre exportes.`),l(E.nbExportees)}catch(E){const S=E instanceof Error?E.message:"Erreur inconnue";j(`Erreur d'export : ${S}`)}finally{b(!1)}};return g.useEffect(()=>{const w=E=>{E.key==="Escape"&&a()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[a]),t.jsx("div",{className:"export-modal__overlay",onClick:w=>w.target===w.currentTarget&&a(),children:t.jsxs("div",{className:"export-modal",role:"dialog","aria-modal":"true","aria-labelledby":"export-modal-title",children:[t.jsxs("div",{className:"export-modal__header",children:[t.jsx("h2",{className:"export-modal__title",id:"export-modal-title",children:" Exporter vers le Cahier de Textes"}),t.jsx("button",{className:"export-modal__close",onClick:a,"aria-label":"Fermer",children:""})]}),t.jsxs("div",{className:"export-modal__body",children:[t.jsxs("div",{className:"form-group",style:{marginBottom:16},children:[t.jsxs("label",{style:{fontWeight:600,marginBottom:6,display:"block"},children:["Cahier de Textes cible ",t.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),r.length===0?t.jsx("p",{style:{color:"#dc2626",fontSize:"0.875rem"},children:"Aucun Cahier de Textes trouv. Crez-en un d'abord."}):t.jsxs("select",{className:"form-control",value:o,onChange:w=>u(w.target.value),children:[t.jsx("option",{value:"",children:"Slectionner un cahier..."}),r.map(w=>t.jsxs("option",{value:w.id,children:[w.titre,"  ",w.classe," (",w.anneeScolaire,")"]},w.id))]})]}),t.jsx("p",{style:{fontSize:"0.8125rem",color:"#64748b",marginBottom:12},children:"Slectionnez les sances  exporter et assignez leur une date. Chaque sance deviendra une entre dans le Cahier de Textes."}),e.seances.map(w=>{const E=(w.entreesCahierIds?.length??0)>0;return t.jsxs("div",{className:"export-seance-row",children:[t.jsx("input",{type:"checkbox",className:"export-seance-row__check",checked:!!p[w.id],onChange:S=>h(A=>({...A,[w.id]:S.target.checked})),id:`export-${w.id}`,"aria-label":`Exporter la sance ${w.numero}`}),t.jsxs("div",{className:"export-seance-row__info",children:[t.jsx("label",{htmlFor:`export-${w.id}`,style:{cursor:"pointer"},children:t.jsxs("div",{className:"export-seance-row__titre",children:[w.numero,". ",w.titre||`Sance ${w.numero}`]})}),t.jsxs("div",{className:"export-seance-row__type",children:[jf[w.typeActivite],"  ",w.dureeMinutes,"min",E&&t.jsx("span",{className:"export-seance-row__exported",style:{marginLeft:6},children:" Dj exporte"})]})]}),t.jsx("input",{type:"date",className:"export-seance-row__date",value:d[w.id]??"",onChange:S=>m(A=>({...A,[w.id]:S.target.value})),disabled:!p[w.id],"aria-label":`Date pour la sance ${w.numero}`})]},w.id)}),x&&t.jsxs("div",{className:"error-banner",style:{marginTop:12},children:[" ",x]})]}),t.jsxs("div",{className:"export-modal__footer",children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:a,disabled:v,children:"Annuler"}),t.jsx("button",{type:"button",className:"btn-success",onClick:C,disabled:v||_===0||!o,children:v?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner"})," Export en cours..."]}):` Exporter ${_} sance${_>1?"s":""}`})]})]})})},jee=()=>{const e=Ze(),{id:r}=yn(),{currentUser:n}=Ke(),[a,l]=g.useState(null),[o,u]=g.useState([]),[d,m]=g.useState(!0),[p,h]=g.useState(null),[v,b]=g.useState(null),[x,j]=g.useState("seances"),[_,C]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!(!n?.uid||!r)){m(!0);try{const[k,M]=await Promise.all([su(r),xM(n.uid)]);if(!k){h("Squence introuvable.");return}if(k.profId!==n.uid){h("Accs non autoris.");return}l(k),u(M)}catch{h("Erreur de chargement.")}finally{m(!1)}}})()},[n?.uid,r]);const w=async()=>{if(!(!a||!window.confirm(`Supprimer "${a.titre}" ?
Cette action est irrversible.`)))try{await AM(a.id),e("/prof/sequences")}catch{h("Erreur lors de la suppression.")}},E=async z=>{if(a)try{await JJ(a.id,z),l(k=>k?{...k,statut:z}:null)}catch{h("Erreur de mise  jour du statut.")}},S=z=>{C(!1),b(` ${z} sance${z>1?"s":""} exporte${z>1?"s":""} vers le Cahier de Textes !`),r&&su(r).then(k=>k&&l(k)).catch(()=>null),setTimeout(()=>b(null),5e3)};if(d)return t.jsxs("div",{className:"sequence-detail",children:[t.jsx("div",{className:"skeleton",style:{height:28,width:"50%",marginBottom:20}}),t.jsx("div",{className:"skeleton",style:{height:180,borderRadius:12,marginBottom:20}}),t.jsx("div",{className:"skeleton",style:{height:400,borderRadius:12}})]});if(p||!a)return t.jsxs("div",{className:"sequence-detail",children:[t.jsxs("div",{className:"error-banner",children:[" ",p??"Squence introuvable."]}),t.jsx("button",{className:"btn-secondary",onClick:()=>e("/prof/sequences"),children:" Retour"})]});const A=nee.find(z=>z.valeur===a.niveau)?.label??a.niveau;return t.jsxs("div",{className:"sequence-detail",children:[_&&t.jsx(yee,{sequence:a,cahiers:o,profId:n.uid,onClose:()=>C(!1),onSuccess:S}),p&&t.jsxs("div",{className:"error-banner",role:"alert",children:[" ",p]}),v&&t.jsx("div",{className:"success-banner",role:"status",children:v}),t.jsxs("div",{className:"sequence-detail__header",children:[t.jsxs("p",{style:{fontSize:"0.8125rem",color:"#64748b",marginBottom:8},children:[t.jsx("a",{onClick:()=>e("/prof/sequences"),style:{color:"#2563eb",cursor:"pointer",fontWeight:500},children:" Squences"})," / ",a.titre]}),t.jsxs("div",{className:"sequence-detail__header-top",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"sequence-detail__title",children:a.titre}),t.jsxs("div",{className:"sequence-detail__meta",style:{marginTop:8},children:[t.jsx(bee,{statut:a.statut}),a.genereeParIA&&t.jsx("span",{className:"badge-ia",children:" IA"}),t.jsx("span",{className:"sequence-card__meta-chip",children:a.matiere}),t.jsx("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:A}),a.trimestre&&t.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:["T",a.trimestre]}),a.groupeClasseNom&&t.jsxs("span",{className:"sequence-card__meta-chip sequence-card__meta-chip--grey",children:[" ",a.groupeClasseNom]})]})]}),t.jsxs("div",{className:"sequence-detail__actions",children:[t.jsx("select",{className:"form-control",style:{width:"auto",fontSize:"0.8rem"},value:a.statut,onChange:z=>E(z.target.value),"aria-label":"Changer le statut",children:Object.entries(wp).map(([z,{label:k}])=>t.jsx("option",{value:z,children:k},z))}),t.jsx("button",{className:"btn-success",onClick:()=>C(!0),title:"Exporter les sances vers le Cahier de Textes",children:" Exporter"}),t.jsx("button",{className:"btn-secondary",onClick:()=>e(`/prof/sequences/${a.id}/modifier`),children:" Modifier"}),t.jsx("button",{className:"btn-danger",onClick:w,children:""})]})]}),a.objectifGeneral&&t.jsxs("div",{className:"sequence-detail__objectif",children:[t.jsx("strong",{children:" Objectif :"})," ",a.objectifGeneral]}),t.jsxs("div",{style:{display:"flex",gap:16,marginTop:12,flexWrap:"wrap",fontSize:"0.8125rem",color:"#64748b"},children:[t.jsxs("span",{children:[" ",a.seances.length," sances"]}),t.jsxs("span",{children:[" ",a.evaluationsPrevues.length," valuation",a.evaluationsPrevues.length>1?"s":""]}),t.jsxs("span",{children:[" ",a.seances.reduce((z,k)=>z+k.dureeMinutes,0)," min total"]}),a.cahierDeTextesNom&&t.jsxs("span",{children:[" ",a.cahierDeTextesNom]}),a.exporteAt&&t.jsxs("span",{children:[" Export le ",a.exporteAt.toDate().toLocaleDateString("fr-FR")]})]})]}),t.jsxs("div",{className:"sequence-tabs",role:"tablist",children:[t.jsxs("button",{role:"tab",className:`sequence-tab${x==="seances"?" sequence-tab--active":""}`,onClick:()=>j("seances"),"aria-selected":x==="seances",children:[" Sances (",a.seances.length,")"]}),t.jsxs("button",{role:"tab",className:`sequence-tab${x==="evaluations"?" sequence-tab--active":""}`,onClick:()=>j("evaluations"),"aria-selected":x==="evaluations",children:[" valuations (",a.evaluationsPrevues.length,")"]}),t.jsx("button",{role:"tab",className:`sequence-tab${x==="infos"?" sequence-tab--active":""}`,onClick:()=>j("infos"),"aria-selected":x==="infos",children:" Dtails"})]}),x==="seances"&&t.jsx("div",{role:"tabpanel",children:a.seances.length===0?t.jsxs("div",{className:"sequences-empty",children:[t.jsx("span",{className:"sequences-empty__icon",children:""}),t.jsx("p",{className:"sequences-empty__text",children:"Aucune sance planifie"}),t.jsx("button",{className:"btn-primary",onClick:()=>e(`/prof/sequences/${a.id}/modifier`),children:" Ajouter des sances"})]}):t.jsx("div",{className:"sequence-timeline",children:a.seances.map(z=>t.jsx(_ee,{seance:z},z.id))})}),x==="evaluations"&&t.jsxs("div",{role:"tabpanel",className:"evaluations-panel",children:[t.jsx("h3",{className:"evaluations-panel__title",children:" valuations prvues"}),a.evaluationsPrevues.length===0?t.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:'Aucune valuation marque dans cette squence. Modifiez une sance et cochez "Cette sance est une valuation".'}):a.evaluationsPrevues.map(z=>t.jsxs("div",{className:"evaluation-row",children:[t.jsxs("div",{className:"evaluation-row__numero",children:["S",z.seanceNumero]}),t.jsxs("div",{className:"evaluation-row__info",children:[t.jsx("div",{className:"evaluation-row__titre",children:z.titre}),t.jsxs("div",{className:"evaluation-row__type",children:[Oj[z.type],z.datePrevue&&`  ${z.datePrevue.toDate().toLocaleDateString("fr-FR")}`]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"evaluation-row__note",children:["/",z.noteMax]}),t.jsxs("div",{className:"evaluation-row__coeff",children:["Coeff. ",z.coefficient]})]})]},z.id))]}),x==="infos"&&t.jsx("div",{role:"tabpanel",children:t.jsxs("div",{className:"editor-section",children:[a.competences.length>0&&t.jsxs("div",{style:{marginBottom:16},children:[t.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:8},children:"Comptences vises"}),t.jsx("div",{className:"competences-list",children:a.competences.map((z,k)=>t.jsx("span",{className:"competence-tag",children:z},k))})]}),a.prerequis&&t.jsxs("div",{style:{marginBottom:16},children:[t.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:6},children:"Prrequis"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",lineHeight:1.6},children:a.prerequis})]}),a.description&&t.jsxs("div",{style:{marginBottom:16},children:[t.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:700,color:"#374151",marginBottom:6},children:"Description"}),t.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",lineHeight:1.6},children:a.description})]}),t.jsxs("div",{style:{borderTop:"1px solid #f1f5f9",paddingTop:12,fontSize:"0.8rem",color:"#94a3b8"},children:[t.jsxs("p",{children:["Cre le ",a.createdAt.toDate().toLocaleDateString("fr-FR")]}),t.jsxs("p",{children:["Modifie le ",a.updatedAt.toDate().toLocaleDateString("fr-FR")]}),a.genereeParIA&&t.jsx("p",{children:" Gnre avec l'IA Claude"})]})]})})]})},_ee=({seance:e})=>{const[r,n]=g.useState(!1),a=(e.entreesCahierIds?.length??0)>0;return t.jsx("div",{className:`timeline-item${e.estEvaluation?" timeline-item--eval":""}`,children:t.jsxs("div",{className:"timeline-card",children:[t.jsxs("div",{className:"timeline-card__header",onClick:()=>n(l=>!l),style:{cursor:"pointer"},children:[t.jsxs("h3",{className:"timeline-card__title",children:[e.numero,". ",e.titre||`Sance ${e.numero}`]}),t.jsxs("div",{className:"timeline-card__meta",children:[t.jsx("span",{className:`type-activite-badge type-activite-badge--${e.typeActivite}`,children:jf[e.typeActivite]}),t.jsxs("span",{className:"timeline-card__duree",children:[e.dureeMinutes,"min"]}),a&&t.jsx("span",{className:"export-seance-row__exported",children:" Exporte"}),t.jsx("span",{style:{color:"#94a3b8",fontSize:"0.7rem"},children:r?"":""})]})]}),e.objectifSpecifique&&t.jsxs("p",{className:"timeline-card__objectif",children:[" ",e.objectifSpecifique]}),r&&t.jsxs(t.Fragment,{children:[e.contenu&&t.jsx("p",{className:"timeline-card__contenu",style:{marginTop:8},children:e.contenu}),e.ressources.length>0&&t.jsx("div",{className:"timeline-card__ressources",children:e.ressources.map((l,o)=>t.jsx("span",{className:"ressource-chip",children:l},o))}),e.estEvaluation&&e.typeEvaluation&&t.jsxs("div",{style:{marginTop:10,padding:"8px 12px",background:"#fef2f2",borderRadius:6,fontSize:"0.8rem",color:"#dc2626"},children:[" ",Oj[e.typeEvaluation],e.noteMax&&`  /${e.noteMax}`,e.coefficient&&`  Coeff. ${e.coefficient}`]})]})]})})},Bb={texte:{label:"Texte",emoji:"",description:"Paragraphe format"},image:{label:"Image",emoji:"",description:"Image avec lgende"},video:{label:"Vido",emoji:"",description:"Vido YouTube"},encadre:{label:"Encadr",emoji:"",description:"Dfinition, remarque, astuce..."},quiz:{label:"Quiz",emoji:"",description:"Question  choix multiple"},exercice:{label:"Exercice",emoji:"",description:"Problme avec correction"}},kM={definition:{label:"Dfinition",emoji:"",bg:"#eff6ff",border:"#2563eb",color:"#1d4ed8"},remarque:{label:"Remarque",emoji:"",bg:"#fefce8",border:"#ca8a04",color:"#854d0e"},attention:{label:"Attention",emoji:"",bg:"#fef2f2",border:"#dc2626",color:"#991b1b"},astuce:{label:"Astuce",emoji:"",bg:"#f0fdf4",border:"#16a34a",color:"#15803d"},exemple:{label:"Exemple",emoji:"",bg:"#f8fafc",border:"#64748b",color:"#475569"}},Nee={brouillon:{label:"Brouillon",couleur:"#6b7280",bg:"#f3f4f6"},publie:{label:"Publi",couleur:"#16a34a",bg:"#f0fdf4"},archive:{label:"Archiv",couleur:"#9ca3af",bg:"#f9fafb"}};function See({cours:e,onClick:r}){const n=e.dureeEstimee>=60?`${Math.floor(e.dureeEstimee/60)}h${e.dureeEstimee%60>0?e.dureeEstimee%60:""}`:`${e.dureeEstimee} min`,a=ss.find(l=>l.valeur===e.niveau)?.label??e.niveau;return t.jsxs("article",{className:"cours-card",onClick:r,role:"button",tabIndex:0,onKeyDown:l=>l.key==="Enter"&&r(),"aria-label":`Cours : ${e.titre}`,children:[t.jsxs("div",{className:"cours-card__cover",children:[e.couvertureUrl?t.jsx("img",{src:e.couvertureUrl,alt:e.titre,loading:"lazy"}):t.jsx("div",{className:"cours-card__cover-placeholder",children:t.jsx("span",{children:e.matiere.charAt(0)})}),e.isPremium&&t.jsx("span",{className:"cours-card__badge cours-card__badge--premium",children:" Premium"}),!e.isPremium&&t.jsx("span",{className:"cours-card__badge cours-card__badge--gratuit",children:" Gratuit"})]}),t.jsxs("div",{className:"cours-card__body",children:[t.jsxs("div",{className:"cours-card__meta",children:[t.jsx("span",{className:"cours-card__matiere",children:e.matiere}),t.jsx("span",{className:"cours-card__niveau",children:a})]}),t.jsx("h3",{className:"cours-card__titre",children:e.titre}),t.jsx("p",{className:"cours-card__description",children:e.description}),t.jsxs("div",{className:"cours-card__footer",children:[t.jsxs("span",{className:"cours-card__prof",children:[" ",e.profNom]}),t.jsxs("div",{className:"cours-card__stats",children:[t.jsxs("span",{children:[" ",e.nombreSections," section",e.nombreSections>1?"s":""]}),t.jsxs("span",{children:[" ",n]}),t.jsxs("span",{children:[" ",e.nombreInscrits]})]})]})]})]})}function wee(){const e=Ze(),{currentUser:r}=Ke(),{matieres:n}=na(),a=r?.subscriptionPlan,l=r?.isPremium&&a&&jo(a),[o,u]=g.useState([]),[d,m]=g.useState([]),[p,h]=g.useState(!0),[v,b]=g.useState(null),[x,j]=g.useState({matiere:"",niveau:"",recherche:"",isPremium:""});g.useEffect(()=>{_()},[r?.role]);async function _(){h(!0),b(null);try{let S=await $A();r?.role!=="prof"&&r?.role!=="admin"&&(S=S.filter(A=>!A.reservedPro)),u(S),m(S)}catch(S){console.error("[CoursPage] Erreur chargement :",S),b("Impossible de charger les cours. Vrifiez votre connexion.")}finally{h(!1)}}const C=g.useCallback(S=>{j(S);let A=[...o];if(S.matiere&&(A=A.filter(z=>z.matiere===S.matiere)),S.niveau&&(A=A.filter(z=>z.niveau===S.niveau)),S.isPremium!==""&&S.isPremium!==void 0&&(A=A.filter(z=>z.isPremium===S.isPremium)),S.recherche){const z=S.recherche.toLowerCase();A=A.filter(k=>k.titre.toLowerCase().includes(z)||k.description.toLowerCase().includes(z)||k.matiere.toLowerCase().includes(z)||k.tags.some(M=>M.toLowerCase().includes(z)))}m(A)},[o]),w=()=>{j({matiere:"",niveau:"",recherche:"",isPremium:""}),m(o)},E=!!(x.matiere||x.niveau||x.recherche||x.isPremium!=="");return t.jsxs("div",{className:"cours-catalogue",children:[t.jsx("section",{className:"cours-catalogue__hero","aria-label":"Introduction aux cours",children:t.jsxs("div",{className:"cours-catalogue__hero-content",children:[t.jsx("h1",{className:"cours-catalogue__hero-titre",children:" Cours en ligne"}),t.jsx("p",{className:"cours-catalogue__hero-sous-titre",children:"Des cours complets du programme sngalais  de la 6me au Bac. Crs par vos professeurs, accessibles partout, mme hors-ligne."}),l&&t.jsx("button",{className:"btn-primary",onClick:()=>e("/premium/mes-cours"),style:{marginTop:"1rem"},children:" Choisir mes cours"}),t.jsxs("div",{className:"cours-catalogue__hero-stats","aria-label":"Statistiques de la plateforme",children:[t.jsxs("div",{className:"cours-catalogue__stat",children:[t.jsx("span",{className:"cours-catalogue__stat-val",children:o.length}),t.jsx("span",{className:"cours-catalogue__stat-label",children:"Cours disponibles"})]}),t.jsxs("div",{className:"cours-catalogue__stat",children:[t.jsx("span",{className:"cours-catalogue__stat-val",children:o.filter(S=>!S.isPremium).length}),t.jsx("span",{className:"cours-catalogue__stat-label",children:"Cours gratuits"})]}),t.jsxs("div",{className:"cours-catalogue__stat",children:[t.jsx("span",{className:"cours-catalogue__stat-val",children:[...new Set(o.map(S=>S.matiere))].length}),t.jsx("span",{className:"cours-catalogue__stat-label",children:"Matires"})]})]})]})}),t.jsx("section",{className:"cours-catalogue__filtres","aria-label":"Filtres de recherche",children:t.jsxs("div",{className:"cours-catalogue__filtres-inner",children:[t.jsxs("div",{className:"cours-catalogue__search",children:[t.jsx("span",{className:"cours-catalogue__search-icon","aria-hidden":"true",children:""}),t.jsx("input",{type:"search",placeholder:"Rechercher un cours, une matire, un tag...",value:x.recherche,onChange:S=>C({...x,recherche:S.target.value}),className:"cours-catalogue__search-input","aria-label":"Rechercher dans les cours"})]}),t.jsxs("select",{value:x.matiere,onChange:S=>C({...x,matiere:S.target.value}),className:"cours-catalogue__select","aria-label":"Filtrer par matire",children:[t.jsx("option",{value:"",children:"Toutes les matires"}),n.map(S=>t.jsx("option",{value:S.valeur,children:S.label},S.valeur))]}),t.jsxs("select",{value:x.niveau,onChange:S=>C({...x,niveau:S.target.value}),className:"cours-catalogue__select","aria-label":"Filtrer par niveau",children:[t.jsx("option",{value:"",children:"Tous les niveaux"}),hr.map(S=>t.jsx("option",{value:S,children:S},S))]}),t.jsxs("select",{value:String(x.isPremium),onChange:S=>{const A=S.target.value===""?"":S.target.value==="true";C({...x,isPremium:A})},className:"cours-catalogue__select","aria-label":"Filtrer par accs",children:[t.jsx("option",{value:"",children:"Tous les accs"}),t.jsx("option",{value:"false",children:" Gratuits"}),t.jsx("option",{value:"true",children:" Premium"})]}),E&&t.jsx("button",{className:"btn-secondary btn--sm",onClick:w,"aria-label":"Effacer les filtres",children:" Effacer les filtres"})]})}),t.jsxs("main",{className:"cours-catalogue__contenu",children:[v&&t.jsxs("div",{className:"error-banner",role:"alert",children:[" ",v,t.jsx("button",{className:"btn-link",onClick:_,children:"Ressayer"})]}),p&&t.jsx("div",{className:"cours-catalogue__grille","aria-busy":"true","aria-label":"Chargement des cours",children:[1,2,3,4,5,6].map(S=>t.jsxs("div",{className:"cours-card cours-card--skeleton",children:[t.jsx("div",{className:"skeleton cours-card__cover"}),t.jsxs("div",{className:"cours-card__body",children:[t.jsx("div",{className:"skeleton",style:{height:16,width:"60%",marginBottom:8}}),t.jsx("div",{className:"skeleton",style:{height:20,marginBottom:8}}),t.jsx("div",{className:"skeleton",style:{height:14,width:"80%"}})]})]},S))}),!p&&d.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"cours-catalogue__compteur","aria-live":"polite",children:[d.length," cours trouv",d.length>1?"s":"",E&&" pour ces critres"]}),t.jsx("div",{className:"cours-catalogue__grille",children:d.map(S=>t.jsx(See,{cours:S,onClick:()=>e(`/cours/${S.id}`)},S.id))})]}),!p&&d.length===0&&!v&&t.jsxs("div",{className:"cours-catalogue__vide",role:"status",children:[t.jsx("span",{"aria-hidden":"true",children:""}),t.jsx("h3",{children:"Aucun cours trouv"}),t.jsx("p",{children:E?"Essayez de modifier ou supprimer vos filtres.":"Les cours seront disponibles bientt. Revenez dans quelques jours !"}),E&&t.jsx("button",{className:"btn-secondary",onClick:w,children:"Afficher tous les cours"})]})]})]})}const tl="progression_cours";async function uA(e,r){const n=Ee(_e(Q,tl),Se("userId","==",e),Se("coursId","==",r)),a=await Ce(n);if(a.empty)return null;const l=a.docs[0];return{id:l.id,...l.data()}}async function Cee(e){const r=Ee(_e(Q,tl),Se("coursId","==",e));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}async function Eee(e,r){const n=Ae.now(),a=await Dt(_e(Q,tl),{userId:e,coursId:r,sectionsLues:[],reponsesQuiz:[],pourcentageProgression:0,scoreQuiz:0,tentativesQuiz:0,debutLe:n,dernierAcces:n,estTermine:!1});return await Z5(r),a.id}async function Aee(e,r,n){const a=await gt(je(Q,tl,e));if(!a.exists())return;const l=a.data();if(l.sectionsLues.includes(r))return;const o=[...l.sectionsLues,r],u=Math.round(o.length/n*100),d=o.length>=n;await Ge(je(Q,tl,e),{sectionsLues:Gb(r),pourcentageProgression:u,estTermine:d,dernierAcces:Ae.now()})}async function zee(e,r){const n=await gt(je(Q,tl,e));if(!n.exists())return;const a=n.data(),l=a.reponsesQuiz??[];if(l.some(p=>p.blocId===r.blocId))return;const u=[...l,r],d=u.filter(p=>p.estCorrecte).length,m=u.length>0?Math.round(d/u.length*100):0;await Ge(je(Q,tl,e),{reponsesQuiz:Gb(r),scoreQuiz:m,tentativesQuiz:a.tentativesQuiz+1,dernierAcces:Ae.now()})}function kee(e){if(e.length===0)return{nombreInscrits:0,nombreTermines:0,tauxCompletion:0,progressionMoyenne:0,scoreMoyen:0};const r=e.filter(l=>l.estTermine).length,n=Math.round(e.reduce((l,o)=>l+o.pourcentageProgression,0)/e.length),a=Math.round(e.reduce((l,o)=>l+o.scoreQuiz,0)/e.length);return{nombreInscrits:e.length,nombreTermines:r,tauxCompletion:Math.round(r/e.length*100),progressionMoyenne:n,scoreMoyen:a}}function Oee({bloc:e}){const r=e.contenu.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)/gs,"<ul>$1</ul>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br/>");return t.jsx("div",{className:"bloc-texte",dangerouslySetInnerHTML:{__html:`<p>${r}</p>`}})}function Dee({bloc:e}){return t.jsxs("figure",{className:"bloc-image",children:[t.jsx("img",{src:e.url,alt:e.alt,loading:"lazy"}),e.legende&&t.jsx("figcaption",{children:e.legende})]})}function Pee({bloc:e}){const r=B5(e.urlYoutube);return r?t.jsxs("div",{className:"bloc-video",children:[e.titre&&t.jsxs("h4",{className:"bloc-video__titre",children:[" ",e.titre]}),e.description&&t.jsx("p",{className:"bloc-video__description",children:e.description}),t.jsx("div",{className:"bloc-video__embed",children:t.jsx("iframe",{src:`https://www.youtube.com/embed/${r}`,title:e.titre||"Vido pdagogique",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})]}):null}function Mee({bloc:e}){const r=kM[e.variante];return t.jsxs("div",{className:"bloc-encadre",style:{background:r.bg,borderLeftColor:r.border,color:r.color},children:[t.jsxs("p",{className:"bloc-encadre__titre",children:[r.emoji," ",e.titre]}),t.jsx("p",{className:"bloc-encadre__contenu",children:e.contenu})]})}function Tee({bloc:e,onReponse:r,reponseExistante:n}){const[a,l]=g.useState(n??null),o=a!==null;function u(d,m){o||(l(d),r(d,m))}return t.jsxs("div",{className:"bloc-quiz",children:[t.jsxs("p",{className:"bloc-quiz__question",children:[" ",e.question]}),t.jsx("div",{className:"bloc-quiz__options",children:e.options.map(d=>{let m="";return o&&(d.id===a?m=d.estCorrecte?"correct":"incorrect":d.estCorrecte&&(m="attendu")),t.jsxs("button",{className:`bloc-quiz__option bloc-quiz__option--${m||"neutre"}`,onClick:()=>u(d.id,d.estCorrecte),disabled:o,"aria-pressed":d.id===a,children:[m==="correct"&&" ",m==="incorrect"&&" ",m==="attendu"&&" ",d.texte]},d.id)})}),o&&e.explication&&t.jsxs("div",{className:"bloc-quiz__explication",children:[" ",t.jsx("strong",{children:"Explication :"})," ",e.explication]})]})}function qee({bloc:e}){const[r,n]=g.useState(!1),a={facile:"#16a34a",moyen:"#ca8a04",difficile:"#dc2626"};return t.jsxs("div",{className:"bloc-exercice",children:[t.jsxs("div",{className:"bloc-exercice__header",children:[t.jsx("span",{className:"bloc-exercice__titre",children:" Exercice"}),t.jsxs("span",{className:"bloc-exercice__difficulte",style:{color:a[e.difficulte]},children:[e.difficulte.charAt(0).toUpperCase()+e.difficulte.slice(1),e.points&&`  ${e.points} pt${e.points>1?"s":""}`]})]}),t.jsx("p",{className:"bloc-exercice__enonce",children:e.enonce}),r?t.jsxs("div",{className:"bloc-exercice__correction",children:[t.jsx("p",{className:"bloc-exercice__correction-titre",children:" Correction"}),t.jsx("p",{children:e.correction})]}):t.jsx("button",{className:"btn-secondary btn--sm",onClick:()=>n(!0),children:" Voir la correction"})]})}function Ree({bloc:e,isPremiumVerrou:r,onReponseQuiz:n,reponseExistante:a}){if(r)return t.jsxs("div",{className:"bloc-premium-verrou","aria-label":"Contenu Premium",children:[t.jsx("span",{children:""}),t.jsx("p",{children:"Ce contenu est rserv aux abonns Premium."})]});switch(e.type){case"texte":return t.jsx(Oee,{bloc:e});case"image":return t.jsx(Dee,{bloc:e});case"video":return t.jsx(Pee,{bloc:e});case"encadre":return t.jsx(Mee,{bloc:e});case"quiz":return t.jsx(Tee,{bloc:e,reponseExistante:a,onReponse:(l,o)=>n(e.id,l,o)});case"exercice":return t.jsx(qee,{bloc:e});default:return null}}function Iee(){const{coursId:e}=yn(),r=Ze(),{currentUser:n}=Ke(),a=n?.isPremium??!1,l=a&&eR(e||"",a,n?.subscriptionPlan,n?.coursChoisis??[]),[o,u]=g.useState(null),[d,m]=g.useState([]),[p,h]=g.useState(null),[v,b]=g.useState(null),[x,j]=g.useState(!0),[_,C]=g.useState(null),w=g.useRef(null);g.useEffect(()=>{e&&E()},[e,n]);async function E(){if(e){j(!0),C(null);try{const[B,H]=await Promise.all([BA(e),UA(e)]);if(!B||B.statut!=="publie"){C("Ce cours n'est pas disponible."),j(!1);return}if(u(B),m(H),H.length>0&&b(H[0].id),n){let T=await uA(n.uid,e);T||(await Eee(n.uid,e),T=await uA(n.uid,e)),h(T)}}catch(B){console.error("[CoursDetailPage] Erreur chargement :",B),C("Erreur de chargement. Vrifiez votre connexion.")}finally{j(!1)}}}function S(B){const H=B.blocs.filter(P=>P.type==="quiz");if(H.length===0)return!0;const T=p?.reponsesQuiz.filter(P=>H.some(q=>q.id===P.blocId))??[];return T.length<H.length?!1:T.filter(P=>P.estCorrecte).length/H.length*100>=60}async function A(B){if(!n||!p||!o||p.sectionsLues.includes(B))return;const H=d.find(T=>T.id===B);if(H&&!S(H)){C("Russissez les quiz de cette section (60% minimum) pour continuer.");return}try{await Aee(p.id,B,o.nombreSections),h(T=>T?{...T,sectionsLues:[...T.sectionsLues,B],pourcentageProgression:Math.round((T.sectionsLues.length+1)/o.nombreSections*100)}:null)}catch(T){console.error("[CoursDetailPage] Erreur marquer section :",T)}}async function z(B,H,T){if(!(!n||!p))try{await zee(p.id,{blocId:B,optionChoisieId:H,estCorrecte:T,reponduAt:Ae.now()})}catch(Y){console.error("[CoursDetailPage] Erreur enregistrement quiz :",Y)}}function k(B){return!!(B.estGratuite||B.ordre===1||!o?.isPremium||l)}if(x)return t.jsxs("div",{className:"cours-detail__loading","aria-busy":"true",children:[t.jsx("div",{className:"spinner spinner--blue"}),t.jsx("p",{children:"Chargement du cours..."})]});if(_||!o)return t.jsxs("div",{className:"cours-detail__erreur",role:"alert",children:[t.jsx("span",{"aria-hidden":"true",children:""}),t.jsx("p",{children:_??"Cours introuvable."}),t.jsx("button",{className:"btn-secondary",onClick:()=>r("/cours"),children:" Retour au catalogue"})]});const M=ss.find(B=>B.valeur===o.niveau)?.label??o.niveau,D=d.find(B=>B.id===v),$=D?k(D):!1;return t.jsxs("div",{className:"cours-detail",children:[t.jsxs("header",{className:"cours-detail__header",children:[t.jsxs("p",{className:"cours-detail__breadcrumb",children:[t.jsx("button",{className:"btn-link",onClick:()=>r("/cours"),children:" Cours"})," / ",t.jsx("span",{children:o.matiere})," / ",t.jsx("span",{children:o.titre})]}),t.jsxs("div",{className:"cours-detail__header-grid",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"cours-detail__badges",children:[t.jsx("span",{className:"badge badge--matiere",children:o.matiere}),t.jsx("span",{className:"badge badge--niveau",children:M}),o.isPremium?t.jsx("span",{className:"badge badge--premium",children:" Premium"}):t.jsx("span",{className:"badge badge--gratuit",children:" Gratuit"})]}),t.jsx("h1",{className:"cours-detail__titre",children:o.titre}),t.jsx("p",{className:"cours-detail__description",children:o.description}),t.jsxs("p",{className:"cours-detail__prof",children:[" Cours de ",t.jsx("strong",{children:o.profNom})]}),o.objectifs.length>0&&t.jsxs("div",{className:"cours-detail__objectifs",children:[t.jsx("h3",{children:" Objectifs du cours"}),t.jsx("ul",{children:o.objectifs.map((B,H)=>t.jsx("li",{children:B},H))})]})]}),n&&p&&t.jsxs("div",{className:"cours-detail__progression-card",children:[t.jsx("h3",{children:" Ma progression"}),t.jsx("div",{className:"progression-bar",children:t.jsx("div",{className:"progression-bar__fill",style:{width:`${p.pourcentageProgression}%`},role:"progressbar","aria-valuenow":p.pourcentageProgression,"aria-valuemin":0,"aria-valuemax":100})}),t.jsxs("p",{className:"progression-bar__label",children:[p.pourcentageProgression,"%  ",p.sectionsLues.length,"/",o.nombreSections," section",o.nombreSections>1?"s":""," lue",p.sectionsLues.length>1?"s":""]}),p.scoreQuiz>0&&t.jsxs("p",{className:"progression-bar__score",children:[" Score quiz : ",t.jsxs("strong",{children:[p.scoreQuiz,"%"]})]}),p.estTermine&&t.jsx("div",{className:"cours-detail__termine-badge",children:" Cours termin !"})]})]})]}),t.jsxs("div",{className:"cours-detail__layout",children:[t.jsxs("nav",{className:"cours-detail__sidebar","aria-label":"Sections du cours",children:[t.jsx("h2",{className:"cours-detail__sidebar-titre",children:" Sections"}),t.jsx("ol",{className:"cours-detail__sections-liste",children:d.map(B=>{const H=p?.sectionsLues.includes(B.id)??!1,T=B.id===v,Y=k(B);return t.jsx("li",{children:t.jsxs("button",{className:["cours-detail__section-btn",T?"cours-detail__section-btn--active":"",H?"cours-detail__section-btn--lue":"",Y?"":"cours-detail__section-btn--verrou"].join(" "),onClick:()=>b(B.id),"aria-current":T?"true":void 0,children:[t.jsx("span",{className:"cours-detail__section-icone","aria-hidden":"true",children:Y?H?"":`${B.ordre}.`:""}),t.jsx("span",{className:"cours-detail__section-nom",children:B.titre}),t.jsxs("span",{className:"cours-detail__section-duree",children:[B.dureeEstimee," min"]})]})},B.id)})})]}),t.jsx("main",{className:"cours-detail__contenu",ref:w,"aria-live":"polite",children:D?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"cours-detail__section-header",children:[t.jsxs("h2",{className:"cours-detail__section-titre",children:[D.ordre,". ",D.titre]}),t.jsxs("span",{className:"cours-detail__section-duree-label",children:[" ",D.dureeEstimee," min de lecture"]})]}),$?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"cours-detail__blocs",children:D.blocs.sort((B,H)=>B.ordre-H.ordre).map(B=>{const H=B.isPremium&&!a&&!D.estGratuite,T=p?.reponsesQuiz.find(Y=>Y.blocId===B.id)?.optionChoisieId;return t.jsx("div",{className:`cours-detail__bloc cours-detail__bloc--${B.type}`,children:t.jsx(Ree,{bloc:B,isPremiumVerrou:H,onReponseQuiz:z,reponseExistante:T})},B.id)})}),n&&!p?.sectionsLues.includes(D.id)&&t.jsx("div",{className:"cours-detail__action-lu",children:t.jsx("button",{className:"btn-primary",onClick:()=>A(D.id),children:" Marquer cette section comme lue"})}),t.jsxs("div",{className:"cours-detail__nav-sections",children:[!S(D)&&D.blocs.some(B=>B.type==="quiz")&&t.jsx("p",{className:"cours-detail__quiz-requis",role:"alert",children:" Russissez les quiz de cette section (60% minimum) pour passer  la suite."}),D.ordre>1&&t.jsx("button",{className:"btn-secondary",onClick:()=>{const B=d.find(H=>H.ordre===D.ordre-1);B&&b(B.id)},children:" Section prcdente"}),D.ordre<d.length&&t.jsx("button",{className:"btn-primary",onClick:()=>{if(!S(D)&&D.blocs.some(H=>H.type==="quiz"))return;const B=d.find(H=>H.ordre===D.ordre+1);B&&b(B.id)},children:"Section suivante "})]})]}):t.jsxs("div",{className:"cours-detail__premium-gate",children:[t.jsx("span",{className:"cours-detail__premium-gate-icon","aria-hidden":"true",children:""}),t.jsx("h3",{children:"Contenu Premium"}),t.jsxs("p",{children:["Cette section ncessite un abonnement Premium PedaClic.",t.jsx("br",{}),"Formules  partir de ",t.jsx("strong",{children:"1 000 FCFA/mois"})," (1 cours) jusqu' l'accs illimit (ds 10 000 FCFA / 3 mois)."]}),n?t.jsxs("div",{className:"cours-detail__premium-gate-actions",children:[t.jsx("button",{className:"btn-primary",onClick:()=>r("/premium"),children:" Dcouvrir les formules"}),n.isPremium&&t.jsx("button",{className:"btn-secondary",onClick:()=>r("/premium/mes-cours"),children:" Choisir mes cours"})]}):t.jsx("button",{className:"btn-primary",onClick:()=>r("/connexion"),children:"Se connecter pour accder"})]})]}):t.jsx("div",{className:"cours-detail__vide-section",role:"status",children:t.jsx("p",{children:"Slectionnez une section dans le menu de gauche pour commencer."})})})]})]})}const Lee=["image/jpeg","image/png","image/gif","image/webp"],$ee=".jpg,.jpeg,.png,.gif,.webp",OM=({storagePath:e,existingUrl:r,onUploadComplete:n,onUploadStart:a,onUploadError:l,placeholder:o="Glissez une image ici ou cliquez pour parcourir",disabled:u=!1,maxSizeMo:d=5})=>{const[m,p]=g.useState({status:"idle",progress:0,errorMessage:null,previewUrl:r||null}),[h,v]=g.useState(!1),b=g.useRef(null),x=g.useCallback(B=>{if(!Lee.includes(B.type))return`Type non support : ${B.type}. Utilisez JPG, PNG, GIF ou WebP.`;const H=B.size/(1024*1024);return H>d?`Fichier trop lourd : ${H.toFixed(1)} Mo (max ${d} Mo).`:null},[d]),j=B=>{const H=Date.now(),T=B.split(".").pop()?.toLowerCase()||"jpg";return`${B.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9_-]/g,"_").slice(0,30)}_${H}.${T}`},_=g.useCallback(async B=>{const H=x(B);if(H){p(U=>({...U,status:"error",errorMessage:H})),l?.(H);return}const T=URL.createObjectURL(B);p({status:"uploading",progress:0,errorMessage:null,previewUrl:T}),a?.();const Y=j(B.name),J=`${e}/${Y}`,P=sr(Jt,J),q=ou(P,B,{contentType:B.type,customMetadata:{uploadedBy:"pedaclic-prof",originalName:B.name}});q.on("state_changed",U=>{const I=Math.round(U.bytesTransferred/U.totalBytes*100);p(te=>({...te,progress:I}))},U=>{URL.revokeObjectURL(T);const I=`Erreur upload : ${U.message}`;p(te=>({...te,status:"error",errorMessage:I,previewUrl:r||null})),l?.(I)},async()=>{URL.revokeObjectURL(T);try{const U=await qn(q.snapshot.ref);p({status:"success",progress:100,errorMessage:null,previewUrl:U}),n(U)}catch{const I="Impossible de rcuprer l'URL de tlchargement.";p(te=>({...te,status:"error",errorMessage:I})),l?.(I)}})},[e,r,x,a,n,l]),C=B=>{const H=B.target.files?.[0];H&&_(H),B.target.value=""},w=B=>{B.preventDefault(),u||v(!0)},E=B=>{B.preventDefault(),v(!1)},S=B=>{if(B.preventDefault(),v(!1),u)return;const H=B.dataTransfer.files?.[0];H&&_(H)},A=async()=>{m.previewUrl&&(p({status:"idle",progress:0,errorMessage:null,previewUrl:null}),n(""))},{status:z,progress:k,errorMessage:M,previewUrl:D}=m,$=z==="uploading";return t.jsxs("div",{className:`image-uploader ${h?"image-uploader--drag-over":""} ${u?"image-uploader--disabled":""}`,children:[D&&t.jsxs("div",{className:"image-uploader__preview",children:[t.jsx("img",{src:D,alt:"Aperu",className:"image-uploader__preview-img"}),$&&t.jsx("div",{className:"image-uploader__overlay",children:t.jsx("div",{className:"image-uploader__spinner"})}),!$&&!u&&t.jsx("button",{type:"button",className:"image-uploader__remove-btn",onClick:A,title:"Supprimer l'image","aria-label":"Supprimer l'image",children:""})]}),!D&&t.jsxs("div",{className:"image-uploader__dropzone",onDragOver:w,onDragLeave:E,onDrop:S,onClick:()=>!u&&b.current?.click(),role:"button",tabIndex:u?-1:0,"aria-label":"Zone d'upload d'image",onKeyDown:B=>{(B.key==="Enter"||B.key===" ")&&!u&&b.current?.click()},children:[t.jsx("span",{className:"image-uploader__icon","aria-hidden":"true",children:""}),t.jsx("p",{className:"image-uploader__text",children:o}),t.jsxs("p",{className:"image-uploader__subtext",children:["JPG, PNG, GIF, WebP  max ",d," Mo"]}),t.jsx("button",{type:"button",className:"image-uploader__browse-btn",disabled:u,tabIndex:-1,"aria-hidden":"true",children:"Parcourir"})]}),$&&t.jsxs("div",{className:"image-uploader__progress",role:"progressbar","aria-valuenow":k,"aria-valuemin":0,"aria-valuemax":100,children:[t.jsx("div",{className:"image-uploader__progress-bar",style:{width:`${k}%`}}),t.jsxs("span",{className:"image-uploader__progress-text",children:["Upload en cours ",k,"%"]})]}),z==="success"&&t.jsx("p",{className:"image-uploader__success",children:" Image uploade avec succs"}),M&&t.jsxs("p",{className:"image-uploader__error",role:"alert",children:[" ",M]}),t.jsx("input",{ref:b,type:"file",accept:$ee,onChange:C,disabled:u||$,style:{display:"none"},"aria-hidden":"true"})]})},gm=()=>crypto.randomUUID();function Bee(e,r){const n={id:gm(),type:e,ordre:r,isPremium:!1};switch(e){case"texte":return{...n,type:"texte",contenu:""};case"image":return{...n,type:"image",url:"",alt:"",legende:""};case"video":return{...n,type:"video",urlYoutube:"",titre:"",description:""};case"encadre":return{...n,type:"encadre",variante:"definition",titre:"Dfinition",contenu:""};case"quiz":return{...n,type:"quiz",question:"",options:[{id:gm(),texte:"",estCorrecte:!0},{id:gm(),texte:"",estCorrecte:!1}],explication:""};case"exercice":return{...n,type:"exercice",enonce:"",correction:"",difficulte:"moyen"}}}function Uee({bloc:e,index:r,total:n,onUpdate:a,onDelete:l,onMoveUp:o,onMoveDown:u,isDragging:d,onDragStart:m,onDragOver:p,onDrop:h,onDragEnd:v,dragOverIndex:b,storageBasePath:x,onBlocUploadStart:j,onBlocUploadEnd:_}){const C=Bb[e.type],w=b===r;function E(){switch(e.type){case"texte":return t.jsx("textarea",{className:"editor-bloc__textarea",placeholder:"Texte du paragraphe (Markdown : **gras**, *italique*, - liste)",value:e.contenu,onChange:S=>a({...e,contenu:S.target.value}),rows:4});case"image":return t.jsxs("div",{className:"editor-bloc__form-grid",children:[t.jsx(OM,{storagePath:`${x}/bloc-${r}`,existingUrl:e.url,placeholder:"Glissez l'image ici ou cliquez",onUploadStart:()=>j(r),onUploadComplete:S=>{a({...e,url:S}),_(r)},onUploadError:()=>_(r),maxSizeMo:5}),t.jsx("input",{type:"text",placeholder:"Texte alternatif (accessibilit)",value:e.alt,onChange:S=>a({...e,alt:S.target.value}),className:"editor-bloc__input"}),t.jsx("input",{type:"text",placeholder:"Lgende (optionnelle)",value:e.legende??"",onChange:S=>a({...e,legende:S.target.value}),className:"editor-bloc__input"})]});case"video":return t.jsxs("div",{className:"editor-bloc__form-grid",children:[t.jsx("input",{type:"url",placeholder:"URL YouTube (ex: https://www.youtube.com/watch?v=...)",value:e.urlYoutube,onChange:S=>a({...e,urlYoutube:S.target.value}),className:"editor-bloc__input"}),t.jsx("input",{type:"text",placeholder:"Titre de la vido",value:e.titre,onChange:S=>a({...e,titre:S.target.value}),className:"editor-bloc__input"}),t.jsx("input",{type:"text",placeholder:"Description courte (optionnelle)",value:e.description??"",onChange:S=>a({...e,description:S.target.value}),className:"editor-bloc__input"})]});case"encadre":return t.jsxs("div",{className:"editor-bloc__form-grid",children:[t.jsx("select",{value:e.variante,onChange:S=>a({...e,variante:S.target.value}),className:"editor-bloc__select",children:Object.entries(kM).map(([S,A])=>t.jsxs("option",{value:S,children:[A.emoji," ",A.label]},S))}),t.jsx("input",{type:"text",placeholder:"Titre de l'encadr",value:e.titre,onChange:S=>a({...e,titre:S.target.value}),className:"editor-bloc__input"}),t.jsx("textarea",{placeholder:"Contenu de l'encadr",value:e.contenu,onChange:S=>a({...e,contenu:S.target.value}),className:"editor-bloc__textarea",rows:3})]});case"quiz":{const S=e;return t.jsxs("div",{className:"editor-bloc__form-grid",children:[t.jsx("input",{type:"text",placeholder:"Question",value:S.question,onChange:A=>a({...S,question:A.target.value}),className:"editor-bloc__input"}),t.jsxs("div",{className:"editor-bloc__quiz-options",children:[S.options.map((A,z)=>t.jsxs("div",{className:"editor-bloc__quiz-option",children:[t.jsx("input",{type:"radio",name:`quiz-correct-${e.id}`,checked:A.estCorrecte,onChange:()=>a({...S,options:S.options.map((k,M)=>({...k,estCorrecte:M===z}))}),title:"Marquer comme bonne rponse"}),t.jsx("input",{type:"text",placeholder:`Option ${z+1}`,value:A.texte,onChange:k=>a({...S,options:S.options.map((M,D)=>D===z?{...M,texte:k.target.value}:M)}),className:"editor-bloc__input"}),S.options.length>2&&t.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:()=>a({...S,options:S.options.filter((k,M)=>M!==z)}),title:"Supprimer cette option",children:""})]},A.id)),S.options.length<4&&t.jsx("button",{type:"button",className:"btn-link",onClick:()=>a({...S,options:[...S.options,{id:gm(),texte:"",estCorrecte:!1}]}),children:"+ Ajouter une option"})]}),t.jsx("input",{type:"text",placeholder:"Explication aprs rponse (optionnelle)",value:S.explication??"",onChange:A=>a({...S,explication:A.target.value}),className:"editor-bloc__input"})]})}case"exercice":return t.jsxs("div",{className:"editor-bloc__form-grid",children:[t.jsx("textarea",{placeholder:"nonc de l'exercice",value:e.enonce,onChange:S=>a({...e,enonce:S.target.value}),className:"editor-bloc__textarea",rows:3}),t.jsx("textarea",{placeholder:"Correction (masque pour l'lve jusqu'au clic)",value:e.correction,onChange:S=>a({...e,correction:S.target.value}),className:"editor-bloc__textarea editor-bloc__textarea--correction",rows:3}),t.jsxs("div",{className:"editor-bloc__row",children:[t.jsxs("select",{value:e.difficulte,onChange:S=>a({...e,difficulte:S.target.value}),className:"editor-bloc__select",children:[t.jsx("option",{value:"facile",children:"Facile"}),t.jsx("option",{value:"moyen",children:"Moyen"}),t.jsx("option",{value:"difficile",children:"Difficile"})]}),t.jsx("input",{type:"number",placeholder:"Points (opt.)",value:e.points??"",onChange:S=>a({...e,points:Number(S.target.value)||void 0}),className:"editor-bloc__input editor-bloc__input--sm",min:1})]})]});default:return null}}return t.jsxs("div",{className:["editor-bloc",d?"editor-bloc--dragging":"",w?"editor-bloc--drag-over":""].join(" "),draggable:!0,onDragStart:S=>m(S,r),onDragOver:S=>p(S,r),onDrop:S=>h(S,r),onDragEnd:v,children:[t.jsxs("div",{className:"editor-bloc__header",children:[t.jsx("span",{className:"editor-bloc__drag-handle",title:"Dplacer","aria-hidden":"true",children:""}),t.jsxs("span",{className:"editor-bloc__type-label",children:[C.emoji," ",C.label]}),t.jsxs("label",{className:"editor-bloc__premium-toggle",title:"Rserver aux abonns Premium",children:[t.jsx("input",{type:"checkbox",checked:e.isPremium,onChange:S=>a({...e,isPremium:S.target.checked})}),t.jsx("span",{children:" Premium"})]}),t.jsxs("div",{className:"editor-bloc__actions",children:[t.jsx("button",{type:"button",className:"btn-icon",onClick:o,disabled:r===0,title:"Monter","aria-label":"Monter ce bloc",children:""}),t.jsx("button",{type:"button",className:"btn-icon",onClick:u,disabled:r===n-1,title:"Descendre","aria-label":"Descendre ce bloc",children:""}),t.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:l,title:"Supprimer ce bloc","aria-label":"Supprimer ce bloc",children:""})]})]}),t.jsx("div",{className:"editor-bloc__form",children:E()})]})}function dA(){const{coursId:e}=yn(),r=Ze(),{currentUser:n}=Ke(),a=!!e,{matieres:l}=na(),[o]=g.useState(()=>je(_e(Q,"cours_en_ligne")).id),u=`cours-images/${a?e:o}`,[d,m]=g.useState({titre:"",description:"",matiere:"Mathmatiques",niveau:"3me",classe:"",isPremium:!1,statut:"brouillon",couvertureUrl:"",dureeEstimee:0,objectifs:[""],prerequis:"",tags:[],cahierTextesId:""}),[p,h]=g.useState([]),[v,b]=g.useState(null),[x,j]=g.useState([]),[_,C]=g.useState(""),w=g.useRef(null),[E,S]=g.useState(null),A=g.useRef(null),[z,k]=g.useState(null),[M,D]=g.useState(null),[$,B]=g.useState(!1),[H,T]=g.useState(!1),[Y,J]=g.useState(null),[P,q]=g.useState(null),[U,I]=g.useState("infos"),[te,L]=g.useState([]),[Z,W]=g.useState(!1),[ce,xe]=g.useState({});Z||Object.values(ce).some(Boolean),g.useEffect(()=>{a&&e&&he(e)},[e]),g.useEffect(()=>{n?.role==="admin"&&WZ().then(K=>L(K.map(ie=>({id:ie.id,titre:ie.titre})))).catch(()=>{})},[n?.role]);async function he(K){B(!0);try{const[ie,Ne]=await Promise.all([BA(K),UA(K)]);ie&&m({titre:ie.titre,description:ie.description,matiere:ie.matiere,niveau:ie.niveau,classe:ie.classe??"",cahierTextesId:ie.cahierTextesId??"",isPremium:ie.isPremium,statut:ie.statut,couvertureUrl:ie.couvertureUrl??"",dureeEstimee:ie.dureeEstimee,objectifs:ie.objectifs.length>0?ie.objectifs:[""],prerequis:ie.prerequis??"",tags:ie.tags}),h(Ne),Ne.length>0&&(b(Ne[0].id),j(Ne[0].blocs),C(Ne[0].titre))}catch{J("Erreur de chargement du cours.")}finally{B(!1)}}g.useEffect(()=>{if(!v)return;const K=p.find(ie=>ie.id===v);K&&(j([...K.blocs].sort((ie,Ne)=>ie.ordre-Ne.ordre)),C(K.titre))},[v]);const F=(K,ie)=>m(Ne=>({...Ne,[K]:ie})),ve=(K,ie)=>{const Ne=[...d.objectifs];Ne[K]=ie,F("objectifs",Ne)},Pe=()=>F("objectifs",[...d.objectifs,""]),ue=K=>F("objectifs",d.objectifs.filter((ie,Ne)=>Ne!==K)),[ee,V]=g.useState(""),de=()=>{const K=ee.trim();K&&!d.tags.includes(K)&&F("tags",[...d.tags,K]),V("")},we=K=>F("tags",d.tags.filter(ie=>ie!==K));async function Te(K=!1){if(n){if(!d.titre.trim()){J("Le titre du cours est obligatoire.");return}T(!0),J(null);try{const ie={...d,objectifs:d.objectifs.filter(Ne=>Ne.trim()),statut:K?"publie":d.statut,cahierTextesId:d.cahierTextesId?.trim()||void 0};if(a&&e)await H5(e,ie),K&&await qx(e),Xe(K?" Cours publi !":" Cours sauvegard.");else{const Ne=n.displayName??"Professeur",Qe=await G5(n.uid,Ne,ie);K&&await qx(Qe),Xe(" Cours cr ! Ajoutez maintenant vos sections."),r(`/prof/cours/${Qe}/modifier`)}}catch(ie){console.error("[CoursEditorPage] Erreur sauvegarde :",ie),J("Erreur lors de la sauvegarde. Ressayez.")}finally{T(!1)}}}function Xe(K){q(K),setTimeout(()=>q(null),4e3)}async function tt(){if(!e){J("Sauvegardez d'abord le cours pour ajouter des sections.");return}const K=p.length+1,ie=`Section ${K}`;try{const Ne=await Y5(e,{titre:ie,ordre:K,blocs:[],dureeEstimee:0,estGratuite:K===1}),Qe=Ae.now(),At={id:Ne,coursId:e,titre:ie,ordre:K,blocs:[],dureeEstimee:0,estGratuite:K===1,createdAt:Qe,updatedAt:Qe};h(Qr=>[...Qr,At]),b(Ne),j([]),C(ie)}catch{J("Erreur lors de la cration de la section.")}}async function lt(K){if(e&&confirm("Supprimer cette section et tous ses blocs ?"))try{await K5(K,e);const ie=p.filter(Ne=>Ne.id!==K).map((Ne,Qe)=>({...Ne,ordre:Qe+1}));h(ie),v===K&&b(ie[0]?.id??null)}catch{J("Erreur lors de la suppression.")}}async function rr(){if(v)try{await V1(v,{titre:_}),h(K=>K.map(ie=>ie.id===v?{...ie,titre:_}:ie))}catch{J("Erreur lors de la mise  jour du titre.")}}function kr(K,ie){w.current=ie,K.dataTransfer.effectAllowed="move"}function Or(K,ie){K.preventDefault(),K.dataTransfer.dropEffect="move",S(ie)}async function sn(K,ie){K.preventDefault(),S(null);const Ne=w.current;if(Ne===null||Ne===ie)return;const Qe=[...p],[At]=Qe.splice(Ne,1);Qe.splice(ie,0,At);const Qr=Qe.map((Mr,la)=>({...Mr,ordre:la+1}));h(Qr);try{await W5(Qr.map(Mr=>({id:Mr.id,ordre:Mr.ordre})))}catch{J("Erreur lors du rordonnancement. Rechargez la page.")}w.current=null}function pe(K){const ie=Bee(K,x.length),Ne=[...x,ie];j(Ne),nr(Ne)}function Oe(K,ie){const Ne=x.map((Qe,At)=>At===K?ie:Qe);j(Ne),nr(Ne)}function Le(K){const ie=x.filter((Ne,Qe)=>Qe!==K);j(ie),nr(ie)}function He(K){if(K===0)return;const ie=[...x];[ie[K-1],ie[K]]=[ie[K],ie[K-1]],j(ie),nr(ie)}function dt(K){if(K===x.length-1)return;const ie=[...x];[ie[K],ie[K+1]]=[ie[K+1],ie[K]],j(ie),nr(ie)}const Rt=g.useRef(null);function nr(K){v&&(Rt.current&&clearTimeout(Rt.current),Rt.current=setTimeout(async()=>{try{await X5(v,K),h(ie=>ie.map(Ne=>Ne.id===v?{...Ne,blocs:K}:Ne))}catch(ie){console.error("[CoursEditorPage] Erreur sauvegarde blocs :",ie)}},1500))}function sa(K,ie){A.current=ie,D(ie),K.dataTransfer.effectAllowed="move"}function Dr(K,ie){K.preventDefault(),K.dataTransfer.dropEffect="move",k(ie)}function Pr(K,ie){K.preventDefault(),k(null),D(null);const Ne=A.current;if(Ne===null||Ne===ie)return;const Qe=[...x],[At]=Qe.splice(Ne,1);Qe.splice(ie,0,At);const Qr=Qe.map((Mr,la)=>({...Mr,ordre:la}));j(Qr),nr(Qr),A.current=null}function ae(){k(null),D(null),A.current=null}return $?t.jsxs("div",{className:"cours-editor__loading","aria-busy":"true",children:[t.jsx("div",{className:"spinner spinner--blue"}),t.jsx("p",{children:"Chargement de l'diteur..."})]}):t.jsxs("div",{className:"cours-editor",children:[t.jsxs("header",{className:"cours-editor__header",children:[t.jsxs("p",{className:"cours-editor__breadcrumb",children:[t.jsx("button",{className:"btn-link",onClick:()=>r("/prof/cours"),children:" Mes cours"})," / ",a?"Modifier le cours":"Nouveau cours"]}),t.jsxs("div",{className:"cours-editor__header-actions",children:[t.jsx("h1",{className:"cours-editor__titre",children:a?" Modifier le cours":" Nouveau cours"}),t.jsxs("div",{className:"cours-editor__btn-group",children:[t.jsx("button",{className:"btn-secondary",onClick:()=>r("/prof/cours"),disabled:H,children:"Annuler"}),t.jsx("button",{className:"btn-secondary",onClick:()=>Te(!1),disabled:H,children:H?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner"})," Sauvegarde..."]}):" Sauvegarder"}),t.jsx("button",{className:"btn-primary",onClick:()=>Te(!0),disabled:H||d.statut==="publie",children:d.statut==="publie"?" Publi":" Publier"})]})]}),Y&&t.jsxs("div",{className:"error-banner",role:"alert",children:[" ",Y]}),P&&t.jsx("div",{className:"success-banner",role:"status",children:P})]}),t.jsxs("div",{className:"cours-editor__tabs",role:"tablist",children:[t.jsx("button",{className:`cours-editor__tab ${U==="infos"?"cours-editor__tab--active":""}`,onClick:()=>I("infos"),role:"tab","aria-selected":U==="infos",children:" Informations du cours"}),t.jsxs("button",{className:`cours-editor__tab ${U==="sections"?"cours-editor__tab--active":""}`,onClick:()=>I("sections"),role:"tab","aria-selected":U==="sections",disabled:!a&&!e,children:[" Sections et contenu ",p.length>0&&`(${p.length})`]})]}),U==="infos"&&t.jsxs("section",{className:"cours-editor__form","aria-label":"Informations du cours",children:[t.jsxs("div",{className:"cours-editor__card",children:[t.jsx("h2",{className:"cours-editor__card-titre",children:" Informations gnrales"}),t.jsxs("div",{className:"cours-editor__form-grid",children:[t.jsxs("div",{className:"cours-editor__field cours-editor__field--full",children:[t.jsx("label",{htmlFor:"titre",children:"Titre du cours *"}),t.jsx("input",{id:"titre",type:"text",value:d.titre,onChange:K=>F("titre",K.target.value),placeholder:"Ex : Les fonctions affines  Terminale S",className:"cours-editor__input",required:!0})]}),t.jsxs("div",{className:"cours-editor__field cours-editor__field--full",children:[t.jsx("label",{htmlFor:"description",children:"Description *"}),t.jsx("textarea",{id:"description",value:d.description,onChange:K=>F("description",K.target.value),placeholder:"Description courte affiche dans le catalogue",className:"cours-editor__textarea",rows:3})]}),t.jsxs("div",{className:"cours-editor__field",children:[t.jsx("label",{htmlFor:"matiere",children:"Matire *"}),t.jsx("select",{id:"matiere",value:d.matiere,onChange:K=>F("matiere",K.target.value),className:"cours-editor__select",children:l.map(K=>t.jsx("option",{value:K.valeur,children:K.label},K.valeur))})]}),t.jsxs("div",{className:"cours-editor__field",children:[t.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),t.jsx("select",{id:"niveau",value:d.niveau,onChange:K=>F("niveau",K.target.value),className:"cours-editor__select",children:hr.map(K=>t.jsx("option",{value:K,children:K},K))})]}),t.jsxs("div",{className:"cours-editor__field",children:[t.jsx("label",{htmlFor:"classe",children:"Classe (optionnelle)"}),t.jsx("input",{id:"classe",type:"text",value:d.classe??"",onChange:K=>F("classe",K.target.value),placeholder:"Ex : 3me A, TS, L2",className:"cours-editor__input"})]}),n?.role==="admin"&&te.length>0&&t.jsxs("div",{className:"cours-editor__field cours-editor__field--full",children:[t.jsx("label",{htmlFor:"cahierTextesId",children:" Lier  un cahier de textes"}),t.jsxs("select",{id:"cahierTextesId",value:d.cahierTextesId??"",onChange:K=>F("cahierTextesId",K.target.value),className:"cours-editor__select",children:[t.jsx("option",{value:"",children:" Aucun "}),te.map(K=>t.jsx("option",{value:K.id,children:K.titre},K.id))]}),t.jsx("span",{className:"cours-editor__label-hint",children:"Si le cahier n'existe pas, crez-le d'abord dans Cahier de Textes."})]}),t.jsxs("div",{className:"cours-editor__field",children:[t.jsxs("label",{htmlFor:"couverture",children:[" Image de couverture",t.jsx("span",{className:"cours-editor__label-hint",children:"(JPG, PNG, WebP  max 5 Mo)"})]}),t.jsx(OM,{storagePath:`${u}/couverture`,existingUrl:d.couvertureUrl,placeholder:"Glissez l'image de couverture ici ou cliquez",disabled:H,onUploadStart:()=>W(!0),onUploadComplete:K=>{F("couvertureUrl",K),W(!1)},onUploadError:K=>{console.error("[Phase 25] Erreur couverture:",K),W(!1)},maxSizeMo:5}),Z&&t.jsx("p",{className:"cours-editor__upload-hint",children:" Upload en cours, patientez avant d'enregistrer"})]}),t.jsx("div",{className:"cours-editor__field cours-editor__field--full",children:t.jsxs("label",{className:"cours-editor__toggle-label",children:[t.jsx("input",{type:"checkbox",checked:d.isPremium,onChange:K=>F("isPremium",K.target.checked)}),t.jsx("span",{children:" Cours Premium  Les sections (sauf la 1re) ncessitent un abonnement"})]})})]})]}),t.jsxs("div",{className:"cours-editor__card",children:[t.jsx("h2",{className:"cours-editor__card-titre",children:" Objectifs pdagogiques"}),d.objectifs.map((K,ie)=>t.jsxs("div",{className:"cours-editor__objectif-row",children:[t.jsx("input",{type:"text",value:K,onChange:Ne=>ve(ie,Ne.target.value),placeholder:`Objectif ${ie+1} (ex : Savoir calculer une drive)`,className:"cours-editor__input"}),d.objectifs.length>1&&t.jsx("button",{type:"button",className:"btn-icon btn-icon--danger",onClick:()=>ue(ie),title:"Supprimer cet objectif",children:""})]},ie)),t.jsx("button",{type:"button",className:"btn-link",onClick:Pe,children:"+ Ajouter un objectif"})]}),t.jsxs("div",{className:"cours-editor__card",children:[t.jsx("h2",{className:"cours-editor__card-titre",children:" Prrequis et tags"}),t.jsxs("div",{className:"cours-editor__field",children:[t.jsx("label",{htmlFor:"prerequis",children:"Prrequis conseills"}),t.jsx("input",{id:"prerequis",type:"text",value:d.prerequis??"",onChange:K=>F("prerequis",K.target.value),placeholder:"Ex : Matriser les quations du 2nd degr",className:"cours-editor__input"})]}),t.jsxs("div",{className:"cours-editor__field",children:[t.jsx("label",{children:"Tags (aide  la recherche)"}),t.jsxs("div",{className:"cours-editor__tags-wrapper",children:[d.tags.map(K=>t.jsxs("span",{className:"cours-editor__tag",children:[K,t.jsx("button",{type:"button",onClick:()=>we(K),"aria-label":`Supprimer le tag ${K}`,children:""})]},K)),t.jsxs("div",{className:"cours-editor__tag-input-row",children:[t.jsx("input",{type:"text",value:ee,onChange:K=>V(K.target.value),onKeyDown:K=>K.key==="Enter"&&(K.preventDefault(),de()),placeholder:"Ajouter un tag...",className:"cours-editor__input cours-editor__input--sm"}),t.jsx("button",{type:"button",className:"btn-secondary btn--sm",onClick:de,children:"+ Tag"})]})]})]})]})]}),U==="sections"&&t.jsx("section",{className:"cours-editor__sections","aria-label":"diteur de sections",children:a?t.jsxs("div",{className:"cours-editor__sections-layout",children:[t.jsxs("aside",{className:"cours-editor__sections-sidebar",children:[t.jsxs("div",{className:"cours-editor__sections-sidebar-header",children:[t.jsx("h2",{children:" Sections"}),t.jsx("button",{className:"btn-primary btn--sm",onClick:tt,children:"+ Ajouter"})]}),p.length===0?t.jsx("p",{className:"cours-editor__sections-empty-hint",children:'Aucune section. Cliquez sur "+ Ajouter" pour commencer.'}):t.jsx("ol",{className:"cours-editor__sections-liste",children:p.map((K,ie)=>t.jsxs("li",{className:["cours-editor__section-item",K.id===v?"cours-editor__section-item--active":"",E===ie?"cours-editor__section-item--drag-over":""].join(" "),draggable:!0,onDragStart:Ne=>kr(Ne,ie),onDragOver:Ne=>Or(Ne,ie),onDrop:Ne=>sn(Ne,ie),onDragEnd:()=>S(null),children:[t.jsx("span",{className:"cours-editor__section-drag","aria-hidden":"true",children:""}),t.jsxs("button",{className:"cours-editor__section-btn",onClick:()=>b(K.id),"aria-current":K.id===v?"true":void 0,children:[t.jsx("span",{className:"cours-editor__section-ordre",children:K.ordre}),t.jsxs("span",{className:"cours-editor__section-nom",children:[K.titre,K.estGratuite&&t.jsx("span",{className:"cours-editor__section-gratuite",title:"Section gratuite",children:"G"})]}),t.jsxs("span",{className:"cours-editor__section-blocs-count",children:[K.blocs.length," bloc",K.blocs.length>1?"s":""]})]}),t.jsx("button",{className:"btn-icon btn-icon--danger btn-icon--xs",onClick:()=>lt(K.id),title:"Supprimer cette section","aria-label":`Supprimer la section ${K.titre}`,children:""})]},K.id))})]}),v?t.jsxs("div",{className:"cours-editor__section-content",children:[t.jsxs("div",{className:"cours-editor__section-titre-row",children:[t.jsx("input",{type:"text",value:_,onChange:K=>C(K.target.value),onBlur:rr,className:"cours-editor__section-titre-input",placeholder:"Titre de la section","aria-label":"Titre de la section"}),t.jsxs("label",{className:"cours-editor__toggle-label",children:[t.jsx("input",{type:"checkbox",checked:p.find(K=>K.id===v)?.estGratuite??!1,onChange:async K=>{try{await V1(v,{estGratuite:K.target.checked}),h(ie=>ie.map(Ne=>Ne.id===v?{...Ne,estGratuite:K.target.checked}:Ne))}catch{}}}),t.jsx("span",{children:"Gratuite"})]})]}),t.jsxs("div",{className:"cours-editor__palette","aria-label":"Ajouter un bloc",children:[t.jsx("span",{className:"cours-editor__palette-label",children:"Ajouter un bloc :"}),Object.keys(Bb).map(K=>{const ie=Bb[K];return t.jsxs("button",{className:"cours-editor__palette-btn",onClick:()=>pe(K),title:ie.description,children:[ie.emoji," ",ie.label]},K)})]}),x.length===0?t.jsxs("div",{className:"cours-editor__blocs-empty",children:[t.jsx("p",{children:" Aucun bloc dans cette section."}),t.jsx("p",{children:"Utilisez la palette ci-dessus pour ajouter du contenu."})]}):t.jsx("div",{className:"cours-editor__blocs-liste","aria-label":"Blocs de la section",children:x.map((K,ie)=>t.jsx(Uee,{bloc:K,index:ie,total:x.length,onUpdate:Ne=>Oe(ie,Ne),onDelete:()=>Le(ie),onMoveUp:()=>He(ie),onMoveDown:()=>dt(ie),isDragging:M===ie,onDragStart:sa,onDragOver:Dr,onDrop:Pr,onDragEnd:ae,dragOverIndex:z,storageBasePath:`${u}/section-${v}`,onBlocUploadStart:Ne=>{const Qe=`${v}-${Ne}`;xe(At=>({...At,[Qe]:!0}))},onBlocUploadEnd:Ne=>{const Qe=`${v}-${Ne}`;xe(At=>({...At,[Qe]:!1}))}},K.id))})]}):t.jsx("div",{className:"cours-editor__section-content-empty",children:t.jsx("p",{children:"Slectionnez ou crez une section pour commencer  diter."})})]}):t.jsxs("div",{className:"cours-editor__sections-empty",children:[t.jsx("p",{children:"Sauvegardez d'abord les informations du cours pour ajouter des sections."}),t.jsx("button",{className:"btn-primary",onClick:()=>I("infos"),children:" Revenir aux informations"})]})})]})}function Fee({cours:e,onModifier:r,onPublier:n,onArchiver:a,onSupprimer:l,onVoirStats:o}){const u=Nee[e.statut],d=ss.find(m=>m.valeur===e.niveau)?.label??e.niveau;return t.jsxs("article",{className:"prof-cours-card",children:[t.jsxs("div",{className:"prof-cours-card__header",children:[t.jsxs("div",{className:"prof-cours-card__header-left",children:[t.jsx("span",{className:"prof-cours-card__statut",style:{color:u.couleur,background:u.bg},children:u.label}),e.isPremium&&t.jsx("span",{className:"badge badge--premium",children:" Premium"})]}),t.jsxs("div",{className:"prof-cours-card__actions",children:[t.jsx("button",{className:"btn-icon",onClick:r,title:"Modifier","aria-label":`Modifier ${e.titre}`,children:""}),e.statut==="brouillon"&&t.jsx("button",{className:"btn-icon btn-icon--success",onClick:n,title:"Publier","aria-label":`Publier ${e.titre}`,children:""}),e.statut==="publie"&&t.jsx("button",{className:"btn-icon",onClick:a,title:"Archiver","aria-label":`Archiver ${e.titre}`,children:""}),t.jsx("button",{className:"btn-icon btn-icon--info",onClick:o,title:"Voir les statistiques","aria-label":`Statistiques de ${e.titre}`,children:""}),t.jsx("button",{className:"btn-icon btn-icon--danger",onClick:l,title:"Supprimer","aria-label":`Supprimer ${e.titre}`,children:""})]})]}),t.jsxs("div",{className:"prof-cours-card__body",children:[t.jsx("h3",{className:"prof-cours-card__titre",children:e.titre}),t.jsx("p",{className:"prof-cours-card__description",children:e.description}),t.jsxs("div",{className:"prof-cours-card__meta",children:[t.jsx("span",{className:"badge badge--matiere",children:e.matiere}),t.jsx("span",{className:"badge badge--niveau",children:d}),e.classe&&t.jsx("span",{className:"badge badge--classe",children:e.classe})]})]}),t.jsxs("div",{className:"prof-cours-card__footer",children:[t.jsxs("span",{title:"Sections",children:[" ",e.nombreSections," section",e.nombreSections>1?"s":""]}),t.jsxs("span",{title:"Dure estime",children:[" ",e.dureeEstimee," min"]}),t.jsxs("span",{title:"lves inscrits",children:[" ",e.nombreInscrits," lve",e.nombreInscrits>1?"s":""]})]})]})}function Gee({cours:e,onClose:r}){const[n,a]=g.useState(null),[l,o]=g.useState(!0);g.useEffect(()=>{u()},[e.id]);async function u(){try{const d=await Cee(e.id);a(kee(d))}catch(d){console.error("[StatsModal] Erreur :",d)}finally{o(!1)}}return t.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":`Statistiques du cours : ${e.titre}`,onClick:d=>{d.target===d.currentTarget&&r()},children:t.jsxs("div",{className:"modal-content",children:[t.jsxs("div",{className:"modal-header",children:[t.jsxs("h2",{children:[" Statistiques  ",e.titre]}),t.jsx("button",{className:"btn-icon",onClick:r,"aria-label":"Fermer",children:""})]}),t.jsx("div",{className:"modal-body",children:l?t.jsxs("div",{className:"modal-loading",children:[t.jsx("div",{className:"spinner spinner--blue"}),t.jsx("p",{children:"Chargement des statistiques..."})]}):n?t.jsxs("div",{className:"stats-grid",children:[t.jsxs("div",{className:"stats-card",children:[t.jsx("span",{className:"stats-card__val",children:n.nombreInscrits}),t.jsx("span",{className:"stats-card__label",children:"lves inscrits"})]}),t.jsxs("div",{className:"stats-card stats-card--success",children:[t.jsx("span",{className:"stats-card__val",children:n.nombreTermines}),t.jsx("span",{className:"stats-card__label",children:"Cours termins"})]}),t.jsxs("div",{className:"stats-card stats-card--info",children:[t.jsxs("span",{className:"stats-card__val",children:[n.tauxCompletion,"%"]}),t.jsx("span",{className:"stats-card__label",children:"Taux de compltion"})]}),t.jsxs("div",{className:"stats-card",children:[t.jsxs("span",{className:"stats-card__val",children:[n.progressionMoyenne,"%"]}),t.jsx("span",{className:"stats-card__label",children:"Progression moyenne"})]}),t.jsxs("div",{className:"stats-card stats-card--primary",children:[t.jsxs("span",{className:"stats-card__val",children:[n.scoreMoyen,"%"]}),t.jsx("span",{className:"stats-card__label",children:"Score moyen aux quiz"})]}),t.jsxs("div",{className:"stats-progress-bar-wrapper",children:[t.jsx("label",{children:"Progression globale des lves"}),t.jsx("div",{className:"progression-bar",children:t.jsx("div",{className:"progression-bar__fill",style:{width:`${n.progressionMoyenne}%`}})})]})]}):t.jsx("p",{className:"modal-vide",children:"Aucune donne disponible pour ce cours."})})]})})}function Hee(){const e=Ze(),{currentUser:r}=Ke(),[n,a]=g.useState([]),[l,o]=g.useState([]),[u,d]=g.useState(!0),[m,p]=g.useState(null),[h,v]=g.useState(null),[b,x]=g.useState(""),[j,_]=g.useState(null);g.useEffect(()=>{r&&C()},[r]);async function C(){if(r){d(!0),p(null);try{const k=r.role==="admin"?await F5():await U5(r.uid);a(k),o(k)}catch{p("Impossible de charger les cours.")}finally{d(!1)}}}function w(k){x(k),o(k?n.filter(M=>M.statut===k):n)}async function E(k){if(confirm("Publier ce cours dans le catalogue ?"))try{await qx(k),a(M=>M.map(D=>D.id===k?{...D,statut:"publie"}:D)),o(M=>M.map(D=>D.id===k?{...D,statut:"publie"}:D)),z(" Cours publi dans le catalogue !")}catch{p("Erreur lors de la publication.")}}async function S(k){if(confirm("Archiver ce cours ? Il ne sera plus visible dans le catalogue."))try{await V5(k),a(M=>M.map(D=>D.id===k?{...D,statut:"archive"}:D)),o(M=>M.map(D=>D.id===k?{...D,statut:"archive"}:D)),z(" Cours archiv.")}catch{p("Erreur lors de l'archivage.")}}async function A(k,M){if(confirm(`Supprimer dfinitivement le cours "${M}" et tout son contenu ? Cette action est irrversible.`))try{await Q5(k);const D=n.filter($=>$.id!==k);a(D),o(D.filter($=>!b||$.statut===b)),z(" Cours supprim.")}catch{p("Erreur lors de la suppression.")}}function z(k){v(k),setTimeout(()=>v(null),4e3)}return t.jsxs("div",{className:"prof-cours-page",children:[t.jsxs("header",{className:"prof-cours-page__header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"prof-cours-page__titre",children:" Mes cours en ligne"}),t.jsx("p",{className:"prof-cours-page__sous-titre",children:r?.role==="admin"?"Grez tous les cours de la plateforme. Seul l'admin peut crer des cours.":"Consultez les cours publis par vos collgues."})]}),r?.role==="admin"&&t.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/cours/nouveau"),children:" Crer un cours"})]}),m&&t.jsxs("div",{className:"error-banner",role:"alert",children:[" ",m]}),h&&t.jsx("div",{className:"success-banner",role:"status",children:h}),!u&&n.length>0&&t.jsxs("div",{className:"prof-cours-page__stats","aria-label":"Rsum de mes cours",children:[t.jsxs("div",{className:"prof-cours-page__stat",children:[t.jsx("span",{className:"prof-cours-page__stat-val",children:n.length}),t.jsx("span",{children:"Total"})]}),t.jsxs("div",{className:"prof-cours-page__stat",children:[t.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#16a34a"},children:n.filter(k=>k.statut==="publie").length}),t.jsx("span",{children:"Publis"})]}),t.jsxs("div",{className:"prof-cours-page__stat",children:[t.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#ca8a04"},children:n.filter(k=>k.statut==="brouillon").length}),t.jsx("span",{children:"Brouillons"})]}),t.jsxs("div",{className:"prof-cours-page__stat",children:[t.jsx("span",{className:"prof-cours-page__stat-val",style:{color:"#2563eb"},children:n.reduce((k,M)=>k+M.nombreInscrits,0)}),t.jsx("span",{children:"lves inscrits"})]})]}),!u&&n.length>0&&t.jsx("div",{className:"prof-cours-page__filtres",role:"tablist","aria-label":"Filtrer par statut",children:[{val:"",label:`Tous (${n.length})`},{val:"publie",label:`Publis (${n.filter(k=>k.statut==="publie").length})`},{val:"brouillon",label:`Brouillons (${n.filter(k=>k.statut==="brouillon").length})`},{val:"archive",label:`Archivs (${n.filter(k=>k.statut==="archive").length})`}].map(k=>t.jsx("button",{className:`prof-cours-page__filtre-btn ${b===k.val?"prof-cours-page__filtre-btn--active":""}`,onClick:()=>w(k.val),role:"tab","aria-selected":b===k.val,children:k.label},k.val))}),t.jsxs("main",{className:"prof-cours-page__grille",children:[u&&t.jsx("div",{className:"prof-cours-page__grille-inner","aria-busy":"true",children:[1,2,3].map(k=>t.jsxs("div",{className:"prof-cours-card prof-cours-card--skeleton",children:[t.jsx("div",{className:"skeleton",style:{height:20,marginBottom:12}}),t.jsx("div",{className:"skeleton",style:{height:16,width:"60%",marginBottom:8}}),t.jsx("div",{className:"skeleton",style:{height:14,width:"80%"}})]},k))}),!u&&l.length>0&&t.jsx("div",{className:"prof-cours-page__grille-inner",children:l.map(k=>t.jsx(Fee,{cours:k,onModifier:()=>e(`/prof/cours/${k.id}/modifier`),onPublier:()=>E(k.id),onArchiver:()=>S(k.id),onSupprimer:()=>A(k.id,k.titre),onVoirStats:()=>_(k)},k.id))}),!u&&l.length===0&&t.jsxs("div",{className:"prof-cours-page__vide",role:"status",children:[t.jsx("span",{"aria-hidden":"true",children:""}),t.jsx("h3",{children:n.length===0&&r?.role==="admin"?"Aucun cours sur la plateforme.":"Aucun cours dans cette catgorie."}),n.length===0&&r?.role==="admin"&&t.jsx("button",{className:"btn-primary",onClick:()=>e("/prof/cours/nouveau"),children:" Crer mon premier cours"})]})]}),j&&t.jsx(Gee,{cours:j,onClose:()=>_(null)})]})}const Ji={manuel:"Manuels scolaires",annale:"Annales corriges",guide:"Guides de rvision",litterature:"Culture gnrale & Littrature",fiche:"Fiches de lectures"},es={manuel:"",annale:"",guide:"",litterature:"",fiche:""},gi="ebooks";async function Vee(){try{const e=Ee(_e(Q,gi),Se("isActive","==",!0),Ve("ordre","asc"));return(await Ce(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()||new Date,updatedAt:n.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks:",e),e}}async function Qee(){try{const e=Ee(_e(Q,gi),Ve("ordre","asc"));return(await Ce(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt?.toDate()||new Date,updatedAt:n.data().updatedAt?.toDate()||null}))}catch(e){throw console.error(" Erreur rcupration ebooks admin:",e),e}}async function Yee(e){try{const r=await gt(je(Q,gi,e));return r.exists()?{id:r.id,...r.data(),createdAt:r.data().createdAt?.toDate()||new Date,updatedAt:r.data().updatedAt?.toDate()||null}:null}catch(r){throw console.error(" Erreur rcupration ebook:",r),r}}function Kee(e,r){let n=[...e];if(r.categorie&&r.categorie!=="all"&&(n=n.filter(a=>a.categorie===r.categorie)),r.niveau&&r.niveau!=="all"&&(n=n.filter(a=>a.niveau===r.niveau)),r.classe&&r.classe!=="all"){const a=Tx(r.classe);n=n.filter(l=>l.classe==="all"?!0:Tx(l.classe)===a)}if(r.matiere&&(n=n.filter(a=>a.matiere?.toLowerCase().includes(r.matiere.toLowerCase()))),r.recherche){const a=r.recherche.toLowerCase();n=n.filter(l=>l.titre.toLowerCase().includes(a)||l.auteur.toLowerCase().includes(a)||l.description.toLowerCase().includes(a)||l.tags?.some(o=>o.toLowerCase().includes(a)))}return n}async function Wee(e,r,n,a,l){try{const o=sr(Jt,`ebooks/pdf/${Date.now()}_${r.name}`);await $s(o,r);const u=await qn(o);let d="";if(n){const v=sr(Jt,`ebooks/covers/${Date.now()}_${n.name}`);await $s(v,n),d=await qn(v)}let m="";if(a){const v=sr(Jt,`ebooks/previews/${Date.now()}_${a.name}`);await $s(v,a),m=await qn(v)}const p={...e,fichierURL:u,couvertureURL:d,aperuURL:m,tailleFichier:r.size,nombreTelechargements:0,nombreVues:0,uploadedBy:l||"admin",createdAt:Et(),updatedAt:Et()},h=await Dt(_e(Q,gi),p);return console.log(` Ebook ajout : ${e.titre} (ID: ${h.id})`),h.id}catch(o){throw console.error(" Erreur ajout ebook:",o),o}}async function Xee(e,r,n,a,l){try{const o={...r,updatedAt:Et()};if(n){const u=sr(Jt,`ebooks/pdf/${Date.now()}_${n.name}`);await $s(u,n),o.fichierURL=await qn(u),o.tailleFichier=n.size}if(a){const u=sr(Jt,`ebooks/covers/${Date.now()}_${a.name}`);await $s(u,a),o.couvertureURL=await qn(u)}if(l){const u=sr(Jt,`ebooks/previews/${Date.now()}_${l.name}`);await $s(u,l),o.aperuURL=await qn(u)}await Ge(je(Q,gi,e),o),console.log(` Ebook mis  jour : ${e}`)}catch(o){throw console.error(" Erreur mise  jour ebook:",o),o}}async function Zee(e){try{const r=await Yee(e);if(!r)throw new Error("Ebook introuvable");try{if(r.fichierURL){const n=sr(Jt,r.fichierURL);await Ls(n)}if(r.couvertureURL){const n=sr(Jt,r.couvertureURL);await Ls(n)}if(r.aperuURL){const n=sr(Jt,r.aperuURL);await Ls(n)}}catch{console.warn(" Fichiers Storage non supprims (peut-tre dj supprims)")}await Gr(je(Q,gi,e)),console.log(` Ebook supprim : ${e}`)}catch(r){throw console.error(" Erreur suppression ebook:",r),r}}async function Jee(e,r){try{await Ge(je(Q,gi,e),{isActive:r,updatedAt:Et()})}catch(n){throw console.error(" Erreur toggle ebook:",n),n}}async function ete(e){try{await Ge(je(Q,gi,e),{nombreVues:as(1)})}catch(r){console.error(" Erreur incrment vues:",r)}}async function tte(e){try{await Ge(je(Q,gi,e),{nombreTelechargements:as(1)})}catch(r){console.error(" Erreur incrment tlchargements:",r)}}function rte(e){const r={totalEbooks:e.length,totalTelechargements:0,totalVues:0,parCategorie:{manuel:0,annale:0,guide:0,litterature:0,fiche:0},ebooksActifs:0};return e.forEach(n=>{r.totalTelechargements+=n.nombreTelechargements||0,r.totalVues+=n.nombreVues||0,r.parCategorie[n.categorie]=(r.parCategorie[n.categorie]||0)+1,n.isActive&&r.ebooksActifs++}),r}function Uc(e){return e<1024?`${e} o`:e<1024*1024?`${(e/1024).toFixed(1)} Ko`:`${(e/(1024*1024)).toFixed(1)} Mo`}const DM=["Mathmatiques","Physique-Chimie","SVT","Franais","Anglais","Histoire-Gographie","Philosophie","conomie","Comptabilit","ducation civique","Arabe","Espagnol","Informatique"],mA="Ce contenu est rserv aux utilisateurs Premium.",nte=({isPremium:e,onReadEbook:r})=>{const[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""}),[h,v]=g.useState("grid");g.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0),d(null);const w=await Vee();a(w)}catch(w){d(e?"Erreur lors du chargement de la bibliothque":mA),console.error(w)}finally{o(!1)}},x=g.useMemo(()=>Kee(n,m),[n,m]),j=g.useMemo(()=>{const w={all:n.length};return n.forEach(E=>{w[E.categorie]=(w[E.categorie]||0)+1}),w},[n]),_=(w,E)=>{p(S=>({...S,[w]:E}))},C=()=>{p({categorie:"all",niveau:"all",classe:"all",matiere:"",recherche:""})};if(l)return t.jsx("div",{className:"ebook-library",children:t.jsxs("div",{className:"ebook-loading",children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{children:"Chargement de la bibliothque..."})]})});if(u){const w=u===mA;return t.jsx("div",{className:"ebook-library",children:t.jsxs("div",{className:"ebook-error",children:[t.jsxs("p",{children:[" ",u]}),w?t.jsx("a",{href:"/premium",className:"btn-retry",children:"Passer  Premium"}):t.jsx("button",{onClick:b,className:"btn-retry",children:"Ressayer"})]})})}return t.jsxs("div",{className:"ebook-library",children:[t.jsxs("div",{className:"ebook-library-header",children:[t.jsxs("div",{className:"ebook-header-content",children:[t.jsx("h1",{children:" Bibliothque PedaClic"}),t.jsxs("p",{className:"ebook-subtitle",children:["Manuels, annales, fiches de rvision et bien plus encore",!e&&t.jsx("span",{className:"preview-badge",children:"Aperu gratuit disponible"})]})]}),t.jsxs("div",{className:"ebook-search-bar",children:[t.jsx("input",{type:"text",placeholder:"Rechercher un ebook (titre, auteur, mot-cl)...",value:m.recherche||"",onChange:w=>_("recherche",w.target.value),className:"search-input"}),t.jsx("span",{className:"search-icon",children:""})]})]}),t.jsxs("div",{className:"ebook-categories",children:[t.jsxs("button",{className:`category-tab ${m.categorie==="all"?"active":""}`,onClick:()=>_("categorie","all"),children:[" Tous",t.jsx("span",{className:"category-count",children:j.all||0})]}),Object.keys(Ji).map(w=>t.jsxs("button",{className:`category-tab ${m.categorie===w?"active":""}`,onClick:()=>_("categorie",w),children:[es[w]," ",Ji[w],t.jsx("span",{className:"category-count",children:j[w]||0})]},w))]}),t.jsxs("div",{className:"ebook-filters",children:[t.jsxs("select",{value:m.niveau||"all",onChange:w=>_("niveau",w.target.value),className:"filter-select",children:[t.jsx("option",{value:"all",children:"Tous les niveaux"}),t.jsx("option",{value:"college",children:"Collge"}),t.jsx("option",{value:"lycee",children:"Lyce"})]}),t.jsxs("select",{value:m.classe||"all",onChange:w=>_("classe",w.target.value),className:"filter-select",children:[t.jsx("option",{value:"all",children:"Toutes les classes"}),hr.map(w=>t.jsx("option",{value:w,children:w},w))]}),t.jsxs("select",{value:m.matiere||"",onChange:w=>_("matiere",w.target.value),className:"filter-select",children:[t.jsx("option",{value:"",children:"Toutes les matires"}),DM.map(w=>t.jsx("option",{value:w,children:w},w))]}),t.jsxs("div",{className:"view-toggle",children:[t.jsx("button",{className:h==="grid"?"active":"",onClick:()=>v("grid"),title:"Vue grille",children:""}),t.jsx("button",{className:h==="list"?"active":"",onClick:()=>v("list"),title:"Vue liste",children:""})]}),(m.categorie!=="all"||m.niveau!=="all"||m.classe!=="all"||m.matiere||m.recherche)&&t.jsx("button",{onClick:C,className:"btn-reset-filters",children:" Rinitialiser"})]}),t.jsx("div",{className:"ebook-results-info",children:t.jsxs("span",{children:[x.length," ebook",x.length>1?"s":""," trouv",x.length>1?"s":""]})}),x.length===0?t.jsxs("div",{className:"ebook-empty",children:[t.jsx("p",{children:" Aucun ebook trouv avec ces filtres."}),t.jsx("button",{onClick:C,className:"btn-reset-filters",children:"Voir tous les ebooks"})]}):t.jsx("div",{className:`ebook-grid ${h==="list"?"list-view":""}`,children:x.map(w=>t.jsx(ate,{ebook:w,isPremium:e,onRead:()=>r(w),viewMode:h},w.id))}),!e&&x.length>0&&t.jsx("div",{className:"ebook-premium-banner",children:t.jsxs("div",{className:"premium-banner-content",children:[t.jsx("h3",{children:" Accdez  tous les ebooks en illimit"}),t.jsx("p",{children:"Abonnez-vous  PedaClic Premium pour lire et tlcharger tous les manuels, annales et fiches de rvision sans limite."}),t.jsx("a",{href:"/premium",className:"btn-premium",children:"S'abonner  2 000 FCFA/mois"})]})})]})},ate=({ebook:e,isPremium:r,onRead:n,viewMode:a})=>t.jsxs("div",{className:`ebook-card ${a==="list"?"ebook-card-list":""}`,children:[t.jsxs("div",{className:"ebook-cover",onClick:n,children:[e.couvertureURL?t.jsx("img",{src:e.couvertureURL,alt:e.titre,loading:"lazy"}):t.jsxs("div",{className:"ebook-cover-placeholder",children:[t.jsx("span",{className:"cover-icon",children:es[e.categorie]}),t.jsx("span",{className:"cover-title",children:e.titre})]}),!r&&t.jsx("div",{className:"ebook-badge-premium",children:t.jsx("span",{children:" Premium"})}),t.jsx("div",{className:"ebook-badge-category",children:Ji[e.categorie]})]}),t.jsxs("div",{className:"ebook-info",children:[t.jsx("h3",{className:"ebook-title",onClick:n,children:e.titre}),t.jsx("p",{className:"ebook-author",children:e.auteur}),t.jsx("p",{className:"ebook-description",children:e.description}),t.jsxs("div",{className:"ebook-meta",children:[e.classe!=="all"&&t.jsx("span",{className:"meta-tag",children:e.classe}),e.matiere&&t.jsx("span",{className:"meta-tag",children:e.matiere}),t.jsxs("span",{className:"meta-pages",children:[e.nombrePages," pages"]}),t.jsx("span",{className:"meta-size",children:Uc(e.tailleFichier)})]}),t.jsxs("div",{className:"ebook-actions",children:[t.jsx("button",{className:"btn-read",onClick:n,children:r?" Lire":` Aperu (${e.pagesApercu} pages)`}),r&&t.jsx("a",{href:e.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn-download",download:!0,children:" Tlcharger"})]})]})]}),ite=({ebook:e,isPremium:r,onBack:n,onGoPremium:a})=>{const[l,o]=g.useState(!0),[u,d]=g.useState("info");g.useEffect(()=>{ete(e.id)},[e.id]);const m=()=>r?e.fichierURL:e.aperuURL?e.aperuURL:null,p=async()=>{if(!r){a();return}await tte(e.id),window.open(e.fichierURL,"_blank")},h=()=>{o(!1)};return t.jsxs("div",{className:"ebook-viewer",children:[t.jsxs("div",{className:"viewer-navbar",children:[t.jsx("button",{onClick:n,className:"btn-back",children:" Retour  la bibliothque"}),t.jsxs("div",{className:"viewer-title-bar",children:[t.jsxs("span",{className:"viewer-category",children:[es[e.categorie]," ",Ji[e.categorie]]}),t.jsx("h2",{className:"viewer-title",children:e.titre})]}),t.jsxs("div",{className:"viewer-actions-bar",children:[t.jsx("button",{className:`btn-tab ${u==="info"?"active":""}`,onClick:()=>d("info"),children:" Dtails"}),t.jsxs("button",{className:`btn-tab ${u==="read"?"active":""}`,onClick:()=>d("read"),children:[" ",r?"Lire":"Aperu"]})]})]}),u==="info"&&t.jsx("div",{className:"viewer-info-panel",children:t.jsxs("div",{className:"info-layout",children:[t.jsxs("div",{className:"info-cover-column",children:[e.couvertureURL?t.jsx("img",{src:e.couvertureURL,alt:e.titre,className:"info-cover-image"}):t.jsxs("div",{className:"info-cover-placeholder",children:[t.jsx("span",{children:es[e.categorie]}),t.jsx("span",{children:e.titre})]}),t.jsxs("div",{className:"info-actions",children:[t.jsxs("button",{className:"btn-action-read",onClick:()=>d("read"),children:[" ",r?"Lire le document":`Aperu (${e.pagesApercu} pages)`]}),r?t.jsx("button",{className:"btn-action-download",onClick:p,children:" Tlcharger le PDF"}):t.jsx("button",{className:"btn-action-premium",onClick:a,children:" Accs complet  Passer Premium"})]})]}),t.jsxs("div",{className:"info-details-column",children:[t.jsx("h1",{className:"info-title",children:e.titre}),t.jsxs("p",{className:"info-author",children:["par ",e.auteur]}),t.jsxs("div",{className:"info-description",children:[t.jsx("h3",{children:"Description"}),t.jsx("p",{children:e.description})]}),t.jsxs("div",{className:"info-metadata",children:[t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"metadata-label",children:"Catgorie"}),t.jsxs("span",{className:"metadata-value",children:[es[e.categorie]," ",Ji[e.categorie]]})]}),t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"metadata-label",children:"Niveau"}),t.jsx("span",{className:"metadata-value",children:e.niveau==="college"?"Collge":"Lyce"})]}),e.classe!=="all"&&t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"metadata-label",children:"Classe"}),t.jsx("span",{className:"metadata-value",children:e.classe})]}),e.matiere&&t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"metadata-label",children:"Matire"}),t.jsx("span",{className:"metadata-value",children:e.matiere})]}),t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"metadata-label",children:"Pages"}),t.jsx("span",{className:"metadata-value",children:e.nombrePages})]}),t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"metadata-label",children:"Taille"}),t.jsx("span",{className:"metadata-value",children:Uc(e.tailleFichier)})]}),e.annee&&t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"metadata-label",children:"Anne"}),t.jsx("span",{className:"metadata-value",children:e.annee})]}),e.editeur&&t.jsxs("div",{className:"metadata-item",children:[t.jsx("span",{className:"metadata-label",children:"diteur"}),t.jsx("span",{className:"metadata-value",children:e.editeur})]})]}),t.jsxs("div",{className:"info-stats",children:[t.jsxs("span",{children:[" ",e.nombreVues," vue",e.nombreVues>1?"s":""]}),t.jsxs("span",{children:[" ",e.nombreTelechargements," tlchargement",e.nombreTelechargements>1?"s":""]})]}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"info-tags",children:e.tags.map((v,b)=>t.jsx("span",{className:"info-tag",children:v},b))})]})]})}),u==="read"&&t.jsx("div",{className:"viewer-read-panel",children:m()?t.jsxs(t.Fragment,{children:[l&&t.jsxs("div",{className:"viewer-loading",children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{children:"Chargement du document..."})]}),t.jsx("iframe",{src:`${m()}#toolbar=1&navpanes=0`,className:"pdf-iframe",title:e.titre,onLoad:h,style:{display:l?"none":"block"}}),!r&&t.jsx("div",{className:"viewer-premium-overlay",children:t.jsxs("div",{className:"overlay-content",children:[t.jsx("div",{className:"overlay-lock",children:""}),t.jsxs("h3",{children:["Aperu limit  ",e.pagesApercu," pages"]}),t.jsxs("p",{children:["Pour lire l'intgralit de ce document (",e.nombrePages," pages) et le tlcharger, passez  PedaClic Premium."]}),t.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),t.jsx("button",{onClick:n,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})]}):t.jsx("div",{className:"viewer-no-preview",children:t.jsxs("div",{className:"no-preview-content",children:[t.jsx("div",{className:"overlay-lock",children:""}),t.jsx("h3",{children:"Document rserv aux abonns Premium"}),t.jsxs("p",{children:["Ce document de ",e.nombrePages," pages est accessible uniquement avec un abonnement PedaClic Premium."]}),t.jsx("button",{onClick:a,className:"btn-overlay-premium",children:"Passer Premium  2 000 FCFA/mois"}),t.jsx("button",{onClick:n,className:"btn-overlay-back",children:"Retour  la bibliothque"})]})})})]})},ste=()=>{const{currentUser:e}=Ke(),r=Ze(),[n,a]=g.useState(null),l=d=>{a(d)},o=()=>{a(null)},u=()=>{r("/premium")};return n?t.jsx(ite,{ebook:n,isPremium:e?.isPremium||!1,onBack:o,onGoPremium:u}):t.jsx(nte,{isPremium:e?.isPremium||!1,onReadEbook:l})},lte=()=>{const[e,r]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null),[u,d]=g.useState(null),[m,p]=g.useState(!1),[h,v]=g.useState(null),[b,x]=g.useState(Y()),[j,_]=g.useState(!1),[C,w]=g.useState(null),[E,S]=g.useState(null),[A,z]=g.useState(null),[k,M]=g.useState(null),D=g.useRef(null),$=g.useRef(null),B=g.useRef(null),[H,T]=g.useState(null);function Y(){return{titre:"",auteur:"",description:"",categorie:"manuel",niveau:"college",classe:"all",matiere:"",nombrePages:0,pagesApercu:5,annee:"",editeur:"",isbn:"",tags:[],ordre:0,isActive:!0}}g.useEffect(()=>{J()},[]);const J=async()=>{try{a(!0),o(null);const W=await Qee();r(W),d(rte(W))}catch(W){o("Erreur lors du chargement des ebooks"),console.error(W)}finally{a(!1)}},P=W=>{const{name:ce,value:xe,type:he}=W.target;x(he==="number"?F=>({...F,[ce]:parseInt(xe)||0}):he==="checkbox"?F=>({...F,[ce]:W.target.checked}):F=>({...F,[ce]:xe}))},q=W=>{const ce=W.target.value.split(",").map(xe=>xe.trim()).filter(Boolean);x(xe=>({...xe,tags:ce}))},U=async W=>{if(W.preventDefault(),!b.titre.trim()){o("Le titre est obligatoire");return}if(!h&&!E){o("Le fichier PDF est obligatoire");return}try{_(!0),o(null),h?(await Xee(h.id,b,E,A,k),w(` Ebook "${b.titre}" modifi avec succs`)):(await Wee(b,E,A,k),w(` Ebook "${b.titre}" ajout avec succs`)),Z(),await J(),setTimeout(()=>w(null),4e3)}catch(ce){o(ce.message||"Erreur lors de la sauvegarde")}finally{_(!1)}},I=W=>{v(W),x({titre:W.titre,auteur:W.auteur,description:W.description,categorie:W.categorie,niveau:W.niveau,classe:W.classe,matiere:W.matiere||"",nombrePages:W.nombrePages,pagesApercu:W.pagesApercu,annee:W.annee||"",editeur:W.editeur||"",isbn:W.isbn||"",tags:W.tags||[],ordre:W.ordre,isActive:W.isActive}),p(!0),window.scrollTo({top:0,behavior:"smooth"})},te=async W=>{try{await Zee(W),T(null),w(" Ebook supprim avec succs"),await J(),setTimeout(()=>w(null),4e3)}catch(ce){o(ce.message||"Erreur lors de la suppression")}},L=async(W,ce)=>{try{await Jee(W,!ce),await J()}catch(xe){o(xe.message)}},Z=()=>{x(Y()),v(null),S(null),z(null),M(null),p(!1),D.current&&(D.current.value=""),$.current&&($.current.value=""),B.current&&(B.current.value="")};return n?t.jsx("div",{className:"admin-ebooks",children:t.jsxs("div",{className:"admin-loading",children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{children:"Chargement des ebooks..."})]})}):t.jsxs("div",{className:"admin-ebooks",children:[t.jsxs("div",{className:"admin-ebooks-header",children:[t.jsx("h1",{children:" Gestion de la Bibliothque"}),t.jsx("button",{className:"btn-add-ebook",onClick:()=>{Z(),p(!m)},children:m?" Fermer":"+ Ajouter un ebook"})]}),l&&t.jsxs("div",{className:"admin-alert error",children:[" ",l]}),C&&t.jsx("div",{className:"admin-alert success",children:C}),u&&t.jsxs("div",{className:"admin-stats-grid",children:[t.jsxs("div",{className:"stat-card",children:[t.jsx("span",{className:"stat-number",children:u.totalEbooks}),t.jsx("span",{className:"stat-label",children:"Total ebooks"})]}),t.jsxs("div",{className:"stat-card",children:[t.jsx("span",{className:"stat-number",children:u.ebooksActifs}),t.jsx("span",{className:"stat-label",children:"Actifs"})]}),t.jsxs("div",{className:"stat-card",children:[t.jsx("span",{className:"stat-number",children:u.totalVues}),t.jsx("span",{className:"stat-label",children:"Vues totales"})]}),t.jsxs("div",{className:"stat-card",children:[t.jsx("span",{className:"stat-number",children:u.totalTelechargements}),t.jsx("span",{className:"stat-label",children:"Tlchargements"})]})]}),m&&t.jsxs("div",{className:"admin-ebook-form-container",children:[t.jsx("h2",{children:h?" Modifier l'ebook":" Ajouter un ebook"}),t.jsxs("form",{onSubmit:U,className:"admin-ebook-form",children:[t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"titre",children:"Titre *"}),t.jsx("input",{id:"titre",name:"titre",type:"text",value:b.titre,onChange:P,placeholder:"Ex: Mathmatiques 3me - Programme complet",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"auteur",children:"Auteur(s) *"}),t.jsx("input",{id:"auteur",name:"auteur",type:"text",value:b.auteur,onChange:P,placeholder:"Ex: Pr. Diallo Moussa",required:!0})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"description",children:"Description *"}),t.jsx("textarea",{id:"description",name:"description",value:b.description,onChange:P,placeholder:"Dcrivez le contenu de cet ebook...",rows:3,required:!0})]}),t.jsxs("div",{className:"form-row form-row-3",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"categorie",children:"Catgorie *"}),t.jsx("select",{id:"categorie",name:"categorie",value:b.categorie,onChange:P,children:Object.keys(Ji).map(W=>t.jsxs("option",{value:W,children:[es[W]," ",Ji[W]]},W))})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"niveau",children:"Niveau *"}),t.jsxs("select",{id:"niveau",name:"niveau",value:b.niveau,onChange:P,children:[t.jsx("option",{value:"college",children:"Collge"}),t.jsx("option",{value:"lycee",children:"Lyce"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"classe",children:"Classe"}),t.jsxs("select",{id:"classe",name:"classe",value:b.classe,onChange:P,children:[t.jsx("option",{value:"all",children:"Toutes les classes"}),hr.map(W=>t.jsx("option",{value:W,children:W},W))]})]})]}),t.jsxs("div",{className:"form-row form-row-3",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"matiere",children:"Matire"}),t.jsxs("select",{id:"matiere",name:"matiere",value:b.matiere,onChange:P,children:[t.jsx("option",{value:"",children:"-- Slectionner --"}),DM.map(W=>t.jsx("option",{value:W,children:W},W))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"annee",children:"Anne"}),t.jsx("input",{id:"annee",name:"annee",type:"text",value:b.annee,onChange:P,placeholder:"Ex: 2024-2025"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"editeur",children:"diteur"}),t.jsx("input",{id:"editeur",name:"editeur",type:"text",value:b.editeur,onChange:P,placeholder:"Ex: INEADE"})]})]}),t.jsxs("div",{className:"form-row form-row-3",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"nombrePages",children:"Nombre de pages *"}),t.jsx("input",{id:"nombrePages",name:"nombrePages",type:"number",value:b.nombrePages,onChange:P,min:"1",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"pagesApercu",children:"Pages en aperu gratuit"}),t.jsx("input",{id:"pagesApercu",name:"pagesApercu",type:"number",value:b.pagesApercu,onChange:P,min:"1",max:"20"}),t.jsx("small",{children:"Nombre de pages visibles sans Premium (1-20)"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"ordre",children:"Ordre d'affichage"}),t.jsx("input",{id:"ordre",name:"ordre",type:"number",value:b.ordre,onChange:P,min:"0"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"tags",children:"Tags (spars par des virgules)"}),t.jsx("input",{id:"tags",type:"text",value:b.tags?.join(", ")||"",onChange:q,placeholder:"Ex: BFEM, annales, mathmatiques, gomtrie"})]}),t.jsxs("div",{className:"form-files-section",children:[t.jsx("h3",{children:" Fichiers"}),t.jsxs("div",{className:"form-group file-group",children:[t.jsxs("label",{children:["Fichier PDF complet ",!h&&"*",h&&t.jsx("small",{children:"(laisser vide pour garder l'actuel)"})]}),t.jsx("input",{ref:D,type:"file",accept:".pdf",onChange:W=>S(W.target.files?.[0]||null),className:"file-input"}),E&&t.jsxs("span",{className:"file-info",children:[" ",E.name," (",Uc(E.size),")"]})]}),t.jsxs("div",{className:"form-group file-group",children:[t.jsxs("label",{children:["Image de couverture",t.jsx("small",{children:"(JPG, PNG  recommand : 400560px)"})]}),t.jsx("input",{ref:$,type:"file",accept:"image/*",onChange:W=>z(W.target.files?.[0]||null),className:"file-input"}),A&&t.jsxs("span",{className:"file-info",children:[" ",A.name," (",Uc(A.size),")"]})]}),t.jsxs("div",{className:"form-group file-group",children:[t.jsxs("label",{children:["PDF Aperu (premires pages uniquement)",t.jsx("small",{children:"(optionnel  sinon le PDF complet est affich aux non-Premium)"})]}),t.jsx("input",{ref:B,type:"file",accept:".pdf",onChange:W=>M(W.target.files?.[0]||null),className:"file-input"}),k&&t.jsxs("span",{className:"file-info",children:[" ",k.name," (",Uc(k.size),")"]})]})]}),t.jsx("div",{className:"form-group checkbox-group",children:t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",name:"isActive",checked:b.isActive,onChange:P}),"Ebook actif (visible dans la bibliothque)"]})}),t.jsxs("div",{className:"form-actions",children:[t.jsx("button",{type:"submit",className:"btn-save",disabled:j,children:j?" Enregistrement...":h?" Modifier l'ebook":" Ajouter l'ebook"}),t.jsx("button",{type:"button",className:"btn-cancel",onClick:Z,children:"Annuler"})]})]})]}),t.jsxs("div",{className:"admin-ebooks-list",children:[t.jsxs("h2",{children:[" Liste des ebooks (",e.length,")"]}),e.length===0?t.jsxs("div",{className:"admin-empty",children:[t.jsx("p",{children:"Aucun ebook pour le moment."}),t.jsx("button",{className:"btn-add-ebook",onClick:()=>p(!0),children:"+ Ajouter le premier ebook"})]}):t.jsx("div",{className:"admin-ebooks-table-wrapper",children:t.jsxs("table",{className:"admin-ebooks-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Couverture"}),t.jsx("th",{children:"Titre / Auteur"}),t.jsx("th",{children:"Catgorie"}),t.jsx("th",{children:"Classe"}),t.jsx("th",{children:"Pages"}),t.jsx("th",{children:"Vues / DL"}),t.jsx("th",{children:"Statut"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:e.map(W=>t.jsxs("tr",{className:W.isActive?"":"row-inactive",children:[t.jsx("td",{className:"td-cover",children:W.couvertureURL?t.jsx("img",{src:W.couvertureURL,alt:"",className:"mini-cover"}):t.jsx("div",{className:"mini-cover-placeholder",children:es[W.categorie]})}),t.jsxs("td",{className:"td-title",children:[t.jsx("strong",{children:W.titre}),t.jsx("span",{className:"td-author",children:W.auteur})]}),t.jsx("td",{children:t.jsxs("span",{className:"badge-category",children:[es[W.categorie]," ",Ji[W.categorie]]})}),t.jsx("td",{children:W.classe==="all"?"Toutes":W.classe}),t.jsx("td",{children:W.nombrePages}),t.jsx("td",{children:t.jsxs("span",{className:"td-stats",children:[" ",W.nombreVues,t.jsx("br",{})," ",W.nombreTelechargements]})}),t.jsx("td",{children:t.jsx("button",{className:`btn-status ${W.isActive?"active":"inactive"}`,onClick:()=>L(W.id,W.isActive),title:W.isActive?"Dsactiver":"Activer",children:W.isActive?" Actif":" Inactif"})}),t.jsxs("td",{className:"td-actions",children:[t.jsx("button",{className:"btn-edit",onClick:()=>I(W),title:"Modifier",children:""}),H===W.id?t.jsxs("div",{className:"delete-confirm",children:[t.jsx("span",{children:"Supprimer ?"}),t.jsx("button",{className:"btn-confirm-yes",onClick:()=>te(W.id),children:"Oui"}),t.jsx("button",{className:"btn-confirm-no",onClick:()=>T(null),children:"Non"})]}):t.jsx("button",{className:"btn-delete",onClick:()=>T(W.id),title:"Supprimer",children:""})]})]},W.id))})]})})]})]})},Bn="mediatheque",PM="mediatheque_vues";async function fA(e={},r=50){let n=Ee(_e(Q,Bn),Se("statut","==","publie"),Ve("createdAt","desc"),Gt(r));e.type&&e.type!=="all"&&(n=Ee(_e(Q,Bn),Se("statut","==","publie"),Se("type","==",e.type),Ve("createdAt","desc"),Gt(r)));let l=(await Ce(n)).docs.map(o=>({id:o.id,...o.data()}));if(e.discipline&&(l=l.filter(o=>o.discipline===e.discipline)),e.niveau&&(l=l.filter(o=>o.niveau===e.niveau)),e.acces==="gratuit"?l=l.filter(o=>!o.isPremium):e.acces==="premium"&&(l=l.filter(o=>o.isPremium)),e.recherche?.trim()){const o=e.recherche.toLowerCase().trim();l=l.filter(u=>u.titre.toLowerCase().includes(o)||u.description.toLowerCase().includes(o)||(u.tags??[]).some(d=>d.toLowerCase().includes(o)))}return l}async function ote(e){const r=Ee(_e(Q,Bn),Se("auteurId","==",e),Ve("createdAt","desc"));return(await Ce(r)).docs.map(a=>({id:a.id,...a.data()}))}async function cte(){const e=Ee(_e(Q,Bn),Ve("createdAt","desc"));return(await Ce(e)).docs.map(n=>({id:n.id,...n.data()}))}async function MM(e){const r=await gt(je(Q,Bn,e));return r.exists()?{id:r.id,...r.data()}:null}async function ute(e,r,n=4){const a=Ee(_e(Q,Bn),Se("statut","==","publie"),Se("discipline","==",r),Ve("vues","desc"),Gt(n+1));return(await Ce(a)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.id!==e).slice(0,n)}async function dte(e,r,n){const a=Ae.now();return(await Dt(_e(Q,Bn),{...e,auteurId:r,auteurNom:n,vues:0,tags:e.tags??[],statut:e.statut??"brouillon",createdAt:a,updatedAt:a})).id}async function Fc(e,r){await Ge(je(Q,Bn,e),{...r,updatedAt:Ae.now()})}async function mte(e,r){await Ge(je(Q,Bn,e),{statut:r,updatedAt:Ae.now()})}async function fte(e,r){await Ge(je(Q,Bn,e),{isPremium:r,updatedAt:Ae.now()})}async function pte(e){if(await Gr(je(Q,Bn,e.id)),e.url.includes("firebasestorage"))try{const r=sr(Jt,pA(e.url));await Ls(r)}catch{console.warn("[Mdiathque] Fichier principal introuvable en Storage, ignor.")}if(e.thumbnailUrl?.includes("firebasestorage"))try{const r=sr(Jt,pA(e.thumbnailUrl));await Ls(r)}catch{console.warn("[Mdiathque] Vignette introuvable en Storage, ignore.")}}async function hte(e,r,n,a,l){const o=new Date().getFullYear();let u,d;switch(n){case"video":u=`mediatheque/videos/${a}/${r}`,d="video.mp4";break;case"audio":u=`mediatheque/audios/${a}/${r}`,d="audio.mp3";break;case"podcast":u=`mediatheque/audios/${a}/${r}`,d="podcast.mp3";break;case"webinaire":u=`mediatheque/webinaires/${o}/${r}`,d="enregistrement.mp4";break}const m=sr(Jt,`${u}/${d}`),p=ou(m,e,{contentType:e.type,customMetadata:{mediaId:r,discipline:a}});return new Promise((h,v)=>{p.on("state_changed",b=>{const x=Math.round(b.bytesTransferred/b.totalBytes*100);l?.(x)},b=>{console.error("[Mdiathque] Erreur upload :",b),v(new Error(`chec de l'upload : ${b.message}`))},async()=>{const b=await qn(p.snapshot.ref);h(b)})})}async function TM(e,r){const n=e.name.split(".").pop()?.toLowerCase()??"jpg",a=sr(Jt,`mediatheque/thumbnails/${r}/thumb.${n}`),l=ou(a,e,{contentType:e.type});return new Promise((o,u)=>{l.on("state_changed",()=>{},u,async()=>{const d=await qn(l.snapshot.ref);o(d)})})}async function vte(e){await Ge(je(Q,Bn,e),{vues:as(1)})}async function gte(e,r,n,a,l){const o=`${e}_${r}`,u=l>0&&n/l>=.8;await lu(je(Q,PM,o),{mediaId:r,userId:e,dureeVisionnee:n,positionReprise:a,estTermine:u,vueAt:Ae.now()},{merge:!0})}async function xte(e,r){const n=`${e}_${r}`,a=await gt(je(Q,PM,n));return a.exists()?{id:a.id,...a.data()}:null}function pA(e){try{const n=new URL(e).pathname.match(/\/o\/(.+)$/);if(n)return decodeURIComponent(n[1])}catch{}return""}const ya={video:{label:"Vido",emoji:"",couleur:"#2563eb",bg:"#eff6ff",accept:"video/*"},audio:{label:"Audio",emoji:"",couleur:"#7c3aed",bg:"#f5f3ff",accept:"audio/*"},podcast:{label:"Podcast",emoji:"",couleur:"#059669",bg:"#ecfdf5",accept:"audio/*"},webinaire:{label:"Webinaire",emoji:"",couleur:"#d97706",bg:"#fffbeb",accept:"video/*"}},Sf={publie:{label:"Publi",couleur:"#16a34a",bg:"#f0fdf4"},brouillon:{label:"Brouillon",couleur:"#6b7280",bg:"#f3f4f6"},planifiee:{label:"Planifi",couleur:"#2563eb",bg:"#eff6ff"},archive:{label:"Archiv",couleur:"#9ca3af",bg:"#f9fafb"}},Ub=30;function wf(e){const r=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%60);return r>0?`${r}:${String(n).padStart(2,"0")}:${String(a).padStart(2,"0")}`:`${n}:${String(a).padStart(2,"0")}`}function bte({media:e,isPremium:r,onClick:n,isAdmin:a,onEdit:l,onDelete:o,onTogglePremium:u,onSetStatut:d}){const m=ya[e.type],p=!e.isPremium||r;return t.jsxs("article",{className:`media-card ${a?"media-card--admin":""}`,onClick:a?void 0:n,role:a?void 0:"button",tabIndex:a?void 0:0,onKeyDown:a?void 0:(h=>h.key==="Enter"&&n()),"aria-label":a?void 0:`Lire : ${e.titre}`,children:[t.jsxs("div",{className:"media-card__vignette",children:[e.thumbnailUrl?t.jsx("img",{src:e.thumbnailUrl,alt:e.titre,className:"media-card__image",loading:"lazy"}):t.jsx("div",{className:"media-card__vignette-default",children:t.jsx("span",{children:m.emoji})}),e.duree>0&&t.jsx("span",{className:"media-card__duree",children:wf(e.duree)}),e.isPremium?t.jsx("span",{className:"media-card__badge-premium",children:" Premium"}):t.jsx("span",{className:"media-card__badge-gratuit",children:" Gratuit"}),e.isPremium&&!p&&t.jsx("div",{className:"media-card__apercu-overlay",children:" Aperu 30 secondes"}),t.jsx("div",{className:"media-card__play","aria-hidden":"true",children:t.jsx("div",{className:"media-card__play-icone",children:""})})]}),a&&l&&o&&u&&d&&t.jsxs("div",{className:"media-card__admin-actions",onClick:h=>h.stopPropagation(),children:[t.jsx("button",{type:"button",className:"media-card__admin-btn media-card__admin-btn--edit",onClick:()=>l(e),title:"Modifier",children:""}),t.jsx("button",{type:"button",className:`media-card__admin-btn ${e.isPremium?"media-card__admin-btn--premium":""}`,onClick:()=>u(e),title:e.isPremium?"Passer en gratuit":"Passer en Premium",children:e.isPremium?"":""}),t.jsx("select",{className:"media-card__admin-select",value:e.statut,onChange:h=>d(e,h.target.value),onClick:h=>h.stopPropagation(),title:"Statut",children:Object.entries(Sf).map(([h,v])=>t.jsx("option",{value:h,children:v.label},h))}),t.jsx("button",{type:"button",className:"media-card__admin-btn media-card__admin-btn--view",onClick:()=>n(),title:"Voir",children:""}),t.jsx("button",{type:"button",className:"media-card__admin-btn media-card__admin-btn--delete",onClick:()=>o(e),title:"Supprimer",children:""})]}),t.jsxs("div",{className:"media-card__corps",onClick:a?()=>n():void 0,style:a?{cursor:"pointer"}:void 0,children:[t.jsxs("span",{className:"media-card__type",style:{backgroundColor:m.bg,color:m.couleur},children:[m.emoji," ",m.label]}),t.jsx("h3",{className:"media-card__titre",children:e.titre}),t.jsxs("p",{className:"media-card__auteur",children:["Par ",e.auteurNom]}),t.jsxs("div",{className:"media-card__footer",children:[t.jsxs("div",{className:"media-card__meta",children:[t.jsx("span",{className:"media-card__discipline",children:e.discipline}),t.jsxs("span",{className:"media-card__classe",children:[e.niveau," ",e.classe?` ${e.classe}`:""]})]}),t.jsxs("span",{className:"media-card__vues",children:[" ",e.vues.toLocaleString("fr-SN")]})]})]})]})}function yte(){const{currentUser:e}=Ke(),r=Ze(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState({type:"all",discipline:"",niveau:"",recherche:"",acces:"all",statut:""}),[h,v]=g.useState(null),[b,x]=g.useState(!1),[j,_]=g.useState(null),{matieres:C}=na(),w=g.useMemo(()=>{const T=n.length,Y=n.filter(q=>q.type==="video").length,J=n.filter(q=>q.type==="audio"||q.type==="podcast").length,P=n.filter(q=>q.type==="webinaire").length;return{total:T,videos:Y,audios:J,webs:P}},[n]),E=g.useMemo(()=>n.filter(T=>{if(m.type!=="all"&&T.type!==m.type||m.discipline&&T.discipline!==m.discipline||m.niveau&&T.niveau!==m.niveau||m.acces==="gratuit"&&T.isPremium||m.acces==="premium"&&!T.isPremium||m.statut&&T.statut!==m.statut)return!1;if(m.recherche.trim()){const Y=m.recherche.toLowerCase().trim();return T.titre.toLowerCase().includes(Y)||T.description.toLowerCase().includes(Y)||T.discipline.toLowerCase().includes(Y)||(T.tags??[]).some(J=>J.toLowerCase().includes(Y))}return!0}),[n,m]);g.useEffect(()=>{async function T(){try{o(!0),d(null);let Y;if(e?.role==="admin")Y=await cte();else if(e?.role==="prof"){const[J,P]=await Promise.all([fA(),ote(e.uid)]),q=new Set(J.map(I=>I.id)),U=P.filter(I=>!q.has(I.id));Y=[...J,...U]}else Y=await fA();a(Y)}catch(Y){console.error("[Mdiathque] Erreur chargement :",Y),d("Impossible de charger la mdiathque. Vrifiez votre connexion.")}finally{o(!1)}}T()},[e]);const S=(T,Y)=>{p(J=>({...J,[T]:Y}))},A=()=>{p({type:"all",discipline:"",niveau:"",recherche:"",acces:"all",statut:""})},z=T=>{r(`/mediatheque/${T}`)},k=e?.role==="admin",M=T=>{r(`/mediatheque/${T.id}/modifier`)},D=T=>{v(T)},$=async()=>{if(h){x(!0);try{await pte(h),a(T=>T.filter(Y=>Y.id!==h.id)),_("Contenu supprim."),setTimeout(()=>_(null),2e3)}catch(T){console.error("[Mdiathque] Erreur suppression:",T),_("Erreur lors de la suppression.")}finally{x(!1),v(null)}}},B=async T=>{try{await fte(T.id,!T.isPremium),a(Y=>Y.map(J=>J.id===T.id?{...J,isPremium:!J.isPremium}:J)),_(T.isPremium?"Pass en gratuit":"Pass en Premium"),setTimeout(()=>_(null),2e3)}catch{_("Erreur")}},H=async(T,Y)=>{try{await mte(T.id,Y),a(J=>J.map(P=>P.id===T.id?{...P,statut:Y}:P)),_(`Statut : ${Sf[Y].label}`),setTimeout(()=>_(null),2e3)}catch{_("Erreur")}};return t.jsxs("div",{className:"mediatheque-page",children:[t.jsxs("section",{className:"mediatheque-hero","aria-label":"En-tte mdiathque",children:[t.jsx("h1",{className:"mediatheque-hero__titre",children:" Mdiathque PedaClic"}),t.jsx("p",{className:"mediatheque-hero__sous-titre",children:"Cours en vido, podcasts pdagogiques et webinaires  L'cole en un clic"}),t.jsxs("div",{className:"mediatheque-hero__stats","aria-label":"Statistiques des contenus",children:[t.jsxs("div",{className:"mediatheque-hero__stat",children:[t.jsx("span",{className:"mediatheque-hero__stat-nombre",children:w.total}),t.jsx("span",{className:"mediatheque-hero__stat-label",children:"Contenus"})]}),t.jsxs("div",{className:"mediatheque-hero__stat",children:[t.jsx("span",{className:"mediatheque-hero__stat-nombre",children:w.videos}),t.jsx("span",{className:"mediatheque-hero__stat-label",children:"Vidos"})]}),t.jsxs("div",{className:"mediatheque-hero__stat",children:[t.jsx("span",{className:"mediatheque-hero__stat-nombre",children:w.audios}),t.jsx("span",{className:"mediatheque-hero__stat-label",children:"Audio"})]}),t.jsxs("div",{className:"mediatheque-hero__stat",children:[t.jsx("span",{className:"mediatheque-hero__stat-nombre",children:w.webs}),t.jsx("span",{className:"mediatheque-hero__stat-label",children:"Webinaires"})]})]})]}),t.jsxs("nav",{className:"mediatheque-filtres","aria-label":"Filtres de la mdiathque",children:[t.jsxs("div",{className:"mediatheque-filtres__ligne",children:[t.jsxs("div",{className:"mediatheque-filtres__recherche",children:[t.jsx("span",{className:"mediatheque-filtres__recherche-icone","aria-hidden":!0,children:""}),t.jsx("input",{type:"search",className:"mediatheque-filtres__recherche-input",placeholder:"Rechercher un cours, une matire, un tag...",value:m.recherche,onChange:T=>S("recherche",T.target.value),"aria-label":"Rechercher dans la mdiathque"})]}),t.jsxs("select",{className:"mediatheque-filtres__select",value:m.discipline,onChange:T=>S("discipline",T.target.value),"aria-label":"Filtrer par discipline",children:[t.jsx("option",{value:"",children:"Toutes les matires"}),C.map(T=>t.jsx("option",{value:T.valeur,children:T.label},T.valeur))]}),t.jsxs("select",{className:"mediatheque-filtres__select",value:m.niveau,onChange:T=>S("niveau",T.target.value),"aria-label":"Filtrer par niveau",children:[t.jsx("option",{value:"",children:"Tous les niveaux"}),hr.map(T=>t.jsx("option",{value:T,children:T},T))]}),t.jsxs("select",{className:"mediatheque-filtres__select",value:m.acces,onChange:T=>S("acces",T.target.value),"aria-label":"Filtrer par type d'accs",children:[t.jsx("option",{value:"all",children:"Tout l'accs"}),t.jsx("option",{value:"gratuit",children:" Gratuit"}),t.jsx("option",{value:"premium",children:" Premium"})]}),k&&t.jsxs("select",{className:"mediatheque-filtres__select",value:m.statut||"",onChange:T=>p(Y=>({...Y,statut:T.target.value})),"aria-label":"Filtrer par statut",children:[t.jsx("option",{value:"",children:"Tous les statuts"}),Object.entries(Sf).map(([T,Y])=>t.jsx("option",{value:T,children:Y.label},T))]}),(e?.role==="admin"||e?.role==="prof")&&t.jsx("button",{className:"btn-principal",onClick:()=>r("/mediatheque/ajouter"),"aria-label":"Ajouter un nouveau contenu",children:"+ Ajouter"})]}),t.jsxs("div",{className:"mediatheque-filtres__types",role:"group","aria-label":"Filtrer par type",children:[t.jsx("button",{className:`mediatheque-filtres__type-btn${m.type==="all"?" mediatheque-filtres__type-btn--actif":""}`,onClick:()=>S("type","all"),"aria-pressed":m.type==="all",children:" Tous"}),Object.entries(ya).map(([T,Y])=>t.jsxs("button",{className:`mediatheque-filtres__type-btn${m.type===T?" mediatheque-filtres__type-btn--actif":""}`,onClick:()=>S("type",T),"aria-pressed":m.type===T,children:[Y.emoji," ",Y.label]},T))]})]}),t.jsxs("main",{className:"mediatheque-contenu",children:[t.jsxs("div",{className:"mediatheque-catalogue__header",children:[t.jsx("h2",{className:"mediatheque-catalogue__titre",children:m.type==="all"?"Tous les contenus":ya[m.type]?.label??"Contenus"}),!l&&t.jsxs("span",{className:"mediatheque-catalogue__compteur",children:[E.length," rsultat",E.length!==1?"s":""]})]}),l&&t.jsxs("div",{className:"mediatheque-chargement",role:"status","aria-live":"polite",children:[t.jsx("div",{className:"mediatheque-spinner","aria-hidden":"true"}),t.jsx("p",{children:"Chargement de la mdiathque..."})]}),!l&&u&&t.jsxs("div",{className:"mediatheque-vide",role:"alert",children:[t.jsx("span",{className:"mediatheque-vide__emoji",children:""}),t.jsx("h3",{className:"mediatheque-vide__titre",children:"Erreur de chargement"}),t.jsx("p",{className:"mediatheque-vide__message",children:u}),t.jsx("button",{className:"btn-principal",onClick:()=>window.location.reload(),children:" Ressayer"})]}),!l&&!u&&E.length===0&&t.jsxs("div",{className:"mediatheque-vide",role:"status",children:[t.jsx("span",{className:"mediatheque-vide__emoji",children:""}),t.jsx("h3",{className:"mediatheque-vide__titre",children:"Aucun contenu trouv"}),t.jsx("p",{className:"mediatheque-vide__message",children:n.length===0?"La mdiathque ne contient pas encore de contenus publis.":"Aucun contenu ne correspond  vos critres de recherche."}),(m.type!=="all"||m.discipline||m.niveau||m.recherche||m.acces!=="all"||m.statut)&&t.jsx("button",{className:"btn-secondaire",onClick:A,children:"Rinitialiser les filtres"})]}),!l&&!u&&E.length>0&&t.jsx("div",{className:"mediatheque-grille",role:"list","aria-label":"Liste des contenus multimdias",children:E.map(T=>t.jsx("div",{role:"listitem",children:t.jsx(bte,{media:T,isPremium:e?.isPremium??!1,onClick:()=>z(T.id),isAdmin:k,onEdit:k?M:void 0,onDelete:k?D:void 0,onTogglePremium:k?B:void 0,onSetStatut:k?H:void 0})},T.id))}),j&&t.jsx("div",{className:"mediatheque-toast",role:"status",children:j}),h&&t.jsx("div",{className:"mediatheque-modal-overlay",onClick:()=>v(null),children:t.jsxs("div",{className:"mediatheque-modal",onClick:T=>T.stopPropagation(),children:[t.jsx("h3",{children:"Supprimer ce contenu ?"}),t.jsxs("p",{children:[" ",h.titre,"  sera dfinitivement supprim."]}),t.jsxs("div",{className:"mediatheque-modal__actions",children:[t.jsx("button",{type:"button",className:"btn-secondaire",onClick:()=>v(null),children:"Annuler"}),t.jsx("button",{type:"button",className:"btn-principal",style:{background:"#dc2626"},onClick:$,disabled:b,children:b?"Suppression":"Supprimer"})]})]})})]})]})}function jte(e){if(!e)return null;try{const r=new URL(e);if(r.hostname==="youtu.be")return r.pathname.slice(1).split("?")[0]||null;if(r.hostname.includes("youtube.com")){const n=r.searchParams.get("v");if(n)return n;const a=r.pathname.split("/").filter(Boolean),l=a.findIndex(o=>o==="embed"||o==="shorts");if(l!==-1&&a[l+1])return a[l+1]}}catch{}return null}function _te(e,r=0){const n=new URLSearchParams({rel:"0",modestbranding:"1",enablejsapi:"0",origin:window.location.origin,...r>5?{start:String(Math.floor(r))}:{}});return`https://www.youtube-nocookie.com/embed/${e}?${n.toString()}`}function Nte({url:e,mimeType:r,titre:n,thumbnailUrl:a,aAccesPremium:l,positionInitiale:o,onTempsChange:u,onAperuTermine:d}){const m=g.useRef(null),p=g.useRef(null),[h,v]=g.useState(!1),[b,x]=g.useState(o>5),[j,_]=g.useState(null),C=jte(e),w=C!==null,E=w?_te(C,o):null;g.useEffect(()=>{if(v(!1),_(null),p.current&&clearInterval(p.current),w&&!l){let D=0;p.current=setInterval(()=>{D+=1,u(D),D>=Ub&&(clearInterval(p.current),v(!0),d())},1e3)}return()=>{p.current&&clearInterval(p.current)}},[e,l,w,u,d]);const S=()=>{if(!m.current)return;const D=m.current.currentTime;u(D),!l&&D>=Ub&&(m.current.pause(),v(!0),d())},A=()=>{const D=m.current;let $="Impossible de charger la vido.";if(!e||e.trim()==="")$="Aucune URL vido configure pour ce contenu.";else if(D?.error)switch(D.error.code){case MediaError.MEDIA_ERR_NETWORK:$="Erreur rseau  vrifiez votre connexion.";break;case MediaError.MEDIA_ERR_DECODE:$="Format vido non support par ce navigateur.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:$="Fichier introuvable ou format non support.";break;default:$=`Erreur de lecture (code ${D.error.code}).`}_($)},z=()=>{m.current&&(m.current.currentTime=o,m.current.play().catch(console.warn),x(!1))},k=()=>{m.current&&(m.current.currentTime=0,m.current.play().catch(console.warn),x(!1))},M=r||"video/mp4";return t.jsxs("div",{className:"media-player",children:[t.jsxs("div",{className:"media-player__video-wrapper",children:[w&&!h&&E&&t.jsx("iframe",{src:E,title:n,className:"media-player__video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,style:{border:"none"},"aria-label":`Lecteur YouTube : ${n}`}),!w&&!j&&t.jsxs("video",{ref:m,className:"media-player__video",controls:!0,preload:"metadata",poster:a,onTimeUpdate:S,onError:A,playsInline:!0,"aria-label":`Lecteur vido : ${n}`,children:[e&&e.trim()!==""&&t.jsx("source",{src:e,type:M}),t.jsx("p",{children:"Votre navigateur ne supporte pas la lecture vido HTML5."})]}),!w&&j&&t.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#0f172a",color:"white",gap:"0.75rem",padding:"2rem",textAlign:"center"},role:"alert",children:[t.jsx("span",{style:{fontSize:"2.5rem"},children:""}),t.jsx("p",{style:{margin:0,fontWeight:700},children:"Vido indisponible"}),t.jsx("p",{style:{margin:0,fontSize:"0.85rem",opacity:.7,maxWidth:300},children:j}),t.jsx("button",{type:"button",style:{marginTop:"0.5rem",background:"#2563eb",color:"white",border:"none",padding:"0.5rem 1.25rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem"},onClick:()=>{_(null),m.current&&m.current.load()},children:" Ressayer"})]}),!w&&!j&&(!e||e.trim()==="")&&t.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#0f172a",color:"rgba(255,255,255,0.5)",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"3rem"},children:""}),t.jsx("p",{style:{margin:0,fontSize:"0.9rem"},children:"Aucun fichier vido configur"})]}),h&&t.jsxs("div",{className:"media-player__overlay-premium",role:"dialog","aria-modal":!0,children:[t.jsx("div",{style:{fontSize:"3rem"},children:""}),t.jsx("h3",{children:"Aperu termin"}),t.jsx("p",{children:"Abonnez-vous  PedaClic Premium pour accder  la totalit de ce contenu et  toute la mdiathque."}),t.jsx(Re,{to:"/premium",className:"btn-premium-overlay",children:" Devenir Premium  2 000 FCFA/mois"})]})]}),!w&&b&&o>5&&t.jsxs("div",{className:"media-player__reprise",role:"complementary",children:[t.jsxs("span",{className:"media-player__reprise-texte",children:[" Reprendre  ",wf(o)]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("button",{type:"button",className:"btn-secondaire",style:{fontSize:"0.8rem",padding:"0.3rem 0.75rem"},onClick:k,children:"Depuis le dbut"}),t.jsx("button",{type:"button",className:"media-player__reprise-btn",onClick:z,children:"Reprendre"})]})]}),t.jsx("div",{className:"media-player__progression-barre","aria-hidden":"true",title:"Progression de visionnage",children:t.jsx("div",{className:"media-player__progression-rempli",style:{width:m.current?.duration?`${o/m.current.duration*100}%`:"0%"}})})]})}function Ste({url:e,titre:r,thumbnailUrl:n,typeMedia:a,aAccesPremium:l,positionInitiale:o,onTempsChange:u,onAperuTermine:d}){const m=g.useRef(null),[p,h]=g.useState(!1),v=()=>{if(!m.current)return;const j=m.current.currentTime;u(j),!l&&j>=Ub&&(m.current.pause(),h(!0),d())},b=()=>{m.current&&o>5&&(m.current.currentTime=o)},x=ya[a];return t.jsxs("div",{className:"media-player",style:{position:"relative"},children:[t.jsxs("div",{className:"media-player__audio-wrapper",children:[n?t.jsx("img",{src:n,alt:r,className:"media-player__audio-art"}):t.jsx("div",{className:"media-player__audio-art-placeholder",children:x.emoji}),t.jsx("p",{className:"media-player__audio-titre",children:r}),t.jsxs("audio",{ref:m,className:"media-player__audio",controls:!0,preload:"metadata",onLoadedMetadata:b,onTimeUpdate:v,"aria-label":`Lecteur audio : ${r}`,children:[e&&e.trim()!==""&&t.jsx("source",{src:e,type:"audio/mpeg"}),t.jsx("p",{children:"Votre navigateur ne supporte pas la lecture audio."})]})]}),p&&t.jsxs("div",{className:"media-player__overlay-premium",role:"dialog",children:[t.jsx("div",{style:{fontSize:"3rem"},children:""}),t.jsx("h3",{children:"Aperu termin"}),t.jsx("p",{children:"Accdez  la totalit de cet audio avec PedaClic Premium."}),t.jsx(Re,{to:"/premium",className:"btn-premium-overlay",children:" Devenir Premium  2 000 FCFA/mois"})]})]})}function wte(){const{mediaId:e}=yn(),{currentUser:r}=Ke(),n=Ze(),[a,l]=g.useState(null),[o,u]=g.useState([]),[d,m]=g.useState(null),[p,h]=g.useState(!0),[v,b]=g.useState(null),x=g.useRef(0),j=g.useRef(null),C=r?.role==="admin"||r?.role==="prof"||!a?.isPremium||(r?.isPremium??!1);g.useEffect(()=>{if(!e)return;async function A(){try{h(!0),b(null);const z=await MM(e);if(!z){b("Ce contenu est introuvable ou a t supprim.");return}l(z);const[k,M]=await Promise.all([ute(e,z.discipline),r?xte(r.uid,e):Promise.resolve(null)]);u(k),m(M),M?.positionReprise&&(x.current=M.positionReprise),await vte(e)}catch(z){console.error("[MediaDetail] Erreur chargement :",z),b("Impossible de charger ce contenu. Ressayez plus tard.")}finally{h(!1)}}return A(),()=>{j.current&&clearInterval(j.current)}},[e,r]),g.useEffect(()=>{if(!(!r||!a))return j.current=setInterval(async()=>{x.current>0&&await gte(r.uid,a.id,x.current,x.current,a.duree)},3e4),()=>{j.current&&clearInterval(j.current)}},[r,a]);const w=g.useCallback(A=>{x.current=A},[]),E=g.useCallback(()=>{},[]);if(p)return t.jsx("div",{className:"media-detail-page",children:t.jsxs("div",{className:"mediatheque-chargement",role:"status",children:[t.jsx("div",{className:"mediatheque-spinner"}),t.jsx("p",{children:"Chargement du contenu..."})]})});if(v||!a)return t.jsxs("div",{className:"media-detail-page",children:[t.jsx("div",{className:"media-detail-header",children:t.jsx("button",{type:"button",className:"media-detail-retour",onClick:()=>n("/mediatheque"),children:" Retour  la mdiathque"})}),t.jsxs("div",{className:"mediatheque-vide",role:"alert",children:[t.jsx("span",{className:"mediatheque-vide__emoji",children:""}),t.jsx("h3",{className:"mediatheque-vide__titre",children:"Contenu introuvable"}),t.jsx("p",{className:"mediatheque-vide__message",children:v}),t.jsx("button",{type:"button",className:"btn-principal",onClick:()=>n("/mediatheque"),children:" Retour  la mdiathque"})]})]});const S=ya[a.type];return t.jsxs("div",{className:"media-detail-page",children:[t.jsxs("header",{className:"media-detail-header",children:[t.jsx("button",{type:"button",className:"media-detail-retour",onClick:()=>n("/mediatheque"),"aria-label":"Retourner au catalogue",children:" Mdiathque"}),t.jsxs("span",{style:{fontSize:"0.8rem",padding:"0.25rem 0.75rem",borderRadius:"4px",backgroundColor:S.bg,color:S.couleur,fontWeight:600},children:[S.emoji," ",S.label]}),a.isPremium&&t.jsx("span",{style:{fontSize:"0.75rem",padding:"0.25rem 0.6rem",borderRadius:"4px",backgroundColor:"#fffbeb",color:"#d97706",fontWeight:700},children:" Premium"})]}),t.jsxs("div",{className:"media-detail-layout",children:[t.jsxs("div",{children:[a.type==="video"||a.type==="webinaire"?t.jsx(Nte,{url:a.url,mimeType:a.mimeType,titre:a.titre,thumbnailUrl:a.thumbnailUrl,aAccesPremium:C,positionInitiale:d?.positionReprise??0,onTempsChange:w,onAperuTermine:E}):t.jsx(Ste,{url:a.url,titre:a.titre,thumbnailUrl:a.thumbnailUrl,typeMedia:a.type,aAccesPremium:C,positionInitiale:d?.positionReprise??0,onTempsChange:w,onAperuTermine:E}),t.jsxs("div",{className:"media-detail-infos",children:[t.jsx("h1",{className:"media-detail-infos__titre",children:a.titre}),t.jsxs("div",{className:"media-detail-infos__meta",children:[t.jsxs("span",{className:"media-detail-infos__meta-item",children:[" ",a.auteurNom]}),t.jsxs("span",{className:"media-detail-infos__meta-item",children:[" ",a.discipline]}),t.jsxs("span",{className:"media-detail-infos__meta-item",children:[" ",a.niveau,a.classe?`  ${a.classe}`:""]}),t.jsxs("span",{className:"media-detail-infos__meta-item",children:[" ",wf(a.duree)]}),t.jsxs("span",{className:"media-detail-infos__meta-item",children:[" ",a.vues.toLocaleString("fr-SN")," vue",a.vues!==1?"s":""]}),a.taille>0&&t.jsxs("span",{className:"media-detail-infos__meta-item",children:[" ",(a.taille/(1024*1024)).toFixed(1)," Mo"]})]}),t.jsx("p",{className:"media-detail-infos__description",children:a.description}),(a.tags??[]).length>0&&t.jsx("div",{className:"media-detail-infos__tags",children:(a.tags??[]).map(A=>t.jsxs("span",{className:"media-detail-infos__tag",children:["#",A]},A))})]})]}),t.jsxs("aside",{className:"media-detail-sidebar","aria-label":"Informations complmentaires",children:[a.isPremium&&!C&&t.jsxs("div",{className:"media-sidebar-premium",children:[t.jsx("p",{className:"media-sidebar-premium__titre",children:" Dbloquez tout le contenu"}),t.jsx("p",{className:"media-sidebar-premium__prix",children:"2 000 FCFA"}),t.jsx("p",{className:"media-sidebar-premium__prix-annuel",children:"ou 20 000 FCFA / an (2 mois offerts)"}),t.jsx(Re,{to:"/premium",className:"btn-abonnement",children:"S'abonner  Premium"}),t.jsxs("ul",{className:"media-sidebar-premium__avantages",children:[t.jsx("li",{children:"Vidos et audios illimits"}),t.jsx("li",{children:"Tous les cours en ligne"}),t.jsx("li",{children:"Quiz et exercices premium"}),t.jsx("li",{children:"Tlchargement pour mode hors-ligne"})]})]}),o.length>0&&t.jsxs("div",{className:"media-sidebar-similaires",children:[t.jsx("h2",{className:"media-sidebar-similaires__titre",children:" Contenus similaires"}),t.jsx("div",{className:"media-sidebar-similaires__liste",children:o.map(A=>t.jsxs(Re,{to:`/mediatheque/${A.id}`,className:"media-similaire-item","aria-label":`Voir : ${A.titre}`,children:[t.jsx("div",{className:"media-similaire-item__vignette",children:A.thumbnailUrl?t.jsx("img",{src:A.thumbnailUrl,alt:A.titre,loading:"lazy"}):t.jsx("span",{className:"media-similaire-item__vignette-emoji",children:ya[A.type].emoji})}),t.jsxs("div",{className:"media-similaire-item__infos",children:[t.jsx("p",{className:"media-similaire-item__titre",children:A.titre}),t.jsxs("div",{className:"media-similaire-item__meta",children:[t.jsx("span",{children:ya[A.type].label}),t.jsx("span",{children:""}),t.jsx("span",{children:wf(A.duree)}),A.isPremium&&t.jsx("span",{children:" "})]})]})]},A.id))})]}),t.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"0.875rem",fontSize:"0.8rem",color:"#166534"},children:[t.jsx("strong",{children:" Connexion lente ?"}),t.jsx("br",{}),"Le lecteur s'adapte automatiquement  votre dbit. En cas de problme, rechargez la page ou essayez en Wi-Fi."]})]})]})]})}const Cte={video:"video/mp4",audio:"audio/mpeg",podcast:"audio/mpeg",webinaire:"video/mp4"};function Ete(){const{currentUser:e}=Ke(),r=Ze(),{matieres:n}=na(),[a,l]=g.useState(!1),[o,u]=g.useState(null),[d,m]=g.useState(0),[p,h]=g.useState({titre:"",description:"",type:"video",url:"",urlBasse:"",thumbnailUrl:"",duree:0,taille:0,mimeType:"video/mp4",discipline:"",classe:"",niveau:"",tags:"",isPremium:!1,statut:"brouillon"}),[v,b]=g.useState(null),[x,j]=g.useState(null),_=w=>{const{name:E,value:S,type:A}=w.target;h(z=>({...z,[E]:A==="checkbox"?w.target.checked:S}))},C=async w=>{if(w.preventDefault(),!!e){l(!0),u(null);try{const E=p.discipline?p.discipline.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"_"):"general",S=p.tags?p.tags.split(/[,;]/).map(D=>D.trim()).filter(Boolean):[],A={titre:p.titre.trim(),description:p.description.trim(),type:p.type,url:p.url.trim(),urlBasse:p.urlBasse?.trim()||"",thumbnailUrl:p.thumbnailUrl?.trim()||"",duree:Number(p.duree)||0,taille:p.taille||0,mimeType:p.mimeType||Cte[p.type],discipline:p.discipline||"Non spcifi",disciplineId:E,classe:p.classe||"",niveau:p.niveau||"",tags:S,isPremium:p.isPremium,statut:p.statut};if(!A.titre)throw new Error("Le titre est obligatoire.");if(!p.url.trim()&&!v)throw new Error("Indiquez une URL ou slectionnez un fichier.");const z=v?"upload://pending":p.url.trim(),k={...A,url:z};let M=await dte(k,e.uid,e.displayName||e.email||"Auteur");if(v){m(10);const D=await hte(v,M,p.type,E,$=>m(10+Math.round($*.7)));await Fc(M,{url:D,mimeType:v.type}),A.taille===0&&await Fc(M,{taille:v.size})}if(x){m(85);const D=await TM(x,M);await Fc(M,{thumbnailUrl:D})}m(100),r(`/mediatheque/${M}`)}catch(E){console.error("[MediaAjout] Erreur:",E),u(E instanceof Error?E.message:"Erreur lors de l'enregistrement.")}finally{l(!1),m(0)}}};return t.jsxs("div",{className:"media-detail-page",children:[t.jsxs("header",{className:"media-detail-header",children:[t.jsx("button",{className:"media-detail-retour",onClick:()=>r("/mediatheque"),type:"button",children:" Mdiathque"}),t.jsx("span",{style:{fontSize:"1rem",fontWeight:700},children:" Ajouter un contenu"})]}),t.jsxs("div",{className:"media-form",style:{maxWidth:700,margin:"2rem auto"},children:[t.jsx("h1",{className:"media-form__titre",children:"Nouveau mdia"}),t.jsxs("form",{onSubmit:C,children:[o&&t.jsx("div",{style:{background:"#fef2f2",color:"#b91c1c",padding:"0.75rem",borderRadius:8,marginBottom:"1rem"},children:o}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsxs("label",{className:"media-form__label",children:["Type ",t.jsx("span",{children:"*"})]}),t.jsx("select",{name:"type",value:p.type,onChange:_,className:"media-form__select",required:!0,children:Object.entries(ya).map(([w,E])=>t.jsxs("option",{value:w,children:[E.emoji," ",E.label]},w))})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsxs("label",{className:"media-form__label",children:["Titre ",t.jsx("span",{children:"*"})]}),t.jsx("input",{name:"titre",value:p.titre,onChange:_,className:"media-form__input",placeholder:"Ex: Introduction aux fonctions affines",required:!0})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Description"}),t.jsx("textarea",{name:"description",value:p.description,onChange:_,className:"media-form__textarea",placeholder:"Description courte du contenu",rows:3})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"URL du fichier (vido/audio)"}),t.jsx("input",{name:"url",type:"url",value:p.url,onChange:_,className:"media-form__input",placeholder:"https://exemple.com/video.mp4",disabled:!!v}),t.jsx("p",{className:"media-form__upload-texte",style:{marginTop:"0.5rem"},children:"Ou utilisez l'upload ci-dessous pour un fichier local."})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Fichier mdia (optionnel)"}),t.jsxs("div",{className:`media-form__upload-zone ${v?"media-form__upload-zone--active":""}`,onClick:()=>document.getElementById("fichier-media")?.click(),children:[t.jsx("input",{id:"fichier-media",type:"file",accept:ya[p.type].accept,onChange:w=>{const E=w.target.files?.[0];b(E||null),E&&h(S=>({...S,url:E.name}))},style:{display:"none"}}),t.jsx("span",{className:"media-form__upload-icone",children:""}),t.jsx("p",{className:"media-form__upload-texte",children:v?t.jsx("strong",{children:v.name}):"Cliquez pour slectionner un fichier"})]})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Vignette (optionnel)"}),t.jsxs("div",{className:`media-form__upload-zone ${x?"media-form__upload-zone--active":""}`,onClick:()=>document.getElementById("fichier-thumb")?.click(),children:[t.jsx("input",{id:"fichier-thumb",type:"file",accept:"image/*",onChange:w=>j(w.target.files?.[0]||null),style:{display:"none"}}),t.jsx("span",{className:"media-form__upload-icone",children:""}),t.jsx("p",{className:"media-form__upload-texte",children:x?t.jsx("strong",{children:x.name}):"Cliquez pour une vignette"})]})]}),t.jsxs("div",{className:"media-form__grille-2",children:[t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Dure (secondes)"}),t.jsx("input",{name:"duree",type:"number",value:p.duree||"",onChange:_,className:"media-form__input",placeholder:"Ex: 600",min:0})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Discipline"}),t.jsxs("select",{name:"discipline",value:p.discipline,onChange:_,className:"media-form__select",children:[t.jsx("option",{value:"",children:"Toutes"}),n.map(w=>t.jsx("option",{value:w.valeur,children:w.label},w.valeur))]})]})]}),t.jsxs("div",{className:"media-form__grille-2",children:[t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Niveau"}),t.jsxs("select",{name:"niveau",value:p.niveau,onChange:_,className:"media-form__select",children:[t.jsx("option",{value:"",children:"Tous"}),hr.map(w=>t.jsx("option",{value:w,children:w},w))]})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Classe"}),t.jsx("input",{name:"classe",value:p.classe,onChange:_,className:"media-form__input",placeholder:"Ex: 3me / 2nde"})]})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Tags (spars par virgule)"}),t.jsx("input",{name:"tags",value:p.tags,onChange:_,className:"media-form__input",placeholder:"fonctions affines, algbre, BFEM"})]}),t.jsxs("div",{className:"media-form__grille-2",children:[t.jsx("div",{className:"media-form__groupe",children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{name:"isPremium",type:"checkbox",checked:p.isPremium,onChange:_}),"Contenu Premium (aperu 30s)"]})}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Statut"}),t.jsxs("select",{name:"statut",value:p.statut,onChange:_,className:"media-form__select",children:[t.jsx("option",{value:"publie",children:"Publi"}),t.jsx("option",{value:"brouillon",children:"Brouillon"}),t.jsx("option",{value:"planifiee",children:"Planifi"}),t.jsx("option",{value:"archive",children:"Archiv"})]})]})]}),d>0&&d<100&&t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("div",{className:"media-form__progress",children:t.jsx("div",{className:"media-form__progress-bar",style:{width:`${d}%`}})}),t.jsxs("p",{className:"media-form__progress-texte",children:["Upload en cours ",d,"%"]})]}),t.jsxs("div",{className:"media-form__actions",children:[t.jsx("button",{type:"button",className:"btn-secondaire",onClick:()=>r("/mediatheque"),children:"Annuler"}),t.jsx("button",{type:"submit",className:"btn-principal",disabled:a||!p.url.trim()&&!v,children:a?"Enregistrement":"Enregistrer"})]})]})]})]})}const hA={video:"video/mp4",audio:"audio/mpeg",podcast:"audio/mpeg",webinaire:"video/mp4"};function Ate(){const{mediaId:e}=yn(),{currentUser:r}=Ke(),n=Ze(),{matieres:a}=na(),[l,o]=g.useState(!0),[u,d]=g.useState(!1),[m,p]=g.useState(null),[h,v]=g.useState(0),[b,x]=g.useState({titre:"",description:"",type:"video",url:"",urlBasse:"",thumbnailUrl:"",duree:0,taille:0,mimeType:"video/mp4",discipline:"",classe:"",niveau:"",tags:"",isPremium:!1,statut:"brouillon"}),[j,_]=g.useState(null);g.useEffect(()=>{if(!e)return;let E=!1;async function S(){try{const A=await MM(e);if(E||!A){p(A?null:"Contenu introuvable.");return}x({titre:A.titre||"",description:A.description||"",type:A.type||"video",url:A.url||"",urlBasse:A.urlBasse||"",thumbnailUrl:A.thumbnailUrl||"",duree:A.duree||0,taille:A.taille||0,mimeType:A.mimeType||hA[A.type||"video"],discipline:A.discipline||"",classe:A.classe||"",niveau:A.niveau||"",tags:(A.tags||[]).join(", "),isPremium:A.isPremium??!1,statut:A.statut||"brouillon"})}catch{E||p("Erreur lors du chargement.")}finally{E||o(!1)}}return S(),()=>{E=!0}},[e]);const C=E=>{const{name:S,value:A,type:z}=E.target;x(k=>({...k,[S]:z==="checkbox"?E.target.checked:A}))},w=async E=>{if(E.preventDefault(),!(!r||!e)){d(!0),p(null);try{const S=b.discipline?b.discipline.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"_"):"general",A=b.tags?b.tags.split(/[,;]/).map(z=>z.trim()).filter(Boolean):[];if(await Fc(e,{titre:b.titre.trim(),description:b.description.trim(),type:b.type,url:b.url.trim(),urlBasse:b.urlBasse?.trim()||"",duree:Number(b.duree)||0,taille:b.taille||0,mimeType:b.mimeType||hA[b.type],discipline:b.discipline||"Non spcifi",disciplineId:S,classe:b.classe||"",niveau:b.niveau||"",tags:A,isPremium:b.isPremium,statut:b.statut}),j){v(50);const z=await TM(j,e);await Fc(e,{thumbnailUrl:z})}v(100),n(`/mediatheque/${e}`)}catch(S){console.error("[MediaEdit] Erreur:",S),p(S instanceof Error?S.message:"Erreur lors de l'enregistrement.")}finally{d(!1),v(0)}}};return l?t.jsx("div",{className:"media-detail-page",children:t.jsxs("div",{className:"mediatheque-chargement",style:{padding:"4rem 2rem"},children:[t.jsx("div",{className:"mediatheque-spinner"}),t.jsx("p",{children:"Chargement"})]})}):t.jsxs("div",{className:"media-detail-page",children:[t.jsxs("header",{className:"media-detail-header",children:[t.jsx("button",{className:"media-detail-retour",onClick:()=>n("/mediatheque"),type:"button",children:" Mdiathque"}),t.jsx("span",{style:{fontSize:"1rem",fontWeight:700},children:" Modifier le contenu"})]}),t.jsxs("div",{className:"media-form",style:{maxWidth:700,margin:"2rem auto"},children:[t.jsx("h1",{className:"media-form__titre",children:"Modifier le mdia"}),t.jsxs("form",{onSubmit:w,children:[m&&t.jsx("div",{style:{background:"#fef2f2",color:"#b91c1c",padding:"0.75rem",borderRadius:8,marginBottom:"1rem"},children:m}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Type"}),t.jsx("select",{name:"type",value:b.type,onChange:C,className:"media-form__select",children:Object.entries(ya).map(([E,S])=>t.jsxs("option",{value:E,children:[S.emoji," ",S.label]},E))})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsxs("label",{className:"media-form__label",children:["Titre ",t.jsx("span",{children:"*"})]}),t.jsx("input",{name:"titre",value:b.titre,onChange:C,className:"media-form__input",required:!0})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Description"}),t.jsx("textarea",{name:"description",value:b.description,onChange:C,className:"media-form__textarea",rows:3})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"URL du fichier (vido/audio)"}),t.jsx("input",{name:"url",type:"url",value:b.url,onChange:C,className:"media-form__input"})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Vignette"}),t.jsxs("div",{className:`media-form__upload-zone ${j?"media-form__upload-zone--active":""}`,onClick:()=>document.getElementById("fichier-thumb-edit")?.click(),children:[t.jsx("input",{id:"fichier-thumb-edit",type:"file",accept:"image/*",onChange:E=>_(E.target.files?.[0]||null),style:{display:"none"}}),t.jsx("span",{className:"media-form__upload-icone",children:""}),t.jsx("p",{className:"media-form__upload-texte",children:j?t.jsx("strong",{children:j.name}):b.thumbnailUrl?"Remplacer la vignette":"Ajouter une vignette"})]})]}),t.jsxs("div",{className:"media-form__grille-2",children:[t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Dure (secondes)"}),t.jsx("input",{name:"duree",type:"number",value:b.duree||"",onChange:C,className:"media-form__input",min:0})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Discipline"}),t.jsxs("select",{name:"discipline",value:b.discipline,onChange:C,className:"media-form__select",children:[t.jsx("option",{value:"",children:"Toutes"}),a.map(E=>t.jsx("option",{value:E.valeur,children:E.label},E.valeur))]})]})]}),t.jsxs("div",{className:"media-form__grille-2",children:[t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Niveau"}),t.jsxs("select",{name:"niveau",value:b.niveau,onChange:C,className:"media-form__select",children:[t.jsx("option",{value:"",children:"Tous"}),hr.map(E=>t.jsx("option",{value:E,children:E},E))]})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Classe"}),t.jsx("input",{name:"classe",value:b.classe,onChange:C,className:"media-form__input",placeholder:"Ex: 3me"})]})]}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Tags (spars par virgule)"}),t.jsx("input",{name:"tags",value:b.tags,onChange:C,className:"media-form__input"})]}),t.jsxs("div",{className:"media-form__grille-2",children:[t.jsx("div",{className:"media-form__groupe",children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{name:"isPremium",type:"checkbox",checked:b.isPremium,onChange:C}),"Contenu Premium (aperu 30s)"]})}),t.jsxs("div",{className:"media-form__groupe",children:[t.jsx("label",{className:"media-form__label",children:"Statut"}),t.jsx("select",{name:"statut",value:b.statut,onChange:C,className:"media-form__select",children:Object.entries(Sf).map(([E,S])=>t.jsx("option",{value:E,children:S.label},E))})]})]}),h>0&&h<100&&t.jsx("div",{className:"media-form__groupe",children:t.jsx("div",{className:"media-form__progress",children:t.jsx("div",{className:"media-form__progress-bar",style:{width:`${h}%`}})})}),t.jsxs("div",{className:"media-form__actions",children:[t.jsx("button",{type:"button",className:"btn-secondaire",onClick:()=>n("/mediatheque"),children:"Annuler"}),t.jsx("button",{type:"submit",className:"btn-principal",disabled:u,children:u?"Enregistrement":"Enregistrer"})]})]})]})]})}function zte(e){return e.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}const kte=({notif:e,onLire:r,onArchiver:n,onSupprimer:a,onNavigate:l})=>{const o=jm[e.type],u=e.statut==="non_lue";return t.jsxs("article",{className:`notif-page__item ${u?"notif-page__item--unread":""}`,"aria-label":`Notification : ${e.titre}`,children:[t.jsx("div",{className:"notif-page__item-icon",style:{background:o.couleur+"20",color:o.couleur},"aria-hidden":"true",children:o.icone}),t.jsxs("div",{className:"notif-page__item-body",children:[t.jsxs("div",{className:"notif-page__item-header",children:[t.jsx("h3",{className:"notif-page__item-titre",children:e.titre}),u&&t.jsx("span",{className:"notif-page__item-badge",children:"Nouvelle"})]}),t.jsx("p",{className:"notif-page__item-message",children:e.message}),t.jsxs("div",{className:"notif-page__item-meta",children:[e.emetteurNom&&t.jsxs("span",{className:"notif-page__item-emetteur",children:["De : ",e.emetteurNom]}),t.jsx("span",{className:"notif-page__item-date",children:zte(e.createdAt)}),t.jsx("span",{className:"notif-page__item-type",style:{color:o.couleur},children:Yb[e.type]})]}),e.lienAction&&t.jsx("button",{className:"notif-page__item-action-btn",onClick:()=>l(e),children:e.labelAction||"Voir "})]}),t.jsxs("div",{className:"notif-page__item-actions",children:[u&&t.jsx("button",{className:"notif-page__action-btn notif-page__action-btn--read",onClick:()=>r(e.id),title:"Marquer comme lu","aria-label":"Marquer comme lu",children:""}),e.statut!=="archivee"&&t.jsx("button",{className:"notif-page__action-btn notif-page__action-btn--archive",onClick:()=>n(e.id),title:"Archiver","aria-label":"Archiver la notification",children:""}),t.jsx("button",{className:"notif-page__action-btn notif-page__action-btn--delete",onClick:()=>a(e.id),title:"Supprimer","aria-label":"Supprimer la notification",children:""})]})]})},Ote=()=>{const{currentUser:e}=Ke(),r=Ze(),[n,a]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null),[m,p]=g.useState("toutes"),[h,v]=g.useState("tous"),[b,x]=g.useState(!1),j=g.useCallback(async()=>{if(e){o(!0),d(null);try{const k=await s5(e.uid,{includeArchived:m==="archivee",limitCount:100});a(k)}catch(k){d("Impossible de charger les notifications."),console.error("[Phase 26] Erreur chargement notifications:",k)}finally{o(!1)}}},[e,m]);g.useEffect(()=>{j()},[j]);const _=n.filter(k=>{const M=m==="toutes"||k.statut===m,D=h==="tous"||k.type===h;return M&&D}),C=n.filter(k=>k.statut==="non_lue").length,w=async k=>{await Mx(k),a(M=>M.map(D=>D.id===k?{...D,statut:"lue",luAt:new Date}:D))},E=async k=>{await o5(k),a(M=>M.map(D=>D.id===k?{...D,statut:"archivee"}:D))},S=async k=>{window.confirm("Supprimer cette notification ?")&&(await c5(k),a(M=>M.filter(D=>D.id!==k)))},A=async k=>{k.statut==="non_lue"&&await Mx(k.id),k.lienAction&&r(k.lienAction)},z=async()=>{if(!(!e||b)){x(!0);try{await EA(e.uid),a(k=>k.map(M=>M.statut==="non_lue"?{...M,statut:"lue",luAt:new Date}:M))}finally{x(!1)}}};return t.jsxs("div",{className:"notif-page",children:[t.jsxs("div",{className:"notif-page__header",children:[t.jsxs("div",{className:"notif-page__header-left",children:[t.jsx("h1",{className:"notif-page__title",children:" Notifications"}),C>0&&t.jsxs("span",{className:"notif-page__unread-count",children:[C," non ",C>1?"lues":"lue"]})]}),C>0&&t.jsx("button",{className:"notif-page__mark-all-btn",onClick:z,disabled:b,children:b?"En cours":" Tout marquer comme lu"})]}),t.jsxs("div",{className:"notif-page__filters",children:[t.jsxs("div",{className:"notif-page__filter-group",children:[t.jsx("label",{className:"notif-page__filter-label",children:"Statut"}),t.jsx("div",{className:"notif-page__filter-tabs",children:["toutes","non_lue","lue","archivee"].map(k=>t.jsx("button",{className:`notif-page__filter-tab ${m===k?"notif-page__filter-tab--active":""}`,onClick:()=>p(k),children:k==="toutes"?"Toutes":k==="non_lue"?" Non lues":k==="lue"?" Lues":" Archives"},k))})]}),t.jsxs("div",{className:"notif-page__filter-group",children:[t.jsx("label",{className:"notif-page__filter-label",children:"Type"}),t.jsxs("select",{className:"notif-page__filter-select",value:h,onChange:k=>v(k.target.value),children:[t.jsx("option",{value:"tous",children:"Tous les types"}),Object.entries(Yb).map(([k,M])=>t.jsx("option",{value:k,children:M},k))]})]})]}),l?t.jsx("div",{className:"notif-page__loading",children:[1,2,3].map(k=>t.jsx("div",{className:"notif-page__skeleton"},k))}):u?t.jsxs("div",{className:"notif-page__error",children:[t.jsxs("p",{children:[" ",u]}),t.jsx("button",{onClick:j,className:"notif-page__retry-btn",children:"Ressayer"})]}):_.length===0?t.jsxs("div",{className:"notif-page__empty",children:[t.jsx("span",{className:"notif-page__empty-icon",children:""}),t.jsx("p",{className:"notif-page__empty-title",children:"Aucune notification"}),t.jsx("p",{className:"notif-page__empty-sub",children:m==="non_lue"?"Vous tes  jour, aucune notification non lue.":"Aucune notification correspondant  vos filtres."})]}):t.jsx("div",{className:"notif-page__list",children:_.map(k=>t.jsx(kte,{notif:k,onLire:w,onArchiver:E,onSupprimer:S,onNavigate:A},k.id))})]})},vA={type:"annonce",titre:"",message:"",lienAction:"",labelAction:"",modeDestinataire:"role",destinataireEmail:"",destinataireId:"",groupeId:"",roleDestinataire:"eleve",canal:"les_deux"},gA=()=>{const{currentUser:e}=Ke(),r=Ze(),[n,a]=g.useState(vA),[l,o]=g.useState([]),[u,d]=g.useState("idle"),[m,p]=g.useState(null),[h,v]=g.useState(0);g.useEffect(()=>{if(!e)return;const E=e.role==="admin"?Ee(_e(Q,"groupes_prof")):Ee(_e(Q,"groupes_prof"),Se("profId","==",e.uid));Ce(E).then(S=>{o(S.docs.map(A=>({id:A.id,nom:A.data().nom,classe:A.data().classe,nombreInscrits:A.data().nombreInscrits??0})))})},[e]);const b=(w,E)=>{a(S=>({...S,[w]:E}))},x=w=>{const E=jm[w];a(S=>({...S,type:w,titre:E.titreDefaut,message:E.messageDefaut}))},j=()=>!(!n.titre.trim()||!n.message.trim()||n.modeDestinataire==="individuel"&&!n.destinataireEmail.trim()||n.modeDestinataire==="groupe"&&!n.groupeId),_=async()=>{if(!(!e||!j())){d("sending"),p(null);try{const w={type:n.type,titre:n.titre,message:n.message,lienAction:n.lienAction||void 0,labelAction:n.labelAction||void 0,emetteurId:e.uid,emetteurNom:e.displayName||e.email||"PedaClic",canal:n.canal};if(n.modeDestinataire==="individuel")await n5({...w,destinataireId:n.destinataireId||n.destinataireEmail,destinataireRole:"eleve",emailDestinataire:n.canal!=="in_app"?n.destinataireEmail:void 0,emailDestinatairNom:n.destinataireEmail}),v(1);else if(n.modeDestinataire==="groupe"){const E=await a5(n.groupeId,{...w,destinataireRole:"eleve"});v(E)}else{const E=await i5(n.roleDestinataire,w);v(E)}d("success")}catch(w){p(w instanceof Error?w.message:"Erreur inconnue"),d("error")}}},C=()=>{a(vA),d("idle"),p(null),v(0)};return u==="success"?t.jsx("div",{className:"notif-composer notif-composer--success",children:t.jsxs("div",{className:"notif-composer__success-card",children:[t.jsx("span",{className:"notif-composer__success-icon",children:""}),t.jsx("h2",{children:"Notification envoye !"}),t.jsxs("p",{children:[t.jsx("strong",{children:h})," destinataire",h>1?"s":""," notifi",h>1?"s":"","."]}),t.jsxs("div",{className:"notif-composer__success-actions",children:[t.jsx("button",{className:"notif-composer__btn notif-composer__btn--primary",onClick:C,children:" Nouvelle notification"}),t.jsx("button",{className:"notif-composer__btn notif-composer__btn--secondary",onClick:()=>r(-1),children:" Retour"})]})]})}):t.jsxs("div",{className:"notif-composer",children:[t.jsxs("div",{className:"notif-composer__header",children:[t.jsx("button",{className:"notif-composer__back-btn",onClick:()=>r(-1),children:" Retour"}),t.jsx("h1",{className:"notif-composer__title",children:" Envoyer une notification"})]}),t.jsxs("div",{className:"notif-composer__form",children:[t.jsxs("section",{className:"notif-composer__section",children:[t.jsx("h2",{className:"notif-composer__section-title",children:"1. Type de notification"}),t.jsx("div",{className:"notif-composer__type-grid",children:Object.entries(Yb).filter(([w])=>!["bienvenue","nouveau_abonnement","resultat_quiz"].includes(w)).map(([w,E])=>{const S=jm[w];return t.jsxs("button",{className:`notif-composer__type-card ${n.type===w?"notif-composer__type-card--active":""}`,onClick:()=>x(w),style:n.type===w?{borderColor:S.couleur,background:S.couleur+"12"}:{},children:[t.jsx("span",{className:"notif-composer__type-icon",children:S.icone}),t.jsx("span",{className:"notif-composer__type-label",children:E})]},w)})})]}),t.jsxs("section",{className:"notif-composer__section",children:[t.jsx("h2",{className:"notif-composer__section-title",children:"2. Destinataires"}),t.jsx("div",{className:"notif-composer__mode-tabs",children:[{value:"role",label:" Par rle"},{value:"groupe",label:" Groupe-classe"},{value:"individuel",label:" Individuel"}].map(({value:w,label:E})=>t.jsx("button",{className:`notif-composer__mode-tab ${n.modeDestinataire===w?"notif-composer__mode-tab--active":""}`,onClick:()=>b("modeDestinataire",w),children:E},w))}),n.modeDestinataire==="role"&&t.jsxs("div",{className:"notif-composer__field",children:[t.jsx("label",{className:"notif-composer__label",children:"Envoyer  :"}),t.jsx("div",{className:"notif-composer__role-grid",children:Object.entries(u5).map(([w,E])=>t.jsx("button",{className:`notif-composer__role-card ${n.roleDestinataire===w?"notif-composer__role-card--active":""}`,onClick:()=>b("roleDestinataire",w),children:E},w))})]}),n.modeDestinataire==="groupe"&&t.jsxs("div",{className:"notif-composer__field",children:[t.jsx("label",{className:"notif-composer__label",children:"Groupe-classe :"}),l.length===0?t.jsx("p",{className:"notif-composer__hint",children:"Aucun groupe-classe disponible."}):t.jsxs("select",{className:"notif-composer__select",value:n.groupeId,onChange:w=>b("groupeId",w.target.value),children:[t.jsx("option",{value:"",children:" Choisir un groupe "}),l.map(w=>t.jsxs("option",{value:w.id,children:[w.nom,"  ",w.classe," (",w.nombreInscrits," lves)"]},w.id))]})]}),n.modeDestinataire==="individuel"&&t.jsxs("div",{className:"notif-composer__field",children:[t.jsx("label",{className:"notif-composer__label",children:"Email du destinataire :"}),t.jsx("input",{type:"email",className:"notif-composer__input",placeholder:"eleve@exemple.sn",value:n.destinataireEmail,onChange:w=>b("destinataireEmail",w.target.value)}),t.jsx("p",{className:"notif-composer__hint",children:"L'utilisateur doit tre inscrit sur PedaClic."})]})]}),t.jsxs("section",{className:"notif-composer__section",children:[t.jsx("h2",{className:"notif-composer__section-title",children:"3. Contenu"}),t.jsxs("div",{className:"notif-composer__field",children:[t.jsxs("label",{className:"notif-composer__label",htmlFor:"notif-titre",children:["Titre ",t.jsx("span",{className:"notif-composer__required",children:"*"})]}),t.jsx("input",{id:"notif-titre",type:"text",className:"notif-composer__input",placeholder:"Ex : Nouveau devoir de mathmatiques",value:n.titre,onChange:w=>b("titre",w.target.value),maxLength:100}),t.jsxs("span",{className:"notif-composer__char-count",children:[n.titre.length,"/100"]})]}),t.jsxs("div",{className:"notif-composer__field",children:[t.jsxs("label",{className:"notif-composer__label",htmlFor:"notif-message",children:["Message ",t.jsx("span",{className:"notif-composer__required",children:"*"})]}),t.jsx("textarea",{id:"notif-message",className:"notif-composer__textarea",placeholder:"Rdigez votre message ici",value:n.message,onChange:w=>b("message",w.target.value),rows:4,maxLength:500}),t.jsxs("span",{className:"notif-composer__char-count",children:[n.message.length,"/500"]})]}),t.jsxs("div",{className:"notif-composer__field-row",children:[t.jsxs("div",{className:"notif-composer__field",children:[t.jsxs("label",{className:"notif-composer__label",htmlFor:"notif-lien",children:["Lien d'action ",t.jsx("span",{className:"notif-composer__optional",children:"(optionnel)"})]}),t.jsx("input",{id:"notif-lien",type:"text",className:"notif-composer__input",placeholder:"/cours/abc123",value:n.lienAction,onChange:w=>b("lienAction",w.target.value)})]}),t.jsxs("div",{className:"notif-composer__field",children:[t.jsxs("label",{className:"notif-composer__label",htmlFor:"notif-label",children:["Texte du bouton ",t.jsx("span",{className:"notif-composer__optional",children:"(optionnel)"})]}),t.jsx("input",{id:"notif-label",type:"text",className:"notif-composer__input",placeholder:"Voir le cours",value:n.labelAction,onChange:w=>b("labelAction",w.target.value)})]})]})]}),t.jsxs("section",{className:"notif-composer__section",children:[t.jsx("h2",{className:"notif-composer__section-title",children:"4. Canal d'envoi"}),t.jsx("div",{className:"notif-composer__canal-grid",children:[{value:"in_app",label:" In-app seulement",desc:"Cloche dans l'interface"},{value:"email",label:" Email seulement",desc:"Via Resend"},{value:"les_deux",label:" In-app + Email",desc:"Les deux canaux"}].map(({value:w,label:E,desc:S})=>t.jsxs("button",{className:`notif-composer__canal-card ${n.canal===w?"notif-composer__canal-card--active":""}`,onClick:()=>b("canal",w),children:[t.jsx("span",{className:"notif-composer__canal-label",children:E}),t.jsx("span",{className:"notif-composer__canal-desc",children:S})]},w))}),(n.canal==="email"||n.canal==="les_deux")&&n.modeDestinataire!=="individuel"&&t.jsx("p",{className:"notif-composer__canal-warning",children:" Pour l'envoi par email en mode groupe/rle, assurez-vous que Railway est bien dploy et que la cl API Resend est configure."})]}),u==="error"&&m&&t.jsxs("div",{className:"notif-composer__error",children:[" ",m]}),t.jsxs("div",{className:"notif-composer__footer",children:[t.jsx("button",{className:"notif-composer__btn notif-composer__btn--secondary",onClick:()=>r(-1),disabled:u==="sending",children:"Annuler"}),t.jsx("button",{className:"notif-composer__btn notif-composer__btn--primary",onClick:_,disabled:!j()||u==="sending",children:u==="sending"?" Envoi en cours":" Envoyer la notification"})]})]})]})},Dte=()=>{const{currentUser:e}=Ke(),r=e?.uid||"",n=e?.displayName||"Parent",[a,l]=g.useState([]),[o,u]=g.useState(null),[d,m]=g.useState(null),[p,h]=g.useState(!0),[v,b]=g.useState(!1),[x,j]=g.useState(null),[_,C]=g.useState(!1),[w,E]=g.useState(""),[S,A]=g.useState(!1),[z,k]=g.useState(null),[M,D]=g.useState(null),[$,B]=g.useState("apercu");g.useEffect(()=>{H()},[r]),g.useEffect(()=>{o&&T(o)},[o]);const H=async()=>{try{h(!0),j(null);const P=await dZ(r);l(P),P.length===1&&u(P[0].enfantId)}catch(P){j("Erreur lors du chargement des enfants."),console.error(P)}finally{h(!1)}},T=async P=>{try{b(!0),j(null);const q=await fZ(r,P);m(q)}catch(q){j(q.message||"Erreur lors du chargement du suivi."),m(null)}finally{b(!1)}},Y=async P=>{if(P.preventDefault(),k(null),D(null),!w.trim()){k("Veuillez saisir le code d'invitation.");return}try{A(!0);const q=await uZ(r,w);D(`${q.enfantNom} a t ajout avec succs !`),E(""),C(!1),await H(),u(q.enfantId)}catch(q){k(q.message||"Erreur lors de la liaison.")}finally{A(!1)}},J=async P=>{if(window.confirm(`tes-vous sr de vouloir retirer ${P.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await mZ(P.id,r),o===P.enfantId&&(u(null),m(null)),await H()}catch(U){j(U.message||"Erreur lors de la suppression.")}};return p?t.jsxs("div",{className:"parent-loading",children:[t.jsx("div",{className:"parent-spinner"}),t.jsx("p",{children:"Chargement de votre espace parent..."})]}):t.jsxs("div",{className:"parent-dashboard",children:[t.jsxs("header",{className:"parent-header",children:[t.jsxs("div",{className:"parent-header-info",children:[t.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),t.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",t.jsx("strong",{children:n}),"  Suivez la progression de vos enfants"]})]}),t.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{C(!_),k(null),D(null)},children:" Ajouter un enfant"})]}),x&&t.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[t.jsxs("span",{children:[" ",x]}),t.jsx("button",{onClick:()=>j(null),children:""})]}),M&&t.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[t.jsxs("span",{children:[" ",M]}),t.jsx("button",{onClick:()=>D(null),children:""})]}),_&&t.jsxs("div",{className:"parent-form-liaison",children:[t.jsx("h3",{children:" Lier un enfant  votre compte"}),t.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),t.jsxs("form",{onSubmit:Y,className:"parent-form",children:[t.jsxs("div",{className:"parent-form-group",children:[t.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),t.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:w,onChange:P=>E(P.target.value.toUpperCase()),maxLength:14,disabled:S,className:"parent-input"})]}),z&&t.jsxs("p",{className:"parent-form-erreur",children:[" ",z]}),t.jsxs("div",{className:"parent-form-actions",children:[t.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:S,children:S?"Vrification...":" Valider"}),t.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>C(!1),children:"Annuler"})]})]})]}),a.length===0?t.jsxs("div",{className:"parent-empty-state",children:[t.jsx("div",{className:"parent-empty-icon",children:""}),t.jsx("h2",{children:"Aucun enfant li"}),t.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),t.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>C(!0),children:" Ajouter mon premier enfant"})]}):t.jsxs("div",{className:"parent-content",children:[t.jsxs("aside",{className:"parent-sidebar",children:[t.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),t.jsx("ul",{className:"parent-enfants-liste",children:a.map(P=>t.jsxs("li",{className:`parent-enfant-card ${o===P.enfantId?"parent-enfant-actif":""}`,onClick:()=>u(P.enfantId),children:[t.jsx("div",{className:"parent-enfant-avatar",children:P.enfantNom.charAt(0).toUpperCase()}),t.jsxs("div",{className:"parent-enfant-info",children:[t.jsx("span",{className:"parent-enfant-nom",children:P.enfantNom}),P.enfantClasse&&t.jsx("span",{className:"parent-enfant-classe",children:P.enfantClasse})]}),t.jsx("button",{className:"parent-enfant-supprimer",onClick:q=>{q.stopPropagation(),J(P)},title:"Retirer cet enfant",children:""})]},P.id))})]}),t.jsx("main",{className:"parent-main",children:o?v?t.jsxs("div",{className:"parent-loading",children:[t.jsx("div",{className:"parent-spinner"}),t.jsx("p",{children:"Chargement du suivi..."})]}):d?t.jsxs("div",{className:"parent-dashboard-detail",children:[t.jsxs("div",{className:"parent-enfant-header",children:[t.jsxs("div",{className:"parent-enfant-header-info",children:[t.jsx("h2",{children:d.enfant.nom}),d.enfant.classe&&t.jsx("span",{className:"parent-badge",children:d.enfant.classe}),d.enfant.derniereConnexion&&t.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",kx(d.enfant.derniereConnexion)]})]}),t.jsx("p",{className:"parent-message-motivation",children:bZ(d.scoreGlobal)})]}),t.jsxs("div",{className:"parent-indicateurs",children:[t.jsxs("div",{className:"parent-card parent-card-score",children:[t.jsx("div",{className:"parent-card-icon",children:""}),t.jsxs("div",{className:"parent-card-content",children:[t.jsx("span",{className:"parent-card-label",children:"Score Global"}),t.jsxs("span",{className:`parent-card-value parent-score-${d.scoreGlobal>=60?"bon":d.scoreGlobal>=40?"moyen":"bas"}`,children:[d.scoreGlobal,"/100"]})]})]}),t.jsxs("div",{className:"parent-card parent-card-streak",children:[t.jsx("div",{className:"parent-card-icon",children:""}),t.jsxs("div",{className:"parent-card-content",children:[t.jsx("span",{className:"parent-card-label",children:"Streak"}),t.jsxs("span",{className:"parent-card-value",children:[d.streak.actuel," jour",d.streak.actuel>1?"s":""]})]})]}),t.jsxs("div",{className:"parent-card parent-card-lacunes",children:[t.jsx("div",{className:"parent-card-icon",children:""}),t.jsxs("div",{className:"parent-card-content",children:[t.jsx("span",{className:"parent-card-label",children:"Lacunes"}),t.jsxs("span",{className:"parent-card-value",children:[d.lacunes.length," matire",d.lacunes.length>1?"s":""]})]})]}),t.jsxs("div",{className:"parent-card parent-card-objectifs",children:[t.jsx("div",{className:"parent-card-icon",children:""}),t.jsxs("div",{className:"parent-card-content",children:[t.jsx("span",{className:"parent-card-label",children:"Objectifs"}),t.jsxs("span",{className:"parent-card-value",children:[d.objectifs.filter(P=>P.statut==="atteint").length,"/",d.objectifs.length]})]})]})]}),t.jsxs("div",{className:"parent-section parent-section-semaine",children:[t.jsx("h3",{children:" Activit de la semaine"}),t.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((P,q)=>t.jsxs("div",{className:`parent-jour ${d.streak.semaineCourante[q]?"parent-jour-actif":"parent-jour-inactif"}`,children:[t.jsx("span",{className:"parent-jour-label",children:P}),t.jsx("span",{className:"parent-jour-icon",children:d.streak.semaineCourante[q]?"":""})]},P))})]}),t.jsxs("div",{className:"parent-onglets",children:[t.jsx("button",{className:`parent-onglet ${$==="apercu"?"parent-onglet-actif":""}`,onClick:()=>B("apercu"),children:" Aperu"}),t.jsxs("button",{className:`parent-onglet ${$==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>B("lacunes"),children:[" Lacunes (",d.lacunes.length,")"]}),t.jsxs("button",{className:`parent-onglet ${$==="alertes"?"parent-onglet-actif":""}`,onClick:()=>B("alertes"),children:[" Alertes (",d.alertes.length,")"]}),t.jsx("button",{className:`parent-onglet ${$==="resume"?"parent-onglet-actif":""}`,onClick:()=>B("resume"),children:" Rsum"})]}),t.jsxs("div",{className:"parent-onglet-contenu",children:[$==="apercu"&&t.jsxs("div",{className:"parent-tab-apercu",children:[t.jsxs("div",{className:"parent-section",children:[t.jsx("h3",{children:" Derniers quiz passs"}),d.derniersQuiz.length===0?t.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):t.jsx("div",{className:"parent-quiz-liste",children:d.derniersQuiz.map((P,q)=>t.jsxs("div",{className:`parent-quiz-item ${P.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[t.jsxs("div",{className:"parent-quiz-info",children:[t.jsx("span",{className:"parent-quiz-discipline",children:P.disciplineNom}),t.jsx("span",{className:"parent-quiz-titre",children:P.quizTitre})]}),t.jsxs("div",{className:"parent-quiz-score",children:[t.jsxs("span",{className:`parent-quiz-note ${P.reussi?"note-ok":"note-ko"}`,children:[P.noteSur20,"/20"]}),t.jsx("span",{className:"parent-quiz-statut",children:P.reussi?" Russi":" chou"})]}),t.jsx("span",{className:"parent-quiz-date",children:kx(P.datePassage)})]},q))})]}),t.jsxs("div",{className:"parent-section",children:[t.jsx("h3",{children:" Objectifs de la semaine"}),d.objectifs.length===0?t.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):t.jsx("div",{className:"parent-objectifs-liste",children:d.objectifs.map((P,q)=>t.jsxs("div",{className:"parent-objectif-item",children:[t.jsxs("div",{className:"parent-objectif-header",children:[t.jsx("span",{className:"parent-objectif-titre",children:P.titre}),t.jsx("span",{className:`parent-objectif-statut parent-statut-${P.statut}`,children:P.statut==="atteint"?" Atteint":P.statut==="en_cours"?" En cours":P.statut==="echoue"?" chou":" Non commenc"})]}),t.jsx("div",{className:"parent-progress-bar",children:t.jsx("div",{className:`parent-progress-fill parent-progress-${P.statut}`,style:{width:`${Math.min(P.progression/P.cible*100,100)}%`}})}),t.jsxs("span",{className:"parent-objectif-detail",children:[P.progression,"/",P.cible]})]},q))})]})]}),$==="lacunes"&&t.jsx("div",{className:"parent-tab-lacunes",children:d.lacunes.length===0?t.jsxs("div",{className:"parent-vide-section",children:[t.jsx("span",{className:"parent-vide-icon",children:""}),t.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):t.jsx("div",{className:"parent-lacunes-liste",children:d.lacunes.map((P,q)=>t.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:bf(P.niveauUrgence)},children:[t.jsxs("div",{className:"parent-lacune-header",children:[t.jsx("span",{className:"parent-lacune-discipline",children:P.disciplineNom}),t.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:bf(P.niveauUrgence),color:"#fff"},children:cM(P.niveauUrgence)})]}),t.jsxs("div",{className:"parent-lacune-details",children:[t.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",t.jsxs("strong",{children:[P.moyenne,"/20"]})]}),t.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",uM(P.tendance)," ",P.tendance==="hausse"?"En hausse":P.tendance==="baisse"?"En baisse":"Stable"]})]}),t.jsx("p",{className:"parent-lacune-conseil",children:P.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":P.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},q))})}),$==="alertes"&&t.jsx("div",{className:"parent-tab-alertes",children:d.alertes.length===0?t.jsxs("div",{className:"parent-vide-section",children:[t.jsx("span",{className:"parent-vide-icon",children:""}),t.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):t.jsx("div",{className:"parent-alertes-liste",children:d.alertes.map((P,q)=>t.jsxs("div",{className:`parent-alerte-item parent-alerte-${P.niveau}`,children:[t.jsxs("div",{className:"parent-alerte-header",children:[t.jsx("span",{className:"parent-alerte-titre",children:P.titre}),t.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:gZ(P.niveau),color:"#fff"},children:xZ(P.type)})]}),t.jsx("p",{className:"parent-alerte-message",children:P.message}),t.jsx("span",{className:"parent-alerte-date",children:kx(P.dateCreation)})]},q))})}),$==="resume"&&d.resume&&t.jsxs("div",{className:"parent-tab-resume",children:[t.jsxs("div",{className:"parent-resume-header",children:[t.jsxs("h3",{children:[" Rsum : ",d.resume.semaine]}),t.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",d.resume.scoreGlobal,"/100"," ",WE(d.resume.evolutionScore)]})]}),t.jsxs("div",{className:"parent-resume-stats",children:[t.jsxs("div",{className:"parent-resume-stat",children:[t.jsx("span",{className:"parent-resume-stat-value",children:d.resume.nombreQuizSemaine}),t.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),t.jsxs("div",{className:"parent-resume-stat",children:[t.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.joursActifsSemaine,"/7"]}),t.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),t.jsxs("div",{className:"parent-resume-stat",children:[t.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.tempsEstimeMinutes," min"]}),t.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),t.jsxs("div",{className:"parent-resume-stat",children:[t.jsxs("span",{className:"parent-resume-stat-value",children:[d.resume.objectifsAtteints,"/",d.resume.objectifsTotal]}),t.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),d.resume.evolutionDisciplines.length>0&&t.jsxs("div",{className:"parent-section",children:[t.jsx("h4",{children:" volution par matire"}),t.jsx("div",{className:"parent-evolution-liste",children:d.resume.evolutionDisciplines.map((P,q)=>t.jsxs("div",{className:"parent-evolution-item",children:[t.jsx("span",{className:"parent-evolution-discipline",children:P.disciplineNom}),t.jsxs("div",{className:"parent-evolution-scores",children:[t.jsxs("span",{className:"parent-evolution-prec",children:[P.moyenneSemainePrecedente,"/20"]}),t.jsx("span",{className:"parent-evolution-fleche",children:WE(P.evolution)}),t.jsxs("span",{className:"parent-evolution-courante",children:[P.moyenneSemaineCourante,"/20"]}),t.jsxs("span",{className:`parent-evolution-ecart ${P.ecart>0?"ecart-positif":P.ecart<0?"ecart-negatif":""}`,children:["(",P.ecart>0?"+":"",P.ecart,")"]})]})]},q))})]}),d.resume.disciplinesEnDifficulte.length>0&&t.jsxs("div",{className:"parent-section parent-section-warning",children:[t.jsx("h4",{children:" Matires ncessitant une attention"}),t.jsx("ul",{className:"parent-disciplines-difficulte",children:d.resume.disciplinesEnDifficulte.map((P,q)=>t.jsx("li",{children:P},q))})]})]}),$==="resume"&&!d.resume&&t.jsxs("div",{className:"parent-vide-section",children:[t.jsx("span",{className:"parent-vide-icon",children:""}),t.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):t.jsxs("div",{className:"parent-erreur-dashboard",children:[t.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),t.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>o&&T(o),children:" Ressayer"})]}):t.jsx("div",{className:"parent-select-enfant",children:t.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},Pj="compiled_ebooks";async function Pte(e,r,n,a){return(await Dt(_e(Q,Pj),{userId:e,titre:r,description:n,sections:a,createdAt:Ae.now()})).id}async function xA(e,r=30){const n=Ee(_e(Q,Pj),Se("userId","==",e),Ve("createdAt","desc")),a=await Ce(n),l=[];return a.forEach(o=>{l.length<r&&l.push({id:o.id,...o.data()})}),l}async function Mte(e){await Gr(je(Q,Pj,e))}const Tte=({userId:e,subscriptionPlan:r,history:n,onClose:a,onSaved:l,markdownToHtml:o})=>{const[u,d]=g.useState("select"),[m,p]=g.useState([]),[h,v]=g.useState(""),[b,x]=g.useState(""),[j,_]=g.useState(!1),[C,w]=g.useState(!1),[E,S]=g.useState(""),A=n.filter(T=>T.type!=="quiz_auto"&&T.content);function z(T){p(Y=>Y.some(P=>P.id===T.id)?Y.filter(P=>P.id!==T.id):[...Y,T])}function k(T){T!==0&&p(Y=>{const J=[...Y];return[J[T-1],J[T]]=[J[T],J[T-1]],J})}function M(T){p(Y=>{if(T===Y.length-1)return Y;const J=[...Y];return[J[T],J[T+1]]=[J[T+1],J[T]],J})}const D=g.useCallback((T=!1)=>{const Y=m.map((J,P)=>`
      <section class="ebook-section">
        <div class="section-header">
          <span class="section-num">${P+1}</span>
          <div class="section-meta">
            <h2 class="section-title">${J.chapitre}</h2>
            <p class="section-subtitle">
              ${fr[J.type]} &nbsp;&nbsp;
              ${J.discipline} &nbsp;&nbsp; Classe : ${J.classe}
            </p>
          </div>
        </div>
        <div class="section-body">${o(J.content||"")}</div>
      </section>`).join('<div class="page-break"></div>');return`<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>${h||"Ebook PedaClic"}</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Georgia', serif;
      font-size: 12pt;
      line-height: 1.75;
      color: #1a1a2e;
      background: #fff;
      padding: ${T?"0":"2rem"};
      max-width: 860px;
      margin: auto;
    }
    /*  Couverture  */
    .cover {
      min-height: ${T?"100vh":"280px"};
      background: linear-gradient(135deg, #1a56db 0%, #7c3aed 100%);
      border-radius: ${T?"0":"12px"};
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 3rem 2rem;
      color: #fff;
      margin-bottom: 2.5rem;
    }
    .cover-logo { font-size: 3rem; margin-bottom: 1rem; }
    .cover-title { font-size: 2rem; font-weight: 700; line-height: 1.2; margin-bottom: 0.75rem; }
    .cover-desc { font-size: 1rem; opacity: 0.85; max-width: 480px; }
    .cover-meta { margin-top: 1.5rem; font-size: 0.85rem; opacity: 0.7; }
    /*  Sommaire  */
    .toc {
      background: #f8faff;
      border: 1px solid #dbeafe;
      border-radius: 10px;
      padding: 1.5rem 2rem;
      margin-bottom: 2.5rem;
    }
    .toc h2 { font-size: 1.1rem; color: #1a56db; margin-bottom: 1rem; }
    .toc ol { padding-left: 1.25rem; }
    .toc li { padding: 0.3rem 0; font-size: 0.95rem; color: #374151; }
    .toc li span { color: #6b7280; font-size: 0.85rem; margin-left: 0.5rem; }
    /*  Sections  */
    .ebook-section { margin-bottom: 2.5rem; }
    .section-header {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
      background: #eff6ff;
      border-left: 4px solid #1a56db;
      padding: 1rem 1.25rem;
      border-radius: 0 8px 8px 0;
      margin-bottom: 1.25rem;
    }
    .section-num {
      background: #1a56db;
      color: #fff;
      width: 32px; height: 32px;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; font-size: 0.9rem;
      flex-shrink: 0;
    }
    .section-title { font-size: 1.3rem; font-weight: 700; color: #1e3a8a; }
    .section-subtitle { font-size: 0.82rem; color: #6b7280; margin-top: 2px; }
    .section-body { padding: 0 0.5rem; }
    .section-body h1, .section-body h2 { color: #1a56db; margin: 1rem 0 0.5rem; }
    .section-body h3 { color: #4f46e5; margin: 0.75rem 0 0.4rem; }
    .section-body p { margin-bottom: 0.6rem; }
    .section-body ul, .section-body ol { margin: 0.4rem 0 0.8rem 1.5rem; }
    .section-body li { margin-bottom: 0.3rem; }
    .section-body strong { font-weight: 700; color: #111827; }
    .section-body em { font-style: italic; color: #374151; }
    .section-body code {
      font-family: 'Courier New', monospace;
      background: #f3f4f6;
      padding: 1px 5px;
      border-radius: 3px;
      font-size: 0.9em;
    }
    .section-body pre {
      background: #f3f4f6;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      overflow-x: auto;
      margin: 0.8rem 0;
    }
    .section-body hr { border: none; border-top: 1px solid #e5e7eb; margin: 1rem 0; }
    /*  Sauts de page  */
    .page-break { page-break-after: always; break-after: page; height: 0; }
    /*  Pied de page  */
    .ebook-footer {
      margin-top: 3rem;
      text-align: center;
      font-size: 0.8rem;
      color: #9ca3af;
      border-top: 1px solid #e5e7eb;
      padding-top: 1rem;
    }
    @media print {
      body { padding: 0; max-width: none; }
      .cover { border-radius: 0; }
      @page { margin: 2cm; }
    }
  </style>
</head>
<body>
  <div class="cover">
    <div class="cover-logo"></div>
    <h1 class="cover-title">${h||"Ebook PedaClic"}</h1>
    ${b?`<p class="cover-desc">${b}</p>`:""}
    <p class="cover-meta">
      Gnr par PedaClic &nbsp;&nbsp;
      ${new Date().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}
    </p>
  </div>

  <div class="toc">
    <h2> Table des matires</h2>
    <ol>
      ${m.map(J=>`<li>${J.chapitre} <span> ${J.discipline}  ${J.classe}</span></li>`).join("")}
    </ol>
  </div>

  ${Y}

  <div class="ebook-footer">
    PedaClic  L'cole en un clic &nbsp;&nbsp; www.pedaclic.sn
  </div>

  ${T?"<script>window.onload = () => window.print();<\/script>":""}
</body>
</html>`},[m,h,b,o]);function $(){const T=window.open("","_blank","width=920,height=720");T&&(T.document.write(D(!0)),T.document.close())}function B(){const T=D(!1),Y=`
<html xmlns:o="urn:schemas-microsoft-com:office:office"
      xmlns:w="urn:schemas-microsoft-com:office:word"
      xmlns="http://www.w3.org/TR/REC-html40">
<head><meta charset="utf-8"><title>${h}</title></head>
<body>${T}</body></html>`,J=new Blob(["\uFEFF",Y],{type:"application/msword;charset=utf-8"}),P=URL.createObjectURL(J),q=document.createElement("a");q.href=P;const U=(h||"ebook_pedaclic").replace(/[^\w\u00C0-\u017E\s-]/g,"").replace(/\s+/g,"_").slice(0,60);q.download=`${U}.doc`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(P)}async function H(){if(!h.trim()){S("Veuillez donner un titre  l'ebook.");return}const{autorise:T,usage:Y,limite:J}=await Nf(e,r);if(!T&&J!==null){S(`Limite de ${J} ressources atteinte (${Y}/${J}). Passez  Premium Pro pour un accs illimit.`);return}_(!0),S("");try{const P=m.map(q=>({contenuId:q.id,type:q.type,discipline:q.discipline,classe:q.classe,chapitre:q.chapitre,content:q.content}));await Pte(e,h,b,P),await Dj(e),w(!0),l()}catch{S("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{_(!1)}}return u==="select"?t.jsx("div",{className:"ai-generator__modal-overlay",onClick:T=>{T.target===T.currentTarget&&a()},children:t.jsxs("div",{className:"ai-generator__modal ai-generator__modal--wide",onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{className:"ai-generator__modal-header",children:[t.jsxs("div",{className:"ai-generator__modal-title-block",children:[t.jsx("h2",{children:" Compiler un Ebook"}),t.jsx("span",{className:"ai-generator__modal-subtitle",children:"tape 1 / 3  Slectionner les chapitres  inclure"})]}),t.jsx("button",{className:"ai-generator__modal-close",onClick:a,children:""})]}),t.jsx("div",{className:"ai-generator__modal-body",children:A.length===0?t.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu textuel sauvegard. Gnrez d'abord des cours, exercices ou sujets."}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"ebook-compiler__hint",children:"Cochez les chapitres  inclure dans l'ebook. Vous pourrez les rordonner ensuite."}),t.jsx("div",{className:"ebook-compiler__list",children:A.map(T=>{const Y=m.some(J=>J.id===T.id);return t.jsxs("label",{className:`ebook-compiler__item ${Y?"ebook-compiler__item--selected":""}`,children:[t.jsx("input",{type:"checkbox",checked:Y,onChange:()=>z(T),className:"ebook-compiler__checkbox"}),t.jsx("div",{className:"ebook-compiler__item-icon",children:Ka[T.type]}),t.jsxs("div",{className:"ebook-compiler__item-info",children:[t.jsx("div",{className:"ebook-compiler__item-title",children:T.chapitre}),t.jsxs("div",{className:"ebook-compiler__item-meta",children:[fr[T.type],"  ",T.discipline,"  ",T.classe]})]}),Y&&t.jsx("span",{className:"ebook-compiler__badge",children:""})]},T.id)})})]})}),t.jsxs("div",{className:"ai-generator__modal-footer",children:[t.jsx("button",{className:"btn btn--outline",onClick:a,children:"Annuler"}),t.jsx("button",{className:"btn btn--primary",onClick:()=>d("configure"),disabled:m.length===0,children:m.length===0?"Slectionnez au moins 1 chapitre":`Suivant  (${m.length} chapitre${m.length>1?"s":""})`})]})]})}):u==="configure"?t.jsx("div",{className:"ai-generator__modal-overlay",onClick:T=>{T.target===T.currentTarget&&a()},children:t.jsxs("div",{className:"ai-generator__modal ai-generator__modal--wide",onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{className:"ai-generator__modal-header",children:[t.jsxs("div",{className:"ai-generator__modal-title-block",children:[t.jsx("h2",{children:" Compiler un Ebook"}),t.jsx("span",{className:"ai-generator__modal-subtitle",children:"tape 2 / 3  Titre et ordre des chapitres"})]}),t.jsx("button",{className:"ai-generator__modal-close",onClick:a,children:""})]}),t.jsxs("div",{className:"ai-generator__modal-body",children:[t.jsxs("div",{className:"ebook-compiler__field",children:[t.jsx("label",{className:"ebook-compiler__label",children:"Titre de l'ebook *"}),t.jsx("input",{className:"ebook-compiler__input",type:"text",placeholder:"Ex : Cours de Mathmatiques  3me",value:h,onChange:T=>v(T.target.value),autoFocus:!0})]}),t.jsxs("div",{className:"ebook-compiler__field",children:[t.jsx("label",{className:"ebook-compiler__label",children:"Description (optionnel)"}),t.jsx("textarea",{className:"ebook-compiler__textarea",rows:2,placeholder:"Ex : Recueil de cours et exercices pour la classe de 3me",value:b,onChange:T=>x(T.target.value)})]}),t.jsxs("div",{className:"ebook-compiler__order-label",children:["Ordre des chapitres ",t.jsx("span",{children:"(glisser les flches pour rordonner)"})]}),t.jsx("div",{className:"ebook-compiler__order-list",children:m.map((T,Y)=>t.jsxs("div",{className:"ebook-compiler__order-item",children:[t.jsx("span",{className:"ebook-compiler__order-num",children:Y+1}),t.jsx("span",{className:"ebook-compiler__order-icon",children:Ka[T.type]}),t.jsxs("div",{className:"ebook-compiler__order-info",children:[t.jsx("div",{className:"ebook-compiler__order-title",children:T.chapitre}),t.jsxs("div",{className:"ebook-compiler__order-meta",children:[T.discipline,"  ",T.classe]})]}),t.jsxs("div",{className:"ebook-compiler__order-btns",children:[t.jsx("button",{type:"button",onClick:()=>k(Y),disabled:Y===0,title:"Monter",children:""}),t.jsx("button",{type:"button",onClick:()=>M(Y),disabled:Y===m.length-1,title:"Descendre",children:""})]})]},T.id))})]}),t.jsxs("div",{className:"ai-generator__modal-footer",children:[t.jsx("button",{className:"btn btn--outline",onClick:()=>d("select"),children:" Retour"}),t.jsx("button",{className:"btn btn--primary",onClick:()=>{if(!h.trim()){S("Titre requis.");return}S(""),d("preview")},children:"Aperu "})]}),E&&t.jsx("p",{className:"ebook-compiler__error",children:E})]})}):t.jsx("div",{className:"ai-generator__modal-overlay",onClick:T=>{T.target===T.currentTarget&&a()},children:t.jsxs("div",{className:"ai-generator__modal ai-generator__modal--wide",onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{className:"ai-generator__modal-header",children:[t.jsxs("div",{className:"ai-generator__modal-title-block",children:[t.jsxs("h2",{children:[" ",h]}),t.jsx("span",{className:"ai-generator__modal-subtitle",children:"tape 3 / 3  Aperu et tlchargement"})]}),t.jsxs("div",{className:"ai-generator__modal-header-actions",children:[t.jsx("button",{className:"btn btn--outline btn--sm",onClick:$,title:"Enregistrer en PDF",children:" PDF"}),t.jsx("button",{className:"btn btn--outline btn--sm",onClick:B,title:"Tlcharger en Word",children:" Word"}),t.jsx("button",{className:"ai-generator__modal-close",onClick:a,children:""})]})]}),t.jsxs("div",{className:"ai-generator__modal-body",children:[t.jsxs("div",{className:"ebook-compiler__cover-preview",children:[t.jsx("span",{children:""}),t.jsxs("div",{children:[t.jsx("div",{className:"ebook-compiler__cover-title",children:h}),b&&t.jsx("div",{className:"ebook-compiler__cover-desc",children:b}),t.jsxs("div",{className:"ebook-compiler__cover-meta",children:[m.length," chapitre",m.length>1?"s":"","  PedaClic"]})]})]}),t.jsxs("div",{className:"ebook-compiler__toc",children:[t.jsx("div",{className:"ebook-compiler__toc-title",children:" Sommaire"}),t.jsx("ol",{children:m.map((T,Y)=>t.jsxs("li",{children:[t.jsxs("span",{children:[Y+1,". ",T.chapitre]}),t.jsxs("span",{className:"ebook-compiler__toc-meta",children:[T.discipline,"  ",T.classe]})]},T.id))})]}),C?t.jsx("div",{className:"ebook-compiler__success",children:" Ebook sauvegard avec succs dans votre bibliothque IA !"}):t.jsxs("div",{className:"ebook-compiler__save-row",children:[t.jsx("button",{className:"btn btn--primary btn--lg",onClick:H,disabled:j,children:j?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner spinner--sm"})," Sauvegarde"]}):" Sauvegarder dans PedaClic"}),t.jsx("p",{className:"ebook-compiler__save-hint",children:"L'ebook sera accessible depuis votre Bibliothque."})]}),E&&t.jsx("p",{className:"ebook-compiler__error",children:E})]}),t.jsxs("div",{className:"ai-generator__modal-footer",children:[t.jsx("button",{className:"btn btn--outline",onClick:()=>d("configure"),children:" Modifier"}),t.jsx("button",{className:"btn btn--outline",onClick:a,children:"Fermer"})]})]})})},qte=[30,45,60,90,120],Rte=()=>{const{currentUser:e}=Ke(),[r,n]=g.useState(1),[a,l]=g.useState([]),[o,u]=g.useState(null),[d,m]=g.useState(""),[p,h]=g.useState(""),[v,b]=g.useState(""),[x,j]=g.useState(null),[_,C]=g.useState({}),[w,E]=g.useState(!1),[S,A]=g.useState(null),[z,k]=g.useState(null),[M,D]=g.useState(!1),[$,B]=g.useState(!1),[H,T]=g.useState(null),[Y,J]=g.useState(null),[P,q]=g.useState(!1),[U,I]=g.useState([]),[te,L]=g.useState(!1),[Z,W]=g.useState(null),[ce,xe]=g.useState(!1),[he,F]=g.useState(!1),[ve,Pe]=g.useState([]),[ue,ee]=g.useState(!1),[V,de]=g.useState(!0),we=g.useMemo(()=>{const ae=new Map;return a.forEach(K=>{ae.has(K.nom)||ae.set(K.nom,K)}),Array.from(ae.values())},[a]);g.useEffect(()=>{(async()=>{try{de(!0);const K=Ee(_e(Q,"disciplines"),Ve("nom")),ie=await Ce(K),Ne=[];ie.forEach(Qe=>{const At=Qe.data();At.nom&&At.nom.trim()&&Ne.push({id:Qe.id,nom:At.nom||"",classe:At.classe||"",niveau:At.niveau||""})}),l(Ne)}catch(K){console.error("[AIGenerator] Erreur chargement disciplines:",K),k("Impossible de charger les disciplines.")}finally{de(!1)}})()},[]),g.useEffect(()=>{e?.uid&&Nf(e.uid,e.subscriptionPlan).then(({usage:ae,limite:K})=>J({usage:ae,limite:K}))},[e?.uid,e?.subscriptionPlan]);const Te=ae=>{u(ae),k(null)},Xe=()=>{const ae=[];if(o||ae.push("discipline"),d||ae.push("classe"),(!p||p<1)&&ae.push("dure de la leon"),ae.length>0){k(`Champs requis manquants : ${ae.join(", ")}`);return}n(2),k(null)},tt=()=>{if(!v.trim()){k("Veuillez saisir le titre du chapitre.");return}n(3),k(null)},lt=ae=>{j(ae),n(4),k(null)},rr=()=>{r>1&&(n(ae=>ae-1),k(null),r===5&&(A(null),B(!1),T(null)))},kr=()=>{n(1),u(null),m(""),h(""),b(""),j(null),C({}),A(null),k(null),B(!1),T(null)},Or=async()=>{if(!o||!x||!v.trim()||!d){k("Paramtres incomplets. Veuillez reprendre depuis le dbut.");return}E(!0),k(null);try{const ae={..._,duree:typeof p=="number"?p:void 0},K={type:x,discipline:o.nom,classe:d,chapitre:v.trim(),options:Object.keys(ae).length>0?ae:void 0},ie=await MJ(K);A(ie),n(5)}catch(ae){const K=ae instanceof Error?ae.message:"Erreur inconnue";k(K)}finally{E(!1)}},sn=async()=>{if(!e||!S||!o||!x)return;const{autorise:ae,usage:K,limite:ie}=await Nf(e.uid,e.subscriptionPlan);if(!ae&&ie!==null){k(`Vous avez atteint la limite de ${ie} ressources (${K}/${ie} utilises). Passez  Premium Pro (abonnement annuel ou 9 mois) pour un accs illimit.`);return}D(!0),k(null);try{let Ne;const At=a.find(Mr=>Mr.nom===o.nom&&Mr.classe===d)?.id||o.id,Qr={type:x,discipline:o.nom,classe:d,chapitre:v.trim(),options:{..._,duree:typeof p=="number"?p:void 0}};S.type==="quiz"&&S.data.questions?Ne=await qJ(e.uid,Qr,S.data.questions,At):Ne=await TJ(e.uid,Qr,S.data.content||"",At),T(Ne),B(!0),await Dj(e.uid);try{const Mr=await Lb(e.uid);I(Mr)}catch{}}catch(Ne){const Qe=Ne instanceof Error?Ne.message:"Erreur de sauvegarde";k(Qe)}finally{D(!1)}},pe=async()=>{if(e){L(!0);try{const ae=await Lb(e.uid);I(ae),q(!0)}catch(ae){console.error("[AIGenerator] Erreur historique:",ae)}finally{L(!1)}}},Oe=ae=>ae.replace(/[^\w\u00C0-\u017E\s-]/g,"").trim().replace(/\s+/g,"_").slice(0,60)||"contenu_pedaclic",Le=(ae,K)=>{const ie=URL.createObjectURL(ae),Ne=document.createElement("a");Ne.href=ie,Ne.download=K,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(ie)},He=(ae,K)=>{const ie=Pr(ae),Ne=`
<!DOCTYPE html>
<html xmlns:o="urn:schemas-microsoft-com:office:office"
      xmlns:w="urn:schemas-microsoft-com:office:word"
      xmlns="http://www.w3.org/TR/REC-html40">
<head>
  <meta charset="utf-8">
  <title>${K}</title>
  <!--[if gte mso 9]><xml><w:WordDocument><w:View>Print</w:View><w:Zoom>100</w:Zoom></w:WordDocument></xml><![endif]-->
  <style>
    body { font-family: Arial, sans-serif; font-size: 12pt; line-height: 1.6; margin: 2cm; color: #1a1a1a; }
    h1 { font-size: 18pt; color: #1a56db; margin-bottom: 12pt; }
    h2 { font-size: 15pt; color: #1a56db; margin-top: 18pt; margin-bottom: 8pt; }
    h3 { font-size: 13pt; color: #333; margin-top: 14pt; }
    p  { margin-bottom: 8pt; }
    ul, ol { margin-left: 1cm; margin-bottom: 8pt; }
    li { margin-bottom: 4pt; }
    strong { font-weight: bold; }
    em { font-style: italic; }
    code { font-family: Courier New; background: #f5f5f5; padding: 1pt 3pt; }
    pre  { font-family: Courier New; background: #f5f5f5; padding: 8pt; margin: 8pt 0; }
    hr { border: none; border-top: 1px solid #ccc; margin: 12pt 0; }
  </style>
</head>
<body>
  <h1>${K}</h1>
  ${ie}
</body>
</html>`,Qe=new Blob(["\uFEFF",Ne],{type:"application/msword;charset=utf-8"});Le(Qe,`${Oe(K)}.doc`)},dt=(ae,K)=>{const ie=Pr(ae),Ne=window.open("","_blank","width=900,height=700");Ne&&(Ne.document.write(`
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>${K}</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; font-size: 12pt; line-height: 1.7; color: #1a1a1a; padding: 2cm; max-width: 800px; margin: auto; }
    h1 { font-size: 20pt; color: #1a56db; margin-bottom: 14pt; padding-bottom: 6pt; border-bottom: 2px solid #1a56db; }
    h2 { font-size: 15pt; color: #1a56db; margin: 18pt 0 8pt; }
    h3 { font-size: 13pt; color: #333; margin: 14pt 0 6pt; }
    p  { margin-bottom: 8pt; }
    ul, ol { margin: 6pt 0 8pt 1.5cm; }
    li { margin-bottom: 4pt; }
    strong { font-weight: bold; }
    em { font-style: italic; }
    code { font-family: Courier New, monospace; background: #f5f5f5; padding: 1pt 4pt; border-radius: 3pt; font-size: 10pt; }
    pre  { font-family: Courier New, monospace; background: #f5f5f5; padding: 10pt; margin: 8pt 0; border-radius: 4pt; font-size: 10pt; white-space: pre-wrap; }
    hr { border: none; border-top: 1px solid #ddd; margin: 14pt 0; }
    .header-meta { font-size: 9pt; color: #888; margin-bottom: 18pt; }
    @media print {
      body { padding: 0; }
      @page { margin: 2cm; }
    }
  </style>
</head>
<body>
  <h1>${K}</h1>
  <p class="header-meta">PedaClic  Gnr le ${new Date().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}</p>
  ${ie}
  <script>window.onload = () => { window.print(); };<\/script>
</body>
</html>`),Ne.document.close())},Rt=async ae=>{if(window.confirm("Supprimer ce contenu gnr ?"))try{await RJ(ae),I(K=>K.filter(ie=>ie.id!==ae))}catch(K){console.error("[AIGenerator] Erreur suppression:",K)}},nr=async()=>{if(e){ee(!0);try{const ae=await xA(e.uid);Pe(ae),F(!0)}catch(ae){console.error("[AIGenerator] Erreur chargement ebooks:",ae)}finally{ee(!1)}}},sa=async ae=>{if(window.confirm("Supprimer cet ebook ?"))try{await Mte(ae),Pe(K=>K.filter(ie=>ie.id!==ae))}catch(K){console.error("[AIGenerator] Erreur suppression ebook:",K)}},Dr=ae=>{const K=ae.sections.map((ie,Ne)=>`# ${Ne+1}. ${ie.chapitre}

**${fr[ie.type]}**  ${ie.discipline}  ${ie.classe}

${ie.content}`).join(`

---

`);W({id:ae.id,userId:ae.userId,type:"cours_complet",discipline:"Ebook compil",disciplineId:"",classe:"",chapitre:ae.titre,content:K,createdAt:ae.createdAt}),F(!1)},Pr=g.useCallback(ae=>{if(!ae)return"";let K=ae.replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr />").replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return K=K.replace(/(<li>.*?<\/li>(\s*<br \/>)?)+/g,ie=>"<ul>"+ie.replace(/<br \/>/g,"")+"</ul>"),`<p>${K}</p>`},[]);return e?e.isPremium?t.jsxs("div",{className:"ai-generator",children:[t.jsxs("div",{className:"ai-generator__header",children:[t.jsx("h1",{className:"ai-generator__title",children:" Gnrateur de Contenu IA"}),t.jsx("p",{className:"ai-generator__subtitle",children:"Crez des cours, exercices, quiz et sujets d'examen adapts au programme sngalais"}),Y&&Y.limite!==null&&t.jsxs("p",{className:"ai-generator__quota",style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"0.25rem"},children:["Ressources utilises : ",Y.usage," / ",Y.limite]}),t.jsxs("div",{className:"ai-generator__header-actions",children:[t.jsx("button",{className:"btn btn--outline btn--sm",onClick:pe,disabled:te,children:te?" Chargement...":" Historique"}),t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{pe(),xe(!0)},title:"Compiler plusieurs contenus en un ebook",children:" Compiler un Ebook"}),t.jsx("button",{className:"btn btn--outline btn--sm",onClick:nr,disabled:ue,title:"Voir mes ebooks compils",children:ue?"...":" Mes Ebooks"}),r>1&&t.jsx("button",{className:"btn btn--outline btn--sm",onClick:kr,children:" Recommencer"})]})]}),t.jsx("div",{className:"ai-generator__steps",children:[1,2,3,4,5].map(ae=>t.jsxs("div",{className:`ai-generator__step-indicator ${ae===r?"ai-generator__step-indicator--active":""} ${ae<r?"ai-generator__step-indicator--done":""}`,children:[t.jsx("span",{className:"ai-generator__step-number",children:ae<r?"":ae}),t.jsxs("span",{className:"ai-generator__step-label",children:[ae===1&&"Paramtres",ae===2&&"Chapitre",ae===3&&"Type",ae===4&&"Options",ae===5&&"Rsultat"]})]},ae))}),z&&t.jsxs("div",{className:"ai-generator__error",children:[t.jsx("span",{className:"ai-generator__error-icon",children:""}),z,t.jsx("button",{className:"ai-generator__error-close",onClick:()=>k(null),children:""})]}),t.jsxs("div",{className:"ai-generator__content",children:[r===1&&t.jsxs("div",{className:"ai-generator__step-content",children:[t.jsx("h2",{className:"ai-generator__step-title",children:" Paramtres de la leon"}),t.jsxs("div",{className:"ai-generator__field",children:[t.jsxs("label",{className:"ai-generator__label",children:["Discipline ",t.jsx("span",{className:"ai-generator__required",children:"*"})]}),V?t.jsxs("div",{className:"ai-generator__loading",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Chargement des disciplines..."})]}):we.length===0?t.jsx("div",{className:"ai-generator__empty",children:t.jsx("p",{children:"Aucune discipline disponible."})}):t.jsx("div",{className:"ai-generator__discipline-grid",children:we.map(ae=>t.jsx("button",{className:`ai-generator__discipline-card ${o?.nom===ae.nom?"ai-generator__discipline-card--selected":""}`,onClick:()=>Te(ae),children:t.jsx("span",{className:"ai-generator__discipline-name",children:ae.nom})},ae.id))})]}),t.jsxs("div",{className:"ai-generator__field",children:[t.jsxs("label",{className:"ai-generator__label",children:["Classe ",t.jsx("span",{className:"ai-generator__required",children:"*"})]}),t.jsx("div",{className:"ai-generator__classe-grid",children:hr.map(ae=>t.jsx("button",{className:`ai-generator__classe-btn ${d===ae?"ai-generator__classe-btn--selected":""}`,onClick:()=>{m(ae),k(null)},children:ae},ae))})]}),t.jsxs("div",{className:"ai-generator__field",children:[t.jsxs("label",{htmlFor:"dureeCours",className:"ai-generator__label",children:["Dure de la leon (minutes) ",t.jsx("span",{className:"ai-generator__required",children:"*"})]}),t.jsxs("div",{className:"ai-generator__duree-group",children:[t.jsx("div",{className:"ai-generator__duree-presets",children:qte.map(ae=>t.jsxs("button",{className:`ai-generator__duree-btn ${p===ae?"ai-generator__duree-btn--selected":""}`,onClick:()=>{h(ae),k(null)},children:[ae," min"]},ae))}),t.jsx("input",{id:"dureeCours",type:"number",className:"ai-generator__input ai-generator__input--small",min:"15",max:"300",step:"5",value:p,onChange:ae=>{const K=parseInt(ae.target.value);h(isNaN(K)?"":K),k(null)},placeholder:"Autre dure..."})]})]}),t.jsxs("div",{className:"ai-generator__nav",children:[t.jsx("div",{})," ",t.jsx("button",{className:"btn btn--primary",onClick:Xe,disabled:!o||!d||!p,children:"Continuer "})]})]}),r===2&&t.jsxs("div",{className:"ai-generator__step-content",children:[t.jsx("h2",{className:"ai-generator__step-title",children:" Prcisez le chapitre"}),t.jsxs("div",{className:"ai-generator__recap",children:[t.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),t.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),t.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),t.jsx("span",{className:"ai-generator__recap-value",children:d}),t.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),t.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]})]}),t.jsxs("div",{className:"ai-generator__field",children:[t.jsx("label",{htmlFor:"chapitre",className:"ai-generator__label",children:"Titre du chapitre ou du thme"}),t.jsx("input",{id:"chapitre",type:"text",className:"ai-generator__input",placeholder:"Ex: Les fonctions affines, Le rcit autobiographique, La tectonique des plaques...",value:v,onChange:ae=>b(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&tt(),autoFocus:!0})]}),t.jsxs("div",{className:"ai-generator__nav",children:[t.jsx("button",{className:"btn btn--outline",onClick:rr,children:" Retour"}),t.jsx("button",{className:"btn btn--primary",onClick:tt,disabled:!v.trim(),children:"Continuer "})]})]}),r===3&&t.jsxs("div",{className:"ai-generator__step-content",children:[t.jsx("h2",{className:"ai-generator__step-title",children:" Quel type de contenu ?"}),t.jsxs("div",{className:"ai-generator__recap",children:[t.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),t.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),t.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),t.jsx("span",{className:"ai-generator__recap-value",children:d}),t.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),t.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),t.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),t.jsx("span",{className:"ai-generator__recap-value",children:v})]}),t.jsx("div",{className:"ai-generator__type-grid",children:Object.keys(fr).map(ae=>t.jsxs("button",{className:"ai-generator__type-card",onClick:()=>lt(ae),children:[t.jsx("span",{className:"ai-generator__type-icon",children:Ka[ae]}),t.jsx("span",{className:"ai-generator__type-name",children:fr[ae]}),t.jsx("span",{className:"ai-generator__type-desc",children:DJ[ae]})]},ae))}),t.jsx("div",{className:"ai-generator__nav",children:t.jsx("button",{className:"btn btn--outline",onClick:rr,children:" Retour"})})]}),r===4&&t.jsxs("div",{className:"ai-generator__step-content",children:[t.jsx("h2",{className:"ai-generator__step-title",children:" Options de gnration"}),t.jsxs("div",{className:"ai-generator__recap",children:[t.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),t.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),t.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),t.jsx("span",{className:"ai-generator__recap-value",children:d}),t.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),t.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),t.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),t.jsx("span",{className:"ai-generator__recap-value",children:v}),t.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),t.jsxs("span",{className:"ai-generator__recap-value",children:[x&&Ka[x]," ",x&&fr[x]]})]}),t.jsxs("div",{className:"ai-generator__options",children:[t.jsxs("div",{className:"ai-generator__field",children:[t.jsx("label",{className:"ai-generator__label",children:"Niveau de difficult"}),t.jsx("div",{className:"ai-generator__radio-group",children:["facile","moyen","difficile"].map(ae=>t.jsxs("label",{className:"ai-generator__radio",children:[t.jsx("input",{type:"radio",name:"difficulte",value:ae,checked:_.difficulte===ae,onChange:()=>C(K=>({...K,difficulte:ae}))}),t.jsxs("span",{className:"ai-generator__radio-label",children:[ae==="facile"&&" Facile",ae==="moyen"&&" Moyen",ae==="difficile"&&" Difficile"]})]},ae))})]}),x==="sujet_examen"&&t.jsxs("div",{className:"ai-generator__field",children:[t.jsx("label",{className:"ai-generator__label",children:"Type d'examen"}),t.jsx("div",{className:"ai-generator__radio-group",children:["BFEM","BAC"].map(ae=>t.jsxs("label",{className:"ai-generator__radio",children:[t.jsx("input",{type:"radio",name:"typeExamen",value:ae,checked:_.typeExamen===ae,onChange:()=>C(K=>({...K,typeExamen:ae}))}),t.jsx("span",{className:"ai-generator__radio-label",children:ae})]},ae))})]}),t.jsxs("div",{className:"ai-generator__field",children:[t.jsx("label",{htmlFor:"objectifs",className:"ai-generator__label",children:"Objectifs pdagogiques (optionnel)"}),t.jsx("textarea",{id:"objectifs",className:"ai-generator__textarea",rows:3,placeholder:"Ex: L'lve doit tre capable de rsoudre une quation du 1er degr...",value:_.objectifs||"",onChange:ae=>C(K=>({...K,objectifs:ae.target.value||void 0}))})]}),t.jsxs("div",{className:"ai-generator__field",children:[t.jsx("label",{htmlFor:"consignes",className:"ai-generator__label",children:"Consignes spciales (optionnel)"}),t.jsx("textarea",{id:"consignes",className:"ai-generator__textarea",rows:2,placeholder:"Ex: Inclure un exercice sur les statistiques, utiliser des exemples avec le football...",value:_.consignesSpeciales||"",onChange:ae=>C(K=>({...K,consignesSpeciales:ae.target.value||void 0}))})]})]}),t.jsxs("div",{className:"ai-generator__nav",children:[t.jsx("button",{className:"btn btn--outline",onClick:rr,children:" Retour"}),t.jsx("button",{className:"btn btn--primary btn--lg",onClick:Or,disabled:w,children:w?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner spinner--sm"}),"Gnration en cours..."]}):" Gnrer le contenu"})]}),w&&t.jsxs("div",{className:"ai-generator__generating",children:[t.jsxs("div",{className:"ai-generator__generating-animation",children:[t.jsx("span",{children:""}),t.jsx("span",{children:""}),t.jsx("span",{children:""})]}),t.jsxs("p",{children:["L'IA rdige votre"," ",x&&fr[x].toLowerCase(),"..."]}),t.jsx("p",{className:"ai-generator__generating-hint",children:"Cela peut prendre 15  30 secondes."})]})]}),r===5&&S&&t.jsxs("div",{className:"ai-generator__step-content",children:[t.jsx("h2",{className:"ai-generator__step-title",children:" Contenu gnr"}),t.jsxs("div",{className:"ai-generator__recap ai-generator__recap--success",children:[t.jsx("span",{className:"ai-generator__recap-label",children:"Type :"}),t.jsxs("span",{className:"ai-generator__recap-value",children:[x&&Ka[x]," ",x&&fr[x]]}),t.jsx("span",{className:"ai-generator__recap-label",children:"Discipline :"}),t.jsx("span",{className:"ai-generator__recap-value",children:o?.nom}),t.jsx("span",{className:"ai-generator__recap-label",children:"Classe :"}),t.jsx("span",{className:"ai-generator__recap-value",children:d}),t.jsx("span",{className:"ai-generator__recap-label",children:"Dure :"}),t.jsxs("span",{className:"ai-generator__recap-value",children:[p," minutes"]}),t.jsx("span",{className:"ai-generator__recap-label",children:"Chapitre :"}),t.jsx("span",{className:"ai-generator__recap-value",children:v})]}),t.jsxs("div",{className:"ai-generator__preview",children:[t.jsxs("div",{className:"ai-generator__preview-header",children:[t.jsx("h3",{children:"Prvisualisation"}),t.jsxs("div",{className:"ai-generator__preview-actions",children:[t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{const ae=S.type==="quiz"?JSON.stringify(S.data.questions,null,2):S.data.content||"";navigator.clipboard.writeText(ae),alert("Contenu copi dans le presse-papier !")},children:" Copier"}),S.type!=="quiz"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>dt(S.data.content||"",`${fr[x]}  ${o?.nom} ${d}`),title:"Tlcharger en PDF (via impression)",children:" PDF"}),t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>He(S.data.content||"",`${fr[x]}  ${o?.nom} ${d}`),title:"Tlcharger en Word (.doc)",children:" Word"})]})]})]}),t.jsx("div",{className:"ai-generator__preview-body",children:S.type==="quiz"&&S.data.questions?t.jsxs("div",{className:"ai-generator__quiz-preview",children:[t.jsxs("p",{className:"ai-generator__quiz-count",children:[S.data.questions.length," questions gnres"]}),S.data.questions.map((ae,K)=>t.jsxs("div",{className:"ai-generator__quiz-item",children:[t.jsxs("div",{className:"ai-generator__quiz-question",children:[t.jsxs("strong",{children:["Q",K+1,"."]})," ",ae.question,t.jsx("span",{className:`ai-generator__quiz-badge ai-generator__quiz-badge--${ae.difficulte}`,children:ae.difficulte})]}),t.jsx("div",{className:"ai-generator__quiz-options",children:ae.options.map((ie,Ne)=>t.jsxs("div",{className:`ai-generator__quiz-option ${Ne===ae.reponseCorrecte?"ai-generator__quiz-option--correct":""}`,children:[t.jsx("span",{className:"ai-generator__quiz-option-letter",children:String.fromCharCode(65+Ne)}),ie,Ne===ae.reponseCorrecte&&" "]},Ne))}),ae.explication&&t.jsxs("div",{className:"ai-generator__quiz-explanation",children:[" ",ae.explication]})]},K))]}):t.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:Pr(S.data.content||"")}})})]}),t.jsxs("div",{className:"ai-generator__actions",children:[$?t.jsxs("div",{className:"ai-generator__save-success",children:[t.jsx("span",{children:" Sauvegard avec succs !"}),S.type==="quiz"&&H&&t.jsx(Re,{to:`/quiz/${H}`,className:"btn btn--outline btn--sm",children:" Voir le quiz"})]}):t.jsx("button",{className:"btn btn--primary btn--lg",onClick:sn,disabled:M,children:M?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner spinner--sm"}),"Sauvegarde..."]}):t.jsx(t.Fragment,{children:" Sauvegarder dans PedaClic"})}),t.jsx("button",{className:"btn btn--outline",onClick:kr,children:" Nouvelle gnration"})]})]})]}),Z&&t.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>W(null),children:t.jsxs("div",{className:"ai-generator__modal ai-generator__modal--wide",onClick:ae=>ae.stopPropagation(),children:[t.jsxs("div",{className:"ai-generator__modal-header",children:[t.jsxs("div",{className:"ai-generator__modal-title-block",children:[t.jsxs("h2",{children:[Ka[Z.type]," ",fr[Z.type]]}),t.jsxs("span",{className:"ai-generator__modal-subtitle",children:[Z.discipline," (",Z.classe,")  ",Z.chapitre]})]}),t.jsxs("div",{className:"ai-generator__modal-header-actions",children:[Z.type!=="quiz_auto"&&Z.content&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>dt(Z.content,`${fr[Z.type]}  ${Z.discipline} ${Z.classe}`),title:"Enregistrer en PDF",children:" PDF"}),t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>He(Z.content,`${fr[Z.type]}  ${Z.discipline} ${Z.classe}`),title:"Tlcharger en Word",children:" Word"})]}),t.jsx("button",{className:"btn btn--outline btn--sm",onClick:async()=>{W(null),await pe()},title:"Retour  l'historique",children:" Historique"}),t.jsx("button",{className:"ai-generator__modal-close",onClick:()=>W(null),children:""})]})]}),t.jsx("div",{className:"ai-generator__modal-body",children:t.jsx("div",{className:"ai-generator__markdown-preview",dangerouslySetInnerHTML:{__html:Pr(Z.content||"")}})})]})}),ce&&t.jsx(Tte,{userId:e.uid,subscriptionPlan:e?.subscriptionPlan,history:U,markdownToHtml:Pr,onClose:()=>xe(!1),onSaved:async()=>{const ae=await xA(e.uid);Pe(ae)}}),he&&t.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>F(!1),children:t.jsxs("div",{className:"ai-generator__modal ai-generator__modal--wide",onClick:ae=>ae.stopPropagation(),children:[t.jsxs("div",{className:"ai-generator__modal-header",children:[t.jsx("h2",{children:" Mes Ebooks compils"}),t.jsxs("div",{className:"ai-generator__modal-header-actions",children:[t.jsx("button",{className:"btn btn--primary btn--sm",onClick:()=>{F(!1),xe(!0)},children:"+ Nouvel ebook"}),t.jsx("button",{className:"ai-generator__modal-close",onClick:()=>F(!1),children:""})]})]}),t.jsx("div",{className:"ai-generator__modal-body",children:ve.length===0?t.jsx("p",{className:"ai-generator__empty",children:`Vous n'avez pas encore compil d'ebook. Cliquez sur "Compiler un Ebook" pour commencer.`}):t.jsx("div",{className:"ebook-compiler__my-list",children:ve.map(ae=>t.jsxs("div",{className:"ebook-compiler__my-item",children:[t.jsx("div",{className:"ebook-compiler__my-cover",children:""}),t.jsxs("div",{className:"ebook-compiler__my-info",children:[t.jsx("div",{className:"ebook-compiler__my-title",children:ae.titre}),ae.description&&t.jsx("div",{className:"ebook-compiler__my-desc",children:ae.description}),t.jsxs("div",{className:"ebook-compiler__my-meta",children:[ae.sections.length," chapitre",ae.sections.length>1?"s":""," "," ",ae.createdAt?.toDate?ae.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):""]})]}),t.jsxs("div",{className:"ai-generator__history-actions",children:[t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>Dr(ae),title:"Lire l'ebook",children:" Lire"}),t.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>ae.id&&sa(ae.id),title:"Supprimer",children:""})]})]},ae.id))})})]})}),P&&t.jsx("div",{className:"ai-generator__modal-overlay",onClick:()=>q(!1),children:t.jsxs("div",{className:"ai-generator__modal",onClick:ae=>ae.stopPropagation(),children:[t.jsxs("div",{className:"ai-generator__modal-header",children:[t.jsx("h2",{children:" Historique des gnrations"}),t.jsx("button",{className:"ai-generator__modal-close",onClick:()=>q(!1),children:""})]}),t.jsx("div",{className:"ai-generator__modal-body",children:U.length===0?t.jsx("p",{className:"ai-generator__empty",children:"Aucun contenu gnr pour le moment."}):t.jsx("div",{className:"ai-generator__history-list",children:U.map(ae=>t.jsxs("div",{className:"ai-generator__history-item",children:[t.jsxs("div",{className:"ai-generator__history-info",children:[t.jsxs("span",{className:"ai-generator__history-type",children:[Ka[ae.type]," ",fr[ae.type]]}),t.jsxs("span",{className:"ai-generator__history-details",children:[ae.discipline," (",ae.classe,")  ",ae.chapitre]}),t.jsx("span",{className:"ai-generator__history-date",children:ae.createdAt?.toDate?ae.createdAt.toDate().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue"})]}),t.jsxs("div",{className:"ai-generator__history-actions",children:[t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>{W(ae),q(!1)},title:"Lire le contenu",children:" Lire"}),ae.type!=="quiz_auto"&&ae.content&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>dt(ae.content,`${fr[ae.type]}  ${ae.discipline} ${ae.classe}`),title:"PDF",children:""}),t.jsx("button",{className:"btn btn--outline btn--sm",onClick:()=>He(ae.content,`${fr[ae.type]}  ${ae.discipline} ${ae.classe}`),title:"Word",children:""})]}),t.jsx("button",{className:"btn btn--danger btn--sm",onClick:()=>ae.id&&Rt(ae.id),title:"Supprimer",children:""})]})]},ae.id))})})]})})]}):t.jsx("div",{className:"ai-generator",children:t.jsxs("div",{className:"ai-generator__gate",children:[t.jsx("div",{className:"ai-generator__gate-icon",children:""}),t.jsx("h2",{children:"Fonctionnalit Premium"}),t.jsx("p",{children:"Le gnrateur de contenu IA est rserv aux abonns Premium. Gnrez des cours, des exercices, des quiz et des sujets d'examen adapts au programme sngalais en un clic !"}),t.jsxs("div",{className:"ai-generator__gate-price",children:[t.jsx("span",{className:"price",children:"2 000 FCFA"}),t.jsx("span",{className:"period",children:"/mois"})]}),t.jsx(Re,{to:"/premium",className:"btn btn--primary btn--lg",children:"Devenir Premium"})]})}):t.jsx("div",{className:"ai-generator",children:t.jsxs("div",{className:"ai-generator__gate",children:[t.jsx("div",{className:"ai-generator__gate-icon",children:""}),t.jsx("h2",{children:"Connexion requise"}),t.jsx("p",{children:"Vous devez tre connect pour accder au gnrateur de contenu IA."}),t.jsx(Re,{to:"/connexion",className:"btn btn--primary",children:"Se connecter"})]})})},Ite=()=>{const[e,r]=g.useState(null),[n,a]=g.useState(!1),[l,o]=g.useState(!1),[u,d]=g.useState(!1),m=()=>/iPhone|iPad|iPod/.test(navigator.userAgent)&&!window.MSStream,p=()=>window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0,h=g.useCallback(()=>{try{return parseInt(localStorage.getItem("pedaclic_visit_count")||"0",10)}catch{return 0}},[]),v=g.useCallback(()=>{try{const _=h()+1;localStorage.setItem("pedaclic_visit_count",_.toString())}catch{}},[h]),b=()=>{try{const _=localStorage.getItem("pedaclic_install_dismissed_at");if(!_)return!1;const C=720*60*60*1e3;return Date.now()-parseInt(_,10)<C}catch{return!1}};g.useEffect(()=>{if(p()||b())return;v();const _=w=>{w.preventDefault(),r(w),h()>=1&&a(!0)};window.addEventListener("beforeinstallprompt",_),m()&&h()>=1&&(o(!0),a(!0));const C=()=>{a(!1),r(null)};return window.addEventListener("appinstalled",C),()=>{window.removeEventListener("beforeinstallprompt",_),window.removeEventListener("appinstalled",C)}},[h,v]);const x=async()=>{if(e){d(!0);try{await e.prompt();const{outcome:_}=await e.userChoice;_==="accepted"&&a(!1)}catch(_){console.error("Erreur installation PWA:",_)}finally{d(!1),r(null)}}},j=()=>{a(!1);try{localStorage.setItem("pedaclic_install_dismissed_at",Date.now().toString()),localStorage.removeItem("pedaclic_install_dismissed")}catch{}};return n?t.jsx("div",{className:"install-prompt",children:t.jsxs("div",{className:"install-prompt__container",children:[t.jsxs("div",{className:"install-prompt__content",children:[t.jsx("div",{className:"install-prompt__icon",children:t.jsx(jA,{size:24})}),t.jsxs("div",{className:"install-prompt__text",children:[t.jsx("h3",{className:"install-prompt__title",children:"Installer PedaClic"}),t.jsx("p",{className:"install-prompt__description",children:l?"Accde  tes cours mme sans connexion !":"Installe l'app pour un accs rapide, mme hors-ligne !"})]})]}),t.jsxs("div",{className:"install-prompt__actions",children:[!l&&e&&t.jsx("button",{className:"install-prompt__btn install-prompt__btn--primary",onClick:x,disabled:u,children:u?"Installation...":"Installer"}),l&&t.jsx("div",{className:"install-prompt__ios",children:t.jsxs("p",{className:"install-prompt__ios-text",children:["Appuie sur ",t.jsx($3,{size:16,className:"install-prompt__ios-icon"})," puis",t.jsxs("span",{className:"install-prompt__ios-highlight",children:[t.jsx(Mc,{size:14})," Sur l'cran d'accueil"]})]})}),t.jsx("button",{className:"install-prompt__btn install-prompt__btn--close",onClick:j,"aria-label":"Fermer la bannire d'installation",children:t.jsx(Ki,{size:20})})]})]})}):null};function Lte(){const[e,r]=g.useState(typeof navigator<"u"?navigator.onLine:!0);return g.useEffect(()=>{const n=()=>r(!0),a=()=>r(!1);return window.addEventListener("online",n),window.addEventListener("offline",a),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}},[]),e}const $te=()=>{const e=Lte(),[r,n]=g.useState(!1),[a,l]=g.useState(!1);return g.useEffect(()=>{if(!e)l(!0),n(!1);else if(a){n(!0);const o=setTimeout(()=>{n(!1),l(!1)},3e3);return()=>clearTimeout(o)}},[e,a]),e&&!r?null:t.jsx("div",{className:`network-indicator ${e?"network-indicator--online":"network-indicator--offline"}`,children:t.jsx("div",{className:"network-indicator__content",children:e?t.jsxs(t.Fragment,{children:[t.jsx(B3,{size:14}),t.jsx("span",{children:"Connexion rtablie"})]}):t.jsxs(t.Fragment,{children:[t.jsx(U3,{size:14}),t.jsx("span",{children:"Pas de connexion  mode hors-ligne"})]})})})},Bte=()=>(g.useEffect(()=>{lA();const e=setInterval(lA,600*1e3);return()=>clearInterval(e)},[]),t.jsxs(J3,{children:[t.jsx(Ite,{}),t.jsx($te,{}),t.jsxs(Wq,{children:[t.jsx(qe,{path:"/",element:t.jsx(it,{children:t.jsx(h5,{})})}),t.jsx(qe,{path:"/disciplines",element:t.jsx(it,{children:t.jsx(v5,{})})}),t.jsx(qe,{path:"/disciplines/:id",element:t.jsx(it,{children:t.jsx(j5,{})})}),t.jsx(qe,{path:"/quiz-gratuits",element:t.jsx(it,{children:t.jsx(dI,{})})}),t.jsx(qe,{path:"/ebooks",element:t.jsx(it,{children:t.jsx(ste,{})})}),t.jsx(qe,{path:"/mediatheque",element:t.jsx(it,{children:t.jsx(yte,{})})}),t.jsx(qe,{path:"/mediatheque/ajouter",element:t.jsx(Fi,{allowedRoles:["admin","prof"],children:t.jsx(it,{children:t.jsx(Ete,{})})})}),t.jsx(qe,{path:"/mediatheque/:mediaId/modifier",element:t.jsx(Fi,{allowedRoles:["admin","prof"],children:t.jsx(it,{children:t.jsx(Ate,{})})})}),t.jsx(qe,{path:"/mediatheque/:mediaId",element:t.jsx(it,{children:t.jsx(wte,{})})}),t.jsx(qe,{path:"/cours",element:t.jsx(it,{children:t.jsx(wee,{})})}),t.jsx(qe,{path:"/cours/:coursId",element:t.jsx(it,{children:t.jsx(Iee,{})})}),t.jsx(qe,{path:"/connexion",element:t.jsx(_5,{})}),t.jsx(qe,{path:"/inscription",element:t.jsx(N5,{})}),t.jsx(qe,{path:"/mot-de-passe-oublie",element:t.jsx(S5,{})}),t.jsx(qe,{path:"/premium/confirmation",element:t.jsx(rR,{})}),t.jsx(qe,{path:"/premium/mes-cours",element:t.jsx(it,{children:t.jsx(tR,{})})}),t.jsx(qe,{path:"/premium",element:t.jsx(it,{children:t.jsx($5,{})})}),t.jsx(qe,{path:"/quizzes",element:t.jsx(Fi,{allowedRoles:["eleve","prof","admin"],children:t.jsx(it,{children:t.jsx(tI,{})})})}),t.jsx(qe,{path:"/quiz/:quizId",element:t.jsx(it,{children:t.jsx(wI,{})})}),t.jsx(qe,{path:"/quiz-avance/:quizId",element:t.jsx(it,{children:t.jsx(ZR,{})})}),t.jsx(qe,{path:"/generateur",element:t.jsx(it,{children:t.jsx(Rte,{})})}),t.jsx(qe,{path:"/eleve/dashboard",element:t.jsx(it,{children:t.jsx(BZ,{})})}),t.jsx(qe,{path:"/eleve/suivi",element:t.jsx(it,{children:t.jsx(UZ,{})})}),t.jsx(qe,{path:"/eleve/cahiers/:cahierId",element:t.jsx(Fi,{allowedRoles:["eleve","admin"],children:t.jsx(it,{children:t.jsx(YJ,{})})})}),t.jsx(qe,{path:"/parent/dashboard",element:t.jsx(Fi,{allowedRoles:["parent","admin"],children:t.jsx(it,{children:t.jsx(Dte,{})})})}),t.jsx(qe,{path:"/prof/dashboard",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(VZ,{})})})}),t.jsx(qe,{path:"/prof/cahiers",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(mJ,{})})})}),t.jsx(qe,{path:"/prof/cahiers/:cahierId",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(SJ,{})})})}),t.jsx(qe,{path:"/prof/cahiers/:cahierId/nouvelle",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(oA,{})})})}),t.jsx(qe,{path:"/prof/cahiers/:cahierId/modifier/:entreeId",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(oA,{})})})}),t.jsx(qe,{path:"/prof/sequences",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(see,{})})})}),t.jsx(qe,{path:"/prof/sequences/nouvelle",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(cA,{})})})}),t.jsx(qe,{path:"/prof/sequences/:id",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(jee,{})})})}),t.jsx(qe,{path:"/prof/sequences/:id/modifier",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(cA,{})})})}),t.jsx(qe,{path:"/prof/cours",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(Hee,{})})})}),t.jsx(qe,{path:"/prof/cours/nouveau",element:t.jsx(Lr,{children:t.jsx(it,{children:t.jsx(dA,{})})})}),t.jsx(qe,{path:"/prof/cours/:coursId/modifier",element:t.jsx(Lr,{children:t.jsx(it,{children:t.jsx(dA,{})})})}),t.jsx(qe,{path:"/admin",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(iR,{})})})}),t.jsx(qe,{path:"/admin/disciplines",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(sR,{})})})}),t.jsx(qe,{path:"/admin/chapitres",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(lR,{})})})}),t.jsx(qe,{path:"/admin/ressources",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(oR,{})})})}),t.jsx(qe,{path:"/admin/quiz",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(pR,{})})})}),t.jsx(qe,{path:"/admin/quiz/nouveau",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(X1,{})})})}),t.jsx(qe,{path:"/admin/quiz/modifier/:quizId",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(X1,{})})})}),t.jsx(qe,{path:"/admin/quiz-avance",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(HR,{})})})}),t.jsx(qe,{path:"/admin/utilisateurs",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(_R,{})})})}),t.jsx(qe,{path:"/admin/resultats",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(NR,{})})})}),t.jsx(qe,{path:"/admin/settings",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(SR,{})})})}),t.jsx(qe,{path:"/admin/ebooks",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(lte,{})})})}),t.jsx(qe,{path:"/admin/premium",element:t.jsx($d,{to:"/admin/utilisateurs?filter=premium",replace:!0})}),t.jsx(qe,{path:"/notifications",element:t.jsx(Fi,{allowedRoles:["eleve","prof","admin","parent"],children:t.jsx(it,{children:t.jsx(Ote,{})})})}),t.jsx(qe,{path:"/prof/notifications/nouvelle",element:t.jsx(Kn,{children:t.jsx(it,{children:t.jsx(gA,{})})})}),t.jsx(qe,{path:"/admin/notifications/nouvelle",element:t.jsx(Lr,{children:t.jsx(pn,{children:t.jsx(gA,{})})})}),t.jsx(qe,{path:"/cahiers",element:t.jsx($d,{to:"/prof/cahiers",replace:!0})}),t.jsx(qe,{path:"/sequences",element:t.jsx($d,{to:"/prof/sequences",replace:!0})}),t.jsx(qe,{path:"*",element:t.jsx($d,{to:"/",replace:!0})})]})]})),qM=document.getElementById("root");if(!qM)throw new Error("L'lment #root n'existe pas");const Ute=W3.createRoot(qM);Ute.render(t.jsx(Xq.StrictMode,{children:t.jsx(Zq,{children:t.jsx(Bte,{})})}));
//# sourceMappingURL=index-D36HCapw.js.map
