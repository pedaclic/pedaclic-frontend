function WS(r,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const c=Object.getOwnPropertyDescriptor(s,o);c&&Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function yb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Mm={exports:{}},ac={};var cE;function JS(){if(cE)return ac;cE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:c}}return ac.Fragment=e,ac.jsx=n,ac.jsxs=n,ac}var uE;function ZS(){return uE||(uE=1,Mm.exports=JS()),Mm.exports}var m=ZS(),Vm={exports:{}},Re={};var hE;function e1(){if(hE)return Re;hE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),S=Symbol.iterator;function V(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,G={};function re(j,J,se){this.props=j,this.context=J,this.refs=G,this.updater=se||F}re.prototype.isReactComponent={},re.prototype.setState=function(j,J){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,J,"setState")},re.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function ce(){}ce.prototype=re.prototype;function oe(j,J,se){this.props=j,this.context=J,this.refs=G,this.updater=se||F}var pe=oe.prototype=new ce;pe.constructor=oe,X(pe,re.prototype),pe.isPureReactComponent=!0;var Ce=Array.isArray;function ye(){}var N={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function C(j,J,se){var ue=se.ref;return{$$typeof:r,type:j,key:J,ref:ue!==void 0?ue:null,props:se}}function D(j,J){return C(j.type,J,j.props)}function O(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function k(j){var J={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(se){return J[se]})}var R=/\/+/g;function ke(j,J){return typeof j=="object"&&j!==null&&j.key!=null?k(""+j.key):J.toString(36)}function We(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ye,ye):(j.status="pending",j.then(function(J){j.status==="pending"&&(j.status="fulfilled",j.value=J)},function(J){j.status==="pending"&&(j.status="rejected",j.reason=J)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function $(j,J,se,ue,Te){var Y=typeof j;(Y==="undefined"||Y==="boolean")&&(j=null);var ge=!1;if(j===null)ge=!0;else switch(Y){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(j.$$typeof){case r:case e:ge=!0;break;case b:return ge=j._init,$(ge(j._payload),J,se,ue,Te)}}if(ge)return Te=Te(j),ge=ue===""?"."+ke(j,0):ue,Ce(Te)?(se="",ge!=null&&(se=ge.replace(R,"$&/")+"/"),$(Te,J,se,"",function(Qt){return Qt})):Te!=null&&(O(Te)&&(Te=D(Te,se+(Te.key==null||j&&j.key===Te.key?"":(""+Te.key).replace(R,"$&/")+"/")+ge)),J.push(Te)),1;ge=0;var Ge=ue===""?".":ue+":";if(Ce(j))for(var Pe=0;Pe<j.length;Pe++)ue=j[Pe],Y=Ge+ke(ue,Pe),ge+=$(ue,J,se,Y,Te);else if(Pe=V(j),typeof Pe=="function")for(j=Pe.call(j),Pe=0;!(ue=j.next()).done;)ue=ue.value,Y=Ge+ke(ue,Pe++),ge+=$(ue,J,se,Y,Te);else if(Y==="object"){if(typeof j.then=="function")return $(We(j),J,se,ue,Te);throw J=String(j),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ge}function ae(j,J,se){if(j==null)return j;var ue=[],Te=0;return $(j,ue,"","",function(Y){return J.call(se,Y,Te++)}),ue}function fe(j){if(j._status===-1){var J=j._result;J=J(),J.then(function(se){(j._status===0||j._status===-1)&&(j._status=1,j._result=se)},function(se){(j._status===0||j._status===-1)&&(j._status=2,j._result=se)}),j._status===-1&&(j._status=0,j._result=J)}if(j._status===1)return j._result.default;throw j._result}var Me=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ie={map:ae,forEach:function(j,J,se){ae(j,function(){J.apply(this,arguments)},se)},count:function(j){var J=0;return ae(j,function(){J++}),J},toArray:function(j){return ae(j,function(J){return J})||[]},only:function(j){if(!O(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Re.Activity=A,Re.Children=Ie,Re.Component=re,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=oe,Re.StrictMode=s,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Re.__COMPILER_RUNTIME={__proto__:null,c:function(j){return N.H.useMemoCache(j)}},Re.cache=function(j){return function(){return j.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(j,J,se){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ue=X({},j.props),Te=j.key;if(J!=null)for(Y in J.key!==void 0&&(Te=""+J.key),J)!x.call(J,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&J.ref===void 0||(ue[Y]=J[Y]);var Y=arguments.length-2;if(Y===1)ue.children=se;else if(1<Y){for(var ge=Array(Y),Ge=0;Ge<Y;Ge++)ge[Ge]=arguments[Ge+2];ue.children=ge}return C(j.type,Te,ue)},Re.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},Re.createElement=function(j,J,se){var ue,Te={},Y=null;if(J!=null)for(ue in J.key!==void 0&&(Y=""+J.key),J)x.call(J,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Te[ue]=J[ue]);var ge=arguments.length-2;if(ge===1)Te.children=se;else if(1<ge){for(var Ge=Array(ge),Pe=0;Pe<ge;Pe++)Ge[Pe]=arguments[Pe+2];Te.children=Ge}if(j&&j.defaultProps)for(ue in ge=j.defaultProps,ge)Te[ue]===void 0&&(Te[ue]=ge[ue]);return C(j,Y,Te)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(j){return{$$typeof:p,render:j}},Re.isValidElement=O,Re.lazy=function(j){return{$$typeof:b,_payload:{_status:-1,_result:j},_init:fe}},Re.memo=function(j,J){return{$$typeof:_,type:j,compare:J===void 0?null:J}},Re.startTransition=function(j){var J=N.T,se={};N.T=se;try{var ue=j(),Te=N.S;Te!==null&&Te(se,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ye,Me)}catch(Y){Me(Y)}finally{J!==null&&se.types!==null&&(J.types=se.types),N.T=J}},Re.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Re.use=function(j){return N.H.use(j)},Re.useActionState=function(j,J,se){return N.H.useActionState(j,J,se)},Re.useCallback=function(j,J){return N.H.useCallback(j,J)},Re.useContext=function(j){return N.H.useContext(j)},Re.useDebugValue=function(){},Re.useDeferredValue=function(j,J){return N.H.useDeferredValue(j,J)},Re.useEffect=function(j,J){return N.H.useEffect(j,J)},Re.useEffectEvent=function(j){return N.H.useEffectEvent(j)},Re.useId=function(){return N.H.useId()},Re.useImperativeHandle=function(j,J,se){return N.H.useImperativeHandle(j,J,se)},Re.useInsertionEffect=function(j,J){return N.H.useInsertionEffect(j,J)},Re.useLayoutEffect=function(j,J){return N.H.useLayoutEffect(j,J)},Re.useMemo=function(j,J){return N.H.useMemo(j,J)},Re.useOptimistic=function(j,J){return N.H.useOptimistic(j,J)},Re.useReducer=function(j,J,se){return N.H.useReducer(j,J,se)},Re.useRef=function(j){return N.H.useRef(j)},Re.useState=function(j){return N.H.useState(j)},Re.useSyncExternalStore=function(j,J,se){return N.H.useSyncExternalStore(j,J,se)},Re.useTransition=function(){return N.H.useTransition()},Re.version="19.2.4",Re}var dE;function Mp(){return dE||(dE=1,Vm.exports=e1()),Vm.exports}var z=Mp();const _b=yb(z),t1=WS({__proto__:null,default:_b},[z]);var km={exports:{}},oc={},Pm={exports:{}},Lm={};var fE;function n1(){return fE||(fE=1,(function(r){function e($,ae){var fe=$.length;$.push(ae);e:for(;0<fe;){var Me=fe-1>>>1,Ie=$[Me];if(0<o(Ie,ae))$[Me]=ae,$[fe]=Ie,fe=Me;else break e}}function n($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var ae=$[0],fe=$.pop();if(fe!==ae){$[0]=fe;e:for(var Me=0,Ie=$.length,j=Ie>>>1;Me<j;){var J=2*(Me+1)-1,se=$[J],ue=J+1,Te=$[ue];if(0>o(se,fe))ue<Ie&&0>o(Te,se)?($[Me]=Te,$[ue]=fe,Me=ue):($[Me]=se,$[J]=fe,Me=J);else if(ue<Ie&&0>o(Te,fe))$[Me]=Te,$[ue]=fe,Me=ue;else break e}}return ae}function o($,ae){var fe=$.sortIndex-ae.sortIndex;return fe!==0?fe:$.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],_=[],b=1,A=null,S=3,V=!1,F=!1,X=!1,G=!1,re=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function pe($){for(var ae=n(_);ae!==null;){if(ae.callback===null)s(_);else if(ae.startTime<=$)s(_),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=n(_)}}function Ce($){if(X=!1,pe($),!F)if(n(g)!==null)F=!0,ye||(ye=!0,k());else{var ae=n(_);ae!==null&&We(Ce,ae.startTime-$)}}var ye=!1,N=-1,x=5,C=-1;function D(){return G?!0:!(r.unstable_now()-C<x)}function O(){if(G=!1,ye){var $=r.unstable_now();C=$;var ae=!0;try{e:{F=!1,X&&(X=!1,ce(N),N=-1),V=!0;var fe=S;try{t:{for(pe($),A=n(g);A!==null&&!(A.expirationTime>$&&D());){var Me=A.callback;if(typeof Me=="function"){A.callback=null,S=A.priorityLevel;var Ie=Me(A.expirationTime<=$);if($=r.unstable_now(),typeof Ie=="function"){A.callback=Ie,pe($),ae=!0;break t}A===n(g)&&s(g),pe($)}else s(g);A=n(g)}if(A!==null)ae=!0;else{var j=n(_);j!==null&&We(Ce,j.startTime-$),ae=!1}}break e}finally{A=null,S=fe,V=!1}ae=void 0}}finally{ae?k():ye=!1}}}var k;if(typeof oe=="function")k=function(){oe(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ke=R.port2;R.port1.onmessage=O,k=function(){ke.postMessage(null)}}else k=function(){re(O,0)};function We($,ae){N=re(function(){$(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function($){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var fe=S;S=ae;try{return $()}finally{S=fe}},r.unstable_requestPaint=function(){G=!0},r.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var fe=S;S=$;try{return ae()}finally{S=fe}},r.unstable_scheduleCallback=function($,ae,fe){var Me=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Me+fe:Me):fe=Me,$){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=fe+Ie,$={id:b++,callback:ae,priorityLevel:$,startTime:fe,expirationTime:Ie,sortIndex:-1},fe>Me?($.sortIndex=fe,e(_,$),n(g)===null&&$===n(_)&&(X?(ce(N),N=-1):X=!0,We(Ce,fe-Me))):($.sortIndex=Ie,e(g,$),F||V||(F=!0,ye||(ye=!0,k()))),$},r.unstable_shouldYield=D,r.unstable_wrapCallback=function($){var ae=S;return function(){var fe=S;S=ae;try{return $.apply(this,arguments)}finally{S=fe}}}})(Lm)),Lm}var mE;function i1(){return mE||(mE=1,Pm.exports=n1()),Pm.exports}var Um={exports:{}},pn={};var pE;function r1(){if(pE)return pn;pE=1;var r=Mp();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)_+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,_,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:_,implementation:b}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,pn.createPortal=function(g,_){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(g,_,null,b)},pn.flushSync=function(g){var _=d.T,b=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=_,s.p=b,s.d.f()}},pn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(g,_))},pn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},pn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var b=_.as,A=p(b,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,V=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;b==="style"?s.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:V}):b==="script"&&s.d.X(g,{crossOrigin:A,integrity:S,fetchPriority:V,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},pn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var b=p(_.as,_.crossOrigin);s.d.M(g,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(g)},pn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var b=_.as,A=p(b,_.crossOrigin);s.d.L(g,b,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},pn.preloadModule=function(g,_){if(typeof g=="string")if(_){var b=p(_.as,_.crossOrigin);s.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(g)},pn.requestFormReset=function(g){s.d.r(g)},pn.unstable_batchedUpdates=function(g,_){return g(_)},pn.useFormState=function(g,_,b){return d.H.useFormState(g,_,b)},pn.useFormStatus=function(){return d.H.useHostTransitionStatus()},pn.version="19.2.4",pn}var gE;function vb(){if(gE)return Um.exports;gE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Um.exports=r1(),Um.exports}var yE;function s1(){if(yE)return oc;yE=1;var r=i1(),e=Mp(),n=vb();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function _(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),t;if(f===l)return g(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=f;break}if(T===l){v=!0,l=h,a=f;break}T=T.sibling}if(!v){for(T=f.child;T;){if(T===a){v=!0,a=f,l=h;break}if(T===l){v=!0,l=f,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function b(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=b(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,S=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case re:return"Profiler";case G:return"StrictMode";case Ce:return"Suspense";case ye:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case oe:return t.displayName||"Context";case ce:return(t._context.displayName||"Context")+".Consumer";case pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:ke(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return ke(t(i))}catch{}}return null}var We=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Me=[],Ie=-1;function j(t){return{current:t}}function J(t){0>Ie||(t.current=Me[Ie],Me[Ie]=null,Ie--)}function se(t,i){Ie++,Me[Ie]=t.current,t.current=i}var ue=j(null),Te=j(null),Y=j(null),ge=j(null);function Ge(t,i){switch(se(Y,i),se(Te,t),se(ue,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Ov(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Ov(i),t=jv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(ue),se(ue,t)}function Pe(){J(ue),J(Te),J(Y)}function Qt(t){t.memoizedState!==null&&se(ge,t);var i=ue.current,a=jv(i,t.type);i!==a&&(se(Te,t),se(ue,a))}function W(t){Te.current===t&&(J(ue),J(Te)),ge.current===t&&(J(ge),nc._currentValue=fe)}var pt,Ve;function Ct(t){if(pt===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);pt=i&&i[1]||"",Ve=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+t+Ve}var kt=!1;function Wt(t,i){if(!t||kt)return"";kt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var H=Q}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(Q){H=Q}t.call(ne.prototype)}}else{try{throw Error()}catch(Q){H=Q}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&H&&typeof Q.stack=="string")return[Q.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),v=f[0],T=f[1];if(v&&T){var I=v.split(`
`),q=T.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===q.length)for(l=I.length-1,h=q.length-1;1<=l&&0<=h&&I[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==q[h]){var Z=`
`+I[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=h);break}}}finally{kt=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ct(a):""}function Yt(t,i){switch(t.tag){case 26:case 27:case 5:return Ct(t.type);case 16:return Ct("Lazy");case 13:return t.child!==i&&i!==null?Ct("Suspense Fallback"):Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 15:return Wt(t.type,!1);case 11:return Wt(t.type.render,!1);case 1:return Wt(t.type,!0);case 31:return Ct("Activity");default:return""}}function di(t){try{var i="",a=null;do i+=Yt(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ht=Object.prototype.hasOwnProperty,dt=r.unstable_scheduleCallback,Xn=r.unstable_cancelCallback,Vr=r.unstable_shouldYield,Ci=r.unstable_requestPaint,Jt=r.unstable_now,Ii=r.unstable_getCurrentPriorityLevel,fi=r.unstable_ImmediatePriority,Ks=r.unstable_UserBlockingPriority,Di=r.unstable_NormalPriority,Ba=r.unstable_LowPriority,qa=r.unstable_IdlePriority,Fa=r.log,Ha=r.unstable_setDisableYieldValue,At=null,tt=null;function Sn(t){if(typeof Fa=="function"&&Ha(t),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(At,t)}catch{}}var bt=Math.clz32?Math.clz32:Ga,Qs=Math.log,kr=Math.LN2;function Ga(t){return t>>>=0,t===0?32:31-(Qs(t)/kr|0)|0}var $n=256,ar=262144,wt=4194304;function Wn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function mn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Wn(l):(v&=T,v!==0?h=Wn(v):a||(a=T&~t,a!==0&&(h=Wn(a))))):(T=l&~f,T!==0?h=Wn(T):v!==0?h=Wn(v):a||(a=l&~t,a!==0&&(h=Wn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function kn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function L(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function be(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function Qe(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Zt(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ys(t,i,a,l,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,I=t.expirationTimes,q=t.hiddenUpdates;for(a=v&~a;0<a;){var Z=31-bt(a),ne=1<<Z;T[Z]=0,I[Z]=-1;var H=q[Z];if(H!==null)for(q[Z]=null,Z=0;Z<H.length;Z++){var Q=H[Z];Q!==null&&(Q.lane&=-536870913)}a&=~ne}l!==0&&xn(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~i))}function xn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-bt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Xs(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-bt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function ll(t,i){var a=i&-i;return a=(a&42)!==0?1:$s(a),(a&(t.suspendedLanes|i))!==0?0:a}function $s(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function or(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Jc(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:nE(t.type))}function mi(t,i){var a=ae.p;try{return ae.p=t,i()}finally{ae.p=a}}var pi=Math.random().toString(36).slice(2),Pt="__reactFiber$"+pi,en="__reactProps$"+pi,Oi="__reactContainer$"+pi,Ka="__reactEvents$"+pi,Ud="__reactListeners$"+pi,Zc="__reactHandles$"+pi,eu="__reactResources$"+pi,ji="__reactMarker$"+pi;function Qa(t){delete t[Pt],delete t[en],delete t[Ka],delete t[Ud],delete t[Zc]}function Mi(t){var i=t[Pt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Oi]||a[Pt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=zv(t);t!==null;){if(a=t[Pt])return a;t=zv(t)}return i}t=a,a=t.parentNode}return null}function Jn(t){if(t=t[Pt]||t[Oi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Pn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Vi(t){var i=t[eu];return i||(i=t[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Lt(t){t[ji]=!0}var cl=new Set,ul={};function ki(t,i){Pi(t,i),Pi(t+"Capture",i)}function Pi(t,i){for(ul[t]=i,t=0;t<i.length;t++)cl.add(i[t])}var hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dl={},fl={};function tu(t){return ht.call(fl,t)?!0:ht.call(dl,t)?!1:hl.test(t)?fl[t]=!0:(dl[t]=!0,!1)}function Ya(t,i,a){if(tu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Ln(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Ut(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ml(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,f.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function nt(t){if(!t._valueTracker){var i=Pr(t)?"checked":"value";t._valueTracker=ml(t,i,""+t[i])}}function Ws(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Pr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Li(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Js=/[\n"\\]/g;function Rn(t){return t.replace(Js,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Xa(t,i,a,l,h,f,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+tn(i)):t.value!==""+tn(i)&&(t.value=""+tn(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?pl(t,v,tn(i)):a!=null?pl(t,v,tn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+tn(T):t.removeAttribute("name")}function nu(t,i,a,l,h,f,v,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){nt(t);return}a=a!=null?""+tn(a):"",i=i!=null?""+tn(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),nt(t)}function pl(t,i,a){i==="number"&&Li(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Lr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+tn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function iu(t,i,a){if(i!=null&&(i=""+tn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+tn(a):""}function Ur(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(We(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=tn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),nt(t)}function Nn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ru.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function yl(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&gl(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&gl(t,f,i[f])}function $a(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var su=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(t){return zr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function gi(){}var _l=null;function Zn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Br=null,Ui=null;function Zs(t){var i=Jn(t);if(i&&(t=i.stateNode)){var a=t[en]||null;e:switch(t=i.stateNode,i.type){case"input":if(Xa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[en]||null;if(!h)throw Error(s(90));Xa(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ws(l)}break e;case"textarea":iu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Lr(t,!!a.multiple,i,!1)}}}var Ja=!1;function qr(t,i,a){if(Ja)return t(i,a);Ja=!0;try{var l=t(i);return l}finally{if(Ja=!1,(Br!==null||Ui!==null)&&(Ju(),Br&&(i=Br,t=Ui,Ui=Br=null,Zs(i),t)))for(i=0;i<t.length;i++)Zs(t[i])}}function yi(t,i){var a=t.stateNode;if(a===null)return null;var l=a[en]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=!1;if(ei)try{var st={};Object.defineProperty(st,"passive",{get:function(){ea=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{ea=!1}var zi=null,vl=null,ta=null;function El(){if(ta)return ta;var t,i=vl,a=i.length,l,h="value"in zi?zi.value:zi.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[f-l];l++);return ta=h.slice(t,1<l?1-l:void 0)}function na(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function lr(){return!0}function _i(){return!1}function sn(t){function i(a,l,h,f,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?lr:_i,this.isPropagationStopped=_i,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),i}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=sn(cr),Fr=A({},cr,{view:0,detail:0}),bl=sn(Fr),Hr,Za,qi,eo=A({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qi&&(qi&&t.type==="mousemove"?(Hr=t.screenX-qi.screenX,Za=t.screenY-qi.screenY):Za=Hr=0,qi=t),Hr)},movementY:function(t){return"movementY"in t?t.movementY:Za}}),Tl=sn(eo),ia=A({},eo,{dataTransfer:0}),au=sn(ia),ou=A({},Fr,{relatedTarget:0}),ra=sn(ou),Al=A({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),lu=sn(Al),to=A({},cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cu=sn(to),uu=A({},cr,{data:0}),Fi=sn(uu),hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=fu[t])?!!i[t]:!1}function Gr(){return mu}var En=A({},Fr,{key:function(t){if(t.key){var i=hu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?du[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(t){return t.type==="keypress"?na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pu=sn(En),gu=A({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ur=sn(gu),u=A({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),y=sn(u),E=A({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=sn(E),U=A({},eo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=sn(U),le=A({},cr,{newState:0,oldState:0}),De=sn(le),It=[9,13,27,32],Je=ei&&"CompositionEvent"in window,vt=null;ei&&"documentMode"in document&&(vt=document.documentMode);var ti=ei&&"TextEvent"in window&&!vt,Hi=ei&&(!Je||vt&&8<vt&&11>=vt),vi=" ",Ei=!1;function sa(t,i){switch(t){case"keyup":return It.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function bw(t,i){switch(t){case"compositionend":return no(i);case"keypress":return i.which!==32?null:(Ei=!0,vi);case"textInput":return t=i.data,t===vi&&Ei?null:t;default:return null}}function Tw(t,i){if(io)return t==="compositionend"||!Je&&sa(t,i)?(t=El(),ta=vl=zi=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Hi&&i.locale!=="ko"?null:i.data;default:return null}}var Aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Aw[t.type]:i==="textarea"}function Hg(t,i,a,l){Br?Ui?Ui.push(l):Ui=[l]:Br=l,i=sh(i,"onChange"),0<i.length&&(a=new Bi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var wl=null,Sl=null;function ww(t){xv(t,0)}function yu(t){var i=Pn(t);if(Ws(i))return t}function Gg(t,i){if(t==="change")return i}var Kg=!1;if(ei){var zd;if(ei){var Bd="oninput"in document;if(!Bd){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),Bd=typeof Qg.oninput=="function"}zd=Bd}else zd=!1;Kg=zd&&(!document.documentMode||9<document.documentMode)}function Yg(){wl&&(wl.detachEvent("onpropertychange",Xg),Sl=wl=null)}function Xg(t){if(t.propertyName==="value"&&yu(Sl)){var i=[];Hg(i,Sl,t,Zn(t)),qr(ww,i)}}function Sw(t,i,a){t==="focusin"?(Yg(),wl=i,Sl=a,wl.attachEvent("onpropertychange",Xg)):t==="focusout"&&Yg()}function xw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(Sl)}function Rw(t,i){if(t==="click")return yu(i)}function Nw(t,i){if(t==="input"||t==="change")return yu(i)}function Cw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Un=typeof Object.is=="function"?Object.is:Cw;function xl(t,i){if(Un(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ht.call(i,h)||!Un(t[h],i[h]))return!1}return!0}function $g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,i){var a=$g(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=$g(a)}}function Jg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Jg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Zg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Li(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Li(t.document)}return i}function qd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Iw=ei&&"documentMode"in document&&11>=document.documentMode,ro=null,Fd=null,Rl=null,Hd=!1;function ey(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hd||ro==null||ro!==Li(l)||(l=ro,"selectionStart"in l&&qd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Rl&&xl(Rl,l)||(Rl=l,l=sh(Fd,"onSelect"),0<l.length&&(i=new Bi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ro)))}function aa(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var so={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionrun:aa("Transition","TransitionRun"),transitionstart:aa("Transition","TransitionStart"),transitioncancel:aa("Transition","TransitionCancel"),transitionend:aa("Transition","TransitionEnd")},Gd={},ty={};ei&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function oa(t){if(Gd[t])return Gd[t];if(!so[t])return t;var i=so[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in ty)return Gd[t]=i[a];return t}var ny=oa("animationend"),iy=oa("animationiteration"),ry=oa("animationstart"),Dw=oa("transitionrun"),Ow=oa("transitionstart"),jw=oa("transitioncancel"),sy=oa("transitionend"),ay=new Map,Kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kd.push("scrollEnd");function bi(t,i){ay.set(t,i),ki(i,[t])}var _u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ni=[],ao=0,Qd=0;function vu(){for(var t=ao,i=Qd=ao=0;i<t;){var a=ni[i];ni[i++]=null;var l=ni[i];ni[i++]=null;var h=ni[i];ni[i++]=null;var f=ni[i];if(ni[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}f!==0&&oy(a,h,f)}}function Eu(t,i,a,l){ni[ao++]=t,ni[ao++]=i,ni[ao++]=a,ni[ao++]=l,Qd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Yd(t,i,a,l){return Eu(t,i,a,l),bu(t)}function la(t,i){return Eu(t,null,null,i),bu(t)}function oy(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-bt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function bu(t){if(50<Xl)throw Xl=0,rm=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var oo={};function Mw(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,i,a,l){return new Mw(t,i,a,l)}function Xd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hr(t,i){var a=t.alternate;return a===null?(a=zn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ly(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Tu(t,i,a,l,h,f){var v=0;if(l=t,typeof t=="function")Xd(t)&&(v=1);else if(typeof t=="string")v=US(t,a,ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=zn(31,a,i,h),t.elementType=C,t.lanes=f,t;case X:return ca(a.children,h,f,i);case G:v=8,h|=24;break;case re:return t=zn(12,a,i,h|2),t.elementType=re,t.lanes=f,t;case Ce:return t=zn(13,a,i,h),t.elementType=Ce,t.lanes=f,t;case ye:return t=zn(19,a,i,h),t.elementType=ye,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:v=10;break e;case ce:v=9;break e;case pe:v=11;break e;case N:v=14;break e;case x:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=zn(v,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function ca(t,i,a,l){return t=zn(7,t,l,i),t.lanes=a,t}function $d(t,i,a){return t=zn(6,t,null,i),t.lanes=a,t}function cy(t){var i=zn(18,null,null,0);return i.stateNode=t,i}function Wd(t,i,a){return i=zn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var uy=new WeakMap;function ii(t,i){if(typeof t=="object"&&t!==null){var a=uy.get(t);return a!==void 0?a:(i={value:t,source:i,stack:di(i)},uy.set(t,i),i)}return{value:t,source:i,stack:di(i)}}var lo=[],co=0,Au=null,Nl=0,ri=[],si=0,Kr=null,Gi=1,Ki="";function dr(t,i){lo[co++]=Nl,lo[co++]=Au,Au=t,Nl=i}function hy(t,i,a){ri[si++]=Gi,ri[si++]=Ki,ri[si++]=Kr,Kr=t;var l=Gi;t=Ki;var h=32-bt(l)-1;l&=~(1<<h),a+=1;var f=32-bt(i)+h;if(30<f){var v=h-h%5;f=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Gi=1<<32-bt(i)+h|a<<h|l,Ki=f+t}else Gi=1<<f|a<<h|l,Ki=t}function Jd(t){t.return!==null&&(dr(t,1),hy(t,1,0))}function Zd(t){for(;t===Au;)Au=lo[--co],lo[co]=null,Nl=lo[--co],lo[co]=null;for(;t===Kr;)Kr=ri[--si],ri[si]=null,Ki=ri[--si],ri[si]=null,Gi=ri[--si],ri[si]=null}function dy(t,i){ri[si++]=Gi,ri[si++]=Ki,ri[si++]=Kr,Gi=i.id,Ki=i.overflow,Kr=t}var an=null,gt=null,Ke=!1,Qr=null,ai=!1,ef=Error(s(519));function Yr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cl(ii(i,t)),ef}function fy(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Pt]=t,i[en]=l,a){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(a=0;a<Wl.length;a++)Ue(Wl[a],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Ue("invalid",i),nu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ue("invalid",i);break;case"textarea":Ue("invalid",i),Ur(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Iv(i.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",i),Ue("toggle",i)),l.onScroll!=null&&Ue("scroll",i),l.onScrollEnd!=null&&Ue("scrollend",i),l.onClick!=null&&(i.onclick=gi),i=!0):i=!1,i||Yr(t,!0)}function my(t){for(an=t.return;an;)switch(an.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:an=an.return}}function uo(t){if(t!==an)return!1;if(!Ke)return my(t),Ke=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||vm(t.type,t.memoizedProps)),a=!a),a&&gt&&Yr(t),my(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));gt=Uv(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));gt=Uv(t)}else i===27?(i=gt,ls(t.type)?(t=wm,wm=null,gt=t):gt=i):gt=an?li(t.stateNode.nextSibling):null;return!0}function ua(){gt=an=null,Ke=!1}function tf(){var t=Qr;return t!==null&&(On===null?On=t:On.push.apply(On,t),Qr=null),t}function Cl(t){Qr===null?Qr=[t]:Qr.push(t)}var nf=j(null),ha=null,fr=null;function Xr(t,i,a){se(nf,i._currentValue),i._currentValue=a}function mr(t){t._currentValue=nf.current,J(nf)}function rf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function sf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var I=0;I<i.length;I++)if(T.context===i[I]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),rf(f.return,a,t),l||(v=null);break e}f=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),rf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ho(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;Un(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===ge.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(nc):t=[nc])}h=h.return}t!==null&&sf(i,t,a,l),i.flags|=262144}function wu(t){for(t=t.firstContext;t!==null;){if(!Un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function da(t){ha=t,fr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function on(t){return py(ha,t)}function Su(t,i){return ha===null&&da(t),py(t,i)}function py(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},fr===null){if(t===null)throw Error(s(308));fr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else fr=fr.next=i;return a}var Vw=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},kw=r.unstable_scheduleCallback,Pw=r.unstable_NormalPriority,zt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function af(){return{controller:new Vw,data:new Map,refCount:0}}function Il(t){t.refCount--,t.refCount===0&&kw(Pw,function(){t.controller.abort()})}var Dl=null,of=0,fo=0,mo=null;function Lw(t,i){if(Dl===null){var a=Dl=[];of=0,fo=um(),mo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return of++,i.then(gy,gy),i}function gy(){if(--of===0&&Dl!==null){mo!==null&&(mo.status="fulfilled");var t=Dl;Dl=null,fo=0,mo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Uw(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var yy=$.S;$.S=function(t,i){ev=Jt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Lw(t,i),yy!==null&&yy(t,i)};var fa=j(null);function lf(){var t=fa.current;return t!==null?t:ct.pooledCache}function xu(t,i){i===null?se(fa,fa.current):se(fa,i.pool)}function _y(){var t=lf();return t===null?null:{parent:zt._currentValue,pool:t}}var po=Error(s(460)),cf=Error(s(474)),Ru=Error(s(542)),Nu={then:function(){}};function vy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ey(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(gi,gi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Ty(t),t;default:if(typeof i.status=="string")i.then(gi,gi);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Ty(t),t}throw pa=i,po}}function ma(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(pa=a,po):a}}var pa=null;function by(){if(pa===null)throw Error(s(459));var t=pa;return pa=null,t}function Ty(t){if(t===po||t===Ru)throw Error(s(483))}var go=null,Ol=0;function Cu(t){var i=Ol;return Ol+=1,go===null&&(go=[]),Ey(go,t,i)}function jl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Iu(t,i){throw i.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ay(t){function i(P,M){if(t){var B=P.deletions;B===null?(P.deletions=[M],P.flags|=16):B.push(M)}}function a(P,M){if(!t)return null;for(;M!==null;)i(P,M),M=M.sibling;return null}function l(P){for(var M=new Map;P!==null;)P.key!==null?M.set(P.key,P):M.set(P.index,P),P=P.sibling;return M}function h(P,M){return P=hr(P,M),P.index=0,P.sibling=null,P}function f(P,M,B){return P.index=B,t?(B=P.alternate,B!==null?(B=B.index,B<M?(P.flags|=67108866,M):B):(P.flags|=67108866,M)):(P.flags|=1048576,M)}function v(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function T(P,M,B,te){return M===null||M.tag!==6?(M=$d(B,P.mode,te),M.return=P,M):(M=h(M,B),M.return=P,M)}function I(P,M,B,te){var ve=B.type;return ve===X?Z(P,M,B.props.children,te,B.key):M!==null&&(M.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&ma(ve)===M.type)?(M=h(M,B.props),jl(M,B),M.return=P,M):(M=Tu(B.type,B.key,B.props,null,P.mode,te),jl(M,B),M.return=P,M)}function q(P,M,B,te){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=Wd(B,P.mode,te),M.return=P,M):(M=h(M,B.children||[]),M.return=P,M)}function Z(P,M,B,te,ve){return M===null||M.tag!==7?(M=ca(B,P.mode,te,ve),M.return=P,M):(M=h(M,B),M.return=P,M)}function ne(P,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=$d(""+M,P.mode,B),M.return=P,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case V:return B=Tu(M.type,M.key,M.props,null,P.mode,B),jl(B,M),B.return=P,B;case F:return M=Wd(M,P.mode,B),M.return=P,M;case x:return M=ma(M),ne(P,M,B)}if(We(M)||k(M))return M=ca(M,P.mode,B,null),M.return=P,M;if(typeof M.then=="function")return ne(P,Cu(M),B);if(M.$$typeof===oe)return ne(P,Su(P,M),B);Iu(P,M)}return null}function H(P,M,B,te){var ve=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ve!==null?null:T(P,M,""+B,te);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case V:return B.key===ve?I(P,M,B,te):null;case F:return B.key===ve?q(P,M,B,te):null;case x:return B=ma(B),H(P,M,B,te)}if(We(B)||k(B))return ve!==null?null:Z(P,M,B,te,null);if(typeof B.then=="function")return H(P,M,Cu(B),te);if(B.$$typeof===oe)return H(P,M,Su(P,B),te);Iu(P,B)}return null}function Q(P,M,B,te,ve){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return P=P.get(B)||null,T(M,P,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case V:return P=P.get(te.key===null?B:te.key)||null,I(M,P,te,ve);case F:return P=P.get(te.key===null?B:te.key)||null,q(M,P,te,ve);case x:return te=ma(te),Q(P,M,B,te,ve)}if(We(te)||k(te))return P=P.get(B)||null,Z(M,P,te,ve,null);if(typeof te.then=="function")return Q(P,M,B,Cu(te),ve);if(te.$$typeof===oe)return Q(P,M,B,Su(M,te),ve);Iu(M,te)}return null}function me(P,M,B,te){for(var ve=null,Xe=null,_e=M,je=M=0,Be=null;_e!==null&&je<B.length;je++){_e.index>je?(Be=_e,_e=null):Be=_e.sibling;var $e=H(P,_e,B[je],te);if($e===null){_e===null&&(_e=Be);break}t&&_e&&$e.alternate===null&&i(P,_e),M=f($e,M,je),Xe===null?ve=$e:Xe.sibling=$e,Xe=$e,_e=Be}if(je===B.length)return a(P,_e),Ke&&dr(P,je),ve;if(_e===null){for(;je<B.length;je++)_e=ne(P,B[je],te),_e!==null&&(M=f(_e,M,je),Xe===null?ve=_e:Xe.sibling=_e,Xe=_e);return Ke&&dr(P,je),ve}for(_e=l(_e);je<B.length;je++)Be=Q(_e,P,je,B[je],te),Be!==null&&(t&&Be.alternate!==null&&_e.delete(Be.key===null?je:Be.key),M=f(Be,M,je),Xe===null?ve=Be:Xe.sibling=Be,Xe=Be);return t&&_e.forEach(function(fs){return i(P,fs)}),Ke&&dr(P,je),ve}function Ae(P,M,B,te){if(B==null)throw Error(s(151));for(var ve=null,Xe=null,_e=M,je=M=0,Be=null,$e=B.next();_e!==null&&!$e.done;je++,$e=B.next()){_e.index>je?(Be=_e,_e=null):Be=_e.sibling;var fs=H(P,_e,$e.value,te);if(fs===null){_e===null&&(_e=Be);break}t&&_e&&fs.alternate===null&&i(P,_e),M=f(fs,M,je),Xe===null?ve=fs:Xe.sibling=fs,Xe=fs,_e=Be}if($e.done)return a(P,_e),Ke&&dr(P,je),ve;if(_e===null){for(;!$e.done;je++,$e=B.next())$e=ne(P,$e.value,te),$e!==null&&(M=f($e,M,je),Xe===null?ve=$e:Xe.sibling=$e,Xe=$e);return Ke&&dr(P,je),ve}for(_e=l(_e);!$e.done;je++,$e=B.next())$e=Q(_e,P,je,$e.value,te),$e!==null&&(t&&$e.alternate!==null&&_e.delete($e.key===null?je:$e.key),M=f($e,M,je),Xe===null?ve=$e:Xe.sibling=$e,Xe=$e);return t&&_e.forEach(function($S){return i(P,$S)}),Ke&&dr(P,je),ve}function lt(P,M,B,te){if(typeof B=="object"&&B!==null&&B.type===X&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case V:e:{for(var ve=B.key;M!==null;){if(M.key===ve){if(ve=B.type,ve===X){if(M.tag===7){a(P,M.sibling),te=h(M,B.props.children),te.return=P,P=te;break e}}else if(M.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&ma(ve)===M.type){a(P,M.sibling),te=h(M,B.props),jl(te,B),te.return=P,P=te;break e}a(P,M);break}else i(P,M);M=M.sibling}B.type===X?(te=ca(B.props.children,P.mode,te,B.key),te.return=P,P=te):(te=Tu(B.type,B.key,B.props,null,P.mode,te),jl(te,B),te.return=P,P=te)}return v(P);case F:e:{for(ve=B.key;M!==null;){if(M.key===ve)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){a(P,M.sibling),te=h(M,B.children||[]),te.return=P,P=te;break e}else{a(P,M);break}else i(P,M);M=M.sibling}te=Wd(B,P.mode,te),te.return=P,P=te}return v(P);case x:return B=ma(B),lt(P,M,B,te)}if(We(B))return me(P,M,B,te);if(k(B)){if(ve=k(B),typeof ve!="function")throw Error(s(150));return B=ve.call(B),Ae(P,M,B,te)}if(typeof B.then=="function")return lt(P,M,Cu(B),te);if(B.$$typeof===oe)return lt(P,M,Su(P,B),te);Iu(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(a(P,M.sibling),te=h(M,B),te.return=P,P=te):(a(P,M),te=$d(B,P.mode,te),te.return=P,P=te),v(P)):a(P,M)}return function(P,M,B,te){try{Ol=0;var ve=lt(P,M,B,te);return go=null,ve}catch(_e){if(_e===po||_e===Ru)throw _e;var Xe=zn(29,_e,null,P.mode);return Xe.lanes=te,Xe.return=P,Xe}}}var ga=Ay(!0),wy=Ay(!1),$r=!1;function uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Wr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Jr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=bu(t),oy(t,null,a),i}return Eu(t,l,i,a),bu(t)}function Ml(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Xs(t,a)}}function df(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var ff=!1;function Vl(){if(ff){var t=mo;if(t!==null)throw t}}function kl(t,i,a,l){ff=!1;var h=t.updateQueue;$r=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var I=T,q=I.next;I.next=null,v===null?f=q:v.next=q,v=I;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==v&&(T===null?Z.firstBaseUpdate=q:T.next=q,Z.lastBaseUpdate=I))}if(f!==null){var ne=h.baseState;v=0,Z=q=I=null,T=f;do{var H=T.lane&-536870913,Q=H!==T.lane;if(Q?(ze&H)===H:(l&H)===H){H!==0&&H===fo&&(ff=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var me=t,Ae=T;H=i;var lt=a;switch(Ae.tag){case 1:if(me=Ae.payload,typeof me=="function"){ne=me.call(lt,ne,H);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ae.payload,H=typeof me=="function"?me.call(lt,ne,H):me,H==null)break e;ne=A({},ne,H);break e;case 2:$r=!0}}H=T.callback,H!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[H]:Q.push(H))}else Q={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(q=Z=Q,I=ne):Z=Z.next=Q,v|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);Z===null&&(I=ne),h.baseState=I,h.firstBaseUpdate=q,h.lastBaseUpdate=Z,f===null&&(h.shared.lanes=0),is|=v,t.lanes=v,t.memoizedState=ne}}function Sy(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function xy(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Sy(a[t],i)}var yo=j(null),Du=j(0);function Ry(t,i){t=Ar,se(Du,t),se(yo,i),Ar=t|i.baseLanes}function mf(){se(Du,Ar),se(yo,yo.current)}function pf(){Ar=Du.current,J(yo),J(Du)}var Bn=j(null),oi=null;function Zr(t){var i=t.alternate;se(Dt,Dt.current&1),se(Bn,t),oi===null&&(i===null||yo.current!==null||i.memoizedState!==null)&&(oi=t)}function gf(t){se(Dt,Dt.current),se(Bn,t),oi===null&&(oi=t)}function Ny(t){t.tag===22?(se(Dt,Dt.current),se(Bn,t),oi===null&&(oi=t)):es()}function es(){se(Dt,Dt.current),se(Bn,Bn.current)}function qn(t){J(Bn),oi===t&&(oi=null),J(Dt)}var Dt=j(0);function Ou(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Tm(a)||Am(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var pr=0,Oe=null,at=null,Bt=null,ju=!1,_o=!1,ya=!1,Mu=0,Pl=0,vo=null,zw=0;function St(){throw Error(s(321))}function yf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Un(t[a],i[a]))return!1;return!0}function _f(t,i,a,l,h,f){return pr=f,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=t===null||t.memoizedState===null?h_:jf,ya=!1,f=a(l,h),ya=!1,_o&&(f=Iy(i,a,l,h)),Cy(t),f}function Cy(t){$.H=zl;var i=at!==null&&at.next!==null;if(pr=0,Bt=at=Oe=null,ju=!1,Pl=0,vo=null,i)throw Error(s(300));t===null||qt||(t=t.dependencies,t!==null&&wu(t)&&(qt=!0))}function Iy(t,i,a,l){Oe=t;var h=0;do{if(_o&&(vo=null),Pl=0,_o=!1,25<=h)throw Error(s(301));if(h+=1,Bt=at=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}$.H=d_,f=i(a,l)}while(_o);return f}function Bw(){var t=$.H,i=t.useState()[0];return i=typeof i.then=="function"?Ll(i):i,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(Oe.flags|=1024),i}function vf(){var t=Mu!==0;return Mu=0,t}function Ef(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function bf(t){if(ju){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ju=!1}pr=0,Bt=at=Oe=null,_o=!1,Pl=Mu=0,vo=null}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Oe.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Ot(){if(at===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var i=Bt===null?Oe.memoizedState:Bt.next;if(i!==null)Bt=i,at=t;else{if(t===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Bt===null?Oe.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(t){var i=Pl;return Pl+=1,vo===null&&(vo=[]),t=Ey(vo,t,i),i=Oe,(Bt===null?i.memoizedState:Bt.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?h_:jf),t}function ku(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ll(t);if(t.$$typeof===oe)return on(t)}throw Error(s(438,String(t)))}function Tf(t){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Vu(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=D;return i.index++,a}function gr(t,i){return typeof i=="function"?i(t):i}function Pu(t){var i=Ot();return Af(i,at,t)}function Af(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=v=null,I=null,q=i,Z=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(ze&ne)===ne:(pr&ne)===ne){var H=q.revertLane;if(H===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===fo&&(Z=!0);else if((pr&H)===H){q=q.next,H===fo&&(Z=!0);continue}else ne={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(T=I=ne,v=f):I=I.next=ne,Oe.lanes|=H,is|=H;ne=q.action,ya&&a(f,ne),f=q.hasEagerState?q.eagerState:a(f,ne)}else H={lane:ne,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(T=I=H,v=f):I=I.next=H,Oe.lanes|=ne,is|=ne;q=q.next}while(q!==null&&q!==i);if(I===null?v=f:I.next=T,!Un(f,t.memoizedState)&&(qt=!0,Z&&(a=mo,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=I,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function wf(t){var i=Ot(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);Un(f,i.memoizedState)||(qt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function Dy(t,i,a){var l=Oe,h=Ot(),f=Ke;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!Un((at||h).memoizedState,a);if(v&&(h.memoizedState=a,qt=!0),h=h.queue,Rf(My.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||Bt!==null&&Bt.memoizedState.tag&1){if(l.flags|=2048,Eo(9,{destroy:void 0},jy.bind(null,l,h,a,i),null),ct===null)throw Error(s(349));f||(pr&127)!==0||Oy(l,i,a)}return a}function Oy(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=Vu(),Oe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function jy(t,i,a,l){i.value=a,i.getSnapshot=l,Vy(i)&&ky(t)}function My(t,i,a){return a(function(){Vy(i)&&ky(t)})}function Vy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Un(t,a)}catch{return!0}}function ky(t){var i=la(t,2);i!==null&&jn(i,t,2)}function Sf(t){var i=bn();if(typeof t=="function"){var a=t;if(t=a(),ya){Sn(!0);try{a()}finally{Sn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:t},i}function Py(t,i,a,l){return t.baseState=a,Af(t,at,typeof l=="function"?l:gr)}function qw(t,i,a,l,h){if(zu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};$.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,Ly(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Ly(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=$.T,v={};$.T=v;try{var T=a(h,l),I=$.S;I!==null&&I(v,T),Uy(t,i,T)}catch(q){xf(t,i,q)}finally{f!==null&&v.types!==null&&(f.types=v.types),$.T=f}}else try{f=a(h,l),Uy(t,i,f)}catch(q){xf(t,i,q)}}function Uy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){zy(t,i,l)},function(l){return xf(t,i,l)}):zy(t,i,a)}function zy(t,i,a){i.status="fulfilled",i.value=a,By(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Ly(t,a)))}function xf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,By(i),i=i.next;while(i!==l)}t.action=null}function By(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function qy(t,i){return i}function Fy(t,i){if(Ke){var a=ct.formState;if(a!==null){e:{var l=Oe;if(Ke){if(gt){t:{for(var h=gt,f=ai;h.nodeType!==8;){if(!f){h=null;break t}if(h=li(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){gt=li(h.nextSibling),l=h.data==="F!";break e}}Yr(l)}l=!1}l&&(i=a[0])}}return a=bn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qy,lastRenderedState:i},a.queue=l,a=l_.bind(null,Oe,l),l.dispatch=a,l=Sf(!1),f=Of.bind(null,Oe,!1,l.queue),l=bn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=qw.bind(null,Oe,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Hy(t){var i=Ot();return Gy(i,at,t)}function Gy(t,i,a){if(i=Af(t,i,qy)[0],t=Pu(gr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ll(i)}catch(v){throw v===po?Ru:v}else l=i;i=Ot();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,Eo(9,{destroy:void 0},Fw.bind(null,h,a),null)),[l,f,t]}function Fw(t,i){t.action=i}function Ky(t){var i=Ot(),a=at;if(a!==null)return Gy(i,a,t);Ot(),i=i.memoizedState,a=Ot();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Eo(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=Vu(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Qy(){return Ot().memoizedState}function Lu(t,i,a,l){var h=bn();Oe.flags|=t,h.memoizedState=Eo(1|i,{destroy:void 0},a,l===void 0?null:l)}function Uu(t,i,a,l){var h=Ot();l=l===void 0?null:l;var f=h.memoizedState.inst;at!==null&&l!==null&&yf(l,at.memoizedState.deps)?h.memoizedState=Eo(i,f,a,l):(Oe.flags|=t,h.memoizedState=Eo(1|i,f,a,l))}function Yy(t,i){Lu(8390656,8,t,i)}function Rf(t,i){Uu(2048,8,t,i)}function Hw(t){Oe.flags|=4;var i=Oe.updateQueue;if(i===null)i=Vu(),Oe.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Xy(t){var i=Ot().memoizedState;return Hw({ref:i,nextImpl:t}),function(){if((Ze&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function $y(t,i){return Uu(4,2,t,i)}function Wy(t,i){return Uu(4,4,t,i)}function Jy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Zy(t,i,a){a=a!=null?a.concat([t]):null,Uu(4,4,Jy.bind(null,i,t),a)}function Nf(){}function e_(t,i){var a=Ot();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&yf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function t_(t,i){var a=Ot();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&yf(i,l[1]))return l[0];if(l=t(),ya){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[l,i],l}function Cf(t,i,a){return a===void 0||(pr&1073741824)!==0&&(ze&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=nv(),Oe.lanes|=t,is|=t,a)}function n_(t,i,a,l){return Un(a,i)?a:yo.current!==null?(t=Cf(t,a,l),Un(t,i)||(qt=!0),t):(pr&42)===0||(pr&1073741824)!==0&&(ze&261930)===0?(qt=!0,t.memoizedState=a):(t=nv(),Oe.lanes|=t,is|=t,i)}function i_(t,i,a,l,h){var f=ae.p;ae.p=f!==0&&8>f?f:8;var v=$.T,T={};$.T=T,Of(t,!1,i,a);try{var I=h(),q=$.S;if(q!==null&&q(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Z=Uw(I,l);Ul(t,i,Z,Gn(t))}else Ul(t,i,l,Gn(t))}catch(ne){Ul(t,i,{then:function(){},status:"rejected",reason:ne},Gn())}finally{ae.p=f,v!==null&&T.types!==null&&(v.types=T.types),$.T=v}}function Gw(){}function If(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=r_(t).queue;i_(t,h,i,fe,a===null?Gw:function(){return s_(t),a(l)})}function r_(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:fe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function s_(t){var i=r_(t);i.next===null&&(i=t.alternate.memoizedState),Ul(t,i.next.queue,{},Gn())}function Df(){return on(nc)}function a_(){return Ot().memoizedState}function o_(){return Ot().memoizedState}function Kw(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Gn();t=Wr(a);var l=Jr(i,t,a);l!==null&&(jn(l,i,a),Ml(l,i,a)),i={cache:af()},t.payload=i;return}i=i.return}}function Qw(t,i,a){var l=Gn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},zu(t)?c_(i,a):(a=Yd(t,i,a,l),a!==null&&(jn(a,t,l),u_(a,i,l)))}function l_(t,i,a){var l=Gn();Ul(t,i,a,l)}function Ul(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(zu(t))c_(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,T=f(v,a);if(h.hasEagerState=!0,h.eagerState=T,Un(T,v))return Eu(t,i,h,0),ct===null&&vu(),!1}catch{}if(a=Yd(t,i,h,l),a!==null)return jn(a,t,l),u_(a,i,l),!0}return!1}function Of(t,i,a,l){if(l={lane:2,revertLane:um(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},zu(t)){if(i)throw Error(s(479))}else i=Yd(t,a,l,2),i!==null&&jn(i,t,2)}function zu(t){var i=t.alternate;return t===Oe||i!==null&&i===Oe}function c_(t,i){_o=ju=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function u_(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Xs(t,a)}}var zl={readContext:on,use:ku,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};zl.useEffectEvent=St;var h_={readContext:on,use:ku,useCallback:function(t,i){return bn().memoizedState=[t,i===void 0?null:i],t},useContext:on,useEffect:Yy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Lu(4194308,4,Jy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Lu(4194308,4,t,i)},useInsertionEffect:function(t,i){Lu(4,2,t,i)},useMemo:function(t,i){var a=bn();i=i===void 0?null:i;var l=t();if(ya){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=bn();if(a!==void 0){var h=a(i);if(ya){Sn(!0);try{a(i)}finally{Sn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Qw.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var i=bn();return t={current:t},i.memoizedState=t},useState:function(t){t=Sf(t);var i=t.queue,a=l_.bind(null,Oe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Nf,useDeferredValue:function(t,i){var a=bn();return Cf(a,t,i)},useTransition:function(){var t=Sf(!1);return t=i_.bind(null,Oe,t.queue,!0,!1),bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Oe,h=bn();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ct===null)throw Error(s(349));(ze&127)!==0||Oy(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Yy(My.bind(null,l,f,t),[t]),l.flags|=2048,Eo(9,{destroy:void 0},jy.bind(null,l,f,a,i),null),a},useId:function(){var t=bn(),i=ct.identifierPrefix;if(Ke){var a=Ki,l=Gi;a=(l&~(1<<32-bt(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Mu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=zw++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Df,useFormState:Fy,useActionState:Fy,useOptimistic:function(t){var i=bn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Of.bind(null,Oe,!0,a),a.dispatch=i,[t,i]},useMemoCache:Tf,useCacheRefresh:function(){return bn().memoizedState=Kw.bind(null,Oe)},useEffectEvent:function(t){var i=bn(),a={impl:t};return i.memoizedState=a,function(){if((Ze&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},jf={readContext:on,use:ku,useCallback:e_,useContext:on,useEffect:Rf,useImperativeHandle:Zy,useInsertionEffect:$y,useLayoutEffect:Wy,useMemo:t_,useReducer:Pu,useRef:Qy,useState:function(){return Pu(gr)},useDebugValue:Nf,useDeferredValue:function(t,i){var a=Ot();return n_(a,at.memoizedState,t,i)},useTransition:function(){var t=Pu(gr)[0],i=Ot().memoizedState;return[typeof t=="boolean"?t:Ll(t),i]},useSyncExternalStore:Dy,useId:a_,useHostTransitionStatus:Df,useFormState:Hy,useActionState:Hy,useOptimistic:function(t,i){var a=Ot();return Py(a,at,t,i)},useMemoCache:Tf,useCacheRefresh:o_};jf.useEffectEvent=Xy;var d_={readContext:on,use:ku,useCallback:e_,useContext:on,useEffect:Rf,useImperativeHandle:Zy,useInsertionEffect:$y,useLayoutEffect:Wy,useMemo:t_,useReducer:wf,useRef:Qy,useState:function(){return wf(gr)},useDebugValue:Nf,useDeferredValue:function(t,i){var a=Ot();return at===null?Cf(a,t,i):n_(a,at.memoizedState,t,i)},useTransition:function(){var t=wf(gr)[0],i=Ot().memoizedState;return[typeof t=="boolean"?t:Ll(t),i]},useSyncExternalStore:Dy,useId:a_,useHostTransitionStatus:Df,useFormState:Ky,useActionState:Ky,useOptimistic:function(t,i){var a=Ot();return at!==null?Py(a,at,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:o_};d_.useEffectEvent=Xy;function Mf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Vf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Gn(),h=Wr(l);h.payload=i,a!=null&&(h.callback=a),i=Jr(t,h,l),i!==null&&(jn(i,t,l),Ml(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Gn(),h=Wr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Jr(t,h,l),i!==null&&(jn(i,t,l),Ml(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Gn(),l=Wr(a);l.tag=2,i!=null&&(l.callback=i),i=Jr(t,l,a),i!==null&&(jn(i,t,a),Ml(i,t,a))}};function f_(t,i,a,l,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,v):i.prototype&&i.prototype.isPureReactComponent?!xl(a,l)||!xl(h,f):!0}function m_(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Vf.enqueueReplaceState(i,i.state,null)}function _a(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function p_(t){_u(t)}function g_(t){console.error(t)}function y_(t){_u(t)}function Bu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function __(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function kf(t,i,a){return a=Wr(a),a.tag=3,a.payload={element:null},a.callback=function(){Bu(t,i)},a}function v_(t){return t=Wr(t),t.tag=3,t}function E_(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){__(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){__(i,a,l),typeof h!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Yw(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ho(i,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 31:case 13:return oi===null?Zu():a.alternate===null&&xt===0&&(xt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Nu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),om(t,l,h)),!1;case 22:return a.flags|=65536,l===Nu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),om(t,l,h)),!1}throw Error(s(435,a.tag))}return om(t,l,h),Zu(),!1}if(Ke)return i=Bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==ef&&(t=Error(s(422),{cause:l}),Cl(ii(t,a)))):(l!==ef&&(i=Error(s(423),{cause:l}),Cl(ii(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ii(l,a),h=kf(t.stateNode,l,h),df(t,h),xt!==4&&(xt=2)),!1;var f=Error(s(520),{cause:l});if(f=ii(f,a),Yl===null?Yl=[f]:Yl.push(f),xt!==4&&(xt=2),i===null)return!0;l=ii(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=kf(a.stateNode,l,t),df(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(rs===null||!rs.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=v_(h),E_(h,t,a,l),df(a,h),!1}a=a.return}while(a!==null);return!1}var Pf=Error(s(461)),qt=!1;function ln(t,i,a,l){i.child=t===null?wy(i,null,a,l):ga(i,t.child,a,l)}function b_(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return da(i),l=_f(t,i,a,v,f,h),T=vf(),t!==null&&!qt?(Ef(t,i,h),yr(t,i,h)):(Ke&&T&&Jd(i),i.flags|=1,ln(t,i,l,h),i.child)}function T_(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Xd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,A_(t,i,f,l,h)):(t=Tu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Gf(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:xl,a(v,l)&&t.ref===i.ref)return yr(t,i,h)}return i.flags|=1,t=hr(f,l),t.ref=i.ref,t.return=i,i.child=t}function A_(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(xl(f,l)&&t.ref===i.ref)if(qt=!1,i.pendingProps=l=f,Gf(t,h))(t.flags&131072)!==0&&(qt=!0);else return i.lanes=t.lanes,yr(t,i,h)}return Lf(t,i,a,l,h)}function w_(t,i,a,l){var h=l.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,i.child=null;return S_(t,i,f,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&xu(i,f!==null?f.cachePool:null),f!==null?Ry(i,f):mf(),Ny(i);else return l=i.lanes=536870912,S_(t,i,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(xu(i,f.cachePool),Ry(i,f),es(),i.memoizedState=null):(t!==null&&xu(i,null),mf(),es());return ln(t,i,h,a),i.child}function Bl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function S_(t,i,a,l,h){var f=lf();return f=f===null?null:{parent:zt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&xu(i,null),mf(),Ny(i),t!==null&&ho(t,i,l,!0),i.childLanes=h,null}function qu(t,i){return i=Hu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function x_(t,i,a){return ga(i,t.child,null,a),t=qu(i,i.pendingProps),t.flags|=2,qn(i),i.memoizedState=null,t}function Xw(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ke){if(l.mode==="hidden")return t=qu(i,l),i.lanes=536870912,Bl(null,t);if(gf(i),(t=gt)?(t=Lv(t,ai),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Kr!==null?{id:Gi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},a=cy(t),a.return=i,i.child=a,an=i,gt=null)):t=null,t===null)throw Yr(i);return i.lanes=536870912,null}return qu(i,l)}var f=t.memoizedState;if(f!==null){var v=f.dehydrated;if(gf(i),h)if(i.flags&256)i.flags&=-257,i=x_(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(qt||ho(t,i,a,!1),h=(a&t.childLanes)!==0,qt||h){if(l=ct,l!==null&&(v=ll(l,a),v!==0&&v!==f.retryLane))throw f.retryLane=v,la(t,v),jn(l,t,v),Pf;Zu(),i=x_(t,i,a)}else t=f.treeContext,gt=li(v.nextSibling),an=i,Ke=!0,Qr=null,ai=!1,t!==null&&dy(i,t),i=qu(i,l),i.flags|=4096;return i}return t=hr(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Fu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Lf(t,i,a,l,h){return da(i),a=_f(t,i,a,l,void 0,h),l=vf(),t!==null&&!qt?(Ef(t,i,h),yr(t,i,h)):(Ke&&l&&Jd(i),i.flags|=1,ln(t,i,a,h),i.child)}function R_(t,i,a,l,h,f){return da(i),i.updateQueue=null,a=Iy(i,l,a,h),Cy(t),l=vf(),t!==null&&!qt?(Ef(t,i,f),yr(t,i,f)):(Ke&&l&&Jd(i),i.flags|=1,ln(t,i,a,f),i.child)}function N_(t,i,a,l,h){if(da(i),i.stateNode===null){var f=oo,v=a.contextType;typeof v=="object"&&v!==null&&(f=on(v)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Vf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},uf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?on(v):oo,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Mf(i,a,v,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Vf.enqueueReplaceState(f,f.state,null),kl(i,l,f,h),Vl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,I=_a(a,T);f.props=I;var q=f.context,Z=a.contextType;v=oo,typeof Z=="object"&&Z!==null&&(v=on(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||q!==v)&&m_(i,f,l,v),$r=!1;var H=i.memoizedState;f.state=H,kl(i,l,f,h),Vl(),q=i.memoizedState,T||H!==q||$r?(typeof ne=="function"&&(Mf(i,a,ne,l),q=i.memoizedState),(I=$r||f_(i,a,I,l,H,q,v))?(Z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),f.props=l,f.state=q,f.context=v,l=I):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,hf(t,i),v=i.memoizedProps,Z=_a(a,v),f.props=Z,ne=i.pendingProps,H=f.context,q=a.contextType,I=oo,typeof q=="object"&&q!==null&&(I=on(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==ne||H!==I)&&m_(i,f,l,I),$r=!1,H=i.memoizedState,f.state=H,kl(i,l,f,h),Vl();var Q=i.memoizedState;v!==ne||H!==Q||$r||t!==null&&t.dependencies!==null&&wu(t.dependencies)?(typeof T=="function"&&(Mf(i,a,T,l),Q=i.memoizedState),(Z=$r||f_(i,a,Z,l,H,Q,I)||t!==null&&t.dependencies!==null&&wu(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Q,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Q,I)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=Q),f.props=l,f.state=Q,f.context=I,l=Z):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Fu(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=ga(i,t.child,null,h),i.child=ga(i,null,a,h)):ln(t,i,a,h),i.memoizedState=f.state,t=i.child):t=yr(t,i,h),t}function C_(t,i,a,l){return ua(),i.flags|=256,ln(t,i,a,l),i.child}var Uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zf(t){return{baseLanes:t,cachePool:_y()}}function Bf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Hn),t}function I_(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ke){if(h?Zr(i):es(),(t=gt)?(t=Lv(t,ai),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Kr!==null?{id:Gi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},a=cy(t),a.return=i,i.child=a,an=i,gt=null)):t=null,t===null)throw Yr(i);return Am(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(es(),h=i.mode,T=Hu({mode:"hidden",children:T},h),l=ca(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=zf(a),l.childLanes=Bf(t,v,a),i.memoizedState=Uf,Bl(null,l)):(Zr(i),qf(i,T))}var I=t.memoizedState;if(I!==null&&(T=I.dehydrated,T!==null)){if(f)i.flags&256?(Zr(i),i.flags&=-257,i=Ff(t,i,a)):i.memoizedState!==null?(es(),i.child=t.child,i.flags|=128,i=null):(es(),T=l.fallback,h=i.mode,l=Hu({mode:"visible",children:l.children},h),T=ca(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,ga(i,t.child,null,a),l=i.child,l.memoizedState=zf(a),l.childLanes=Bf(t,v,a),i.memoizedState=Uf,i=Bl(null,l));else if(Zr(i),Am(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(s(419)),l.stack="",l.digest=v,Cl({value:l,source:null,stack:null}),i=Ff(t,i,a)}else if(qt||ho(t,i,a,!1),v=(a&t.childLanes)!==0,qt||v){if(v=ct,v!==null&&(l=ll(v,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,la(t,l),jn(v,t,l),Pf;Tm(T)||Zu(),i=Ff(t,i,a)}else Tm(T)?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,gt=li(T.nextSibling),an=i,Ke=!0,Qr=null,ai=!1,t!==null&&dy(i,t),i=qf(i,l.children),i.flags|=4096);return i}return h?(es(),T=l.fallback,h=i.mode,I=t.child,q=I.sibling,l=hr(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,q!==null?T=hr(q,T):(T=ca(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Bl(null,l),l=i.child,T=t.child.memoizedState,T===null?T=zf(a):(h=T.cachePool,h!==null?(I=zt._currentValue,h=h.parent!==I?{parent:I,pool:I}:h):h=_y(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=Bf(t,v,a),i.memoizedState=Uf,Bl(t.child,l)):(Zr(i),a=t.child,t=a.sibling,a=hr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function qf(t,i){return i=Hu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Hu(t,i){return t=zn(22,t,null,i),t.lanes=0,t}function Ff(t,i,a){return ga(i,t.child,null,a),t=qf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function D_(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),rf(t.return,i,a)}function Hf(t,i,a,l,h,f){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:f}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=f)}function O_(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var v=Dt.current,T=(v&2)!==0;if(T?(v=v&1|2,i.flags|=128):v&=1,se(Dt,v),ln(t,i,l,a),l=Ke?Nl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&D_(t,a,i);else if(t.tag===19)D_(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Ou(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Hf(i,!1,h,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Ou(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Hf(i,!0,a,null,f,l);break;case"together":Hf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function yr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),is|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ho(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=hr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=hr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Gf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&wu(t)))}function $w(t,i,a){switch(i.tag){case 3:Ge(i,i.stateNode.containerInfo),Xr(i,zt,t.memoizedState.cache),ua();break;case 27:case 5:Qt(i);break;case 4:Ge(i,i.stateNode.containerInfo);break;case 10:Xr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,gf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Zr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?I_(t,i,a):(Zr(i),t=yr(t,i,a),t!==null?t.sibling:null);Zr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ho(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return O_(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(Dt,Dt.current),l)break;return null;case 22:return i.lanes=0,w_(t,i,a,i.pendingProps);case 24:Xr(i,zt,t.memoizedState.cache)}return yr(t,i,a)}function j_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)qt=!0;else{if(!Gf(t,a)&&(i.flags&128)===0)return qt=!1,$w(t,i,a);qt=(t.flags&131072)!==0}else qt=!1,Ke&&(i.flags&1048576)!==0&&hy(i,Nl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=ma(i.elementType),i.type=t,typeof t=="function")Xd(t)?(l=_a(t,l),i.tag=1,i=N_(null,i,t,l,a)):(i.tag=0,i=Lf(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===pe){i.tag=11,i=b_(null,i,t,l,a);break e}else if(h===N){i.tag=14,i=T_(null,i,t,l,a);break e}}throw i=ke(t)||t,Error(s(306,i,""))}}return i;case 0:return Lf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=_a(l,i.pendingProps),N_(t,i,l,h,a);case 3:e:{if(Ge(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,hf(t,i),kl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Xr(i,zt,l),l!==f.cache&&sf(i,[zt],a,!0),Vl(),l=v.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=C_(t,i,l,a);break e}else if(l!==h){h=ii(Error(s(424)),i),Cl(h),i=C_(t,i,l,a);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,gt=li(t.firstChild),an=i,Ke=!0,Qr=null,ai=!0,a=wy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ua(),l===h){i=yr(t,i,a);break e}ln(t,i,l,a)}i=i.child}return i;case 26:return Fu(t,i),t===null?(a=Hv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ke||(a=i.type,t=i.pendingProps,l=ah(Y.current).createElement(a),l[Pt]=i,l[en]=t,cn(l,a,t),Lt(l),i.stateNode=l):i.memoizedState=Hv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Qt(i),t===null&&Ke&&(l=i.stateNode=Bv(i.type,i.pendingProps,Y.current),an=i,ai=!0,h=gt,ls(i.type)?(wm=h,gt=li(l.firstChild)):gt=h),ln(t,i,i.pendingProps.children,a),Fu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ke&&((h=l=gt)&&(l=xS(l,i.type,i.pendingProps,ai),l!==null?(i.stateNode=l,an=i,gt=li(l.firstChild),ai=!1,h=!0):h=!1),h||Yr(i)),Qt(i),h=i.type,f=i.pendingProps,v=t!==null?t.memoizedProps:null,l=f.children,vm(h,f)?l=null:v!==null&&vm(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=_f(t,i,Bw,null,null,a),nc._currentValue=h),Fu(t,i),ln(t,i,l,a),i.child;case 6:return t===null&&Ke&&((t=a=gt)&&(a=RS(a,i.pendingProps,ai),a!==null?(i.stateNode=a,an=i,gt=null,t=!0):t=!1),t||Yr(i)),null;case 13:return I_(t,i,a);case 4:return Ge(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=ga(i,null,l,a):ln(t,i,l,a),i.child;case 11:return b_(t,i,i.type,i.pendingProps,a);case 7:return ln(t,i,i.pendingProps,a),i.child;case 8:return ln(t,i,i.pendingProps.children,a),i.child;case 12:return ln(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Xr(i,i.type,l.value),ln(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,da(i),h=on(h),l=l(h),i.flags|=1,ln(t,i,l,a),i.child;case 14:return T_(t,i,i.type,i.pendingProps,a);case 15:return A_(t,i,i.type,i.pendingProps,a);case 19:return O_(t,i,a);case 31:return Xw(t,i,a);case 22:return w_(t,i,a,i.pendingProps);case 24:return da(i),l=on(zt),t===null?(h=lf(),h===null&&(h=ct,f=af(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},uf(i),Xr(i,zt,h)):((t.lanes&a)!==0&&(hf(t,i),kl(i,null,null,a),Vl()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Xr(i,zt,l)):(l=f.cache,Xr(i,zt,l),l!==h.cache&&sf(i,[zt],a,!0))),ln(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function _r(t){t.flags|=4}function Kf(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(av())t.flags|=8192;else throw pa=Nu,cf}else t.flags&=-16777217}function M_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Xv(i))if(av())t.flags|=8192;else throw pa=Nu,cf}function Gu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?be():536870912,t.lanes|=i,wo|=i)}function ql(t,i){if(!Ke)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function yt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function Ww(t,i,a){var l=i.pendingProps;switch(Zd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(i),null;case 1:return yt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),mr(zt),Pe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(uo(i)?_r(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,tf())),yt(i),null;case 26:var h=i.type,f=i.memoizedState;return t===null?(_r(i),f!==null?(yt(i),M_(i,f)):(yt(i),Kf(i,h,null,l,a))):f?f!==t.memoizedState?(_r(i),yt(i),M_(i,f)):(yt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&_r(i),yt(i),Kf(i,h,t,l,a)),null;case 27:if(W(i),a=Y.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&_r(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return yt(i),null}t=ue.current,uo(i)?fy(i):(t=Bv(h,l,a),i.stateNode=t,_r(i))}return yt(i),null;case 5:if(W(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&_r(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return yt(i),null}if(f=ue.current,uo(i))fy(i);else{var v=ah(Y.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}f[Pt]=i,f[en]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=f;e:switch(cn(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&_r(i)}}return yt(i),Kf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&_r(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Y.current,uo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=an,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Pt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Iv(t.nodeValue,a)),t||Yr(i,!0)}else t=ah(t).createTextNode(l),t[Pt]=i,i.stateNode=t}return yt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=uo(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Pt]=i}else ua(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yt(i),t=!1}else a=tf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(qn(i),i):(qn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return yt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=uo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Pt]=i}else ua(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yt(i),h=!1}else h=tf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(qn(i),i):(qn(i),null)}return qn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Gu(i,i.updateQueue),yt(i),null);case 4:return Pe(),t===null&&mm(i.stateNode.containerInfo),yt(i),null;case 10:return mr(i.type),yt(i),null;case 19:if(J(Dt),l=i.memoizedState,l===null)return yt(i),null;if(h=(i.flags&128)!==0,f=l.rendering,f===null)if(h)ql(l,!1);else{if(xt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Ou(t),f!==null){for(i.flags|=128,ql(l,!1),t=f.updateQueue,i.updateQueue=t,Gu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ly(a,t),a=a.sibling;return se(Dt,Dt.current&1|2),Ke&&dr(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Jt()>$u&&(i.flags|=128,h=!0,ql(l,!1),i.lanes=4194304)}else{if(!h)if(t=Ou(f),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Gu(i,t),ql(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ke)return yt(i),null}else 2*Jt()-l.renderingStartTime>$u&&a!==536870912&&(i.flags|=128,h=!0,ql(l,!1),i.lanes=4194304);l.isBackwards?(f.sibling=i.child,i.child=f):(t=l.last,t!==null?t.sibling=f:i.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Jt(),t.sibling=null,a=Dt.current,se(Dt,h?a&1|2:a&1),Ke&&dr(i,l.treeForkCount),t):(yt(i),null);case 22:case 23:return qn(i),pf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(yt(i),i.subtreeFlags&6&&(i.flags|=8192)):yt(i),a=i.updateQueue,a!==null&&Gu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&J(fa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),mr(zt),yt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Jw(t,i){switch(Zd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return mr(zt),Pe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return W(i),null;case 31:if(i.memoizedState!==null){if(qn(i),i.alternate===null)throw Error(s(340));ua()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(qn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ua()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return J(Dt),null;case 4:return Pe(),null;case 10:return mr(i.type),null;case 22:case 23:return qn(i),pf(),t!==null&&J(fa),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return mr(zt),null;case 25:return null;default:return null}}function V_(t,i){switch(Zd(i),i.tag){case 3:mr(zt),Pe();break;case 26:case 27:case 5:W(i);break;case 4:Pe();break;case 31:i.memoizedState!==null&&qn(i);break;case 13:qn(i);break;case 19:J(Dt);break;case 10:mr(i.type);break;case 22:case 23:qn(i),pf(),t!==null&&J(fa);break;case 24:mr(zt)}}function Fl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,v=a.inst;l=f(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){rt(i,i.return,T)}}function ts(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var I=a,q=T;try{q()}catch(Z){rt(h,I,Z)}}}l=l.next}while(l!==f)}}catch(Z){rt(i,i.return,Z)}}function k_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{xy(i,a)}catch(l){rt(t,t.return,l)}}}function P_(t,i,a){a.props=_a(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){rt(t,i,l)}}function Hl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){rt(t,i,h)}}function Qi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){rt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){rt(t,i,h)}else a.current=null}function L_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){rt(t,t.return,h)}}function Qf(t,i,a){try{var l=t.stateNode;ES(l,t.type,a,i),l[en]=i}catch(h){rt(t,t.return,h)}}function U_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ls(t.type)||t.tag===4}function Yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||U_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ls(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=gi));else if(l!==4&&(l===27&&ls(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Xf(t,i,a),t=t.sibling;t!==null;)Xf(t,i,a),t=t.sibling}function Ku(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&ls(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ku(t,i,a),t=t.sibling;t!==null;)Ku(t,i,a),t=t.sibling}function z_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);cn(i,l,a),i[Pt]=t,i[en]=a}catch(f){rt(t,t.return,f)}}var vr=!1,Ft=!1,$f=!1,B_=typeof WeakSet=="function"?WeakSet:Set,nn=null;function Zw(t,i){if(t=t.containerInfo,ym=fh,t=Zg(t),qd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,T=-1,I=-1,q=0,Z=0,ne=t,H=null;t:for(;;){for(var Q;ne!==a||h!==0&&ne.nodeType!==3||(T=v+h),ne!==f||l!==0&&ne.nodeType!==3||(I=v+l),ne.nodeType===3&&(v+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)H=ne,ne=Q;for(;;){if(ne===t)break t;if(H===a&&++q===h&&(T=v),H===f&&++Z===l&&(I=v),(Q=ne.nextSibling)!==null)break;ne=H,H=ne.parentNode}ne=Q}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(_m={focusedElem:t,selectionRange:a},fh=!1,nn=i;nn!==null;)if(i=nn,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,nn=t;else for(;nn!==null;){switch(i=nn,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var me=_a(a.type,h);t=l.getSnapshotBeforeUpdate(me,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){rt(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)bm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":bm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,nn=t;break}nn=i.return}}function q_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:br(t,a),l&4&&Fl(5,a);break;case 1:if(br(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){rt(a,a.return,v)}else{var h=_a(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){rt(a,a.return,v)}}l&64&&k_(a),l&512&&Hl(a,a.return);break;case 3:if(br(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{xy(t,i)}catch(v){rt(a,a.return,v)}}break;case 27:i===null&&l&4&&z_(a);case 26:case 5:br(t,a),i===null&&l&4&&L_(a),l&512&&Hl(a,a.return);break;case 12:br(t,a);break;case 31:br(t,a),l&4&&G_(t,a);break;case 13:br(t,a),l&4&&K_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=lS.bind(null,a),NS(t,a))));break;case 22:if(l=a.memoizedState!==null||vr,!l){i=i!==null&&i.memoizedState!==null||Ft,h=vr;var f=Ft;vr=l,(Ft=i)&&!f?Tr(t,a,(a.subtreeFlags&8772)!==0):br(t,a),vr=h,Ft=f}break;case 30:break;default:br(t,a)}}function F_(t){var i=t.alternate;i!==null&&(t.alternate=null,F_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Qa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Et=null,Cn=!1;function Er(t,i,a){for(a=a.child;a!==null;)H_(t,i,a),a=a.sibling}function H_(t,i,a){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(At,a)}catch{}switch(a.tag){case 26:Ft||Qi(a,i),Er(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ft||Qi(a,i);var l=Et,h=Cn;ls(a.type)&&(Et=a.stateNode,Cn=!1),Er(t,i,a),Zl(a.stateNode),Et=l,Cn=h;break;case 5:Ft||Qi(a,i);case 6:if(l=Et,h=Cn,Et=null,Er(t,i,a),Et=l,Cn=h,Et!==null)if(Cn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(a.stateNode)}catch(f){rt(a,i,f)}else try{Et.removeChild(a.stateNode)}catch(f){rt(a,i,f)}break;case 18:Et!==null&&(Cn?(t=Et,kv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Oo(t)):kv(Et,a.stateNode));break;case 4:l=Et,h=Cn,Et=a.stateNode.containerInfo,Cn=!0,Er(t,i,a),Et=l,Cn=h;break;case 0:case 11:case 14:case 15:ts(2,a,i),Ft||ts(4,a,i),Er(t,i,a);break;case 1:Ft||(Qi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&P_(a,i,l)),Er(t,i,a);break;case 21:Er(t,i,a);break;case 22:Ft=(l=Ft)||a.memoizedState!==null,Er(t,i,a),Ft=l;break;default:Er(t,i,a)}}function G_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Oo(t)}catch(a){rt(i,i.return,a)}}}function K_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Oo(t)}catch(a){rt(i,i.return,a)}}function eS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new B_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new B_),i;default:throw Error(s(435,t.tag))}}function Qu(t,i){var a=eS(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=cS.bind(null,t,l);l.then(h,h)}})}function In(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(ls(T.type)){Et=T.stateNode,Cn=!1;break e}break;case 5:Et=T.stateNode,Cn=!1;break e;case 3:case 4:Et=T.stateNode.containerInfo,Cn=!0;break e}T=T.return}if(Et===null)throw Error(s(160));H_(f,v,h),Et=null,Cn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Q_(i,t),i=i.sibling}var Ti=null;function Q_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:In(i,t),Dn(t),l&4&&(ts(3,t,t.return),Fl(3,t),ts(5,t,t.return));break;case 1:In(i,t),Dn(t),l&512&&(Ft||a===null||Qi(a,a.return)),l&64&&vr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ti;if(In(i,t),Dn(t),l&512&&(Ft||a===null||Qi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ji]||f[Pt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),cn(f,l,a),f[Pt]=t,Lt(f),l=f;break e;case"link":var v=Qv("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(f=v[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}f=h.createElement(l),cn(f,l,a),h.head.appendChild(f);break;case"meta":if(v=Qv("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(f=v[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}f=h.createElement(l),cn(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Pt]=t,Lt(f),l=f}t.stateNode=l}else Yv(h,t.type,t.stateNode);else t.stateNode=Kv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Yv(h,t.type,t.stateNode):Kv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Qf(t,t.memoizedProps,a.memoizedProps)}break;case 27:In(i,t),Dn(t),l&512&&(Ft||a===null||Qi(a,a.return)),a!==null&&l&4&&Qf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(In(i,t),Dn(t),l&512&&(Ft||a===null||Qi(a,a.return)),t.flags&32){h=t.stateNode;try{Nn(h,"")}catch(me){rt(t,t.return,me)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Qf(t,h,a!==null?a.memoizedProps:h)),l&1024&&($f=!0);break;case 6:if(In(i,t),Dn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(me){rt(t,t.return,me)}}break;case 3:if(ch=null,h=Ti,Ti=oh(i.containerInfo),In(i,t),Ti=h,Dn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Oo(i.containerInfo)}catch(me){rt(t,t.return,me)}$f&&($f=!1,Y_(t));break;case 4:l=Ti,Ti=oh(t.stateNode.containerInfo),In(i,t),Dn(t),Ti=l;break;case 12:In(i,t),Dn(t);break;case 31:In(i,t),Dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Qu(t,l)));break;case 13:In(i,t),Dn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xu=Jt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Qu(t,l)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,q=vr,Z=Ft;if(vr=q||h,Ft=Z||I,In(i,t),Ft=Z,vr=q,Dn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||vr||Ft||va(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(f=I.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=I.stateNode;var ne=I.memoizedProps.style,H=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(me){rt(I,I.return,me)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(me){rt(I,I.return,me)}}}else if(i.tag===18){if(a===null){I=i;try{var Q=I.stateNode;h?Pv(Q,!0):Pv(I.stateNode,!1)}catch(me){rt(I,I.return,me)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Qu(t,a))));break;case 19:In(i,t),Dn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Qu(t,l)));break;case 30:break;case 21:break;default:In(i,t),Dn(t)}}function Dn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(U_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Yf(t);Ku(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Nn(v,""),a.flags&=-33);var T=Yf(t);Ku(t,T,v);break;case 3:case 4:var I=a.stateNode.containerInfo,q=Yf(t);Xf(t,q,I);break;default:throw Error(s(161))}}catch(Z){rt(t,t.return,Z)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Y_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Y_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function br(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)q_(t,i.alternate,i),i=i.sibling}function va(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ts(4,i,i.return),va(i);break;case 1:Qi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&P_(i,i.return,a),va(i);break;case 27:Zl(i.stateNode);case 26:case 5:Qi(i,i.return),va(i);break;case 22:i.memoizedState===null&&va(i);break;case 30:va(i);break;default:va(i)}t=t.sibling}}function Tr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:Tr(h,f,a),Fl(4,f);break;case 1:if(Tr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){rt(l,l.return,q)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)Sy(I[h],T)}catch(q){rt(l,l.return,q)}}a&&v&64&&k_(f),Hl(f,f.return);break;case 27:z_(f);case 26:case 5:Tr(h,f,a),a&&l===null&&v&4&&L_(f),Hl(f,f.return);break;case 12:Tr(h,f,a);break;case 31:Tr(h,f,a),a&&v&4&&G_(h,f);break;case 13:Tr(h,f,a),a&&v&4&&K_(h,f);break;case 22:f.memoizedState===null&&Tr(h,f,a),Hl(f,f.return);break;case 30:break;default:Tr(h,f,a)}i=i.sibling}}function Wf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Il(a))}function Jf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Il(t))}function Ai(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)X_(t,i,a,l),i=i.sibling}function X_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ai(t,i,a,l),h&2048&&Fl(9,i);break;case 1:Ai(t,i,a,l);break;case 3:Ai(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Il(t)));break;case 12:if(h&2048){Ai(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,v=f.id,T=f.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){rt(i,i.return,I)}}else Ai(t,i,a,l);break;case 31:Ai(t,i,a,l);break;case 13:Ai(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?Ai(t,i,a,l):Gl(t,i):f._visibility&2?Ai(t,i,a,l):(f._visibility|=2,bo(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Wf(v,i);break;case 24:Ai(t,i,a,l),h&2048&&Jf(i.alternate,i);break;default:Ai(t,i,a,l)}}function bo(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,v=i,T=a,I=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:bo(f,v,T,I,h),Fl(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?bo(f,v,T,I,h):Gl(f,v):(Z._visibility|=2,bo(f,v,T,I,h)),h&&q&2048&&Wf(v.alternate,v);break;case 24:bo(f,v,T,I,h),h&&q&2048&&Jf(v.alternate,v);break;default:bo(f,v,T,I,h)}i=i.sibling}}function Gl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Gl(a,l),h&2048&&Wf(l.alternate,l);break;case 24:Gl(a,l),h&2048&&Jf(l.alternate,l);break;default:Gl(a,l)}i=i.sibling}}var Kl=8192;function To(t,i,a){if(t.subtreeFlags&Kl)for(t=t.child;t!==null;)$_(t,i,a),t=t.sibling}function $_(t,i,a){switch(t.tag){case 26:To(t,i,a),t.flags&Kl&&t.memoizedState!==null&&zS(a,Ti,t.memoizedState,t.memoizedProps);break;case 5:To(t,i,a);break;case 3:case 4:var l=Ti;Ti=oh(t.stateNode.containerInfo),To(t,i,a),Ti=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Kl,Kl=16777216,To(t,i,a),Kl=l):To(t,i,a));break;default:To(t,i,a)}}function W_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Ql(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];nn=l,Z_(l,t)}W_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)J_(t),t=t.sibling}function J_(t){switch(t.tag){case 0:case 11:case 15:Ql(t),t.flags&2048&&ts(9,t,t.return);break;case 3:Ql(t);break;case 12:Ql(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Yu(t)):Ql(t);break;default:Ql(t)}}function Yu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];nn=l,Z_(l,t)}W_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ts(8,i,i.return),Yu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Yu(i));break;default:Yu(i)}t=t.sibling}}function Z_(t,i){for(;nn!==null;){var a=nn;switch(a.tag){case 0:case 11:case 15:ts(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Il(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,nn=l;else e:for(a=t;nn!==null;){l=nn;var h=l.sibling,f=l.return;if(F_(l),l===a){nn=null;break e}if(h!==null){h.return=f,nn=h;break e}nn=f}}}var tS={getCacheForType:function(t){var i=on(zt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return on(zt).controller.signal}},nS=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ct=null,Le=null,ze=0,it=0,Fn=null,ns=!1,Ao=!1,Zf=!1,Ar=0,xt=0,is=0,Ea=0,em=0,Hn=0,wo=0,Yl=null,On=null,tm=!1,Xu=0,ev=0,$u=1/0,Wu=null,rs=null,Xt=0,ss=null,So=null,wr=0,nm=0,im=null,tv=null,Xl=0,rm=null;function Gn(){return(Ze&2)!==0&&ze!==0?ze&-ze:$.T!==null?um():Jc()}function nv(){if(Hn===0)if((ze&536870912)===0||Ke){var t=ar;ar<<=1,(ar&3932160)===0&&(ar=262144),Hn=t}else Hn=536870912;return t=Bn.current,t!==null&&(t.flags|=32),Hn}function jn(t,i,a){(t===ct&&(it===2||it===9)||t.cancelPendingCommit!==null)&&(xo(t,0),as(t,ze,Hn,!1)),Zt(t,a),((Ze&2)===0||t!==ct)&&(t===ct&&((Ze&2)===0&&(Ea|=a),xt===4&&as(t,ze,Hn,!1)),Yi(t))}function iv(t,i,a){if((Ze&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||kn(t,i),h=l?sS(t,i):am(t,i,!0),f=l;do{if(h===0){Ao&&!l&&as(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!iS(a)){h=am(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=Yl;var I=T.current.memoizedState.isDehydrated;if(I&&(xo(T,v).flags|=256),v=am(T,v,!1),v!==2){if(Zf&&!I){T.errorRecoveryDisabledLanes|=f,Ea|=f,h=4;break e}f=On,On=h,f!==null&&(On===null?On=f:On.push.apply(On,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){xo(t,0),as(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:as(l,i,Hn,!ns);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Xu+300-Jt(),10<h)){if(as(l,i,Hn,!ns),mn(l,0,!0)!==0)break e;wr=i,l.timeoutHandle=Mv(rv.bind(null,l,a,On,Wu,tm,i,Hn,Ea,wo,ns,f,"Throttled",-0,0),h);break e}rv(l,a,On,Wu,tm,i,Hn,Ea,wo,ns,f,null,-0,0)}}break}while(!0);Yi(t)}function rv(t,i,a,l,h,f,v,T,I,q,Z,ne,H,Q){if(t.timeoutHandle=-1,ne=i.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},$_(i,f,ne);var me=(f&62914560)===f?Xu-Jt():(f&4194048)===f?ev-Jt():0;if(me=BS(ne,me),me!==null){wr=f,t.cancelPendingCommit=me(dv.bind(null,t,i,f,a,l,h,v,T,I,Z,ne,null,H,Q)),as(t,f,v,!q);return}}dv(t,i,f,a,l,h,v,T,I)}function iS(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Un(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function as(t,i,a,l){i&=~em,i&=~Ea,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-bt(h),v=1<<f;l[f]=-1,h&=~v}a!==0&&xn(t,a,i)}function Ju(){return(Ze&6)===0?($l(0),!1):!0}function sm(){if(Le!==null){if(it===0)var t=Le.return;else t=Le,fr=ha=null,bf(t),go=null,Ol=0,t=Le;for(;t!==null;)V_(t.alternate,t),t=t.return;Le=null}}function xo(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,AS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),wr=0,sm(),ct=t,Le=a=hr(t.current,null),ze=i,it=0,Fn=null,ns=!1,Ao=kn(t,i),Zf=!1,wo=Hn=em=Ea=is=xt=0,On=Yl=null,tm=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-bt(l),f=1<<h;i|=t[h],l&=~f}return Ar=i,vu(),a}function sv(t,i){Oe=null,$.H=zl,i===po||i===Ru?(i=by(),it=3):i===cf?(i=by(),it=4):it=i===Pf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Fn=i,Le===null&&(xt=1,Bu(t,ii(i,t.current)))}function av(){var t=Bn.current;return t===null?!0:(ze&4194048)===ze?oi===null:(ze&62914560)===ze||(ze&536870912)!==0?t===oi:!1}function ov(){var t=$.H;return $.H=zl,t===null?zl:t}function lv(){var t=$.A;return $.A=tS,t}function Zu(){xt=4,ns||(ze&4194048)!==ze&&Bn.current!==null||(Ao=!0),(is&134217727)===0&&(Ea&134217727)===0||ct===null||as(ct,ze,Hn,!1)}function am(t,i,a){var l=Ze;Ze|=2;var h=ov(),f=lv();(ct!==t||ze!==i)&&(Wu=null,xo(t,i)),i=!1;var v=xt;e:do try{if(it!==0&&Le!==null){var T=Le,I=Fn;switch(it){case 8:sm(),v=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(i=!0);var q=it;if(it=0,Fn=null,Ro(t,T,I,q),a&&Ao){v=0;break e}break;default:q=it,it=0,Fn=null,Ro(t,T,I,q)}}rS(),v=xt;break}catch(Z){sv(t,Z)}while(!0);return i&&t.shellSuspendCounter++,fr=ha=null,Ze=l,$.H=h,$.A=f,Le===null&&(ct=null,ze=0,vu()),v}function rS(){for(;Le!==null;)cv(Le)}function sS(t,i){var a=Ze;Ze|=2;var l=ov(),h=lv();ct!==t||ze!==i?(Wu=null,$u=Jt()+500,xo(t,i)):Ao=kn(t,i);e:do try{if(it!==0&&Le!==null){i=Le;var f=Fn;t:switch(it){case 1:it=0,Fn=null,Ro(t,i,f,1);break;case 2:case 9:if(vy(f)){it=0,Fn=null,uv(i);break}i=function(){it!==2&&it!==9||ct!==t||(it=7),Yi(t)},f.then(i,i);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:vy(f)?(it=0,Fn=null,uv(i)):(it=0,Fn=null,Ro(t,i,f,7));break;case 5:var v=null;switch(Le.tag){case 26:v=Le.memoizedState;case 5:case 27:var T=Le;if(v?Xv(v):T.stateNode.complete){it=0,Fn=null;var I=T.sibling;if(I!==null)Le=I;else{var q=T.return;q!==null?(Le=q,eh(q)):Le=null}break t}}it=0,Fn=null,Ro(t,i,f,5);break;case 6:it=0,Fn=null,Ro(t,i,f,6);break;case 8:sm(),xt=6;break e;default:throw Error(s(462))}}aS();break}catch(Z){sv(t,Z)}while(!0);return fr=ha=null,$.H=l,$.A=h,Ze=a,Le!==null?0:(ct=null,ze=0,vu(),xt)}function aS(){for(;Le!==null&&!Vr();)cv(Le)}function cv(t){var i=j_(t.alternate,t,Ar);t.memoizedProps=t.pendingProps,i===null?eh(t):Le=i}function uv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=R_(a,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=R_(a,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:bf(i);default:V_(a,i),i=Le=ly(i,Ar),i=j_(a,i,Ar)}t.memoizedProps=t.pendingProps,i===null?eh(t):Le=i}function Ro(t,i,a,l){fr=ha=null,bf(i),go=null,Ol=0;var h=i.return;try{if(Yw(t,h,i,a,ze)){xt=1,Bu(t,ii(a,t.current)),Le=null;return}}catch(f){if(h!==null)throw Le=h,f;xt=1,Bu(t,ii(a,t.current)),Le=null;return}i.flags&32768?(Ke||l===1?t=!0:Ao||(ze&536870912)!==0?t=!1:(ns=t=!0,(l===2||l===9||l===3||l===6)&&(l=Bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),hv(i,t)):eh(i)}function eh(t){var i=t;do{if((i.flags&32768)!==0){hv(i,ns);return}t=i.return;var a=Ww(i.alternate,i,Ar);if(a!==null){Le=a;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);xt===0&&(xt=5)}function hv(t,i){do{var a=Jw(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);xt=6,Le=null}function dv(t,i,a,l,h,f,v,T,I){t.cancelPendingCommit=null;do th();while(Xt!==0);if((Ze&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Qd,Ys(t,a,f,v,T,I),t===ct&&(Le=ct=null,ze=0),So=i,ss=t,wr=a,nm=f,im=h,tv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,uS(Di,function(){return yv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,h=ae.p,ae.p=2,v=Ze,Ze|=4;try{Zw(t,i,a)}finally{Ze=v,ae.p=h,$.T=l}}Xt=1,fv(),mv(),pv()}}function fv(){if(Xt===1){Xt=0;var t=ss,i=So,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var l=ae.p;ae.p=2;var h=Ze;Ze|=4;try{Q_(i,t);var f=_m,v=Zg(t.containerInfo),T=f.focusedElem,I=f.selectionRange;if(v!==T&&T&&T.ownerDocument&&Jg(T.ownerDocument.documentElement,T)){if(I!==null&&qd(T)){var q=I.start,Z=I.end;if(Z===void 0&&(Z=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min(Z,T.value.length);else{var ne=T.ownerDocument||document,H=ne&&ne.defaultView||window;if(H.getSelection){var Q=H.getSelection(),me=T.textContent.length,Ae=Math.min(I.start,me),lt=I.end===void 0?Ae:Math.min(I.end,me);!Q.extend&&Ae>lt&&(v=lt,lt=Ae,Ae=v);var P=Wg(T,Ae),M=Wg(T,lt);if(P&&M&&(Q.rangeCount!==1||Q.anchorNode!==P.node||Q.anchorOffset!==P.offset||Q.focusNode!==M.node||Q.focusOffset!==M.offset)){var B=ne.createRange();B.setStart(P.node,P.offset),Q.removeAllRanges(),Ae>lt?(Q.addRange(B),Q.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),Q.addRange(B))}}}}for(ne=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var te=ne[T];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}fh=!!ym,_m=ym=null}finally{Ze=h,ae.p=l,$.T=a}}t.current=i,Xt=2}}function mv(){if(Xt===2){Xt=0;var t=ss,i=So,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var l=ae.p;ae.p=2;var h=Ze;Ze|=4;try{q_(t,i.alternate,i)}finally{Ze=h,ae.p=l,$.T=a}}Xt=3}}function pv(){if(Xt===4||Xt===3){Xt=0,Ci();var t=ss,i=So,a=wr,l=tv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xt=5:(Xt=0,So=ss=null,gv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(rs=null),or(a),i=i.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(At,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=$.T,h=ae.p,ae.p=2,$.T=null;try{for(var f=t.onRecoverableError,v=0;v<l.length;v++){var T=l[v];f(T.value,{componentStack:T.stack})}}finally{$.T=i,ae.p=h}}(wr&3)!==0&&th(),Yi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===rm?Xl++:(Xl=0,rm=t):Xl=0,$l(0)}}function gv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Il(i)))}function th(){return fv(),mv(),pv(),yv()}function yv(){if(Xt!==5)return!1;var t=ss,i=nm;nm=0;var a=or(wr),l=$.T,h=ae.p;try{ae.p=32>a?32:a,$.T=null,a=im,im=null;var f=ss,v=wr;if(Xt=0,So=ss=null,wr=0,(Ze&6)!==0)throw Error(s(331));var T=Ze;if(Ze|=4,J_(f.current),X_(f,f.current,v,a),Ze=T,$l(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(At,f)}catch{}return!0}finally{ae.p=h,$.T=l,gv(t,i)}}function _v(t,i,a){i=ii(a,i),i=kf(t.stateNode,i,2),t=Jr(t,i,2),t!==null&&(Zt(t,2),Yi(t))}function rt(t,i,a){if(t.tag===3)_v(t,t,a);else for(;i!==null;){if(i.tag===3){_v(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(rs===null||!rs.has(l))){t=ii(a,t),a=v_(2),l=Jr(i,a,2),l!==null&&(E_(a,l,i,t),Zt(l,2),Yi(l));break}}i=i.return}}function om(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new nS;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Zf=!0,h.add(a),t=oS.bind(null,t,i,a),i.then(t,t))}function oS(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ct===t&&(ze&a)===a&&(xt===4||xt===3&&(ze&62914560)===ze&&300>Jt()-Xu?(Ze&2)===0&&xo(t,0):em|=a,wo===ze&&(wo=0)),Yi(t)}function vv(t,i){i===0&&(i=be()),t=la(t,i),t!==null&&(Zt(t,i),Yi(t))}function lS(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),vv(t,a)}function cS(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),vv(t,a)}function uS(t,i){return dt(t,i)}var nh=null,No=null,lm=!1,ih=!1,cm=!1,os=0;function Yi(t){t!==No&&t.next===null&&(No===null?nh=No=t:No=No.next=t),ih=!0,lm||(lm=!0,dS())}function $l(t,i){if(!cm&&ih){cm=!0;do for(var a=!1,l=nh;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var v=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-bt(42|t)+1)-1,f&=h&~(v&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Av(l,f))}else f=ze,f=mn(l,l===ct?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||kn(l,f)||(a=!0,Av(l,f));l=l.next}while(a);cm=!1}}function hS(){Ev()}function Ev(){ih=lm=!1;var t=0;os!==0&&TS()&&(t=os);for(var i=Jt(),a=null,l=nh;l!==null;){var h=l.next,f=bv(l,i);f===0?(l.next=null,a===null?nh=h:a.next=h,h===null&&(No=a)):(a=l,(t!==0||(f&3)!==0)&&(ih=!0)),l=h}Xt!==0&&Xt!==5||$l(t),os!==0&&(os=0)}function bv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-bt(f),T=1<<v,I=h[v];I===-1?((T&a)===0||(T&l)!==0)&&(h[v]=L(T,i)):I<=i&&(t.expiredLanes|=T),f&=~T}if(i=ct,a=ze,a=mn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(it===2||it===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Xn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||kn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&Xn(l),or(a)){case 2:case 8:a=Ks;break;case 32:a=Di;break;case 268435456:a=qa;break;default:a=Di}return l=Tv.bind(null,t),a=dt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&Xn(l),t.callbackPriority=2,t.callbackNode=null,2}function Tv(t,i){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(th()&&t.callbackNode!==a)return null;var l=ze;return l=mn(t,t===ct?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(iv(t,l,i),bv(t,Jt()),t.callbackNode!=null&&t.callbackNode===a?Tv.bind(null,t):null)}function Av(t,i){if(th())return null;iv(t,i,!0)}function dS(){wS(function(){(Ze&6)!==0?dt(fi,hS):Ev()})}function um(){if(os===0){var t=fo;t===0&&(t=$n,$n<<=1,($n&261888)===0&&($n=256)),os=t}return os}function wv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wa(""+t)}function Sv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function fS(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=wv((h[en]||null).action),v=l.submitter;v&&(i=(i=v[en]||null)?wv(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var T=new Bi("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(os!==0){var I=v?Sv(h,v):new FormData(h);If(a,{pending:!0,data:I,method:h.method,action:f},null,I)}}else typeof f=="function"&&(T.preventDefault(),I=v?Sv(h,v):new FormData(h),If(a,{pending:!0,data:I,method:h.method,action:f},f,I))},currentTarget:h}]})}}for(var hm=0;hm<Kd.length;hm++){var dm=Kd[hm],mS=dm.toLowerCase(),pS=dm[0].toUpperCase()+dm.slice(1);bi(mS,"on"+pS)}bi(ny,"onAnimationEnd"),bi(iy,"onAnimationIteration"),bi(ry,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(Dw,"onTransitionRun"),bi(Ow,"onTransitionStart"),bi(jw,"onTransitionCancel"),bi(sy,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function xv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],I=T.instance,q=T.currentTarget;if(T=T.listener,I!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch(Z){_u(Z)}h.currentTarget=null,f=I}else for(v=0;v<l.length;v++){if(T=l[v],I=T.instance,q=T.currentTarget,T=T.listener,I!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch(Z){_u(Z)}h.currentTarget=null,f=I}}}}function Ue(t,i){var a=i[Ka];a===void 0&&(a=i[Ka]=new Set);var l=t+"__bubble";a.has(l)||(Rv(i,t,2,!1),a.add(l))}function fm(t,i,a){var l=0;i&&(l|=4),Rv(a,t,l,i)}var rh="_reactListening"+Math.random().toString(36).slice(2);function mm(t){if(!t[rh]){t[rh]=!0,cl.forEach(function(a){a!=="selectionchange"&&(gS.has(a)||fm(a,!1,t),fm(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[rh]||(i[rh]=!0,fm("selectionchange",!1,i))}}function Rv(t,i,a,l){switch(nE(i)){case 2:var h=HS;break;case 8:h=GS;break;default:h=Cm}a=h.bind(null,i,a,t),h=void 0,!ea||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function pm(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=l.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=Mi(T),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){l=f=v;continue e}T=T.parentNode}}l=l.return}qr(function(){var q=f,Z=Zn(a),ne=[];e:{var H=ay.get(t);if(H!==void 0){var Q=Bi,me=t;switch(t){case"keypress":if(na(a)===0)break e;case"keydown":case"keyup":Q=pu;break;case"focusin":me="focus",Q=ra;break;case"focusout":me="blur",Q=ra;break;case"beforeblur":case"afterblur":Q=ra;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=y;break;case ny:case iy:case ry:Q=lu;break;case sy:Q=w;break;case"scroll":case"scrollend":Q=bl;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ur;break;case"toggle":case"beforetoggle":Q=De}var Ae=(i&4)!==0,lt=!Ae&&(t==="scroll"||t==="scrollend"),P=Ae?H!==null?H+"Capture":null:H;Ae=[];for(var M=q,B;M!==null;){var te=M;if(B=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||B===null||P===null||(te=yi(M,P),te!=null&&Ae.push(Jl(M,te,B))),lt)break;M=M.return}0<Ae.length&&(H=new Q(H,me,null,a,Z),ne.push({event:H,listeners:Ae}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",H&&a!==_l&&(me=a.relatedTarget||a.fromElement)&&(Mi(me)||me[Oi]))break e;if((Q||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,Q?(me=a.relatedTarget||a.toElement,Q=q,me=me?Mi(me):null,me!==null&&(lt=c(me),Ae=me.tag,me!==lt||Ae!==5&&Ae!==27&&Ae!==6)&&(me=null)):(Q=null,me=q),Q!==me)){if(Ae=Tl,te="onMouseLeave",P="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=ur,te="onPointerLeave",P="onPointerEnter",M="pointer"),lt=Q==null?H:Pn(Q),B=me==null?H:Pn(me),H=new Ae(te,M+"leave",Q,a,Z),H.target=lt,H.relatedTarget=B,te=null,Mi(Z)===q&&(Ae=new Ae(P,M+"enter",me,a,Z),Ae.target=B,Ae.relatedTarget=lt,te=Ae),lt=te,Q&&me)t:{for(Ae=yS,P=Q,M=me,B=0,te=P;te;te=Ae(te))B++;te=0;for(var ve=M;ve;ve=Ae(ve))te++;for(;0<B-te;)P=Ae(P),B--;for(;0<te-B;)M=Ae(M),te--;for(;B--;){if(P===M||M!==null&&P===M.alternate){Ae=P;break t}P=Ae(P),M=Ae(M)}Ae=null}else Ae=null;Q!==null&&Nv(ne,H,Q,Ae,!1),me!==null&&lt!==null&&Nv(ne,lt,me,Ae,!0)}}e:{if(H=q?Pn(q):window,Q=H.nodeName&&H.nodeName.toLowerCase(),Q==="select"||Q==="input"&&H.type==="file")var Xe=Gg;else if(Fg(H))if(Kg)Xe=Nw;else{Xe=xw;var _e=Sw}else Q=H.nodeName,!Q||Q.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&$a(q.elementType)&&(Xe=Gg):Xe=Rw;if(Xe&&(Xe=Xe(t,q))){Hg(ne,Xe,a,Z);break e}_e&&_e(t,H,q),t==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&pl(H,"number",H.value)}switch(_e=q?Pn(q):window,t){case"focusin":(Fg(_e)||_e.contentEditable==="true")&&(ro=_e,Fd=q,Rl=null);break;case"focusout":Rl=Fd=ro=null;break;case"mousedown":Hd=!0;break;case"contextmenu":case"mouseup":case"dragend":Hd=!1,ey(ne,a,Z);break;case"selectionchange":if(Iw)break;case"keydown":case"keyup":ey(ne,a,Z)}var je;if(Je)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else io?sa(t,a)&&(Be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Hi&&a.locale!=="ko"&&(io||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&io&&(je=El()):(zi=Z,vl="value"in zi?zi.value:zi.textContent,io=!0)),_e=sh(q,Be),0<_e.length&&(Be=new Fi(Be,t,null,a,Z),ne.push({event:Be,listeners:_e}),je?Be.data=je:(je=no(a),je!==null&&(Be.data=je)))),(je=ti?bw(t,a):Tw(t,a))&&(Be=sh(q,"onBeforeInput"),0<Be.length&&(_e=new Fi("onBeforeInput","beforeinput",null,a,Z),ne.push({event:_e,listeners:Be}),_e.data=je)),fS(ne,t,q,a,Z)}xv(ne,i)})}function Jl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function sh(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=yi(t,a),h!=null&&l.unshift(Jl(t,h,f)),h=yi(t,i),h!=null&&l.push(Jl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function yS(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Nv(t,i,a,l,h){for(var f=i._reactName,v=[];a!==null&&a!==l;){var T=a,I=T.alternate,q=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||q===null||(I=q,h?(q=yi(a,f),q!=null&&v.unshift(Jl(a,q,I))):h||(q=yi(a,f),q!=null&&v.push(Jl(a,q,I)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var _S=/\r\n?/g,vS=/\u0000|\uFFFD/g;function Cv(t){return(typeof t=="string"?t:""+t).replace(_S,`
`).replace(vS,"")}function Iv(t,i){return i=Cv(i),Cv(t)===i}function ot(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Nn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Nn(t,""+l);break;case"className":Ln(t,"class",l);break;case"tabIndex":Ln(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ln(t,a,l);break;case"style":yl(t,l,f);break;case"data":if(i!=="object"){Ln(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Wa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&ot(t,i,"name",h.name,h,null),ot(t,i,"formEncType",h.formEncType,h,null),ot(t,i,"formMethod",h.formMethod,h,null),ot(t,i,"formTarget",h.formTarget,h,null)):(ot(t,i,"encType",h.encType,h,null),ot(t,i,"method",h.method,h,null),ot(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Wa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=gi);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Wa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),Ya(t,"popover",l);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ya(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=su.get(a)||a,Ya(t,a,l))}}function gm(t,i,a,l,h,f){switch(a){case"style":yl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Nn(t,l):(typeof l=="number"||typeof l=="bigint")&&Nn(t,""+l);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"onClick":l!=null&&(t.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ul.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[en]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ya(t,a,l)}}}function cn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ot(t,i,f,v,a,null)}}h&&ot(t,i,"srcSet",a.srcSet,a,null),l&&ot(t,i,"src",a.src,a,null);return;case"input":Ue("invalid",t);var T=f=v=h=null,I=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":v=Z;break;case"checked":I=Z;break;case"defaultChecked":q=Z;break;case"value":f=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:ot(t,i,l,Z,a,null)}}nu(t,f,T,I,q,v,h,!1);return;case"select":Ue("invalid",t),l=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:ot(t,i,h,T,a,null)}i=f,a=v,t.multiple=!!l,i!=null?Lr(t,!!l,i,!1):a!=null&&Lr(t,!!l,a,!0);return;case"textarea":Ue("invalid",t),f=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:ot(t,i,v,T,a,null)}Ur(t,l,h,f);return;case"option":for(I in a)a.hasOwnProperty(I)&&(l=a[I],l!=null)&&(I==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":ot(t,i,I,l,a,null));return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(l=0;l<Wl.length;l++)Ue(Wl[l],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ot(t,i,q,l,a,null)}return;default:if($a(i)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&gm(t,i,Z,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ot(t,i,T,l,a,null))}function ES(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,T=null,I=null,q=null,Z=null;for(Q in a){var ne=a[Q];if(a.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":I=ne;default:l.hasOwnProperty(Q)||ot(t,i,Q,null,l,ne)}}for(var H in l){var Q=l[H];if(ne=a[H],l.hasOwnProperty(H)&&(Q!=null||ne!=null))switch(H){case"type":f=Q;break;case"name":h=Q;break;case"checked":q=Q;break;case"defaultChecked":Z=Q;break;case"value":v=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Q!==ne&&ot(t,i,H,Q,l,ne)}}Xa(t,v,T,I,q,Z,f,h);return;case"select":Q=v=T=H=null;for(f in a)if(I=a[f],a.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":Q=I;default:l.hasOwnProperty(f)||ot(t,i,f,null,l,I)}for(h in l)if(f=l[h],I=a[h],l.hasOwnProperty(h)&&(f!=null||I!=null))switch(h){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":v=f;default:f!==I&&ot(t,i,h,f,l,I)}i=T,a=v,l=Q,H!=null?Lr(t,!!a,H,!1):!!l!=!!a&&(i!=null?Lr(t,!!a,i,!0):Lr(t,!!a,a?[]:"",!1));return;case"textarea":Q=H=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(t,i,T,null,l,h)}for(v in l)if(h=l[v],f=a[v],l.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":H=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&ot(t,i,v,h,l,f)}iu(t,H,Q);return;case"option":for(var me in a)H=a[me],a.hasOwnProperty(me)&&H!=null&&!l.hasOwnProperty(me)&&(me==="selected"?t.selected=!1:ot(t,i,me,null,l,H));for(I in l)H=l[I],Q=a[I],l.hasOwnProperty(I)&&H!==Q&&(H!=null||Q!=null)&&(I==="selected"?t.selected=H&&typeof H!="function"&&typeof H!="symbol":ot(t,i,I,H,l,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)H=a[Ae],a.hasOwnProperty(Ae)&&H!=null&&!l.hasOwnProperty(Ae)&&ot(t,i,Ae,null,l,H);for(q in l)if(H=l[q],Q=a[q],l.hasOwnProperty(q)&&H!==Q&&(H!=null||Q!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:ot(t,i,q,H,l,Q)}return;default:if($a(i)){for(var lt in a)H=a[lt],a.hasOwnProperty(lt)&&H!==void 0&&!l.hasOwnProperty(lt)&&gm(t,i,lt,void 0,l,H);for(Z in l)H=l[Z],Q=a[Z],!l.hasOwnProperty(Z)||H===Q||H===void 0&&Q===void 0||gm(t,i,Z,H,l,Q);return}}for(var P in a)H=a[P],a.hasOwnProperty(P)&&H!=null&&!l.hasOwnProperty(P)&&ot(t,i,P,null,l,H);for(ne in l)H=l[ne],Q=a[ne],!l.hasOwnProperty(ne)||H===Q||H==null&&Q==null||ot(t,i,ne,H,l,Q)}function Dv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],f=h.transferSize,v=h.initiatorType,T=h.duration;if(f&&T&&Dv(v)){for(v=0,T=h.responseEnd,l+=1;l<a.length;l++){var I=a[l],q=I.startTime;if(q>T)break;var Z=I.transferSize,ne=I.initiatorType;Z&&Dv(ne)&&(I=I.responseEnd,v+=Z*(I<T?1:(T-q)/(I-q)))}if(--l,i+=8*(f+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ym=null,_m=null;function ah(t){return t.nodeType===9?t:t.ownerDocument}function Ov(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function vm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Em=null;function TS(){var t=window.event;return t&&t.type==="popstate"?t===Em?!1:(Em=t,!0):(Em=null,!1)}var Mv=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,wS=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(t){return Vv.resolve(null).then(t).catch(SS)}:Mv;function SS(t){setTimeout(function(){throw t})}function ls(t){return t==="head"}function kv(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Oo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Zl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Zl(a);for(var f=a.firstChild;f;){var v=f.nextSibling,T=f.nodeName;f[ji]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=v}}else a==="body"&&Zl(t.ownerDocument.body);a=h}while(a);Oo(i)}function Pv(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function bm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bm(a),Qa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function xS(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ji])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=li(t.nextSibling),t===null)break}return null}function RS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=li(t.nextSibling),t===null))return null;return t}function Lv(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=li(t.nextSibling),t===null))return null;return t}function Tm(t){return t.data==="$?"||t.data==="$~"}function Am(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function NS(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function li(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var wm=null;function Uv(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return li(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function zv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function Bv(t,i,a){switch(i=ah(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Zl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Qa(t)}var ci=new Map,qv=new Set;function oh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Sr=ae.d;ae.d={f:CS,r:IS,D:DS,C:OS,L:jS,m:MS,X:kS,S:VS,M:PS};function CS(){var t=Sr.f(),i=Ju();return t||i}function IS(t){var i=Jn(t);i!==null&&i.tag===5&&i.type==="form"?s_(i):Sr.r(t)}var Co=typeof document>"u"?null:document;function Fv(t,i,a){var l=Co;if(l&&typeof i=="string"&&i){var h=Rn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),qv.has(h)||(qv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),cn(i,"link",t),Lt(i),l.head.appendChild(i)))}}function DS(t){Sr.D(t),Fv("dns-prefetch",t,null)}function OS(t,i){Sr.C(t,i),Fv("preconnect",t,i)}function jS(t,i,a){Sr.L(t,i,a);var l=Co;if(l&&t&&i){var h='link[rel="preload"][as="'+Rn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Rn(a.imageSizes)+'"]')):h+='[href="'+Rn(t)+'"]';var f=h;switch(i){case"style":f=Io(t);break;case"script":f=Do(t)}ci.has(f)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ci.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(ec(f))||i==="script"&&l.querySelector(tc(f))||(i=l.createElement("link"),cn(i,"link",t),Lt(i),l.head.appendChild(i)))}}function MS(t,i){Sr.m(t,i);var a=Co;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Do(t)}if(!ci.has(f)&&(t=A({rel:"modulepreload",href:t},i),ci.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tc(f)))return}l=a.createElement("link"),cn(l,"link",t),Lt(l),a.head.appendChild(l)}}}function VS(t,i,a){Sr.S(t,i,a);var l=Co;if(l&&t){var h=Vi(l).hoistableStyles,f=Io(t);i=i||"default";var v=h.get(f);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(ec(f)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ci.get(f))&&Sm(t,a);var I=v=l.createElement("link");Lt(I),cn(I,"link",t),I._p=new Promise(function(q,Z){I.onload=q,I.onerror=Z}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,lh(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(f,v)}}}function kS(t,i){Sr.X(t,i);var a=Co;if(a&&t){var l=Vi(a).hoistableScripts,h=Do(t),f=l.get(h);f||(f=a.querySelector(tc(h)),f||(t=A({src:t,async:!0},i),(i=ci.get(h))&&xm(t,i),f=a.createElement("script"),Lt(f),cn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function PS(t,i){Sr.M(t,i);var a=Co;if(a&&t){var l=Vi(a).hoistableScripts,h=Do(t),f=l.get(h);f||(f=a.querySelector(tc(h)),f||(t=A({src:t,async:!0,type:"module"},i),(i=ci.get(h))&&xm(t,i),f=a.createElement("script"),Lt(f),cn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Hv(t,i,a,l){var h=(h=Y.current)?oh(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Io(a.href),a=Vi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Io(a.href);var f=Vi(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(ec(t)))&&!f._p&&(v.instance=f,v.state.loading=5),ci.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ci.set(t,a),f||LS(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Do(a),a=Vi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Io(t){return'href="'+Rn(t)+'"'}function ec(t){return'link[rel="stylesheet"]['+t+"]"}function Gv(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function LS(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),cn(i,"link",a),Lt(i),t.head.appendChild(i))}function Do(t){return'[src="'+Rn(t)+'"]'}function tc(t){return"script[async]"+t}function Kv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(l)return i.instance=l,Lt(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Lt(l),cn(l,"style",h),lh(l,a.precedence,t),i.instance=l;case"stylesheet":h=Io(a.href);var f=t.querySelector(ec(h));if(f)return i.state.loading|=4,i.instance=f,Lt(f),f;l=Gv(a),(h=ci.get(h))&&Sm(l,h),f=(t.ownerDocument||t).createElement("link"),Lt(f);var v=f;return v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),cn(f,"link",l),i.state.loading|=4,lh(f,a.precedence,t),i.instance=f;case"script":return f=Do(a.src),(h=t.querySelector(tc(f)))?(i.instance=h,Lt(h),h):(l=a,(h=ci.get(f))&&(l=A({},a),xm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Lt(h),cn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,lh(l,a.precedence,t));return i.instance}function lh(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Sm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function xm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var ch=null;function Qv(t,i,a){if(ch===null){var l=new Map,h=ch=new Map;h.set(a,l)}else h=ch,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[ji]||f[Pt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=t+v;var T=l.get(v);T?T.push(f):l.set(v,[f])}}return l}function Yv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function US(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Xv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function zS(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Io(l.href),f=i.querySelector(ec(h));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=uh.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,Lt(f);return}f=i.ownerDocument||i,l=Gv(l),(h=ci.get(h))&&Sm(l,h),f=f.createElement("link"),Lt(f);var v=f;v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),cn(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=uh.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Rm=0;function BS(t,i){return t.stylesheets&&t.count===0&&dh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&dh(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&Rm===0&&(Rm=62500*bS());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&dh(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Rm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function uh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var hh=null;function dh(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,hh=new Map,i.forEach(qS,t),hh=null,uh.call(t))}function qS(t,i){if(!(i.state.loading&4)){var a=hh.get(t);if(a)var l=a.get(null);else{a=new Map,hh.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||l,f===l&&a.set(null,h),a.set(v,h),this.count++,l=uh.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var nc={$$typeof:oe,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function FS(t,i,a,l,h,f,v,T,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qe(0),this.hiddenUpdates=Qe(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function $v(t,i,a,l,h,f,v,T,I,q,Z,ne){return t=new FS(t,i,a,v,I,q,Z,ne,T),i=1,f===!0&&(i|=24),f=zn(3,null,null,i),t.current=f,f.stateNode=t,i=af(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},uf(f),t}function Wv(t){return t?(t=oo,t):oo}function Jv(t,i,a,l,h,f){h=Wv(h),l.context===null?l.context=h:l.pendingContext=h,l=Wr(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Jr(t,l,i),a!==null&&(jn(a,t,i),Ml(a,t,i))}function Zv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Nm(t,i){Zv(t,i),(t=t.alternate)&&Zv(t,i)}function eE(t){if(t.tag===13||t.tag===31){var i=la(t,67108864);i!==null&&jn(i,t,67108864),Nm(t,67108864)}}function tE(t){if(t.tag===13||t.tag===31){var i=Gn();i=$s(i);var a=la(t,i);a!==null&&jn(a,t,i),Nm(t,i)}}var fh=!0;function HS(t,i,a,l){var h=$.T;$.T=null;var f=ae.p;try{ae.p=2,Cm(t,i,a,l)}finally{ae.p=f,$.T=h}}function GS(t,i,a,l){var h=$.T;$.T=null;var f=ae.p;try{ae.p=8,Cm(t,i,a,l)}finally{ae.p=f,$.T=h}}function Cm(t,i,a,l){if(fh){var h=Im(l);if(h===null)pm(t,i,l,mh,a),iE(t,l);else if(QS(h,t,i,a,l))l.stopPropagation();else if(iE(t,l),i&4&&-1<KS.indexOf(t)){for(;h!==null;){var f=Jn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Wn(f.pendingLanes);if(v!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var I=1<<31-bt(v);T.entanglements[1]|=I,v&=~I}Yi(f),(Ze&6)===0&&($u=Jt()+500,$l(0))}}break;case 31:case 13:T=la(f,2),T!==null&&jn(T,f,2),Ju(),Nm(f,2)}if(f=Im(l),f===null&&pm(t,i,l,mh,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else pm(t,i,l,null,a)}}function Im(t){return t=Zn(t),Dm(t)}var mh=null;function Dm(t){if(mh=null,t=Mi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return mh=t,null}function nE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ii()){case fi:return 2;case Ks:return 8;case Di:case Ba:return 32;case qa:return 268435456;default:return 32}default:return 32}}var Om=!1,cs=null,us=null,hs=null,ic=new Map,rc=new Map,ds=[],KS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iE(t,i){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":ic.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(i.pointerId)}}function sc(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Jn(i),i!==null&&eE(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function QS(t,i,a,l,h){switch(i){case"focusin":return cs=sc(cs,t,i,a,l,h),!0;case"dragenter":return us=sc(us,t,i,a,l,h),!0;case"mouseover":return hs=sc(hs,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return ic.set(f,sc(ic.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,rc.set(f,sc(rc.get(f)||null,t,i,a,l,h)),!0}return!1}function rE(t){var i=Mi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,mi(t.priority,function(){tE(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,mi(t.priority,function(){tE(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ph(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Im(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);_l=l,a.target.dispatchEvent(l),_l=null}else return i=Jn(a),i!==null&&eE(i),t.blockedOn=a,!1;i.shift()}return!0}function sE(t,i,a){ph(t)&&a.delete(i)}function YS(){Om=!1,cs!==null&&ph(cs)&&(cs=null),us!==null&&ph(us)&&(us=null),hs!==null&&ph(hs)&&(hs=null),ic.forEach(sE),rc.forEach(sE)}function gh(t,i){t.blockedOn===i&&(t.blockedOn=null,Om||(Om=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,YS)))}var yh=null;function aE(t){yh!==t&&(yh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yh===t&&(yh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Dm(l||a)===null)continue;break}var f=Jn(a);f!==null&&(t.splice(i,3),i-=3,If(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Oo(t){function i(I){return gh(I,t)}cs!==null&&gh(cs,t),us!==null&&gh(us,t),hs!==null&&gh(hs,t),ic.forEach(i),rc.forEach(i);for(var a=0;a<ds.length;a++){var l=ds[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ds.length&&(a=ds[0],a.blockedOn===null);)rE(a),a.blockedOn===null&&ds.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],v=h[en]||null;if(typeof f=="function")v||aE(a);else if(v){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[en]||null)T=v.formAction;else if(Dm(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),aE(a)}}}function oE(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function jm(t){this._internalRoot=t}_h.prototype.render=jm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Gn();Jv(a,l,t,i,null,null)},_h.prototype.unmount=jm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Jv(t.current,2,null,t,null,null),Ju(),i[Oi]=null}};function _h(t){this._internalRoot=t}_h.prototype.unstable_scheduleHydration=function(t){if(t){var i=Jc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ds.length&&i!==0&&i<ds[a].priority;a++);ds.splice(a,0,t),a===0&&rE(t)}};var lE=e.version;if(lE!=="19.2.4")throw Error(s(527,lE,"19.2.4"));ae.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=_(i),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var XS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{At=vh.inject(XS),tt=vh}catch{}}return oc.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=p_,f=g_,v=y_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=$v(t,1,!1,null,null,a,l,null,h,f,v,oE),t[Oi]=i.current,mm(t),new jm(i)},oc.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=p_,v=g_,T=y_,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),i=$v(t,1,!0,i,a??null,l,h,I,f,v,T,oE),i.context=Wv(null),a=i.current,l=Gn(),l=$s(l),h=Wr(l),h.callback=null,Jr(a,h,l),a=l,i.current.lanes=a,Zt(i,a),Yi(i),t[Oi]=i.current,mm(t),new _h(i)},oc.version="19.2.4",oc}var _E;function a1(){if(_E)return km.exports;_E=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),km.exports=s1(),km.exports}var o1=a1();const l1=yb(o1);vb();function wc(){return wc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},wc.apply(this,arguments)}var ws;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ws||(ws={}));const vE="popstate";function c1(r){r===void 0&&(r={});function e(s,o){let{pathname:c,search:d,hash:p}=s.location;return sp("",{pathname:c,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:qh(o)}return h1(e,n,null,r)}function Vt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Vp(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u1(){return Math.random().toString(36).substr(2,8)}function EE(r,e){return{usr:r.state,key:r.key,idx:e}}function sp(r,e,n,s){return n===void 0&&(n=null),wc({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Zo(e):e,{state:n,key:e&&e.key||s||u1()})}function qh(r){let{pathname:e="/",search:n="",hash:s=""}=r;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Zo(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substr(n),r=r.substr(0,n));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function h1(r,e,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,p=ws.Pop,g=null,_=b();_==null&&(_=0,d.replaceState(wc({},d.state,{idx:_}),""));function b(){return(d.state||{idx:null}).idx}function A(){p=ws.Pop;let G=b(),re=G==null?null:G-_;_=G,g&&g({action:p,location:X.location,delta:re})}function S(G,re){p=ws.Push;let ce=sp(X.location,G,re);_=b()+1;let oe=EE(ce,_),pe=X.createHref(ce);try{d.pushState(oe,"",pe)}catch(Ce){if(Ce instanceof DOMException&&Ce.name==="DataCloneError")throw Ce;o.location.assign(pe)}c&&g&&g({action:p,location:X.location,delta:1})}function V(G,re){p=ws.Replace;let ce=sp(X.location,G,re);_=b();let oe=EE(ce,_),pe=X.createHref(ce);d.replaceState(oe,"",pe),c&&g&&g({action:p,location:X.location,delta:0})}function F(G){let re=o.location.origin!=="null"?o.location.origin:o.location.href,ce=typeof G=="string"?G:qh(G);return ce=ce.replace(/ $/,"%20"),Vt(re,"No window.location.(origin|href) available to create URL for href: "+ce),new URL(ce,re)}let X={get action(){return p},get location(){return r(o,d)},listen(G){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(vE,A),g=G,()=>{o.removeEventListener(vE,A),g=null}},createHref(G){return e(o,G)},createURL:F,encodeLocation(G){let re=F(G);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:S,replace:V,go(G){return d.go(G)}};return X}var bE;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(bE||(bE={}));function d1(r,e,n){return n===void 0&&(n="/"),f1(r,e,n)}function f1(r,e,n,s){let o=typeof e=="string"?Zo(e):e,c=kp(o.pathname||"/",n);if(c==null)return null;let d=Eb(r);m1(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let _=x1(c);p=A1(d[g],_)}return p}function Eb(r,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(c,d,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};g.relativePath.startsWith("/")&&(Vt(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let _=xs([s,g.relativePath]),b=n.concat(g);c.children&&c.children.length>0&&(Vt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),Eb(c.children,e,b,_)),!(c.path==null&&!c.index)&&e.push({path:_,score:b1(_,c.index),routesMeta:b})};return r.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))o(c,d);else for(let g of bb(c.path))o(c,d,g)}),e}function bb(r){let e=r.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=bb(s.join("/")),p=[];return p.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...d),p.map(g=>r.startsWith("/")&&g===""?"/":g)}function m1(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:T1(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const p1=/^:[\w-]+$/,g1=3,y1=2,_1=1,v1=10,E1=-2,TE=r=>r==="*";function b1(r,e){let n=r.split("/"),s=n.length;return n.some(TE)&&(s+=E1),e&&(s+=y1),n.filter(o=>!TE(o)).reduce((o,c)=>o+(p1.test(c)?g1:c===""?_1:v1),s)}function T1(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function A1(r,e,n){let{routesMeta:s}=r,o={},c="/",d=[];for(let p=0;p<s.length;++p){let g=s[p],_=p===s.length-1,b=c==="/"?e:e.slice(c.length)||"/",A=w1({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},b),S=g.route;if(!A)return null;Object.assign(o,A.params),d.push({params:o,pathname:xs([c,A.pathname]),pathnameBase:D1(xs([c,A.pathnameBase])),route:S}),A.pathnameBase!=="/"&&(c=xs([c,A.pathnameBase]))}return d}function w1(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,s]=S1(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((_,b,A)=>{let{paramName:S,isOptional:V}=b;if(S==="*"){let X=p[A]||"";d=c.slice(0,c.length-X.length).replace(/(.)\/+$/,"$1")}const F=p[A];return V&&!F?_[S]=void 0:_[S]=(F||"").replace(/%2F/g,"/"),_},{}),pathname:c,pathnameBase:d,pattern:r}}function S1(r,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vp(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(s.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function x1(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vp(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function kp(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=r.charAt(n);return s&&s!=="/"?null:r.slice(n)||"/"}const R1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,N1=r=>R1.test(r);function C1(r,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:o=""}=typeof r=="string"?Zo(r):r,c;if(n)if(N1(n))c=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),Vp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+n))}n.startsWith("/")?c=AE(n.substring(1),"/"):c=AE(n,e)}else c=e;return{pathname:c,search:O1(s),hash:j1(o)}}function AE(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function zm(r,e,n,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function I1(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pp(r,e){let n=I1(r);return e?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Lp(r,e,n,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Zo(r):(o=wc({},r),Vt(!o.pathname||!o.pathname.includes("?"),zm("?","pathname","search",o)),Vt(!o.pathname||!o.pathname.includes("#"),zm("#","pathname","hash",o)),Vt(!o.search||!o.search.includes("#"),zm("#","search","hash",o)));let c=r===""||o.pathname==="",d=c?"/":o.pathname,p;if(d==null)p=n;else{let A=e.length-1;if(!s&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),A-=1;o.pathname=S.join("/")}p=A>=0?e[A]:"/"}let g=C1(o,p),_=d&&d!=="/"&&d.endsWith("/"),b=(c||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(_||b)&&(g.pathname+="/"),g}const xs=r=>r.join("/").replace(/\/\/+/g,"/"),D1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),O1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,j1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function M1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Tb=["post","put","patch","delete"];new Set(Tb);const V1=["get",...Tb];new Set(V1);function Sc(){return Sc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Sc.apply(this,arguments)}const Up=z.createContext(null),k1=z.createContext(null),Ls=z.createContext(null),dd=z.createContext(null),Us=z.createContext({outlet:null,matches:[],isDataRoute:!1}),Ab=z.createContext(null);function P1(r,e){let{relative:n}=e===void 0?{}:e;el()||Vt(!1);let{basename:s,navigator:o}=z.useContext(Ls),{hash:c,pathname:d,search:p}=Sb(r,{relative:n}),g=d;return s!=="/"&&(g=d==="/"?s:xs([s,d])),o.createHref({pathname:g,search:p,hash:c})}function el(){return z.useContext(dd)!=null}function tl(){return el()||Vt(!1),z.useContext(dd).location}function wb(r){z.useContext(Ls).static||z.useLayoutEffect(r)}function fd(){let{isDataRoute:r}=z.useContext(Us);return r?$1():L1()}function L1(){el()||Vt(!1);let r=z.useContext(Up),{basename:e,future:n,navigator:s}=z.useContext(Ls),{matches:o}=z.useContext(Us),{pathname:c}=tl(),d=JSON.stringify(Pp(o,n.v7_relativeSplatPath)),p=z.useRef(!1);return wb(()=>{p.current=!0}),z.useCallback(function(_,b){if(b===void 0&&(b={}),!p.current)return;if(typeof _=="number"){s.go(_);return}let A=Lp(_,JSON.parse(d),c,b.relative==="path");r==null&&e!=="/"&&(A.pathname=A.pathname==="/"?e:xs([e,A.pathname])),(b.replace?s.replace:s.push)(A,b.state,b)},[e,s,d,c,r])}function Sb(r,e){let{relative:n}=e===void 0?{}:e,{future:s}=z.useContext(Ls),{matches:o}=z.useContext(Us),{pathname:c}=tl(),d=JSON.stringify(Pp(o,s.v7_relativeSplatPath));return z.useMemo(()=>Lp(r,JSON.parse(d),c,n==="path"),[r,d,c,n])}function U1(r,e){return z1(r,e)}function z1(r,e,n,s){el()||Vt(!1);let{navigator:o}=z.useContext(Ls),{matches:c}=z.useContext(Us),d=c[c.length-1],p=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let _=tl(),b;if(e){var A;let G=typeof e=="string"?Zo(e):e;g==="/"||(A=G.pathname)!=null&&A.startsWith(g)||Vt(!1),b=G}else b=_;let S=b.pathname||"/",V=S;if(g!=="/"){let G=g.replace(/^\//,"").split("/");V="/"+S.replace(/^\//,"").split("/").slice(G.length).join("/")}let F=d1(r,{pathname:V}),X=G1(F&&F.map(G=>Object.assign({},G,{params:Object.assign({},p,G.params),pathname:xs([g,o.encodeLocation?o.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?g:xs([g,o.encodeLocation?o.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),c,n,s);return e&&X?z.createElement(dd.Provider,{value:{location:Sc({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:ws.Pop}},X):X}function B1(){let r=X1(),e=M1(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:o},n):null,null)}const q1=z.createElement(B1,null);class F1 extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?z.createElement(Us.Provider,{value:this.props.routeContext},z.createElement(Ab.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function H1(r){let{routeContext:e,match:n,children:s}=r,o=z.useContext(Up);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(Us.Provider,{value:e},s)}function G1(r,e,n,s){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),r==null){var c;if(!n)return null;if(n.errors)r=n.matches;else if((c=s)!=null&&c.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let d=r,p=(o=n)==null?void 0:o.errors;if(p!=null){let b=d.findIndex(A=>A.route.id&&p?.[A.route.id]!==void 0);b>=0||Vt(!1),d=d.slice(0,Math.min(d.length,b+1))}let g=!1,_=-1;if(n&&s&&s.v7_partialHydration)for(let b=0;b<d.length;b++){let A=d[b];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(_=b),A.route.id){let{loaderData:S,errors:V}=n,F=A.route.loader&&S[A.route.id]===void 0&&(!V||V[A.route.id]===void 0);if(A.route.lazy||F){g=!0,_>=0?d=d.slice(0,_+1):d=[d[0]];break}}}return d.reduceRight((b,A,S)=>{let V,F=!1,X=null,G=null;n&&(V=p&&A.route.id?p[A.route.id]:void 0,X=A.route.errorElement||q1,g&&(_<0&&S===0?(W1("route-fallback"),F=!0,G=null):_===S&&(F=!0,G=A.route.hydrateFallbackElement||null)));let re=e.concat(d.slice(0,S+1)),ce=()=>{let oe;return V?oe=X:F?oe=G:A.route.Component?oe=z.createElement(A.route.Component,null):A.route.element?oe=A.route.element:oe=b,z.createElement(H1,{match:A,routeContext:{outlet:b,matches:re,isDataRoute:n!=null},children:oe})};return n&&(A.route.ErrorBoundary||A.route.errorElement||S===0)?z.createElement(F1,{location:n.location,revalidation:n.revalidation,component:X,error:V,children:ce(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):ce()},null)}var xb=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(xb||{}),Rb=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Rb||{});function K1(r){let e=z.useContext(Up);return e||Vt(!1),e}function Q1(r){let e=z.useContext(k1);return e||Vt(!1),e}function Y1(r){let e=z.useContext(Us);return e||Vt(!1),e}function Nb(r){let e=Y1(),n=e.matches[e.matches.length-1];return n.route.id||Vt(!1),n.route.id}function X1(){var r;let e=z.useContext(Ab),n=Q1(),s=Nb();return e!==void 0?e:(r=n.errors)==null?void 0:r[s]}function $1(){let{router:r}=K1(xb.UseNavigateStable),e=Nb(Rb.UseNavigateStable),n=z.useRef(!1);return wb(()=>{n.current=!0}),z.useCallback(function(o,c){c===void 0&&(c={}),n.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Sc({fromRouteId:e},c)))},[r,e])}const wE={};function W1(r,e,n){wE[r]||(wE[r]=!0)}function J1(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Z1(r){let{to:e,replace:n,state:s,relative:o}=r;el()||Vt(!1);let{future:c,static:d}=z.useContext(Ls),{matches:p}=z.useContext(Us),{pathname:g}=tl(),_=fd(),b=Lp(e,Pp(p,c.v7_relativeSplatPath),g,o==="path"),A=JSON.stringify(b);return z.useEffect(()=>_(JSON.parse(A),{replace:n,state:s,relative:o}),[_,A,o,n,s]),null}function wi(r){Vt(!1)}function ex(r){let{basename:e="/",children:n=null,location:s,navigationType:o=ws.Pop,navigator:c,static:d=!1,future:p}=r;el()&&Vt(!1);let g=e.replace(/^\/*/,"/"),_=z.useMemo(()=>({basename:g,navigator:c,static:d,future:Sc({v7_relativeSplatPath:!1},p)}),[g,p,c,d]);typeof s=="string"&&(s=Zo(s));let{pathname:b="/",search:A="",hash:S="",state:V=null,key:F="default"}=s,X=z.useMemo(()=>{let G=kp(b,g);return G==null?null:{location:{pathname:G,search:A,hash:S,state:V,key:F},navigationType:o}},[g,b,A,S,V,F,o]);return X==null?null:z.createElement(Ls.Provider,{value:_},z.createElement(dd.Provider,{children:n,value:X}))}function tx(r){let{children:e,location:n}=r;return U1(ap(e),n)}new Promise(()=>{});function ap(r,e){e===void 0&&(e=[]);let n=[];return z.Children.forEach(r,(s,o)=>{if(!z.isValidElement(s))return;let c=[...e,o];if(s.type===z.Fragment){n.push.apply(n,ap(s.props.children,c));return}s.type!==wi&&Vt(!1),!s.props.index||!s.props.children||Vt(!1);let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=ap(s.props.children,c)),n.push(d)}),n}function op(){return op=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},op.apply(this,arguments)}function nx(r,e){if(r==null)return{};var n={},s=Object.keys(r),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=r[o]);return n}function ix(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function rx(r,e){return r.button===0&&(!e||e==="_self")&&!ix(r)}const sx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ax="6";try{window.__reactRouterVersion=ax}catch{}const ox="startTransition",SE=t1[ox];function lx(r){let{basename:e,children:n,future:s,window:o}=r,c=z.useRef();c.current==null&&(c.current=c1({window:o,v5Compat:!0}));let d=c.current,[p,g]=z.useState({action:d.action,location:d.location}),{v7_startTransition:_}=s||{},b=z.useCallback(A=>{_&&SE?SE(()=>g(A)):g(A)},[g,_]);return z.useLayoutEffect(()=>d.listen(b),[d,b]),z.useEffect(()=>J1(s),[s]),z.createElement(ex,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:d,future:s})}const cx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ux=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$i=z.forwardRef(function(e,n){let{onClick:s,relative:o,reloadDocument:c,replace:d,state:p,target:g,to:_,preventScrollReset:b,viewTransition:A}=e,S=nx(e,sx),{basename:V}=z.useContext(Ls),F,X=!1;if(typeof _=="string"&&ux.test(_)&&(F=_,cx))try{let oe=new URL(window.location.href),pe=_.startsWith("//")?new URL(oe.protocol+_):new URL(_),Ce=kp(pe.pathname,V);pe.origin===oe.origin&&Ce!=null?_=Ce+pe.search+pe.hash:X=!0}catch{}let G=P1(_,{relative:o}),re=hx(_,{replace:d,state:p,target:g,preventScrollReset:b,relative:o,viewTransition:A});function ce(oe){s&&s(oe),oe.defaultPrevented||re(oe)}return z.createElement("a",op({},S,{href:F||G,onClick:X||c?s:ce,ref:n,target:g}))});var xE;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(xE||(xE={}));var RE;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(RE||(RE={}));function hx(r,e){let{target:n,replace:s,state:o,preventScrollReset:c,relative:d,viewTransition:p}=e===void 0?{}:e,g=fd(),_=tl(),b=Sb(r,{relative:d});return z.useCallback(A=>{if(rx(A,n)){A.preventDefault();let S=s!==void 0?s:qh(_)===qh(b);g(r,{replace:S,state:o,preventScrollReset:c,relative:d,viewTransition:p})}},[_,g,b,s,o,n,r,c,d,p])}const dx=()=>{};var NE={};const Cb=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},fx=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],p=r[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Ib={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,p=d?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,b=c>>2,A=(c&3)<<4|p>>4;let S=(p&15)<<2|_>>6,V=_&63;g||(V=64,d||(S=64)),s.push(n[b],n[A],n[S],n[V])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Cb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):fx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const _=o<r.length?n[r.charAt(o)]:64;++o;const A=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||p==null||_==null||A==null)throw new mx;const S=c<<2|p>>4;if(s.push(S),_!==64){const V=p<<4&240|_>>2;if(s.push(V),A!==64){const F=_<<6&192|A;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class mx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const px=function(r){const e=Cb(r);return Ib.encodeByteArray(e,!0)},Fh=function(r){return px(r).replace(/\./g,"")},Db=function(r){try{return Ib.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const yx=()=>gx().__FIREBASE_DEFAULTS__,_x=()=>{if(typeof process>"u"||typeof NE>"u")return;const r=NE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},vx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Db(r[1]);return e&&JSON.parse(e)},md=()=>{try{return dx()||yx()||_x()||vx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ob=r=>md()?.emulatorHosts?.[r],jb=r=>{const e=Ob(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Mb=()=>md()?.config,Vb=r=>md()?.[`_${r}`];class Ex{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function zs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zp(r){return(await fetch(r,{credentials:"include"})).ok}function kb(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Fh(JSON.stringify(n)),Fh(JSON.stringify(d)),""].join(".")}const yc={};function bx(){const r={prod:[],emulator:[]};for(const e of Object.keys(yc))yc[e]?r.emulator.push(e):r.prod.push(e);return r}function Tx(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let CE=!1;function Bp(r,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||yc[r]===e||yc[r]||CE)return;yc[r]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",c=bx().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{CE=!0,d()},S}function b(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=Tx(s),V=n("text"),F=document.getElementById(V)||document.createElement("span"),X=n("learnmore"),G=document.getElementById(X)||document.createElement("a"),re=n("preprendIcon"),ce=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const oe=S.element;p(oe),b(G,X);const pe=_();g(ce,re),oe.append(ce,F,G,pe),document.body.appendChild(oe)}c?(F.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ax(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function wx(){const r=md()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Rx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nx(){const r=vn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Cx(){return!wx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ix(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Ox="FirebaseError";class sr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Ox,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lc.prototype.create)}}class Lc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?jx(c,s):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new sr(o,p,s)}}function jx(r,e){return r.replace(Mx,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Mx=/\{\$([^}]+)}/g;function Vx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Na(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],d=e[o];if(IE(c)&&IE(d)){if(!Na(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function IE(r){return r!==null&&typeof r=="object"}function Uc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function hc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function dc(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function kx(r,e){const n=new Px(r,e);return n.subscribe.bind(n)}class Px{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Lx(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Bm),o.error===void 0&&(o.error=Bm),o.complete===void 0&&(o.complete=Bm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lx(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Bm(){}function mt(r){return r&&r._delegate?r._delegate:r}class Ds{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ta="[DEFAULT]";class Ux{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Ex;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bx(e))try{this.getOrInitializeService({instanceIdentifier:Ta})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ta){return this.instances.has(e)}getOptions(e=Ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:zx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ta){return this.component?this.component.multipleInstances?e:Ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zx(r){return r===Ta?void 0:r}function Bx(r){return r.instantiationMode==="EAGER"}class qx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ux(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const Fx={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},Hx=qe.INFO,Gx={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},Kx=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Gx[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qp{constructor(e){this.name=e,this._logLevel=Hx,this._logHandler=Kx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const Qx=(r,e)=>e.some(n=>r instanceof n);let DE,OE;function Yx(){return DE||(DE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xx(){return OE||(OE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pb=new WeakMap,lp=new WeakMap,Lb=new WeakMap,qm=new WeakMap,Fp=new WeakMap;function $x(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Rs(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Pb.set(n,r)}).catch(()=>{}),Fp.set(e,r),e}function Wx(r){if(lp.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});lp.set(r,e)}let cp={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return lp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Lb.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rs(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Jx(r){cp=r(cp)}function Zx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Fm(this),e,...n);return Lb.set(s,e.sort?e.sort():[e]),Rs(s)}:Xx().includes(r)?function(...e){return r.apply(Fm(this),e),Rs(Pb.get(this))}:function(...e){return Rs(r.apply(Fm(this),e))}}function eR(r){return typeof r=="function"?Zx(r):(r instanceof IDBTransaction&&Wx(r),Qx(r,Yx())?new Proxy(r,cp):r)}function Rs(r){if(r instanceof IDBRequest)return $x(r);if(qm.has(r))return qm.get(r);const e=eR(r);return e!==r&&(qm.set(r,e),Fp.set(e,r)),e}const Fm=r=>Fp.get(r);function tR(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),p=Rs(d);return s&&d.addEventListener("upgradeneeded",g=>{s(Rs(d.result),g.oldVersion,g.newVersion,Rs(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const nR=["get","getKey","getAll","getAllKeys","count"],iR=["put","add","delete","clear"],Hm=new Map;function jE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Hm.get(e))return Hm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=iR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||nR.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(p.shift())),(await Promise.all([_[n](...p),o&&g.done]))[0]};return Hm.set(e,c),c}Jx(r=>({...r,get:(e,n,s)=>jE(e,n)||r.get(e,n,s),has:(e,n)=>!!jE(e,n)||r.has(e,n)}));class rR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function sR(r){return r.getComponent()?.type==="VERSION"}const up="@firebase/app",ME="0.14.7";const Ir=new qp("@firebase/app"),aR="@firebase/app-compat",oR="@firebase/analytics-compat",lR="@firebase/analytics",cR="@firebase/app-check-compat",uR="@firebase/app-check",hR="@firebase/auth",dR="@firebase/auth-compat",fR="@firebase/database",mR="@firebase/data-connect",pR="@firebase/database-compat",gR="@firebase/functions",yR="@firebase/functions-compat",_R="@firebase/installations",vR="@firebase/installations-compat",ER="@firebase/messaging",bR="@firebase/messaging-compat",TR="@firebase/performance",AR="@firebase/performance-compat",wR="@firebase/remote-config",SR="@firebase/remote-config-compat",xR="@firebase/storage",RR="@firebase/storage-compat",NR="@firebase/firestore",CR="@firebase/ai",IR="@firebase/firestore-compat",DR="firebase",OR="12.8.0";const hp="[DEFAULT]",jR={[up]:"fire-core",[aR]:"fire-core-compat",[lR]:"fire-analytics",[oR]:"fire-analytics-compat",[uR]:"fire-app-check",[cR]:"fire-app-check-compat",[hR]:"fire-auth",[dR]:"fire-auth-compat",[fR]:"fire-rtdb",[mR]:"fire-data-connect",[pR]:"fire-rtdb-compat",[gR]:"fire-fn",[yR]:"fire-fn-compat",[_R]:"fire-iid",[vR]:"fire-iid-compat",[ER]:"fire-fcm",[bR]:"fire-fcm-compat",[TR]:"fire-perf",[AR]:"fire-perf-compat",[wR]:"fire-rc",[SR]:"fire-rc-compat",[xR]:"fire-gcs",[RR]:"fire-gcs-compat",[NR]:"fire-fst",[IR]:"fire-fst-compat",[CR]:"fire-vertex","fire-js":"fire-js",[DR]:"fire-js-all"};const Hh=new Map,MR=new Map,dp=new Map;function VE(r,e){try{r.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ca(r){const e=r.name;if(dp.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;dp.set(e,r);for(const n of Hh.values())VE(n,r);for(const n of MR.values())VE(n,r);return!0}function pd(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Kn(r){return r==null?!1:r.settings!==void 0}const VR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new Lc("app","Firebase",VR);class kR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}const ka=OR;function Ub(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:hp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ns.create("bad-app-name",{appName:String(o)});if(n||(n=Mb()),!n)throw Ns.create("no-options");const c=Hh.get(o);if(c){if(Na(n,c.options)&&Na(s,c.config))return c;throw Ns.create("duplicate-app",{appName:o})}const d=new qx(o);for(const g of dp.values())d.addComponent(g);const p=new kR(n,s,d);return Hh.set(o,p),p}function Hp(r=hp){const e=Hh.get(r);if(!e&&r===hp&&Mb())return Ub();if(!e)throw Ns.create("no-app",{appName:r});return e}function Ji(r,e,n){let s=jR[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(d.join(" "));return}Ca(new Ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const PR="firebase-heartbeat-database",LR=1,xc="firebase-heartbeat-store";let Gm=null;function zb(){return Gm||(Gm=tR(PR,LR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(xc)}catch(n){console.warn(n)}}}}).catch(r=>{throw Ns.create("idb-open",{originalErrorMessage:r.message})})),Gm}async function UR(r){try{const n=(await zb()).transaction(xc),s=await n.objectStore(xc).get(Bb(r));return await n.done,s}catch(e){if(e instanceof sr)Ir.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e?.message});Ir.warn(n.message)}}}async function kE(r,e){try{const s=(await zb()).transaction(xc,"readwrite");await s.objectStore(xc).put(e,Bb(r)),await s.done}catch(n){if(n instanceof sr)Ir.warn(n.message);else{const s=Ns.create("idb-set",{originalErrorMessage:n?.message});Ir.warn(s.message)}}}function Bb(r){return`${r.name}!${r.options.appId}`}const zR=1024,BR=30;class qR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=PE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>BR){const o=GR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=PE(),{heartbeatsToSend:n,unsentEntries:s}=FR(this._heartbeatsCache.heartbeats),o=Fh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ir.warn(e),""}}}function PE(){return new Date().toISOString().substring(0,10)}function FR(r,e=zR){const n=[];let s=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),LE(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),LE(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class HR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ix()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return kE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return kE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function LE(r){return Fh(JSON.stringify({version:2,heartbeats:r})).length}function GR(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function KR(r){Ca(new Ds("platform-logger",e=>new rR(e),"PRIVATE")),Ca(new Ds("heartbeat",e=>new qR(e),"PRIVATE")),Ji(up,ME,r),Ji(up,ME,"esm2020"),Ji("fire-js","")}KR("");function qb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QR=qb,Fb=new Lc("auth","Firebase",qb());const Gh=new qp("@firebase/auth");function YR(r,...e){Gh.logLevel<=qe.WARN&&Gh.warn(`Auth (${ka}): ${r}`,...e)}function Oh(r,...e){Gh.logLevel<=qe.ERROR&&Gh.error(`Auth (${ka}): ${r}`,...e)}function Ri(r,...e){throw Gp(r,...e)}function Zi(r,...e){return Gp(r,...e)}function Hb(r,e,n){const s={...QR(),[e]:n};return new Lc("auth","Firebase",s).create(e,{appName:r.name})}function Nr(r){return Hb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return Fb.create(r,...e)}function we(r,e,...n){if(!r)throw Gp(e,...n)}function xr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Oh(e),new Error(e)}function Dr(r,e){r||xr(e)}function fp(){return typeof self<"u"&&self.location?.href||""}function XR(){return UE()==="http:"||UE()==="https:"}function UE(){return typeof self<"u"&&self.location?.protocol||null}function $R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XR()||xx()||"connection"in navigator)?navigator.onLine:!0}function WR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class zc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dr(n>e,"Short delay should be less than long delay!"),this.isMobile=Ax()||Rx()}get(){return $R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kp(r,e){Dr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Gb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const JR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ZR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eN=new zc(3e4,6e4);function Bs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Mr(r,e,n,s,o={}){return Kb(r,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const p=Uc({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:g,...c};return Sx()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&zs(r.emulatorConfig.host)&&(_.credentials="include"),Gb.fetch()(await Qb(r,r.config.apiHost,n,p),_)})}async function Kb(r,e,n){r._canInitEmulator=!1;const s={...JR,...e};try{const o=new nN(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Eh(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,_]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Eh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Eh(r,"user-disabled",d);const b=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Hb(r,b,_);Ri(r,b)}}catch(o){if(o instanceof sr)throw o;Ri(r,"network-request-failed",{message:String(o)})}}async function Bc(r,e,n,s,o={}){const c=await Mr(r,e,n,s,o);return"mfaPendingCredential"in c&&Ri(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Qb(r,e,n,s){const o=`${e}${n}?${s}`,c=r,d=c.config.emulator?Kp(r.config,o):`${r.config.apiScheme}://${o}`;return ZR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function tN(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Zi(this.auth,"network-request-failed")),eN.get())})}}function Eh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Zi(r,e,s);return o.customData._tokenResponse=n,o}function zE(r){return r!==void 0&&r.enterprise!==void 0}class iN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rN(r,e){return Mr(r,"GET","/v2/recaptchaConfig",Bs(r,e))}async function sN(r,e){return Mr(r,"POST","/v1/accounts:delete",e)}async function Kh(r,e){return Mr(r,"POST","/v1/accounts:lookup",e)}function _c(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aN(r,e=!1){const n=mt(r),s=await n.getIdToken(e),o=Qp(s);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:_c(Km(o.auth_time)),issuedAtTime:_c(Km(o.iat)),expirationTime:_c(Km(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Km(r){return Number(r)*1e3}function Qp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Oh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Db(n);return o?JSON.parse(o):(Oh("Failed to decode base64 JWT payload"),null)}catch(o){return Oh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function BE(r){const e=Qp(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ko(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof sr&&oN(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function oN({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class lN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class mp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qh(r){const e=r.auth,n=await r.getIdToken(),s=await Ko(r,Kh(e,{idToken:n}));we(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?Yb(o.providerUserInfo):[],d=uN(r.providerData,c),p=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!d?.length,_=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new mp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,b)}async function cN(r){const e=mt(r);await Qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uN(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Yb(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function hN(r,e){const n=await Kb(r,{},async()=>{const s=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await Qb(r,o,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&zs(r.emulatorConfig.host)&&(g.credentials="include"),Gb.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dN(r,e){return Mr(r,"POST","/v2/accounts:revokeToken",Bs(r,e))}class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=BE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await hN(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new zo;return s&&(we(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(we(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return xr("not implemented")}}function ms(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Si{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new lN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new mp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ko(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aN(this,e)}reload(){return cN(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Qh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await Ko(this,sN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,_=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:A,emailVerified:S,isAnonymous:V,providerData:F,stsTokenManager:X}=n;we(A&&X,e,"internal-error");const G=zo.fromJSON(this.name,X);we(typeof A=="string",e,"internal-error"),ms(s,e.name),ms(o,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof V=="boolean",e,"internal-error"),ms(c,e.name),ms(d,e.name),ms(p,e.name),ms(g,e.name),ms(_,e.name),ms(b,e.name);const re=new Si({uid:A,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:V,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:G,createdAt:_,lastLoginAt:b});return F&&Array.isArray(F)&&(re.providerData=F.map(ce=>({...ce}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,n,s=!1){const o=new zo;o.updateFromServerResponse(n);const c=new Si({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Qh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];we(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Yb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,p=new zo;p.updateFromIdToken(s);const g=new Si({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new mp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,_),g}}const qE=new Map;function Rr(r){Dr(r instanceof Function,"Expected a class definition");let e=qE.get(r);return e?(Dr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,qE.set(r,e),e)}class Xb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Xb.type="NONE";const FE=Xb;function jh(r,e,n){return`firebase:${r}:${e}:${n}`}class Bo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=jh(this.userKey,o.apiKey,c),this.fullPersistenceKey=jh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kh(this.auth,{idToken:e}).catch(()=>{});return n?Si._fromGetAccountInfoResponse(this.auth,n,e):null}return Si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Bo(Rr(FE),e,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||Rr(FE);const d=jh(s,e.config.apiKey,e.name);let p=null;for(const _ of n)try{const b=await _._get(d);if(b){let A;if(typeof b=="string"){const S=await Kh(e,{idToken:b}).catch(()=>{});if(!S)break;A=await Si._fromGetAccountInfoResponse(e,S,b)}else A=Si._fromJSON(e,b);_!==c&&(p=A),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Bo(c,e,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Bo(c,e,s))}}function HE(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($b(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tT(e))return"Blackberry";if(nT(e))return"Webos";if(Wb(e))return"Safari";if((e.includes("chrome/")||Jb(e))&&!e.includes("edge/"))return"Chrome";if(eT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function $b(r=vn()){return/firefox\//i.test(r)}function Wb(r=vn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jb(r=vn()){return/crios\//i.test(r)}function Zb(r=vn()){return/iemobile/i.test(r)}function eT(r=vn()){return/android/i.test(r)}function tT(r=vn()){return/blackberry/i.test(r)}function nT(r=vn()){return/webos/i.test(r)}function Yp(r=vn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function fN(r=vn()){return Yp(r)&&!!window.navigator?.standalone}function mN(){return Nx()&&document.documentMode===10}function iT(r=vn()){return Yp(r)||eT(r)||nT(r)||tT(r)||/windows phone/i.test(r)||Zb(r)}function rT(r,e=[]){let n;switch(r){case"Browser":n=HE(vn());break;case"Worker":n=`${HE(vn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ka}/${s}`}class pN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function gN(r,e={}){return Mr(r,"GET","/v2/passwordPolicy",Bs(r,e))}const yN=6;class _N{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class vN{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GE(this),this.idTokenSubscription=new GE(this),this.beforeStateQueue=new pN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kh(this,{idToken:e}),s=await Si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Nr(this));const n=e?mt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gN(this),n=new _N(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await dN(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pa(r){return mt(r)}class GE{constructor(e){this.auth=e,this.observer=null,this.addObserver=kx(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EN(r){gd=r}function sT(r){return gd.loadJS(r)}function bN(){return gd.recaptchaEnterpriseScript}function TN(){return gd.gapiScript}function AN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class wN{constructor(){this.enterprise=new SN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xN="recaptcha-enterprise",aT="NO_RECAPTCHA";class RN{constructor(e){this.type=xN,this.auth=Pa(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{rN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const _=new iN(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(g=>{p(g)})})}function o(c,d,p){const g=window.grecaptcha;zE(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{d(_)}).catch(()=>{d(aT)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wN().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&zE(window.grecaptcha))o(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=bN();g.length!==0&&(g+=p),sT(g).then(()=>{o(p,c,d)}).catch(_=>{d(_)})}}).catch(p=>{d(p)})})}}async function KE(r,e,n,s=!1,o=!1){const c=new RN(r);let d;if(o)d=aT;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,_=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function pp(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await KE(r,e,n,n==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await KE(r,e,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}function NN(r,e){const n=pd(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Na(c,e??{}))return o;Ri(o,"already-initialized")}return n.initialize({options:e})}function CN(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Rr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function IN(r,e,n){const s=Pa(r);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=oT(e),{host:d,port:p}=DN(e),g=p===null?"":`:${p}`,_={url:`${c}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Na(_,s.config.emulator)&&Na(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,zs(d)?(zp(`${c}//${d}${g}`),Bp("Auth",!0)):ON()}function oT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function DN(r){const e=oT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:QE(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:QE(d)}}}function QE(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function ON(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,n){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function jN(r,e){return Mr(r,"POST","/v1/accounts:signUp",e)}async function MN(r,e){return Bc(r,"POST","/v1/accounts:signInWithPassword",Bs(r,e))}async function VN(r,e){return Bc(r,"POST","/v1/accounts:signInWithEmailLink",Bs(r,e))}async function kN(r,e){return Bc(r,"POST","/v1/accounts:signInWithEmailLink",Bs(r,e))}class Rc extends Xp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Rc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Rc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pp(e,n,"signInWithPassword",MN);case"emailLink":return VN(e,{email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pp(e,s,"signUpPassword",jN);case"emailLink":return kN(e,{idToken:n,email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function qo(r,e){return Bc(r,"POST","/v1/accounts:signInWithIdp",Bs(r,e))}const PN="http://localhost";class Ia extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new Ia(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return qo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,qo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qo(e,n)}buildRequest(){const e={requestUri:PN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uc(n)}return e}}function LN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UN(r){const e=hc(dc(r)).link,n=e?hc(dc(e)).deep_link_id:null,s=hc(dc(r)).deep_link_id;return(s?hc(dc(s)).link:null)||s||n||e||r}class $p{constructor(e){const n=hc(dc(e)),s=n.apiKey??null,o=n.oobCode??null,c=LN(n.mode??null);we(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=UN(e);try{return new $p(n)}catch{return null}}}class nl{constructor(){this.providerId=nl.PROVIDER_ID}static credential(e,n){return Rc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=$p.parseLink(n);return we(s,"argument-error"),Rc._fromEmailAndCode(e,s.code,s.tenantId)}}nl.PROVIDER_ID="password";nl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class qc extends lT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _s extends qc{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";class vs extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ia._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return vs.credential(n,s)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";class Es extends qc{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";class bs extends qc{constructor(){super("twitter.com")}static credential(e,n){return Ia._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return bs.credential(n,s)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";async function zN(r,e){return Bc(r,"POST","/v1/accounts:signUp",Bs(r,e))}class Da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Si._fromIdTokenResponse(e,s,o),d=YE(s);return new Da({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=YE(s);return new Da({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function YE(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Yh extends sr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Yh(e,n,s,o)}}function cT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(r,c,e,s):c})}async function BN(r,e,n=!1){const s=await Ko(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Da._forOperation(r,"link",s)}async function qN(r,e,n=!1){const{auth:s}=r;if(Kn(s.app))return Promise.reject(Nr(s));const o="reauthenticate";try{const c=await Ko(r,cT(s,o,e,r),n);we(c.idToken,s,"internal-error");const d=Qp(c.idToken);we(d,s,"internal-error");const{sub:p}=d;return we(r.uid===p,s,"user-mismatch"),Da._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ri(s,"user-mismatch"),c}}async function uT(r,e,n=!1){if(Kn(r.app))return Promise.reject(Nr(r));const s="signIn",o=await cT(r,s,e),c=await Da._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}async function FN(r,e){return uT(Pa(r),e)}async function hT(r){const e=Pa(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HN(r,e,n){if(Kn(r.app))return Promise.reject(Nr(r));const s=Pa(r),d=await pp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zN).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&hT(r),g}),p=await Da._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function GN(r,e,n){return Kn(r.app)?Promise.reject(Nr(r)):FN(mt(r),nl.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&hT(r),s})}async function KN(r,e){return Mr(r,"POST","/v1/accounts:update",e)}async function QN(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=mt(r),c={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await Ko(s,KN(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const p=s.providerData.find(({providerId:g})=>g==="password");p&&(p.displayName=s.displayName,p.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function YN(r,e,n,s){return mt(r).onIdTokenChanged(e,n,s)}function XN(r,e,n){return mt(r).beforeAuthStateChanged(e,n)}function $N(r,e,n,s){return mt(r).onAuthStateChanged(e,n,s)}function WN(r){return mt(r).signOut()}const Xh="__sak";class dT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xh,"1"),this.storage.removeItem(Xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const JN=1e3,ZN=10;class fT extends dT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);mN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ZN):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},JN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fT.type="LOCAL";const eC=fT;class mT extends dT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mT.type="SESSION";const pT=mT;function tC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new yd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(d).map(async _=>_(n.origin,c)),g=await tC(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yd.receivers=[];function Wp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class nC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const _=Wp("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const S=A;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(S.data.response);break;default:clearTimeout(b),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function er(){return window}function iC(r){er().location.href=r}function gT(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function rC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sC(){return navigator?.serviceWorker?.controller||null}function aC(){return gT()?self:null}const yT="firebaseLocalStorageDb",oC=1,$h="firebaseLocalStorage",_T="fbase_key";class Fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _d(r,e){return r.transaction([$h],e?"readwrite":"readonly").objectStore($h)}function lC(){const r=indexedDB.deleteDatabase(yT);return new Fc(r).toPromise()}function gp(){const r=indexedDB.open(yT,oC);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore($h,{keyPath:_T})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains($h)?e(s):(s.close(),await lC(),e(await gp()))})})}async function XE(r,e,n){const s=_d(r,!0).put({[_T]:e,value:n});return new Fc(s).toPromise()}async function cC(r,e){const n=_d(r,!1).get(e),s=await new Fc(n).toPromise();return s===void 0?null:s.value}function $E(r,e){const n=_d(r,!0).delete(e);return new Fc(n).toPromise()}const uC=800,hC=3;class vT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>hC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance(aC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rC(),!this.activeServiceWorker)return;this.sender=new nC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gp();return await XE(e,Xh,"1"),await $E(e,Xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>XE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>cC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$E(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=_d(o,!1).getAll();return new Fc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vT.type="LOCAL";const dC=vT;new zc(3e4,6e4);function fC(r,e){return e?Rr(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Jp extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mC(r){return uT(r.auth,new Jp(r),r.bypassAuthState)}function pC(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),qN(n,new Jp(r),r.bypassAuthState)}async function gC(r){const{auth:e,user:n}=r;return we(n,e,"internal-error"),BN(n,new Jp(r),r.bypassAuthState)}class ET{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mC;case"linkViaPopup":case"linkViaRedirect":return gC;case"reauthViaPopup":case"reauthViaRedirect":return pC;default:Ri(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yC=new zc(2e3,1e4);class Uo extends ET{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Uo.currentPopupAction&&Uo.currentPopupAction.cancel(),Uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");const e=Wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yC.get())};e()}}Uo.currentPopupAction=null;const _C="pendingRedirect",Mh=new Map;class vC extends ET{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Mh.get(this.auth._key());if(!e){try{const s=await EC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Mh.set(this.auth._key(),e)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EC(r,e){const n=AC(e),s=TC(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function bC(r,e){Mh.set(r._key(),e)}function TC(r){return Rr(r._redirectPersistence)}function AC(r){return jh(_C,r.config.apiKey,r.name)}async function wC(r,e,n=!1){if(Kn(r.app))return Promise.reject(Nr(r));const s=Pa(r),o=fC(s,e),d=await new vC(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const SC=600*1e3;class xC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!bT(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Zi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SC&&this.cachedEventUids.clear(),this.cachedEventUids.has(WE(e))}saveEventToCache(e){this.cachedEventUids.add(WE(e)),this.lastProcessedEventTime=Date.now()}}function WE(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function bT({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function RC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bT(r);default:return!1}}async function NC(r,e={}){return Mr(r,"GET","/v1/projects",e)}const CC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;async function DC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await NC(r);for(const n of e)try{if(OC(n))return}catch{}Ri(r,"unauthorized-domain")}function OC(r){const e=fp(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!IC.test(n))return!1;if(CC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const jC=new zc(3e4,6e4);function JE(){const r=er().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function MC(r){return new Promise((e,n)=>{function s(){JE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JE(),n(Zi(r,"network-request-failed"))},timeout:jC.get()})}if(er().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(er().gapi?.load)s();else{const o=AN("iframefcb");return er()[o]=()=>{gapi.load?s():n(Zi(r,"network-request-failed"))},sT(`${TN()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Vh=null,e})}let Vh=null;function VC(r){return Vh=Vh||MC(r),Vh}const kC=new zc(5e3,15e3),PC="__/auth/iframe",LC="emulator/auth/iframe",UC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BC(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Kp(e,LC):`https://${r.config.authDomain}/${PC}`,s={apiKey:e.apiKey,appName:r.name,v:ka},o=zC.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Uc(s).slice(1)}`}async function qC(r){const e=await VC(r),n=er().gapi;return we(n,r,"internal-error"),e.open({where:document.body,url:BC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UC,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=Zi(r,"network-request-failed"),p=er().setTimeout(()=>{c(d)},kC.get());function g(){er().clearTimeout(p),o(s)}s.ping(g).then(g,()=>{c(d)})}))}const FC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HC=500,GC=600,KC="_blank",QC="http://localhost";class ZE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YC(r,e,n,s=HC,o=GC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...FC,width:s.toString(),height:o.toString(),top:c,left:d},_=vn().toLowerCase();n&&(p=Jb(_)?KC:n),$b(_)&&(e=e||QC,g.scrollbars="yes");const b=Object.entries(g).reduce((S,[V,F])=>`${S}${V}=${F},`,"");if(fN(_)&&p!=="_self")return XC(e||"",p),new ZE(null);const A=window.open(e||"",p,b);we(A,r,"popup-blocked");try{A.focus()}catch{}return new ZE(A)}function XC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const $C="__/auth/handler",WC="emulator/auth/handler",JC=encodeURIComponent("fac");async function e0(r,e,n,s,o,c){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ka,eventId:o};if(e instanceof lT){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",Vx(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,A]of Object.entries({}))d[b]=A}if(e instanceof qc){const b=e.getScopes().filter(A=>A!=="");b.length>0&&(d.scopes=b.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await r._getAppCheckToken(),_=g?`#${JC}=${encodeURIComponent(g)}`:"";return`${ZC(r)}?${Uc(p).slice(1)}${_}`}function ZC({config:r}){return r.emulator?Kp(r,WC):`https://${r.authDomain}/${$C}`}const Qm="webStorageSupport";class e2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pT,this._completeRedirectFn=wC,this._overrideRedirectResult=bC}async _openPopup(e,n,s,o){Dr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await e0(e,n,s,fp(),o);return YC(e,c,Wp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await e0(e,n,s,fp(),o);return iC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Dr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await qC(e),s=new xC(e);return n.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qm,{type:Qm},o=>{const c=o?.[0]?.[Qm];c!==void 0&&n(!!c),Ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iT()||Wb()||Yp()}}const t2=e2;var t0="@firebase/auth",n0="1.12.0";class n2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function i2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r2(r){Ca(new Ds("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;we(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rT(r)},_=new vN(s,o,c,g);return CN(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ca(new Ds("auth-internal",e=>{const n=Pa(e.getProvider("auth").getImmediate());return(s=>new n2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ji(t0,n0,i2(r)),Ji(t0,n0,"esm2020")}const s2=300,a2=Vb("authIdTokenMaxAge")||s2;let i0=null;const o2=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>a2)return;const o=n?.token;i0!==o&&(i0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function l2(r=Hp()){const e=pd(r,"auth");if(e.isInitialized())return e.getImmediate();const n=NN(r,{popupRedirectResolver:t2,persistence:[dC,eC,pT]}),s=Vb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=o2(c.toString());XN(n,d,()=>d(n.currentUser)),YN(n,p=>d(p))}}const o=Ob("auth");return o&&IN(n,`http://${o}`),n}function c2(){return document.getElementsByTagName("head")?.[0]??document}EN({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=Zi("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",c2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r2("Browser");var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Cs,TT;(function(){var r;function e(N,x){function C(){}C.prototype=x.prototype,N.F=x.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(D,O,k){for(var R=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)R[ke-2]=arguments[ke];return x.prototype[O].apply(D,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,x,C){C||(C=0);const D=Array(16);if(typeof x=="string")for(var O=0;O<16;++O)D[O]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(O=0;O<16;++O)D[O]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=N.g[0],C=N.g[1],O=N.g[2];let k=N.g[3],R;R=x+(k^C&(O^k))+D[0]+3614090360&4294967295,x=C+(R<<7&4294967295|R>>>25),R=k+(O^x&(C^O))+D[1]+3905402710&4294967295,k=x+(R<<12&4294967295|R>>>20),R=O+(C^k&(x^C))+D[2]+606105819&4294967295,O=k+(R<<17&4294967295|R>>>15),R=C+(x^O&(k^x))+D[3]+3250441966&4294967295,C=O+(R<<22&4294967295|R>>>10),R=x+(k^C&(O^k))+D[4]+4118548399&4294967295,x=C+(R<<7&4294967295|R>>>25),R=k+(O^x&(C^O))+D[5]+1200080426&4294967295,k=x+(R<<12&4294967295|R>>>20),R=O+(C^k&(x^C))+D[6]+2821735955&4294967295,O=k+(R<<17&4294967295|R>>>15),R=C+(x^O&(k^x))+D[7]+4249261313&4294967295,C=O+(R<<22&4294967295|R>>>10),R=x+(k^C&(O^k))+D[8]+1770035416&4294967295,x=C+(R<<7&4294967295|R>>>25),R=k+(O^x&(C^O))+D[9]+2336552879&4294967295,k=x+(R<<12&4294967295|R>>>20),R=O+(C^k&(x^C))+D[10]+4294925233&4294967295,O=k+(R<<17&4294967295|R>>>15),R=C+(x^O&(k^x))+D[11]+2304563134&4294967295,C=O+(R<<22&4294967295|R>>>10),R=x+(k^C&(O^k))+D[12]+1804603682&4294967295,x=C+(R<<7&4294967295|R>>>25),R=k+(O^x&(C^O))+D[13]+4254626195&4294967295,k=x+(R<<12&4294967295|R>>>20),R=O+(C^k&(x^C))+D[14]+2792965006&4294967295,O=k+(R<<17&4294967295|R>>>15),R=C+(x^O&(k^x))+D[15]+1236535329&4294967295,C=O+(R<<22&4294967295|R>>>10),R=x+(O^k&(C^O))+D[1]+4129170786&4294967295,x=C+(R<<5&4294967295|R>>>27),R=k+(C^O&(x^C))+D[6]+3225465664&4294967295,k=x+(R<<9&4294967295|R>>>23),R=O+(x^C&(k^x))+D[11]+643717713&4294967295,O=k+(R<<14&4294967295|R>>>18),R=C+(k^x&(O^k))+D[0]+3921069994&4294967295,C=O+(R<<20&4294967295|R>>>12),R=x+(O^k&(C^O))+D[5]+3593408605&4294967295,x=C+(R<<5&4294967295|R>>>27),R=k+(C^O&(x^C))+D[10]+38016083&4294967295,k=x+(R<<9&4294967295|R>>>23),R=O+(x^C&(k^x))+D[15]+3634488961&4294967295,O=k+(R<<14&4294967295|R>>>18),R=C+(k^x&(O^k))+D[4]+3889429448&4294967295,C=O+(R<<20&4294967295|R>>>12),R=x+(O^k&(C^O))+D[9]+568446438&4294967295,x=C+(R<<5&4294967295|R>>>27),R=k+(C^O&(x^C))+D[14]+3275163606&4294967295,k=x+(R<<9&4294967295|R>>>23),R=O+(x^C&(k^x))+D[3]+4107603335&4294967295,O=k+(R<<14&4294967295|R>>>18),R=C+(k^x&(O^k))+D[8]+1163531501&4294967295,C=O+(R<<20&4294967295|R>>>12),R=x+(O^k&(C^O))+D[13]+2850285829&4294967295,x=C+(R<<5&4294967295|R>>>27),R=k+(C^O&(x^C))+D[2]+4243563512&4294967295,k=x+(R<<9&4294967295|R>>>23),R=O+(x^C&(k^x))+D[7]+1735328473&4294967295,O=k+(R<<14&4294967295|R>>>18),R=C+(k^x&(O^k))+D[12]+2368359562&4294967295,C=O+(R<<20&4294967295|R>>>12),R=x+(C^O^k)+D[5]+4294588738&4294967295,x=C+(R<<4&4294967295|R>>>28),R=k+(x^C^O)+D[8]+2272392833&4294967295,k=x+(R<<11&4294967295|R>>>21),R=O+(k^x^C)+D[11]+1839030562&4294967295,O=k+(R<<16&4294967295|R>>>16),R=C+(O^k^x)+D[14]+4259657740&4294967295,C=O+(R<<23&4294967295|R>>>9),R=x+(C^O^k)+D[1]+2763975236&4294967295,x=C+(R<<4&4294967295|R>>>28),R=k+(x^C^O)+D[4]+1272893353&4294967295,k=x+(R<<11&4294967295|R>>>21),R=O+(k^x^C)+D[7]+4139469664&4294967295,O=k+(R<<16&4294967295|R>>>16),R=C+(O^k^x)+D[10]+3200236656&4294967295,C=O+(R<<23&4294967295|R>>>9),R=x+(C^O^k)+D[13]+681279174&4294967295,x=C+(R<<4&4294967295|R>>>28),R=k+(x^C^O)+D[0]+3936430074&4294967295,k=x+(R<<11&4294967295|R>>>21),R=O+(k^x^C)+D[3]+3572445317&4294967295,O=k+(R<<16&4294967295|R>>>16),R=C+(O^k^x)+D[6]+76029189&4294967295,C=O+(R<<23&4294967295|R>>>9),R=x+(C^O^k)+D[9]+3654602809&4294967295,x=C+(R<<4&4294967295|R>>>28),R=k+(x^C^O)+D[12]+3873151461&4294967295,k=x+(R<<11&4294967295|R>>>21),R=O+(k^x^C)+D[15]+530742520&4294967295,O=k+(R<<16&4294967295|R>>>16),R=C+(O^k^x)+D[2]+3299628645&4294967295,C=O+(R<<23&4294967295|R>>>9),R=x+(O^(C|~k))+D[0]+4096336452&4294967295,x=C+(R<<6&4294967295|R>>>26),R=k+(C^(x|~O))+D[7]+1126891415&4294967295,k=x+(R<<10&4294967295|R>>>22),R=O+(x^(k|~C))+D[14]+2878612391&4294967295,O=k+(R<<15&4294967295|R>>>17),R=C+(k^(O|~x))+D[5]+4237533241&4294967295,C=O+(R<<21&4294967295|R>>>11),R=x+(O^(C|~k))+D[12]+1700485571&4294967295,x=C+(R<<6&4294967295|R>>>26),R=k+(C^(x|~O))+D[3]+2399980690&4294967295,k=x+(R<<10&4294967295|R>>>22),R=O+(x^(k|~C))+D[10]+4293915773&4294967295,O=k+(R<<15&4294967295|R>>>17),R=C+(k^(O|~x))+D[1]+2240044497&4294967295,C=O+(R<<21&4294967295|R>>>11),R=x+(O^(C|~k))+D[8]+1873313359&4294967295,x=C+(R<<6&4294967295|R>>>26),R=k+(C^(x|~O))+D[15]+4264355552&4294967295,k=x+(R<<10&4294967295|R>>>22),R=O+(x^(k|~C))+D[6]+2734768916&4294967295,O=k+(R<<15&4294967295|R>>>17),R=C+(k^(O|~x))+D[13]+1309151649&4294967295,C=O+(R<<21&4294967295|R>>>11),R=x+(O^(C|~k))+D[4]+4149444226&4294967295,x=C+(R<<6&4294967295|R>>>26),R=k+(C^(x|~O))+D[11]+3174756917&4294967295,k=x+(R<<10&4294967295|R>>>22),R=O+(x^(k|~C))+D[2]+718787259&4294967295,O=k+(R<<15&4294967295|R>>>17),R=C+(k^(O|~x))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+k&4294967295}s.prototype.v=function(N,x){x===void 0&&(x=N.length);const C=x-this.blockSize,D=this.C;let O=this.h,k=0;for(;k<x;){if(O==0)for(;k<=C;)o(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<x;)if(D[O++]=N.charCodeAt(k++),O==this.blockSize){o(this,D),O=0;break}}else for(;k<x;)if(D[O++]=N[k++],O==this.blockSize){o(this,D),O=0;break}}this.h=O,this.o+=x},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)N[x++]=this.g[C]>>>D&255;return N};function c(N,x){var C=p;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=x(N)}function d(N,x){this.h=x;const C=[];let D=!0;for(let O=N.length-1;O>=0;O--){const k=N[O]|0;D&&k==x||(C[O]=k,D=!1)}this.g=C}var p={};function g(N){return-128<=N&&N<128?c(N,function(x){return new d([x|0],x<0?-1:0)}):new d([N|0],N<0?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return A;if(N<0)return G(_(-N));const x=[];let C=1;for(let D=0;N>=C;D++)x[D]=N/C|0,C*=4294967296;return new d(x,0)}function b(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return G(b(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(x,8));let D=A;for(let k=0;k<N.length;k+=8){var O=Math.min(8,N.length-k);const R=parseInt(N.substring(k,k+O),x);O<8?(O=_(Math.pow(x,O)),D=D.j(O).add(_(R))):(D=D.j(C),D=D.add(_(R)))}return D}var A=g(0),S=g(1),V=g(16777216);r=d.prototype,r.m=function(){if(X(this))return-G(this).m();let N=0,x=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);N+=(D>=0?D:4294967296+D)*x,x*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(F(this))return"0";if(X(this))return"-"+G(this).toString(N);const x=_(Math.pow(N,6));var C=this;let D="";for(;;){const O=pe(C,x).g;C=re(C,O.j(x));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=O,F(C))return k+D;for(;k.length<6;)k="0"+k;D=k+D}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function F(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function X(N){return N.h==-1}r.l=function(N){return N=re(this,N),X(N)?-1:F(N)?0:1};function G(N){const x=N.g.length,C=[];for(let D=0;D<x;D++)C[D]=~N.g[D];return new d(C,~N.h).add(S)}r.abs=function(){return X(this)?G(this):this},r.add=function(N){const x=Math.max(this.g.length,N.g.length),C=[];let D=0;for(let O=0;O<=x;O++){let k=D+(this.i(O)&65535)+(N.i(O)&65535),R=(k>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);D=R>>>16,k&=65535,R&=65535,C[O]=R<<16|k}return new d(C,C[C.length-1]&-2147483648?-1:0)};function re(N,x){return N.add(G(x))}r.j=function(N){if(F(this)||F(N))return A;if(X(this))return X(N)?G(this).j(G(N)):G(G(this).j(N));if(X(N))return G(this.j(G(N)));if(this.l(V)<0&&N.l(V)<0)return _(this.m()*N.m());const x=this.g.length+N.g.length,C=[];for(var D=0;D<2*x;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let O=0;O<N.g.length;O++){const k=this.i(D)>>>16,R=this.i(D)&65535,ke=N.i(O)>>>16,We=N.i(O)&65535;C[2*D+2*O]+=R*We,ce(C,2*D+2*O),C[2*D+2*O+1]+=k*We,ce(C,2*D+2*O+1),C[2*D+2*O+1]+=R*ke,ce(C,2*D+2*O+1),C[2*D+2*O+2]+=k*ke,ce(C,2*D+2*O+2)}for(N=0;N<x;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=x;N<2*x;N++)C[N]=0;return new d(C,0)};function ce(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function oe(N,x){this.g=N,this.h=x}function pe(N,x){if(F(x))throw Error("division by zero");if(F(N))return new oe(A,A);if(X(N))return x=pe(G(N),x),new oe(G(x.g),G(x.h));if(X(x))return x=pe(N,G(x)),new oe(G(x.g),x.h);if(N.g.length>30){if(X(N)||X(x))throw Error("slowDivide_ only works with positive integers.");for(var C=S,D=x;D.l(N)<=0;)C=Ce(C),D=Ce(D);var O=ye(C,1),k=ye(D,1);for(D=ye(D,2),C=ye(C,2);!F(D);){var R=k.add(D);R.l(N)<=0&&(O=O.add(C),k=R),D=ye(D,1),C=ye(C,1)}return x=re(N,O.j(x)),new oe(O,x)}for(O=A;N.l(x)>=0;){for(C=Math.max(1,Math.floor(N.m()/x.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),k=_(C),R=k.j(x);X(R)||R.l(N)>0;)C-=D,k=_(C),R=k.j(x);F(k)&&(k=S),O=O.add(k),N=re(N,R)}return new oe(O,N)}r.B=function(N){return pe(this,N).h},r.and=function(N){const x=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<x;D++)C[D]=this.i(D)&N.i(D);return new d(C,this.h&N.h)},r.or=function(N){const x=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<x;D++)C[D]=this.i(D)|N.i(D);return new d(C,this.h|N.h)},r.xor=function(N){const x=Math.max(this.g.length,N.g.length),C=[];for(let D=0;D<x;D++)C[D]=this.i(D)^N.i(D);return new d(C,this.h^N.h)};function Ce(N){const x=N.g.length+1,C=[];for(let D=0;D<x;D++)C[D]=N.i(D)<<1|N.i(D-1)>>>31;return new d(C,N.h)}function ye(N,x){const C=x>>5;x%=32;const D=N.g.length-C,O=[];for(let k=0;k<D;k++)O[k]=x>0?N.i(k+C)>>>x|N.i(k+C+1)<<32-x:N.i(k+C);return new d(O,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,TT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=b,Cs=d}).apply(typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var AT,fc,wT,kh,yp,ST,xT,RT;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var y=0;y<u.length;++y){var E=u[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(u,y){if(y)e:{var E=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var U=u[w];if(!(U in E))break e;E=E[U]}u=u[u.length-1],w=E[u],y=y(w),y!=w&&y!=null&&e(E,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var E=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&E.push([w,y[w]]);return E}});var c=c||{},d=this||self;function p(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function g(u,y,E){return u.call.apply(u.bind,arguments)}function _(u,y,E){return _=g,_.apply(null,arguments)}function b(u,y){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function A(u,y){function E(){}E.prototype=y.prototype,u.Z=y.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(w,U,K){for(var le=Array(arguments.length-2),De=2;De<arguments.length;De++)le[De-2]=arguments[De];return y.prototype[U].apply(w,le)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function V(u){const y=u.length;if(y>0){const E=Array(y);for(let w=0;w<y;w++)E[w]=u[w];return E}return[]}function F(u,y){for(let w=1;w<arguments.length;w++){const U=arguments[w];var E=typeof U;if(E=E!="object"?E:U?Array.isArray(U)?"array":E:"null",E=="array"||E=="object"&&typeof U.length=="number"){E=u.length||0;const K=U.length||0;u.length=E+K;for(let le=0;le<K;le++)u[E+le]=U[le]}else u.push(U)}}class X{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function G(u){d.setTimeout(()=>{throw u},0)}function re(){var u=N;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class ce{constructor(){this.h=this.g=null}add(y,E){const w=oe.get();w.set(y,E),this.h?this.h.next=w:this.g=w,this.h=w}}var oe=new X(()=>new pe,u=>u.reset());class pe{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,ye=!1,N=new ce,x=()=>{const u=Promise.resolve(void 0);Ce=()=>{u.then(C)}};function C(){for(var u;u=re();){try{u.h.call(u.g)}catch(E){G(E)}var y=oe;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}ye=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};d.addEventListener("test",E,y),d.removeEventListener("test",E,y)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function ke(u,y){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}A(ke,O),ke.prototype.init=function(u,y){const E=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(E=="mouseover"?y=u.fromElement:E=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),$=0;function ae(u,y,E,w,U){this.listener=u,this.proxy=null,this.src=y,this.type=E,this.capture=!!w,this.ha=U,this.key=++$,this.da=this.fa=!1}function fe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Me(u,y,E){for(const w in u)y.call(E,u[w],w,u)}function Ie(u,y){for(const E in u)y.call(void 0,u[E],E,u)}function j(u){const y={};for(const E in u)y[E]=u[E];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,y){let E,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(E in w)u[E]=w[E];for(let K=0;K<J.length;K++)E=J[K],Object.prototype.hasOwnProperty.call(w,E)&&(u[E]=w[E])}}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,y,E,w,U){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const le=Y(u,y,w,U);return le>-1?(y=u[le],E||(y.fa=!1)):(y=new ae(y,this.src,K,!!w,U),y.fa=E,u.push(y)),y};function Te(u,y){const E=y.type;if(E in u.g){var w=u.g[E],U=Array.prototype.indexOf.call(w,y,void 0),K;(K=U>=0)&&Array.prototype.splice.call(w,U,1),K&&(fe(y),u.g[E].length==0&&(delete u.g[E],u.h--))}}function Y(u,y,E,w){for(let U=0;U<u.length;++U){const K=u[U];if(!K.da&&K.listener==y&&K.capture==!!E&&K.ha==w)return U}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),Ge={};function Pe(u,y,E,w,U){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Pe(u,y[K],E,w,U);return null}return E=di(E),u&&u[We]?u.J(y,E,p(w)?!!w.capture:!1,U):Qt(u,y,E,!1,w,U)}function Qt(u,y,E,w,U,K){if(!y)throw Error("Invalid event type");const le=p(U)?!!U.capture:!!U;let De=Wt(u);if(De||(u[ge]=De=new ue(u)),E=De.add(y,E,w,le,K),E.proxy)return E;if(w=W(),E.proxy=w,w.src=u,w.listener=E,u.addEventListener)k||(U=le),U===void 0&&(U=!1),u.addEventListener(y.toString(),w,U);else if(u.attachEvent)u.attachEvent(Ct(y.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function W(){function u(E){return y.call(u.src,u.listener,E)}const y=kt;return u}function pt(u,y,E,w,U){if(Array.isArray(y))for(var K=0;K<y.length;K++)pt(u,y[K],E,w,U);else w=p(w)?!!w.capture:!!w,E=di(E),u&&u[We]?(u=u.i,K=String(y).toString(),K in u.g&&(y=u.g[K],E=Y(y,E,w,U),E>-1&&(fe(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete u.g[K],u.h--)))):u&&(u=Wt(u))&&(y=u.g[y.toString()],u=-1,y&&(u=Y(y,E,w,U)),(E=u>-1?y[u]:null)&&Ve(E))}function Ve(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[We])Te(y.i,u);else{var E=u.type,w=u.proxy;y.removeEventListener?y.removeEventListener(E,w,u.capture):y.detachEvent?y.detachEvent(Ct(E),w):y.addListener&&y.removeListener&&y.removeListener(w),(E=Wt(y))?(Te(E,u),E.h==0&&(E.src=null,y[ge]=null)):fe(u)}}}function Ct(u){return u in Ge?Ge[u]:Ge[u]="on"+u}function kt(u,y){if(u.da)u=!0;else{y=new ke(y,this);const E=u.listener,w=u.ha||u.src;u.fa&&Ve(u),u=E.call(w,y)}return u}function Wt(u){return u=u[ge],u instanceof ue?u:null}var Yt="__closure_events_fn_"+(Math.random()*1e9>>>0);function di(u){return typeof u=="function"?u:(u[Yt]||(u[Yt]=function(y){return u.handleEvent(y)}),u[Yt])}function ht(){D.call(this),this.i=new ue(this),this.M=this,this.G=null}A(ht,D),ht.prototype[We]=!0,ht.prototype.removeEventListener=function(u,y,E,w){pt(this,u,y,E,w)};function dt(u,y){var E,w=u.G;if(w)for(E=[];w;w=w.G)E.push(w);if(u=u.M,w=y.type||y,typeof y=="string")y=new O(y,u);else if(y instanceof O)y.target=y.target||u;else{var U=y;y=new O(w,u),se(y,U)}U=!0;let K,le;if(E)for(le=E.length-1;le>=0;le--)K=y.g=E[le],U=Xn(K,w,!0,y)&&U;if(K=y.g=u,U=Xn(K,w,!0,y)&&U,U=Xn(K,w,!1,y)&&U,E)for(le=0;le<E.length;le++)K=y.g=E[le],U=Xn(K,w,!1,y)&&U}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const E=u.g[y];for(let w=0;w<E.length;w++)fe(E[w]);delete u.g[y],u.h--}}this.G=null},ht.prototype.J=function(u,y,E,w){return this.i.add(String(u),y,!1,E,w)},ht.prototype.K=function(u,y,E,w){return this.i.add(String(u),y,!0,E,w)};function Xn(u,y,E,w){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let K=0;K<y.length;++K){const le=y[K];if(le&&!le.da&&le.capture==E){const De=le.listener,It=le.ha||le.src;le.fa&&Te(u.i,le),U=De.call(It,w)!==!1&&U}}return U&&!w.defaultPrevented}function Vr(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(u,y||0)}function Ci(u){u.g=Vr(()=>{u.g=null,u.i&&(u.i=!1,Ci(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Jt extends D{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ci(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(u){D.call(this),this.h=u,this.g={}}A(Ii,D);var fi=[];function Ks(u){Me(u.g,function(y,E){this.g.hasOwnProperty(E)&&Ve(y)},u),u.g={}}Ii.prototype.N=function(){Ii.Z.N.call(this),Ks(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Di=d.JSON.stringify,Ba=d.JSON.parse,qa=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Fa(){}function Ha(){}var At={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tt(){O.call(this,"d")}A(tt,O);function Sn(){O.call(this,"c")}A(Sn,O);var bt={},Qs=null;function kr(){return Qs=Qs||new ht}bt.Ia="serverreachability";function Ga(u){O.call(this,bt.Ia,u)}A(Ga,O);function $n(u){const y=kr();dt(y,new Ga(y))}bt.STAT_EVENT="statevent";function ar(u,y){O.call(this,bt.STAT_EVENT,u),this.stat=y}A(ar,O);function wt(u){const y=kr();dt(y,new ar(y,u))}bt.Ja="timingevent";function Wn(u,y){O.call(this,bt.Ja,u),this.size=y}A(Wn,O);function mn(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},y)}function kn(){this.g=!0}kn.prototype.ua=function(){this.g=!1};function L(u,y,E,w,U,K){u.info(function(){if(u.g)if(K){var le="",De=K.split("&");for(let Je=0;Je<De.length;Je++){var It=De[Je].split("=");if(It.length>1){const vt=It[0];It=It[1];const ti=vt.split("_");le=ti.length>=2&&ti[1]=="type"?le+(vt+"="+It+"&"):le+(vt+"=redacted&")}}}else le=null;else le=K;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+y+`
`+E+`
`+le})}function be(u,y,E,w,U,K,le){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+y+`
`+E+`
`+K+" "+le})}function Qe(u,y,E,w){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ys(u,E)+(w?" "+w:"")})}function Zt(u,y){u.info(function(){return"TIMEOUT: "+y})}kn.prototype.info=function(){};function Ys(u,y){if(!u.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var E=K[u];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var U=w[0];if(U!="noop"&&U!="stop"&&U!="close")for(let le=1;le<w.length;le++)w[le]=""}}}}return Di(K)}catch{return y}}var xn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ll;function $s(){}A($s,Fa),$s.prototype.g=function(){return new XMLHttpRequest},ll=new $s;function or(u){return encodeURIComponent(String(u))}function Jc(u){var y=1;u=u.split(":");const E=[];for(;y>0&&u.length;)E.push(u.shift()),y--;return u.length&&E.push(u.join(":")),E}function mi(u,y,E,w){this.j=u,this.i=y,this.l=E,this.S=w||1,this.V=new Ii(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pi}function pi(){this.i=null,this.g="",this.h=!1}var Pt={},en={};function Oi(u,y,E){u.M=1,u.A=Ws(Ut(y)),u.u=E,u.R=!0,Ka(u,null)}function Ka(u,y){u.F=Date.now(),ji(u),u.B=Ut(u.A);var E=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),$a(E.i,"t",w),u.C=0,E=u.j.L,u.h=new pi,u.g=fu(u.j,E?y:null,!u.u),u.P>0&&(u.O=new Jt(_(u.Y,u,u.g),u.P)),y=u.V,E=u.g,w=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(fi[0]=U.toString()),U=fi);for(let K=0;K<U.length;K++){const le=Pe(E,U[K],w||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),$n(),L(u.i,u.v,u.B,u.l,u.S,u.u)}mi.prototype.ba=function(u){u=u.target;const y=this.O;y&&_i(u)==3?y.j():this.Y(u)},mi.prototype.Y=function(u){try{if(u==this.g)e:{const De=_i(this.g),It=this.g.ya(),Je=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||De!=4||It==7||(It==8||Je<=0?$n(3):$n(2)),Mi(this);var y=this.g.ca();this.X=y;var E=Ud(this);if(this.o=y==200,be(this.i,this.v,this.B,this.l,this.S,De,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,U=this.g;if((w=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(w)){var K=w;break t}}K=null}if(u=K)Qe(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vi(this,u);else{this.o=!1,this.m=3,wt(12),Pn(this),Jn(this);break e}}if(this.R){u=!0;let vt;for(;!this.K&&this.C<E.length;)if(vt=eu(this,E),vt==en){De==4&&(this.m=4,wt(14),u=!1),Qe(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Pt){this.m=4,wt(15),Qe(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else Qe(this.i,this.l,vt,null),Vi(this,vt);if(Zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||E.length!=0||this.h.h||(this.m=1,wt(16),u=!1),this.o=this.o&&u,!u)Qe(this.i,this.l,E,"[Invalid Chunked Response]"),Pn(this),Jn(this);else if(E.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Al(le),le.P=!0,wt(11))}}else Qe(this.i,this.l,E,null),Vi(this,E);De==4&&Pn(this),this.o&&!this.K&&(De==4?cu(this.j,this):(this.o=!1,ji(this)))}else cr(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),Pn(this),Jn(this)}}}catch{}};function Ud(u){if(!Zc(u))return u.g.la();const y=sn(u.g);if(y==="")return"";let E="";const w=y.length,U=_i(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Pn(u),Jn(u),"";u.h.i=new d.TextDecoder}for(let K=0;K<w;K++)u.h.h=!0,E+=u.h.i.decode(y[K],{stream:!(U&&K==w-1)});return y.length=0,u.h.g+=E,u.C=0,u.h.g}function Zc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function eu(u,y){var E=u.C,w=y.indexOf(`
`,E);return w==-1?en:(E=Number(y.substring(E,w)),isNaN(E)?Pt:(w+=1,w+E>y.length?en:(y=y.slice(w,w+E),u.C=w+E,y)))}mi.prototype.cancel=function(){this.K=!0,Pn(this)};function ji(u){u.T=Date.now()+u.H,Qa(u,u.H)}function Qa(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=mn(_(u.aa,u),y)}function Mi(u){u.D&&(d.clearTimeout(u.D),u.D=null)}mi.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Zt(this.i,this.B),this.M!=2&&($n(),wt(17)),Pn(this),this.m=2,Jn(this)):Qa(this,this.T-u)};function Jn(u){u.j.I==0||u.K||cu(u.j,u)}function Pn(u){Mi(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Ks(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function Vi(u,y){try{var E=u.j;if(E.I!=0&&(E.g==u||Pi(E.h,u))){if(!u.L&&Pi(E.h,u)&&E.I==3){try{var w=E.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)to(E),Hr(E);else break e;ra(E),wt(18)}}else E.xa=U[1],0<E.xa-E.K&&U[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=mn(_(E.Va,E),6e3));ki(E.h)<=1&&E.ta&&(E.ta=void 0)}else Fi(E,11)}else if((u.L||E.g==u)&&to(E),!R(y))for(U=E.Ba.g.parse(y),y=0;y<U.length;y++){let Je=U[y];const vt=Je[0];if(!(vt<=E.K))if(E.K=vt,Je=Je[1],E.I==2)if(Je[0]=="c"){E.M=Je[1],E.ba=Je[2];const ti=Je[3];ti!=null&&(E.ka=ti,E.j.info("VER="+E.ka));const Hi=Je[4];Hi!=null&&(E.za=Hi,E.j.info("SVER="+E.za));const vi=Je[5];vi!=null&&typeof vi=="number"&&vi>0&&(w=1.5*vi,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const Ei=u.g;if(Ei){const sa=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sa){var K=w.h;K.g||sa.indexOf("spdy")==-1&&sa.indexOf("quic")==-1&&sa.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(hl(K,K.h),K.h=null))}if(w.G){const no=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(w.wa=no,nt(w.J,w.G,no))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var le=u;if(w.na=du(w,w.L?w.ba:null,w.W),le.L){dl(w.h,le);var De=le,It=w.O;It&&(De.H=It),De.D&&(Mi(De),ji(De)),w.g=le}else ou(w);E.i.length>0&&qi(E)}else Je[0]!="stop"&&Je[0]!="close"||Fi(E,7);else E.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Fi(E,7):bl(E):Je[0]!="noop"&&E.l&&E.l.qa(Je),E.A=0)}}$n(4)}catch{}}var Lt=class{constructor(u,y){this.g=u,this.map=y}};function cl(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ul(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ki(u){return u.h?1:u.g?u.g.size:0}function Pi(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function hl(u,y){u.g?u.g.add(y):u.h=y}function dl(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}cl.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function fl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const E of u.g.values())y=y.concat(E.G);return y}return V(u.i)}var tu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(u,y){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const w=u[E].indexOf("=");let U,K=null;w>=0?(U=u[E].substring(0,w),K=u[E].substring(w+1)):U=u[E],y(U,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Ln(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof Ln?(this.l=u.l,tn(this,u.j),this.o=u.o,this.g=u.g,Pr(this,u.u),this.h=u.h,ml(this,su(u.i)),this.m=u.m):u&&(y=String(u).match(tu))?(this.l=!1,tn(this,y[1]||"",!0),this.o=Li(y[2]||""),this.g=Li(y[3]||"",!0),Pr(this,y[4]),this.h=Li(y[5]||"",!0),ml(this,y[6]||"",!0),this.m=Li(y[7]||"")):(this.l=!1,this.i=new Ur(null,this.l))}Ln.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(Js(y,Xa,!0),":");var E=this.g;return(E||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Js(y,Xa,!0),"@"),u.push(or(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Js(E,E.charAt(0)=="/"?pl:nu,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Js(E,iu)),u.join("")},Ln.prototype.resolve=function(u){const y=Ut(this);let E=!!u.j;E?tn(y,u.j):E=!!u.o,E?y.o=u.o:E=!!u.g,E?y.g=u.g:E=u.u!=null;var w=u.h;if(E)Pr(y,u.u);else if(E=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var U=y.h.lastIndexOf("/");U!=-1&&(w=y.h.slice(0,U+1)+w)}if(U=w,U==".."||U==".")w="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){w=U.lastIndexOf("/",0)==0,U=U.split("/");const K=[];for(let le=0;le<U.length;){const De=U[le++];De=="."?w&&le==U.length&&K.push(""):De==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),w&&le==U.length&&K.push("")):(K.push(De),w=!0)}w=K.join("/")}else w=U}return E?y.h=w:E=u.i.toString()!=="",E?ml(y,su(u.i)):E=!!u.m,E&&(y.m=u.m),y};function Ut(u){return new Ln(u)}function tn(u,y,E){u.j=E?Li(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Pr(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function ml(u,y,E){y instanceof Ur?(u.i=y,Wa(u.i,u.l)):(E||(y=Js(y,Lr)),u.i=new Ur(y,u.l))}function nt(u,y,E){u.i.set(y,E)}function Ws(u){return nt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Li(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Js(u,y,E){return typeof u=="string"?(u=encodeURI(u).replace(y,Rn),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Rn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xa=/[#\/\?@]/g,nu=/[#\?:]/g,pl=/[#\?]/g,Lr=/[#\?@]/g,iu=/#/g;function Ur(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Nn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ya(u.i,function(y,E){u.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=Ur.prototype,r.add=function(u,y){Nn(this),this.i=null,u=zr(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(y),this.h+=1,this};function ru(u,y){Nn(u),y=zr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function gl(u,y){return Nn(u),y=zr(u,y),u.g.has(y)}r.forEach=function(u,y){Nn(this),this.g.forEach(function(E,w){E.forEach(function(U){u.call(y,U,w,this)},this)},this)};function yl(u,y){Nn(u);let E=[];if(typeof y=="string")gl(u,y)&&(E=E.concat(u.g.get(zr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)E=E.concat(u[y]);return E}r.set=function(u,y){return Nn(this),this.i=null,u=zr(this,u),gl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=yl(this,u),u.length>0?String(u[0]):y):y};function $a(u,y,E){ru(u,y),E.length>0&&(u.i=null,u.g.set(zr(u,y),V(E)),u.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var E=y[w];const U=or(E);E=yl(this,E);for(let K=0;K<E.length;K++){let le=U;E[K]!==""&&(le+="="+or(E[K])),u.push(le)}}return this.i=u.join("&")};function su(u){const y=new Ur;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function zr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Wa(u,y){y&&!u.j&&(Nn(u),u.i=null,u.g.forEach(function(E,w){const U=w.toLowerCase();w!=U&&(ru(this,w),$a(this,U,E))},u)),u.j=y}function gi(u,y){const E=new kn;if(d.Image){const w=new Image;w.onload=b(Zn,E,"TestLoadImage: loaded",!0,y,w),w.onerror=b(Zn,E,"TestLoadImage: error",!1,y,w),w.onabort=b(Zn,E,"TestLoadImage: abort",!1,y,w),w.ontimeout=b(Zn,E,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else y(!1)}function _l(u,y){const E=new kn,w=new AbortController,U=setTimeout(()=>{w.abort(),Zn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:w.signal}).then(K=>{clearTimeout(U),K.ok?Zn(E,"TestPingServer: ok",!0,y):Zn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Zn(E,"TestPingServer: error",!1,y)})}function Zn(u,y,E,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(E)}catch{}}function Br(){this.g=new qa}function Ui(u){this.i=u.Sb||null,this.h=u.ab||!1}A(Ui,Fa),Ui.prototype.g=function(){return new Zs(this.i,this.h)};function Zs(u,y){ht.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Zs,ht),r=Zs.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,yi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?qr(this):yi(this),this.readyState==3&&Ja(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,qr(this))},r.Na=function(u){this.g&&(this.response=u,qr(this))},r.ga=function(){this.g&&qr(this)};function qr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,yi(u)}r.setRequestHeader=function(u,y){this.A.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=y.next();return u.join(`\r
`)};function yi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ei(u){let y="";return Me(u,function(E,w){y+=w,y+=":",y+=E,y+=`\r
`}),y}function ea(u,y,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=ei(E),typeof u=="string"?E!=null&&or(E):nt(u,y,E))}function st(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(st,ht);var zi=/^https?$/i,vl=["POST","PUT"];r=st.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,y,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ll.g(),this.g.onreadystatechange=S(_(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(K){ta(this,K);return}if(u=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)E.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())E.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(K=>K.toLowerCase()=="content-type"),U=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(vl,y,void 0)>=0)||w||U||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of E)this.g.setRequestHeader(K,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){ta(this,K)}};function ta(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,El(u),lr(u)}function El(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,dt(this,"complete"),dt(this,"abort"),lr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lr(this,!0)),st.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?na(this):this.Xa())},r.Xa=function(){na(this)};function na(u){if(u.h&&typeof c<"u"){if(u.v&&_i(u)==4)setTimeout(u.Ca.bind(u),0);else if(dt(u,"readystatechange"),_i(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var w;if(w=K===0){let le=String(u.D).match(tu)[1]||null;!le&&d.self&&d.self.location&&(le=d.self.location.protocol.slice(0,-1)),w=!zi.test(le?le.toLowerCase():"")}E=w}if(E)dt(u,"complete"),dt(u,"success");else{u.o=6;try{var U=_i(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",El(u)}}finally{lr(u)}}}}function lr(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,y||dt(u,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function _i(u){return u.g?u.g.readyState:0}r.ca=function(){try{return _i(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Ba(y)}};function sn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function cr(u){const y={};u=(u.g&&_i(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(R(u[w]))continue;var E=Jc(u[w]);const U=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const K=y[U]||[];y[U]=K,K.push(E)}Ie(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(u,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||y}function Fr(u){this.za=0,this.i=[],this.j=new kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,u),this.Za=Bi("retryDelaySeedMs",1e4,u),this.Ta=Bi("forwardChannelMaxRetries",2,u),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new cl(u&&u.concurrentRequestLimit),this.Ba=new Br,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Fr.prototype,r.ka=8,r.I=1,r.connect=function(u,y,E,w){wt(0),this.W=u,this.H=y||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=du(this,null,this.W),qi(this)};function bl(u){if(Za(u),u.I==3){var y=u.V++,E=Ut(u.J);if(nt(E,"SID",u.M),nt(E,"RID",y),nt(E,"TYPE","terminate"),ia(u,E),y=new mi(u,u.j,y),y.M=2,y.A=Ws(Ut(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=y.A,E=!0),E||(y.g=fu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ji(y)}hu(u)}function Hr(u){u.g&&(Al(u),u.g.cancel(),u.g=null)}function Za(u){Hr(u),u.v&&(d.clearTimeout(u.v),u.v=null),to(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function qi(u){if(!ul(u.h)&&!u.m){u.m=!0;var y=u.Ea;Ce||x(),ye||(Ce(),ye=!0),N.add(y,u),u.D=0}}function eo(u,y){return ki(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=mn(_(u.Ea,u,y),uu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new mi(this,this.j,u);let K=this.o;if(this.U&&(K?(K=j(K),se(K,this.U)):K=this.U),this.u!==null||this.R||(U.J=K,K=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=au(this,U,y),E=Ut(this.J),nt(E,"RID",u),nt(E,"CVER",22),this.G&&nt(E,"X-HTTP-Session-Id",this.G),ia(this,E),K&&(this.R?y="headers="+or(ei(K))+"&"+y:this.u&&ea(E,this.u,K)),hl(this.h,U),this.Ra&&nt(E,"TYPE","init"),this.S?(nt(E,"$req",y),nt(E,"SID","null"),U.U=!0,Oi(U,E,null)):Oi(U,E,y),this.I=2}}else this.I==3&&(u?Tl(this,u):this.i.length==0||ul(this.h)||Tl(this))};function Tl(u,y){var E;y?E=y.l:E=u.V++;const w=Ut(u.J);nt(w,"SID",u.M),nt(w,"RID",E),nt(w,"AID",u.K),ia(u,w),u.u&&u.o&&ea(w,u.u,u.o),E=new mi(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),y&&(u.i=y.G.concat(u.i)),y=au(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),hl(u.h,E),Oi(E,w,y)}function ia(u,y){u.H&&Me(u.H,function(E,w){nt(y,w,E)}),u.l&&Me({},function(E,w){nt(y,w,E)})}function au(u,y,E){E=Math.min(u.i.length,E);const w=u.l?_(u.l.Ka,u.l,u):null;e:{var U=u.i;let De=-1;for(;;){const It=["count="+E];De==-1?E>0?(De=U[0].g,It.push("ofs="+De)):De=0:It.push("ofs="+De);let Je=!0;for(let vt=0;vt<E;vt++){var K=U[vt].g;const ti=U[vt].map;if(K-=De,K<0)De=Math.max(0,U[vt].g-100),Je=!1;else try{K="req"+K+"_"||"";try{var le=ti instanceof Map?ti:Object.entries(ti);for(const[Hi,vi]of le){let Ei=vi;p(vi)&&(Ei=Di(vi)),It.push(K+Hi+"="+encodeURIComponent(Ei))}}catch(Hi){throw It.push(K+"type="+encodeURIComponent("_badmap")),Hi}}catch{w&&w(ti)}}if(Je){le=It.join("&");break e}}le=void 0}return u=u.i.splice(0,E),y.G=u,le}function ou(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;Ce||x(),ye||(Ce(),ye=!0),N.add(y,u),u.A=0}}function ra(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=mn(_(u.Da,u),uu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=mn(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Hr(this),lu(this))};function Al(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function lu(u){u.g=new mi(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Ut(u.na);nt(y,"RID","rpc"),nt(y,"SID",u.M),nt(y,"AID",u.K),nt(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&nt(y,"TO",u.ia),nt(y,"TYPE","xmlhttp"),ia(u,y),u.u&&u.o&&ea(y,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=Ws(Ut(y)),E.u=null,E.R=!0,Ka(E,u)}r.Va=function(){this.C!=null&&(this.C=null,Hr(this),ra(this),wt(19))};function to(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function cu(u,y){var E=null;if(u.g==y){to(u),Al(u),u.g=null;var w=2}else if(Pi(u.h,y))E=y.G,dl(u.h,y),w=1;else return;if(u.I!=0){if(y.o)if(w==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var U=u.D;w=kr(),dt(w,new Wn(w,E)),qi(u)}else ou(u);else if(U=y.m,U==3||U==0&&y.X>0||!(w==1&&eo(u,y)||w==2&&ra(u)))switch(E&&E.length>0&&(y=u.h,y.i=y.i.concat(E)),U){case 1:Fi(u,5);break;case 4:Fi(u,10);break;case 3:Fi(u,6);break;default:Fi(u,2)}}}function uu(u,y){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*y}function Fi(u,y){if(u.j.info("Error code "+y),y==2){var E=_(u.bb,u),w=u.Ua;const U=!w;w=new Ln(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||tn(w,"https"),Ws(w),U?gi(w.toString(),E):_l(w.toString(),E)}else wt(2);u.I=0,u.l&&u.l.pa(y),hu(u),Za(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function hu(u){if(u.I=0,u.ja=[],u.l){const y=fl(u.h);(y.length!=0||u.i.length!=0)&&(F(u.ja,y),F(u.ja,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.oa()}}function du(u,y,E){var w=E instanceof Ln?Ut(E):new Ln(E);if(w.g!="")y&&(w.g=y+"."+w.g),Pr(w,w.u);else{var U=d.location;w=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const K=new Ln(null);w&&tn(K,w),y&&(K.g=y),U&&Pr(K,U),E&&(K.h=E),w=K}return E=u.G,y=u.wa,E&&y&&nt(w,E,y),nt(w,"VER",u.ka),ia(u,w),w}function fu(u,y,E){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new st(new Ui({ab:E})):new st(u.ma),y.Fa(u.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function mu(){}r=mu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Gr(){}Gr.prototype.g=function(u,y){return new En(u,y)};function En(u,y){ht.call(this),this.g=new Fr(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!R(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new ur(this)}A(En,ht),En.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){bl(this.g)},En.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=Di(u),u=E);y.i.push(new Lt(y.Ya++,u)),y.I==3&&qi(y)},En.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,En.Z.N.call(this)};function pu(u){tt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const E in y){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}A(pu,tt);function gu(){Sn.call(this),this.status=1}A(gu,Sn);function ur(u){this.g=u}A(ur,mu),ur.prototype.ra=function(){dt(this.g,"a")},ur.prototype.qa=function(u){dt(this.g,new pu(u))},ur.prototype.pa=function(u){dt(this.g,new gu)},ur.prototype.oa=function(){dt(this.g,"b")},Gr.prototype.createWebChannel=Gr.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,RT=function(){return new Gr},xT=function(){return kr()},ST=bt,yp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xn.NO_ERROR=0,xn.TIMEOUT=8,xn.HTTP_ERROR=6,kh=xn,Xs.COMPLETE="complete",wT=Xs,Ha.EventType=At,At.OPEN="a",At.CLOSE="b",At.ERROR="c",At.MESSAGE="d",ht.prototype.listen=ht.prototype.J,fc=Ha,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,AT=st}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let il="12.8.0";function u2(r){il=r}const Oa=new qp("@firebase/firestore");function Vo(){return Oa.logLevel}function de(r,...e){if(Oa.logLevel<=qe.DEBUG){const n=e.map(Zp);Oa.debug(`Firestore (${il}): ${r}`,...n)}}function Or(r,...e){if(Oa.logLevel<=qe.ERROR){const n=e.map(Zp);Oa.error(`Firestore (${il}): ${r}`,...n)}}function Qo(r,...e){if(Oa.logLevel<=qe.WARN){const n=e.map(Zp);Oa.warn(`Firestore (${il}): ${r}`,...n)}}function Zp(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Se(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,NT(r,s,n)}function NT(r,e,n){let s=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Or(s),new Error(s)}function et(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||NT(e,o,s)}function Ne(r,e){return r}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class CT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(yn.UNAUTHENTICATED)))}shutdown(){}}class d2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class f2{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Cr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Cr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string",31837,{l:s}),new CT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class m2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class p2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new m2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class s0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const s=c=>{c.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new s0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function y2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=y2(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Fe(r,e){return r<e?-1:r>e?1:0}function _p(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return Ym(o)===Ym(c)?Fe(o,c):Ym(o)?1:-1}return Fe(r.length,e.length)}const _2=55296,v2=57343;function Ym(r){const e=r.charCodeAt(0);return e>=_2&&e<=v2}function Yo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const a0="__name__";class Xi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Se(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=Xi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Fe(e.length,n.length)}static compareSegments(e,n){const s=Xi.isNumericId(e),o=Xi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Xi.extractNumericId(e).compare(Xi.extractNumericId(n)):_p(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cs.fromString(e.substring(4,e.length-2))}}class ft extends Xi{construct(e,n,s){return new ft(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ft(n)}static emptyPath(){return new ft([])}}const E2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Xi{construct(e,n,s){return new hn(e,n,s)}static isValidIdentifier(e){return E2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===a0}static keyField(){return new hn([a0])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(s+=p,o++):(c(),o++)}if(c(),d)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ft.fromString(e))}static fromName(e){return new Ee(ft.fromString(e).popFirst(5))}static empty(){return new Ee(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ft(e.slice()))}}function IT(r,e,n){if(!n)throw new he(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function b2(r,e,n,s){if(e===!0&&s===!0)throw new he(ee.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function o0(r){if(!Ee.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function l0(r){if(Ee.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function DT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function vd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function hi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vd(r);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function T2(r,e){if(e<=0)throw new he(ee.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function Kt(r,e){const n={typeString:r};return e&&(n.value=e),n}function Hc(r,e){if(!DT(r))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new he(ee.INVALID_ARGUMENT,n);return!0}const c0=-62135596800,u0=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*u0);return new _t(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<c0)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u0}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-c0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Kt("string",_t._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new _t(0,0))}static max(){return new xe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Nc=-1;function A2(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new _t(n+1,0):new _t(n,s));return new Os(o,Ee.empty(),e)}function w2(r){return new Os(r.readTime,r.key,Nc)}class Os{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Os(xe.min(),Ee.empty(),Nc)}static max(){return new Os(xe.max(),Ee.empty(),Nc)}}function S2(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(r.documentKey,e.documentKey),n!==0?n:Fe(r.largestBatchId,e.largestBatchId))}const x2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function rl(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==x2)throw r;de("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,s)=>{n(e)}))}static reject(e){return new ie(((n,s)=>{s(e)}))}static waitFor(e){return new ie(((n,s)=>{let o=0,c=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++c,d&&c===o&&n()}),(g=>s(g)))})),d=!0,c===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const s of e)n=n.next((o=>o?ie.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new ie(((s,o)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const _=g;n(e[_]).next((b=>{d[_]=b,++p,p===c&&s(d)}),(b=>o(b)))}}))}static doWhile(e,n){return new ie(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function N2(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(r){return r.name==="IndexedDbTransactionError"}class Ed{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ed.ce=-1;const tg=-1;function bd(r){return r==null}function Wh(r){return r===0&&1/r==-1/0}function C2(r){return typeof r=="number"&&Number.isInteger(r)&&!Wh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const OT="";function I2(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=h0(e)),e=D2(r.get(n),e);return h0(e)}function D2(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case OT:n+="";break;default:n+=c}}return n}function h0(r){return r+OT+""}function d0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function qs(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function jT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Tt{constructor(e,n){this.comparator=e,this.root=n||un.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Th(this.root,e,this.comparator,!1)}getReverseIterator(){return new Th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Th(this.root,e,this.comparator,!0)}}class Th{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??un.RED,this.left=o??un.EMPTY,this.right=c??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new un(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $t{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new f0(this.data.getIterator())}getIteratorFrom(e){return new f0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class f0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Qn{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Qn([])}unionWith(e){let n=new $t(hn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class MT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new MT("Invalid base64 string: "+c):c}})(e);return new fn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const O2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(r){if(et(!!r,39018),typeof r=="string"){let e=0;const n=O2.exec(r);if(et(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:jt(r.seconds),nanos:jt(r.nanos)}}function jt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ms(r){return typeof r=="string"?fn.fromBase64String(r):fn.fromUint8Array(r)}const VT="server_timestamp",kT="__type__",PT="__previous_value__",LT="__local_write_time__";function ng(r){return(r?.mapValue?.fields||{})[kT]?.stringValue===VT}function Td(r){const e=r.mapValue.fields[PT];return ng(e)?Td(e):e}function Cc(r){const e=js(r.mapValue.fields[LT].timestampValue);return new _t(e.seconds,e.nanos)}class j2{constructor(e,n,s,o,c,d,p,g,_,b,A){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=b,this.apiKey=A}}const Jh="(default)";class Ic{constructor(e,n){this.projectId=e,this.database=n||Jh}static empty(){return new Ic("","")}get isDefaultDatabase(){return this.database===Jh}isEqual(e){return e instanceof Ic&&e.projectId===this.projectId&&e.database===this.database}}function M2(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ic(r.options.projectId,e)}const UT="__type__",V2="__max__",Ah={mapValue:{}},zT="__vector__",Zh="value";function Vs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ng(r)?4:P2(r)?9007199254740991:k2(r)?10:11:Se(28295,{value:r})}function rr(r,e){if(r===e)return!0;const n=Vs(r);if(n!==Vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Cc(r).isEqual(Cc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=js(o.timestampValue),p=js(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Ms(o.bytesValue).isEqual(Ms(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return jt(o.geoPointValue.latitude)===jt(c.geoPointValue.latitude)&&jt(o.geoPointValue.longitude)===jt(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return jt(o.integerValue)===jt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=jt(o.doubleValue),p=jt(c.doubleValue);return d===p?Wh(d)===Wh(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Yo(r.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},p=c.mapValue.fields||{};if(d0(d)!==d0(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!rr(d[g],p[g])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function Dc(r,e){return(r.values||[]).find((n=>rr(n,e)))!==void 0}function Xo(r,e){if(r===e)return 0;const n=Vs(r),s=Vs(e);if(n!==s)return Fe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=jt(c.integerValue||c.doubleValue),g=jt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return m0(r.timestampValue,e.timestampValue);case 4:return m0(Cc(r),Cc(e));case 5:return _p(r.stringValue,e.stringValue);case 6:return(function(c,d){const p=Ms(c),g=Ms(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let _=0;_<p.length&&_<g.length;_++){const b=Fe(p[_],g[_]);if(b!==0)return b}return Fe(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Fe(jt(c.latitude),jt(d.latitude));return p!==0?p:Fe(jt(c.longitude),jt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return p0(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},_=p[Zh]?.arrayValue,b=g[Zh]?.arrayValue,A=Fe(_?.values?.length||0,b?.values?.length||0);return A!==0?A:p0(_,b)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Ah.mapValue&&d===Ah.mapValue)return 0;if(c===Ah.mapValue)return 1;if(d===Ah.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),_=d.fields||{},b=Object.keys(_);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const S=_p(g[A],b[A]);if(S!==0)return S;const V=Xo(p[g[A]],_[b[A]]);if(V!==0)return V}return Fe(g.length,b.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function m0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Fe(r,e);const n=js(r),s=js(e),o=Fe(n.seconds,s.seconds);return o!==0?o:Fe(n.nanos,s.nanos)}function p0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Xo(n[o],s[o]);if(c)return c}return Fe(n.length,s.length)}function $o(r){return vp(r)}function vp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=js(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Ms(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ee.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=vp(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${vp(n.fields[d])}`;return o+"}"})(r.mapValue):Se(61005,{value:r})}function Ph(r){switch(Vs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Td(r);return e?16+Ph(e):16;case 5:return 2*r.stringValue.length;case 6:return Ms(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+Ph(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return qs(s.fields,((c,d)=>{o+=c.length+Ph(d)})),o})(r.mapValue);default:throw Se(13486,{value:r})}}function g0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ep(r){return!!r&&"integerValue"in r}function ig(r){return!!r&&"arrayValue"in r}function y0(r){return!!r&&"nullValue"in r}function _0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Lh(r){return!!r&&"mapValue"in r}function k2(r){return(r?.mapValue?.fields||{})[UT]?.stringValue===zT}function vc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return qs(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=vc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vc(r.arrayValue.values[n]);return e}return{...r}}function P2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===V2}class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(n)}setAll(e){let n=hn.emptyPath(),s={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=p.popLast()}d?s[p.lastSegment()]=vc(d):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){qs(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new Vn(vc(this.value))}}function BT(r){const e=[];return qs(r.fields,((n,s)=>{const o=new hn([n]);if(Lh(s)){const c=BT(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Qn(e)}class _n{constructor(e,n,s,o,c,d,p){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new _n(e,0,xe.min(),xe.min(),xe.min(),Vn.empty(),0)}static newFoundDocument(e,n,s,o){return new _n(e,1,n,xe.min(),s,o,0)}static newNoDocument(e,n){return new _n(e,2,n,xe.min(),xe.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new _n(e,3,n,xe.min(),xe.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ed{constructor(e,n){this.position=e,this.inclusive=n}}function v0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?s=Ee.comparator(Ee.fromName(d.referenceValue),n.key):s=Xo(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function E0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!rr(r.position[n],e.position[n]))return!1;return!0}class Oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function L2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class qT{}class Gt extends qT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new z2(e,n,s):n==="array-contains"?new F2(e,s):n==="in"?new H2(e,s):n==="not-in"?new G2(e,s):n==="array-contains-any"?new K2(e,s):new Gt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new B2(e,s):new q2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xo(n,this.value)):n!==null&&Vs(this.value)===Vs(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends qT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ni(e,n)}matches(e){return FT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function FT(r){return r.op==="and"}function HT(r){return U2(r)&&FT(r)}function U2(r){for(const e of r.filters)if(e instanceof Ni)return!1;return!0}function bp(r){if(r instanceof Gt)return r.field.canonicalString()+r.op.toString()+$o(r.value);if(HT(r))return r.filters.map((e=>bp(e))).join(",");{const e=r.filters.map((n=>bp(n))).join(",");return`${r.op}(${e})`}}function GT(r,e){return r instanceof Gt?(function(s,o){return o instanceof Gt&&s.op===o.op&&s.field.isEqual(o.field)&&rr(s.value,o.value)})(r,e):r instanceof Ni?(function(s,o){return o instanceof Ni&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,p)=>c&&GT(d,o.filters[p])),!0):!1})(r,e):void Se(19439)}function KT(r){return r instanceof Gt?(function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`})(r):r instanceof Ni?(function(n){return n.op.toString()+" {"+n.getFilters().map(KT).join(" ,")+"}"})(r):"Filter"}class z2 extends Gt{constructor(e,n,s){super(e,n,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class B2 extends Gt{constructor(e,n){super(e,"in",n),this.keys=QT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class q2 extends Gt{constructor(e,n){super(e,"not-in",n),this.keys=QT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function QT(r,e){return(e.arrayValue?.values||[]).map((n=>Ee.fromName(n.referenceValue)))}class F2 extends Gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ig(n)&&Dc(n.arrayValue,this.value)}}class H2 extends Gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}}class G2 extends Gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dc(this.value.arrayValue,n)}}class K2 extends Gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ig(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Dc(this.value.arrayValue,s)))}}class Q2{constructor(e,n=null,s=[],o=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function b0(r,e=null,n=[],s=[],o=null,c=null,d=null){return new Q2(r,e,n,s,o,c,d)}function rg(r){const e=Ne(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>bp(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>$o(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>$o(s))).join(",")),e.Te=n}return e.Te}function sg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!L2(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!GT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!E0(r.startAt,e.startAt)&&E0(r.endAt,e.endAt)}function Tp(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class al{constructor(e,n=null,s=[],o=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Y2(r,e,n,s,o,c,d,p){return new al(r,e,n,s,o,c,d,p)}function ag(r){return new al(r)}function T0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function X2(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function YT(r){return r.collectionGroup!==null}function Ec(r){const e=Ne(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new $t(hn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(p=p.add(_.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Oc(c,s))})),n.has(hn.keyField().canonicalString())||e.Ie.push(new Oc(hn.keyField(),s))}return e.Ie}function tr(r){const e=Ne(r);return e.Ee||(e.Ee=$2(e,Ec(r))),e.Ee}function $2(r,e){if(r.limitType==="F")return b0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Oc(o.field,c)}));const n=r.endAt?new ed(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new ed(r.startAt.position,r.startAt.inclusive):null;return b0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Ap(r,e){const n=r.filters.concat([e]);return new al(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function W2(r,e){const n=r.explicitOrderBy.concat([e]);return new al(r.path,r.collectionGroup,n,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function td(r,e,n){return new al(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Ad(r,e){return sg(tr(r),tr(e))&&r.limitType===e.limitType}function XT(r){return`${rg(tr(r))}|lt:${r.limitType}`}function ko(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>KT(o))).join(", ")}]`),bd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>$o(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>$o(o))).join(",")),`Target(${s})`})(tr(r))}; limitType=${r.limitType})`}function wd(r,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ee.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,o){for(const c of Ec(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(d,p,g){const _=v0(d,p,g);return d.inclusive?_<=0:_<0})(s.startAt,Ec(s),o)||s.endAt&&!(function(d,p,g){const _=v0(d,p,g);return d.inclusive?_>=0:_>0})(s.endAt,Ec(s),o))})(r,e)}function J2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function $T(r){return(e,n)=>{let s=!1;for(const o of Ec(r)){const c=Z2(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function Z2(r,e,n){const s=r.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),_=p.data.field(c);return g!==null&&_!==null?Xo(g,_):Se(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:r.dir})}}class La{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return jT(this.inner)}size(){return this.innerSize}}const eI=new Tt(Ee.comparator);function jr(){return eI}const WT=new Tt(Ee.comparator);function mc(...r){let e=WT;for(const n of r)e=e.insert(n.key,n);return e}function JT(r){let e=WT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Aa(){return bc()}function ZT(){return bc()}function bc(){return new La((r=>r.toString()),((r,e)=>r.isEqual(e)))}const tI=new Tt(Ee.comparator),nI=new $t(Ee.comparator);function He(...r){let e=nI;for(const n of r)e=e.add(n);return e}const iI=new $t(Fe);function rI(){return iI}function og(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function eA(r){return{integerValue:""+r}}function sI(r,e){return C2(e)?eA(e):og(r,e)}class Sd{constructor(){this._=void 0}}function aI(r,e,n){return r instanceof jc?(function(o,c){const d={fields:{[kT]:{stringValue:VT},[LT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&ng(c)&&(c=Td(c)),c&&(d.fields[PT]=c),{mapValue:d}})(n,e):r instanceof Mc?nA(r,e):r instanceof Vc?iA(r,e):(function(o,c){const d=tA(o,c),p=A0(d)+A0(o.Ae);return Ep(d)&&Ep(o.Ae)?eA(p):og(o.serializer,p)})(r,e)}function oI(r,e,n){return r instanceof Mc?nA(r,e):r instanceof Vc?iA(r,e):n}function tA(r,e){return r instanceof nd?(function(s){return Ep(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class jc extends Sd{}class Mc extends Sd{constructor(e){super(),this.elements=e}}function nA(r,e){const n=rA(e);for(const s of r.elements)n.some((o=>rr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Vc extends Sd{constructor(e){super(),this.elements=e}}function iA(r,e){let n=rA(e);for(const s of r.elements)n=n.filter((o=>!rr(o,s)));return{arrayValue:{values:n}}}class nd extends Sd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function A0(r){return jt(r.integerValue||r.doubleValue)}function rA(r){return ig(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class lI{constructor(e,n){this.field=e,this.transform=n}}function cI(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Mc&&o instanceof Mc||s instanceof Vc&&o instanceof Vc?Yo(s.elements,o.elements,rr):s instanceof nd&&o instanceof nd?rr(s.Ae,o.Ae):s instanceof jc&&o instanceof jc})(r.transform,e.transform)}class uI{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class xd{}function sA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Rd(r.key,wn.none()):new Gc(r.key,r.data,wn.none());{const n=r.data,s=Vn.empty();let o=new $t(hn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new Fs(r.key,s,new Qn(o.toArray()),wn.none())}}function hI(r,e,n){r instanceof Gc?(function(o,c,d){const p=o.value.clone(),g=S0(o.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):r instanceof Fs?(function(o,c,d){if(!Uh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const p=S0(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(aA(o)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Tc(r,e,n,s){return r instanceof Gc?(function(c,d,p,g){if(!Uh(c.precondition,d))return p;const _=c.value.clone(),b=x0(c.fieldTransforms,g,d);return _.setAll(b),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(r,e,n,s):r instanceof Fs?(function(c,d,p,g){if(!Uh(c.precondition,d))return p;const _=x0(c.fieldTransforms,g,d),b=d.data;return b.setAll(aA(c)),b.setAll(_),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(r,e,n,s):(function(c,d,p){return Uh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,n)}function dI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=tA(s.transform,o||null);c!=null&&(n===null&&(n=Vn.empty()),n.set(s.field,c))}return n||null}function w0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Yo(s,o,((c,d)=>cI(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Gc extends xd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fs extends xd{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function aA(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function S0(r,e,n){const s=new Map;et(r.length===n.length,32656,{Ve:n.length,de:r.length});for(let o=0;o<n.length;o++){const c=r[o],d=c.transform,p=e.data.field(c.field);s.set(c.field,oI(d,p,n[o]))}return s}function x0(r,e,n){const s=new Map;for(const o of r){const c=o.transform,d=n.data.field(o.field);s.set(o.field,aI(c,d,e))}return s}class Rd extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fI extends xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&hI(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ZT();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(o.key)?null:p;const g=sA(d,p);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(xe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),He())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((n,s)=>w0(n,s)))&&Yo(this.baseMutations,e.baseMutations,((n,s)=>w0(n,s)))}}class lg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){et(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return tI})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new lg(e,n,s,o)}}class pI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class gI{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ht,Ye;function yI(r){switch(r){case ee.OK:return Se(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function oA(r){if(r===void 0)return Or("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Ht.OK:return ee.OK;case Ht.CANCELLED:return ee.CANCELLED;case Ht.UNKNOWN:return ee.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return ee.INTERNAL;case Ht.UNAVAILABLE:return ee.UNAVAILABLE;case Ht.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ht.NOT_FOUND:return ee.NOT_FOUND;case Ht.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ht.ABORTED:return ee.ABORTED;case Ht.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ht.DATA_LOSS:return ee.DATA_LOSS;default:return Se(39323,{code:r})}}(Ye=Ht||(Ht={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function _I(){return new TextEncoder}const vI=new Cs([4294967295,4294967295],0);function R0(r){const e=_I().encode(r),n=new TT;return n.update(e),new Uint8Array(n.digest())}function N0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Cs([n,s],0),new Cs([o,c],0)]}class cg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new pc(`Invalid padding: ${n}`);if(s<0)throw new pc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new pc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new pc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Cs.fromNumber(s)));return o.compare(vI)===1&&(o=new Cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=R0(e),[s,o]=N0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new cg(c,o,n);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=R0(e),[s,o]=N0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.be(d)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nd{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Nd(xe.min(),o,new Tt(Fe),jr(),He())}}class Kc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Kc(s,n,He(),He(),He())}}class zh{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class lA{constructor(e,n){this.targetId=e,this.Ce=n}}class cA{constructor(e,n,s=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class C0{constructor(){this.ve=0,this.Fe=I0(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),n=He(),s=He();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Se(38017,{changeType:c})}})),new Kc(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=I0()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class EI{constructor(e){this.Ge=e,this.ze=new Map,this.je=jr(),this.He=wh(),this.Je=wh(),this.Ze=new Tt(Fe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Tp(c))if(s===0){const d=new Ee(c.path);this.et(n,d,_n.newNoDocument(d,xe.min()))}else et(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,p;try{d=Ms(s).toUint8Array()}catch(g){if(g instanceof MT)return Qo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new cg(d,o,c)}catch(g){return Qo(g instanceof pc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&Tp(p.target)){const g=new Ee(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,_n.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.Ke())}}));let s=He();this.Je.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new Nd(e,n,this.Ze,this.je,s);return this.je=jr(),this.He=wh(),this.Je=wh(),this.Ze=new Tt(Fe),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new C0,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new $t(Fe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new $t(Fe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new C0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wh(){return new Tt(Ee.comparator)}function I0(){return new Tt(Ee.comparator)}const bI={asc:"ASCENDING",desc:"DESCENDING"},TI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AI={and:"AND",or:"OR"};class wI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wp(r,e){return r.useProto3Json||bd(e)?e:{value:e}}function id(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function SI(r,e){return id(r,e.toTimestamp())}function nr(r){return et(!!r,49232),xe.fromTimestamp((function(n){const s=js(n);return new _t(s.seconds,s.nanos)})(r))}function ug(r,e){return Sp(r,e).canonicalString()}function Sp(r,e){const n=(function(o){return new ft(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function hA(r){const e=ft.fromString(r);return et(gA(e),10190,{key:e.toString()}),e}function xp(r,e){return ug(r.databaseId,e.path)}function Xm(r,e){const n=hA(e);if(n.get(1)!==r.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ee(fA(n))}function dA(r,e){return ug(r.databaseId,e)}function xI(r){const e=hA(r);return e.length===4?ft.emptyPath():fA(e)}function Rp(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function fA(r){return et(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function D0(r,e,n){return{name:xp(r,e),fields:n.value.mapValue.fields}}function RI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Se(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,b){return _.useProto3Json?(et(b===void 0||typeof b=="string",58123),fn.fromBase64String(b||"")):(et(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),fn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(_){const b=_.code===void 0?ee.UNKNOWN:oA(_.code);return new he(b,_.message||"")})(d);n=new cA(s,o,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Xm(r,s.document.name),c=nr(s.document.updateTime),d=s.document.createTime?nr(s.document.createTime):xe.min(),p=new Vn({mapValue:{fields:s.document.fields}}),g=_n.newFoundDocument(o,c,d,p),_=s.targetIds||[],b=s.removedTargetIds||[];n=new zh(_,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Xm(r,s.document),c=s.readTime?nr(s.readTime):xe.min(),d=_n.newNoDocument(o,c),p=s.removedTargetIds||[];n=new zh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Xm(r,s.document),c=s.removedTargetIds||[];n=new zh([],c,o,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new gI(o,c),p=s.targetId;n=new lA(p,d)}}return n}function NI(r,e){let n;if(e instanceof Gc)n={update:D0(r,e.key,e.value)};else if(e instanceof Rd)n={delete:xp(r,e.key)};else if(e instanceof Fs)n={update:D0(r,e.key,e.data),updateMask:PI(e.fieldMask)};else{if(!(e instanceof fI))return Se(16599,{dt:e.type});n={verify:xp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof jc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Mc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Vc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof nd)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Se(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:SI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Se(27497)})(r,e.precondition)),n}function CI(r,e){return r&&r.length>0?(et(e!==void 0,14353),r.map((n=>(function(o,c){let d=o.updateTime?nr(o.updateTime):nr(c);return d.isEqual(xe.min())&&(d=nr(c)),new uI(d,o.transformResults||[])})(n,e)))):[]}function II(r,e){return{documents:[dA(r,e.path)]}}function DI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=dA(r,o);const c=(function(_){if(_.length!==0)return pA(Ni.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((b=>(function(S){return{field:Po(S.field),direction:MI(S.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=wp(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function OI(r){let e=xI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){et(s===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(A){const S=mA(A);return S instanceof Ni&&HT(S)?S.getFilters():[S]})(n.where));let d=[];n.orderBy&&(d=(function(A){return A.map((S=>(function(F){return new Oc(Lo(F.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(S)))})(n.orderBy));let p=null;n.limit&&(p=(function(A){let S;return S=typeof A=="object"?A.value:A,bd(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(A){const S=!!A.before,V=A.values||[];return new ed(V,S)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const S=!A.before,V=A.values||[];return new ed(V,S)})(n.endAt)),Y2(e,o,d,c,p,"F",g,_)}function jI(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mA(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Lo(n.unaryFilter.field);return Gt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(n.unaryFilter.field);return Gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Lo(n.unaryFilter.field);return Gt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Lo(n.unaryFilter.field);return Gt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Gt.create(Lo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Ni.create(n.compositeFilter.filters.map((s=>mA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(r):Se(30097,{filter:r})}function MI(r){return bI[r]}function VI(r){return TI[r]}function kI(r){return AI[r]}function Po(r){return{fieldPath:r.canonicalString()}}function Lo(r){return hn.fromServerFormat(r.fieldPath)}function pA(r){return r instanceof Gt?(function(n){if(n.op==="=="){if(_0(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NAN"}};if(y0(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_0(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NAN"}};if(y0(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(n.field),op:VI(n.op),value:n.value}}})(r):r instanceof Ni?(function(n){const s=n.getFilters().map((o=>pA(o)));return s.length===1?s[0]:{compositeFilter:{op:kI(n.op),filters:s}}})(r):Se(54877,{filter:r})}function PI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function gA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function yA(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class Ss{constructor(e,n,s,o,c=xe.min(),d=xe.min(),p=fn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class LI{constructor(e){this.yt=e}}function UI(r){const e=OI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?td(e,e.limit,"L"):e}class zI{constructor(){this.Sn=new BI}addToCollectionParentIndex(e,n){return this.Sn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Os.min())}updateCollectionGroup(e,n,s){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class BI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new $t(ft.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new $t(ft.comparator)).toArray()}}const O0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_A=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(_A,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);class Wo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Wo(0)}static ar(){return new Wo(-1)}}const j0="LruGarbageCollector",qI=1048576;function M0([r,e],[n,s]){const o=Fe(r,n);return o===0?Fe(e,s):o}class FI{constructor(e){this.Pr=e,this.buffer=new $t(M0),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();M0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){de(j0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sl(n)?de(j0,"Ignoring IndexedDB error during garbage collection: ",n):await rl(n)}await this.Ar(3e5)}))}}class GI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(Ed.ce);const s=new FI(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(O0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O0):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,c,d,p,g,_;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,p=Date.now(),this.removeTargets(e,s,n)))).next((A=>(c=A,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(_=Date.now(),Vo()<=qe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${A} documents in `+(_-g)+`ms
Total Duration: ${_-b}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A}))))}}function KI(r,e){return new GI(r,e)}class QI{constructor(){this.changes=new La((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ie.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Tc(s.mutation,o,Qn.empty(),_t.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,He()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=He()){const o=Aa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=mc();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Aa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,He())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,s,o){let c=jr();const d=bc(),p=(function(){return bc()})();return n.forEach(((g,_)=>{const b=s.get(_.key);o.has(_.key)&&(b===void 0||b.mutation instanceof Fs)?c=c.insert(_.key,_):b!==void 0?(d.set(_.key,b.mutation.getFieldMask()),Tc(b.mutation,_,b.mutation.getFieldMask(),_t.now())):d.set(_.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((_,b)=>d.set(_,b))),n.forEach(((_,b)=>p.set(_,new YI(b,d.get(_)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=bc();let o=new Tt(((d,p)=>d-p)),c=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const _=n.get(g);if(_===null)return;let b=s.get(g)||Qn.empty();b=p.applyToLocalView(_,b),s.set(g,b);const A=(o.get(p.batchId)||He()).add(g);o=o.insert(p.batchId,A)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),_=g.key,b=g.value,A=ZT();b.forEach((S=>{if(!c.has(S)){const V=sA(n.get(S),s.get(S));V!==null&&A.set(S,V),c=c.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,A))}return ie.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return X2(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):ie.resolve(Aa());let p=Nc,g=c;return d.next((_=>ie.forEach(_,((b,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),c.get(b)?ie.resolve():this.remoteDocumentCache.getEntry(e,b).next((S=>{g=g.insert(b,S)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,g,_,He()))).next((b=>({batchId:p,changes:JT(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((s=>{let o=mc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=mc();return this.indexManager.getCollectionParents(e,c).next((p=>ie.forEach(p,(g=>{const _=(function(A,S){return new al(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next((b=>{b.forEach(((A,S)=>{d=d.insert(A,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((g,_)=>{const b=_.getKey();d.get(b)===null&&(d=d.insert(b,_n.newInvalidDocument(b)))}));let p=mc();return d.forEach(((g,_)=>{const b=c.get(g);b!==void 0&&Tc(b.mutation,_,Qn.empty(),_t.now()),wd(n,_)&&(p=p.insert(g,_))})),p}))}}class $I{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ie.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:nr(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:UI(o.bundledQuery),readTime:nr(o.readTime)}})(n)),ie.resolve()}}class WI{constructor(){this.overlays=new Tt(Ee.comparator),this.Lr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Aa();return ie.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.bt(e,n,c)})),ie.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(s)),ie.resolve()}getOverlaysForCollection(e,n,s){const o=Aa(),c=n.length+1,d=new Ee(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new Tt(((_,b)=>_-b));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let b=c.get(_.largestBatchId);b===null&&(b=Aa(),c=c.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const p=Aa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,b)=>p.set(_,b))),!(p.size()>=o)););return ie.resolve(p)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new pI(n,s));let c=this.Lr.get(n);c===void 0&&(c=He(),this.Lr.set(n,c)),this.Lr.set(n,c.add(s.key))}}class JI{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}class hg{constructor(){this.kr=new $t(rn.Kr),this.qr=new $t(rn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new rn(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new rn(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new Ee(new ft([])),s=new rn(n,e),o=new rn(n,e+1),c=[];return this.qr.forEachInRange([s,o],(d=>{this.Wr(d),c.push(d.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ee(new ft([])),s=new rn(n,e),o=new rn(n,e+1);let c=He();return this.qr.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new rn(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class rn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ee.comparator(e.key,n.key)||Fe(e.Hr,n.Hr)}static Ur(e,n){return Fe(e.Hr,n.Hr)||Ee.comparator(e.key,n.key)}}class ZI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new $t(rn.Kr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new mI(c,n,s,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new rn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(d)}lookupMutationBatch(e,n){return ie.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),c=o<0?0:o;return ie.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?tg:this.Yn-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new rn(n,0),o=new rn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([s,o],(d=>{const p=this.Zr(d.Hr);c.push(p)})),ie.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new $t(Fe);return n.forEach((o=>{const c=new rn(o,0),d=new rn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,d],(p=>{s=s.add(p.Hr)}))})),ie.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Ee.isDocumentKey(c)||(c=c.child(""));const d=new rn(new Ee(c),0);let p=new $t(Fe);return this.Jr.forEachWhile((g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(p=p.add(g.Hr)),!0)}),d),ie.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){et(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return ie.forEach(n.mutations,(o=>{const c=new rn(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new rn(n,0),o=this.Jr.firstAfterOrEqual(s);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class eD{constructor(e){this.ti=e,this.docs=(function(){return new Tt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ie.resolve(s?s.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(e,n){let s=jr();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():_n.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=jr();const d=n.path,p=new Ee(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:_,value:{document:b}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||S2(w2(b),s)<=0||(o.has(b.key)||wd(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return ie.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Se(9500)}ni(e,n){return ie.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new tD(this)}getSize(e){return ie.resolve(this.size)}}class tD extends QI{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),ie.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class nD{constructor(e){this.persistence=e,this.ri=new La((n=>rg(n)),sg),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.ii=0,this.si=new hg,this.targetCount=0,this.oi=Wo._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),ie.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Wo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.lr(n),ie.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.ri.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ie.waitFor(c).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return ie.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),ie.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ie.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return ie.resolve(s)}containsKey(e,n){return ie.resolve(this.si.containsKey(n))}}class vA{constructor(e,n){this._i={},this.overlays={},this.ai=new Ed(0),this.ui=!1,this.ui=!0,this.ci=new JI,this.referenceDelegate=e(this),this.li=new nD(this),this.indexManager=new zI,this.remoteDocumentCache=(function(o){return new eD(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new LI(n),this.Pi=new $I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new ZI(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new iD(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,n){return ie.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class iD extends R2{constructor(e){super(),this.currentSequenceNumber=e}}class dg{constructor(e){this.persistence=e,this.Ri=new hg,this.Ai=null}static Vi(e){return new dg(e)}get di(){if(this.Ai)return this.Ai;throw Se(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),ie.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.di,(s=>{const o=Ee.fromPath(s);return this.mi(e,o).next((c=>{c||n.removeEntry(o,xe.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class rd{constructor(e,n){this.persistence=e,this.fi=new La((s=>I2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=KI(this,n)}static Vi(e,n){return new rd(e,n)}Ti(){}Ii(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return ie.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((c=>c?ie.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(s++,c.removeEntry(d,xe.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ie.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ph(e.data.value)),n}wr(e,n,s){return ie.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=He(),o=He();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new fg(e,n.fromCache,s,o)}}class rD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sD{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Cx()?8:N2(vn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.gs(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ps(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new rD;return this.ys(e,n,d).next((p=>{if(c.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>c.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Vo()<=qe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ko(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ie.resolve()):(Vo()<=qe.DEBUG&&de("QueryEngine","Query:",ko(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Vo()<=qe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ko(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):ie.resolve())}gs(e,n){if(T0(n))return ie.resolve(null);let s=tr(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=td(n,null,"F"),s=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=He(...c);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const _=this.bs(n,p);return this.Ss(n,_,d,g.readTime)?this.gs(e,td(n,null,"F")):this.Ds(e,_,n,g)}))))})))))}ps(e,n,s,o){return T0(n)||o.isEqual(xe.min())?ie.resolve(null):this.fs.getDocuments(e,s).next((c=>{const d=this.bs(n,c);return this.Ss(n,d,s,o)?ie.resolve(null):(Vo()<=qe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ko(n)),this.Ds(e,d,n,A2(o,Nc)).next((p=>p)))}))}bs(e,n){let s=new $t($T(e));return n.forEach(((o,c)=>{wd(e,c)&&(s=s.add(c))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,n,s){return Vo()<=qe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ko(n)),this.fs.getDocumentsMatchingQuery(e,n,Os.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const mg="LocalStore",aD=3e8;class oD{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Tt(Fe),this.Fs=new La((c=>rg(c)),sg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function lD(r,e,n,s){return new oD(r,e,n,s)}async function EA(r,e){const n=Ne(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=He();for(const _ of o){d.push(_.batchId);for(const b of _.mutations)g=g.add(b.key)}for(const _ of c){p.push(_.batchId);for(const b of _.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(s,g).next((_=>({Ns:_,removedBatchIds:d,addedBatchIds:p})))}))}))}function cD(r,e){const n=Ne(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,_,b){const A=_.batch,S=A.keys();let V=ie.resolve();return S.forEach((F=>{V=V.next((()=>b.getEntry(g,F))).next((X=>{const G=_.docVersions.get(F);et(G!==null,48541),X.version.compareTo(G)<0&&(A.applyToRemoteDocument(X,_),X.isValidDocument()&&(X.setReadTime(_.commitVersion),b.addEntry(X)))}))})),V.next((()=>p.mutationQueue.removeMutationBatch(g,A)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=He();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(g=g.add(p.batch.mutations[_].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function bA(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function uD(r,e){const n=Ne(r),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((b,A)=>{const S=o.get(A);if(!S)return;p.push(n.li.removeMatchingKeys(c,b.removedDocuments,A).next((()=>n.li.addMatchingKeys(c,b.addedDocuments,A))));let V=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?V=V.withResumeToken(fn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,s)),o=o.insert(A,V),(function(X,G,re){return X.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=aD?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(S,V,b)&&p.push(n.li.updateTargetData(c,V))}));let g=jr(),_=He();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),p.push(hD(c,d,e.documentUpdates).next((b=>{g=b.Bs,_=b.Ls}))),!s.isEqual(xe.min())){const b=n.li.getLastRemoteSnapshotVersion(c).next((A=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(b)}return ie.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,_))).next((()=>g))})).then((c=>(n.vs=o,c)))}function hD(r,e,n){let s=He(),o=He();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=jr();return n.forEach(((p,g)=>{const _=c.get(p);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):de(mg,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function dD(r,e){const n=Ne(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=tg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function fD(r,e){const n=Ne(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((c=>c?(o=c,ie.resolve(o)):n.li.allocateTargetId(s).next((d=>(o=new Ss(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function Np(r,e,n){const s=Ne(r),o=s.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!sl(d))throw d;de(mg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function V0(r,e,n){const s=Ne(r);let o=xe.min(),c=He();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,b){const A=Ne(g),S=A.Fs.get(b);return S!==void 0?ie.resolve(A.vs.get(S)):A.li.getTargetData(_,b)})(s,d,tr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,n?o:xe.min(),n?c:He()))).next((p=>(mD(s,J2(e),p),{documents:p,ks:c})))))}function mD(r,e,n){let s=r.Ms.get(e)||xe.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Ms.set(e,s)}class k0{constructor(){this.activeTargetIds=rI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pD{constructor(){this.vo=new k0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new k0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gD{Mo(e){}shutdown(){}}const P0="ConnectivityMonitor";class L0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){de(P0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){de(P0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sh=null;function Cp(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}const $m="RestConnection",yD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _D{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Jh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,c){const d=Cp(),p=this.Qo(e,n.toUriEncodedString());de($m,`Sending RPC '${e}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:_}=new URL(p),b=zs(_);return this.zo(e,p,g,s,b).then((A=>(de($m,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw Qo($m,`RPC '${e}' ${d} failed with error: `,A,"url: ",p,"request:",s),A}))}jo(e,n,s,o,c,d){return this.Wo(e,n,s,o,c)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}Qo(e,n){const s=yD[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class vD{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const gn="WebChannelConnection",lc=(r,e,n)=>{r.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Fo extends _D{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Fo.c_){const e=xT();lc(e,ST.STAT_EVENT,(n=>{n.stat===yp.PROXY?de(gn,"STAT_EVENT: detected buffering proxy"):n.stat===yp.NOPROXY&&de(gn,"STAT_EVENT: detected no buffering proxy")})),Fo.c_=!0}}zo(e,n,s,o,c){const d=Cp();return new Promise(((p,g)=>{const _=new AT;_.setWithCredentials(!0),_.listenOnce(wT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case kh.NO_ERROR:const A=_.getResponseJson();de(gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),p(A);break;case kh.TIMEOUT:de(gn,`RPC '${e}' ${d} timed out`),g(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const S=_.getStatus();if(de(gn,`RPC '${e}' ${d} failed with status:`,S,"response text:",_.getResponseText()),S>0){let V=_.getResponseJson();Array.isArray(V)&&(V=V[0]);const F=V?.error;if(F&&F.status&&F.message){const X=(function(re){const ce=re.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ce)>=0?ce:ee.UNKNOWN})(F.status);g(new he(X,F.message))}else g(new he(ee.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new he(ee.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{de(gn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);de(gn,`RPC '${e}' ${d} sending request:`,o),_.send(n,"POST",b,s,15)}))}T_(e,n,s){const o=Cp(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const _=c.join("");de(gn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const b=d.createWebChannel(_,p);this.I_(b);let A=!1,S=!1;const V=new vD({Ho:F=>{S?de(gn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(A||(de(gn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),de(gn,`RPC '${e}' stream ${o} sending:`,F),b.send(F))},Jo:()=>b.close()});return lc(b,fc.EventType.OPEN,(()=>{S||(de(gn,`RPC '${e}' stream ${o} transport opened.`),V.i_())})),lc(b,fc.EventType.CLOSE,(()=>{S||(S=!0,de(gn,`RPC '${e}' stream ${o} transport closed`),V.o_(),this.E_(b))})),lc(b,fc.EventType.ERROR,(F=>{S||(S=!0,Qo(gn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),V.o_(new he(ee.UNAVAILABLE,"The operation could not be completed")))})),lc(b,fc.EventType.MESSAGE,(F=>{if(!S){const X=F.data[0];et(!!X,16349);const G=X,re=G?.error||G[0]?.error;if(re){de(gn,`RPC '${e}' stream ${o} received error:`,re);const ce=re.status;let oe=(function(ye){const N=Ht[ye];if(N!==void 0)return oA(N)})(ce),pe=re.message;oe===void 0&&(oe=ee.INTERNAL,pe="Unknown error status: "+ce+" with message "+re.message),S=!0,V.o_(new he(oe,pe)),b.close()}else de(gn,`RPC '${e}' stream ${o} received:`,X),V.__(X)}})),Fo.u_(),setTimeout((()=>{V.s_()}),0),V}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return RT()}}function ED(r){return new Fo(r)}function Wm(){return typeof document<"u"?document:null}function Cd(r){return new wI(r,!0)}Fo.c_=!1;class TA{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const U0="PersistentStream";class AA{constructor(e,n,s,o,c,d,p,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(U0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(de(U0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bD extends AA{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=RI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return xe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?xe.min():d.readTime?nr(d.readTime):xe.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=Rp(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=Tp(g)?{documents:II(c,g)}:{query:DI(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=uA(c,d.resumeToken);const _=wp(c,d.expectedCount);_!==null&&(p.expectedCount=_)}else if(d.snapshotVersion.compareTo(xe.min())>0){p.readTime=id(c,d.snapshotVersion.toTimestamp());const _=wp(c,d.expectedCount);_!==null&&(p.expectedCount=_)}return p})(this.serializer,e);const s=jI(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=Rp(this.serializer),n.removeTarget=e,this.K_(n)}}class TD extends AA{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=CI(e.writeResults,e.commitTime),s=nr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Rp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>NI(this.serializer,s)))};this.K_(n)}}class AD{}class wD extends AD{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,Sp(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ee.UNKNOWN,c.toString())}))}jo(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Sp(n,s),o,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(ee.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function SD(r,e,n,s){return new wD(r,e,n,s)}class xD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Or(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ja="RemoteStore";class RD{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((d=>{s.enqueueAndForget((async()=>{Ua(this)&&(de(ja,"Restarting streams for network reachability change."),await(async function(g){const _=Ne(g);_.Ea.add(4),await Qc(_),_.Va.set("Unknown"),_.Ea.delete(4),await Id(_)})(this))}))})),this.Va=new xD(s,o)}}async function Id(r){if(Ua(r))for(const e of r.Ra)await e(!0)}async function Qc(r){for(const e of r.Ra)await e(!1)}function wA(r,e){const n=Ne(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_g(n)?yg(n):ol(n).O_()&&gg(n,e))}function pg(r,e){const n=Ne(r),s=ol(n);n.Ia.delete(e),s.O_()&&SA(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ua(n)&&n.Va.set("Unknown"))}function gg(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(r).Z_(e)}function SA(r,e){r.da.$e(e),ol(r).X_(e)}function yg(r){r.da=new EI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ol(r).start(),r.Va.ua()}function _g(r){return Ua(r)&&!ol(r).x_()&&r.Ia.size>0}function Ua(r){return Ne(r).Ea.size===0}function xA(r){r.da=void 0}async function ND(r){r.Va.set("Online")}async function CD(r){r.Ia.forEach(((e,n)=>{gg(r,e)}))}async function ID(r,e){xA(r),_g(r)?(r.Va.ha(e),yg(r)):r.Va.set("Unknown")}async function DD(r,e,n){if(r.Va.set("Online"),e instanceof cA&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(r,e)}catch(s){de(ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await sd(r,s)}else if(e instanceof zh?r.da.Xe(e):e instanceof lA?r.da.st(e):r.da.tt(e),!n.isEqual(xe.min()))try{const s=await bA(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.da.Tt(d);return p.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.Ia.get(_);b&&c.Ia.set(_,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,_)=>{const b=c.Ia.get(g);if(!b)return;c.Ia.set(g,b.withResumeToken(fn.EMPTY_BYTE_STRING,b.snapshotVersion)),SA(c,g);const A=new Ss(b.target,g,_,b.sequenceNumber);gg(c,A)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){de(ja,"Failed to raise snapshot:",s),await sd(r,s)}}async function sd(r,e,n){if(!sl(e))throw e;r.Ea.add(1),await Qc(r),r.Va.set("Offline"),n||(n=()=>bA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{de(ja,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Id(r)}))}function RA(r,e){return e().catch((n=>sd(r,n,e)))}async function Dd(r){const e=Ne(r),n=ks(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:tg;for(;OD(e);)try{const o=await dD(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,jD(e,o)}catch(o){await sd(e,o)}NA(e)&&CA(e)}function OD(r){return Ua(r)&&r.Ta.length<10}function jD(r,e){r.Ta.push(e);const n=ks(r);n.O_()&&n.Y_&&n.ea(e.mutations)}function NA(r){return Ua(r)&&!ks(r).x_()&&r.Ta.length>0}function CA(r){ks(r).start()}async function MD(r){ks(r).ra()}async function VD(r){const e=ks(r);for(const n of r.Ta)e.ea(n.mutations)}async function kD(r,e,n){const s=r.Ta.shift(),o=lg.from(s,e,n);await RA(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Dd(r)}async function PD(r,e){e&&ks(r).Y_&&await(async function(s,o){if((function(d){return yI(d)&&d!==ee.ABORTED})(o.code)){const c=s.Ta.shift();ks(s).B_(),await RA(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Dd(s)}})(r,e),NA(r)&&CA(r)}async function z0(r,e){const n=Ne(r);n.asyncQueue.verifyOperationInProgress(),de(ja,"RemoteStore received new credentials");const s=Ua(n);n.Ea.add(3),await Qc(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Id(n)}async function LD(r,e){const n=Ne(r);e?(n.Ea.delete(2),await Id(n)):e||(n.Ea.add(2),await Qc(n),n.Va.set("Unknown"))}function ol(r){return r.ma||(r.ma=(function(n,s,o){const c=Ne(n);return c.sa(),new bD(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Zo:ND.bind(null,r),Yo:CD.bind(null,r),t_:ID.bind(null,r),J_:DD.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),_g(r)?yg(r):r.Va.set("Unknown")):(await r.ma.stop(),xA(r))}))),r.ma}function ks(r){return r.fa||(r.fa=(function(n,s,o){const c=Ne(n);return c.sa(),new TD(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:MD.bind(null,r),t_:PD.bind(null,r),ta:VD.bind(null,r),na:kD.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Dd(r)):(await r.fa.stop(),r.Ta.length>0&&(de(ja,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class vg{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,p=new vg(e,n,d,o,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(r,e){if(Or("AsyncQueue",`${e}: ${r}`),sl(r))return new he(ee.UNAVAILABLE,`${e}: ${r}`);throw r}class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=mc(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ho;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class B0{constructor(){this.ga=new Tt(Ee.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Jo{constructor(e,n,s,o,c,d,p,g,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Jo(e,n,Ho.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class UD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class zD{constructor(){this.queries=q0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ne(n),c=o.queries;o.queries=q0(),c.forEach(((d,p)=>{for(const g of p.ba)g.onError(s)}))})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function q0(){return new La((r=>XT(r)),Ad)}async function IA(r,e){const n=Ne(r);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.Da()&&(s=2):(c=new UD,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=Eg(d,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&bg(n)}async function DA(r,e){const n=Ne(r),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.ba.indexOf(e);d>=0&&(c.ba.splice(d,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function BD(r,e){const n=Ne(r);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const p of d.ba)p.Fa(o)&&(s=!0);d.wa=o}}s&&bg(n)}function qD(r,e,n){const s=Ne(r),o=s.queries.get(e);if(o)for(const c of o.ba)c.onError(n);s.queries.delete(e)}function bg(r){r.Ca.forEach((e=>{e.next()}))}var Ip,F0;(F0=Ip||(Ip={})).Ma="default",F0.Cache="cache";class OA{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Jo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ip.Cache}}class jA{constructor(e){this.key=e}}class MA{constructor(e){this.key=e}}class FD{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=He(),this.mutatedKeys=He(),this.eu=$T(e),this.tu=new Ho(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new B0,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,A)=>{const S=o.get(b),V=wd(this.query,A)?A:null,F=!!S&&this.mutatedKeys.has(S.key),X=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let G=!1;S&&V?S.data.isEqual(V.data)?F!==X&&(s.track({type:3,doc:V}),G=!0):this.su(S,V)||(s.track({type:2,doc:V}),G=!0,(g&&this.eu(V,g)>0||_&&this.eu(V,_)<0)&&(p=!0)):!S&&V?(s.track({type:0,doc:V}),G=!0):S&&!V&&(s.track({type:1,doc:S}),G=!0,(g||_)&&(p=!0)),G&&(V?(d=d.add(V),c=X?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),s.track({type:1,doc:b})}return{tu:d,iu:s,Ss:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,A)=>(function(V,F){const X=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:G})}};return X(V)-X(F)})(b.type,A.type)||this.eu(b.doc,A.doc))),this.ou(s),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,_=g!==this.Xa;return this.Xa=g,d.length!==0||_?{snapshot:new Jo(this.query,e.tu,c,d,e.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new B0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=He(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new MA(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new jA(s))})),n}cu(e){this.Za=e.ks,this.Ya=He();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Tg="SyncEngine";class HD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class GD{constructor(e){this.key=e,this.hu=!1}}class KD{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new La((p=>XT(p)),Ad),this.Iu=new Map,this.Eu=new Set,this.Ru=new Tt(Ee.comparator),this.Au=new Map,this.Vu=new hg,this.du={},this.mu=new Map,this.fu=Wo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QD(r,e,n=!0){const s=zA(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await VA(s,e,n,!0),o}async function YD(r,e){const n=zA(r);await VA(n,e,!0,!1)}async function VA(r,e,n,s){const o=await fD(r.localStore,tr(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await XD(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&wA(r.remoteStore,o),p}async function XD(r,e,n,s,o){r.pu=(A,S,V)=>(async function(X,G,re,ce){let oe=G.view.ru(re);oe.Ss&&(oe=await V0(X.localStore,G.query,!1).then((({documents:N})=>G.view.ru(N,oe))));const pe=ce&&ce.targetChanges.get(G.targetId),Ce=ce&&ce.targetMismatches.get(G.targetId)!=null,ye=G.view.applyChanges(oe,X.isPrimaryClient,pe,Ce);return G0(X,G.targetId,ye.au),ye.snapshot})(r,A,S,V);const c=await V0(r.localStore,e,!0),d=new FD(e,c.ks),p=d.ru(c.documents),g=Kc.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),_=d.applyChanges(p,r.isPrimaryClient,g);G0(r,n,_.au);const b=new HD(e,n,d);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),_.snapshot}async function $D(r,e,n){const s=Ne(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!Ad(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Np(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&pg(s.remoteStore,o.targetId),Dp(s,o.targetId)})).catch(rl)):(Dp(s,o.targetId),await Np(s.localStore,o.targetId,!0))}async function WD(r,e){const n=Ne(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),pg(n.remoteStore,s.targetId))}async function JD(r,e,n){const s=sO(r);try{const o=await(function(d,p){const g=Ne(d),_=_t.now(),b=p.reduce(((V,F)=>V.add(F.key)),He());let A,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let F=jr(),X=He();return g.xs.getEntries(V,b).next((G=>{F=G,F.forEach(((re,ce)=>{ce.isValidDocument()||(X=X.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(V,F))).next((G=>{A=G;const re=[];for(const ce of p){const oe=dI(ce,A.get(ce.key).overlayedDocument);oe!=null&&re.push(new Fs(ce.key,oe,BT(oe.value.mapValue),wn.exists(!0)))}return g.mutationQueue.addMutationBatch(V,_,re,p)})).next((G=>{S=G;const re=G.applyToLocalDocumentSet(A,X);return g.documentOverlayCache.saveOverlays(V,G.batchId,re)}))})).then((()=>({batchId:S.batchId,changes:JT(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let _=d.du[d.currentUser.toKey()];_||(_=new Tt(Fe)),_=_.insert(p,g),d.du[d.currentUser.toKey()]=_})(s,o.batchId,n),await Yc(s,o.changes),await Dd(s.remoteStore)}catch(o){const c=Eg(o,"Failed to persist write");n.reject(c)}}async function kA(r,e){const n=Ne(r);try{const s=await uD(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?et(d.hu,14607):o.removedDocuments.size>0&&(et(d.hu,42227),d.hu=!1))})),await Yc(n,s,e)}catch(s){await rl(s)}}function H0(r,e,n){const s=Ne(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Ne(d);g.onlineState=p;let _=!1;g.queries.forEach(((b,A)=>{for(const S of A.ba)S.va(p)&&(_=!0)})),_&&bg(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ZD(r,e,n){const s=Ne(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new Tt(Ee.comparator);d=d.insert(c,_n.newNoDocument(c,xe.min()));const p=He().add(c),g=new Nd(xe.min(),new Map,new Tt(Fe),d,p);await kA(s,g),s.Ru=s.Ru.remove(c),s.Au.delete(e),Ag(s)}else await Np(s.localStore,e,!1).then((()=>Dp(s,e,n))).catch(rl)}async function eO(r,e){const n=Ne(r),s=e.batch.batchId;try{const o=await cD(n.localStore,e);LA(n,s,null),PA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Yc(n,o)}catch(o){await rl(o)}}async function tO(r,e,n){const s=Ne(r);try{const o=await(function(d,p){const g=Ne(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let b;return g.mutationQueue.lookupMutationBatch(_,p).next((A=>(et(A!==null,37113),b=A.keys(),g.mutationQueue.removeMutationBatch(_,A)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b))).next((()=>g.localDocuments.getDocuments(_,b)))}))})(s.localStore,e);LA(s,e,n),PA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Yc(s,o)}catch(o){await rl(o)}}function PA(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function LA(r,e,n){const s=Ne(r);let o=s.du[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Dp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||UA(r,s)}))}function UA(r,e){r.Eu.delete(e.path.canonicalString());const n=r.Ru.get(e);n!==null&&(pg(r.remoteStore,n),r.Ru=r.Ru.remove(e),r.Au.delete(n),Ag(r))}function G0(r,e,n){for(const s of n)s instanceof jA?(r.Vu.addReference(s.key,e),nO(r,s)):s instanceof MA?(de(Tg,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||UA(r,s.key)):Se(19791,{wu:s})}function nO(r,e){const n=e.key,s=n.path.canonicalString();r.Ru.get(n)||r.Eu.has(s)||(de(Tg,"New document in limbo: "+n),r.Eu.add(s),Ag(r))}function Ag(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Ee(ft.fromString(e)),s=r.fu.next();r.Au.set(s,new GD(n)),r.Ru=r.Ru.insert(n,s),wA(r.remoteStore,new Ss(tr(ag(n.path)),s,"TargetPurposeLimboResolution",Ed.ce))}}async function Yc(r,e,n){const s=Ne(r),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,e,n).then((_=>{if((_||n)&&s.isPrimaryClient){const b=_?!_.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(_){o.push(_);const b=fg.Es(g.targetId,_);c.push(b)}})))})),await Promise.all(d),s.Pu.J_(o),await(async function(g,_){const b=Ne(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>ie.forEach(_,(S=>ie.forEach(S.Ts,(V=>b.persistence.referenceDelegate.addReference(A,S.targetId,V))).next((()=>ie.forEach(S.Is,(V=>b.persistence.referenceDelegate.removeReference(A,S.targetId,V)))))))))}catch(A){if(!sl(A))throw A;de(mg,"Failed to update sequence numbers: "+A)}for(const A of _){const S=A.targetId;if(!A.fromCache){const V=b.vs.get(S),F=V.snapshotVersion,X=V.withLastLimboFreeSnapshotVersion(F);b.vs=b.vs.insert(S,X)}}})(s.localStore,c))}async function iO(r,e){const n=Ne(r);if(!n.currentUser.isEqual(e)){de(Tg,"User change. New user:",e.toKey());const s=await EA(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new he(ee.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Yc(n,s.Ns)}}function rO(r,e){const n=Ne(r),s=n.Au.get(e);if(s&&s.hu)return He().add(s.key);{let o=He();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function zA(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=kA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZD.bind(null,e),e.Pu.J_=BD.bind(null,e.eventManager),e.Pu.yu=qD.bind(null,e.eventManager),e}function sO(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tO.bind(null,e),e}class ad{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lD(this.persistence,new sD,e.initialUser,this.serializer)}Cu(e){return new vA(dg.Vi,this.serializer)}Du(e){return new pD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ad.provider={build:()=>new ad};class aO extends ad{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){et(this.persistence.referenceDelegate instanceof rd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new HI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new vA((s=>rd.Vi(s,n)),this.serializer)}}class Op{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>H0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iO.bind(null,this.syncEngine),await LD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zD})()}createDatastore(e){const n=Cd(e.databaseInfo.databaseId),s=ED(e.databaseInfo);return SD(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,p){return new RD(s,o,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>H0(this.syncEngine,n,0)),(function(){return L0.v()?new L0:new gD})())}createSyncEngine(e,n){return(function(o,c,d,p,g,_,b){const A=new KD(o,c,d,p,g,_);return b&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ne(n);de(ja,"RemoteStore shutting down."),s.Ea.add(5),await Qc(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Op.provider={build:()=>new Op};class BA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ps="FirestoreClient";class oO{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{de(Ps,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(de(Ps,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Eg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Jm(r,e){r.asyncQueue.verifyOperationInProgress(),de(Ps,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await EA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function K0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await lO(r);de(Ps,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>z0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>z0(e.remoteStore,o))),r._onlineComponents=e}async function lO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de(Ps,"Using user provided OfflineComponentProvider");try{await Jm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await Jm(r,new ad)}}else de(Ps,"Using default OfflineComponentProvider"),await Jm(r,new aO(void 0));return r._offlineComponents}async function qA(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de(Ps,"Using user provided OnlineComponentProvider"),await K0(r,r._uninitializedComponentsProvider._online)):(de(Ps,"Using default OnlineComponentProvider"),await K0(r,new Op))),r._onlineComponents}function cO(r){return qA(r).then((e=>e.syncEngine))}async function FA(r){const e=await qA(r),n=e.eventManager;return n.onListen=QD.bind(null,e.syncEngine),n.onUnlisten=$D.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WD.bind(null,e.syncEngine),n}function uO(r,e,n={}){const s=new Cr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,_){const b=new BA({next:S=>{b.Nu(),d.enqueueAndForget((()=>DA(c,A)));const V=S.docs.has(p);!V&&S.fromCache?_.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&g&&g.source==="server"?_.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new OA(ag(p.path),b,{includeMetadataChanges:!0,Ka:!0});return IA(c,A)})(await FA(r),r.asyncQueue,e,n,s))),s.promise}function hO(r,e,n={}){const s=new Cr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,_){const b=new BA({next:S=>{b.Nu(),d.enqueueAndForget((()=>DA(c,A))),S.fromCache&&g.source==="server"?_.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new OA(p,b,{includeMetadataChanges:!0,Ka:!0});return IA(c,A)})(await FA(r),r.asyncQueue,e,n,s))),s.promise}function dO(r,e){const n=new Cr;return r.asyncQueue.enqueueAndForget((async()=>JD(await cO(r),e,n))),n.promise}function HA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const fO="ComponentProvider",Q0=new Map;function mO(r,e,n,s,o){return new j2(r,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,HA(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const GA="firestore.googleapis.com",Y0=!0;class X0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GA,this.ssl=Y0}else this.host=e.host,this.ssl=e.ssl??Y0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_A;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qI)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new h2;switch(s.type){case"firstParty":return new p2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Q0.get(n);s&&(de(fO,"Removing Datastore"),Q0.delete(n),s.terminate())})(this),Promise.resolve()}}function pO(r,e,n,s={}){r=hi(r,Od);const o=zs(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;o&&(zp(`https://${p}`),Bp("Firestore",!0)),c.host!==GA&&c.host!==p&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:s};if(!Na(g,d)&&(r._setSettings(g),s.mockUserToken)){let _,b;if(typeof s.mockUserToken=="string")_=s.mockUserToken,b=yn.MOCK_USER;else{_=kb(s.mockUserToken,r._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new yn(A)}r._authCredentials=new d2(new CT(_,b))}}class Hs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Hs(this.firestore,e,this._query)}}class Mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Hc(n,Mt._jsonSchema))return new Mt(e,s||null,new Ee(ft.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Kt("string",Mt._jsonSchemaVersion),referencePath:Kt("string")};class Is extends Hs{constructor(e,n,s){super(e,n,ag(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Ee(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function Sa(r,e,...n){if(r=mt(r),IT("collection","path",e),r instanceof Od){const s=ft.fromString(e,...n);return l0(s),new Is(r,null,s)}{if(!(r instanceof Mt||r instanceof Is))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...n));return l0(s),new Is(r.firestore,null,s)}}function dn(r,e,...n){if(r=mt(r),arguments.length===1&&(e=eg.newId()),IT("doc","path",e),r instanceof Od){const s=ft.fromString(e,...n);return o0(s),new Mt(r,null,new Ee(s))}{if(!(r instanceof Mt||r instanceof Is))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ft.fromString(e,...n));return o0(s),new Mt(r.firestore,r instanceof Is?r.converter:null,new Ee(s))}}const $0="AsyncQueue";class W0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TA(this,"async_queue_retry"),this._c=()=>{const s=Wm();s&&de($0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Wm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Cr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;de($0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Or("INTERNAL UNHANDLED ERROR: ",J0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=vg.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:J0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function J0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Gs extends Od{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new W0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W0(e),this._firestoreClient=void 0,await e}}}function gO(r,e){const n=typeof r=="object"?r:Hp(),s=typeof r=="string"?r:Jh,o=pd(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=jb("firestore");c&&pO(o,...c)}return o}function jd(r){if(r._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yO(r),r._firestoreClient}function yO(r){const e=r._freezeSettings(),n=mO(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new oO(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ui(fn.fromBase64String(e))}catch(n){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ui(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,ui._jsonSchema))return ui.fromBase64String(e.bytes)}}ui._jsonSchemaVersion="firestore/bytes/1.0",ui._jsonSchema={type:Kt("string",ui._jsonSchemaVersion),bytes:Kt("string")};class Md{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vd{constructor(e){this._methodName=e}}class ir{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ir._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,ir._jsonSchema))return new ir(e.latitude,e.longitude)}}ir._jsonSchemaVersion="firestore/geoPoint/1.0",ir._jsonSchema={type:Kt("string",ir._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};class xi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new xi(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xi._jsonSchemaVersion="firestore/vectorValue/1.0",xi._jsonSchema={type:Kt("string",xi._jsonSchemaVersion),vectorValues:Kt("object")};const _O=/^__.*__$/;class vO{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gc(e,this.data,n,this.fieldTransforms)}}class KA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function QA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{dataSource:r})}}class wg{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return od(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(QA(this.dataSource)&&_O.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class EO{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Cd(e)}createContext(e,n,s,o=!1){return new wg({dataSource:e,methodName:n,targetDoc:s,path:hn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xc(r){const e=r._freezeSettings(),n=Cd(r._databaseId);return new EO(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Sg(r,e,n,s,o,c={}){const d=r.createContext(c.merge||c.mergeFields?2:0,e,n,o);Rg("Data must be an object, but it was:",d,s);const p=$A(s,d);let g,_;if(c.merge)g=new Qn(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const A of c.mergeFields){const S=Ma(e,A,n);if(!d.contains(S))throw new he(ee.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ZA(b,S)||b.push(S)}g=new Qn(b),_=d.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,_=d.fieldTransforms;return new vO(new Vn(p),g,_)}class kd extends Vd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}class xg extends Vd{_toFieldTransform(e){return new lI(e.path,new jc)}isEqual(e){return e instanceof xg}}function YA(r,e,n,s){const o=r.createContext(1,e,n);Rg("Data must be an object, but it was:",o,s);const c=[],d=Vn.empty();qs(s,((g,_)=>{const b=JA(e,g,n);_=mt(_);const A=o.childContextForFieldPath(b);if(_ instanceof kd)c.push(b);else{const S=$c(_,A);S!=null&&(c.push(b),d.set(b,S))}}));const p=new Qn(c);return new KA(d,p,o.fieldTransforms)}function XA(r,e,n,s,o,c){const d=r.createContext(1,e,n),p=[Ma(e,s,n)],g=[o];if(c.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)p.push(Ma(e,c[S])),g.push(c[S+1]);const _=[],b=Vn.empty();for(let S=p.length-1;S>=0;--S)if(!ZA(_,p[S])){const V=p[S];let F=g[S];F=mt(F);const X=d.childContextForFieldPath(V);if(F instanceof kd)_.push(V);else{const G=$c(F,X);G!=null&&(_.push(V),b.set(V,G))}}const A=new Qn(_);return new KA(b,A,d.fieldTransforms)}function bO(r,e,n,s=!1){return $c(n,r.createContext(s?4:3,e))}function $c(r,e){if(WA(r=mt(r)))return Rg("Unsupported field value:",e,r),$A(r,e);if(r instanceof Vd)return(function(s,o){if(!QA(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const p of s){let g=$c(p,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,o){if((s=mt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=_t.fromDate(s);return{timestampValue:id(o.serializer,c)}}if(s instanceof _t){const c=new _t(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:id(o.serializer,c)}}if(s instanceof ir)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ui)return{bytesValue:uA(o.serializer,s._byteString)};if(s instanceof Mt){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ug(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof xi)return(function(d,p){const g=d instanceof xi?d.toArray():d;return{mapValue:{fields:{[UT]:{stringValue:zT},[Zh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return og(p.serializer,b)}))}}}}}})(s,o);if(yA(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${vd(s)}`)})(r,e)}function $A(r,e){const n={};return jT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(r,((s,o)=>{const c=$c(o,e.childContextForField(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function WA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof _t||r instanceof ir||r instanceof ui||r instanceof Mt||r instanceof Vd||r instanceof xi||yA(r))}function Rg(r,e,n){if(!WA(n)||!DT(n)){const s=vd(n);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function Ma(r,e,n){if((e=mt(e))instanceof Md)return e._internalPath;if(typeof e=="string")return JA(r,e);throw od("Field path arguments must be of type string or ",r,!1,void 0,n)}const TO=new RegExp("[~\\*/\\[\\]]");function JA(r,e,n){if(e.search(TO)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Md(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function od(r,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new he(ee.INVALID_ARGUMENT,p+r+g)}function ZA(r,e){return r.some((n=>n.isEqual(e)))}class AO{convertValue(e,n="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return qs(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[Zh].arrayValue?.values?.map((s=>jt(s.doubleValue)));return new xi(n)}convertGeoPoint(e){return new ir(jt(e.latitude),jt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Td(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Cc(e));default:return null}}convertTimestamp(e){const n=js(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ft.fromString(e);et(gA(s),9688,{name:e});const o=new Ic(s.get(1),s.get(3)),c=new Ee(s.popFirst(5));return o.isEqual(n)||Or(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class ew extends AO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ui(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function An(){return new xg("serverTimestamp")}const Z0="@firebase/firestore",eb="4.10.0";class tw{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Ma("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wO extends tw{data(){return super.data()}}function SO(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ng{}class Cg extends Ng{}function ld(r,e,...n){let s=[];e instanceof Ng&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof Ig)).length,p=c.filter((g=>g instanceof Pd)).length;if(d>1||d>0&&p>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Pd extends Cg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Pd(e,n,s)}_apply(e){const n=this._parse(e);return nw(e._query,n),new Hs(e.firestore,e.converter,Ap(e._query,n))}_parse(e){const n=Xc(e.firestore);return(function(c,d,p,g,_,b,A){let S;if(_.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){nb(A,b);const F=[];for(const X of A)F.push(tb(g,c,X));S={arrayValue:{values:F}}}else S=tb(g,c,A)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||nb(A,b),S=bO(p,d,A,b==="in"||b==="not-in");return Gt.create(_,b,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ts(r,e,n){const s=e,o=Ma("where",r);return Pd._create(o,s,n)}class Ig extends Ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ig(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const p=c.getFlattenedFilters();for(const g of p)nw(d,g),d=Ap(d,g)})(e._query,n),new Hs(e.firestore,e.converter,Ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dg extends Cg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(c,d)})(e._query,this._field,this._direction);return new Hs(e.firestore,e.converter,W2(e._query,n))}}function cd(r,e="asc"){const n=e,s=Ma("orderBy",r);return Dg._create(s,n)}class Og extends Cg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Og(e,n,s)}_apply(e){return new Hs(e.firestore,e.converter,td(e._query,this._limit,this._limitType))}}function xO(r){return T2("limit",r),Og._create("limit",r,"F")}function tb(r,e,n){if(typeof(n=mt(n))=="string"){if(n==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YT(e)&&n.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ft.fromString(n));if(!Ee.isDocumentKey(s))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return g0(r,new Ee(s))}if(n instanceof Mt)return g0(r,n._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vd(n)}.`)}function nb(r,e){if(!Array.isArray(r)||r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nw(r,e){const n=(function(o,c){for(const d of o)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function jg(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class gc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends tw{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ma("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:Kt("string",xa._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Bh extends xa{data(e={}){return super.data(e)}}class Go{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new gc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Bh(this._firestore,this._userDataWriter,s.key,s,new gc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new Bh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new gc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Bh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new gc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,b=-1;return p.type!==0&&(_=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:RO(p.type),doc:g,oldIndex:_,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:Kt("string",Go._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class NO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xc(e)}set(e,n,s){this._verifyNotCommitted();const o=Zm(e,this._firestore),c=jg(o.converter,n,s),d=Sg(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,s);return this._mutations.push(d.toMutation(o._key,wn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const c=Zm(e,this._firestore);let d;return d=typeof(n=mt(n))=="string"||n instanceof Md?XA(this._dataReader,"WriteBatch.update",c._key,n,s,o):YA(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zm(e,this._firestore);return this._mutations=this._mutations.concat(new Rd(n._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zm(r,e){if((r=mt(r)).firestore!==e)throw new he(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function kc(r){r=hi(r,Mt);const e=hi(r.firestore,Gs),n=jd(e);return uO(n,r._key).then((s=>IO(e,r,s)))}function ud(r){r=hi(r,Hs);const e=hi(r.firestore,Gs),n=jd(e),s=new ew(e);return SO(r._query),hO(n,r._query).then((o=>new Go(e,s,r,o)))}function CO(r,e,n){r=hi(r,Mt);const s=hi(r.firestore,Gs),o=jg(r.converter,e,n),c=Xc(s);return Wc(s,[Sg(c,"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,wn.none())])}function Pc(r,e,n,...s){r=hi(r,Mt);const o=hi(r.firestore,Gs),c=Xc(o);let d;return d=typeof(e=mt(e))=="string"||e instanceof Md?XA(c,"updateDoc",r._key,e,n,s):YA(c,"updateDoc",r._key,e),Wc(o,[d.toMutation(r._key,wn.exists(!0))])}function Mg(r){return Wc(hi(r.firestore,Gs),[new Rd(r._key,wn.none())])}function Vg(r,e){const n=hi(r.firestore,Gs),s=dn(r),o=jg(r.converter,e),c=Xc(r.firestore);return Wc(n,[Sg(c,"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,wn.exists(!1))]).then((()=>s))}function Wc(r,e){const n=jd(r);return dO(n,e)}function IO(r,e,n){const s=n.docs.get(e._key),o=new ew(r);return new xa(r,o,e._key,s,new gc(n.hasPendingWrites,n.fromCache),e.converter)}function hd(r){return r=hi(r,Gs),jd(r),new NO(r,(e=>Wc(r,e)))}(function(e,n=!0){u2(ka),Ca(new Ds("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new Gs(new f2(s.getProvider("auth-internal")),new g2(d,s.getProvider("app-check-internal")),M2(d,o),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ji(Z0,eb,e),Ji(Z0,eb,"esm2020")})();var DO="firebase",OO="12.8.0";Ji(DO,OO,"app");const iw="firebasestorage.googleapis.com",rw="storageBucket",jO=120*1e3,MO=600*1e3;class Nt extends sr{constructor(e,n,s=0){super(ep(e),`Firebase Storage: ${n} (${ep(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ep(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function ep(r){return"storage/"+r}function kg(){const r="An unknown error occurred, please check the error payload for server response.";return new Nt(Rt.UNKNOWN,r)}function VO(r){return new Nt(Rt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function kO(r){return new Nt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PO(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(Rt.UNAUTHENTICATED,r)}function LO(){return new Nt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UO(r){return new Nt(Rt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function zO(){return new Nt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BO(){return new Nt(Rt.CANCELED,"User canceled the upload/download.")}function qO(r){return new Nt(Rt.INVALID_URL,"Invalid URL '"+r+"'.")}function FO(r){return new Nt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function HO(){return new Nt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rw+"' property when initializing the app?")}function GO(){return new Nt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KO(){return new Nt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QO(r){return new Nt(Rt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jp(r){return new Nt(Rt.INVALID_ARGUMENT,r)}function sw(){return new Nt(Rt.APP_DELETED,"The Firebase app was deleted.")}function YO(r){return new Nt(Rt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ac(r,e){return new Nt(Rt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function cc(r){throw new Nt(Rt.INTERNAL_ERROR,"Internal error: "+r)}class Yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Yn.makeFromUrl(e,n)}catch{return new Yn(e,"")}if(s.path==="")return s;throw FO(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(pe){pe.path.charAt(pe.path.length-1)==="/"&&(pe.path_=pe.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function _(pe){pe.path_=decodeURIComponent(pe.path)}const b="v[A-Za-z0-9_]+",A=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",V=new RegExp(`^https?://${A}/${b}/b/${o}/o${S}`,"i"),F={bucket:1,path:3},X=n===iw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,G="([^?#]*)",re=new RegExp(`^https?://${X}/${o}/${G}`,"i"),oe=[{regex:p,indices:g,postModify:c},{regex:V,indices:F,postModify:_},{regex:re,indices:{bucket:1,path:2},postModify:_}];for(let pe=0;pe<oe.length;pe++){const Ce=oe[pe],ye=Ce.regex.exec(e);if(ye){const N=ye[Ce.indices.bucket];let x=ye[Ce.indices.path];x||(x=""),s=new Yn(N,x),Ce.postModify(s);break}}if(s==null)throw qO(e);return s}}class XO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function $O(r,e,n){let s=1,o=null,c=null,d=!1,p=0;function g(){return p===2}let _=!1;function b(...G){_||(_=!0,e.apply(null,G))}function A(G){o=setTimeout(()=>{o=null,r(V,g())},G)}function S(){c&&clearTimeout(c)}function V(G,...re){if(_){S();return}if(G){S(),b.call(null,G,...re);return}if(g()||d){S(),b.call(null,G,...re);return}s<64&&(s*=2);let oe;p===1?(p=2,oe=0):oe=(s+Math.random())*1e3,A(oe)}let F=!1;function X(G){F||(F=!0,S(),!_&&(o!==null?(G||(p=2),clearTimeout(o),A(0)):G||(p=1)))}return A(0),c=setTimeout(()=>{d=!0,X(!0)},n),X}function WO(r){r(!1)}function JO(r){return r!==void 0}function ZO(r){return typeof r=="object"&&!Array.isArray(r)}function Pg(r){return typeof r=="string"||r instanceof String}function ib(r){return Lg()&&r instanceof Blob}function Lg(){return typeof Blob<"u"}function rb(r,e,n,s){if(s<e)throw jp(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw jp(`Invalid value for '${r}'. Expected ${n} or less.`)}function Ld(r,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${r}`}function aw(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Ra;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ra||(Ra={}));function ej(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return n||o||c}class tj{constructor(e,n,s,o,c,d,p,g,_,b,A,S=!0,V=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=A,this.retry=S,this.isUsingEmulator=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,X)=>{this.resolve_=F,this.reject_=X,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new xh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=p=>{const g=p.loaded,_=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const p=c.getErrorCode()===Ra.NO_ERROR,g=c.getStatus();if(!p||ej(g,this.additionalRetryCodes_)&&this.retry){const b=c.getErrorCode()===Ra.ABORT;s(!1,new xh(!1,null,b));return}const _=this.successCodes_.indexOf(g)!==-1;s(!0,new xh(_,c))})},n=(s,o)=>{const c=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());JO(g)?c(g):c()}catch(g){d(g)}else if(p!==null){const g=kg();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?sw():BO();d(g)}else{const g=zO();d(g)}};this.canceled_?n(!1,new xh(!1,null,!0)):this.backoffId_=$O(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function nj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function ij(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rj(r,e){e&&(r["X-Firebase-GMPID"]=e)}function sj(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function aj(r,e,n,s,o,c,d=!0,p=!1){const g=aw(r.urlParams),_=r.url+g,b=Object.assign({},r.headers);return rj(b,e),nj(b,n),ij(b,c),sj(b,s),new tj(_,r.method,b,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,d,p)}function oj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lj(...r){const e=oj();if(e!==void 0){const n=new e;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(Lg())return new Blob(r);throw new Nt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cj(r,e,n){return r.webkitSlice?r.webkitSlice(e,n):r.mozSlice?r.mozSlice(e,n):r.slice?r.slice(e,n):null}function uj(r){if(typeof atob>"u")throw QO("base-64");return atob(r)}const Wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tp{constructor(e,n){this.data=e,this.contentType=n||null}}function hj(r,e){switch(r){case Wi.RAW:return new tp(ow(e));case Wi.BASE64:case Wi.BASE64URL:return new tp(lw(r,e));case Wi.DATA_URL:return new tp(fj(e),mj(e))}throw kg()}function ow(r){const e=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=s,d=r.charCodeAt(++n);s=65536|(c&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function dj(r){let e;try{e=decodeURIComponent(r)}catch{throw Ac(Wi.DATA_URL,"Malformed data URL.")}return ow(e)}function lw(r,e){switch(r){case Wi.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw Ac(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Wi.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw Ac(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uj(e)}catch(o){throw o.message.includes("polyfill")?o:Ac(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class cw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ac(Wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=pj(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function fj(r){const e=new cw(r);return e.base64?lw(Wi.BASE64,e.rest):dj(e.rest)}function mj(r){return new cw(r).contentType}function pj(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}class As{constructor(e,n){let s=0,o="";ib(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(ib(this.data_)){const s=this.data_,o=cj(s,e,n);return o===null?null:new As(o)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new As(s,!0)}}static getBlob(...e){if(Lg()){const n=e.map(s=>s instanceof As?s.data_:s);return new As(lj.apply(null,n))}else{const n=e.map(d=>Pg(d)?hj(Wi.RAW,d).data:d.data_);let s=0;n.forEach(d=>{s+=d.byteLength});const o=new Uint8Array(s);let c=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)o[c++]=d[p]}),new As(o,!0)}}uploadData(){return this.data_}}function uw(r){let e;try{e=JSON.parse(r)}catch{return null}return ZO(e)?e:null}function gj(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function yj(r,e){const n=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function hw(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}function _j(r,e){return e}class Tn{constructor(e,n,s,o){this.server=e,this.local=n||e,this.writable=!!s,this.xform=o||_j}}let Rh=null;function vj(r){return!Pg(r)||r.length<2?r:hw(r)}function dw(){if(Rh)return Rh;const r=[];r.push(new Tn("bucket")),r.push(new Tn("generation")),r.push(new Tn("metageneration")),r.push(new Tn("name","fullPath",!0));function e(c,d){return vj(d)}const n=new Tn("name");n.xform=e,r.push(n);function s(c,d){return d!==void 0?Number(d):d}const o=new Tn("size");return o.xform=s,r.push(o),r.push(new Tn("timeCreated")),r.push(new Tn("updated")),r.push(new Tn("md5Hash",null,!0)),r.push(new Tn("cacheControl",null,!0)),r.push(new Tn("contentDisposition",null,!0)),r.push(new Tn("contentEncoding",null,!0)),r.push(new Tn("contentLanguage",null,!0)),r.push(new Tn("contentType",null,!0)),r.push(new Tn("metadata","customMetadata",!0)),Rh=r,Rh}function Ej(r,e){function n(){const s=r.bucket,o=r.fullPath,c=new Yn(s,o);return e._makeStorageReference(c)}Object.defineProperty(r,"ref",{get:n})}function bj(r,e,n){const s={};s.type="file";const o=n.length;for(let c=0;c<o;c++){const d=n[c];s[d.local]=d.xform(s,e[d.server])}return Ej(s,r),s}function fw(r,e,n){const s=uw(e);return s===null?null:bj(r,s,n)}function Tj(r,e,n,s){const o=uw(e);if(o===null||!Pg(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(_=>{const b=r.bucket,A=r.fullPath,S="/b/"+d(b)+"/o/"+d(A),V=Ld(S,n,s),F=aw({alt:"media",token:_});return V+F})[0]}function Aj(r,e){const n={},s=e.length;for(let o=0;o<s;o++){const c=e[o];c.writable&&(n[c.server]=r[c.local])}return JSON.stringify(n)}class Ug{constructor(e,n,s,o){this.url=e,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function mw(r){if(!r)throw kg()}function wj(r,e){function n(s,o){const c=fw(r,o,e);return mw(c!==null),c}return n}function Sj(r,e){function n(s,o){const c=fw(r,o,e);return mw(c!==null),Tj(c,o,r.host,r._protocol)}return n}function pw(r){function e(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=LO():o=PO():n.getStatus()===402?o=kO(r.bucket):n.getStatus()===403?o=UO(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return e}function gw(r){const e=pw(r);function n(s,o){let c=e(s,o);return s.getStatus()===404&&(c=VO(r.path)),c.serverResponse=o.serverResponse,c}return n}function xj(r,e,n){const s=e.fullServerUrl(),o=Ld(s,r.host,r._protocol),c="GET",d=r.maxOperationRetryTime,p=new Ug(o,c,Sj(r,n),d);return p.errorHandler=gw(e),p}function Rj(r,e){const n=e.fullServerUrl(),s=Ld(n,r.host,r._protocol),o="DELETE",c=r.maxOperationRetryTime;function d(g,_){}const p=new Ug(s,o,d,c);return p.successCodes=[200,204],p.errorHandler=gw(e),p}function Nj(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function Cj(r,e,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=Nj(null,e)),s}function Ij(r,e,n,s,o){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let oe="";for(let pe=0;pe<2;pe++)oe=oe+Math.random().toString().slice(2);return oe}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const _=Cj(e,s,o),b=Aj(_,n),A="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+_.contentType+`\r
\r
`,S=`\r
--`+g+"--",V=As.getBlob(A,s,S);if(V===null)throw GO();const F={name:_.fullPath},X=Ld(c,r.host,r._protocol),G="POST",re=r.maxUploadRetryTime,ce=new Ug(X,G,wj(r,n),re);return ce.urlParams=F,ce.headers=d,ce.body=V.uploadData(),ce.errorHandler=pw(e),ce}class Dj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ra.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ra.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ra.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,o,c){if(this.sent_)throw cc("cannot .send() more than once");if(zs(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Oj extends Dj{initXhr(){this.xhr_.responseType="text"}}function zg(){return new Oj}class Va{constructor(e,n){this._service=e,n instanceof Yn?this._location=n:this._location=Yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Va(e,n)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hw(this._location.path)}get storage(){return this._service}get parent(){const e=gj(this._location.path);if(e===null)return null;const n=new Yn(this._location.bucket,e);return new Va(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YO(e)}}function jj(r,e,n){r._throwIfRoot("uploadBytes");const s=Ij(r.storage,r._location,dw(),new As(e,!0),n);return r.storage.makeRequestWithTokens(s,zg).then(o=>({metadata:o,ref:r}))}function Mj(r){r._throwIfRoot("getDownloadURL");const e=xj(r.storage,r._location,dw());return r.storage.makeRequestWithTokens(e,zg).then(n=>{if(n===null)throw KO();return n})}function Vj(r){r._throwIfRoot("deleteObject");const e=Rj(r.storage,r._location);return r.storage.makeRequestWithTokens(e,zg)}function kj(r,e){const n=yj(r._location.path,e),s=new Yn(r._location.bucket,n);return new Va(r.storage,s)}function Pj(r){return/^[A-Za-z]+:\/\//.test(r)}function Lj(r,e){return new Va(r,e)}function yw(r,e){if(r instanceof Bg){const n=r;if(n._bucket==null)throw HO();const s=new Va(n,n._bucket);return e!=null?yw(s,e):s}else return e!==void 0?kj(r,e):r}function Uj(r,e){if(e&&Pj(e)){if(r instanceof Bg)return Lj(r,e);throw jp("To use ref(service, url), the first argument must be a Storage instance.")}else return yw(r,e)}function sb(r,e){const n=e?.[rw];return n==null?null:Yn.makeFromBucketSpec(n,r)}function zj(r,e,n,s={}){r.host=`${e}:${n}`;const o=zs(e);o&&(zp(`https://${r.host}/b`),Bp("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(r._overrideAuthToken=typeof c=="string"?c:kb(c,r.app.options.projectId))}class Bg{constructor(e,n,s,o,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=iw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jO,this._maxUploadRetryTime=MO,this._requests=new Set,o!=null?this._bucket=Yn.makeFromBucketSpec(o,this._host):this._bucket=sb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=sb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Va(this,e)}_makeRequest(e,n,s,o,c=!0){if(this._deleted)return new XO(sw());{const d=aj(e,this._appId,s,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const ab="@firebase/storage",ob="0.14.0";const _w="storage";function Bj(r,e,n){return r=mt(r),jj(r,e,n)}function qj(r){return r=mt(r),Mj(r)}function Fj(r){return r=mt(r),Vj(r)}function lb(r,e){return r=mt(r),Uj(r,e)}function Hj(r=Hp(),e){r=mt(r);const s=pd(r,_w).getImmediate({identifier:e}),o=jb("storage");return o&&Gj(s,...o),s}function Gj(r,e,n,s={}){zj(r,e,n,s)}function Kj(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Bg(n,s,o,e,ka)}function Qj(){Ca(new Ds(_w,Kj,"PUBLIC").setMultipleInstances(!0)),Ji(ab,ob,""),Ji(ab,ob,"esm2020")}Qj();const Yj={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},qg=Ub(Yj),Nh=l2(qg),ut=gO(qg),cb=Hj(qg),ub={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},hb=r=>ub[r]||ub.default,vw=z.createContext(null),Xj=({children:r})=>{const[e,n]=z.useState(null),[s,o]=z.useState(!0),c=async S=>{try{const V=await kc(dn(ut,"users",S));if(V.exists()){const F=V.data();return{uid:S,email:F.email,displayName:F.displayName,role:F.role,isPremium:F.isPremium||!1,subscriptionEnd:F.subscriptionEnd?.toDate()||null,photoURL:F.photoURL,createdAt:F.createdAt?.toDate()||new Date,lastLogin:F.lastLogin?.toDate()}}return null}catch(V){return console.error("Erreur lors de la rcupration des donnes utilisateur:",V),null}},d=async(S,V)=>{const F=dn(ut,"users",S.uid);(await kc(F)).exists()?await Pc(F,{lastLogin:An()}):await CO(F,{email:S.email,displayName:S.displayName||V?.displayName||"",role:V?.role||"eleve",isPremium:!1,photoURL:S.photoURL,createdAt:An(),lastLogin:An()})},p=async(S,V)=>{try{const F=await GN(Nh,S,V);await d(F.user)}catch(F){throw new Error(hb(F.code))}},g=async S=>{try{if(S.password!==S.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const V=await HN(Nh,S.email,S.password);await QN(V.user,{displayName:S.displayName}),await d(V.user,{displayName:S.displayName,role:S.role})}catch(V){throw V.message?V:new Error(hb(V.code))}},_=async()=>{try{await WN(Nh),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},b=async S=>{if(!e)throw new Error("Aucun utilisateur connect.");try{const V=dn(ut,"users",e.uid);await Pc(V,{...S,updatedAt:An()}),n(F=>F?{...F,...S}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};z.useEffect(()=>{const S=$N(Nh,async V=>{if(V){const F=await c(V.uid);n(F)}else n(null);o(!1)});return()=>S()},[]);const A={currentUser:e,loading:s,login:p,register:g,logout:_,updateProfile:b};return m.jsx(vw.Provider,{value:A,children:s?m.jsxs("div",{className:"loading-container",children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Chargement..."})]}):r})},za=()=>{const r=z.useContext(vw);if(!r)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return r},$j=({children:r,allowedRoles:e,requirePremium:n=!1})=>{const{currentUser:s,loading:o}=za();return o?m.jsxs("div",{className:"loading-container",children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Vrification des autorisations..."})]}):s?e&&!e.includes(s.role)?m.jsxs("div",{className:"error-container",children:[m.jsx("h2",{children:"Accs non autoris"}),m.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),m.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!s.isPremium?m.jsxs("div",{className:"error-container premium-required",children:[m.jsx("h2",{children:"Contenu Premium"}),m.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),m.jsxs("div",{className:"premium-cta",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",m.jsx("strong",{children:"20 000 FCFA/an"})]}),m.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):m.jsx(m.Fragment,{children:r}):m.jsxs("div",{className:"error-container",children:[m.jsx("h2",{children:"Accs refus"}),m.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),m.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},jo=({children:r})=>m.jsx($j,{allowedRoles:["admin"],children:r}),Wj=()=>{const{login:r}=za(),e=fd(),s=tl().state?.from||"/",[o,c]=z.useState({email:"",password:""}),[d,p]=z.useState(!1),[g,_]=z.useState(""),[b,A]=z.useState(!1),S=X=>{const{name:G,value:re}=X.target;c(ce=>({...ce,[G]:re})),g&&_("")},V=()=>o.email.trim()?o.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)?!0:(_("Veuillez entrer une adresse email valide."),!1):(_("Veuillez entrer votre mot de passe."),!1):(_("Veuillez entrer votre adresse email."),!1),F=async X=>{if(X.preventDefault(),!!V()){p(!0),_("");try{await r(o.email,o.password),e(s,{replace:!0})}catch(G){G instanceof Error?_(G.message):_("Une erreur est survenue lors de la connexion.")}finally{p(!1)}}};return m.jsx("div",{className:"auth-page",children:m.jsxs("div",{className:"auth-container",children:[m.jsxs("div",{className:"auth-card",children:[m.jsxs("div",{className:"auth-header",children:[m.jsxs($i,{to:"/",className:"auth-logo",children:[m.jsx("div",{className:"auth-logo__icon",children:m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:m.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),m.jsx("span",{children:"PedaClic"})]}),m.jsx("h1",{className:"auth-title",children:"Connexion"}),m.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),g&&m.jsxs("div",{className:"auth-error",children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("path",{d:"M12 8v4M12 16h.01"})]}),m.jsx("span",{children:g})]}),m.jsxs("form",{onSubmit:F,className:"auth-form",children:[m.jsxs("div",{className:"auth-field",children:[m.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),m.jsxs("div",{className:"auth-input-wrapper",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),m.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:S,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:d})]})]}),m.jsxs("div",{className:"auth-field",children:[m.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),m.jsxs("div",{className:"auth-input-wrapper",children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[m.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),m.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),m.jsx("input",{type:b?"text":"password",id:"password",name:"password",value:o.password,onChange:S,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:d}),m.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>A(!b),"aria-label":b?"Masquer le mot de passe":"Afficher le mot de passe",children:b?m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),m.jsx("div",{className:"auth-forgot",children:m.jsx($i,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),m.jsx("button",{type:"submit",className:"auth-button",disabled:d,children:d?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),m.jsx("div",{className:"auth-divider",children:m.jsx("span",{children:"ou"})}),m.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",m.jsx($i,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),m.jsxs("div",{className:"auth-welcome",children:[m.jsx("h2",{children:"Bienvenue sur PedaClic !"}),m.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),m.jsxs("ul",{className:"auth-features",children:[m.jsxs("li",{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),m.jsxs("li",{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),m.jsxs("li",{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),m.jsxs("li",{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},Jj=()=>{const{register:r}=za(),e=fd(),[n,s]=z.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[o,c]=z.useState(!1),[d,p]=z.useState(""),[g,_]=z.useState(!1),[b,A]=z.useState(!1),[S,V]=z.useState(!1),F=re=>{const{name:ce,value:oe}=re.target;s(pe=>({...pe,[ce]:oe})),d&&p("")},X=()=>n.displayName.trim()?n.displayName.trim().length<2?(p("Le nom doit contenir au moins 2 caractres."),!1):n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.password?n.password.length<6?(p("Le mot de passe doit contenir au moins 6 caractres."),!1):n.password!==n.confirmPassword?(p("Les mots de passe ne correspondent pas."),!1):S?!0:(p("Veuillez accepter les conditions d'utilisation."),!1):(p("Veuillez entrer un mot de passe."),!1):(p("Veuillez entrer une adresse email valide."),!1):(p("Veuillez entrer votre adresse email."),!1):(p("Veuillez entrer votre nom complet."),!1),G=async re=>{if(re.preventDefault(),!!X()){c(!0),p("");try{await r(n),e("/disciplines",{replace:!0})}catch(ce){ce instanceof Error?p(ce.message):p("Une erreur est survenue lors de l'inscription.")}finally{c(!1)}}};return m.jsx("div",{className:"auth-page",children:m.jsxs("div",{className:"auth-container",children:[m.jsxs("div",{className:"auth-card auth-card--register",children:[m.jsxs("div",{className:"auth-header",children:[m.jsxs($i,{to:"/",className:"auth-logo",children:[m.jsx("div",{className:"auth-logo__icon",children:m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:m.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),m.jsx("span",{children:"PedaClic"})]}),m.jsx("h1",{className:"auth-title",children:"Crer un compte"}),m.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),d&&m.jsxs("div",{className:"auth-error",children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("path",{d:"M12 8v4M12 16h.01"})]}),m.jsx("span",{children:d})]}),m.jsxs("form",{onSubmit:G,className:"auth-form",children:[m.jsxs("div",{className:"auth-field",children:[m.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),m.jsxs("div",{className:"auth-input-wrapper",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),m.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:F,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:o})]})]}),m.jsxs("div",{className:"auth-field",children:[m.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),m.jsxs("div",{className:"auth-input-wrapper",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),m.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:F,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:o})]})]}),m.jsxs("div",{className:"auth-field",children:[m.jsx("label",{className:"auth-label",children:"Je suis :"}),m.jsxs("div",{className:"auth-role-selector",children:[m.jsxs("label",{className:`auth-role-option ${n.role==="eleve"?"auth-role-option--selected":""}`,children:[m.jsx("input",{type:"radio",name:"role",value:"eleve",checked:n.role==="eleve",onChange:F,className:"auth-role-input",disabled:o}),m.jsxs("div",{className:"auth-role-content",children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),m.jsx("span",{children:"lve"})]})]}),m.jsxs("label",{className:`auth-role-option ${n.role==="prof"?"auth-role-option--selected":""}`,children:[m.jsx("input",{type:"radio",name:"role",value:"prof",checked:n.role==="prof",onChange:F,className:"auth-role-input",disabled:o}),m.jsxs("div",{className:"auth-role-content",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),m.jsx("span",{children:"Professeur"})]})]})]})]}),m.jsxs("div",{className:"auth-field",children:[m.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),m.jsxs("div",{className:"auth-input-wrapper",children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[m.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),m.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),m.jsx("input",{type:g?"text":"password",id:"password",name:"password",value:n.password,onChange:F,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:o}),m.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>_(!g),"aria-label":g?"Masquer":"Afficher",children:g?m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),m.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),m.jsxs("div",{className:"auth-field",children:[m.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),m.jsxs("div",{className:"auth-input-wrapper",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),m.jsx("input",{type:b?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:F,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:o}),m.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>A(!b),"aria-label":b?"Masquer":"Afficher",children:b?m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),m.jsx("div",{className:"auth-checkbox-field",children:m.jsxs("label",{className:"auth-checkbox-label",children:[m.jsx("input",{type:"checkbox",checked:S,onChange:re=>V(re.target.checked),className:"auth-checkbox",disabled:o}),m.jsx("span",{className:"auth-checkbox-custom"}),m.jsxs("span",{children:["J'accepte les"," ",m.jsx($i,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",m.jsx($i,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),m.jsx("button",{type:"submit",className:"auth-button",disabled:o,children:o?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),m.jsx("div",{className:"auth-divider",children:m.jsx("span",{children:"ou"})}),m.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",m.jsx($i,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),m.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[m.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),m.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),m.jsxs("div",{className:"auth-stats",children:[m.jsxs("div",{className:"auth-stat",children:[m.jsx("span",{className:"auth-stat-number",children:"10 000+"}),m.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),m.jsxs("div",{className:"auth-stat",children:[m.jsx("span",{className:"auth-stat-number",children:"500+"}),m.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),m.jsxs("div",{className:"auth-stat",children:[m.jsx("span",{className:"auth-stat-number",children:"95%"}),m.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),m.jsxs("div",{className:"auth-testimonial",children:[m.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),m.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},Zj=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],Mo=({children:r,currentPage:e="dashboard"})=>{const{currentUser:n,logout:s}=za(),[o,c]=z.useState(!0),[d,p]=z.useState(!1),g=async()=>{try{p(!0),await s(),window.location.href="/connexion"}catch(A){console.error("Erreur lors de la dconnexion:",A),p(!1)}},_=()=>n?.displayName?n.displayName.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2):"AD",b=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}};return m.jsxs("div",{className:"admin-layout",children:[m.jsxs("aside",{className:`admin-sidebar ${o?"":"admin-sidebar--collapsed"}`,children:[m.jsx("header",{className:"admin-sidebar__header",children:m.jsxs("a",{href:"/",className:"admin-sidebar__logo",children:[m.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),m.jsx("span",{children:"PedaClic"})]})}),m.jsx("nav",{className:"admin-sidebar__nav",children:Zj.map((A,S)=>m.jsxs("div",{className:"admin-nav__section",children:[m.jsx("h3",{className:"admin-nav__title",children:A.title}),m.jsx("ul",{className:"admin-nav__list",children:A.items.map(V=>m.jsx("li",{className:"admin-nav__item",children:m.jsxs("a",{href:V.href,className:`admin-nav__link ${e===V.id?"admin-nav__link--active":""}`,children:[m.jsx("span",{className:"admin-nav__icon",children:V.icon}),m.jsx("span",{className:"admin-nav__label",children:V.label})]})},V.id))})]},S))}),m.jsx("footer",{className:"admin-sidebar__footer",children:m.jsxs("div",{className:"admin-user",children:[m.jsx("div",{className:"admin-user__avatar",children:_()}),m.jsxs("div",{className:"admin-user__info",children:[m.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),m.jsx("div",{className:"admin-user__role",children:b()})]}),m.jsx("button",{onClick:g,disabled:d,className:"admin-logout-btn",title:"Se dconnecter",children:d?"...":""})]})})]}),m.jsxs("main",{className:"admin-content",children:[m.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>c(!o),"aria-label":"Toggle sidebar",children:""}),r]}),m.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},uc="disciplines",db=r=>{const e=r.data();return{id:r.id,nom:e.nom,niveau:e.niveau,classe:e.classe,ordre:e.ordre,coefficient:e.coefficient,couleur:e.couleur,icone:e.icone,description:e.description,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},wa={async getAll(r){try{const e=[cd("ordre","asc")];r?.niveau&&e.unshift(Ts("niveau","==",r.niveau)),r?.classe&&e.unshift(Ts("classe","==",r.classe));const n=ld(Sa(ut,uc),...e);return(await ud(n)).docs.map(db)}catch(e){throw console.error("Erreur lors de la rcupration des disciplines:",e),new Error("Impossible de rcuprer les disciplines")}},async getById(r){try{const e=dn(ut,uc,r),n=await kc(e);return n.exists()?db(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la discipline:",e),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(r){return this.getAll({niveau:r})},async getByClasse(r){return this.getAll({classe:r})},async create(r){try{return(await Vg(Sa(ut,uc),{...r,createdAt:An(),updatedAt:An()})).id}catch(e){throw console.error("Erreur lors de la cration de la discipline:",e),new Error("Impossible de crer la discipline")}},async update(r,e){try{const n=dn(ut,uc,r);await Pc(n,{...e,updatedAt:An()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(r){try{const e=dn(ut,uc,r);await Mg(e)}catch(e){throw console.error("Erreur lors de la suppression de la discipline:",e),new Error("Impossible de supprimer la discipline")}},async exists(r){return await this.getById(r)!==null},async countByNiveau(r){return(await this.getByNiveau(r)).length}},ps="chapitres",np=r=>{const e=r.data();return{id:r.id,disciplineId:e.disciplineId,numero:e.numero,titre:e.titre,description:e.description,objectifs:e.objectifs||[],dureeEstimee:e.dureeEstimee,isPremium:e.isPremium||!1,actif:e.actif!==!1,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},ys={async getByDiscipline(r){try{const e=ld(Sa(ut,ps),Ts("disciplineId","==",r),cd("numero","asc"));return(await ud(e)).docs.map(np)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const r=ld(Sa(ut,ps),cd("numero","asc"));return(await ud(r)).docs.map(np)}catch(r){throw console.error("Erreur lors de la rcupration des chapitres:",r),new Error("Impossible de rcuprer les chapitres")}},async getById(r){try{const e=dn(ut,ps,r),n=await kc(e);return n.exists()?np(n):null}catch(e){throw console.error("Erreur lors de la rcupration du chapitre:",e),new Error("Impossible de rcuprer le chapitre")}},async create(r){try{return(await Vg(Sa(ut,ps),{...r,actif:r.actif!==!1,createdAt:An(),updatedAt:An()})).id}catch(e){throw console.error("Erreur lors de la cration du chapitre:",e),new Error("Impossible de crer le chapitre")}},async update(r,e){try{const n=dn(ut,ps,r);await Pc(n,{...e,updatedAt:An()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(r){try{const e=dn(ut,ps,r);await Mg(e)}catch(e){throw console.error("Erreur lors de la suppression du chapitre:",e),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(r){try{const e=await this.getByDiscipline(r),n=hd(ut);e.forEach(s=>{const o=dn(ut,ps,s.id);n.delete(o)}),await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des chapitres:",e),new Error("Impossible de supprimer les chapitres")}},async reorder(r,e){try{const n=hd(ut);e.forEach((s,o)=>{const c=dn(ut,ps,s);n.update(c,{numero:o+1,updatedAt:An()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(r,e){await this.update(r,{actif:e})},async countByDiscipline(r){return(await this.getByDiscipline(r)).length},async getNextNumero(r){return await this.countByDiscipline(r)+1}},ba="ressources",e4="ressources",fb=r=>{const e=r.data();return{id:r.id,disciplineId:e.disciplineId,titre:e.titre,type:e.type,contenu:e.contenu,description:e.description,isPremium:e.isPremium||!1,ordre:e.ordre||0,chapitre:e.chapitre,fichierURL:e.fichierURL,dureeEstimee:e.dureeEstimee,tags:e.tags||[],auteurId:e.auteurId,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},t4=r=>{const e=Date.now(),n=r.split(".").pop();return`${r.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${e}.${n}`},gs={async getAll(r,e){try{const n=[cd("ordre","asc")];r?.disciplineId&&n.unshift(Ts("disciplineId","==",r.disciplineId)),r?.chapitreId&&n.unshift(Ts("chapitre","==",r.chapitreId)),r?.type&&n.unshift(Ts("type","==",r.type)),r?.isPremium!==void 0&&n.unshift(Ts("isPremium","==",r.isPremium)),r?.auteurId&&n.unshift(Ts("auteurId","==",r.auteurId)),e&&n.push(xO(e));const s=ld(Sa(ut,ba),...n);return(await ud(s)).docs.map(fb)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(r){try{const e=dn(ut,ba,r),n=await kc(e);return n.exists()?fb(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la ressource:",e),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(r){return this.getAll({disciplineId:r})},async getByChapitre(r){return this.getAll({chapitreId:r})},async getByType(r){return this.getAll({type:r})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(r,e){try{return(await Vg(Sa(ut,ba),{...r,auteurId:e,createdAt:An(),updatedAt:An()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(r,e){try{const n=dn(ut,ba,r);await Pc(n,{...e,updatedAt:An()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(r){try{const e=await this.getById(r);e?.fichierURL&&await this.deleteFile(e.fichierURL);const n=dn(ut,ba,r);await Mg(n)}catch(e){throw console.error("Erreur lors de la suppression de la ressource:",e),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(r){try{const e=await this.getByDiscipline(r),n=hd(ut);for(const s of e){s.fichierURL&&await this.deleteFile(s.fichierURL);const o=dn(ut,ba,s.id);n.delete(o)}await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des ressources:",e),new Error("Impossible de supprimer les ressources")}},async uploadFile(r,e){try{const n=t4(r.name),s=`${e4}/${e}/${n}`,o=lb(cb,s);return await Bj(o,r),await qj(o)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(r){try{const e=lb(cb,r);await Fj(e)}catch(e){console.warn("Fichier non trouv ou dj supprim:",e)}},async reorder(r,e){try{const n=hd(ut);e.forEach((s,o)=>{const c=dn(ut,ba,s);n.update(c,{ordre:o+1,updatedAt:An()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(r,e){await this.update(r,{isPremium:e})},async countByType(r){return(await this.getByType(r)).length},async getStats(){try{const r=await this.getAll(),e={total:r.length,premium:r.filter(n=>n.isPremium).length,gratuit:r.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return r.forEach(n=>{e.parType[n.type]!==void 0&&e.parType[n.type]++}),e}catch(r){throw console.error("Erreur lors du calcul des statistiques:",r),new Error("Impossible de calculer les statistiques")}}},n4=()=>{const{currentUser:r}=za(),[e,n]=z.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[s,o]=z.useState(!0),[c,d]=z.useState(null);return z.useEffect(()=>{(async()=>{try{o(!0),d(null);const[g,_,b]=await Promise.all([wa.getAll(),ys.getAll(),gs.getStats()]);n({totalDisciplines:g.length,totalChapitres:_.length,totalRessources:b.total,ressourcesPremium:b.premium,ressourcesGratuites:b.gratuit,ressourcesParType:b.parType})}catch(g){console.error("Erreur lors du chargement des statistiques:",g),d("Impossible de charger les statistiques")}finally{o(!1)}})()},[]),m.jsxs("div",{className:"admin-dashboard",children:[m.jsx("header",{className:"admin-page-header",children:m.jsxs("div",{className:"admin-page-header__info",children:[m.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),m.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",r?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),c&&m.jsxs("div",{className:"alert alert--error",children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:c})})]}),s?m.jsxs("div",{className:"loading-container",children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Chargement des statistiques..."})]}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"stats-grid",children:[m.jsxs("div",{className:"stat-card",children:[m.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),m.jsxs("div",{className:"stat-card__content",children:[m.jsx("div",{className:"stat-card__value",children:e.totalDisciplines}),m.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),m.jsxs("div",{className:"stat-card",children:[m.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),m.jsxs("div",{className:"stat-card__content",children:[m.jsx("div",{className:"stat-card__value",children:e.totalChapitres}),m.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),m.jsxs("div",{className:"stat-card",children:[m.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),m.jsxs("div",{className:"stat-card__content",children:[m.jsx("div",{className:"stat-card__value",children:e.totalRessources}),m.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),m.jsxs("div",{className:"stat-card",children:[m.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),m.jsxs("div",{className:"stat-card__content",children:[m.jsx("div",{className:"stat-card__value",children:e.ressourcesPremium}),m.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]})]}),m.jsxs("section",{className:"content-card",children:[m.jsx("div",{className:"content-card__header",children:m.jsx("h2",{children:"Rpartition des ressources par type"})}),m.jsx("div",{className:"content-card__body",children:m.jsxs("div",{className:"resource-type-grid",children:[m.jsxs("div",{className:"resource-type-item",children:[m.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),m.jsxs("div",{className:"resource-type-info",children:[m.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.cours}),m.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),m.jsxs("div",{className:"resource-type-item",children:[m.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),m.jsxs("div",{className:"resource-type-info",children:[m.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.exercice}),m.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),m.jsxs("div",{className:"resource-type-item",children:[m.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),m.jsxs("div",{className:"resource-type-info",children:[m.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.video}),m.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),m.jsxs("div",{className:"resource-type-item",children:[m.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),m.jsxs("div",{className:"resource-type-info",children:[m.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.document}),m.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),m.jsxs("div",{className:"resource-type-item",children:[m.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),m.jsxs("div",{className:"resource-type-info",children:[m.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.quiz}),m.jsx("span",{className:"resource-type-label",children:"Quiz"})]})]})]})})]}),m.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[m.jsx("div",{className:"content-card__header",children:m.jsx("h2",{children:"Actions rapides"})}),m.jsx("div",{className:"content-card__body",children:m.jsxs("div",{className:"quick-actions-grid",children:[m.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[m.jsx("div",{className:"quick-action-icon",children:""}),m.jsxs("div",{className:"quick-action-content",children:[m.jsx("h3",{children:"Grer les disciplines"}),m.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),m.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[m.jsx("div",{className:"quick-action-icon",children:""}),m.jsxs("div",{className:"quick-action-content",children:[m.jsx("h3",{children:"Grer les chapitres"}),m.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),m.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[m.jsx("div",{className:"quick-action-icon",children:""}),m.jsxs("div",{className:"quick-action-content",children:[m.jsx("h3",{children:"Grer les ressources"}),m.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),m.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[m.jsx("div",{className:"quick-action-icon",children:""}),m.jsxs("div",{className:"quick-action-content",children:[m.jsx("h3",{children:"Grer les utilisateurs"}),m.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),m.jsx("style",{children:`
        /* Grille des types de ressources */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* Actions rapides */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},mb=[{value:"college",label:"Collge"},{value:"lycee",label:"Lyce"}],Ch={college:[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],lycee:[{value:"2nde",label:"Seconde"},{value:"1ere",label:"Premire"},{value:"Terminale",label:"Terminale"}]},i4=[{value:"#2563eb",label:"Bleu"},{value:"#059669",label:"Vert"},{value:"#dc2626",label:"Rouge"},{value:"#7c3aed",label:"Violet"},{value:"#ea580c",label:"Orange"},{value:"#0891b2",label:"Cyan"},{value:"#be185d",label:"Rose"},{value:"#4b5563",label:"Gris"}],ip={nom:"",niveau:"college",classe:"6eme",ordre:1,coefficient:1,couleur:"#2563eb",icone:"",description:""},r4=()=>{const[r,e]=z.useState([]),[n,s]=z.useState([]),[o,c]=z.useState(!0),[d,p]=z.useState(!1),[g,_]=z.useState(null),[b,A]=z.useState(null),[S,V]=z.useState(null),[F,X]=z.useState(!1),[G,re]=z.useState(!1),[ce,oe]=z.useState(null),[pe,Ce]=z.useState(null),[ye,N]=z.useState(ip),[x,C]=z.useState({}),[D,O]=z.useState(""),[k,R]=z.useState(""),[ke,We]=z.useState(""),$=z.useCallback(async()=>{try{c(!0),A(null);const Y=await wa.getAll();e(Y),s(Y)}catch(Y){console.error("Erreur lors du chargement:",Y),A("Impossible de charger les disciplines. Veuillez ressayer.")}finally{c(!1)}},[]);z.useEffect(()=>{$()},[$]),z.useEffect(()=>{let Y=[...r];if(D&&(Y=Y.filter(ge=>ge.niveau===D)),k&&(Y=Y.filter(ge=>ge.classe===k)),ke){const ge=ke.toLowerCase();Y=Y.filter(Ge=>Ge.nom.toLowerCase().includes(ge)||Ge.description?.toLowerCase().includes(ge))}s(Y)},[r,D,k,ke]);const ae=()=>{const Y={};return ye.nom.trim()?ye.nom.length<2&&(Y.nom="Le nom doit contenir au moins 2 caractres"):Y.nom="Le nom de la discipline est requis",ye.niveau||(Y.niveau="Veuillez slectionner un niveau"),ye.classe||(Y.classe="Veuillez slectionner une classe"),ye.ordre<1&&(Y.ordre="L'ordre doit tre suprieur  0"),C(Y),Object.keys(Y).length===0},fe=()=>{oe(null),N(ip),C({}),X(!0)},Me=Y=>{oe(Y),N({nom:Y.nom,niveau:Y.niveau,classe:Y.classe,ordre:Y.ordre,coefficient:Y.coefficient,couleur:Y.couleur,icone:Y.icone,description:Y.description}),C({}),X(!0)},Ie=Y=>{Ce(Y),re(!0)},j=()=>{X(!1),re(!1),oe(null),Ce(null),N(ip),C({})},J=Y=>{const{name:ge,value:Ge,type:Pe}=Y.target;if(ge==="niveau"){const Qt=Ge;N(W=>({...W,niveau:Qt,classe:Ch[Qt][0].value}))}else N(Qt=>({...Qt,[ge]:Pe==="number"?Number(Ge):Ge}));x[ge]&&C(Qt=>({...Qt,[ge]:void 0}))},se=async Y=>{if(Y.preventDefault(),!!ae())try{p(!0),A(null),ce?(await wa.update(ce.id,ye),V("Discipline modifie avec succs !")):(await wa.create(ye),V("Discipline cre avec succs !")),j(),await $(),setTimeout(()=>V(null),3e3)}catch(ge){console.error("Erreur lors de la sauvegarde:",ge),A("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{p(!1)}},ue=async()=>{if(pe)try{_(pe.id),await wa.delete(pe.id),V("Discipline supprime avec succs !"),j(),await $(),setTimeout(()=>V(null),3e3)}catch(Y){console.error("Erreur lors de la suppression:",Y),A("Erreur lors de la suppression. Veuillez ressayer.")}finally{_(null)}},Te=Y=>{for(const ge of Object.values(Ch)){const Ge=ge.find(Pe=>Pe.value===Y);if(Ge)return Ge.label}return Y};return m.jsxs("div",{className:"discipline-manager",children:[m.jsxs("header",{className:"admin-page-header",children:[m.jsxs("div",{className:"admin-page-header__info",children:[m.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Disciplines"}),m.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les matires enseignes sur PedaClic"})]}),m.jsx("div",{className:"admin-page-header__actions",children:m.jsxs("button",{onClick:fe,className:"btn btn--primary",children:[m.jsx("span",{children:""}),"Nouvelle discipline"]})})]}),b&&m.jsxs("div",{className:"alert alert--error",children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:b})}),m.jsx("button",{onClick:()=>A(null),className:"alert__close",children:""})]}),S&&m.jsxs("div",{className:"alert alert--success",children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:S})})]}),m.jsxs("div",{className:"admin-table-container",children:[m.jsxs("div",{className:"admin-table-header",children:[m.jsxs("h2",{className:"admin-table-title",children:["Liste des disciplines (",n.length,")"]}),m.jsxs("div",{className:"admin-table-actions",children:[m.jsxs("div",{className:"search-input",children:[m.jsx("span",{className:"search-input__icon",children:""}),m.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:ke,onChange:Y=>We(Y.target.value)})]}),m.jsxs("select",{className:"form-select",value:D,onChange:Y=>O(Y.target.value),style:{width:"auto"},children:[m.jsx("option",{value:"",children:"Tous les niveaux"}),mb.map(Y=>m.jsx("option",{value:Y.value,children:Y.label},Y.value))]}),m.jsxs("select",{className:"form-select",value:k,onChange:Y=>R(Y.target.value),style:{width:"auto"},disabled:!D,children:[m.jsx("option",{value:"",children:"Toutes les classes"}),D&&Ch[D].map(Y=>m.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]})]}),o?m.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Chargement des disciplines..."})]}):n.length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state__icon",children:""}),m.jsx("h3",{className:"empty-state__title",children:"Aucune discipline trouve"}),m.jsx("p",{className:"empty-state__message",children:ke||D||k?"Aucune discipline ne correspond aux critres de recherche.":"Commencez par crer votre premire discipline."}),!ke&&!D&&!k&&m.jsx("button",{onClick:fe,className:"btn btn--primary",children:"Crer une discipline"})]}):m.jsxs("table",{className:"admin-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Discipline"}),m.jsx("th",{children:"Niveau"}),m.jsx("th",{children:"Classe"}),m.jsx("th",{children:"Coefficient"}),m.jsx("th",{children:"Ordre"}),m.jsx("th",{children:"Actions"})]})}),m.jsx("tbody",{children:n.map(Y=>m.jsxs("tr",{children:[m.jsx("td",{children:m.jsxs("div",{className:"table-cell-icon",children:[m.jsx("div",{className:"table-icon",style:{backgroundColor:`${Y.couleur}20`,color:Y.couleur},children:Y.icone||""}),m.jsxs("div",{children:[m.jsx("strong",{children:Y.nom}),Y.description&&m.jsx("div",{className:"text-muted text-sm",children:Y.description})]})]})}),m.jsx("td",{children:m.jsx("span",{className:`badge badge--${Y.niveau==="college"?"primary":"secondary"}`,children:Y.niveau==="college"?"Collge":"Lyce"})}),m.jsx("td",{children:Te(Y.classe)}),m.jsx("td",{children:Y.coefficient||"-"}),m.jsx("td",{children:Y.ordre}),m.jsx("td",{children:m.jsxs("div",{className:"table-actions",children:[m.jsx("button",{onClick:()=>Me(Y),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),m.jsx("button",{onClick:()=>Ie(Y),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:g===Y.id,children:g===Y.id?"":""})]})})]},Y.id))})]})]}),F&&m.jsx("div",{className:"modal-overlay",onClick:j,children:m.jsxs("div",{className:"modal modal--lg",onClick:Y=>Y.stopPropagation(),children:[m.jsxs("div",{className:"modal__header",children:[m.jsx("h2",{className:"modal__title",children:ce?"Modifier la discipline":"Nouvelle discipline"}),m.jsx("button",{onClick:j,className:"modal__close",children:""})]}),m.jsxs("form",{onSubmit:se,children:[m.jsxs("div",{className:"modal__body",children:[m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",style:{flex:2},children:[m.jsx("label",{className:"form-label form-label--required",children:"Nom de la discipline"}),m.jsx("input",{type:"text",name:"nom",className:`form-input ${x.nom?"form-input--error":""}`,placeholder:"Ex: Mathmatiques, Franais, SVT...",value:ye.nom,onChange:J}),x.nom&&m.jsx("span",{className:"form-error",children:x.nom})]}),m.jsxs("div",{className:"form-group",style:{flex:1},children:[m.jsx("label",{className:"form-label",children:"Icne"}),m.jsx("input",{type:"text",name:"icone",className:"form-input",placeholder:"",value:ye.icone||"",onChange:J,maxLength:4}),m.jsx("span",{className:"form-helper",children:"Emoji uniquement"})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label form-label--required",children:"Niveau"}),m.jsx("select",{name:"niveau",className:`form-select ${x.niveau?"form-select--error":""}`,value:ye.niveau,onChange:J,children:mb.map(Y=>m.jsx("option",{value:Y.value,children:Y.label},Y.value))}),x.niveau&&m.jsx("span",{className:"form-error",children:x.niveau})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label form-label--required",children:"Classe"}),m.jsx("select",{name:"classe",className:`form-select ${x.classe?"form-select--error":""}`,value:ye.classe,onChange:J,children:Ch[ye.niveau].map(Y=>m.jsx("option",{value:Y.value,children:Y.label},Y.value))}),x.classe&&m.jsx("span",{className:"form-error",children:x.classe})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Coefficient"}),m.jsx("input",{type:"number",name:"coefficient",className:"form-input",min:"1",max:"10",value:ye.coefficient||1,onChange:J}),m.jsx("span",{className:"form-helper",children:"Pour les calculs de moyennes"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label form-label--required",children:"Ordre d'affichage"}),m.jsx("input",{type:"number",name:"ordre",className:`form-input ${x.ordre?"form-input--error":""}`,min:"1",value:ye.ordre,onChange:J}),x.ordre&&m.jsx("span",{className:"form-error",children:x.ordre})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Couleur"}),m.jsx("div",{className:"color-picker",children:i4.map(Y=>m.jsx("button",{type:"button",className:`color-option ${ye.couleur===Y.value?"color-option--active":""}`,style:{backgroundColor:Y.value},onClick:()=>N(ge=>({...ge,couleur:Y.value})),title:Y.label,children:ye.couleur===Y.value&&""},Y.value))})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Description (optionnel)"}),m.jsx("textarea",{name:"description",className:"form-textarea",placeholder:"Description courte de la discipline...",rows:3,value:ye.description||"",onChange:J})]})]}),m.jsxs("div",{className:"modal__footer",children:[m.jsx("button",{type:"button",onClick:j,className:"btn btn--outline",disabled:d,children:"Annuler"}),m.jsx("button",{type:"submit",className:"btn btn--primary",disabled:d,children:d?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"spinner-small"}),"Enregistrement..."]}):ce?"Mettre  jour":"Crer la discipline"})]})]})]})}),G&&pe&&m.jsx("div",{className:"modal-overlay",onClick:j,children:m.jsxs("div",{className:"modal",onClick:Y=>Y.stopPropagation(),children:[m.jsxs("div",{className:"modal__header",children:[m.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),m.jsx("button",{onClick:j,className:"modal__close",children:""})]}),m.jsxs("div",{className:"modal__body",children:[m.jsxs("p",{children:["tes-vous sr de vouloir supprimer la discipline",m.jsxs("strong",{children:[" ",pe.nom]})," ?"]}),m.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:"Cette action est irrversible. Tous les chapitres et ressources associs devront tre supprims manuellement."})})]})]}),m.jsxs("div",{className:"modal__footer",children:[m.jsx("button",{onClick:j,className:"btn btn--outline",disabled:g!==null,children:"Annuler"}),m.jsx("button",{onClick:ue,className:"btn btn--danger",disabled:g!==null,children:g?"Suppression...":"Supprimer"})]})]})}),m.jsx("style",{children:`
        /* Ligne de formulaire */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Slecteur de couleur */
        .color-picker {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .color-option {
          width: 36px;
          height: 36px;
          border: 2px solid transparent;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          transition: all var(--transition-base);
        }

        .color-option:hover {
          transform: scale(1.1);
        }

        .color-option--active {
          border-color: var(--color-text);
          box-shadow: 0 0 0 2px white, 0 0 0 4px var(--color-text);
        }

        /* Fermer l'alerte */
        .alert__close {
          background: none;
          border: none;
          cursor: pointer;
          font-size: var(--text-lg);
          opacity: 0.7;
          transition: opacity var(--transition-base);
        }

        .alert__close:hover {
          opacity: 1;
        }

        /* Spinner petit pour les boutons */
        .spinner-small {
          width: 16px;
          height: 16px;
          border: 2px solid rgba(255, 255, 255, 0.3);
          border-top-color: white;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }

        /* Ajustement du form-select */
        .form-select {
          min-width: 150px;
        }
      `})]})},pb={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},s4=()=>{const[r,e]=z.useState([]),[n,s]=z.useState([]),[o,c]=z.useState(""),[d,p]=z.useState(!0),[g,_]=z.useState(!1),[b,A]=z.useState(!1),[S,V]=z.useState(null),[F,X]=z.useState(null),[G,re]=z.useState(null),[ce,oe]=z.useState(!1),[pe,Ce]=z.useState(!1),[ye,N]=z.useState(null),[x,C]=z.useState(null),[D,O]=z.useState({...pb,disciplineId:""}),[k,R]=z.useState({}),[ke,We]=z.useState(""),$=z.useCallback(async()=>{try{p(!0);const W=await wa.getAll();e(W),W.length>0&&!o&&c(W[0].id)}catch(W){console.error("Erreur lors du chargement des disciplines:",W),X("Impossible de charger les disciplines.")}finally{p(!1)}},[o]),ae=z.useCallback(async()=>{if(!o){s([]);return}try{_(!0);const W=await ys.getByDiscipline(o);s(W)}catch(W){console.error("Erreur lors du chargement des chapitres:",W),X("Impossible de charger les chapitres.")}finally{_(!1)}},[o]);z.useEffect(()=>{$()},[$]),z.useEffect(()=>{ae()},[ae]);const fe=()=>{const W={};return D.disciplineId||(W.disciplineId="Veuillez slectionner une discipline"),D.titre.trim()?D.titre.length<3&&(W.titre="Le titre doit contenir au moins 3 caractres"):W.titre="Le titre du chapitre est requis",D.numero<1&&(W.numero="Le numro doit tre suprieur  0"),R(W),Object.keys(W).length===0},Me=W=>{c(W),X(null)},Ie=async()=>{const W=await ys.getNextNumero(o);N(null),O({...pb,disciplineId:o,numero:W}),R({}),We(""),oe(!0)},j=W=>{N(W),O({disciplineId:W.disciplineId,numero:W.numero,titre:W.titre,description:W.description,objectifs:W.objectifs||[],dureeEstimee:W.dureeEstimee,isPremium:W.isPremium,actif:W.actif}),R({}),We(""),oe(!0)},J=W=>{C(W),Ce(!0)},se=()=>{oe(!1),Ce(!1),N(null),C(null),R({}),We("")},ue=W=>{const{name:pt,value:Ve,type:Ct}=W.target,kt=W.target.checked;O(Wt=>({...Wt,[pt]:Ct==="checkbox"?kt:Ct==="number"?Number(Ve):Ve})),k[pt]&&R(Wt=>({...Wt,[pt]:void 0}))},Te=()=>{ke.trim()&&(O(W=>({...W,objectifs:[...W.objectifs||[],ke.trim()]})),We(""))},Y=W=>{O(pt=>({...pt,objectifs:(pt.objectifs||[]).filter((Ve,Ct)=>Ct!==W)}))},ge=async W=>{if(W.preventDefault(),!!fe())try{A(!0),X(null),ye?(await ys.update(ye.id,D),re("Chapitre modifi avec succs !")):(await ys.create(D),re("Chapitre cr avec succs !")),se(),await ae(),setTimeout(()=>re(null),3e3)}catch(pt){console.error("Erreur lors de la sauvegarde:",pt),X("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{A(!1)}},Ge=async()=>{if(x)try{V(x.id),await ys.delete(x.id),re("Chapitre supprim avec succs !"),se(),await ae(),setTimeout(()=>re(null),3e3)}catch(W){console.error("Erreur lors de la suppression:",W),X("Erreur lors de la suppression. Veuillez ressayer.")}finally{V(null)}},Pe=async W=>{try{await ys.toggleActive(W.id,!W.actif),await ae(),re(W.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>re(null),2e3)}catch{X("Erreur lors de la mise  jour")}},Qt=W=>{const pt=r.find(Ve=>Ve.id===W);return pt?pt.nom:"Non trouve"};return m.jsxs("div",{className:"chapitre-manager",children:[m.jsxs("header",{className:"admin-page-header",children:[m.jsxs("div",{className:"admin-page-header__info",children:[m.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),m.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),m.jsx("div",{className:"admin-page-header__actions",children:m.jsxs("button",{onClick:Ie,className:"btn btn--primary",disabled:!o||d,children:[m.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),F&&m.jsxs("div",{className:"alert alert--error",children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:F})}),m.jsx("button",{onClick:()=>X(null),className:"alert__close",children:""})]}),G&&m.jsxs("div",{className:"alert alert--success",children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:G})})]}),m.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:m.jsx("div",{className:"content-card__body",children:m.jsxs("div",{className:"discipline-selector",children:[m.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),d?m.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):r.length===0?m.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",m.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):m.jsx("div",{className:"discipline-tabs",children:r.map(W=>m.jsxs("button",{className:`discipline-tab ${o===W.id?"discipline-tab--active":""}`,onClick:()=>Me(W.id),style:{"--discipline-color":W.couleur||"#2563eb"},children:[m.jsx("span",{className:"discipline-tab__icon",children:W.icone||""}),m.jsx("span",{className:"discipline-tab__name",children:W.nom}),m.jsx("span",{className:"discipline-tab__class",children:W.classe})]},W.id))})]})})}),m.jsxs("div",{className:"admin-table-container",children:[m.jsx("div",{className:"admin-table-header",children:m.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",o&&`- ${Qt(o)}`,n.length>0&&` (${n.length})`]})}),g?m.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Chargement des chapitres..."})]}):o?n.length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state__icon",children:""}),m.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),m.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),m.jsx("button",{onClick:Ie,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):m.jsx("div",{className:"chapitres-list",children:n.map(W=>m.jsxs("div",{className:`chapitre-card ${W.actif?"":"chapitre-card--inactive"}`,children:[m.jsx("div",{className:"chapitre-card__number",children:W.numero}),m.jsxs("div",{className:"chapitre-card__content",children:[m.jsxs("h3",{className:"chapitre-card__title",children:[W.titre,W.isPremium&&m.jsx("span",{className:"badge badge--premium",children:"Premium"}),!W.actif&&m.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),W.description&&m.jsx("p",{className:"chapitre-card__description",children:W.description}),m.jsxs("div",{className:"chapitre-card__meta",children:[W.dureeEstimee&&m.jsxs("span",{children:[" ",W.dureeEstimee,"h estime"]}),W.objectifs&&W.objectifs.length>0&&m.jsxs("span",{children:[" ",W.objectifs.length," objectif(s)"]})]})]}),m.jsxs("div",{className:"chapitre-card__actions",children:[m.jsx("button",{onClick:()=>Pe(W),className:`table-action-btn ${W.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:W.actif?"Dsactiver":"Activer",children:W.actif?"":""}),m.jsx("button",{onClick:()=>j(W),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),m.jsx("button",{onClick:()=>J(W),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:S===W.id,children:S===W.id?"":""})]})]},W.id))}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state__icon",children:""}),m.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),m.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),ce&&m.jsx("div",{className:"modal-overlay",onClick:se,children:m.jsxs("div",{className:"modal modal--lg",onClick:W=>W.stopPropagation(),children:[m.jsxs("div",{className:"modal__header",children:[m.jsx("h2",{className:"modal__title",children:ye?"Modifier le chapitre":"Nouveau chapitre"}),m.jsx("button",{onClick:se,className:"modal__close",children:""})]}),m.jsxs("form",{onSubmit:ge,children:[m.jsxs("div",{className:"modal__body",children:[!ye&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),m.jsxs("select",{name:"disciplineId",className:`form-select ${k.disciplineId?"form-select--error":""}`,value:D.disciplineId,onChange:ue,children:[m.jsx("option",{value:"",children:"Slectionner une discipline"}),r.map(W=>m.jsxs("option",{value:W.id,children:[W.icone," ",W.nom," (",W.classe,")"]},W.id))]}),k.disciplineId&&m.jsx("span",{className:"form-error",children:k.disciplineId})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[m.jsx("label",{className:"form-label form-label--required",children:"N"}),m.jsx("input",{type:"number",name:"numero",className:`form-input ${k.numero?"form-input--error":""}`,min:"1",value:D.numero,onChange:ue}),k.numero&&m.jsx("span",{className:"form-error",children:k.numero})]}),m.jsxs("div",{className:"form-group",style:{flex:1},children:[m.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),m.jsx("input",{type:"text",name:"titre",className:`form-input ${k.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:D.titre,onChange:ue}),k.titre&&m.jsx("span",{className:"form-error",children:k.titre})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Description"}),m.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:D.description||"",onChange:ue})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),m.jsxs("div",{className:"objectifs-input",children:[m.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:ke,onChange:W=>We(W.target.value),onKeyPress:W=>W.key==="Enter"&&(W.preventDefault(),Te())}),m.jsx("button",{type:"button",onClick:Te,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),D.objectifs&&D.objectifs.length>0&&m.jsx("ul",{className:"objectifs-list",children:D.objectifs.map((W,pt)=>m.jsxs("li",{className:"objectif-item",children:[m.jsxs("span",{children:[" ",W]}),m.jsx("button",{type:"button",onClick:()=>Y(pt),className:"objectif-remove",children:""})]},pt))})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),m.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:D.dureeEstimee||"",onChange:ue})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Options"}),m.jsxs("div",{className:"form-options",children:[m.jsxs("label",{className:"form-checkbox",children:[m.jsx("input",{type:"checkbox",name:"isPremium",checked:D.isPremium,onChange:ue}),m.jsx("span",{children:"Contenu Premium "})]}),m.jsxs("label",{className:"form-checkbox",children:[m.jsx("input",{type:"checkbox",name:"actif",checked:D.actif!==!1,onChange:ue}),m.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),m.jsxs("div",{className:"modal__footer",children:[m.jsx("button",{type:"button",onClick:se,className:"btn btn--outline",disabled:b,children:"Annuler"}),m.jsx("button",{type:"submit",className:"btn btn--primary",disabled:b,children:b?"Enregistrement...":ye?"Mettre  jour":"Crer le chapitre"})]})]})]})}),pe&&x&&m.jsx("div",{className:"modal-overlay",onClick:se,children:m.jsxs("div",{className:"modal",onClick:W=>W.stopPropagation(),children:[m.jsxs("div",{className:"modal__header",children:[m.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),m.jsx("button",{onClick:se,className:"modal__close",children:""})]}),m.jsxs("div",{className:"modal__body",children:[m.jsxs("p",{children:["Supprimer le chapitre ",m.jsxs("strong",{children:[x.numero,". ",x.titre]})," ?"]}),m.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),m.jsxs("div",{className:"modal__footer",children:[m.jsx("button",{onClick:se,className:"btn btn--outline",children:"Annuler"}),m.jsx("button",{onClick:Ge,className:"btn btn--danger",disabled:S!==null,children:S?"Suppression...":"Supprimer"})]})]})}),m.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},Ih=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],Dh={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},rp=50,gb={titre:"",type:"cours",description:"",contenu:"",chapitreId:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},a4=()=>{const{currentUser:r}=za(),[e,n]=z.useState([]),[s,o]=z.useState([]),[c,d]=z.useState([]),[p,g]=z.useState([]),[_,b]=z.useState(""),[A,S]=z.useState(""),[V,F]=z.useState(""),[X,G]=z.useState(""),[re,ce]=z.useState(""),[oe,pe]=z.useState(!0),[Ce,ye]=z.useState(!1),[N,x]=z.useState(!1),[C,D]=z.useState(!1),[O,k]=z.useState(null),[R,ke]=z.useState(!1),[We,$]=z.useState(0),[ae,fe]=z.useState(null),[Me,Ie]=z.useState(null),[j,J]=z.useState(!1),[se,ue]=z.useState(!1),[Te,Y]=z.useState(!1),[ge,Ge]=z.useState(null),[Pe,Qt]=z.useState(null),[W,pt]=z.useState(null),[Ve,Ct]=z.useState({...gb,disciplineId:""}),[kt,Wt]=z.useState({}),[Yt,di]=z.useState(null),[ht,dt]=z.useState(null),Xn=z.useRef(null),[Vr,Ci]=z.useState(""),Jt=z.useCallback(async()=>{try{pe(!0);const L=await wa.getAll();n(L),L.length>0&&!_&&b(L[0].id)}catch(L){console.error("Erreur lors du chargement des disciplines:",L),fe("Impossible de charger les disciplines.")}finally{pe(!1)}},[_]),Ii=z.useCallback(async()=>{if(!_){o([]);return}try{ye(!0);const L=await ys.getByDiscipline(_);o(L)}catch(L){console.error("Erreur lors du chargement des chapitres:",L)}finally{ye(!1)}},[_]),fi=z.useCallback(async()=>{if(!_){d([]),g([]);return}try{x(!0);const L=await gs.getByDiscipline(_);d(L),g(L)}catch(L){console.error("Erreur lors du chargement des ressources:",L),fe("Impossible de charger les ressources.")}finally{x(!1)}},[_]);z.useEffect(()=>{Jt()},[Jt]),z.useEffect(()=>{Ii()},[Ii]),z.useEffect(()=>{fi()},[fi]),z.useEffect(()=>{let L=[...c];if(A&&(L=L.filter(be=>be.chapitreId===A)),V&&(L=L.filter(be=>be.type===V)),X==="premium"?L=L.filter(be=>be.isPremium):X==="free"&&(L=L.filter(be=>!be.isPremium)),re){const be=re.toLowerCase();L=L.filter(Qe=>Qe.titre.toLowerCase().includes(be)||Qe.description?.toLowerCase().includes(be)||Qe.tags?.some(Zt=>Zt.toLowerCase().includes(be)))}g(L)},[c,A,V,X,re]);const Ks=()=>{const L={};if(Ve.disciplineId||(L.disciplineId="Veuillez slectionner une discipline"),Ve.titre.trim()?Ve.titre.length<3&&(L.titre="Le titre doit contenir au moins 3 caractres"):L.titre="Le titre est requis",Ve.type||(L.type="Veuillez slectionner un type de ressource"),Yt){const be="."+Yt.name.split(".").pop()?.toLowerCase(),Qe=Dh[Ve.type];Qe.includes(be)||(L.fichier=`Extension non autorise. Extensions acceptes : ${Qe.join(", ")}`),Yt.size/(1024*1024)>rp&&(L.fichier=`Le fichier est trop volumineux (max ${rp} Mo)`)}return Wt(L),Object.keys(L).length===0},Di=L=>{b(L),S(""),fe(null)},Ba=()=>{Ge(null),Ct({...gb,disciplineId:_}),Wt({}),di(null),dt(null),Ci(""),J(!0)},qa=L=>{Ge(L),Ct({disciplineId:L.disciplineId,titre:L.titre,type:L.type,description:L.description,contenu:L.contenu,chapitreId:L.chapitreId||"",ordre:L.ordre,isPremium:L.isPremium,actif:L.actif,tags:L.tags||[],duree:L.duree,urlExterne:L.urlExterne||""}),Wt({}),di(null),dt(L.fichierUrl||null),Ci(""),J(!0)},Fa=L=>{pt(L),Y(!0)},Ha=L=>{Qt(L),ue(!0)},At=()=>{J(!1),ue(!1),Y(!1),Ge(null),Qt(null),pt(null),Wt({}),di(null),dt(null),Ci("")},tt=L=>{const{name:be,value:Qe,type:Zt}=L.target,Ys=L.target.checked;Ct(xn=>({...xn,[be]:Zt==="checkbox"?Ys:Zt==="number"?Number(Qe):Qe})),kt[be]&&Wt(xn=>({...xn,[be]:void 0}))},Sn=L=>{const be=L.target.files?.[0];if(be)if(di(be),Wt(Qe=>({...Qe,fichier:void 0})),be.type.startsWith("image/")||be.type.startsWith("video/")){const Qe=new FileReader;Qe.onloadend=()=>{dt(Qe.result)},Qe.readAsDataURL(be)}else dt(null)},bt=()=>{di(null),dt(null),Xn.current&&(Xn.current.value="")},Qs=()=>{Vr.trim()&&!Ve.tags?.includes(Vr.trim())&&(Ct(L=>({...L,tags:[...L.tags||[],Vr.trim()]})),Ci(""))},kr=L=>{Ct(be=>({...be,tags:(be.tags||[]).filter((Qe,Zt)=>Zt!==L)}))},Ga=async L=>{if(L.preventDefault(),!!Ks())try{D(!0),fe(null);let be=ge?.fichierUrl,Qe=ge?.fichierNom;if(Yt){ke(!0);const Ys=ge?.id||`temp_${Date.now()}`,xn=await gs.uploadFile(Yt,Ys,Xs=>$(Xs));be=xn.url,Qe=xn.nom,ke(!1)}const Zt={...Ve,fichierUrl:be,fichierNom:Qe,auteurId:r?.uid};ge?(await gs.update(ge.id,Zt),Ie("Ressource modifie avec succs !")):(await gs.create(Zt),Ie("Ressource cre avec succs !")),At(),await fi(),setTimeout(()=>Ie(null),3e3)}catch(be){console.error("Erreur lors de la sauvegarde:",be),fe("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{D(!1),ke(!1),$(0)}},$n=async()=>{if(Pe)try{k(Pe.id),Pe.fichierUrl&&await gs.deleteFile(Pe.fichierUrl),await gs.delete(Pe.id),Ie("Ressource supprime avec succs !"),At(),await fi(),setTimeout(()=>Ie(null),3e3)}catch(L){console.error("Erreur lors de la suppression:",L),fe("Erreur lors de la suppression. Veuillez ressayer.")}finally{k(null)}},ar=async L=>{try{await gs.togglePremium(L.id,!L.isPremium),await fi(),Ie(L.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>Ie(null),2e3)}catch{fe("Erreur lors de la mise  jour")}},wt=L=>{const be=e.find(Qe=>Qe.id===L);return be?be.nom:"Non trouve"},Wn=L=>{const be=s.find(Qe=>Qe.id===L);return be?`${be.numero}. ${be.titre}`:""},mn=L=>Ih.find(be=>be.value===L)||Ih[0],kn=L=>L<1024?L+" o":L<1024*1024?(L/1024).toFixed(1)+" Ko":(L/(1024*1024)).toFixed(1)+" Mo";return m.jsxs("div",{className:"resource-manager",children:[m.jsxs("header",{className:"admin-page-header",children:[m.jsxs("div",{className:"admin-page-header__info",children:[m.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),m.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),m.jsx("div",{className:"admin-page-header__actions",children:m.jsxs("button",{onClick:Ba,className:"btn btn--primary",disabled:!_||oe,children:[m.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),ae&&m.jsxs("div",{className:"alert alert--error",children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:ae})}),m.jsx("button",{onClick:()=>fe(null),className:"alert__close",children:""})]}),Me&&m.jsxs("div",{className:"alert alert--success",children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:Me})})]}),m.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:m.jsx("div",{className:"content-card__body",children:m.jsxs("div",{className:"discipline-selector",children:[m.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),oe?m.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?m.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",m.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):m.jsx("div",{className:"discipline-tabs",children:e.map(L=>m.jsxs("button",{className:`discipline-tab ${_===L.id?"discipline-tab--active":""}`,onClick:()=>Di(L.id),style:{"--discipline-color":L.couleur||"#2563eb"},children:[m.jsx("span",{className:"discipline-tab__icon",children:L.icone||""}),m.jsx("span",{className:"discipline-tab__name",children:L.nom}),m.jsx("span",{className:"discipline-tab__class",children:L.classe})]},L.id))})]})})}),m.jsxs("div",{className:"admin-table-container",children:[m.jsxs("div",{className:"admin-table-header",children:[m.jsxs("h2",{className:"admin-table-title",children:["Ressources ",_&&`- ${wt(_)}`,p.length>0&&` (${p.length})`]}),m.jsxs("div",{className:"admin-table-actions",children:[m.jsxs("div",{className:"search-input",children:[m.jsx("span",{className:"search-input__icon",children:""}),m.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:re,onChange:L=>ce(L.target.value)})]}),m.jsxs("select",{className:"form-select form-select--sm",value:A,onChange:L=>S(L.target.value),disabled:Ce||s.length===0,children:[m.jsx("option",{value:"",children:"Tous les chapitres"}),s.map(L=>m.jsxs("option",{value:L.id,children:[L.numero,". ",L.titre]},L.id))]}),m.jsxs("select",{className:"form-select form-select--sm",value:V,onChange:L=>F(L.target.value),children:[m.jsx("option",{value:"",children:"Tous les types"}),Ih.map(L=>m.jsxs("option",{value:L.value,children:[L.icon," ",L.label]},L.value))]}),m.jsxs("select",{className:"form-select form-select--sm",value:X,onChange:L=>G(L.target.value),children:[m.jsx("option",{value:"",children:"Tous"}),m.jsx("option",{value:"premium",children:" Premium"}),m.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),N?m.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[m.jsx("div",{className:"spinner"}),m.jsx("p",{children:"Chargement des ressources..."})]}):_?p.length===0?m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state__icon",children:""}),m.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),m.jsx("p",{className:"empty-state__message",children:re||V||X||A?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!re&&!V&&!X&&!A&&m.jsx("button",{onClick:Ba,className:"btn btn--primary",children:"Crer la premire ressource"})]}):m.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:p.map(L=>{const be=mn(L.type);return m.jsxs("div",{className:"resource-item",children:[m.jsx("div",{className:`resource-item__icon resource-item__icon--${L.type}`,style:{backgroundColor:`${be.color}15`,color:be.color},children:be.icon}),m.jsxs("div",{className:"resource-item__content",children:[m.jsxs("div",{className:"resource-item__title",children:[L.titre,L.isPremium&&m.jsx("span",{className:"badge badge--premium",children:"Premium"}),!L.actif&&m.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),m.jsxs("div",{className:"resource-item__meta",children:[m.jsx("span",{children:be.label}),L.chapitreId&&m.jsxs("span",{children:[" ",Wn(L.chapitreId)]}),L.duree&&m.jsxs("span",{children:[" ",L.duree," min"]}),L.fichierNom&&m.jsxs("span",{children:[" ",L.fichierNom]}),L.tags&&L.tags.length>0&&m.jsxs("span",{children:[" ",L.tags.join(", ")]})]})]}),m.jsxs("div",{className:"resource-item__actions",children:[m.jsx("button",{onClick:()=>ar(L),className:`table-action-btn ${L.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:L.isPremium?"Passer en gratuit":"Passer en Premium",children:L.isPremium?"":""}),(L.fichierUrl||L.urlExterne)&&m.jsx("button",{onClick:()=>Fa(L),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),m.jsx("button",{onClick:()=>qa(L),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),m.jsx("button",{onClick:()=>Ha(L),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:O===L.id,children:O===L.id?"":""})]})]},L.id)})}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-state__icon",children:""}),m.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),m.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),j&&m.jsx("div",{className:"modal-overlay",onClick:At,children:m.jsxs("div",{className:"modal modal--xl",onClick:L=>L.stopPropagation(),children:[m.jsxs("div",{className:"modal__header",children:[m.jsx("h2",{className:"modal__title",children:ge?"Modifier la ressource":"Nouvelle ressource"}),m.jsx("button",{onClick:At,className:"modal__close",children:""})]}),m.jsxs("form",{onSubmit:Ga,children:[m.jsxs("div",{className:"modal__body",children:[!ge&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),m.jsxs("select",{name:"disciplineId",className:`form-select ${kt.disciplineId?"form-select--error":""}`,value:Ve.disciplineId,onChange:tt,children:[m.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(L=>m.jsxs("option",{value:L.id,children:[L.icone," ",L.nom," (",L.classe,")"]},L.id))]}),kt.disciplineId&&m.jsx("span",{className:"form-error",children:kt.disciplineId})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",style:{flex:2},children:[m.jsx("label",{className:"form-label form-label--required",children:"Titre"}),m.jsx("input",{type:"text",name:"titre",className:`form-input ${kt.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:Ve.titre,onChange:tt}),kt.titre&&m.jsx("span",{className:"form-error",children:kt.titre})]}),m.jsxs("div",{className:"form-group",style:{flex:1},children:[m.jsx("label",{className:"form-label form-label--required",children:"Type"}),m.jsx("select",{name:"type",className:`form-select ${kt.type?"form-select--error":""}`,value:Ve.type,onChange:tt,children:Ih.map(L=>m.jsxs("option",{value:L.value,children:[L.icon," ",L.label]},L.value))}),kt.type&&m.jsx("span",{className:"form-error",children:kt.type})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),m.jsxs("select",{name:"chapitreId",className:"form-select",value:Ve.chapitreId||"",onChange:tt,disabled:Ce,children:[m.jsx("option",{value:"",children:"Aucun chapitre"}),s.map(L=>m.jsxs("option",{value:L.id,children:[L.numero,". ",L.titre]},L.id))]})]}),m.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[m.jsx("label",{className:"form-label",children:"Ordre"}),m.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:Ve.ordre,onChange:tt})]}),m.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[m.jsx("label",{className:"form-label",children:"Dure (min)"}),m.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:Ve.duree||"",onChange:tt})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Description"}),m.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:Ve.description||"",onChange:tt})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{className:"form-label",children:["Fichier",m.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",Dh[Ve.type].join(", ")," - max ",rp," Mo)"]})]}),m.jsxs("div",{className:"file-upload",children:[m.jsx("input",{ref:Xn,type:"file",accept:Dh[Ve.type].join(","),onChange:Sn,className:"file-upload__input",id:"file-input"}),!Yt&&!ht?m.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[m.jsx("div",{className:"file-upload__icon",children:""}),m.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),m.jsx("p",{className:"file-upload__hint",children:Dh[Ve.type].join(", ")})]}):m.jsxs("div",{className:"file-upload__preview",children:[Yt?.type.startsWith("image/")&&ht&&m.jsx("img",{src:ht,alt:"Aperu",className:"file-preview__image"}),Yt?.type.startsWith("video/")&&ht&&m.jsx("video",{src:ht,controls:!0,className:"file-preview__video"}),!Yt?.type.startsWith("image/")&&!Yt?.type.startsWith("video/")&&m.jsx("div",{className:"file-preview__document",children:m.jsx("span",{className:"file-preview__icon",children:mn(Ve.type).icon})}),m.jsxs("div",{className:"file-preview__info",children:[m.jsx("p",{className:"file-preview__name",children:Yt?.name||ge?.fichierNom}),Yt&&m.jsx("p",{className:"file-preview__size",children:kn(Yt.size)})]}),m.jsx("button",{type:"button",onClick:bt,className:"file-preview__remove",children:""})]})]}),kt.fichier&&m.jsx("span",{className:"form-error",children:kt.fichier}),R&&m.jsxs("div",{className:"upload-progress",children:[m.jsx("div",{className:"upload-progress__bar",style:{width:`${We}%`}}),m.jsxs("span",{className:"upload-progress__text",children:[We,"%"]})]})]}),Ve.type==="video"&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),m.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:Ve.urlExterne||"",onChange:tt}),m.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),Ve.type==="cours"&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Contenu du cours"}),m.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:Ve.contenu||"",onChange:tt}),m.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Tags"}),m.jsxs("div",{className:"tags-input",children:[m.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:Vr,onChange:L=>Ci(L.target.value),onKeyPress:L=>L.key==="Enter"&&(L.preventDefault(),Qs())}),m.jsx("button",{type:"button",onClick:Qs,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),Ve.tags&&Ve.tags.length>0&&m.jsx("div",{className:"tags-list",children:Ve.tags.map((L,be)=>m.jsxs("span",{className:"tag",children:[L,m.jsx("button",{type:"button",onClick:()=>kr(be),className:"tag__remove",children:""})]},be))})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"form-label",children:"Options"}),m.jsxs("div",{className:"form-options",children:[m.jsxs("label",{className:"form-checkbox",children:[m.jsx("input",{type:"checkbox",name:"isPremium",checked:Ve.isPremium,onChange:tt}),m.jsx("span",{children:"Contenu Premium "})]}),m.jsxs("label",{className:"form-checkbox",children:[m.jsx("input",{type:"checkbox",name:"actif",checked:Ve.actif!==!1,onChange:tt}),m.jsx("span",{children:"Ressource active"})]})]})]})]}),m.jsxs("div",{className:"modal__footer",children:[m.jsx("button",{type:"button",onClick:At,className:"btn btn--outline",disabled:C||R,children:"Annuler"}),m.jsx("button",{type:"submit",className:"btn btn--primary",disabled:C||R,children:C||R?R?`Upload ${We}%...`:"Enregistrement...":ge?"Mettre  jour":"Crer la ressource"})]})]})]})}),Te&&W&&m.jsx("div",{className:"modal-overlay",onClick:At,children:m.jsxs("div",{className:"modal modal--xl",onClick:L=>L.stopPropagation(),children:[m.jsxs("div",{className:"modal__header",children:[m.jsxs("h2",{className:"modal__title",children:[mn(W.type).icon," ",W.titre]}),m.jsx("button",{onClick:At,className:"modal__close",children:""})]}),m.jsxs("div",{className:"modal__body",children:[W.type==="video"&&W.urlExterne?m.jsx("div",{className:"preview-video",children:m.jsx("iframe",{src:W.urlExterne.replace("watch?v=","embed/"),title:W.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):W.fichierUrl?m.jsx("div",{className:"preview-file",children:W.fichierUrl.match(/\.(jpg|jpeg|png|gif|webp)$/i)?m.jsx("img",{src:W.fichierUrl,alt:W.titre}):W.fichierUrl.match(/\.(mp4|webm)$/i)?m.jsx("video",{src:W.fichierUrl,controls:!0}):W.fichierUrl.match(/\.pdf$/i)?m.jsx("iframe",{src:W.fichierUrl,title:W.titre}):m.jsxs("div",{className:"preview-download",children:[m.jsx("span",{className:"preview-download__icon",children:mn(W.type).icon}),m.jsx("p",{children:W.fichierNom}),m.jsx("a",{href:W.fichierUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):W.contenu?m.jsx("div",{className:"preview-content",children:m.jsx("p",{children:W.contenu})}):m.jsx("div",{className:"preview-empty",children:m.jsx("p",{children:"Aucun contenu  prvisualiser"})}),m.jsxs("div",{className:"preview-info",children:[W.description&&m.jsx("p",{className:"preview-description",children:W.description}),m.jsxs("div",{className:"preview-meta",children:[m.jsxs("span",{children:["Type : ",mn(W.type).label]}),W.duree&&m.jsxs("span",{children:["Dure : ",W.duree," min"]}),W.isPremium&&m.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),se&&Pe&&m.jsx("div",{className:"modal-overlay",onClick:At,children:m.jsxs("div",{className:"modal",onClick:L=>L.stopPropagation(),children:[m.jsxs("div",{className:"modal__header",children:[m.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),m.jsx("button",{onClick:At,className:"modal__close",children:""})]}),m.jsxs("div",{className:"modal__body",children:[m.jsxs("p",{children:["Supprimer la ressource ",m.jsx("strong",{children:Pe.titre})," ?"]}),Pe.fichierUrl&&m.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[m.jsx("span",{className:"alert__icon",children:""}),m.jsx("div",{className:"alert__content",children:m.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),m.jsxs("div",{className:"modal__footer",children:[m.jsx("button",{onClick:At,className:"btn btn--outline",children:"Annuler"}),m.jsx("button",{onClick:$n,className:"btn btn--danger",disabled:O!==null,children:O?"Suppression...":"Supprimer"})]})]})}),m.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},o4=()=>{const{currentUser:r,logout:e}=za();return m.jsxs("div",{style:{padding:"3rem",maxWidth:"900px",margin:"0 auto"},children:[m.jsx("h1",{style:{color:"#2563eb",fontSize:"3rem",marginBottom:"0.5rem"},children:" PedaClic"}),m.jsx("p",{style:{fontSize:"1.2rem",color:"#6b7280",marginBottom:"2rem"},children:"L'cole en un clic"}),r?m.jsxs("div",{style:{padding:"1.5rem",background:"#ecfdf5",border:"1px solid #10b981",borderRadius:"12px",marginBottom:"2rem"},children:[m.jsxs("p",{style:{margin:0},children:[" Connect : ",m.jsx("strong",{children:r.displayName||r.email})," (",r.role,")"]}),m.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(r.role==="admin"||r.role==="prof")&&m.jsx($i,{to:"/admin",style:{padding:"0.5rem 1.5rem",background:"#2563eb",color:"white",borderRadius:"8px",textDecoration:"none",fontWeight:"600"},children:"Accder  l'Admin "}),m.jsx("button",{onClick:()=>e(),style:{padding:"0.5rem 1.5rem",background:"#ef4444",color:"white",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"600"},children:"Dconnexion"})]})]}):m.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #2563eb, #1e40af)",borderRadius:"12px",color:"white",textAlign:"center",marginBottom:"2rem"},children:[m.jsx("p",{style:{marginBottom:"1rem",fontSize:"1.1rem"},children:" Connectez-vous pour accder  la plateforme"}),m.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[m.jsx($i,{to:"/connexion",style:{padding:"0.75rem 2rem",background:"white",color:"#2563eb",borderRadius:"8px",textDecoration:"none",fontWeight:"600"},children:"Se connecter"}),m.jsx($i,{to:"/inscription",style:{padding:"0.75rem 2rem",background:"transparent",color:"white",borderRadius:"8px",textDecoration:"none",fontWeight:"600",border:"2px solid white"},children:"Crer un compte"})]})]}),m.jsxs("div",{style:{padding:"2rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[m.jsx("h2",{style:{color:"#059669",marginBottom:"1rem"},children:" Fonctionnalits"}),m.jsxs("ul",{style:{lineHeight:"2.2",listStyle:"none",padding:0},children:[m.jsx("li",{children:" Authentification (Admin / Professeur / lve)"}),m.jsx("li",{children:" Gestion des disciplines, chapitres, ressources"}),m.jsx("li",{children:" Upload de fichiers vers Firebase Storage"}),m.jsx("li",{children:" Systme Premium / Gratuit"})]})]})]})},l4=()=>m.jsx(Xj,{children:m.jsxs(tx,{children:[m.jsx(wi,{path:"/",element:m.jsx(o4,{})}),m.jsx(wi,{path:"/connexion",element:m.jsx(Wj,{})}),m.jsx(wi,{path:"/inscription",element:m.jsx(Jj,{})}),m.jsx(wi,{path:"/admin",element:m.jsx(jo,{children:m.jsx(Mo,{currentPage:"dashboard",children:m.jsx(n4,{})})})}),m.jsx(wi,{path:"/admin/disciplines",element:m.jsx(jo,{children:m.jsx(Mo,{currentPage:"disciplines",children:m.jsx(r4,{})})})}),m.jsx(wi,{path:"/admin/chapitres",element:m.jsx(jo,{children:m.jsx(Mo,{currentPage:"chapitres",children:m.jsx(s4,{})})})}),m.jsx(wi,{path:"/admin/ressources",element:m.jsx(jo,{children:m.jsx(Mo,{currentPage:"ressources",children:m.jsx(a4,{})})})}),m.jsx(wi,{path:"/admin/quiz",element:m.jsx(jo,{children:m.jsx(Mo,{currentPage:"quiz",children:m.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:m.jsx("h2",{children:" Quiz - Bientt disponible"})})})})}),m.jsx(wi,{path:"/admin/utilisateurs",element:m.jsx(jo,{children:m.jsx(Mo,{currentPage:"utilisateurs",children:m.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:m.jsx("h2",{children:" Utilisateurs - Bientt disponible"})})})})}),m.jsx(wi,{path:"*",element:m.jsx(Z1,{to:"/",replace:!0})})]})}),Ew=document.getElementById("root");if(!Ew)throw new Error("L'lment #root n'existe pas");const c4=l1.createRoot(Ew);c4.render(m.jsx(_b.StrictMode,{children:m.jsx(lx,{children:m.jsx(l4,{})})}));
//# sourceMappingURL=index-CXLzxA5_.js.map
