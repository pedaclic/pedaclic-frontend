function aV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function es(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var w_={exports:{}},Mf={};var CC;function sV(){if(CC)return Mf;CC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:s}}return Mf.Fragment=e,Mf.jsx=n,Mf.jsxs=n,Mf}var OC;function oV(){return OC||(OC=1,w_.exports=sV()),w_.exports}var o=oV(),j_={exports:{}},We={};var PC;function lV(){if(PC)return We;PC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function _(F){return F===null||typeof F!="object"?null:(F=y&&F[y]||F["@@iterator"],typeof F=="function"?F:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,N={};function A(F,te,ye){this.props=F,this.context=te,this.refs=N,this.updater=ye||E}A.prototype.isReactComponent={},A.prototype.setState=function(F,te){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,te,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function R(){}R.prototype=A.prototype;function O(F,te,ye){this.props=F,this.context=te,this.refs=N,this.updater=ye||E}var C=O.prototype=new R;C.constructor=O,w(C,A.prototype),C.isPureReactComponent=!0;var V=Array.isArray;function $(){}var D={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function k(F,te,ye){var we=ye.ref;return{$$typeof:t,type:F,key:te,ref:we!==void 0?we:null,props:ye}}function U(F,te){return k(F.type,te,F.props)}function q(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function z(F){var te={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ye){return te[ye]})}var M=/\/+/g;function W(F,te){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):te.toString(36)}function Q(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then($,$):(F.status="pending",F.then(function(te){F.status==="pending"&&(F.status="fulfilled",F.value=te)},function(te){F.status==="pending"&&(F.status="rejected",F.reason=te)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function H(F,te,ye,we,Z){var ne=typeof F;(ne==="undefined"||ne==="boolean")&&(F=null);var me=!1;if(F===null)me=!0;else switch(ne){case"bigint":case"string":case"number":me=!0;break;case"object":switch(F.$$typeof){case t:case e:me=!0;break;case p:return me=F._init,H(me(F._payload),te,ye,we,Z)}}if(me)return Z=Z(F),me=we===""?"."+W(F,0):we,V(Z)?(ye="",me!=null&&(ye=me.replace(M,"$&/")+"/"),H(Z,te,ye,"",function(Se){return Se})):Z!=null&&(q(Z)&&(Z=U(Z,ye+(Z.key==null||F&&F.key===Z.key?"":(""+Z.key).replace(M,"$&/")+"/")+me)),te.push(Z)),1;me=0;var Me=we===""?".":we+":";if(V(F))for(var se=0;se<F.length;se++)we=F[se],ne=Me+W(we,se),me+=H(we,te,ye,ne,Z);else if(se=_(F),typeof se=="function")for(F=se.call(F),se=0;!(we=F.next()).done;)we=we.value,ne=Me+W(we,se++),me+=H(we,te,ye,ne,Z);else if(ne==="object"){if(typeof F.then=="function")return H(Q(F),te,ye,we,Z);throw te=String(F),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return me}function le(F,te,ye){if(F==null)return F;var we=[],Z=0;return H(F,we,"","",function(ne){return te.call(ye,ne,Z++)}),we}function _e(F){if(F._status===-1){var te=F._result;te=te(),te.then(function(ye){(F._status===0||F._status===-1)&&(F._status=1,F._result=ye)},function(ye){(F._status===0||F._status===-1)&&(F._status=2,F._result=ye)}),F._status===-1&&(F._status=0,F._result=te)}if(F._status===1)return F._result.default;throw F._result}var je=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Y={map:le,forEach:function(F,te,ye){le(F,function(){te.apply(this,arguments)},ye)},count:function(F){var te=0;return le(F,function(){te++}),te},toArray:function(F){return le(F,function(te){return te})||[]},only:function(F){if(!q(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return We.Activity=g,We.Children=Y,We.Component=A,We.Fragment=n,We.Profiler=i,We.PureComponent=O,We.StrictMode=r,We.Suspense=f,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,We.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},We.cache=function(F){return function(){return F.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(F,te,ye){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var we=w({},F.props),Z=F.key;if(te!=null)for(ne in te.key!==void 0&&(Z=""+te.key),te)!I.call(te,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&te.ref===void 0||(we[ne]=te[ne]);var ne=arguments.length-2;if(ne===1)we.children=ye;else if(1<ne){for(var me=Array(ne),Me=0;Me<ne;Me++)me[Me]=arguments[Me+2];we.children=me}return k(F.type,Z,we)},We.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},We.createElement=function(F,te,ye){var we,Z={},ne=null;if(te!=null)for(we in te.key!==void 0&&(ne=""+te.key),te)I.call(te,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(Z[we]=te[we]);var me=arguments.length-2;if(me===1)Z.children=ye;else if(1<me){for(var Me=Array(me),se=0;se<me;se++)Me[se]=arguments[se+2];Z.children=Me}if(F&&F.defaultProps)for(we in me=F.defaultProps,me)Z[we]===void 0&&(Z[we]=me[we]);return k(F,ne,Z)},We.createRef=function(){return{current:null}},We.forwardRef=function(F){return{$$typeof:u,render:F}},We.isValidElement=q,We.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:_e}},We.memo=function(F,te){return{$$typeof:h,type:F,compare:te===void 0?null:te}},We.startTransition=function(F){var te=D.T,ye={};D.T=ye;try{var we=F(),Z=D.S;Z!==null&&Z(ye,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then($,je)}catch(ne){je(ne)}finally{te!==null&&ye.types!==null&&(te.types=ye.types),D.T=te}},We.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},We.use=function(F){return D.H.use(F)},We.useActionState=function(F,te,ye){return D.H.useActionState(F,te,ye)},We.useCallback=function(F,te){return D.H.useCallback(F,te)},We.useContext=function(F){return D.H.useContext(F)},We.useDebugValue=function(){},We.useDeferredValue=function(F,te){return D.H.useDeferredValue(F,te)},We.useEffect=function(F,te){return D.H.useEffect(F,te)},We.useEffectEvent=function(F){return D.H.useEffectEvent(F)},We.useId=function(){return D.H.useId()},We.useImperativeHandle=function(F,te,ye){return D.H.useImperativeHandle(F,te,ye)},We.useInsertionEffect=function(F,te){return D.H.useInsertionEffect(F,te)},We.useLayoutEffect=function(F,te){return D.H.useLayoutEffect(F,te)},We.useMemo=function(F,te){return D.H.useMemo(F,te)},We.useOptimistic=function(F,te){return D.H.useOptimistic(F,te)},We.useReducer=function(F,te,ye){return D.H.useReducer(F,te,ye)},We.useRef=function(F){return D.H.useRef(F)},We.useState=function(F){return D.H.useState(F)},We.useSyncExternalStore=function(F,te,ye){return D.H.useSyncExternalStore(F,te,ye)},We.useTransition=function(){return D.H.useTransition()},We.version="19.2.4",We}var IC;function vd(){return IC||(IC=1,j_.exports=lV()),j_.exports}var j=vd();const FD=es(j),HD=aV({__proto__:null,default:FD},[j]);var E_={exports:{}},zf={},N_={exports:{}},S_={};var RC;function cV(){return RC||(RC=1,(function(t){function e(H,le){var _e=H.length;H.push(le);e:for(;0<_e;){var je=_e-1>>>1,Y=H[je];if(0<i(Y,le))H[je]=le,H[_e]=Y,_e=je;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var le=H[0],_e=H.pop();if(_e!==le){H[0]=_e;e:for(var je=0,Y=H.length,F=Y>>>1;je<F;){var te=2*(je+1)-1,ye=H[te],we=te+1,Z=H[we];if(0>i(ye,_e))we<Y&&0>i(Z,ye)?(H[je]=Z,H[we]=_e,je=we):(H[je]=ye,H[te]=_e,je=te);else if(we<Y&&0>i(Z,_e))H[je]=Z,H[we]=_e,je=we;else break e}}return le}function i(H,le){var _e=H.sortIndex-le.sortIndex;return _e!==0?_e:H.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],h=[],p=1,g=null,y=3,_=!1,E=!1,w=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function C(H){for(var le=n(h);le!==null;){if(le.callback===null)r(h);else if(le.startTime<=H)r(h),le.sortIndex=le.expirationTime,e(f,le);else break;le=n(h)}}function V(H){if(w=!1,C(H),!E)if(n(f)!==null)E=!0,$||($=!0,z());else{var le=n(h);le!==null&&Q(V,le.startTime-H)}}var $=!1,D=-1,I=5,k=-1;function U(){return N?!0:!(t.unstable_now()-k<I)}function q(){if(N=!1,$){var H=t.unstable_now();k=H;var le=!0;try{e:{E=!1,w&&(w=!1,R(D),D=-1),_=!0;var _e=y;try{t:{for(C(H),g=n(f);g!==null&&!(g.expirationTime>H&&U());){var je=g.callback;if(typeof je=="function"){g.callback=null,y=g.priorityLevel;var Y=je(g.expirationTime<=H);if(H=t.unstable_now(),typeof Y=="function"){g.callback=Y,C(H),le=!0;break t}g===n(f)&&r(f),C(H)}else r(f);g=n(f)}if(g!==null)le=!0;else{var F=n(h);F!==null&&Q(V,F.startTime-H),le=!1}}break e}finally{g=null,y=_e,_=!1}le=void 0}}finally{le?z():$=!1}}}var z;if(typeof O=="function")z=function(){O(q)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,W=M.port2;M.port1.onmessage=q,z=function(){W.postMessage(null)}}else z=function(){A(q,0)};function Q(H,le){D=A(function(){H(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var le=3;break;default:le=y}var _e=y;y=le;try{return H()}finally{y=_e}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(H,le){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var _e=y;y=H;try{return le()}finally{y=_e}},t.unstable_scheduleCallback=function(H,le,_e){var je=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?je+_e:je):_e=je,H){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=_e+Y,H={id:p++,callback:le,priorityLevel:H,startTime:_e,expirationTime:Y,sortIndex:-1},_e>je?(H.sortIndex=_e,e(h,H),n(f)===null&&H===n(h)&&(w?(R(D),D=-1):w=!0,Q(V,_e-je))):(H.sortIndex=Y,e(f,H),E||_||(E=!0,$||($=!0,z()))),H},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(H){var le=y;return function(){var _e=y;y=le;try{return H.apply(this,arguments)}finally{y=_e}}}})(S_)),S_}var kC;function uV(){return kC||(kC=1,N_.exports=cV()),N_.exports}var A_={exports:{}},gr={};var DC;function dV(){if(DC)return gr;DC=1;var t=vd();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return gr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gr.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(f,h,null,p)},gr.flushSync=function(f){var h=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=h,r.p=p,r.d.f()}},gr.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},gr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},gr.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:_}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},gr.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},gr.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},gr.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},gr.requestFormReset=function(f){r.d.r(f)},gr.unstable_batchedUpdates=function(f,h){return f(h)},gr.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},gr.useFormStatus=function(){return c.H.useHostTransitionStatus()},gr.version="19.2.4",gr}var MC;function GD(){if(MC)return A_.exports;MC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),A_.exports=dV(),A_.exports}var zC;function fV(){if(zC)return zf;zC=1;var t=uV(),e=vd(),n=GD();function r(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function c(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function f(a){if(s(a)!==a)throw Error(r(188))}function h(a){var l=a.alternate;if(!l){if(l=s(a),l===null)throw Error(r(188));return l!==a?null:a}for(var d=a,m=l;;){var b=d.return;if(b===null)break;var x=b.alternate;if(x===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===x.child){for(x=b.child;x;){if(x===d)return f(b),a;if(x===m)return f(b),l;x=x.sibling}throw Error(r(188))}if(d.return!==m.return)d=b,m=x;else{for(var T=!1,L=b.child;L;){if(L===d){T=!0,d=b,m=x;break}if(L===m){T=!0,m=b,d=x;break}L=L.sibling}if(!T){for(L=x.child;L;){if(L===d){T=!0,d=x,m=b;break}if(L===m){T=!0,m=x,d=b;break}L=L.sibling}if(!T)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:l}function p(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=p(a),l!==null)return l;a=a.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),O=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function z(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var M=Symbol.for("react.client.reference");function W(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===M?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case A:return"Profiler";case N:return"StrictMode";case V:return"Suspense";case $:return"SuspenseList";case k:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case O:return a.displayName||"Context";case R:return(a._context.displayName||"Context")+".Consumer";case C:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return l=a.displayName||null,l!==null?l:W(a.type)||"Memo";case I:l=a._payload,a=a._init;try{return W(a(l))}catch{}}return null}var Q=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},je=[],Y=-1;function F(a){return{current:a}}function te(a){0>Y||(a.current=je[Y],je[Y]=null,Y--)}function ye(a,l){Y++,je[Y]=a.current,a.current=l}var we=F(null),Z=F(null),ne=F(null),me=F(null);function Me(a,l){switch(ye(ne,l),ye(Z,a),ye(we,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?ZT(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=ZT(l),a=JT(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}te(we),ye(we,a)}function se(){te(we),te(Z),te(ne)}function Se(a){a.memoizedState!==null&&ye(me,a);var l=we.current,d=JT(l,a.type);l!==d&&(ye(Z,a),ye(we,d))}function X(a){Z.current===a&&(te(we),te(Z)),me.current===a&&(te(me),If._currentValue=_e)}var pe,ke;function Fe(a){if(pe===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);pe=l&&l[1]||"",ke=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+a+ke}var ot=!1;function ht(a,l){if(!a||ot)return"";ot=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(de){var oe=de}Reflect.construct(a,[],be)}else{try{be.call()}catch(de){oe=de}a.call(be.prototype)}}else{try{throw Error()}catch(de){oe=de}(be=a())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(de){if(de&&oe&&typeof de.stack=="string")return[de.stack,oe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=m.DetermineComponentFrameRoot(),T=x[0],L=x[1];if(T&&L){var G=T.split(`
`),ae=L.split(`
`);for(b=m=0;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;for(;b<ae.length&&!ae[b].includes("DetermineComponentFrameRoot");)b++;if(m===G.length||b===ae.length)for(m=G.length-1,b=ae.length-1;1<=m&&0<=b&&G[m]!==ae[b];)b--;for(;1<=m&&0<=b;m--,b--)if(G[m]!==ae[b]){if(m!==1||b!==1)do if(m--,b--,0>b||G[m]!==ae[b]){var he=`
`+G[m].replace(" at new "," at ");return a.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",a.displayName)),he}while(1<=m&&0<=b);break}}}finally{ot=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?Fe(d):""}function gt(a,l){switch(a.tag){case 26:case 27:case 5:return Fe(a.type);case 16:return Fe("Lazy");case 13:return a.child!==l&&l!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return ht(a.type,!1);case 11:return ht(a.type.render,!1);case 1:return ht(a.type,!0);case 31:return Fe("Activity");default:return""}}function mr(a){try{var l="",d=null;do l+=gt(a,d),d=a,a=a.return;while(a);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Pt=Object.prototype.hasOwnProperty,It=t.unstable_scheduleCallback,zr=t.unstable_cancelCallback,fe=t.unstable_shouldYield,Ie=t.unstable_requestPaint,Ve=t.unstable_now,Ke=t.unstable_getCurrentPriorityLevel,Vt=t.unstable_ImmediatePriority,zn=t.unstable_UserBlockingPriority,Lr=t.unstable_NormalPriority,ao=t.unstable_LowPriority,qr=t.unstable_IdlePriority,Hi=t.log,Hc=t.unstable_setDisableYieldValue,sn=null,Nt=null;function Ur(a){if(typeof Hi=="function"&&Hc(a),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(sn,a)}catch{}}var en=Math.clz32?Math.clz32:Gc,El=Math.log,so=Math.LN2;function Gc(a){return a>>>=0,a===0?32:31-(El(a)/so|0)|0}var yi=256,ns=262144,on=4194304;function bi(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function pr(a,l,d){var m=a.pendingLanes;if(m===0)return 0;var b=0,x=a.suspendedLanes,T=a.pingedLanes;a=a.warmLanes;var L=m&134217727;return L!==0?(m=L&~x,m!==0?b=bi(m):(T&=L,T!==0?b=bi(T):d||(d=L&~a,d!==0&&(b=bi(d))))):(L=m&~x,L!==0?b=bi(L):T!==0?b=bi(T):d||(d=m&~a,d!==0&&(b=bi(d)))),b===0?0:l!==0&&l!==b&&(l&x)===0&&(x=b&-b,d=l&-l,x>=d||x===32&&(d&4194048)!==0)?l:b}function ei(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function ee(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ue(){var a=on;return on<<=1,(on&62914560)===0&&(on=4194304),a}function vt(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function Fn(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Nl(a,l,d,m,b,x){var T=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var L=a.entanglements,G=a.expirationTimes,ae=a.hiddenUpdates;for(d=T&~d;0<d;){var he=31-en(d),be=1<<he;L[he]=0,G[he]=-1;var oe=ae[he];if(oe!==null)for(ae[he]=null,he=0;he<oe.length;he++){var de=oe[he];de!==null&&(de.lane&=-536870913)}d&=~be}m!==0&&_i(a,m,0),x!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=x&~(T&~l))}function _i(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var m=31-en(l);a.entangledLanes|=l,a.entanglements[m]=a.entanglements[m]|1073741824|d&261930}function Md(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var m=31-en(d),b=1<<m;b&l|a[m]&l&&(a[m]|=l),d&=~b}}function zd(a,l){var d=l&-l;return d=(d&42)!==0?1:Sl(d),(d&(a.suspendedLanes|l))!==0?0:d}function Sl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function rs(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Sm(){var a=le.p;return a!==0?a:(a=window.event,a===void 0?32:wC(a.type))}function Gi(a,l){var d=le.p;try{return le.p=a,l()}finally{le.p=d}}var Ki=Math.random().toString(36).slice(2),En="__reactFiber$"+Ki,Hn="__reactProps$"+Ki,pa="__reactContainer$"+Ki,Kc="__reactEvents$"+Ki,T0="__reactListeners$"+Ki,Am="__reactHandles$"+Ki,Tm="__reactResources$"+Ki,ga="__reactMarker$"+Ki;function Qc(a){delete a[En],delete a[Hn],delete a[Kc],delete a[T0],delete a[Am]}function va(a){var l=a[En];if(l)return l;for(var d=a.parentNode;d;){if(l=d[pa]||d[En]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=sC(a);a!==null;){if(d=a[En])return d;a=sC(a)}return l}a=d,d=a.parentNode}return null}function xi(a){if(a=a[En]||a[pa]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function ti(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(r(33))}function ya(a){var l=a[Tm];return l||(l=a[Tm]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Nn(a){a[ga]=!0}var Ld=new Set,qd={};function ba(a,l){_a(a,l),_a(a+"Capture",l)}function _a(a,l){for(qd[a]=l,a=0;a<l.length;a++)Ld.add(l[a])}var Ud=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vd={},Bd={};function Cm(a){return Pt.call(Bd,a)?!0:Pt.call(Vd,a)?!1:Ud.test(a)?Bd[a]=!0:(Vd[a]=!0,!1)}function Wc(a,l,d){if(Cm(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function ni(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function Sn(a,l,d,m){if(m===null)a.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+m)}}function Gn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function oo(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function $d(a,l,d){var m=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,x=m.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return b.call(this)},set:function(T){d=""+T,x.call(this,T)}}),Object.defineProperty(a,l,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function St(a){if(!a._valueTracker){var l=oo(a)?"checked":"value";a._valueTracker=$d(a,l,""+a[l])}}function Al(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return a&&(m=oo(a)?a.checked?"true":"false":a.value),a=m,a!==d?(l.setValue(a),!0):!1}function xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Tl=/[\n"\\]/g;function Vr(a){return a.replace(Tl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Yc(a,l,d,m,b,x,T,L){a.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.type=T:a.removeAttribute("type"),l!=null?T==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Gn(l)):a.value!==""+Gn(l)&&(a.value=""+Gn(l)):T!=="submit"&&T!=="reset"||a.removeAttribute("value"),l!=null?Fd(a,T,Gn(l)):d!=null?Fd(a,T,Gn(d)):m!=null&&a.removeAttribute("value"),b==null&&x!=null&&(a.defaultChecked=!!x),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?a.name=""+Gn(L):a.removeAttribute("name")}function Om(a,l,d,m,b,x,T,L){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),l!=null||d!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){St(a);return}d=d!=null?""+Gn(d):"",l=l!=null?""+Gn(l):d,L||l===a.value||(a.value=l),a.defaultValue=l}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=L?a.checked:!!m,a.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.name=T),St(a)}function Fd(a,l,d){l==="number"&&xa(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function lo(a,l,d,m){if(a=a.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=l.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&m&&(a[d].defaultSelected=!0)}else{for(d=""+Gn(d),l=null,b=0;b<a.length;b++){if(a[b].value===d){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}l!==null||a[b].disabled||(l=a[b])}l!==null&&(l.selected=!0)}}function Pm(a,l,d){if(l!=null&&(l=""+Gn(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+Gn(d):""}function co(a,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(Q(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=Gn(l),a.defaultValue=d,m=a.textContent,m===d&&m!==""&&m!==null&&(a.value=m),St(a)}function Br(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var Im=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hd(a,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":m?a.setProperty(l,d):typeof d!="number"||d===0||Im.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function Gd(a,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(a=a.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var b in l)m=l[b],l.hasOwnProperty(b)&&d[b]!==m&&Hd(a,b,m)}else for(var x in l)l.hasOwnProperty(x)&&Hd(a,x,l[x])}function Xc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zc(a){return uo.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Qi(){}var Kd=null;function wi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var fo=null,wa=null;function Cl(a){var l=xi(a);if(l&&(a=l.stateNode)){var d=a[Hn]||null;e:switch(a=l.stateNode,l.type){case"input":if(Yc(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Vr(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==a&&m.form===a.form){var b=m[Hn]||null;if(!b)throw Error(r(90));Yc(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===a.form&&Al(m)}break e;case"textarea":Pm(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&lo(a,!!d.multiple,l,!1)}}}var Jc=!1;function ho(a,l,d){if(Jc)return a(l,d);Jc=!0;try{var m=a(l);return m}finally{if(Jc=!1,(fo!==null||wa!==null)&&(Sp(),fo&&(l=fo,a=wa,wa=fo=null,Cl(l),a)))for(l=0;l<a.length;l++)Cl(a[l])}}function Wi(a,l){var d=a.stateNode;if(d===null)return null;var m=d[Hn]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=!1;if(ji)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Ol=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{Ol=!1}var ja=null,Qd=null,Pl=null;function Wd(){if(Pl)return Pl;var a,l=Qd,d=l.length,m,b="value"in ja?ja.value:ja.textContent,x=b.length;for(a=0;a<d&&l[a]===b[a];a++);var T=d-a;for(m=1;m<=T&&l[d-m]===b[x-m];m++);return Pl=b.slice(a,1<m?1-m:void 0)}function Il(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function is(){return!0}function Yi(){return!1}function rr(a){function l(d,m,b,x,T){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var L in a)a.hasOwnProperty(L)&&(d=a[L],this[L]=d?d(x):x[L]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?is:Yi,this.isPropagationStopped=Yi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),l}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=rr(as),mo=g({},as,{view:0,detail:0}),Yd=rr(mo),po,eu,Na,tu=g({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:go,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Na&&(Na&&a.type==="mousemove"?(po=a.screenX-Na.screenX,eu=a.screenY-Na.screenY):eu=po=0,Na=a),po)},movementY:function(a){return"movementY"in a?a.movementY:eu}}),Xd=rr(tu),Rl=g({},tu,{dataTransfer:0}),km=rr(Rl),Dm=g({},mo,{relatedTarget:0}),kl=rr(Dm),Zd=g({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),Mm=rr(Zd),nu=g({},as,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),zm=rr(nu),Lm=g({},as,{data:0}),Sa=rr(Lm),qm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Um={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bm(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Vm[a])?!!l[a]:!1}function go(){return Bm}var Nr=g({},mo,{key:function(a){if(a.key){var l=qm[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Il(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Um[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:go,charCode:function(a){return a.type==="keypress"?Il(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Il(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),$m=rr(Nr),Fm=g({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ss=rr(Fm),v=g({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:go}),S=rr(v),P=g({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),B=rr(P),re=g({},tu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=rr(re),Ne=g({},as,{newState:0,oldState:0}),Ze=rr(Ne),gn=[9,13,27,32],wt=ji&&"CompositionEvent"in window,Yt=null;ji&&"documentMode"in document&&(Yt=document.documentMode);var Ei=ji&&"TextEvent"in window&&!Yt,Aa=ji&&(!wt||Yt&&8<Yt&&11>=Yt),Xi=" ",Zi=!1;function Dl(a,l){switch(a){case"keyup":return gn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ru(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var iu=!1;function CU(a,l){switch(a){case"compositionend":return ru(l);case"keypress":return l.which!==32?null:(Zi=!0,Xi);case"textInput":return a=l.data,a===Xi&&Zi?null:a;default:return null}}function OU(a,l){if(iu)return a==="compositionend"||!wt&&Dl(a,l)?(a=Wd(),Pl=Qd=ja=null,iu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Aa&&l.locale!=="ko"?null:l.data;default:return null}}var PU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cS(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!PU[a.type]:l==="textarea"}function uS(a,l,d,m){fo?wa?wa.push(m):wa=[m]:fo=m,l=Rp(l,"onChange"),0<l.length&&(d=new Ea("onChange","change",null,d,m),a.push({event:d,listeners:l}))}var Jd=null,ef=null;function IU(a){GT(a,0)}function Hm(a){var l=ti(a);if(Al(l))return a}function dS(a,l){if(a==="change")return l}var fS=!1;if(ji){var C0;if(ji){var O0="oninput"in document;if(!O0){var hS=document.createElement("div");hS.setAttribute("oninput","return;"),O0=typeof hS.oninput=="function"}C0=O0}else C0=!1;fS=C0&&(!document.documentMode||9<document.documentMode)}function mS(){Jd&&(Jd.detachEvent("onpropertychange",pS),ef=Jd=null)}function pS(a){if(a.propertyName==="value"&&Hm(ef)){var l=[];uS(l,ef,a,wi(a)),ho(IU,l)}}function RU(a,l,d){a==="focusin"?(mS(),Jd=l,ef=d,Jd.attachEvent("onpropertychange",pS)):a==="focusout"&&mS()}function kU(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Hm(ef)}function DU(a,l){if(a==="click")return Hm(l)}function MU(a,l){if(a==="input"||a==="change")return Hm(l)}function zU(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ri=typeof Object.is=="function"?Object.is:zU;function tf(a,l){if(ri(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!Pt.call(l,b)||!ri(a[b],l[b]))return!1}return!0}function gS(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vS(a,l){var d=gS(a);a=0;for(var m;d;){if(d.nodeType===3){if(m=a+d.textContent.length,a<=l&&m>=l)return{node:d,offset:l-a};a=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=gS(d)}}function yS(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?yS(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function bS(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=xa(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=xa(a.document)}return l}function P0(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var LU=ji&&"documentMode"in document&&11>=document.documentMode,au=null,I0=null,nf=null,R0=!1;function _S(a,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;R0||au==null||au!==xa(m)||(m=au,"selectionStart"in m&&P0(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),nf&&tf(nf,m)||(nf=m,m=Rp(I0,"onSelect"),0<m.length&&(l=new Ea("onSelect","select",null,l,d),a.push({event:l,listeners:m}),l.target=au)))}function Ml(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var su={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionrun:Ml("Transition","TransitionRun"),transitionstart:Ml("Transition","TransitionStart"),transitioncancel:Ml("Transition","TransitionCancel"),transitionend:Ml("Transition","TransitionEnd")},k0={},xS={};ji&&(xS=document.createElement("div").style,"AnimationEvent"in window||(delete su.animationend.animation,delete su.animationiteration.animation,delete su.animationstart.animation),"TransitionEvent"in window||delete su.transitionend.transition);function zl(a){if(k0[a])return k0[a];if(!su[a])return a;var l=su[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in xS)return k0[a]=l[d];return a}var wS=zl("animationend"),jS=zl("animationiteration"),ES=zl("animationstart"),qU=zl("transitionrun"),UU=zl("transitionstart"),VU=zl("transitioncancel"),NS=zl("transitionend"),SS=new Map,D0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");D0.push("scrollEnd");function Ji(a,l){SS.set(a,l),ba(l,[a])}var Gm=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ni=[],ou=0,M0=0;function Km(){for(var a=ou,l=M0=ou=0;l<a;){var d=Ni[l];Ni[l++]=null;var m=Ni[l];Ni[l++]=null;var b=Ni[l];Ni[l++]=null;var x=Ni[l];if(Ni[l++]=null,m!==null&&b!==null){var T=m.pending;T===null?b.next=b:(b.next=T.next,T.next=b),m.pending=b}x!==0&&AS(d,b,x)}}function Qm(a,l,d,m){Ni[ou++]=a,Ni[ou++]=l,Ni[ou++]=d,Ni[ou++]=m,M0|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function z0(a,l,d,m){return Qm(a,l,d,m),Wm(a)}function Ll(a,l){return Qm(a,null,null,l),Wm(a)}function AS(a,l,d){a.lanes|=d;var m=a.alternate;m!==null&&(m.lanes|=d);for(var b=!1,x=a.return;x!==null;)x.childLanes|=d,m=x.alternate,m!==null&&(m.childLanes|=d),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(b=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,b&&l!==null&&(b=31-en(d),a=x.hiddenUpdates,m=a[b],m===null?a[b]=[l]:m.push(l),l.lane=d|536870912),x):null}function Wm(a){if(50<Nf)throw Nf=0,Gb=null,Error(r(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var lu={};function BU(a,l,d,m){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(a,l,d,m){return new BU(a,l,d,m)}function L0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function os(a,l){var d=a.alternate;return d===null?(d=ii(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function TS(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Ym(a,l,d,m,b,x){var T=0;if(m=a,typeof a=="function")L0(a)&&(T=1);else if(typeof a=="string")T=K9(a,d,we.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case k:return a=ii(31,d,l,b),a.elementType=k,a.lanes=x,a;case w:return ql(d.children,b,x,l);case N:T=8,b|=24;break;case A:return a=ii(12,d,l,b|2),a.elementType=A,a.lanes=x,a;case V:return a=ii(13,d,l,b),a.elementType=V,a.lanes=x,a;case $:return a=ii(19,d,l,b),a.elementType=$,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case O:T=10;break e;case R:T=9;break e;case C:T=11;break e;case D:T=14;break e;case I:T=16,m=null;break e}T=29,d=Error(r(130,a===null?"null":typeof a,"")),m=null}return l=ii(T,d,l,b),l.elementType=a,l.type=m,l.lanes=x,l}function ql(a,l,d,m){return a=ii(7,a,m,l),a.lanes=d,a}function q0(a,l,d){return a=ii(6,a,null,l),a.lanes=d,a}function CS(a){var l=ii(18,null,null,0);return l.stateNode=a,l}function U0(a,l,d){return l=ii(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var OS=new WeakMap;function Si(a,l){if(typeof a=="object"&&a!==null){var d=OS.get(a);return d!==void 0?d:(l={value:a,source:l,stack:mr(l)},OS.set(a,l),l)}return{value:a,source:l,stack:mr(l)}}var cu=[],uu=0,Xm=null,rf=0,Ai=[],Ti=0,vo=null,Ta=1,Ca="";function ls(a,l){cu[uu++]=rf,cu[uu++]=Xm,Xm=a,rf=l}function PS(a,l,d){Ai[Ti++]=Ta,Ai[Ti++]=Ca,Ai[Ti++]=vo,vo=a;var m=Ta;a=Ca;var b=32-en(m)-1;m&=~(1<<b),d+=1;var x=32-en(l)+b;if(30<x){var T=b-b%5;x=(m&(1<<T)-1).toString(32),m>>=T,b-=T,Ta=1<<32-en(l)+b|d<<b|m,Ca=x+a}else Ta=1<<x|d<<b|m,Ca=a}function V0(a){a.return!==null&&(ls(a,1),PS(a,1,0))}function B0(a){for(;a===Xm;)Xm=cu[--uu],cu[uu]=null,rf=cu[--uu],cu[uu]=null;for(;a===vo;)vo=Ai[--Ti],Ai[Ti]=null,Ca=Ai[--Ti],Ai[Ti]=null,Ta=Ai[--Ti],Ai[Ti]=null}function IS(a,l){Ai[Ti++]=Ta,Ai[Ti++]=Ca,Ai[Ti++]=vo,Ta=l.id,Ca=l.overflow,vo=a}var ir=null,Kt=null,mt=!1,yo=null,Ci=!1,$0=Error(r(519));function bo(a){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw af(Si(l,a)),$0}function RS(a){var l=a.stateNode,d=a.type,m=a.memoizedProps;switch(l[En]=a,l[Hn]=m,d){case"dialog":at("cancel",l),at("close",l);break;case"iframe":case"object":case"embed":at("load",l);break;case"video":case"audio":for(d=0;d<Af.length;d++)at(Af[d],l);break;case"source":at("error",l);break;case"img":case"image":case"link":at("error",l),at("load",l);break;case"details":at("toggle",l);break;case"input":at("invalid",l),Om(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":at("invalid",l);break;case"textarea":at("invalid",l),co(l,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||YT(l.textContent,d)?(m.popover!=null&&(at("beforetoggle",l),at("toggle",l)),m.onScroll!=null&&at("scroll",l),m.onScrollEnd!=null&&at("scrollend",l),m.onClick!=null&&(l.onclick=Qi),l=!0):l=!1,l||bo(a,!0)}function kS(a){for(ir=a.return;ir;)switch(ir.tag){case 5:case 31:case 13:Ci=!1;return;case 27:case 3:Ci=!0;return;default:ir=ir.return}}function du(a){if(a!==ir)return!1;if(!mt)return kS(a),mt=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||o_(a.type,a.memoizedProps)),d=!d),d&&Kt&&bo(a),kS(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Kt=aC(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Kt=aC(a)}else l===27?(l=Kt,Ro(a.type)?(a=f_,f_=null,Kt=a):Kt=l):Kt=ir?Pi(a.stateNode.nextSibling):null;return!0}function Ul(){Kt=ir=null,mt=!1}function F0(){var a=yo;return a!==null&&(Gr===null?Gr=a:Gr.push.apply(Gr,a),yo=null),a}function af(a){yo===null?yo=[a]:yo.push(a)}var H0=F(null),Vl=null,cs=null;function _o(a,l,d){ye(H0,l._currentValue),l._currentValue=d}function us(a){a._currentValue=H0.current,te(H0)}function G0(a,l,d){for(;a!==null;){var m=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),a===d)break;a=a.return}}function K0(a,l,d,m){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var x=b.dependencies;if(x!==null){var T=b.child;x=x.firstContext;e:for(;x!==null;){var L=x;x=b;for(var G=0;G<l.length;G++)if(L.context===l[G]){x.lanes|=d,L=x.alternate,L!==null&&(L.lanes|=d),G0(x.return,d,a),m||(T=null);break e}x=L.next}}else if(b.tag===18){if(T=b.return,T===null)throw Error(r(341));T.lanes|=d,x=T.alternate,x!==null&&(x.lanes|=d),G0(T,d,a),T=null}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===a){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}}function fu(a,l,d,m){a=null;for(var b=l,x=!1;b!==null;){if(!x){if((b.flags&524288)!==0)x=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var T=b.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var L=b.type;ri(b.pendingProps.value,T.value)||(a!==null?a.push(L):a=[L])}}else if(b===me.current){if(T=b.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(If):a=[If])}b=b.return}a!==null&&K0(l,a,d,m),l.flags|=262144}function Zm(a){for(a=a.firstContext;a!==null;){if(!ri(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Bl(a){Vl=a,cs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ar(a){return DS(Vl,a)}function Jm(a,l){return Vl===null&&Bl(a),DS(a,l)}function DS(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},cs===null){if(a===null)throw Error(r(308));cs=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else cs=cs.next=l;return d}var $U=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,m){a.push(m)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},FU=t.unstable_scheduleCallback,HU=t.unstable_NormalPriority,An={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Q0(){return{controller:new $U,data:new Map,refCount:0}}function sf(a){a.refCount--,a.refCount===0&&FU(HU,function(){a.controller.abort()})}var of=null,W0=0,hu=0,mu=null;function GU(a,l){if(of===null){var d=of=[];W0=0,hu=Zb(),mu={status:"pending",value:void 0,then:function(m){d.push(m)}}}return W0++,l.then(MS,MS),l}function MS(){if(--W0===0&&of!==null){mu!==null&&(mu.status="fulfilled");var a=of;of=null,hu=0,mu=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function KU(a,l){var d=[],m={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return a.then(function(){m.status="fulfilled",m.value=l;for(var b=0;b<d.length;b++)(0,d[b])(l)},function(b){for(m.status="rejected",m.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),m}var zS=H.S;H.S=function(a,l){_T=Ve(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&GU(a,l),zS!==null&&zS(a,l)};var $l=F(null);function Y0(){var a=$l.current;return a!==null?a:Bt.pooledCache}function ep(a,l){l===null?ye($l,$l.current):ye($l,l.pool)}function LS(){var a=Y0();return a===null?null:{parent:An._currentValue,pool:a}}var pu=Error(r(460)),X0=Error(r(474)),tp=Error(r(542)),np={then:function(){}};function qS(a){return a=a.status,a==="fulfilled"||a==="rejected"}function US(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(Qi,Qi),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,BS(a),a;default:if(typeof l.status=="string")l.then(Qi,Qi);else{if(a=Bt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=l,a.status="pending",a.then(function(m){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=m}},function(m){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,BS(a),a}throw Hl=l,pu}}function Fl(a){try{var l=a._init;return l(a._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Hl=d,pu):d}}var Hl=null;function VS(){if(Hl===null)throw Error(r(459));var a=Hl;return Hl=null,a}function BS(a){if(a===pu||a===tp)throw Error(r(483))}var gu=null,lf=0;function rp(a){var l=lf;return lf+=1,gu===null&&(gu=[]),US(gu,a,l)}function cf(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function ip(a,l){throw l.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function $S(a){function l(J,K){if(a){var ie=J.deletions;ie===null?(J.deletions=[K],J.flags|=16):ie.push(K)}}function d(J,K){if(!a)return null;for(;K!==null;)l(J,K),K=K.sibling;return null}function m(J){for(var K=new Map;J!==null;)J.key!==null?K.set(J.key,J):K.set(J.index,J),J=J.sibling;return K}function b(J,K){return J=os(J,K),J.index=0,J.sibling=null,J}function x(J,K,ie){return J.index=ie,a?(ie=J.alternate,ie!==null?(ie=ie.index,ie<K?(J.flags|=67108866,K):ie):(J.flags|=67108866,K)):(J.flags|=1048576,K)}function T(J){return a&&J.alternate===null&&(J.flags|=67108866),J}function L(J,K,ie,ve){return K===null||K.tag!==6?(K=q0(ie,J.mode,ve),K.return=J,K):(K=b(K,ie),K.return=J,K)}function G(J,K,ie,ve){var Le=ie.type;return Le===w?he(J,K,ie.props.children,ve,ie.key):K!==null&&(K.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===I&&Fl(Le)===K.type)?(K=b(K,ie.props),cf(K,ie),K.return=J,K):(K=Ym(ie.type,ie.key,ie.props,null,J.mode,ve),cf(K,ie),K.return=J,K)}function ae(J,K,ie,ve){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=U0(ie,J.mode,ve),K.return=J,K):(K=b(K,ie.children||[]),K.return=J,K)}function he(J,K,ie,ve,Le){return K===null||K.tag!==7?(K=ql(ie,J.mode,ve,Le),K.return=J,K):(K=b(K,ie),K.return=J,K)}function be(J,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=q0(""+K,J.mode,ie),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _:return ie=Ym(K.type,K.key,K.props,null,J.mode,ie),cf(ie,K),ie.return=J,ie;case E:return K=U0(K,J.mode,ie),K.return=J,K;case I:return K=Fl(K),be(J,K,ie)}if(Q(K)||z(K))return K=ql(K,J.mode,ie,null),K.return=J,K;if(typeof K.then=="function")return be(J,rp(K),ie);if(K.$$typeof===O)return be(J,Jm(J,K),ie);ip(J,K)}return null}function oe(J,K,ie,ve){var Le=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Le!==null?null:L(J,K,""+ie,ve);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case _:return ie.key===Le?G(J,K,ie,ve):null;case E:return ie.key===Le?ae(J,K,ie,ve):null;case I:return ie=Fl(ie),oe(J,K,ie,ve)}if(Q(ie)||z(ie))return Le!==null?null:he(J,K,ie,ve,null);if(typeof ie.then=="function")return oe(J,K,rp(ie),ve);if(ie.$$typeof===O)return oe(J,K,Jm(J,ie),ve);ip(J,ie)}return null}function de(J,K,ie,ve,Le){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return J=J.get(ie)||null,L(K,J,""+ve,Le);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case _:return J=J.get(ve.key===null?ie:ve.key)||null,G(K,J,ve,Le);case E:return J=J.get(ve.key===null?ie:ve.key)||null,ae(K,J,ve,Le);case I:return ve=Fl(ve),de(J,K,ie,ve,Le)}if(Q(ve)||z(ve))return J=J.get(ie)||null,he(K,J,ve,Le,null);if(typeof ve.then=="function")return de(J,K,ie,rp(ve),Le);if(ve.$$typeof===O)return de(J,K,ie,Jm(K,ve),Le);ip(K,ve)}return null}function Oe(J,K,ie,ve){for(var Le=null,bt=null,Re=K,et=K=0,ct=null;Re!==null&&et<ie.length;et++){Re.index>et?(ct=Re,Re=null):ct=Re.sibling;var _t=oe(J,Re,ie[et],ve);if(_t===null){Re===null&&(Re=ct);break}a&&Re&&_t.alternate===null&&l(J,Re),K=x(_t,K,et),bt===null?Le=_t:bt.sibling=_t,bt=_t,Re=ct}if(et===ie.length)return d(J,Re),mt&&ls(J,et),Le;if(Re===null){for(;et<ie.length;et++)Re=be(J,ie[et],ve),Re!==null&&(K=x(Re,K,et),bt===null?Le=Re:bt.sibling=Re,bt=Re);return mt&&ls(J,et),Le}for(Re=m(Re);et<ie.length;et++)ct=de(Re,J,et,ie[et],ve),ct!==null&&(a&&ct.alternate!==null&&Re.delete(ct.key===null?et:ct.key),K=x(ct,K,et),bt===null?Le=ct:bt.sibling=ct,bt=ct);return a&&Re.forEach(function(Lo){return l(J,Lo)}),mt&&ls(J,et),Le}function $e(J,K,ie,ve){if(ie==null)throw Error(r(151));for(var Le=null,bt=null,Re=K,et=K=0,ct=null,_t=ie.next();Re!==null&&!_t.done;et++,_t=ie.next()){Re.index>et?(ct=Re,Re=null):ct=Re.sibling;var Lo=oe(J,Re,_t.value,ve);if(Lo===null){Re===null&&(Re=ct);break}a&&Re&&Lo.alternate===null&&l(J,Re),K=x(Lo,K,et),bt===null?Le=Lo:bt.sibling=Lo,bt=Lo,Re=ct}if(_t.done)return d(J,Re),mt&&ls(J,et),Le;if(Re===null){for(;!_t.done;et++,_t=ie.next())_t=be(J,_t.value,ve),_t!==null&&(K=x(_t,K,et),bt===null?Le=_t:bt.sibling=_t,bt=_t);return mt&&ls(J,et),Le}for(Re=m(Re);!_t.done;et++,_t=ie.next())_t=de(Re,J,et,_t.value,ve),_t!==null&&(a&&_t.alternate!==null&&Re.delete(_t.key===null?et:_t.key),K=x(_t,K,et),bt===null?Le=_t:bt.sibling=_t,bt=_t);return a&&Re.forEach(function(iV){return l(J,iV)}),mt&&ls(J,et),Le}function Mt(J,K,ie,ve){if(typeof ie=="object"&&ie!==null&&ie.type===w&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case _:e:{for(var Le=ie.key;K!==null;){if(K.key===Le){if(Le=ie.type,Le===w){if(K.tag===7){d(J,K.sibling),ve=b(K,ie.props.children),ve.return=J,J=ve;break e}}else if(K.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===I&&Fl(Le)===K.type){d(J,K.sibling),ve=b(K,ie.props),cf(ve,ie),ve.return=J,J=ve;break e}d(J,K);break}else l(J,K);K=K.sibling}ie.type===w?(ve=ql(ie.props.children,J.mode,ve,ie.key),ve.return=J,J=ve):(ve=Ym(ie.type,ie.key,ie.props,null,J.mode,ve),cf(ve,ie),ve.return=J,J=ve)}return T(J);case E:e:{for(Le=ie.key;K!==null;){if(K.key===Le)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){d(J,K.sibling),ve=b(K,ie.children||[]),ve.return=J,J=ve;break e}else{d(J,K);break}else l(J,K);K=K.sibling}ve=U0(ie,J.mode,ve),ve.return=J,J=ve}return T(J);case I:return ie=Fl(ie),Mt(J,K,ie,ve)}if(Q(ie))return Oe(J,K,ie,ve);if(z(ie)){if(Le=z(ie),typeof Le!="function")throw Error(r(150));return ie=Le.call(ie),$e(J,K,ie,ve)}if(typeof ie.then=="function")return Mt(J,K,rp(ie),ve);if(ie.$$typeof===O)return Mt(J,K,Jm(J,ie),ve);ip(J,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,K!==null&&K.tag===6?(d(J,K.sibling),ve=b(K,ie),ve.return=J,J=ve):(d(J,K),ve=q0(ie,J.mode,ve),ve.return=J,J=ve),T(J)):d(J,K)}return function(J,K,ie,ve){try{lf=0;var Le=Mt(J,K,ie,ve);return gu=null,Le}catch(Re){if(Re===pu||Re===tp)throw Re;var bt=ii(29,Re,null,J.mode);return bt.lanes=ve,bt.return=J,bt}}}var Gl=$S(!0),FS=$S(!1),xo=!1;function Z0(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function J0(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function wo(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function jo(a,l,d){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(jt&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,l=Wm(a),AS(a,null,d),l}return Qm(a,m,l,d),Wm(a)}function uf(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=a.pendingLanes,d|=m,l.lanes=d,Md(a,d)}}function eb(a,l){var d=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,x=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};x===null?b=x=T:x=x.next=T,d=d.next}while(d!==null);x===null?b=x=l:x=x.next=l}else b=x=l;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:x,shared:m.shared,callbacks:m.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var tb=!1;function df(){if(tb){var a=mu;if(a!==null)throw a}}function ff(a,l,d,m){tb=!1;var b=a.updateQueue;xo=!1;var x=b.firstBaseUpdate,T=b.lastBaseUpdate,L=b.shared.pending;if(L!==null){b.shared.pending=null;var G=L,ae=G.next;G.next=null,T===null?x=ae:T.next=ae,T=G;var he=a.alternate;he!==null&&(he=he.updateQueue,L=he.lastBaseUpdate,L!==T&&(L===null?he.firstBaseUpdate=ae:L.next=ae,he.lastBaseUpdate=G))}if(x!==null){var be=b.baseState;T=0,he=ae=G=null,L=x;do{var oe=L.lane&-536870913,de=oe!==L.lane;if(de?(lt&oe)===oe:(m&oe)===oe){oe!==0&&oe===hu&&(tb=!0),he!==null&&(he=he.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Oe=a,$e=L;oe=l;var Mt=d;switch($e.tag){case 1:if(Oe=$e.payload,typeof Oe=="function"){be=Oe.call(Mt,be,oe);break e}be=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=$e.payload,oe=typeof Oe=="function"?Oe.call(Mt,be,oe):Oe,oe==null)break e;be=g({},be,oe);break e;case 2:xo=!0}}oe=L.callback,oe!==null&&(a.flags|=64,de&&(a.flags|=8192),de=b.callbacks,de===null?b.callbacks=[oe]:de.push(oe))}else de={lane:oe,tag:L.tag,payload:L.payload,callback:L.callback,next:null},he===null?(ae=he=de,G=be):he=he.next=de,T|=oe;if(L=L.next,L===null){if(L=b.shared.pending,L===null)break;de=L,L=de.next,de.next=null,b.lastBaseUpdate=de,b.shared.pending=null}}while(!0);he===null&&(G=be),b.baseState=G,b.firstBaseUpdate=ae,b.lastBaseUpdate=he,x===null&&(b.shared.lanes=0),To|=T,a.lanes=T,a.memoizedState=be}}function HS(a,l){if(typeof a!="function")throw Error(r(191,a));a.call(l)}function GS(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)HS(d[a],l)}var vu=F(null),ap=F(0);function KS(a,l){a=bs,ye(ap,a),ye(vu,l),bs=a|l.baseLanes}function nb(){ye(ap,bs),ye(vu,vu.current)}function rb(){bs=ap.current,te(vu),te(ap)}var ai=F(null),Oi=null;function Eo(a){var l=a.alternate;ye(vn,vn.current&1),ye(ai,a),Oi===null&&(l===null||vu.current!==null||l.memoizedState!==null)&&(Oi=a)}function ib(a){ye(vn,vn.current),ye(ai,a),Oi===null&&(Oi=a)}function QS(a){a.tag===22?(ye(vn,vn.current),ye(ai,a),Oi===null&&(Oi=a)):No()}function No(){ye(vn,vn.current),ye(ai,ai.current)}function si(a){te(ai),Oi===a&&(Oi=null),te(vn)}var vn=F(0);function sp(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||u_(d)||d_(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ds=0,Je=null,kt=null,Tn=null,op=!1,yu=!1,Kl=!1,lp=0,hf=0,bu=null,QU=0;function ln(){throw Error(r(321))}function ab(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!ri(a[d],l[d]))return!1;return!0}function sb(a,l,d,m,b,x){return ds=x,Je=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=a===null||a.memoizedState===null?PA:xb,Kl=!1,x=d(m,b),Kl=!1,yu&&(x=YS(l,d,m,b)),WS(a),x}function WS(a){H.H=gf;var l=kt!==null&&kt.next!==null;if(ds=0,Tn=kt=Je=null,op=!1,hf=0,bu=null,l)throw Error(r(300));a===null||Cn||(a=a.dependencies,a!==null&&Zm(a)&&(Cn=!0))}function YS(a,l,d,m){Je=a;var b=0;do{if(yu&&(bu=null),hf=0,yu=!1,25<=b)throw Error(r(301));if(b+=1,Tn=kt=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}H.H=IA,x=l(d,m)}while(yu);return x}function WU(){var a=H.H,l=a.useState()[0];return l=typeof l.then=="function"?mf(l):l,a=a.useState()[0],(kt!==null?kt.memoizedState:null)!==a&&(Je.flags|=1024),l}function ob(){var a=lp!==0;return lp=0,a}function lb(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function cb(a){if(op){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}op=!1}ds=0,Tn=kt=Je=null,yu=!1,hf=lp=0,bu=null}function Sr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Je.memoizedState=Tn=a:Tn=Tn.next=a,Tn}function yn(){if(kt===null){var a=Je.alternate;a=a!==null?a.memoizedState:null}else a=kt.next;var l=Tn===null?Je.memoizedState:Tn.next;if(l!==null)Tn=l,kt=a;else{if(a===null)throw Je.alternate===null?Error(r(467)):Error(r(310));kt=a,a={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Tn===null?Je.memoizedState=Tn=a:Tn=Tn.next=a}return Tn}function cp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mf(a){var l=hf;return hf+=1,bu===null&&(bu=[]),a=US(bu,a,l),l=Je,(Tn===null?l.memoizedState:Tn.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?PA:xb),a}function up(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return mf(a);if(a.$$typeof===O)return ar(a)}throw Error(r(438,String(a)))}function ub(a){var l=null,d=Je.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=Je.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=cp(),Je.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),m=0;m<a;m++)d[m]=U;return l.index++,d}function fs(a,l){return typeof l=="function"?l(a):l}function dp(a){var l=yn();return db(l,kt,a)}function db(a,l,d){var m=a.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var b=a.baseQueue,x=m.pending;if(x!==null){if(b!==null){var T=b.next;b.next=x.next,x.next=T}l.baseQueue=b=x,m.pending=null}if(x=a.baseState,b===null)a.memoizedState=x;else{l=b.next;var L=T=null,G=null,ae=l,he=!1;do{var be=ae.lane&-536870913;if(be!==ae.lane?(lt&be)===be:(ds&be)===be){var oe=ae.revertLane;if(oe===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),be===hu&&(he=!0);else if((ds&oe)===oe){ae=ae.next,oe===hu&&(he=!0);continue}else be={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},G===null?(L=G=be,T=x):G=G.next=be,Je.lanes|=oe,To|=oe;be=ae.action,Kl&&d(x,be),x=ae.hasEagerState?ae.eagerState:d(x,be)}else oe={lane:be,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},G===null?(L=G=oe,T=x):G=G.next=oe,Je.lanes|=be,To|=be;ae=ae.next}while(ae!==null&&ae!==l);if(G===null?T=x:G.next=L,!ri(x,a.memoizedState)&&(Cn=!0,he&&(d=mu,d!==null)))throw d;a.memoizedState=x,a.baseState=T,a.baseQueue=G,m.lastRenderedState=x}return b===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function fb(a){var l=yn(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var m=d.dispatch,b=d.pending,x=l.memoizedState;if(b!==null){d.pending=null;var T=b=b.next;do x=a(x,T.action),T=T.next;while(T!==b);ri(x,l.memoizedState)||(Cn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),d.lastRenderedState=x}return[x,m]}function XS(a,l,d){var m=Je,b=yn(),x=mt;if(x){if(d===void 0)throw Error(r(407));d=d()}else d=l();var T=!ri((kt||b).memoizedState,d);if(T&&(b.memoizedState=d,Cn=!0),b=b.queue,pb(eA.bind(null,m,b,a),[a]),b.getSnapshot!==l||T||Tn!==null&&Tn.memoizedState.tag&1){if(m.flags|=2048,_u(9,{destroy:void 0},JS.bind(null,m,b,d,l),null),Bt===null)throw Error(r(349));x||(ds&127)!==0||ZS(m,l,d)}return d}function ZS(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=Je.updateQueue,l===null?(l=cp(),Je.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function JS(a,l,d,m){l.value=d,l.getSnapshot=m,tA(l)&&nA(a)}function eA(a,l,d){return d(function(){tA(l)&&nA(a)})}function tA(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!ri(a,d)}catch{return!0}}function nA(a){var l=Ll(a,2);l!==null&&Kr(l,a,2)}function hb(a){var l=Sr();if(typeof a=="function"){var d=a;if(a=d(),Kl){Ur(!0);try{d()}finally{Ur(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:a},l}function rA(a,l,d,m){return a.baseState=d,db(a,kt,typeof m=="function"?m:fs)}function YU(a,l,d,m,b){if(mp(a))throw Error(r(485));if(a=l.action,a!==null){var x={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};H.T!==null?d(!0):x.isTransition=!1,m(x),d=l.pending,d===null?(x.next=l.pending=x,iA(l,x)):(x.next=d.next,l.pending=d.next=x)}}function iA(a,l){var d=l.action,m=l.payload,b=a.state;if(l.isTransition){var x=H.T,T={};H.T=T;try{var L=d(b,m),G=H.S;G!==null&&G(T,L),aA(a,l,L)}catch(ae){mb(a,l,ae)}finally{x!==null&&T.types!==null&&(x.types=T.types),H.T=x}}else try{x=d(b,m),aA(a,l,x)}catch(ae){mb(a,l,ae)}}function aA(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){sA(a,l,m)},function(m){return mb(a,l,m)}):sA(a,l,d)}function sA(a,l,d){l.status="fulfilled",l.value=d,oA(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,iA(a,d)))}function mb(a,l,d){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,oA(l),l=l.next;while(l!==m)}a.action=null}function oA(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function lA(a,l){return l}function cA(a,l){if(mt){var d=Bt.formState;if(d!==null){e:{var m=Je;if(mt){if(Kt){t:{for(var b=Kt,x=Ci;b.nodeType!==8;){if(!x){b=null;break t}if(b=Pi(b.nextSibling),b===null){b=null;break t}}x=b.data,b=x==="F!"||x==="F"?b:null}if(b){Kt=Pi(b.nextSibling),m=b.data==="F!";break e}}bo(m)}m=!1}m&&(l=d[0])}}return d=Sr(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lA,lastRenderedState:l},d.queue=m,d=TA.bind(null,Je,m),m.dispatch=d,m=hb(!1),x=_b.bind(null,Je,!1,m.queue),m=Sr(),b={state:l,dispatch:null,action:a,pending:null},m.queue=b,d=YU.bind(null,Je,b,x,d),b.dispatch=d,m.memoizedState=a,[l,d,!1]}function uA(a){var l=yn();return dA(l,kt,a)}function dA(a,l,d){if(l=db(a,l,lA)[0],a=dp(fs)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=mf(l)}catch(T){throw T===pu?tp:T}else m=l;l=yn();var b=l.queue,x=b.dispatch;return d!==l.memoizedState&&(Je.flags|=2048,_u(9,{destroy:void 0},XU.bind(null,b,d),null)),[m,x,a]}function XU(a,l){a.action=l}function fA(a){var l=yn(),d=kt;if(d!==null)return dA(l,d,a);yn(),l=l.memoizedState,d=yn();var m=d.queue.dispatch;return d.memoizedState=a,[l,m,!1]}function _u(a,l,d,m){return a={tag:a,create:d,deps:m,inst:l,next:null},l=Je.updateQueue,l===null&&(l=cp(),Je.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(m=d.next,d.next=a,a.next=m,l.lastEffect=a),a}function hA(){return yn().memoizedState}function fp(a,l,d,m){var b=Sr();Je.flags|=a,b.memoizedState=_u(1|l,{destroy:void 0},d,m===void 0?null:m)}function hp(a,l,d,m){var b=yn();m=m===void 0?null:m;var x=b.memoizedState.inst;kt!==null&&m!==null&&ab(m,kt.memoizedState.deps)?b.memoizedState=_u(l,x,d,m):(Je.flags|=a,b.memoizedState=_u(1|l,x,d,m))}function mA(a,l){fp(8390656,8,a,l)}function pb(a,l){hp(2048,8,a,l)}function ZU(a){Je.flags|=4;var l=Je.updateQueue;if(l===null)l=cp(),Je.updateQueue=l,l.events=[a];else{var d=l.events;d===null?l.events=[a]:d.push(a)}}function pA(a){var l=yn().memoizedState;return ZU({ref:l,nextImpl:a}),function(){if((jt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function gA(a,l){return hp(4,2,a,l)}function vA(a,l){return hp(4,4,a,l)}function yA(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function bA(a,l,d){d=d!=null?d.concat([a]):null,hp(4,4,yA.bind(null,l,a),d)}function gb(){}function _A(a,l){var d=yn();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&ab(l,m[1])?m[0]:(d.memoizedState=[a,l],a)}function xA(a,l){var d=yn();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&ab(l,m[1]))return m[0];if(m=a(),Kl){Ur(!0);try{a()}finally{Ur(!1)}}return d.memoizedState=[m,l],m}function vb(a,l,d){return d===void 0||(ds&1073741824)!==0&&(lt&261930)===0?a.memoizedState=l:(a.memoizedState=d,a=wT(),Je.lanes|=a,To|=a,d)}function wA(a,l,d,m){return ri(d,l)?d:vu.current!==null?(a=vb(a,d,m),ri(a,l)||(Cn=!0),a):(ds&42)===0||(ds&1073741824)!==0&&(lt&261930)===0?(Cn=!0,a.memoizedState=d):(a=wT(),Je.lanes|=a,To|=a,l)}function jA(a,l,d,m,b){var x=le.p;le.p=x!==0&&8>x?x:8;var T=H.T,L={};H.T=L,_b(a,!1,l,d);try{var G=b(),ae=H.S;if(ae!==null&&ae(L,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var he=KU(G,m);pf(a,l,he,ci(a))}else pf(a,l,m,ci(a))}catch(be){pf(a,l,{then:function(){},status:"rejected",reason:be},ci())}finally{le.p=x,T!==null&&L.types!==null&&(T.types=L.types),H.T=T}}function JU(){}function yb(a,l,d,m){if(a.tag!==5)throw Error(r(476));var b=EA(a).queue;jA(a,b,l,_e,d===null?JU:function(){return NA(a),d(m)})}function EA(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:_e},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function NA(a){var l=EA(a);l.next===null&&(l=a.alternate.memoizedState),pf(a,l.next.queue,{},ci())}function bb(){return ar(If)}function SA(){return yn().memoizedState}function AA(){return yn().memoizedState}function e9(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=ci();a=wo(d);var m=jo(l,a,d);m!==null&&(Kr(m,l,d),uf(m,l,d)),l={cache:Q0()},a.payload=l;return}l=l.return}}function t9(a,l,d){var m=ci();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},mp(a)?CA(l,d):(d=z0(a,l,d,m),d!==null&&(Kr(d,a,m),OA(d,l,m)))}function TA(a,l,d){var m=ci();pf(a,l,d,m)}function pf(a,l,d,m){var b={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(mp(a))CA(l,b);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var T=l.lastRenderedState,L=x(T,d);if(b.hasEagerState=!0,b.eagerState=L,ri(L,T))return Qm(a,l,b,0),Bt===null&&Km(),!1}catch{}if(d=z0(a,l,b,m),d!==null)return Kr(d,a,m),OA(d,l,m),!0}return!1}function _b(a,l,d,m){if(m={lane:2,revertLane:Zb(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},mp(a)){if(l)throw Error(r(479))}else l=z0(a,d,m,2),l!==null&&Kr(l,a,2)}function mp(a){var l=a.alternate;return a===Je||l!==null&&l===Je}function CA(a,l){yu=op=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function OA(a,l,d){if((d&4194048)!==0){var m=l.lanes;m&=a.pendingLanes,d|=m,l.lanes=d,Md(a,d)}}var gf={readContext:ar,use:up,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};gf.useEffectEvent=ln;var PA={readContext:ar,use:up,useCallback:function(a,l){return Sr().memoizedState=[a,l===void 0?null:l],a},useContext:ar,useEffect:mA,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,fp(4194308,4,yA.bind(null,l,a),d)},useLayoutEffect:function(a,l){return fp(4194308,4,a,l)},useInsertionEffect:function(a,l){fp(4,2,a,l)},useMemo:function(a,l){var d=Sr();l=l===void 0?null:l;var m=a();if(Kl){Ur(!0);try{a()}finally{Ur(!1)}}return d.memoizedState=[m,l],m},useReducer:function(a,l,d){var m=Sr();if(d!==void 0){var b=d(l);if(Kl){Ur(!0);try{d(l)}finally{Ur(!1)}}}else b=l;return m.memoizedState=m.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},m.queue=a,a=a.dispatch=t9.bind(null,Je,a),[m.memoizedState,a]},useRef:function(a){var l=Sr();return a={current:a},l.memoizedState=a},useState:function(a){a=hb(a);var l=a.queue,d=TA.bind(null,Je,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:gb,useDeferredValue:function(a,l){var d=Sr();return vb(d,a,l)},useTransition:function(){var a=hb(!1);return a=jA.bind(null,Je,a.queue,!0,!1),Sr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var m=Je,b=Sr();if(mt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Bt===null)throw Error(r(349));(lt&127)!==0||ZS(m,l,d)}b.memoizedState=d;var x={value:d,getSnapshot:l};return b.queue=x,mA(eA.bind(null,m,x,a),[a]),m.flags|=2048,_u(9,{destroy:void 0},JS.bind(null,m,x,d,l),null),d},useId:function(){var a=Sr(),l=Bt.identifierPrefix;if(mt){var d=Ca,m=Ta;d=(m&~(1<<32-en(m)-1)).toString(32)+d,l="_"+l+"R_"+d,d=lp++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=QU++,l="_"+l+"r_"+d.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:bb,useFormState:cA,useActionState:cA,useOptimistic:function(a){var l=Sr();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=_b.bind(null,Je,!0,d),d.dispatch=l,[a,l]},useMemoCache:ub,useCacheRefresh:function(){return Sr().memoizedState=e9.bind(null,Je)},useEffectEvent:function(a){var l=Sr(),d={impl:a};return l.memoizedState=d,function(){if((jt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},xb={readContext:ar,use:up,useCallback:_A,useContext:ar,useEffect:pb,useImperativeHandle:bA,useInsertionEffect:gA,useLayoutEffect:vA,useMemo:xA,useReducer:dp,useRef:hA,useState:function(){return dp(fs)},useDebugValue:gb,useDeferredValue:function(a,l){var d=yn();return wA(d,kt.memoizedState,a,l)},useTransition:function(){var a=dp(fs)[0],l=yn().memoizedState;return[typeof a=="boolean"?a:mf(a),l]},useSyncExternalStore:XS,useId:SA,useHostTransitionStatus:bb,useFormState:uA,useActionState:uA,useOptimistic:function(a,l){var d=yn();return rA(d,kt,a,l)},useMemoCache:ub,useCacheRefresh:AA};xb.useEffectEvent=pA;var IA={readContext:ar,use:up,useCallback:_A,useContext:ar,useEffect:pb,useImperativeHandle:bA,useInsertionEffect:gA,useLayoutEffect:vA,useMemo:xA,useReducer:fb,useRef:hA,useState:function(){return fb(fs)},useDebugValue:gb,useDeferredValue:function(a,l){var d=yn();return kt===null?vb(d,a,l):wA(d,kt.memoizedState,a,l)},useTransition:function(){var a=fb(fs)[0],l=yn().memoizedState;return[typeof a=="boolean"?a:mf(a),l]},useSyncExternalStore:XS,useId:SA,useHostTransitionStatus:bb,useFormState:fA,useActionState:fA,useOptimistic:function(a,l){var d=yn();return kt!==null?rA(d,kt,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:ub,useCacheRefresh:AA};IA.useEffectEvent=pA;function wb(a,l,d,m){l=a.memoizedState,d=d(m,l),d=d==null?l:g({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var jb={enqueueSetState:function(a,l,d){a=a._reactInternals;var m=ci(),b=wo(m);b.payload=l,d!=null&&(b.callback=d),l=jo(a,b,m),l!==null&&(Kr(l,a,m),uf(l,a,m))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var m=ci(),b=wo(m);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=jo(a,b,m),l!==null&&(Kr(l,a,m),uf(l,a,m))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=ci(),m=wo(d);m.tag=2,l!=null&&(m.callback=l),l=jo(a,m,d),l!==null&&(Kr(l,a,d),uf(l,a,d))}};function RA(a,l,d,m,b,x,T){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,x,T):l.prototype&&l.prototype.isPureReactComponent?!tf(d,m)||!tf(b,x):!0}function kA(a,l,d,m){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==a&&jb.enqueueReplaceState(l,l.state,null)}function Ql(a,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(a=a.defaultProps){d===l&&(d=g({},d));for(var b in a)d[b]===void 0&&(d[b]=a[b])}return d}function DA(a){Gm(a)}function MA(a){console.error(a)}function zA(a){Gm(a)}function pp(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function LA(a,l,d){try{var m=a.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Eb(a,l,d){return d=wo(d),d.tag=3,d.payload={element:null},d.callback=function(){pp(a,l)},d}function qA(a){return a=wo(a),a.tag=3,a}function UA(a,l,d,m){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var x=m.value;a.payload=function(){return b(x)},a.callback=function(){LA(l,d,m)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){LA(l,d,m),typeof b!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var L=m.stack;this.componentDidCatch(m.value,{componentStack:L!==null?L:""})})}function n9(a,l,d,m,b){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&fu(l,d,b,!0),d=ai.current,d!==null){switch(d.tag){case 31:case 13:return Oi===null?Ap():d.alternate===null&&cn===0&&(cn=3),d.flags&=-257,d.flags|=65536,d.lanes=b,m===np?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),Wb(a,m,b)),!1;case 22:return d.flags|=65536,m===np?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),Wb(a,m,b)),!1}throw Error(r(435,d.tag))}return Wb(a,m,b),Ap(),!1}if(mt)return l=ai.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,m!==$0&&(a=Error(r(422),{cause:m}),af(Si(a,d)))):(m!==$0&&(l=Error(r(423),{cause:m}),af(Si(l,d))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,m=Si(m,d),b=Eb(a.stateNode,m,b),eb(a,b),cn!==4&&(cn=2)),!1;var x=Error(r(520),{cause:m});if(x=Si(x,d),Ef===null?Ef=[x]:Ef.push(x),cn!==4&&(cn=2),l===null)return!0;m=Si(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=b&-b,d.lanes|=a,a=Eb(d.stateNode,m,a),eb(d,a),!1;case 1:if(l=d.type,x=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Co===null||!Co.has(x))))return d.flags|=65536,b&=-b,d.lanes|=b,b=qA(b),UA(b,a,d,m),eb(d,b),!1}d=d.return}while(d!==null);return!1}var Nb=Error(r(461)),Cn=!1;function sr(a,l,d,m){l.child=a===null?FS(l,null,d,m):Gl(l,a.child,d,m)}function VA(a,l,d,m,b){d=d.render;var x=l.ref;if("ref"in m){var T={};for(var L in m)L!=="ref"&&(T[L]=m[L])}else T=m;return Bl(l),m=sb(a,l,d,T,x,b),L=ob(),a!==null&&!Cn?(lb(a,l,b),hs(a,l,b)):(mt&&L&&V0(l),l.flags|=1,sr(a,l,m,b),l.child)}function BA(a,l,d,m,b){if(a===null){var x=d.type;return typeof x=="function"&&!L0(x)&&x.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=x,$A(a,l,x,m,b)):(a=Ym(d.type,null,m,l,l.mode,b),a.ref=l.ref,a.return=l,l.child=a)}if(x=a.child,!Rb(a,b)){var T=x.memoizedProps;if(d=d.compare,d=d!==null?d:tf,d(T,m)&&a.ref===l.ref)return hs(a,l,b)}return l.flags|=1,a=os(x,m),a.ref=l.ref,a.return=l,l.child=a}function $A(a,l,d,m,b){if(a!==null){var x=a.memoizedProps;if(tf(x,m)&&a.ref===l.ref)if(Cn=!1,l.pendingProps=m=x,Rb(a,b))(a.flags&131072)!==0&&(Cn=!0);else return l.lanes=a.lanes,hs(a,l,b)}return Sb(a,l,d,m,b)}function FA(a,l,d,m){var b=m.children,x=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|d:d,a!==null){for(m=l.child=a.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~x}else m=0,l.child=null;return HA(a,l,x,d,m)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&ep(l,x!==null?x.cachePool:null),x!==null?KS(l,x):nb(),QS(l);else return m=l.lanes=536870912,HA(a,l,x!==null?x.baseLanes|d:d,d,m)}else x!==null?(ep(l,x.cachePool),KS(l,x),No(),l.memoizedState=null):(a!==null&&ep(l,null),nb(),No());return sr(a,l,b,d),l.child}function vf(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function HA(a,l,d,m,b){var x=Y0();return x=x===null?null:{parent:An._currentValue,pool:x},l.memoizedState={baseLanes:d,cachePool:x},a!==null&&ep(l,null),nb(),QS(l),a!==null&&fu(a,l,m,!0),l.childLanes=b,null}function gp(a,l){return l=yp({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function GA(a,l,d){return Gl(l,a.child,null,d),a=gp(l,l.pendingProps),a.flags|=2,si(l),l.memoizedState=null,a}function r9(a,l,d){var m=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(mt){if(m.mode==="hidden")return a=gp(l,m),l.lanes=536870912,vf(null,a);if(ib(l),(a=Kt)?(a=iC(a,Ci),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:vo!==null?{id:Ta,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},d=CS(a),d.return=l,l.child=d,ir=l,Kt=null)):a=null,a===null)throw bo(l);return l.lanes=536870912,null}return gp(l,m)}var x=a.memoizedState;if(x!==null){var T=x.dehydrated;if(ib(l),b)if(l.flags&256)l.flags&=-257,l=GA(a,l,d);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(r(558));else if(Cn||fu(a,l,d,!1),b=(d&a.childLanes)!==0,Cn||b){if(m=Bt,m!==null&&(T=zd(m,d),T!==0&&T!==x.retryLane))throw x.retryLane=T,Ll(a,T),Kr(m,a,T),Nb;Ap(),l=GA(a,l,d)}else a=x.treeContext,Kt=Pi(T.nextSibling),ir=l,mt=!0,yo=null,Ci=!1,a!==null&&IS(l,a),l=gp(l,m),l.flags|=4096;return l}return a=os(a.child,{mode:m.mode,children:m.children}),a.ref=l.ref,l.child=a,a.return=l,a}function vp(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function Sb(a,l,d,m,b){return Bl(l),d=sb(a,l,d,m,void 0,b),m=ob(),a!==null&&!Cn?(lb(a,l,b),hs(a,l,b)):(mt&&m&&V0(l),l.flags|=1,sr(a,l,d,b),l.child)}function KA(a,l,d,m,b,x){return Bl(l),l.updateQueue=null,d=YS(l,m,d,b),WS(a),m=ob(),a!==null&&!Cn?(lb(a,l,x),hs(a,l,x)):(mt&&m&&V0(l),l.flags|=1,sr(a,l,d,x),l.child)}function QA(a,l,d,m,b){if(Bl(l),l.stateNode===null){var x=lu,T=d.contextType;typeof T=="object"&&T!==null&&(x=ar(T)),x=new d(m,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=jb,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=m,x.state=l.memoizedState,x.refs={},Z0(l),T=d.contextType,x.context=typeof T=="object"&&T!==null?ar(T):lu,x.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(wb(l,d,T,m),x.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&jb.enqueueReplaceState(x,x.state,null),ff(l,m,x,b),df(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(a===null){x=l.stateNode;var L=l.memoizedProps,G=Ql(d,L);x.props=G;var ae=x.context,he=d.contextType;T=lu,typeof he=="object"&&he!==null&&(T=ar(he));var be=d.getDerivedStateFromProps;he=typeof be=="function"||typeof x.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,he||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(L||ae!==T)&&kA(l,x,m,T),xo=!1;var oe=l.memoizedState;x.state=oe,ff(l,m,x,b),df(),ae=l.memoizedState,L||oe!==ae||xo?(typeof be=="function"&&(wb(l,d,be,m),ae=l.memoizedState),(G=xo||RA(l,d,G,m,oe,ae,T))?(he||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=ae),x.props=m,x.state=ae,x.context=T,m=G):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{x=l.stateNode,J0(a,l),T=l.memoizedProps,he=Ql(d,T),x.props=he,be=l.pendingProps,oe=x.context,ae=d.contextType,G=lu,typeof ae=="object"&&ae!==null&&(G=ar(ae)),L=d.getDerivedStateFromProps,(ae=typeof L=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==be||oe!==G)&&kA(l,x,m,G),xo=!1,oe=l.memoizedState,x.state=oe,ff(l,m,x,b),df();var de=l.memoizedState;T!==be||oe!==de||xo||a!==null&&a.dependencies!==null&&Zm(a.dependencies)?(typeof L=="function"&&(wb(l,d,L,m),de=l.memoizedState),(he=xo||RA(l,d,he,m,oe,de,G)||a!==null&&a.dependencies!==null&&Zm(a.dependencies))?(ae||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(m,de,G),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(m,de,G)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===a.memoizedProps&&oe===a.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&oe===a.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=de),x.props=m,x.state=de,x.context=G,m=he):(typeof x.componentDidUpdate!="function"||T===a.memoizedProps&&oe===a.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&oe===a.memoizedState||(l.flags|=1024),m=!1)}return x=m,vp(a,l),m=(l.flags&128)!==0,x||m?(x=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,a!==null&&m?(l.child=Gl(l,a.child,null,b),l.child=Gl(l,null,d,b)):sr(a,l,d,b),l.memoizedState=x.state,a=l.child):a=hs(a,l,b),a}function WA(a,l,d,m){return Ul(),l.flags|=256,sr(a,l,d,m),l.child}var Ab={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tb(a){return{baseLanes:a,cachePool:LS()}}function Cb(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=li),a}function YA(a,l,d){var m=l.pendingProps,b=!1,x=(l.flags&128)!==0,T;if((T=x)||(T=a!==null&&a.memoizedState===null?!1:(vn.current&2)!==0),T&&(b=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,a===null){if(mt){if(b?Eo(l):No(),(a=Kt)?(a=iC(a,Ci),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:vo!==null?{id:Ta,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},d=CS(a),d.return=l,l.child=d,ir=l,Kt=null)):a=null,a===null)throw bo(l);return d_(a)?l.lanes=32:l.lanes=536870912,null}var L=m.children;return m=m.fallback,b?(No(),b=l.mode,L=yp({mode:"hidden",children:L},b),m=ql(m,b,d,null),L.return=l,m.return=l,L.sibling=m,l.child=L,m=l.child,m.memoizedState=Tb(d),m.childLanes=Cb(a,T,d),l.memoizedState=Ab,vf(null,m)):(Eo(l),Ob(l,L))}var G=a.memoizedState;if(G!==null&&(L=G.dehydrated,L!==null)){if(x)l.flags&256?(Eo(l),l.flags&=-257,l=Pb(a,l,d)):l.memoizedState!==null?(No(),l.child=a.child,l.flags|=128,l=null):(No(),L=m.fallback,b=l.mode,m=yp({mode:"visible",children:m.children},b),L=ql(L,b,d,null),L.flags|=2,m.return=l,L.return=l,m.sibling=L,l.child=m,Gl(l,a.child,null,d),m=l.child,m.memoizedState=Tb(d),m.childLanes=Cb(a,T,d),l.memoizedState=Ab,l=vf(null,m));else if(Eo(l),d_(L)){if(T=L.nextSibling&&L.nextSibling.dataset,T)var ae=T.dgst;T=ae,m=Error(r(419)),m.stack="",m.digest=T,af({value:m,source:null,stack:null}),l=Pb(a,l,d)}else if(Cn||fu(a,l,d,!1),T=(d&a.childLanes)!==0,Cn||T){if(T=Bt,T!==null&&(m=zd(T,d),m!==0&&m!==G.retryLane))throw G.retryLane=m,Ll(a,m),Kr(T,a,m),Nb;u_(L)||Ap(),l=Pb(a,l,d)}else u_(L)?(l.flags|=192,l.child=a.child,l=null):(a=G.treeContext,Kt=Pi(L.nextSibling),ir=l,mt=!0,yo=null,Ci=!1,a!==null&&IS(l,a),l=Ob(l,m.children),l.flags|=4096);return l}return b?(No(),L=m.fallback,b=l.mode,G=a.child,ae=G.sibling,m=os(G,{mode:"hidden",children:m.children}),m.subtreeFlags=G.subtreeFlags&65011712,ae!==null?L=os(ae,L):(L=ql(L,b,d,null),L.flags|=2),L.return=l,m.return=l,m.sibling=L,l.child=m,vf(null,m),m=l.child,L=a.child.memoizedState,L===null?L=Tb(d):(b=L.cachePool,b!==null?(G=An._currentValue,b=b.parent!==G?{parent:G,pool:G}:b):b=LS(),L={baseLanes:L.baseLanes|d,cachePool:b}),m.memoizedState=L,m.childLanes=Cb(a,T,d),l.memoizedState=Ab,vf(a.child,m)):(Eo(l),d=a.child,a=d.sibling,d=os(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,a!==null&&(T=l.deletions,T===null?(l.deletions=[a],l.flags|=16):T.push(a)),l.child=d,l.memoizedState=null,d)}function Ob(a,l){return l=yp({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function yp(a,l){return a=ii(22,a,null,l),a.lanes=0,a}function Pb(a,l,d){return Gl(l,a.child,null,d),a=Ob(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function XA(a,l,d){a.lanes|=l;var m=a.alternate;m!==null&&(m.lanes|=l),G0(a.return,l,d)}function Ib(a,l,d,m,b,x){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b,treeForkCount:x}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=b,T.treeForkCount=x)}function ZA(a,l,d){var m=l.pendingProps,b=m.revealOrder,x=m.tail;m=m.children;var T=vn.current,L=(T&2)!==0;if(L?(T=T&1|2,l.flags|=128):T&=1,ye(vn,T),sr(a,l,m,d),m=mt?rf:0,!L&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&XA(a,d,l);else if(a.tag===19)XA(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(b){case"forwards":for(d=l.child,b=null;d!==null;)a=d.alternate,a!==null&&sp(a)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),Ib(l,!1,b,d,x,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(a=b.alternate,a!==null&&sp(a)===null){l.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}Ib(l,!0,d,null,x,m);break;case"together":Ib(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function hs(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),To|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(fu(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,d=os(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=os(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function Rb(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Zm(a)))}function i9(a,l,d){switch(l.tag){case 3:Me(l,l.stateNode.containerInfo),_o(l,An,a.memoizedState.cache),Ul();break;case 27:case 5:Se(l);break;case 4:Me(l,l.stateNode.containerInfo);break;case 10:_o(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,ib(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Eo(l),l.flags|=128,null):(d&l.child.childLanes)!==0?YA(a,l,d):(Eo(l),a=hs(a,l,d),a!==null?a.sibling:null);Eo(l);break;case 19:var b=(a.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(fu(a,l,d,!1),m=(d&l.childLanes)!==0),b){if(m)return ZA(a,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ye(vn,vn.current),m)break;return null;case 22:return l.lanes=0,FA(a,l,d,l.pendingProps);case 24:_o(l,An,a.memoizedState.cache)}return hs(a,l,d)}function JA(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)Cn=!0;else{if(!Rb(a,d)&&(l.flags&128)===0)return Cn=!1,i9(a,l,d);Cn=(a.flags&131072)!==0}else Cn=!1,mt&&(l.flags&1048576)!==0&&PS(l,rf,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(a=Fl(l.elementType),l.type=a,typeof a=="function")L0(a)?(m=Ql(a,m),l.tag=1,l=QA(null,l,a,m,d)):(l.tag=0,l=Sb(null,l,a,m,d));else{if(a!=null){var b=a.$$typeof;if(b===C){l.tag=11,l=VA(null,l,a,m,d);break e}else if(b===D){l.tag=14,l=BA(null,l,a,m,d);break e}}throw l=W(a)||a,Error(r(306,l,""))}}return l;case 0:return Sb(a,l,l.type,l.pendingProps,d);case 1:return m=l.type,b=Ql(m,l.pendingProps),QA(a,l,m,b,d);case 3:e:{if(Me(l,l.stateNode.containerInfo),a===null)throw Error(r(387));m=l.pendingProps;var x=l.memoizedState;b=x.element,J0(a,l),ff(l,m,null,d);var T=l.memoizedState;if(m=T.cache,_o(l,An,m),m!==x.cache&&K0(l,[An],d,!0),df(),m=T.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=WA(a,l,m,d);break e}else if(m!==b){b=Si(Error(r(424)),l),af(b),l=WA(a,l,m,d);break e}else for(a=l.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Kt=Pi(a.firstChild),ir=l,mt=!0,yo=null,Ci=!0,d=FS(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ul(),m===b){l=hs(a,l,d);break e}sr(a,l,m,d)}l=l.child}return l;case 26:return vp(a,l),a===null?(d=uC(l.type,null,l.pendingProps,null))?l.memoizedState=d:mt||(d=l.type,a=l.pendingProps,m=kp(ne.current).createElement(d),m[En]=l,m[Hn]=a,or(m,d,a),Nn(m),l.stateNode=m):l.memoizedState=uC(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Se(l),a===null&&mt&&(m=l.stateNode=oC(l.type,l.pendingProps,ne.current),ir=l,Ci=!0,b=Kt,Ro(l.type)?(f_=b,Kt=Pi(m.firstChild)):Kt=b),sr(a,l,l.pendingProps.children,d),vp(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&mt&&((b=m=Kt)&&(m=k9(m,l.type,l.pendingProps,Ci),m!==null?(l.stateNode=m,ir=l,Kt=Pi(m.firstChild),Ci=!1,b=!0):b=!1),b||bo(l)),Se(l),b=l.type,x=l.pendingProps,T=a!==null?a.memoizedProps:null,m=x.children,o_(b,x)?m=null:T!==null&&o_(b,T)&&(l.flags|=32),l.memoizedState!==null&&(b=sb(a,l,WU,null,null,d),If._currentValue=b),vp(a,l),sr(a,l,m,d),l.child;case 6:return a===null&&mt&&((a=d=Kt)&&(d=D9(d,l.pendingProps,Ci),d!==null?(l.stateNode=d,ir=l,Kt=null,a=!0):a=!1),a||bo(l)),null;case 13:return YA(a,l,d);case 4:return Me(l,l.stateNode.containerInfo),m=l.pendingProps,a===null?l.child=Gl(l,null,m,d):sr(a,l,m,d),l.child;case 11:return VA(a,l,l.type,l.pendingProps,d);case 7:return sr(a,l,l.pendingProps,d),l.child;case 8:return sr(a,l,l.pendingProps.children,d),l.child;case 12:return sr(a,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,_o(l,l.type,m.value),sr(a,l,m.children,d),l.child;case 9:return b=l.type._context,m=l.pendingProps.children,Bl(l),b=ar(b),m=m(b),l.flags|=1,sr(a,l,m,d),l.child;case 14:return BA(a,l,l.type,l.pendingProps,d);case 15:return $A(a,l,l.type,l.pendingProps,d);case 19:return ZA(a,l,d);case 31:return r9(a,l,d);case 22:return FA(a,l,d,l.pendingProps);case 24:return Bl(l),m=ar(An),a===null?(b=Y0(),b===null&&(b=Bt,x=Q0(),b.pooledCache=x,x.refCount++,x!==null&&(b.pooledCacheLanes|=d),b=x),l.memoizedState={parent:m,cache:b},Z0(l),_o(l,An,b)):((a.lanes&d)!==0&&(J0(a,l),ff(l,null,null,d),df()),b=a.memoizedState,x=l.memoizedState,b.parent!==m?(b={parent:m,cache:m},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),_o(l,An,m)):(m=x.cache,_o(l,An,m),m!==b.cache&&K0(l,[An],d,!0))),sr(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ms(a){a.flags|=4}function kb(a,l,d,m,b){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(b&335544128)===b)if(a.stateNode.complete)a.flags|=8192;else if(ST())a.flags|=8192;else throw Hl=np,X0}else a.flags&=-16777217}function eT(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!pC(l))if(ST())a.flags|=8192;else throw Hl=np,X0}function bp(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Ue():536870912,a.lanes|=l,Eu|=l)}function yf(a,l){if(!mt)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Qt(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,m=0;if(l)for(var b=a.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=d,l}function a9(a,l,d){var m=l.pendingProps;switch(B0(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(l),null;case 1:return Qt(l),null;case 3:return d=l.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),us(An),se(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(du(l)?ms(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,F0())),Qt(l),null;case 26:var b=l.type,x=l.memoizedState;return a===null?(ms(l),x!==null?(Qt(l),eT(l,x)):(Qt(l),kb(l,b,null,m,d))):x?x!==a.memoizedState?(ms(l),Qt(l),eT(l,x)):(Qt(l),l.flags&=-16777217):(a=a.memoizedProps,a!==m&&ms(l),Qt(l),kb(l,b,a,m,d)),null;case 27:if(X(l),d=ne.current,b=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==m&&ms(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Qt(l),null}a=we.current,du(l)?RS(l):(a=oC(b,m,d),l.stateNode=a,ms(l))}return Qt(l),null;case 5:if(X(l),b=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==m&&ms(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Qt(l),null}if(x=we.current,du(l))RS(l);else{var T=kp(ne.current);switch(x){case 1:x=T.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:x=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":x=T.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":x=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":x=T.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?x.multiple=!0:m.size&&(x.size=m.size);break;default:x=typeof m.is=="string"?T.createElement(b,{is:m.is}):T.createElement(b)}}x[En]=l,x[Hn]=m;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)x.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=x;e:switch(or(x,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ms(l)}}return Qt(l),kb(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,d),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==m&&ms(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(a=ne.current,du(l)){if(a=l.stateNode,d=l.memoizedProps,m=null,b=ir,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}a[En]=l,a=!!(a.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||YT(a.nodeValue,d)),a||bo(l,!0)}else a=kp(a).createTextNode(m),a[En]=l,l.stateNode=a}return Qt(l),null;case 31:if(d=l.memoizedState,a===null||a.memoizedState!==null){if(m=du(l),d!==null){if(a===null){if(!m)throw Error(r(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[En]=l}else Ul(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qt(l),a=!1}else d=F0(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),a=!0;if(!a)return l.flags&256?(si(l),l):(si(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Qt(l),null;case 13:if(m=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=du(l),m!==null&&m.dehydrated!==null){if(a===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[En]=l}else Ul(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qt(l),b=!1}else b=F0(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(si(l),l):(si(l),null)}return si(l),(l.flags&128)!==0?(l.lanes=d,l):(d=m!==null,a=a!==null&&a.memoizedState!==null,d&&(m=l.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),x=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),x!==b&&(m.flags|=2048)),d!==a&&d&&(l.child.flags|=8192),bp(l,l.updateQueue),Qt(l),null);case 4:return se(),a===null&&n_(l.stateNode.containerInfo),Qt(l),null;case 10:return us(l.type),Qt(l),null;case 19:if(te(vn),m=l.memoizedState,m===null)return Qt(l),null;if(b=(l.flags&128)!==0,x=m.rendering,x===null)if(b)yf(m,!1);else{if(cn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(x=sp(a),x!==null){for(l.flags|=128,yf(m,!1),a=x.updateQueue,l.updateQueue=a,bp(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)TS(d,a),d=d.sibling;return ye(vn,vn.current&1|2),mt&&ls(l,m.treeForkCount),l.child}a=a.sibling}m.tail!==null&&Ve()>Ep&&(l.flags|=128,b=!0,yf(m,!1),l.lanes=4194304)}else{if(!b)if(a=sp(x),a!==null){if(l.flags|=128,b=!0,a=a.updateQueue,l.updateQueue=a,bp(l,a),yf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!mt)return Qt(l),null}else 2*Ve()-m.renderingStartTime>Ep&&d!==536870912&&(l.flags|=128,b=!0,yf(m,!1),l.lanes=4194304);m.isBackwards?(x.sibling=l.child,l.child=x):(a=m.last,a!==null?a.sibling=x:l.child=x,m.last=x)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=Ve(),a.sibling=null,d=vn.current,ye(vn,b?d&1|2:d&1),mt&&ls(l,m.treeForkCount),a):(Qt(l),null);case 22:case 23:return si(l),rb(),m=l.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(Qt(l),l.subtreeFlags&6&&(l.flags|=8192)):Qt(l),d=l.updateQueue,d!==null&&bp(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),a!==null&&te($l),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),us(An),Qt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function s9(a,l){switch(B0(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return us(An),se(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return X(l),null;case 31:if(l.memoizedState!==null){if(si(l),l.alternate===null)throw Error(r(340));Ul()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(si(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Ul()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return te(vn),null;case 4:return se(),null;case 10:return us(l.type),null;case 22:case 23:return si(l),rb(),a!==null&&te($l),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return us(An),null;case 25:return null;default:return null}}function tT(a,l){switch(B0(l),l.tag){case 3:us(An),se();break;case 26:case 27:case 5:X(l);break;case 4:se();break;case 31:l.memoizedState!==null&&si(l);break;case 13:si(l);break;case 19:te(vn);break;case 10:us(l.type);break;case 22:case 23:si(l),rb(),a!==null&&te($l);break;case 24:us(An)}}function bf(a,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&a)===a){m=void 0;var x=d.create,T=d.inst;m=x(),T.destroy=m}d=d.next}while(d!==b)}}catch(L){Tt(l,l.return,L)}}function So(a,l,d){try{var m=l.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var x=b.next;m=x;do{if((m.tag&a)===a){var T=m.inst,L=T.destroy;if(L!==void 0){T.destroy=void 0,b=l;var G=d,ae=L;try{ae()}catch(he){Tt(b,G,he)}}}m=m.next}while(m!==x)}}catch(he){Tt(l,l.return,he)}}function nT(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{GS(l,d)}catch(m){Tt(a,a.return,m)}}}function rT(a,l,d){d.props=Ql(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(m){Tt(a,l,m)}}function _f(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof d=="function"?a.refCleanup=d(m):d.current=m}}catch(b){Tt(a,l,b)}}function Oa(a,l){var d=a.ref,m=a.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(b){Tt(a,l,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){Tt(a,l,b)}else d.current=null}function iT(a){var l=a.type,d=a.memoizedProps,m=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(b){Tt(a,a.return,b)}}function Db(a,l,d){try{var m=a.stateNode;T9(m,a.type,d,l),m[Hn]=l}catch(b){Tt(a,a.return,b)}}function aT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ro(a.type)||a.tag===4}function Mb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||aT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ro(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function zb(a,l,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Qi));else if(m!==4&&(m===27&&Ro(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(zb(a,l,d),a=a.sibling;a!==null;)zb(a,l,d),a=a.sibling}function _p(a,l,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(m!==4&&(m===27&&Ro(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(_p(a,l,d),a=a.sibling;a!==null;)_p(a,l,d),a=a.sibling}function sT(a){var l=a.stateNode,d=a.memoizedProps;try{for(var m=a.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);or(l,m,d),l[En]=a,l[Hn]=d}catch(x){Tt(a,a.return,x)}}var ps=!1,On=!1,Lb=!1,oT=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function o9(a,l){if(a=a.containerInfo,a_=Vp,a=bS(a),P0(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{d.nodeType,x.nodeType}catch{d=null;break e}var T=0,L=-1,G=-1,ae=0,he=0,be=a,oe=null;t:for(;;){for(var de;be!==d||b!==0&&be.nodeType!==3||(L=T+b),be!==x||m!==0&&be.nodeType!==3||(G=T+m),be.nodeType===3&&(T+=be.nodeValue.length),(de=be.firstChild)!==null;)oe=be,be=de;for(;;){if(be===a)break t;if(oe===d&&++ae===b&&(L=T),oe===x&&++he===m&&(G=T),(de=be.nextSibling)!==null)break;be=oe,oe=be.parentNode}be=de}d=L===-1||G===-1?null:{start:L,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(s_={focusedElem:a,selectionRange:d},Vp=!1,Kn=l;Kn!==null;)if(l=Kn,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Kn=a;else for(;Kn!==null;){switch(l=Kn,x=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(d=0;d<a.length;d++)b=a[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,d=l,b=x.memoizedProps,x=x.memoizedState,m=d.stateNode;try{var Oe=Ql(d.type,b);a=m.getSnapshotBeforeUpdate(Oe,x),m.__reactInternalSnapshotBeforeUpdate=a}catch($e){Tt(d,d.return,$e)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)c_(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":c_(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=l.sibling,a!==null){a.return=l.return,Kn=a;break}Kn=l.return}}function lT(a,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:vs(a,d),m&4&&bf(5,d);break;case 1:if(vs(a,d),m&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(T){Tt(d,d.return,T)}else{var b=Ql(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(b,l,a.__reactInternalSnapshotBeforeUpdate)}catch(T){Tt(d,d.return,T)}}m&64&&nT(d),m&512&&_f(d,d.return);break;case 3:if(vs(a,d),m&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{GS(a,l)}catch(T){Tt(d,d.return,T)}}break;case 27:l===null&&m&4&&sT(d);case 26:case 5:vs(a,d),l===null&&m&4&&iT(d),m&512&&_f(d,d.return);break;case 12:vs(a,d);break;case 31:vs(a,d),m&4&&dT(a,d);break;case 13:vs(a,d),m&4&&fT(a,d),m&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=g9.bind(null,d),M9(a,d))));break;case 22:if(m=d.memoizedState!==null||ps,!m){l=l!==null&&l.memoizedState!==null||On,b=ps;var x=On;ps=m,(On=l)&&!x?ys(a,d,(d.subtreeFlags&8772)!==0):vs(a,d),ps=b,On=x}break;case 30:break;default:vs(a,d)}}function cT(a){var l=a.alternate;l!==null&&(a.alternate=null,cT(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Qc(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Xt=null,$r=!1;function gs(a,l,d){for(d=d.child;d!==null;)uT(a,l,d),d=d.sibling}function uT(a,l,d){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(sn,d)}catch{}switch(d.tag){case 26:On||Oa(d,l),gs(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:On||Oa(d,l);var m=Xt,b=$r;Ro(d.type)&&(Xt=d.stateNode,$r=!1),gs(a,l,d),Cf(d.stateNode),Xt=m,$r=b;break;case 5:On||Oa(d,l);case 6:if(m=Xt,b=$r,Xt=null,gs(a,l,d),Xt=m,$r=b,Xt!==null)if($r)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(d.stateNode)}catch(x){Tt(d,l,x)}else try{Xt.removeChild(d.stateNode)}catch(x){Tt(d,l,x)}break;case 18:Xt!==null&&($r?(a=Xt,nC(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Iu(a)):nC(Xt,d.stateNode));break;case 4:m=Xt,b=$r,Xt=d.stateNode.containerInfo,$r=!0,gs(a,l,d),Xt=m,$r=b;break;case 0:case 11:case 14:case 15:So(2,d,l),On||So(4,d,l),gs(a,l,d);break;case 1:On||(Oa(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&rT(d,l,m)),gs(a,l,d);break;case 21:gs(a,l,d);break;case 22:On=(m=On)||d.memoizedState!==null,gs(a,l,d),On=m;break;default:gs(a,l,d)}}function dT(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Iu(a)}catch(d){Tt(l,l.return,d)}}}function fT(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Iu(a)}catch(d){Tt(l,l.return,d)}}function l9(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new oT),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new oT),l;default:throw Error(r(435,a.tag))}}function xp(a,l){var d=l9(a);l.forEach(function(m){if(!d.has(m)){d.add(m);var b=v9.bind(null,a,m);m.then(b,b)}})}function Fr(a,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m],x=a,T=l,L=T;e:for(;L!==null;){switch(L.tag){case 27:if(Ro(L.type)){Xt=L.stateNode,$r=!1;break e}break;case 5:Xt=L.stateNode,$r=!1;break e;case 3:case 4:Xt=L.stateNode.containerInfo,$r=!0;break e}L=L.return}if(Xt===null)throw Error(r(160));uT(x,T,b),Xt=null,$r=!1,x=b.alternate,x!==null&&(x.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)hT(l,a),l=l.sibling}var ea=null;function hT(a,l){var d=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Fr(l,a),Hr(a),m&4&&(So(3,a,a.return),bf(3,a),So(5,a,a.return));break;case 1:Fr(l,a),Hr(a),m&512&&(On||d===null||Oa(d,d.return)),m&64&&ps&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var b=ea;if(Fr(l,a),Hr(a),m&512&&(On||d===null||Oa(d,d.return)),m&4){var x=d!==null?d.memoizedState:null;if(m=a.memoizedState,d===null)if(m===null)if(a.stateNode===null){e:{m=a.type,d=a.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":x=b.getElementsByTagName("title")[0],(!x||x[ga]||x[En]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=b.createElement(m),b.head.insertBefore(x,b.querySelector("head > title"))),or(x,m,d),x[En]=a,Nn(x),m=x;break e;case"link":var T=hC("link","href",b).get(m+(d.href||""));if(T){for(var L=0;L<T.length;L++)if(x=T[L],x.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&x.getAttribute("rel")===(d.rel==null?null:d.rel)&&x.getAttribute("title")===(d.title==null?null:d.title)&&x.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(L,1);break t}}x=b.createElement(m),or(x,m,d),b.head.appendChild(x);break;case"meta":if(T=hC("meta","content",b).get(m+(d.content||""))){for(L=0;L<T.length;L++)if(x=T[L],x.getAttribute("content")===(d.content==null?null:""+d.content)&&x.getAttribute("name")===(d.name==null?null:d.name)&&x.getAttribute("property")===(d.property==null?null:d.property)&&x.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&x.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(L,1);break t}}x=b.createElement(m),or(x,m,d),b.head.appendChild(x);break;default:throw Error(r(468,m))}x[En]=a,Nn(x),m=x}a.stateNode=m}else mC(b,a.type,a.stateNode);else a.stateNode=fC(b,m,a.memoizedProps);else x!==m?(x===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):x.count--,m===null?mC(b,a.type,a.stateNode):fC(b,m,a.memoizedProps)):m===null&&a.stateNode!==null&&Db(a,a.memoizedProps,d.memoizedProps)}break;case 27:Fr(l,a),Hr(a),m&512&&(On||d===null||Oa(d,d.return)),d!==null&&m&4&&Db(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Fr(l,a),Hr(a),m&512&&(On||d===null||Oa(d,d.return)),a.flags&32){b=a.stateNode;try{Br(b,"")}catch(Oe){Tt(a,a.return,Oe)}}m&4&&a.stateNode!=null&&(b=a.memoizedProps,Db(a,b,d!==null?d.memoizedProps:b)),m&1024&&(Lb=!0);break;case 6:if(Fr(l,a),Hr(a),m&4){if(a.stateNode===null)throw Error(r(162));m=a.memoizedProps,d=a.stateNode;try{d.nodeValue=m}catch(Oe){Tt(a,a.return,Oe)}}break;case 3:if(zp=null,b=ea,ea=Dp(l.containerInfo),Fr(l,a),ea=b,Hr(a),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Iu(l.containerInfo)}catch(Oe){Tt(a,a.return,Oe)}Lb&&(Lb=!1,mT(a));break;case 4:m=ea,ea=Dp(a.stateNode.containerInfo),Fr(l,a),Hr(a),ea=m;break;case 12:Fr(l,a),Hr(a);break;case 31:Fr(l,a),Hr(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,xp(a,m)));break;case 13:Fr(l,a),Hr(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(jp=Ve()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,xp(a,m)));break;case 22:b=a.memoizedState!==null;var G=d!==null&&d.memoizedState!==null,ae=ps,he=On;if(ps=ae||b,On=he||G,Fr(l,a),On=he,ps=ae,Hr(a),m&8192)e:for(l=a.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(d===null||G||ps||On||Wl(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){G=d=l;try{if(x=G.stateNode,b)T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{L=G.stateNode;var be=G.memoizedProps.style,oe=be!=null&&be.hasOwnProperty("display")?be.display:null;L.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Oe){Tt(G,G.return,Oe)}}}else if(l.tag===6){if(d===null){G=l;try{G.stateNode.nodeValue=b?"":G.memoizedProps}catch(Oe){Tt(G,G.return,Oe)}}}else if(l.tag===18){if(d===null){G=l;try{var de=G.stateNode;b?rC(de,!0):rC(G.stateNode,!1)}catch(Oe){Tt(G,G.return,Oe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=a.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,xp(a,d))));break;case 19:Fr(l,a),Hr(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,xp(a,m)));break;case 30:break;case 21:break;default:Fr(l,a),Hr(a)}}function Hr(a){var l=a.flags;if(l&2){try{for(var d,m=a.return;m!==null;){if(aT(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var b=d.stateNode,x=Mb(a);_p(a,x,b);break;case 5:var T=d.stateNode;d.flags&32&&(Br(T,""),d.flags&=-33);var L=Mb(a);_p(a,L,T);break;case 3:case 4:var G=d.stateNode.containerInfo,ae=Mb(a);zb(a,ae,G);break;default:throw Error(r(161))}}catch(he){Tt(a,a.return,he)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function mT(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;mT(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function vs(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)lT(a,l.alternate,l),l=l.sibling}function Wl(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:So(4,l,l.return),Wl(l);break;case 1:Oa(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&rT(l,l.return,d),Wl(l);break;case 27:Cf(l.stateNode);case 26:case 5:Oa(l,l.return),Wl(l);break;case 22:l.memoizedState===null&&Wl(l);break;case 30:Wl(l);break;default:Wl(l)}a=a.sibling}}function ys(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,b=a,x=l,T=x.flags;switch(x.tag){case 0:case 11:case 15:ys(b,x,d),bf(4,x);break;case 1:if(ys(b,x,d),m=x,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ae){Tt(m,m.return,ae)}if(m=x,b=m.updateQueue,b!==null){var L=m.stateNode;try{var G=b.shared.hiddenCallbacks;if(G!==null)for(b.shared.hiddenCallbacks=null,b=0;b<G.length;b++)HS(G[b],L)}catch(ae){Tt(m,m.return,ae)}}d&&T&64&&nT(x),_f(x,x.return);break;case 27:sT(x);case 26:case 5:ys(b,x,d),d&&m===null&&T&4&&iT(x),_f(x,x.return);break;case 12:ys(b,x,d);break;case 31:ys(b,x,d),d&&T&4&&dT(b,x);break;case 13:ys(b,x,d),d&&T&4&&fT(b,x);break;case 22:x.memoizedState===null&&ys(b,x,d),_f(x,x.return);break;case 30:break;default:ys(b,x,d)}l=l.sibling}}function qb(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&sf(d))}function Ub(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&sf(a))}function ta(a,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)pT(a,l,d,m),l=l.sibling}function pT(a,l,d,m){var b=l.flags;switch(l.tag){case 0:case 11:case 15:ta(a,l,d,m),b&2048&&bf(9,l);break;case 1:ta(a,l,d,m);break;case 3:ta(a,l,d,m),b&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&sf(a)));break;case 12:if(b&2048){ta(a,l,d,m),a=l.stateNode;try{var x=l.memoizedProps,T=x.id,L=x.onPostCommit;typeof L=="function"&&L(T,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(G){Tt(l,l.return,G)}}else ta(a,l,d,m);break;case 31:ta(a,l,d,m);break;case 13:ta(a,l,d,m);break;case 23:break;case 22:x=l.stateNode,T=l.alternate,l.memoizedState!==null?x._visibility&2?ta(a,l,d,m):xf(a,l):x._visibility&2?ta(a,l,d,m):(x._visibility|=2,xu(a,l,d,m,(l.subtreeFlags&10256)!==0||!1)),b&2048&&qb(T,l);break;case 24:ta(a,l,d,m),b&2048&&Ub(l.alternate,l);break;default:ta(a,l,d,m)}}function xu(a,l,d,m,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=a,T=l,L=d,G=m,ae=T.flags;switch(T.tag){case 0:case 11:case 15:xu(x,T,L,G,b),bf(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?xu(x,T,L,G,b):xf(x,T):(he._visibility|=2,xu(x,T,L,G,b)),b&&ae&2048&&qb(T.alternate,T);break;case 24:xu(x,T,L,G,b),b&&ae&2048&&Ub(T.alternate,T);break;default:xu(x,T,L,G,b)}l=l.sibling}}function xf(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,m=l,b=m.flags;switch(m.tag){case 22:xf(d,m),b&2048&&qb(m.alternate,m);break;case 24:xf(d,m),b&2048&&Ub(m.alternate,m);break;default:xf(d,m)}l=l.sibling}}var wf=8192;function wu(a,l,d){if(a.subtreeFlags&wf)for(a=a.child;a!==null;)gT(a,l,d),a=a.sibling}function gT(a,l,d){switch(a.tag){case 26:wu(a,l,d),a.flags&wf&&a.memoizedState!==null&&Q9(d,ea,a.memoizedState,a.memoizedProps);break;case 5:wu(a,l,d);break;case 3:case 4:var m=ea;ea=Dp(a.stateNode.containerInfo),wu(a,l,d),ea=m;break;case 22:a.memoizedState===null&&(m=a.alternate,m!==null&&m.memoizedState!==null?(m=wf,wf=16777216,wu(a,l,d),wf=m):wu(a,l,d));break;default:wu(a,l,d)}}function vT(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function jf(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Kn=m,bT(m,a)}vT(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)yT(a),a=a.sibling}function yT(a){switch(a.tag){case 0:case 11:case 15:jf(a),a.flags&2048&&So(9,a,a.return);break;case 3:jf(a);break;case 12:jf(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,wp(a)):jf(a);break;default:jf(a)}}function wp(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Kn=m,bT(m,a)}vT(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:So(8,l,l.return),wp(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,wp(l));break;default:wp(l)}a=a.sibling}}function bT(a,l){for(;Kn!==null;){var d=Kn;switch(d.tag){case 0:case 11:case 15:So(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:sf(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Kn=m;else e:for(d=a;Kn!==null;){m=Kn;var b=m.sibling,x=m.return;if(cT(m),m===d){Kn=null;break e}if(b!==null){b.return=x,Kn=b;break e}Kn=x}}}var c9={getCacheForType:function(a){var l=ar(An),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d},cacheSignal:function(){return ar(An).controller.signal}},u9=typeof WeakMap=="function"?WeakMap:Map,jt=0,Bt=null,it=null,lt=0,At=0,oi=null,Ao=!1,ju=!1,Vb=!1,bs=0,cn=0,To=0,Yl=0,Bb=0,li=0,Eu=0,Ef=null,Gr=null,$b=!1,jp=0,_T=0,Ep=1/0,Np=null,Co=null,Ln=0,Oo=null,Nu=null,_s=0,Fb=0,Hb=null,xT=null,Nf=0,Gb=null;function ci(){return(jt&2)!==0&&lt!==0?lt&-lt:H.T!==null?Zb():Sm()}function wT(){if(li===0)if((lt&536870912)===0||mt){var a=ns;ns<<=1,(ns&3932160)===0&&(ns=262144),li=a}else li=536870912;return a=ai.current,a!==null&&(a.flags|=32),li}function Kr(a,l,d){(a===Bt&&(At===2||At===9)||a.cancelPendingCommit!==null)&&(Su(a,0),Po(a,lt,li,!1)),Fn(a,d),((jt&2)===0||a!==Bt)&&(a===Bt&&((jt&2)===0&&(Yl|=d),cn===4&&Po(a,lt,li,!1)),Pa(a))}function jT(a,l,d){if((jt&6)!==0)throw Error(r(327));var m=!d&&(l&127)===0&&(l&a.expiredLanes)===0||ei(a,l),b=m?h9(a,l):Qb(a,l,!0),x=m;do{if(b===0){ju&&!m&&Po(a,l,0,!1);break}else{if(d=a.current.alternate,x&&!d9(d)){b=Qb(a,l,!1),x=!1;continue}if(b===2){if(x=l,a.errorRecoveryDisabledLanes&x)var T=0;else T=a.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var L=a;b=Ef;var G=L.current.memoizedState.isDehydrated;if(G&&(Su(L,T).flags|=256),T=Qb(L,T,!1),T!==2){if(Vb&&!G){L.errorRecoveryDisabledLanes|=x,Yl|=x,b=4;break e}x=Gr,Gr=b,x!==null&&(Gr===null?Gr=x:Gr.push.apply(Gr,x))}b=T}if(x=!1,b!==2)continue}}if(b===1){Su(a,0),Po(a,l,0,!0);break}e:{switch(m=a,x=b,x){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Po(m,l,li,!Ao);break e;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=jp+300-Ve(),10<b)){if(Po(m,l,li,!Ao),pr(m,0,!0)!==0)break e;_s=l,m.timeoutHandle=eC(ET.bind(null,m,d,Gr,Np,$b,l,li,Yl,Eu,Ao,x,"Throttled",-0,0),b);break e}ET(m,d,Gr,Np,$b,l,li,Yl,Eu,Ao,x,null,-0,0)}}break}while(!0);Pa(a)}function ET(a,l,d,m,b,x,T,L,G,ae,he,be,oe,de){if(a.timeoutHandle=-1,be=l.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},gT(l,x,be);var Oe=(x&62914560)===x?jp-Ve():(x&4194048)===x?_T-Ve():0;if(Oe=W9(be,Oe),Oe!==null){_s=x,a.cancelPendingCommit=Oe(IT.bind(null,a,l,x,d,m,b,T,L,G,he,be,null,oe,de)),Po(a,x,T,!ae);return}}IT(a,l,x,d,m,b,T,L,G)}function d9(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var b=d[m],x=b.getSnapshot;b=b.value;try{if(!ri(x(),b))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Po(a,l,d,m){l&=~Bb,l&=~Yl,a.suspendedLanes|=l,a.pingedLanes&=~l,m&&(a.warmLanes|=l),m=a.expirationTimes;for(var b=l;0<b;){var x=31-en(b),T=1<<x;m[x]=-1,b&=~T}d!==0&&_i(a,d,l)}function Sp(){return(jt&6)===0?(Sf(0),!1):!0}function Kb(){if(it!==null){if(At===0)var a=it.return;else a=it,cs=Vl=null,cb(a),gu=null,lf=0,a=it;for(;a!==null;)tT(a.alternate,a),a=a.return;it=null}}function Su(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,P9(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),_s=0,Kb(),Bt=a,it=d=os(a.current,null),lt=l,At=0,oi=null,Ao=!1,ju=ei(a,l),Vb=!1,Eu=li=Bb=Yl=To=cn=0,Gr=Ef=null,$b=!1,(l&8)!==0&&(l|=l&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=l;0<m;){var b=31-en(m),x=1<<b;l|=a[b],m&=~x}return bs=l,Km(),d}function NT(a,l){Je=null,H.H=gf,l===pu||l===tp?(l=VS(),At=3):l===X0?(l=VS(),At=4):At=l===Nb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,oi=l,it===null&&(cn=1,pp(a,Si(l,a.current)))}function ST(){var a=ai.current;return a===null?!0:(lt&4194048)===lt?Oi===null:(lt&62914560)===lt||(lt&536870912)!==0?a===Oi:!1}function AT(){var a=H.H;return H.H=gf,a===null?gf:a}function TT(){var a=H.A;return H.A=c9,a}function Ap(){cn=4,Ao||(lt&4194048)!==lt&&ai.current!==null||(ju=!0),(To&134217727)===0&&(Yl&134217727)===0||Bt===null||Po(Bt,lt,li,!1)}function Qb(a,l,d){var m=jt;jt|=2;var b=AT(),x=TT();(Bt!==a||lt!==l)&&(Np=null,Su(a,l)),l=!1;var T=cn;e:do try{if(At!==0&&it!==null){var L=it,G=oi;switch(At){case 8:Kb(),T=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(l=!0);var ae=At;if(At=0,oi=null,Au(a,L,G,ae),d&&ju){T=0;break e}break;default:ae=At,At=0,oi=null,Au(a,L,G,ae)}}f9(),T=cn;break}catch(he){NT(a,he)}while(!0);return l&&a.shellSuspendCounter++,cs=Vl=null,jt=m,H.H=b,H.A=x,it===null&&(Bt=null,lt=0,Km()),T}function f9(){for(;it!==null;)CT(it)}function h9(a,l){var d=jt;jt|=2;var m=AT(),b=TT();Bt!==a||lt!==l?(Np=null,Ep=Ve()+500,Su(a,l)):ju=ei(a,l);e:do try{if(At!==0&&it!==null){l=it;var x=oi;t:switch(At){case 1:At=0,oi=null,Au(a,l,x,1);break;case 2:case 9:if(qS(x)){At=0,oi=null,OT(l);break}l=function(){At!==2&&At!==9||Bt!==a||(At=7),Pa(a)},x.then(l,l);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:qS(x)?(At=0,oi=null,OT(l)):(At=0,oi=null,Au(a,l,x,7));break;case 5:var T=null;switch(it.tag){case 26:T=it.memoizedState;case 5:case 27:var L=it;if(T?pC(T):L.stateNode.complete){At=0,oi=null;var G=L.sibling;if(G!==null)it=G;else{var ae=L.return;ae!==null?(it=ae,Tp(ae)):it=null}break t}}At=0,oi=null,Au(a,l,x,5);break;case 6:At=0,oi=null,Au(a,l,x,6);break;case 8:Kb(),cn=6;break e;default:throw Error(r(462))}}m9();break}catch(he){NT(a,he)}while(!0);return cs=Vl=null,H.H=m,H.A=b,jt=d,it!==null?0:(Bt=null,lt=0,Km(),cn)}function m9(){for(;it!==null&&!fe();)CT(it)}function CT(a){var l=JA(a.alternate,a,bs);a.memoizedProps=a.pendingProps,l===null?Tp(a):it=l}function OT(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=KA(d,l,l.pendingProps,l.type,void 0,lt);break;case 11:l=KA(d,l,l.pendingProps,l.type.render,l.ref,lt);break;case 5:cb(l);default:tT(d,l),l=it=TS(l,bs),l=JA(d,l,bs)}a.memoizedProps=a.pendingProps,l===null?Tp(a):it=l}function Au(a,l,d,m){cs=Vl=null,cb(l),gu=null,lf=0;var b=l.return;try{if(n9(a,b,l,d,lt)){cn=1,pp(a,Si(d,a.current)),it=null;return}}catch(x){if(b!==null)throw it=b,x;cn=1,pp(a,Si(d,a.current)),it=null;return}l.flags&32768?(mt||m===1?a=!0:ju||(lt&536870912)!==0?a=!1:(Ao=a=!0,(m===2||m===9||m===3||m===6)&&(m=ai.current,m!==null&&m.tag===13&&(m.flags|=16384))),PT(l,a)):Tp(l)}function Tp(a){var l=a;do{if((l.flags&32768)!==0){PT(l,Ao);return}a=l.return;var d=a9(l.alternate,l,bs);if(d!==null){it=d;return}if(l=l.sibling,l!==null){it=l;return}it=l=a}while(l!==null);cn===0&&(cn=5)}function PT(a,l){do{var d=s9(a.alternate,a);if(d!==null){d.flags&=32767,it=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){it=a;return}it=a=d}while(a!==null);cn=6,it=null}function IT(a,l,d,m,b,x,T,L,G){a.cancelPendingCommit=null;do Cp();while(Ln!==0);if((jt&6)!==0)throw Error(r(327));if(l!==null){if(l===a.current)throw Error(r(177));if(x=l.lanes|l.childLanes,x|=M0,Nl(a,d,x,T,L,G),a===Bt&&(it=Bt=null,lt=0),Nu=l,Oo=a,_s=d,Fb=x,Hb=b,xT=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,y9(Lr,function(){return zT(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=H.T,H.T=null,b=le.p,le.p=2,T=jt,jt|=4;try{o9(a,l,d)}finally{jt=T,le.p=b,H.T=m}}Ln=1,RT(),kT(),DT()}}function RT(){if(Ln===1){Ln=0;var a=Oo,l=Nu,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=H.T,H.T=null;var m=le.p;le.p=2;var b=jt;jt|=4;try{hT(l,a);var x=s_,T=bS(a.containerInfo),L=x.focusedElem,G=x.selectionRange;if(T!==L&&L&&L.ownerDocument&&yS(L.ownerDocument.documentElement,L)){if(G!==null&&P0(L)){var ae=G.start,he=G.end;if(he===void 0&&(he=ae),"selectionStart"in L)L.selectionStart=ae,L.selectionEnd=Math.min(he,L.value.length);else{var be=L.ownerDocument||document,oe=be&&be.defaultView||window;if(oe.getSelection){var de=oe.getSelection(),Oe=L.textContent.length,$e=Math.min(G.start,Oe),Mt=G.end===void 0?$e:Math.min(G.end,Oe);!de.extend&&$e>Mt&&(T=Mt,Mt=$e,$e=T);var J=vS(L,$e),K=vS(L,Mt);if(J&&K&&(de.rangeCount!==1||de.anchorNode!==J.node||de.anchorOffset!==J.offset||de.focusNode!==K.node||de.focusOffset!==K.offset)){var ie=be.createRange();ie.setStart(J.node,J.offset),de.removeAllRanges(),$e>Mt?(de.addRange(ie),de.extend(K.node,K.offset)):(ie.setEnd(K.node,K.offset),de.addRange(ie))}}}}for(be=[],de=L;de=de.parentNode;)de.nodeType===1&&be.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<be.length;L++){var ve=be[L];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Vp=!!a_,s_=a_=null}finally{jt=b,le.p=m,H.T=d}}a.current=l,Ln=2}}function kT(){if(Ln===2){Ln=0;var a=Oo,l=Nu,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=H.T,H.T=null;var m=le.p;le.p=2;var b=jt;jt|=4;try{lT(a,l.alternate,l)}finally{jt=b,le.p=m,H.T=d}}Ln=3}}function DT(){if(Ln===4||Ln===3){Ln=0,Ie();var a=Oo,l=Nu,d=_s,m=xT;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ln=5:(Ln=0,Nu=Oo=null,MT(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(Co=null),rs(d),l=l.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(sn,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=H.T,b=le.p,le.p=2,H.T=null;try{for(var x=a.onRecoverableError,T=0;T<m.length;T++){var L=m[T];x(L.value,{componentStack:L.stack})}}finally{H.T=l,le.p=b}}(_s&3)!==0&&Cp(),Pa(a),b=a.pendingLanes,(d&261930)!==0&&(b&42)!==0?a===Gb?Nf++:(Nf=0,Gb=a):Nf=0,Sf(0)}}function MT(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,sf(l)))}function Cp(){return RT(),kT(),DT(),zT()}function zT(){if(Ln!==5)return!1;var a=Oo,l=Fb;Fb=0;var d=rs(_s),m=H.T,b=le.p;try{le.p=32>d?32:d,H.T=null,d=Hb,Hb=null;var x=Oo,T=_s;if(Ln=0,Nu=Oo=null,_s=0,(jt&6)!==0)throw Error(r(331));var L=jt;if(jt|=4,yT(x.current),pT(x,x.current,T,d),jt=L,Sf(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(sn,x)}catch{}return!0}finally{le.p=b,H.T=m,MT(a,l)}}function LT(a,l,d){l=Si(d,l),l=Eb(a.stateNode,l,2),a=jo(a,l,2),a!==null&&(Fn(a,2),Pa(a))}function Tt(a,l,d){if(a.tag===3)LT(a,a,d);else for(;l!==null;){if(l.tag===3){LT(l,a,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Co===null||!Co.has(m))){a=Si(d,a),d=qA(2),m=jo(l,d,2),m!==null&&(UA(d,m,l,a),Fn(m,2),Pa(m));break}}l=l.return}}function Wb(a,l,d){var m=a.pingCache;if(m===null){m=a.pingCache=new u9;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(d)||(Vb=!0,b.add(d),a=p9.bind(null,a,l,d),l.then(a,a))}function p9(a,l,d){var m=a.pingCache;m!==null&&m.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Bt===a&&(lt&d)===d&&(cn===4||cn===3&&(lt&62914560)===lt&&300>Ve()-jp?(jt&2)===0&&Su(a,0):Bb|=d,Eu===lt&&(Eu=0)),Pa(a)}function qT(a,l){l===0&&(l=Ue()),a=Ll(a,l),a!==null&&(Fn(a,l),Pa(a))}function g9(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),qT(a,d)}function v9(a,l){var d=0;switch(a.tag){case 31:case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),qT(a,d)}function y9(a,l){return It(a,l)}var Op=null,Tu=null,Yb=!1,Pp=!1,Xb=!1,Io=0;function Pa(a){a!==Tu&&a.next===null&&(Tu===null?Op=Tu=a:Tu=Tu.next=a),Pp=!0,Yb||(Yb=!0,_9())}function Sf(a,l){if(!Xb&&Pp){Xb=!0;do for(var d=!1,m=Op;m!==null;){if(a!==0){var b=m.pendingLanes;if(b===0)var x=0;else{var T=m.suspendedLanes,L=m.pingedLanes;x=(1<<31-en(42|a)+1)-1,x&=b&~(T&~L),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(d=!0,$T(m,x))}else x=lt,x=pr(m,m===Bt?x:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(x&3)===0||ei(m,x)||(d=!0,$T(m,x));m=m.next}while(d);Xb=!1}}function b9(){UT()}function UT(){Pp=Yb=!1;var a=0;Io!==0&&O9()&&(a=Io);for(var l=Ve(),d=null,m=Op;m!==null;){var b=m.next,x=VT(m,l);x===0?(m.next=null,d===null?Op=b:d.next=b,b===null&&(Tu=d)):(d=m,(a!==0||(x&3)!==0)&&(Pp=!0)),m=b}Ln!==0&&Ln!==5||Sf(a),Io!==0&&(Io=0)}function VT(a,l){for(var d=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var T=31-en(x),L=1<<T,G=b[T];G===-1?((L&d)===0||(L&m)!==0)&&(b[T]=ee(L,l)):G<=l&&(a.expiredLanes|=L),x&=~L}if(l=Bt,d=lt,d=pr(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,d===0||a===l&&(At===2||At===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&zr(m),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||ei(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(m!==null&&zr(m),rs(d)){case 2:case 8:d=zn;break;case 32:d=Lr;break;case 268435456:d=qr;break;default:d=Lr}return m=BT.bind(null,a),d=It(d,m),a.callbackPriority=l,a.callbackNode=d,l}return m!==null&&m!==null&&zr(m),a.callbackPriority=2,a.callbackNode=null,2}function BT(a,l){if(Ln!==0&&Ln!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(Cp()&&a.callbackNode!==d)return null;var m=lt;return m=pr(a,a===Bt?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(jT(a,m,l),VT(a,Ve()),a.callbackNode!=null&&a.callbackNode===d?BT.bind(null,a):null)}function $T(a,l){if(Cp())return null;jT(a,l,!0)}function _9(){I9(function(){(jt&6)!==0?It(Vt,b9):UT()})}function Zb(){if(Io===0){var a=hu;a===0&&(a=yi,yi<<=1,(yi&261888)===0&&(yi=256)),Io=a}return Io}function FT(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Zc(""+a)}function HT(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function x9(a,l,d,m,b){if(l==="submit"&&d&&d.stateNode===b){var x=FT((b[Hn]||null).action),T=m.submitter;T&&(l=(l=T[Hn]||null)?FT(l.formAction):T.getAttribute("formAction"),l!==null&&(x=l,T=null));var L=new Ea("action","action",null,m,b);a.push({event:L,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Io!==0){var G=T?HT(b,T):new FormData(b);yb(d,{pending:!0,data:G,method:b.method,action:x},null,G)}}else typeof x=="function"&&(L.preventDefault(),G=T?HT(b,T):new FormData(b),yb(d,{pending:!0,data:G,method:b.method,action:x},x,G))},currentTarget:b}]})}}for(var Jb=0;Jb<D0.length;Jb++){var e_=D0[Jb],w9=e_.toLowerCase(),j9=e_[0].toUpperCase()+e_.slice(1);Ji(w9,"on"+j9)}Ji(wS,"onAnimationEnd"),Ji(jS,"onAnimationIteration"),Ji(ES,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(qU,"onTransitionRun"),Ji(UU,"onTransitionStart"),Ji(VU,"onTransitionCancel"),Ji(NS,"onTransitionEnd"),_a("onMouseEnter",["mouseout","mouseover"]),_a("onMouseLeave",["mouseout","mouseover"]),_a("onPointerEnter",["pointerout","pointerover"]),_a("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Af));function GT(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var m=a[d],b=m.event;m=m.listeners;e:{var x=void 0;if(l)for(var T=m.length-1;0<=T;T--){var L=m[T],G=L.instance,ae=L.currentTarget;if(L=L.listener,G!==x&&b.isPropagationStopped())break e;x=L,b.currentTarget=ae;try{x(b)}catch(he){Gm(he)}b.currentTarget=null,x=G}else for(T=0;T<m.length;T++){if(L=m[T],G=L.instance,ae=L.currentTarget,L=L.listener,G!==x&&b.isPropagationStopped())break e;x=L,b.currentTarget=ae;try{x(b)}catch(he){Gm(he)}b.currentTarget=null,x=G}}}}function at(a,l){var d=l[Kc];d===void 0&&(d=l[Kc]=new Set);var m=a+"__bubble";d.has(m)||(KT(l,a,2,!1),d.add(m))}function t_(a,l,d){var m=0;l&&(m|=4),KT(d,a,m,l)}var Ip="_reactListening"+Math.random().toString(36).slice(2);function n_(a){if(!a[Ip]){a[Ip]=!0,Ld.forEach(function(d){d!=="selectionchange"&&(E9.has(d)||t_(d,!1,a),t_(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Ip]||(l[Ip]=!0,t_("selectionchange",!1,l))}}function KT(a,l,d,m){switch(wC(l)){case 2:var b=Z9;break;case 8:b=J9;break;default:b=v_}d=b.bind(null,l,d,a),b=void 0,!Ol||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(l,d,{capture:!0,passive:b}):a.addEventListener(l,d,!0):b!==void 0?a.addEventListener(l,d,{passive:b}):a.addEventListener(l,d,!1)}function r_(a,l,d,m,b){var x=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var L=m.stateNode.containerInfo;if(L===b)break;if(T===4)for(T=m.return;T!==null;){var G=T.tag;if((G===3||G===4)&&T.stateNode.containerInfo===b)return;T=T.return}for(;L!==null;){if(T=va(L),T===null)return;if(G=T.tag,G===5||G===6||G===26||G===27){m=x=T;continue e}L=L.parentNode}}m=m.return}ho(function(){var ae=x,he=wi(d),be=[];e:{var oe=SS.get(a);if(oe!==void 0){var de=Ea,Oe=a;switch(a){case"keypress":if(Il(d)===0)break e;case"keydown":case"keyup":de=$m;break;case"focusin":Oe="focus",de=kl;break;case"focusout":Oe="blur",de=kl;break;case"beforeblur":case"afterblur":de=kl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=S;break;case wS:case jS:case ES:de=Mm;break;case NS:de=B;break;case"scroll":case"scrollend":de=Yd;break;case"wheel":de=ue;break;case"copy":case"cut":case"paste":de=zm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=ss;break;case"toggle":case"beforetoggle":de=Ze}var $e=(l&4)!==0,Mt=!$e&&(a==="scroll"||a==="scrollend"),J=$e?oe!==null?oe+"Capture":null:oe;$e=[];for(var K=ae,ie;K!==null;){var ve=K;if(ie=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ie===null||J===null||(ve=Wi(K,J),ve!=null&&$e.push(Tf(K,ve,ie))),Mt)break;K=K.return}0<$e.length&&(oe=new de(oe,Oe,null,d,he),be.push({event:oe,listeners:$e}))}}if((l&7)===0){e:{if(oe=a==="mouseover"||a==="pointerover",de=a==="mouseout"||a==="pointerout",oe&&d!==Kd&&(Oe=d.relatedTarget||d.fromElement)&&(va(Oe)||Oe[pa]))break e;if((de||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,de?(Oe=d.relatedTarget||d.toElement,de=ae,Oe=Oe?va(Oe):null,Oe!==null&&(Mt=s(Oe),$e=Oe.tag,Oe!==Mt||$e!==5&&$e!==27&&$e!==6)&&(Oe=null)):(de=null,Oe=ae),de!==Oe)){if($e=Xd,ve="onMouseLeave",J="onMouseEnter",K="mouse",(a==="pointerout"||a==="pointerover")&&($e=ss,ve="onPointerLeave",J="onPointerEnter",K="pointer"),Mt=de==null?oe:ti(de),ie=Oe==null?oe:ti(Oe),oe=new $e(ve,K+"leave",de,d,he),oe.target=Mt,oe.relatedTarget=ie,ve=null,va(he)===ae&&($e=new $e(J,K+"enter",Oe,d,he),$e.target=ie,$e.relatedTarget=Mt,ve=$e),Mt=ve,de&&Oe)t:{for($e=N9,J=de,K=Oe,ie=0,ve=J;ve;ve=$e(ve))ie++;ve=0;for(var Le=K;Le;Le=$e(Le))ve++;for(;0<ie-ve;)J=$e(J),ie--;for(;0<ve-ie;)K=$e(K),ve--;for(;ie--;){if(J===K||K!==null&&J===K.alternate){$e=J;break t}J=$e(J),K=$e(K)}$e=null}else $e=null;de!==null&&QT(be,oe,de,$e,!1),Oe!==null&&Mt!==null&&QT(be,Mt,Oe,$e,!0)}}e:{if(oe=ae?ti(ae):window,de=oe.nodeName&&oe.nodeName.toLowerCase(),de==="select"||de==="input"&&oe.type==="file")var bt=dS;else if(cS(oe))if(fS)bt=MU;else{bt=kU;var Re=RU}else de=oe.nodeName,!de||de.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Xc(ae.elementType)&&(bt=dS):bt=DU;if(bt&&(bt=bt(a,ae))){uS(be,bt,d,he);break e}Re&&Re(a,oe,ae),a==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&Fd(oe,"number",oe.value)}switch(Re=ae?ti(ae):window,a){case"focusin":(cS(Re)||Re.contentEditable==="true")&&(au=Re,I0=ae,nf=null);break;case"focusout":nf=I0=au=null;break;case"mousedown":R0=!0;break;case"contextmenu":case"mouseup":case"dragend":R0=!1,_S(be,d,he);break;case"selectionchange":if(LU)break;case"keydown":case"keyup":_S(be,d,he)}var et;if(wt)e:{switch(a){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else iu?Dl(a,d)&&(ct="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(ct="onCompositionStart");ct&&(Aa&&d.locale!=="ko"&&(iu||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&iu&&(et=Wd()):(ja=he,Qd="value"in ja?ja.value:ja.textContent,iu=!0)),Re=Rp(ae,ct),0<Re.length&&(ct=new Sa(ct,a,null,d,he),be.push({event:ct,listeners:Re}),et?ct.data=et:(et=ru(d),et!==null&&(ct.data=et)))),(et=Ei?CU(a,d):OU(a,d))&&(ct=Rp(ae,"onBeforeInput"),0<ct.length&&(Re=new Sa("onBeforeInput","beforeinput",null,d,he),be.push({event:Re,listeners:ct}),Re.data=et)),x9(be,a,ae,d,he)}GT(be,l)})}function Tf(a,l,d){return{instance:a,listener:l,currentTarget:d}}function Rp(a,l){for(var d=l+"Capture",m=[];a!==null;){var b=a,x=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||x===null||(b=Wi(a,d),b!=null&&m.unshift(Tf(a,b,x)),b=Wi(a,l),b!=null&&m.push(Tf(a,b,x))),a.tag===3)return m;a=a.return}return[]}function N9(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function QT(a,l,d,m,b){for(var x=l._reactName,T=[];d!==null&&d!==m;){var L=d,G=L.alternate,ae=L.stateNode;if(L=L.tag,G!==null&&G===m)break;L!==5&&L!==26&&L!==27||ae===null||(G=ae,b?(ae=Wi(d,x),ae!=null&&T.unshift(Tf(d,ae,G))):b||(ae=Wi(d,x),ae!=null&&T.push(Tf(d,ae,G)))),d=d.return}T.length!==0&&a.push({event:l,listeners:T})}var S9=/\r\n?/g,A9=/\u0000|\uFFFD/g;function WT(a){return(typeof a=="string"?a:""+a).replace(S9,`
`).replace(A9,"")}function YT(a,l){return l=WT(l),WT(a)===l}function Dt(a,l,d,m,b,x){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||Br(a,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&Br(a,""+m);break;case"className":ni(a,"class",m);break;case"tabIndex":ni(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(a,d,m);break;case"style":Gd(a,m,x);break;case"data":if(l!=="object"){ni(a,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(d);break}m=Zc(""+m),a.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(d==="formAction"?(l!=="input"&&Dt(a,l,"name",b.name,b,null),Dt(a,l,"formEncType",b.formEncType,b,null),Dt(a,l,"formMethod",b.formMethod,b,null),Dt(a,l,"formTarget",b.formTarget,b,null)):(Dt(a,l,"encType",b.encType,b,null),Dt(a,l,"method",b.method,b,null),Dt(a,l,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(d);break}m=Zc(""+m),a.setAttribute(d,m);break;case"onClick":m!=null&&(a.onclick=Qi);break;case"onScroll":m!=null&&at("scroll",a);break;case"onScrollEnd":m!=null&&at("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}d=Zc(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,""+m):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":m===!0?a.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,m):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(d,m):a.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(d):a.setAttribute(d,m);break;case"popover":at("beforetoggle",a),at("toggle",a),Wc(a,"popover",m);break;case"xlinkActuate":Sn(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Sn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Sn(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Sn(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Sn(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Sn(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Sn(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Sn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Sn(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Wc(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Rm.get(d)||d,Wc(a,d,m))}}function i_(a,l,d,m,b,x){switch(d){case"style":Gd(a,m,x);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof m=="string"?Br(a,m):(typeof m=="number"||typeof m=="bigint")&&Br(a,""+m);break;case"onScroll":m!=null&&at("scroll",a);break;case"onScrollEnd":m!=null&&at("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qd.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),l=d.slice(2,b?d.length-7:void 0),x=a[Hn]||null,x=x!=null?x[d]:null,typeof x=="function"&&a.removeEventListener(l,x,b),typeof m=="function")){typeof x!="function"&&x!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,m,b);break e}d in a?a[d]=m:m===!0?a.setAttribute(d,""):Wc(a,d,m)}}}function or(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",a),at("load",a);var m=!1,b=!1,x;for(x in d)if(d.hasOwnProperty(x)){var T=d[x];if(T!=null)switch(x){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(a,l,x,T,d,null)}}b&&Dt(a,l,"srcSet",d.srcSet,d,null),m&&Dt(a,l,"src",d.src,d,null);return;case"input":at("invalid",a);var L=x=T=b=null,G=null,ae=null;for(m in d)if(d.hasOwnProperty(m)){var he=d[m];if(he!=null)switch(m){case"name":b=he;break;case"type":T=he;break;case"checked":G=he;break;case"defaultChecked":ae=he;break;case"value":x=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,l));break;default:Dt(a,l,m,he,d,null)}}Om(a,x,L,G,ae,T,b,!1);return;case"select":at("invalid",a),m=T=x=null;for(b in d)if(d.hasOwnProperty(b)&&(L=d[b],L!=null))switch(b){case"value":x=L;break;case"defaultValue":T=L;break;case"multiple":m=L;default:Dt(a,l,b,L,d,null)}l=x,d=T,a.multiple=!!m,l!=null?lo(a,!!m,l,!1):d!=null&&lo(a,!!m,d,!0);return;case"textarea":at("invalid",a),x=b=m=null;for(T in d)if(d.hasOwnProperty(T)&&(L=d[T],L!=null))switch(T){case"value":m=L;break;case"defaultValue":b=L;break;case"children":x=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:Dt(a,l,T,L,d,null)}co(a,m,b,x);return;case"option":for(G in d)d.hasOwnProperty(G)&&(m=d[G],m!=null)&&(G==="selected"?a.selected=m&&typeof m!="function"&&typeof m!="symbol":Dt(a,l,G,m,d,null));return;case"dialog":at("beforetoggle",a),at("toggle",a),at("cancel",a),at("close",a);break;case"iframe":case"object":at("load",a);break;case"video":case"audio":for(m=0;m<Af.length;m++)at(Af[m],a);break;case"image":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"embed":case"source":case"link":at("error",a),at("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in d)if(d.hasOwnProperty(ae)&&(m=d[ae],m!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(a,l,ae,m,d,null)}return;default:if(Xc(l)){for(he in d)d.hasOwnProperty(he)&&(m=d[he],m!==void 0&&i_(a,l,he,m,d,void 0));return}}for(L in d)d.hasOwnProperty(L)&&(m=d[L],m!=null&&Dt(a,l,L,m,d,null))}function T9(a,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,x=null,T=null,L=null,G=null,ae=null,he=null;for(de in d){var be=d[de];if(d.hasOwnProperty(de)&&be!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":G=be;default:m.hasOwnProperty(de)||Dt(a,l,de,null,m,be)}}for(var oe in m){var de=m[oe];if(be=d[oe],m.hasOwnProperty(oe)&&(de!=null||be!=null))switch(oe){case"type":x=de;break;case"name":b=de;break;case"checked":ae=de;break;case"defaultChecked":he=de;break;case"value":T=de;break;case"defaultValue":L=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,l));break;default:de!==be&&Dt(a,l,oe,de,m,be)}}Yc(a,T,L,G,ae,he,x,b);return;case"select":de=T=L=oe=null;for(x in d)if(G=d[x],d.hasOwnProperty(x)&&G!=null)switch(x){case"value":break;case"multiple":de=G;default:m.hasOwnProperty(x)||Dt(a,l,x,null,m,G)}for(b in m)if(x=m[b],G=d[b],m.hasOwnProperty(b)&&(x!=null||G!=null))switch(b){case"value":oe=x;break;case"defaultValue":L=x;break;case"multiple":T=x;default:x!==G&&Dt(a,l,b,x,m,G)}l=L,d=T,m=de,oe!=null?lo(a,!!d,oe,!1):!!m!=!!d&&(l!=null?lo(a,!!d,l,!0):lo(a,!!d,d?[]:"",!1));return;case"textarea":de=oe=null;for(L in d)if(b=d[L],d.hasOwnProperty(L)&&b!=null&&!m.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Dt(a,l,L,null,m,b)}for(T in m)if(b=m[T],x=d[T],m.hasOwnProperty(T)&&(b!=null||x!=null))switch(T){case"value":oe=b;break;case"defaultValue":de=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==x&&Dt(a,l,T,b,m,x)}Pm(a,oe,de);return;case"option":for(var Oe in d)oe=d[Oe],d.hasOwnProperty(Oe)&&oe!=null&&!m.hasOwnProperty(Oe)&&(Oe==="selected"?a.selected=!1:Dt(a,l,Oe,null,m,oe));for(G in m)oe=m[G],de=d[G],m.hasOwnProperty(G)&&oe!==de&&(oe!=null||de!=null)&&(G==="selected"?a.selected=oe&&typeof oe!="function"&&typeof oe!="symbol":Dt(a,l,G,oe,m,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in d)oe=d[$e],d.hasOwnProperty($e)&&oe!=null&&!m.hasOwnProperty($e)&&Dt(a,l,$e,null,m,oe);for(ae in m)if(oe=m[ae],de=d[ae],m.hasOwnProperty(ae)&&oe!==de&&(oe!=null||de!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:Dt(a,l,ae,oe,m,de)}return;default:if(Xc(l)){for(var Mt in d)oe=d[Mt],d.hasOwnProperty(Mt)&&oe!==void 0&&!m.hasOwnProperty(Mt)&&i_(a,l,Mt,void 0,m,oe);for(he in m)oe=m[he],de=d[he],!m.hasOwnProperty(he)||oe===de||oe===void 0&&de===void 0||i_(a,l,he,oe,m,de);return}}for(var J in d)oe=d[J],d.hasOwnProperty(J)&&oe!=null&&!m.hasOwnProperty(J)&&Dt(a,l,J,null,m,oe);for(be in m)oe=m[be],de=d[be],!m.hasOwnProperty(be)||oe===de||oe==null&&de==null||Dt(a,l,be,oe,m,de)}function XT(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function C9(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var b=d[m],x=b.transferSize,T=b.initiatorType,L=b.duration;if(x&&L&&XT(T)){for(T=0,L=b.responseEnd,m+=1;m<d.length;m++){var G=d[m],ae=G.startTime;if(ae>L)break;var he=G.transferSize,be=G.initiatorType;he&&XT(be)&&(G=G.responseEnd,T+=he*(G<L?1:(L-ae)/(G-ae)))}if(--m,l+=8*(x+T)/(b.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var a_=null,s_=null;function kp(a){return a.nodeType===9?a:a.ownerDocument}function ZT(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JT(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function o_(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var l_=null;function O9(){var a=window.event;return a&&a.type==="popstate"?a===l_?!1:(l_=a,!0):(l_=null,!1)}var eC=typeof setTimeout=="function"?setTimeout:void 0,P9=typeof clearTimeout=="function"?clearTimeout:void 0,tC=typeof Promise=="function"?Promise:void 0,I9=typeof queueMicrotask=="function"?queueMicrotask:typeof tC<"u"?function(a){return tC.resolve(null).then(a).catch(R9)}:eC;function R9(a){setTimeout(function(){throw a})}function Ro(a){return a==="head"}function nC(a,l){var d=l,m=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(m===0){a.removeChild(b),Iu(l);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")Cf(a.ownerDocument.documentElement);else if(d==="head"){d=a.ownerDocument.head,Cf(d);for(var x=d.firstChild;x;){var T=x.nextSibling,L=x.nodeName;x[ga]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&x.rel.toLowerCase()==="stylesheet"||d.removeChild(x),x=T}}else d==="body"&&Cf(a.ownerDocument.body);d=b}while(d);Iu(l)}function rC(a,l){var d=a;a=0;do{var m=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(a===0)break;a--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||a++;d=m}while(d)}function c_(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":c_(d),Qc(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function k9(a,l,d,m){for(;a.nodeType===1;){var b=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[ga])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var x=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=Pi(a.nextSibling),a===null)break}return null}function D9(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=Pi(a.nextSibling),a===null))return null;return a}function iC(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Pi(a.nextSibling),a===null))return null;return a}function u_(a){return a.data==="$?"||a.data==="$~"}function d_(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function M9(a,l){var d=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||d.readyState!=="loading")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function Pi(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var f_=null;function aC(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"||d==="/&"){if(l===0)return Pi(a.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}a=a.nextSibling}return null}function sC(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return a;l--}else d!=="/$"&&d!=="/&"||l++}a=a.previousSibling}return null}function oC(a,l,d){switch(l=kp(d),a){case"html":if(a=l.documentElement,!a)throw Error(r(452));return a;case"head":if(a=l.head,!a)throw Error(r(453));return a;case"body":if(a=l.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Cf(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Qc(a)}var Ii=new Map,lC=new Set;function Dp(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var xs=le.d;le.d={f:z9,r:L9,D:q9,C:U9,L:V9,m:B9,X:F9,S:$9,M:H9};function z9(){var a=xs.f(),l=Sp();return a||l}function L9(a){var l=xi(a);l!==null&&l.tag===5&&l.type==="form"?NA(l):xs.r(a)}var Cu=typeof document>"u"?null:document;function cC(a,l,d){var m=Cu;if(m&&typeof l=="string"&&l){var b=Vr(l);b='link[rel="'+a+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),lC.has(b)||(lC.add(b),a={rel:a,crossOrigin:d,href:l},m.querySelector(b)===null&&(l=m.createElement("link"),or(l,"link",a),Nn(l),m.head.appendChild(l)))}}function q9(a){xs.D(a),cC("dns-prefetch",a,null)}function U9(a,l){xs.C(a,l),cC("preconnect",a,l)}function V9(a,l,d){xs.L(a,l,d);var m=Cu;if(m&&a&&l){var b='link[rel="preload"][as="'+Vr(l)+'"]';l==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+Vr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+Vr(d.imageSizes)+'"]')):b+='[href="'+Vr(a)+'"]';var x=b;switch(l){case"style":x=Ou(a);break;case"script":x=Pu(a)}Ii.has(x)||(a=g({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),Ii.set(x,a),m.querySelector(b)!==null||l==="style"&&m.querySelector(Of(x))||l==="script"&&m.querySelector(Pf(x))||(l=m.createElement("link"),or(l,"link",a),Nn(l),m.head.appendChild(l)))}}function B9(a,l){xs.m(a,l);var d=Cu;if(d&&a){var m=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Vr(m)+'"][href="'+Vr(a)+'"]',x=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Pu(a)}if(!Ii.has(x)&&(a=g({rel:"modulepreload",href:a},l),Ii.set(x,a),d.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Pf(x)))return}m=d.createElement("link"),or(m,"link",a),Nn(m),d.head.appendChild(m)}}}function $9(a,l,d){xs.S(a,l,d);var m=Cu;if(m&&a){var b=ya(m).hoistableStyles,x=Ou(a);l=l||"default";var T=b.get(x);if(!T){var L={loading:0,preload:null};if(T=m.querySelector(Of(x)))L.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":l},d),(d=Ii.get(x))&&h_(a,d);var G=T=m.createElement("link");Nn(G),or(G,"link",a),G._p=new Promise(function(ae,he){G.onload=ae,G.onerror=he}),G.addEventListener("load",function(){L.loading|=1}),G.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Mp(T,l,m)}T={type:"stylesheet",instance:T,count:1,state:L},b.set(x,T)}}}function F9(a,l){xs.X(a,l);var d=Cu;if(d&&a){var m=ya(d).hoistableScripts,b=Pu(a),x=m.get(b);x||(x=d.querySelector(Pf(b)),x||(a=g({src:a,async:!0},l),(l=Ii.get(b))&&m_(a,l),x=d.createElement("script"),Nn(x),or(x,"link",a),d.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(b,x))}}function H9(a,l){xs.M(a,l);var d=Cu;if(d&&a){var m=ya(d).hoistableScripts,b=Pu(a),x=m.get(b);x||(x=d.querySelector(Pf(b)),x||(a=g({src:a,async:!0,type:"module"},l),(l=Ii.get(b))&&m_(a,l),x=d.createElement("script"),Nn(x),or(x,"link",a),d.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(b,x))}}function uC(a,l,d,m){var b=(b=ne.current)?Dp(b):null;if(!b)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Ou(d.href),d=ya(b).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Ou(d.href);var x=ya(b).hoistableStyles,T=x.get(a);if(T||(b=b.ownerDocument||b,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,T),(x=b.querySelector(Of(a)))&&!x._p&&(T.instance=x,T.state.loading=5),Ii.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ii.set(a,d),x||G9(b,a,d,T.state))),l&&m===null)throw Error(r(528,""));return T}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Pu(d),d=ya(b).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Ou(a){return'href="'+Vr(a)+'"'}function Of(a){return'link[rel="stylesheet"]['+a+"]"}function dC(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function G9(a,l,d,m){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=a.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),or(l,"link",d),Nn(l),a.head.appendChild(l))}function Pu(a){return'[src="'+Vr(a)+'"]'}function Pf(a){return"script[async]"+a}function fC(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=a.querySelector('style[data-href~="'+Vr(d.href)+'"]');if(m)return l.instance=m,Nn(m),m;var b=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),Nn(m),or(m,"style",b),Mp(m,d.precedence,a),l.instance=m;case"stylesheet":b=Ou(d.href);var x=a.querySelector(Of(b));if(x)return l.state.loading|=4,l.instance=x,Nn(x),x;m=dC(d),(b=Ii.get(b))&&h_(m,b),x=(a.ownerDocument||a).createElement("link"),Nn(x);var T=x;return T._p=new Promise(function(L,G){T.onload=L,T.onerror=G}),or(x,"link",m),l.state.loading|=4,Mp(x,d.precedence,a),l.instance=x;case"script":return x=Pu(d.src),(b=a.querySelector(Pf(x)))?(l.instance=b,Nn(b),b):(m=d,(b=Ii.get(x))&&(m=g({},d),m_(m,b)),a=a.ownerDocument||a,b=a.createElement("script"),Nn(b),or(b,"link",m),a.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Mp(m,d.precedence,a));return l.instance}function Mp(a,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,x=b,T=0;T<m.length;T++){var L=m[T];if(L.dataset.precedence===l)x=L;else if(x!==b)break}x?x.parentNode.insertBefore(a,x.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function h_(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function m_(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var zp=null;function hC(a,l,d){if(zp===null){var m=new Map,b=zp=new Map;b.set(d,m)}else b=zp,m=b.get(d),m||(m=new Map,b.set(d,m));if(m.has(a))return m;for(m.set(a,null),d=d.getElementsByTagName(a),b=0;b<d.length;b++){var x=d[b];if(!(x[ga]||x[En]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(l)||"";T=a+T;var L=m.get(T);L?L.push(x):m.set(T,[x])}}return m}function mC(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function K9(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(a=l.disabled,typeof l.precedence=="string"&&a==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function pC(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function Q9(a,l,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=Ou(m.href),x=l.querySelector(Of(b));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=Lp.bind(a),l.then(a,a)),d.state.loading|=4,d.instance=x,Nn(x);return}x=l.ownerDocument||l,m=dC(m),(b=Ii.get(b))&&h_(m,b),x=x.createElement("link"),Nn(x);var T=x;T._p=new Promise(function(L,G){T.onload=L,T.onerror=G}),or(x,"link",m),d.instance=x}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(a.count++,d=Lp.bind(a),l.addEventListener("load",d),l.addEventListener("error",d))}}var p_=0;function W9(a,l){return a.stylesheets&&a.count===0&&Up(a,a.stylesheets),0<a.count||0<a.imgCount?function(d){var m=setTimeout(function(){if(a.stylesheets&&Up(a,a.stylesheets),a.unsuspend){var x=a.unsuspend;a.unsuspend=null,x()}},6e4+l);0<a.imgBytes&&p_===0&&(p_=62500*C9());var b=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Up(a,a.stylesheets),a.unsuspend)){var x=a.unsuspend;a.unsuspend=null,x()}},(a.imgBytes>p_?50:800)+l);return a.unsuspend=d,function(){a.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function Lp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Up(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var qp=null;function Up(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,qp=new Map,l.forEach(Y9,a),qp=null,Lp.call(a))}function Y9(a,l){if(!(l.state.loading&4)){var d=qp.get(a);if(d)var m=d.get(null);else{d=new Map,qp.set(a,d);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<b.length;x++){var T=b[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),m=T)}m&&d.set(null,m)}b=l.instance,T=b.getAttribute("data-precedence"),x=d.get(T)||m,x===m&&d.set(null,b),d.set(T,b),this.count++,m=Lp.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),x?x.parentNode.insertBefore(b,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),l.state.loading|=4}}var If={$$typeof:O,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function X9(a,l,d,m,b,x,T,L,G){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.hiddenUpdates=vt(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function gC(a,l,d,m,b,x,T,L,G,ae,he,be){return a=new X9(a,l,d,T,G,ae,he,be,L),l=1,x===!0&&(l|=24),x=ii(3,null,null,l),a.current=x,x.stateNode=a,l=Q0(),l.refCount++,a.pooledCache=l,l.refCount++,x.memoizedState={element:m,isDehydrated:d,cache:l},Z0(x),a}function vC(a){return a?(a=lu,a):lu}function yC(a,l,d,m,b,x){b=vC(b),m.context===null?m.context=b:m.pendingContext=b,m=wo(l),m.payload={element:d},x=x===void 0?null:x,x!==null&&(m.callback=x),d=jo(a,m,l),d!==null&&(Kr(d,a,l),uf(d,a,l))}function bC(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function g_(a,l){bC(a,l),(a=a.alternate)&&bC(a,l)}function _C(a){if(a.tag===13||a.tag===31){var l=Ll(a,67108864);l!==null&&Kr(l,a,67108864),g_(a,67108864)}}function xC(a){if(a.tag===13||a.tag===31){var l=ci();l=Sl(l);var d=Ll(a,l);d!==null&&Kr(d,a,l),g_(a,l)}}var Vp=!0;function Z9(a,l,d,m){var b=H.T;H.T=null;var x=le.p;try{le.p=2,v_(a,l,d,m)}finally{le.p=x,H.T=b}}function J9(a,l,d,m){var b=H.T;H.T=null;var x=le.p;try{le.p=8,v_(a,l,d,m)}finally{le.p=x,H.T=b}}function v_(a,l,d,m){if(Vp){var b=y_(m);if(b===null)r_(a,l,m,Bp,d),jC(a,m);else if(tV(b,a,l,d,m))m.stopPropagation();else if(jC(a,m),l&4&&-1<eV.indexOf(a)){for(;b!==null;){var x=xi(b);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=bi(x.pendingLanes);if(T!==0){var L=x;for(L.pendingLanes|=2,L.entangledLanes|=2;T;){var G=1<<31-en(T);L.entanglements[1]|=G,T&=~G}Pa(x),(jt&6)===0&&(Ep=Ve()+500,Sf(0))}}break;case 31:case 13:L=Ll(x,2),L!==null&&Kr(L,x,2),Sp(),g_(x,2)}if(x=y_(m),x===null&&r_(a,l,m,Bp,d),x===b)break;b=x}b!==null&&m.stopPropagation()}else r_(a,l,m,null,d)}}function y_(a){return a=wi(a),b_(a)}var Bp=null;function b_(a){if(Bp=null,a=va(a),a!==null){var l=s(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=c(l),a!==null)return a;a=null}else if(d===31){if(a=u(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Bp=a,null}function wC(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case Vt:return 2;case zn:return 8;case Lr:case ao:return 32;case qr:return 268435456;default:return 32}default:return 32}}var __=!1,ko=null,Do=null,Mo=null,Rf=new Map,kf=new Map,zo=[],eV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jC(a,l){switch(a){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Mo=null;break;case"pointerover":case"pointerout":Rf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":kf.delete(l.pointerId)}}function Df(a,l,d,m,b,x){return a===null||a.nativeEvent!==x?(a={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:x,targetContainers:[b]},l!==null&&(l=xi(l),l!==null&&_C(l)),a):(a.eventSystemFlags|=m,l=a.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),a)}function tV(a,l,d,m,b){switch(l){case"focusin":return ko=Df(ko,a,l,d,m,b),!0;case"dragenter":return Do=Df(Do,a,l,d,m,b),!0;case"mouseover":return Mo=Df(Mo,a,l,d,m,b),!0;case"pointerover":var x=b.pointerId;return Rf.set(x,Df(Rf.get(x)||null,a,l,d,m,b)),!0;case"gotpointercapture":return x=b.pointerId,kf.set(x,Df(kf.get(x)||null,a,l,d,m,b)),!0}return!1}function EC(a){var l=va(a.target);if(l!==null){var d=s(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){a.blockedOn=l,Gi(a.priority,function(){xC(d)});return}}else if(l===31){if(l=u(d),l!==null){a.blockedOn=l,Gi(a.priority,function(){xC(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function $p(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=y_(a.nativeEvent);if(d===null){d=a.nativeEvent;var m=new d.constructor(d.type,d);Kd=m,d.target.dispatchEvent(m),Kd=null}else return l=xi(d),l!==null&&_C(l),a.blockedOn=d,!1;l.shift()}return!0}function NC(a,l,d){$p(a)&&d.delete(l)}function nV(){__=!1,ko!==null&&$p(ko)&&(ko=null),Do!==null&&$p(Do)&&(Do=null),Mo!==null&&$p(Mo)&&(Mo=null),Rf.forEach(NC),kf.forEach(NC)}function Fp(a,l){a.blockedOn===l&&(a.blockedOn=null,__||(__=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nV)))}var Hp=null;function SC(a){Hp!==a&&(Hp=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hp===a&&(Hp=null);for(var l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],b=a[l+2];if(typeof m!="function"){if(b_(m||d)===null)continue;break}var x=xi(d);x!==null&&(a.splice(l,3),l-=3,yb(x,{pending:!0,data:b,method:d.method,action:m},m,b))}}))}function Iu(a){function l(G){return Fp(G,a)}ko!==null&&Fp(ko,a),Do!==null&&Fp(Do,a),Mo!==null&&Fp(Mo,a),Rf.forEach(l),kf.forEach(l);for(var d=0;d<zo.length;d++){var m=zo[d];m.blockedOn===a&&(m.blockedOn=null)}for(;0<zo.length&&(d=zo[0],d.blockedOn===null);)EC(d),d.blockedOn===null&&zo.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var b=d[m],x=d[m+1],T=b[Hn]||null;if(typeof x=="function")T||SC(d);else if(T){var L=null;if(x&&x.hasAttribute("formAction")){if(b=x,T=x[Hn]||null)L=T.formAction;else if(b_(b)!==null)continue}else L=T.action;typeof L=="function"?d[m+1]=L:(d.splice(m,3),m-=3),SC(d)}}}function AC(){function a(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(T){return b=T})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function x_(a){this._internalRoot=a}Gp.prototype.render=x_.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=ci();yC(d,m,a,l,null,null)},Gp.prototype.unmount=x_.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;yC(a.current,2,null,a,null,null),Sp(),l[pa]=null}};function Gp(a){this._internalRoot=a}Gp.prototype.unstable_scheduleHydration=function(a){if(a){var l=Sm();a={blockedOn:null,target:a,priority:l};for(var d=0;d<zo.length&&l!==0&&l<zo[d].priority;d++);zo.splice(d,0,a),d===0&&EC(a)}};var TC=e.version;if(TC!=="19.2.4")throw Error(r(527,TC,"19.2.4"));le.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(l),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var rV={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{sn=Kp.inject(rV),Nt=Kp}catch{}}return zf.createRoot=function(a,l){if(!i(a))throw Error(r(299));var d=!1,m="",b=DA,x=MA,T=zA;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=gC(a,1,!1,null,null,d,m,null,b,x,T,AC),a[pa]=l.current,n_(a),new x_(l)},zf.hydrateRoot=function(a,l,d){if(!i(a))throw Error(r(299));var m=!1,b="",x=DA,T=MA,L=zA,G=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(x=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(L=d.onRecoverableError),d.formState!==void 0&&(G=d.formState)),l=gC(a,1,!0,l,d??null,m,b,G,x,T,L,AC),l.context=vC(null),d=l.current,m=ci(),m=Sl(m),b=wo(m),b.callback=null,jo(d,b,m),d=m,l.current.lanes=d,Fn(l,d),Pa(l),a[pa]=l.current,n_(a),new Gp(l)},zf.version="19.2.4",zf}var LC;function hV(){if(LC)return E_.exports;LC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),E_.exports=fV(),E_.exports}var mV=hV();const pV=es(mV);var KD=GD();function ph(){return ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ph.apply(this,arguments)}var Yo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yo||(Yo={}));const qC="popstate";function gV(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:c,hash:u}=r.location;return I1("",{pathname:s,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bg(i)}return yV(e,n,null,t)}function xn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vV(){return Math.random().toString(36).substr(2,8)}function UC(t,e){return{usr:t.state,key:t.key,idx:e}}function I1(t,e,n,r){return n===void 0&&(n=null),ph({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?yd(e):e,{state:n,key:e&&e.key||r||vV()})}function Bg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,c=i.history,u=Yo.Pop,f=null,h=p();h==null&&(h=0,c.replaceState(ph({},c.state,{idx:h}),""));function p(){return(c.state||{idx:null}).idx}function g(){u=Yo.Pop;let N=p(),A=N==null?null:N-h;h=N,f&&f({action:u,location:w.location,delta:A})}function y(N,A){u=Yo.Push;let R=I1(w.location,N,A);h=p()+1;let O=UC(R,h),C=w.createHref(R);try{c.pushState(O,"",C)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(C)}s&&f&&f({action:u,location:w.location,delta:1})}function _(N,A){u=Yo.Replace;let R=I1(w.location,N,A);h=p();let O=UC(R,h),C=w.createHref(R);c.replaceState(O,"",C),s&&f&&f({action:u,location:w.location,delta:0})}function E(N){let A=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof N=="string"?N:Bg(N);return R=R.replace(/ $/,"%20"),xn(A,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,A)}let w={get action(){return u},get location(){return t(i,c)},listen(N){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(qC,g),f=N,()=>{i.removeEventListener(qC,g),f=null}},createHref(N){return e(i,N)},createURL:E,encodeLocation(N){let A=E(N);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:_,go(N){return c.go(N)}};return w}var VC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(VC||(VC={}));function bV(t,e,n){return n===void 0&&(n="/"),_V(t,e,n)}function _V(t,e,n,r){let i=typeof e=="string"?yd(e):e,s=gj(i.pathname||"/",n);if(s==null)return null;let c=QD(t);xV(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=RV(s);u=OV(c[f],h)}return u}function QD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,c,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:c,route:s};f.relativePath.startsWith("/")&&(xn(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let h=Jo([r,f.relativePath]),p=n.concat(f);s.children&&s.children.length>0&&(xn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),QD(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:TV(h,s.index),routesMeta:p})};return t.forEach((s,c)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,c);else for(let f of WD(s.path))i(s,c,f)}),e}function WD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let c=WD(r.join("/")),u=[];return u.push(...c.map(f=>f===""?s:[s,f].join("/"))),i&&u.push(...c),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function xV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wV=/^:[\w-]+$/,jV=3,EV=2,NV=1,SV=10,AV=-2,BC=t=>t==="*";function TV(t,e){let n=t.split("/"),r=n.length;return n.some(BC)&&(r+=AV),e&&(r+=EV),n.filter(i=>!BC(i)).reduce((i,s)=>i+(wV.test(s)?jV:s===""?NV:SV),r)}function CV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function OV(t,e,n){let{routesMeta:r}=t,i={},s="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=PV({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),y=f.route;if(!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:Jo([s,g.pathname]),pathnameBase:LV(Jo([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=Jo([s,g.pathnameBase]))}return c}function PV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=IV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],c=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,p,g)=>{let{paramName:y,isOptional:_}=p;if(y==="*"){let w=u[g]||"";c=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const E=u[g];return _&&!E?h[y]=void 0:h[y]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:c,pattern:t}}function IV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gj(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const kV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DV=t=>kV.test(t);function MV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?yd(t):t,s;if(n)if(DV(n))s=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),pj(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?s=$C(n.substring(1),"/"):s=$C(n,e)}else s=e;return{pathname:s,search:qV(r),hash:UV(i)}}function $C(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function T_(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vj(t,e){let n=zV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yj(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=yd(t):(i=ph({},t),xn(!i.pathname||!i.pathname.includes("?"),T_("?","pathname","search",i)),xn(!i.pathname||!i.pathname.includes("#"),T_("#","pathname","hash",i)),xn(!i.search||!i.search.includes("#"),T_("#","search","hash",i)));let s=t===""||i.pathname==="",c=s?"/":i.pathname,u;if(c==null)u=n;else{let g=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}u=g>=0?e[g]:"/"}let f=MV(i,u),h=c&&c!=="/"&&c.endsWith("/"),p=(s||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}const Jo=t=>t.join("/").replace(/\/\/+/g,"/"),LV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function VV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YD=["post","put","patch","delete"];new Set(YD);const BV=["get",...YD];new Set(BV);function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gh.apply(this,arguments)}const bj=j.createContext(null),$V=j.createContext(null),gl=j.createContext(null),oy=j.createContext(null),Qs=j.createContext({outlet:null,matches:[],isDataRoute:!1}),XD=j.createContext(null);function FV(t,e){let{relative:n}=e===void 0?{}:e;bd()||xn(!1);let{basename:r,navigator:i}=j.useContext(gl),{hash:s,pathname:c,search:u}=JD(t,{relative:n}),f=c;return r!=="/"&&(f=c==="/"?r:Jo([r,c])),i.createHref({pathname:f,search:u,hash:s})}function bd(){return j.useContext(oy)!=null}function vl(){return bd()||xn(!1),j.useContext(oy).location}function ZD(t){j.useContext(gl).static||j.useLayoutEffect(t)}function kr(){let{isDataRoute:t}=j.useContext(Qs);return t?r8():HV()}function HV(){bd()||xn(!1);let t=j.useContext(bj),{basename:e,future:n,navigator:r}=j.useContext(gl),{matches:i}=j.useContext(Qs),{pathname:s}=vl(),c=JSON.stringify(vj(i,n.v7_relativeSplatPath)),u=j.useRef(!1);return ZD(()=>{u.current=!0}),j.useCallback(function(h,p){if(p===void 0&&(p={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=yj(h,JSON.parse(c),s,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Jo([e,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[e,r,c,s,t])}function ly(){let{matches:t}=j.useContext(Qs),e=t[t.length-1];return e?e.params:{}}function JD(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(gl),{matches:i}=j.useContext(Qs),{pathname:s}=vl(),c=JSON.stringify(vj(i,r.v7_relativeSplatPath));return j.useMemo(()=>yj(t,JSON.parse(c),s,n==="path"),[t,c,s,n])}function GV(t,e){return KV(t,e)}function KV(t,e,n,r){bd()||xn(!1);let{navigator:i}=j.useContext(gl),{matches:s}=j.useContext(Qs),c=s[s.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let h=vl(),p;if(e){var g;let N=typeof e=="string"?yd(e):e;f==="/"||(g=N.pathname)!=null&&g.startsWith(f)||xn(!1),p=N}else p=h;let y=p.pathname||"/",_=y;if(f!=="/"){let N=f.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let E=bV(t,{pathname:_}),w=ZV(E&&E.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Jo([f,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Jo([f,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r);return e&&w?j.createElement(oy.Provider,{value:{location:gh({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Yo.Pop}},w):w}function QV(){let t=n8(),e=VV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,null)}const WV=j.createElement(QV,null);class YV extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Qs.Provider,{value:this.props.routeContext},j.createElement(XD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XV(t){let{routeContext:e,match:n,children:r}=t,i=j.useContext(bj);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Qs.Provider,{value:e},r)}function ZV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);p>=0||xn(!1),c=c.slice(0,Math.min(c.length,p+1))}let f=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<c.length;p++){let g=c[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:y,errors:_}=n,E=g.route.loader&&y[g.route.id]===void 0&&(!_||_[g.route.id]===void 0);if(g.route.lazy||E){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((p,g,y)=>{let _,E=!1,w=null,N=null;n&&(_=u&&g.route.id?u[g.route.id]:void 0,w=g.route.errorElement||WV,f&&(h<0&&y===0?(i8("route-fallback"),E=!0,N=null):h===y&&(E=!0,N=g.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,y+1)),R=()=>{let O;return _?O=w:E?O=N:g.route.Component?O=j.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=p,j.createElement(XV,{match:g,routeContext:{outlet:p,matches:A,isDataRoute:n!=null},children:O})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?j.createElement(YV,{location:n.location,revalidation:n.revalidation,component:w,error:_,children:R(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):R()},null)}var eM=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(eM||{}),tM=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(tM||{});function JV(t){let e=j.useContext(bj);return e||xn(!1),e}function e8(t){let e=j.useContext($V);return e||xn(!1),e}function t8(t){let e=j.useContext(Qs);return e||xn(!1),e}function nM(t){let e=t8(),n=e.matches[e.matches.length-1];return n.route.id||xn(!1),n.route.id}function n8(){var t;let e=j.useContext(XD),n=e8(),r=nM();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function r8(){let{router:t}=JV(eM.UseNavigateStable),e=nM(tM.UseNavigateStable),n=j.useRef(!1);return ZD(()=>{n.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,gh({fromRouteId:e},s)))},[t,e])}const FC={};function i8(t,e,n){FC[t]||(FC[t]=!0)}function a8(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function s8(t){let{to:e,replace:n,state:r,relative:i}=t;bd()||xn(!1);let{future:s,static:c}=j.useContext(gl),{matches:u}=j.useContext(Qs),{pathname:f}=vl(),h=kr(),p=yj(e,vj(u,s.v7_relativeSplatPath),f,i==="path"),g=JSON.stringify(p);return j.useEffect(()=>h(JSON.parse(g),{replace:n,state:r,relative:i}),[h,g,i,n,r]),null}function tn(t){xn(!1)}function o8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Yo.Pop,navigator:s,static:c=!1,future:u}=t;bd()&&xn(!1);let f=e.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:f,navigator:s,static:c,future:gh({v7_relativeSplatPath:!1},u)}),[f,u,s,c]);typeof r=="string"&&(r=yd(r));let{pathname:p="/",search:g="",hash:y="",state:_=null,key:E="default"}=r,w=j.useMemo(()=>{let N=gj(p,f);return N==null?null:{location:{pathname:N,search:g,hash:y,state:_,key:E},navigationType:i}},[f,p,g,y,_,E,i]);return w==null?null:j.createElement(gl.Provider,{value:h},j.createElement(oy.Provider,{children:n,value:w}))}function l8(t){let{children:e,location:n}=t;return GV(R1(e),n)}new Promise(()=>{});function R1(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,i)=>{if(!j.isValidElement(r))return;let s=[...e,i];if(r.type===j.Fragment){n.push.apply(n,R1(r.props.children,s));return}r.type!==tn&&xn(!1),!r.props.index||!r.props.children||xn(!1);let c={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=R1(r.props.children,s)),n.push(c)}),n}function k1(){return k1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k1.apply(this,arguments)}function c8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function u8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function d8(t,e){return t.button===0&&(!e||e==="_self")&&!u8(t)}const f8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],h8="6";try{window.__reactRouterVersion=h8}catch{}const m8="startTransition",HC=HD[m8];function p8(t){let{basename:e,children:n,future:r,window:i}=t,s=j.useRef();s.current==null&&(s.current=gV({window:i,v5Compat:!0}));let c=s.current,[u,f]=j.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},p=j.useCallback(g=>{h&&HC?HC(()=>f(g)):f(g)},[f,h]);return j.useLayoutEffect(()=>c.listen(p),[c,p]),j.useEffect(()=>a8(r),[r]),j.createElement(o8,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const g8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tt=j.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:c,state:u,target:f,to:h,preventScrollReset:p,viewTransition:g}=e,y=c8(e,f8),{basename:_}=j.useContext(gl),E,w=!1;if(typeof h=="string"&&v8.test(h)&&(E=h,g8))try{let O=new URL(window.location.href),C=h.startsWith("//")?new URL(O.protocol+h):new URL(h),V=gj(C.pathname,_);C.origin===O.origin&&V!=null?h=V+C.search+C.hash:w=!0}catch{}let N=FV(h,{relative:i}),A=y8(h,{replace:c,state:u,target:f,preventScrollReset:p,relative:i,viewTransition:g});function R(O){r&&r(O),O.defaultPrevented||A(O)}return j.createElement("a",k1({},y,{href:E||N,onClick:w||s?r:R,ref:n,target:f}))});var GC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(GC||(GC={}));var KC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(KC||(KC={}));function y8(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:c,viewTransition:u}=e===void 0?{}:e,f=kr(),h=vl(),p=JD(t,{relative:c});return j.useCallback(g=>{if(d8(g,n)){g.preventDefault();let y=r!==void 0?r:Bg(h)===Bg(p);f(t,{replace:y,state:i,preventScrollReset:s,relative:c,viewTransition:u})}},[h,f,p,r,i,n,t,s,c,u])}const b8=()=>{};var QC={};const rM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],c=t[n++],u=t[n++],f=((i&7)<<18|(s&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const s=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|c&63)}}return e.join("")},iM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],c=i+1<t.length,u=c?t[i+1]:0,f=i+2<t.length,h=f?t[i+2]:0,p=s>>2,g=(s&3)<<4|u>>4;let y=(u&15)<<2|h>>6,_=h&63;f||(_=64,c||(y=64)),r.push(n[p],n[g],n[y],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new x8;const y=s<<2|u>>4;if(r.push(y),h!==64){const _=u<<4&240|h>>2;if(r.push(_),g!==64){const E=h<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w8=function(t){const e=rM(t);return iM.encodeByteArray(e,!0)},$g=function(t){return w8(t).replace(/\./g,"")},aM=function(t){try{return iM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function j8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const E8=()=>j8().__FIREBASE_DEFAULTS__,N8=()=>{if(typeof process>"u"||typeof QC>"u")return;const t=QC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aM(t[1]);return e&&JSON.parse(e)},cy=()=>{try{return b8()||E8()||N8()||S8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sM=t=>cy()?.emulatorHosts?.[t],oM=t=>{const e=sM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lM=()=>cy()?.config,cM=t=>cy()?.[`_${t}`];class A8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function yl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _j(t){return(await fetch(t,{credentials:"include"})).ok}function uM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$g(JSON.stringify(n)),$g(JSON.stringify(c)),""].join(".")}const sh={};function T8(){const t={prod:[],emulator:[]};for(const e of Object.keys(sh))sh[e]?t.emulator.push(e):t.prod.push(e);return t}function C8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let WC=!1;function xj(t,e){if(typeof window>"u"||typeof document>"u"||!yl(window.location.host)||sh[t]===e||sh[t]||WC)return;sh[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=T8().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function f(y,_){y.setAttribute("width","24"),y.setAttribute("id",_),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{WC=!0,c()},y}function p(y,_){y.setAttribute("id",_),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=C8(r),_=n("text"),E=document.getElementById(_)||document.createElement("span"),w=n("learnmore"),N=document.getElementById(w)||document.createElement("a"),A=n("preprendIcon"),R=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const O=y.element;u(O),p(N,w);const C=h();f(R,A),O.append(R,E,N,C),document.body.appendChild(O)}s?(E.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function P8(){const t=cy()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function k8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D8(){const t=wr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function M8(){return!P8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z8(){try{return typeof indexedDB=="object"}catch{return!1}}function L8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const q8="FirebaseError";class ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=q8,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hh.prototype.create)}}class Hh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],c=s?U8(s,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new ts(i,u,r)}}function U8(t,e){return t.replace(V8,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const V8=/\{\$([^}]+)}/g;function B8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],c=e[i];if(YC(s)&&YC(c)){if(!gc(s,c))return!1}else if(s!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function YC(t){return t!==null&&typeof t=="object"}function Gh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Xf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $8(t,e){const n=new F8(t,e);return n.subscribe.bind(n)}class F8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");H8(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=C_),i.error===void 0&&(i.error=C_),i.complete===void 0&&(i.complete=C_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function C_(){}function Ft(t){return t&&t._delegate?t._delegate:t}class sl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Jl="[DEFAULT]";let G8=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new A8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q8(e))try{this.getOrInitializeService({instanceIdentifier:Jl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Jl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jl){return this.instances.has(e)}getOptions(e=Jl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&c.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jl){return this.component?this.component.multipleInstances?e:Jl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function K8(t){return t===Jl?void 0:t}function Q8(t){return t.instantiationMode==="EAGER"}class W8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new G8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const Y8={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},X8=ut.INFO,Z8={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},J8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Z8[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wj{constructor(e){this.name=e,this._logLevel=X8,this._logHandler=J8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const eB=(t,e)=>e.some(n=>t instanceof n);let XC,ZC;function tB(){return XC||(XC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nB(){return ZC||(ZC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dM=new WeakMap,D1=new WeakMap,fM=new WeakMap,O_=new WeakMap,jj=new WeakMap;function rB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",c)},s=()=>{n(el(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&dM.set(n,t)}).catch(()=>{}),jj.set(e,t),e}function iB(t){if(D1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",c),t.removeEventListener("abort",c)},s=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",c),t.addEventListener("abort",c)});D1.set(t,e)}let M1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return D1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return el(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aB(t){M1=t(M1)}function sB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(P_(this),e,...n);return fM.set(r,e.sort?e.sort():[e]),el(r)}:nB().includes(t)?function(...e){return t.apply(P_(this),e),el(dM.get(this))}:function(...e){return el(t.apply(P_(this),e))}}function oB(t){return typeof t=="function"?sB(t):(t instanceof IDBTransaction&&iB(t),eB(t,tB())?new Proxy(t,M1):t)}function el(t){if(t instanceof IDBRequest)return rB(t);if(O_.has(t))return O_.get(t);const e=oB(t);return e!==t&&(O_.set(t,e),jj.set(e,t)),e}const P_=t=>jj.get(t);function lB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const c=indexedDB.open(t,e),u=el(c);return r&&c.addEventListener("upgradeneeded",f=>{r(el(c.result),f.oldVersion,f.newVersion,el(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),u.then(f=>{s&&f.addEventListener("close",()=>s()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const cB=["get","getKey","getAll","getAllKeys","count"],uB=["put","add","delete","clear"],I_=new Map;function JC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(I_.get(e))return I_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cB.includes(n)))return;const s=async function(c,...u){const f=this.transaction(c,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),i&&f.done]))[0]};return I_.set(e,s),s}aB(t=>({...t,get:(e,n,r)=>JC(e,n)||t.get(e,n,r),has:(e,n)=>!!JC(e,n)||t.has(e,n)}));class dB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fB(t){return t.getComponent()?.type==="VERSION"}const z1="@firebase/app",e2="0.14.7";const Ms=new wj("@firebase/app"),hB="@firebase/app-compat",mB="@firebase/analytics-compat",pB="@firebase/analytics",gB="@firebase/app-check-compat",vB="@firebase/app-check",yB="@firebase/auth",bB="@firebase/auth-compat",_B="@firebase/database",xB="@firebase/data-connect",wB="@firebase/database-compat",jB="@firebase/functions",EB="@firebase/functions-compat",NB="@firebase/installations",SB="@firebase/installations-compat",AB="@firebase/messaging",TB="@firebase/messaging-compat",CB="@firebase/performance",OB="@firebase/performance-compat",PB="@firebase/remote-config",IB="@firebase/remote-config-compat",RB="@firebase/storage",kB="@firebase/storage-compat",DB="@firebase/firestore",MB="@firebase/ai",zB="@firebase/firestore-compat",LB="firebase",qB="12.8.0";const L1="[DEFAULT]",UB={[z1]:"fire-core",[hB]:"fire-core-compat",[pB]:"fire-analytics",[mB]:"fire-analytics-compat",[vB]:"fire-app-check",[gB]:"fire-app-check-compat",[yB]:"fire-auth",[bB]:"fire-auth-compat",[_B]:"fire-rtdb",[xB]:"fire-data-connect",[wB]:"fire-rtdb-compat",[jB]:"fire-fn",[EB]:"fire-fn-compat",[NB]:"fire-iid",[SB]:"fire-iid-compat",[AB]:"fire-fcm",[TB]:"fire-fcm-compat",[CB]:"fire-perf",[OB]:"fire-perf-compat",[PB]:"fire-rc",[IB]:"fire-rc-compat",[RB]:"fire-gcs",[kB]:"fire-gcs-compat",[DB]:"fire-fst",[zB]:"fire-fst-compat",[MB]:"fire-vertex","fire-js":"fire-js",[LB]:"fire-js-all"};const Fg=new Map,VB=new Map,q1=new Map;function t2(t,e){try{t.container.addComponent(e)}catch(n){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vc(t){const e=t.name;if(q1.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;q1.set(e,t);for(const n of Fg.values())t2(n,t);for(const n of VB.values())t2(n,t);return!0}function uy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ui(t){return t==null?!1:t.settings!==void 0}const BB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tl=new Hh("app","Firebase",BB);class $B{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tl.create("app-deleted",{appName:this._name})}}const kc=qB;function hM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:L1,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw tl.create("bad-app-name",{appName:String(i)});if(n||(n=lM()),!n)throw tl.create("no-options");const s=Fg.get(i);if(s){if(gc(n,s.options)&&gc(r,s.config))return s;throw tl.create("duplicate-app",{appName:i})}const c=new W8(i);for(const f of q1.values())c.addComponent(f);const u=new $B(n,r,c);return Fg.set(i,u),u}function Ej(t=L1){const e=Fg.get(t);if(!e&&t===L1&&lM())return hM();if(!e)throw tl.create("no-app",{appName:t});return e}function Va(t,e,n){let r=UB[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(c.join(" "));return}vc(new sl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const FB="firebase-heartbeat-database",HB=1,vh="firebase-heartbeat-store";let R_=null;function mM(){return R_||(R_=lB(FB,HB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vh)}catch(n){console.warn(n)}}}}).catch(t=>{throw tl.create("idb-open",{originalErrorMessage:t.message})})),R_}async function GB(t){try{const n=(await mM()).transaction(vh),r=await n.objectStore(vh).get(pM(t));return await n.done,r}catch(e){if(e instanceof ts)Ms.warn(e.message);else{const n=tl.create("idb-get",{originalErrorMessage:e?.message});Ms.warn(n.message)}}}async function n2(t,e){try{const r=(await mM()).transaction(vh,"readwrite");await r.objectStore(vh).put(e,pM(t)),await r.done}catch(n){if(n instanceof ts)Ms.warn(n.message);else{const r=tl.create("idb-set",{originalErrorMessage:n?.message});Ms.warn(r.message)}}}function pM(t){return`${t.name}!${t.options.appId}`}const KB=1024,QB=30;class WB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=r2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>QB){const i=ZB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ms.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=r2(),{heartbeatsToSend:n,unsentEntries:r}=YB(this._heartbeatsCache.heartbeats),i=$g(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ms.warn(e),""}}}function r2(){return new Date().toISOString().substring(0,10)}function YB(t,e=KB){const n=[];let r=t.slice();for(const i of t){const s=n.find(c=>c.agent===i.agent);if(s){if(s.dates.push(i.date),i2(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),i2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z8()?L8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return n2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return n2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function i2(t){return $g(JSON.stringify({version:2,heartbeats:t})).length}function ZB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function JB(t){vc(new sl("platform-logger",e=>new dB(e),"PRIVATE")),vc(new sl("heartbeat",e=>new WB(e),"PRIVATE")),Va(z1,e2,t),Va(z1,e2,"esm2020"),Va("fire-js","")}JB("");function gM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const e7=gM,vM=new Hh("auth","Firebase",gM());const Hg=new wj("@firebase/auth");function t7(t,...e){Hg.logLevel<=ut.WARN&&Hg.warn(`Auth (${kc}): ${t}`,...e)}function Eg(t,...e){Hg.logLevel<=ut.ERROR&&Hg.error(`Auth (${kc}): ${t}`,...e)}function ca(t,...e){throw Nj(t,...e)}function Ba(t,...e){return Nj(t,...e)}function yM(t,e,n){const r={...e7(),[e]:n};return new Hh("auth","Firebase",r).create(e,{appName:t.name})}function Is(t){return yM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nj(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vM.create(t,...e)}function He(t,e,...n){if(!t)throw Nj(e,...n)}function As(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Eg(e),new Error(e)}function zs(t,e){t||As(e)}function U1(){return typeof self<"u"&&self.location?.href||""}function n7(){return a2()==="http:"||a2()==="https:"}function a2(){return typeof self<"u"&&self.location?.protocol||null}function r7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n7()||R8()||"connection"in navigator)?navigator.onLine:!0}function i7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Kh{constructor(e,n){this.shortDelay=e,this.longDelay=n,zs(n>e,"Short delay should be less than long delay!"),this.isMobile=O8()||k8()}get(){return r7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sj(t,e){zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class bM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;As("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;As("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;As("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const a7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const s7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o7=new Kh(3e4,6e4);function bl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ws(t,e,n,r,i={}){return _M(t,i,async()=>{let s={},c={};r&&(e==="GET"?c=r:s={body:JSON.stringify(r)});const u=Gh({key:t.config.apiKey,...c}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:f,...s};return I8()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&yl(t.emulatorConfig.host)&&(h.credentials="include"),bM.fetch()(await xM(t,t.config.apiHost,n,u),h)})}async function _M(t,e,n){t._canInitEmulator=!1;const r={...a7,...e};try{const i=new c7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await s.json();if("needConfirmation"in c)throw Qp(t,"account-exists-with-different-credential",c);if(s.ok&&!("errorMessage"in c))return c;{const u=s.ok?c.errorMessage:c.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qp(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Qp(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw Qp(t,"user-disabled",c);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw yM(t,p,h);ca(t,p)}}catch(i){if(i instanceof ts)throw i;ca(t,"network-request-failed",{message:String(i)})}}async function Qh(t,e,n,r,i={}){const s=await Ws(t,e,n,r,i);return"mfaPendingCredential"in s&&ca(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function xM(t,e,n,r){const i=`${e}${n}?${r}`,s=t,c=s.config.emulator?Sj(t.config,i):`${t.config.apiScheme}://${i}`;return s7.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(c).toString():c}function l7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ba(this.auth,"network-request-failed")),o7.get())})}}function Qp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ba(t,e,r);return i.customData._tokenResponse=n,i}function s2(t){return t!==void 0&&t.enterprise!==void 0}class u7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return l7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function d7(t,e){return Ws(t,"GET","/v2/recaptchaConfig",bl(t,e))}async function f7(t,e){return Ws(t,"POST","/v1/accounts:delete",e)}async function Gg(t,e){return Ws(t,"POST","/v1/accounts:lookup",e)}function oh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function h7(t,e=!1){const n=Ft(t),r=await n.getIdToken(e),i=Aj(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,c=s?.sign_in_provider;return{claims:i,token:r,authTime:oh(k_(i.auth_time)),issuedAtTime:oh(k_(i.iat)),expirationTime:oh(k_(i.exp)),signInProvider:c||null,signInSecondFactor:s?.sign_in_second_factor||null}}function k_(t){return Number(t)*1e3}function Aj(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Eg("JWT malformed, contained fewer than 3 sections"),null;try{const i=aM(n);return i?JSON.parse(i):(Eg("Failed to decode base64 JWT payload"),null)}catch(i){return Eg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function o2(t){const e=Aj(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ed(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ts&&m7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function m7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class p7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class V1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oh(this.lastLoginAt),this.creationTime=oh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kg(t){const e=t.auth,n=await t.getIdToken(),r=await ed(t,Gg(e,{idToken:n}));He(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?wM(i.providerUserInfo):[],c=v7(t.providerData,s),u=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!c?.length,h=u?f:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new V1(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function g7(t){const e=Ft(t);await Kg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function y7(t,e){const n=await _M(t,{},async()=>{const r=Gh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,c=await xM(t,i,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:r};return t.emulatorConfig&&yl(t.emulatorConfig.host)&&(f.credentials="include"),bM.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b7(t,e){return Ws(t,"POST","/v2/accounts:revokeToken",bl(t,e))}class Gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=o2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await y7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,c=new Gu;return r&&(He(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),c.expirationTime=s),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gu,this.toJSON())}_performRefresh(){return As("not implemented")}}function qo(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class aa{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new p7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new V1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ed(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return h7(this,e)}reload(){return g7(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new aa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(Is(this.auth));const e=await this.getIdToken();return await ed(this,f7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,c=n.photoURL??void 0,u=n.tenantId??void 0,f=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:_,providerData:E,stsTokenManager:w}=n;He(g&&w,e,"internal-error");const N=Gu.fromJSON(this.name,w);He(typeof g=="string",e,"internal-error"),qo(r,e.name),qo(i,e.name),He(typeof y=="boolean",e,"internal-error"),He(typeof _=="boolean",e,"internal-error"),qo(s,e.name),qo(c,e.name),qo(u,e.name),qo(f,e.name),qo(h,e.name),qo(p,e.name);const A=new aa({uid:g,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:_,photoURL:c,phoneNumber:s,tenantId:u,stsTokenManager:N,createdAt:h,lastLoginAt:p});return E&&Array.isArray(E)&&(A.providerData=E.map(R=>({...R}))),f&&(A._redirectEventId=f),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gu;i.updateFromServerResponse(n);const s=new aa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Kg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];He(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?wM(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!s?.length,u=new Gu;u.updateFromIdToken(r);const f=new aa({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new V1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(f,h),f}}const l2=new Map;function Ts(t){zs(t instanceof Function,"Expected a class definition");let e=l2.get(t);return e?(zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l2.set(t,e),e)}class jM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jM.type="NONE";const c2=jM;function Ng(t,e,n){return`firebase:${t}:${e}:${n}`}class Ku{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ng(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ng("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gg(this.auth,{idToken:e}).catch(()=>{});return n?aa._fromGetAccountInfoResponse(this.auth,n,e):null}return aa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ku(Ts(c2),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Ts(c2);const c=Ng(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(c);if(p){let g;if(typeof p=="string"){const y=await Gg(e,{idToken:p}).catch(()=>{});if(!y)break;g=await aa._fromGetAccountInfoResponse(e,y,p)}else g=aa._fromJSON(e,p);h!==s&&(u=g),s=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!f.length?new Ku(s,e,r):(s=f[0],u&&await s._set(c,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(c)}catch{}})),new Ku(s,e,r))}}function u2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CM(e))return"Blackberry";if(OM(e))return"Webos";if(NM(e))return"Safari";if((e.includes("chrome/")||SM(e))&&!e.includes("edge/"))return"Chrome";if(TM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function EM(t=wr()){return/firefox\//i.test(t)}function NM(t=wr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SM(t=wr()){return/crios\//i.test(t)}function AM(t=wr()){return/iemobile/i.test(t)}function TM(t=wr()){return/android/i.test(t)}function CM(t=wr()){return/blackberry/i.test(t)}function OM(t=wr()){return/webos/i.test(t)}function Tj(t=wr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _7(t=wr()){return Tj(t)&&!!window.navigator?.standalone}function x7(){return D8()&&document.documentMode===10}function PM(t=wr()){return Tj(t)||TM(t)||OM(t)||CM(t)||/windows phone/i.test(t)||AM(t)}function IM(t,e=[]){let n;switch(t){case"Browser":n=u2(wr());break;case"Worker":n=`${u2(wr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kc}/${r}`}class w7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((c,u)=>{try{const f=e(s);c(f)}catch(f){u(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function j7(t,e={}){return Ws(t,"GET","/v2/passwordPolicy",bl(t,e))}const E7=6;class N7{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??E7,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class S7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d2(this),this.idTokenSubscription=new d2(this),this.beforeStateQueue=new w7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ts(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ku.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gg(this,{idToken:e}),r=await aa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ui(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,c=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ui(this.app))return Promise.reject(Is(this));const n=e?Ft(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(Is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ui(this.app)?Promise.reject(Is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j7(this),n=new N7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await b7(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ts(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await Ku.create(this,[Ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(u,this,"internal-error"),u.then(()=>{c||s(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&t7(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Dc(t){return Ft(t)}class d2{constructor(e){this.auth=e,this.observer=null,this.addObserver=$8(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let dy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A7(t){dy=t}function RM(t){return dy.loadJS(t)}function T7(){return dy.recaptchaEnterpriseScript}function C7(){return dy.gapiScript}function O7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class P7{constructor(){this.enterprise=new I7}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class I7{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const R7="recaptcha-enterprise",kM="NO_RECAPTCHA";class k7{constructor(e){this.type=R7,this.auth=Dc(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(c,u)=>{d7(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new u7(f);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,c(h.siteKey)}}).catch(f=>{u(f)})})}function i(s,c,u){const f=window.grecaptcha;s2(f)?f.enterprise.ready(()=>{f.enterprise.execute(s,{action:e}).then(h=>{c(h)}).catch(()=>{c(kM)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P7().execute("siteKey",{action:"verify"}):new Promise((s,c)=>{r(this.auth).then(u=>{if(!n&&s2(window.grecaptcha))i(u,s,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=T7();f.length!==0&&(f+=u),RM(f).then(()=>{i(u,s,c)}).catch(h=>{c(h)})}}).catch(u=>{c(u)})})}}async function f2(t,e,n,r=!1,i=!1){const s=new k7(t);let c;if(i)c=kM;else try{c=await s.verify(n)}catch{c=await s.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function B1(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await f2(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await f2(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(s)})}function D7(t,e){const n=uy(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(gc(s,e??{}))return i;ca(i,"already-initialized")}return n.initialize({options:e})}function M7(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ts);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function z7(t,e,n){const r=Dc(t);He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=DM(e),{host:c,port:u}=L7(e),f=u===null?"":`:${u}`,h={url:`${s}//${c}${f}/`},p=Object.freeze({host:c,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){He(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),He(gc(h,r.config.emulator)&&gc(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,yl(c)?(_j(`${s}//${c}${f}`),xj("Auth",!0)):q7()}function DM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function L7(t){const e=DM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:h2(r.substr(s.length+1))}}else{const[s,c]=r.split(":");return{host:s,port:h2(c)}}}function h2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function q7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Cj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return As("not implemented")}_getIdTokenResponse(e){return As("not implemented")}_linkToIdToken(e,n){return As("not implemented")}_getReauthenticationResolver(e){return As("not implemented")}}async function U7(t,e){return Ws(t,"POST","/v1/accounts:signUp",e)}async function V7(t,e){return Qh(t,"POST","/v1/accounts:signInWithPassword",bl(t,e))}async function B7(t,e){return Qh(t,"POST","/v1/accounts:signInWithEmailLink",bl(t,e))}async function $7(t,e){return Qh(t,"POST","/v1/accounts:signInWithEmailLink",bl(t,e))}class yh extends Cj{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new yh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new yh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B1(e,n,"signInWithPassword",V7);case"emailLink":return B7(e,{email:this._email,oobCode:this._password});default:ca(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B1(e,r,"signUpPassword",U7);case"emailLink":return $7(e,{idToken:n,email:this._email,oobCode:this._password});default:ca(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qu(t,e){return Qh(t,"POST","/v1/accounts:signInWithIdp",bl(t,e))}const F7="http://localhost";class yc extends Cj{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ca("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const c=new yc(r,i);return c.idToken=s.idToken||void 0,c.accessToken=s.accessToken||void 0,c.secret=s.secret,c.nonce=s.nonce,c.pendingToken=s.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Qu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qu(e,n)}buildRequest(){const e={requestUri:F7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gh(n)}return e}}function H7(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G7(t){const e=Yf(Xf(t)).link,n=e?Yf(Xf(e)).deep_link_id:null,r=Yf(Xf(t)).deep_link_id;return(r?Yf(Xf(r)).link:null)||r||n||e||t}class Oj{constructor(e){const n=Yf(Xf(e)),r=n.apiKey??null,i=n.oobCode??null,s=H7(n.mode??null);He(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=G7(e);try{return new Oj(n)}catch{return null}}}class _d{constructor(){this.providerId=_d.PROVIDER_ID}static credential(e,n){return yh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Oj.parseLink(n);return He(r,"argument-error"),yh._fromEmailAndCode(e,r.code,r.tenantId)}}_d.PROVIDER_ID="password";_d.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_d.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class MM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wh extends MM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fo extends Wh{constructor(){super("facebook.com")}static credential(e){return yc._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fo.PROVIDER_ID="facebook.com";class Ho extends Wh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yc._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ho.credential(n,r)}catch{return null}}}Ho.GOOGLE_SIGN_IN_METHOD="google.com";Ho.PROVIDER_ID="google.com";class Go extends Wh{constructor(){super("github.com")}static credential(e){return yc._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Go.credential(e.oauthAccessToken)}catch{return null}}}Go.GITHUB_SIGN_IN_METHOD="github.com";Go.PROVIDER_ID="github.com";class Ko extends Wh{constructor(){super("twitter.com")}static credential(e,n){return yc._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ko.credential(n,r)}catch{return null}}}Ko.TWITTER_SIGN_IN_METHOD="twitter.com";Ko.PROVIDER_ID="twitter.com";async function K7(t,e){return Qh(t,"POST","/v1/accounts:signUp",bl(t,e))}class bc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await aa._fromIdTokenResponse(e,r,i),c=m2(r);return new bc({user:s,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=m2(r);return new bc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function m2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Qg extends ts{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Qg(e,n,r,i)}}function zM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qg._fromErrorAndOperation(t,s,e,r):s})}async function Q7(t,e,n=!1){const r=await ed(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bc._forOperation(t,"link",r)}async function W7(t,e,n=!1){const{auth:r}=t;if(ui(r.app))return Promise.reject(Is(r));const i="reauthenticate";try{const s=await ed(t,zM(r,i,e,t),n);He(s.idToken,r,"internal-error");const c=Aj(s.idToken);He(c,r,"internal-error");const{sub:u}=c;return He(t.uid===u,r,"user-mismatch"),bc._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ca(r,"user-mismatch"),s}}async function LM(t,e,n=!1){if(ui(t.app))return Promise.reject(Is(t));const r="signIn",i=await zM(t,r,e),s=await bc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Y7(t,e){return LM(Dc(t),e)}async function qM(t){const e=Dc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function X7(t,e,n){if(ui(t.app))return Promise.reject(Is(t));const r=Dc(t),c=await B1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",K7).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&qM(t),f}),u=await bc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function Z7(t,e,n){return ui(t.app)?Promise.reject(Is(t)):Y7(Ft(t),_d.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qM(t),r})}async function J7(t,e){return Ws(t,"POST","/v1/accounts:update",e)}async function e$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ft(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await ed(r,J7(r.auth,s));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:f})=>f==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function t$(t,e,n,r){return Ft(t).onIdTokenChanged(e,n,r)}function n$(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function r$(t,e,n,r){return Ft(t).onAuthStateChanged(e,n,r)}function i$(t){return Ft(t).signOut()}const Wg="__sak";class UM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wg,"1"),this.storage.removeItem(Wg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const a$=1e3,s$=10;class VM extends UM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},s=this.storage.getItem(r);x7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,s$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},a$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VM.type="LOCAL";const o$=VM;class BM extends UM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BM.type="SESSION";const $M=BM;function l$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class fy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new fy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,c=this.handlersMap[i];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async h=>h(n.origin,s)),f=await l$(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fy.receivers=[];function Pj(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class c${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,c;return new Promise((u,f)=>{const h=Pj("",20);i.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(y.data.response);break;default:clearTimeout(p),clearTimeout(s),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function $a(){return window}function u$(t){$a().location.href=t}function FM(){return typeof $a().WorkerGlobalScope<"u"&&typeof $a().importScripts=="function"}async function d$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f$(){return navigator?.serviceWorker?.controller||null}function h$(){return FM()?self:null}const HM="firebaseLocalStorageDb",m$=1,Yg="firebaseLocalStorage",GM="fbase_key";class Yh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hy(t,e){return t.transaction([Yg],e?"readwrite":"readonly").objectStore(Yg)}function p$(){const t=indexedDB.deleteDatabase(HM);return new Yh(t).toPromise()}function $1(){const t=indexedDB.open(HM,m$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yg,{keyPath:GM})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yg)?e(r):(r.close(),await p$(),e(await $1()))})})}async function p2(t,e,n){const r=hy(t,!0).put({[GM]:e,value:n});return new Yh(r).toPromise()}async function g$(t,e){const n=hy(t,!1).get(e),r=await new Yh(n).toPromise();return r===void 0?null:r.value}function g2(t,e){const n=hy(t,!0).delete(e);return new Yh(n).toPromise()}const v$=800,y$=3;class KM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>y$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fy._getInstance(h$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await d$(),!this.activeServiceWorker)return;this.sender=new c$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $1();return await p2(e,Wg,"1"),await g2(e,Wg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>p2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>g$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=hy(i,!1).getAll();return new Yh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KM.type="LOCAL";const b$=KM;new Kh(3e4,6e4);function _$(t,e){return e?Ts(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Ij extends Cj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function x$(t){return LM(t.auth,new Ij(t),t.bypassAuthState)}function w$(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),W7(n,new Ij(t),t.bypassAuthState)}async function j$(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),Q7(n,new Ij(t),t.bypassAuthState)}class QM{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x$;case"linkViaPopup":case"linkViaRedirect":return j$;case"reauthViaPopup":case"reauthViaRedirect":return w$;default:ca(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const E$=new Kh(2e3,1e4);class $u extends QM{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$u.currentPopupAction&&$u.currentPopupAction.cancel(),$u.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=Pj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ba(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ba(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$u.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ba(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E$.get())};e()}}$u.currentPopupAction=null;const N$="pendingRedirect",Sg=new Map;class S$ extends QM{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sg.get(this.auth._key());if(!e){try{const r=await A$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sg.set(this.auth._key(),e)}return this.bypassAuthState||Sg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A$(t,e){const n=O$(e),r=C$(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function T$(t,e){Sg.set(t._key(),e)}function C$(t){return Ts(t._redirectPersistence)}function O$(t){return Ng(N$,t.config.apiKey,t.name)}async function P$(t,e,n=!1){if(ui(t.app))return Promise.reject(Is(t));const r=Dc(t),i=_$(r,e),c=await new S$(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const I$=600*1e3;class R${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!WM(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ba(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=I$&&this.cachedEventUids.clear(),this.cachedEventUids.has(v2(e))}saveEventToCache(e){this.cachedEventUids.add(v2(e)),this.lastProcessedEventTime=Date.now()}}function v2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function k$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WM(t);default:return!1}}async function D$(t,e={}){return Ws(t,"GET","/v1/projects",e)}const M$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z$=/^https?/;async function L$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await D$(t);for(const n of e)try{if(q$(n))return}catch{}ca(t,"unauthorized-domain")}function q$(t){const e=U1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!z$.test(n))return!1;if(M$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const U$=new Kh(3e4,6e4);function y2(){const t=$a().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function V$(t){return new Promise((e,n)=>{function r(){y2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y2(),n(Ba(t,"network-request-failed"))},timeout:U$.get()})}if($a().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($a().gapi?.load)r();else{const i=O7("iframefcb");return $a()[i]=()=>{gapi.load?r():n(Ba(t,"network-request-failed"))},RM(`${C7()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw Ag=null,e})}let Ag=null;function B$(t){return Ag=Ag||V$(t),Ag}const $$=new Kh(5e3,15e3),F$="__/auth/iframe",H$="emulator/auth/iframe",G$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q$(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sj(e,H$):`https://${t.config.authDomain}/${F$}`,r={apiKey:e.apiKey,appName:t.name,v:kc},i=K$.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Gh(r).slice(1)}`}async function W$(t){const e=await B$(t),n=$a().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:Q$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G$,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const c=Ba(t,"network-request-failed"),u=$a().setTimeout(()=>{s(c)},$$.get());function f(){$a().clearTimeout(u),i(r)}r.ping(f).then(f,()=>{s(c)})}))}const Y$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X$=500,Z$=600,J$="_blank",eF="http://localhost";class b2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tF(t,e,n,r=X$,i=Z$){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const f={...Y$,width:r.toString(),height:i.toString(),top:s,left:c},h=wr().toLowerCase();n&&(u=SM(h)?J$:n),EM(h)&&(e=e||eF,f.scrollbars="yes");const p=Object.entries(f).reduce((y,[_,E])=>`${y}${_}=${E},`,"");if(_7(h)&&u!=="_self")return nF(e||"",u),new b2(null);const g=window.open(e||"",u,p);He(g,t,"popup-blocked");try{g.focus()}catch{}return new b2(g)}function nF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const rF="__/auth/handler",iF="emulator/auth/handler",aF=encodeURIComponent("fac");async function _2(t,e,n,r,i,s){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kc,eventId:i};if(e instanceof MM){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",B8(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))c[p]=g}if(e instanceof Wh){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await t._getAppCheckToken(),h=f?`#${aF}=${encodeURIComponent(f)}`:"";return`${sF(t)}?${Gh(u).slice(1)}${h}`}function sF({config:t}){return t.emulator?Sj(t,iF):`https://${t.authDomain}/${rF}`}const D_="webStorageSupport";class oF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$M,this._completeRedirectFn=P$,this._overrideRedirectResult=T$}async _openPopup(e,n,r,i){zs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await _2(e,n,r,U1(),i);return tF(e,s,Pj())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await _2(e,n,r,U1(),i);return u$(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await W$(e),r=new R$(e);return n.register("authEvent",i=>(He(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(D_,{type:D_},i=>{const s=i?.[0]?.[D_];s!==void 0&&n(!!s),ca(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PM()||NM()||Tj()}}const lF=oF;var x2="@firebase/auth",w2="1.12.0";class cF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function uF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dF(t){vc(new sl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;He(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IM(t)},h=new S7(r,i,s,f);return M7(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vc(new sl("auth-internal",e=>{const n=Dc(e.getProvider("auth").getImmediate());return(r=>new cF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Va(x2,w2,uF(t)),Va(x2,w2,"esm2020")}const fF=300,hF=cM("authIdTokenMaxAge")||fF;let j2=null;const mF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hF)return;const i=n?.token;j2!==i&&(j2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pF(t=Ej()){const e=uy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=D7(t,{popupRedirectResolver:lF,persistence:[b$,o$,$M]}),r=cM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const c=mF(s.toString());n$(n,c,()=>c(n.currentUser)),t$(n,u=>c(u))}}const i=sM("auth");return i&&z7(n,`http://${i}`),n}function gF(){return document.getElementsByTagName("head")?.[0]??document}A7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ba("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dF("Browser");var E2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var nl,YM;(function(){var t;function e(D,I){function k(){}k.prototype=I.prototype,D.F=I.prototype,D.prototype=new k,D.prototype.constructor=D,D.D=function(U,q,z){for(var M=Array(arguments.length-2),W=2;W<arguments.length;W++)M[W-2]=arguments[W];return I.prototype[q].apply(U,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,I,k){k||(k=0);const U=Array(16);if(typeof I=="string")for(var q=0;q<16;++q)U[q]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(q=0;q<16;++q)U[q]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=D.g[0],k=D.g[1],q=D.g[2];let z=D.g[3],M;M=I+(z^k&(q^z))+U[0]+3614090360&4294967295,I=k+(M<<7&4294967295|M>>>25),M=z+(q^I&(k^q))+U[1]+3905402710&4294967295,z=I+(M<<12&4294967295|M>>>20),M=q+(k^z&(I^k))+U[2]+606105819&4294967295,q=z+(M<<17&4294967295|M>>>15),M=k+(I^q&(z^I))+U[3]+3250441966&4294967295,k=q+(M<<22&4294967295|M>>>10),M=I+(z^k&(q^z))+U[4]+4118548399&4294967295,I=k+(M<<7&4294967295|M>>>25),M=z+(q^I&(k^q))+U[5]+1200080426&4294967295,z=I+(M<<12&4294967295|M>>>20),M=q+(k^z&(I^k))+U[6]+2821735955&4294967295,q=z+(M<<17&4294967295|M>>>15),M=k+(I^q&(z^I))+U[7]+4249261313&4294967295,k=q+(M<<22&4294967295|M>>>10),M=I+(z^k&(q^z))+U[8]+1770035416&4294967295,I=k+(M<<7&4294967295|M>>>25),M=z+(q^I&(k^q))+U[9]+2336552879&4294967295,z=I+(M<<12&4294967295|M>>>20),M=q+(k^z&(I^k))+U[10]+4294925233&4294967295,q=z+(M<<17&4294967295|M>>>15),M=k+(I^q&(z^I))+U[11]+2304563134&4294967295,k=q+(M<<22&4294967295|M>>>10),M=I+(z^k&(q^z))+U[12]+1804603682&4294967295,I=k+(M<<7&4294967295|M>>>25),M=z+(q^I&(k^q))+U[13]+4254626195&4294967295,z=I+(M<<12&4294967295|M>>>20),M=q+(k^z&(I^k))+U[14]+2792965006&4294967295,q=z+(M<<17&4294967295|M>>>15),M=k+(I^q&(z^I))+U[15]+1236535329&4294967295,k=q+(M<<22&4294967295|M>>>10),M=I+(q^z&(k^q))+U[1]+4129170786&4294967295,I=k+(M<<5&4294967295|M>>>27),M=z+(k^q&(I^k))+U[6]+3225465664&4294967295,z=I+(M<<9&4294967295|M>>>23),M=q+(I^k&(z^I))+U[11]+643717713&4294967295,q=z+(M<<14&4294967295|M>>>18),M=k+(z^I&(q^z))+U[0]+3921069994&4294967295,k=q+(M<<20&4294967295|M>>>12),M=I+(q^z&(k^q))+U[5]+3593408605&4294967295,I=k+(M<<5&4294967295|M>>>27),M=z+(k^q&(I^k))+U[10]+38016083&4294967295,z=I+(M<<9&4294967295|M>>>23),M=q+(I^k&(z^I))+U[15]+3634488961&4294967295,q=z+(M<<14&4294967295|M>>>18),M=k+(z^I&(q^z))+U[4]+3889429448&4294967295,k=q+(M<<20&4294967295|M>>>12),M=I+(q^z&(k^q))+U[9]+568446438&4294967295,I=k+(M<<5&4294967295|M>>>27),M=z+(k^q&(I^k))+U[14]+3275163606&4294967295,z=I+(M<<9&4294967295|M>>>23),M=q+(I^k&(z^I))+U[3]+4107603335&4294967295,q=z+(M<<14&4294967295|M>>>18),M=k+(z^I&(q^z))+U[8]+1163531501&4294967295,k=q+(M<<20&4294967295|M>>>12),M=I+(q^z&(k^q))+U[13]+2850285829&4294967295,I=k+(M<<5&4294967295|M>>>27),M=z+(k^q&(I^k))+U[2]+4243563512&4294967295,z=I+(M<<9&4294967295|M>>>23),M=q+(I^k&(z^I))+U[7]+1735328473&4294967295,q=z+(M<<14&4294967295|M>>>18),M=k+(z^I&(q^z))+U[12]+2368359562&4294967295,k=q+(M<<20&4294967295|M>>>12),M=I+(k^q^z)+U[5]+4294588738&4294967295,I=k+(M<<4&4294967295|M>>>28),M=z+(I^k^q)+U[8]+2272392833&4294967295,z=I+(M<<11&4294967295|M>>>21),M=q+(z^I^k)+U[11]+1839030562&4294967295,q=z+(M<<16&4294967295|M>>>16),M=k+(q^z^I)+U[14]+4259657740&4294967295,k=q+(M<<23&4294967295|M>>>9),M=I+(k^q^z)+U[1]+2763975236&4294967295,I=k+(M<<4&4294967295|M>>>28),M=z+(I^k^q)+U[4]+1272893353&4294967295,z=I+(M<<11&4294967295|M>>>21),M=q+(z^I^k)+U[7]+4139469664&4294967295,q=z+(M<<16&4294967295|M>>>16),M=k+(q^z^I)+U[10]+3200236656&4294967295,k=q+(M<<23&4294967295|M>>>9),M=I+(k^q^z)+U[13]+681279174&4294967295,I=k+(M<<4&4294967295|M>>>28),M=z+(I^k^q)+U[0]+3936430074&4294967295,z=I+(M<<11&4294967295|M>>>21),M=q+(z^I^k)+U[3]+3572445317&4294967295,q=z+(M<<16&4294967295|M>>>16),M=k+(q^z^I)+U[6]+76029189&4294967295,k=q+(M<<23&4294967295|M>>>9),M=I+(k^q^z)+U[9]+3654602809&4294967295,I=k+(M<<4&4294967295|M>>>28),M=z+(I^k^q)+U[12]+3873151461&4294967295,z=I+(M<<11&4294967295|M>>>21),M=q+(z^I^k)+U[15]+530742520&4294967295,q=z+(M<<16&4294967295|M>>>16),M=k+(q^z^I)+U[2]+3299628645&4294967295,k=q+(M<<23&4294967295|M>>>9),M=I+(q^(k|~z))+U[0]+4096336452&4294967295,I=k+(M<<6&4294967295|M>>>26),M=z+(k^(I|~q))+U[7]+1126891415&4294967295,z=I+(M<<10&4294967295|M>>>22),M=q+(I^(z|~k))+U[14]+2878612391&4294967295,q=z+(M<<15&4294967295|M>>>17),M=k+(z^(q|~I))+U[5]+4237533241&4294967295,k=q+(M<<21&4294967295|M>>>11),M=I+(q^(k|~z))+U[12]+1700485571&4294967295,I=k+(M<<6&4294967295|M>>>26),M=z+(k^(I|~q))+U[3]+2399980690&4294967295,z=I+(M<<10&4294967295|M>>>22),M=q+(I^(z|~k))+U[10]+4293915773&4294967295,q=z+(M<<15&4294967295|M>>>17),M=k+(z^(q|~I))+U[1]+2240044497&4294967295,k=q+(M<<21&4294967295|M>>>11),M=I+(q^(k|~z))+U[8]+1873313359&4294967295,I=k+(M<<6&4294967295|M>>>26),M=z+(k^(I|~q))+U[15]+4264355552&4294967295,z=I+(M<<10&4294967295|M>>>22),M=q+(I^(z|~k))+U[6]+2734768916&4294967295,q=z+(M<<15&4294967295|M>>>17),M=k+(z^(q|~I))+U[13]+1309151649&4294967295,k=q+(M<<21&4294967295|M>>>11),M=I+(q^(k|~z))+U[4]+4149444226&4294967295,I=k+(M<<6&4294967295|M>>>26),M=z+(k^(I|~q))+U[11]+3174756917&4294967295,z=I+(M<<10&4294967295|M>>>22),M=q+(I^(z|~k))+U[2]+718787259&4294967295,q=z+(M<<15&4294967295|M>>>17),M=k+(z^(q|~I))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(q+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+q&4294967295,D.g[3]=D.g[3]+z&4294967295}r.prototype.v=function(D,I){I===void 0&&(I=D.length);const k=I-this.blockSize,U=this.C;let q=this.h,z=0;for(;z<I;){if(q==0)for(;z<=k;)i(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<I;)if(U[q++]=D.charCodeAt(z++),q==this.blockSize){i(this,U),q=0;break}}else for(;z<I;)if(U[q++]=D[z++],q==this.blockSize){i(this,U),q=0;break}}this.h=q,this.o+=I},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;I=this.o*8;for(var k=D.length-8;k<D.length;++k)D[k]=I&255,I/=256;for(this.v(D),D=Array(16),I=0,k=0;k<4;++k)for(let U=0;U<32;U+=8)D[I++]=this.g[k]>>>U&255;return D};function s(D,I){var k=u;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=I(D)}function c(D,I){this.h=I;const k=[];let U=!0;for(let q=D.length-1;q>=0;q--){const z=D[q]|0;U&&z==I||(k[q]=z,U=!1)}this.g=k}var u={};function f(D){return-128<=D&&D<128?s(D,function(I){return new c([I|0],I<0?-1:0)}):new c([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return N(h(-D));const I=[];let k=1;for(let U=0;D>=k;U++)I[U]=D/k|0,k*=4294967296;return new c(I,0)}function p(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return N(p(D.substring(1),I));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(I,8));let U=g;for(let z=0;z<D.length;z+=8){var q=Math.min(8,D.length-z);const M=parseInt(D.substring(z,z+q),I);q<8?(q=h(Math.pow(I,q)),U=U.j(q).add(h(M))):(U=U.j(k),U=U.add(h(M)))}return U}var g=f(0),y=f(1),_=f(16777216);t=c.prototype,t.m=function(){if(w(this))return-N(this).m();let D=0,I=1;for(let k=0;k<this.g.length;k++){const U=this.i(k);D+=(U>=0?U:4294967296+U)*I,I*=4294967296}return D},t.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(w(this))return"-"+N(this).toString(D);const I=h(Math.pow(D,6));var k=this;let U="";for(;;){const q=C(k,I).g;k=A(k,q.j(I));let z=((k.g.length>0?k.g[0]:k.h)>>>0).toString(D);if(k=q,E(k))return z+U;for(;z.length<6;)z="0"+z;U=z+U}},t.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(let I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function w(D){return D.h==-1}t.l=function(D){return D=A(this,D),w(D)?-1:E(D)?0:1};function N(D){const I=D.g.length,k=[];for(let U=0;U<I;U++)k[U]=~D.g[U];return new c(k,~D.h).add(y)}t.abs=function(){return w(this)?N(this):this},t.add=function(D){const I=Math.max(this.g.length,D.g.length),k=[];let U=0;for(let q=0;q<=I;q++){let z=U+(this.i(q)&65535)+(D.i(q)&65535),M=(z>>>16)+(this.i(q)>>>16)+(D.i(q)>>>16);U=M>>>16,z&=65535,M&=65535,k[q]=M<<16|z}return new c(k,k[k.length-1]&-2147483648?-1:0)};function A(D,I){return D.add(N(I))}t.j=function(D){if(E(this)||E(D))return g;if(w(this))return w(D)?N(this).j(N(D)):N(N(this).j(D));if(w(D))return N(this.j(N(D)));if(this.l(_)<0&&D.l(_)<0)return h(this.m()*D.m());const I=this.g.length+D.g.length,k=[];for(var U=0;U<2*I;U++)k[U]=0;for(U=0;U<this.g.length;U++)for(let q=0;q<D.g.length;q++){const z=this.i(U)>>>16,M=this.i(U)&65535,W=D.i(q)>>>16,Q=D.i(q)&65535;k[2*U+2*q]+=M*Q,R(k,2*U+2*q),k[2*U+2*q+1]+=z*Q,R(k,2*U+2*q+1),k[2*U+2*q+1]+=M*W,R(k,2*U+2*q+1),k[2*U+2*q+2]+=z*W,R(k,2*U+2*q+2)}for(D=0;D<I;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=I;D<2*I;D++)k[D]=0;return new c(k,0)};function R(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function O(D,I){this.g=D,this.h=I}function C(D,I){if(E(I))throw Error("division by zero");if(E(D))return new O(g,g);if(w(D))return I=C(N(D),I),new O(N(I.g),N(I.h));if(w(I))return I=C(D,N(I)),new O(N(I.g),I.h);if(D.g.length>30){if(w(D)||w(I))throw Error("slowDivide_ only works with positive integers.");for(var k=y,U=I;U.l(D)<=0;)k=V(k),U=V(U);var q=$(k,1),z=$(U,1);for(U=$(U,2),k=$(k,2);!E(U);){var M=z.add(U);M.l(D)<=0&&(q=q.add(k),z=M),U=$(U,1),k=$(k,1)}return I=A(D,q.j(I)),new O(q,I)}for(q=g;D.l(I)>=0;){for(k=Math.max(1,Math.floor(D.m()/I.m())),U=Math.ceil(Math.log(k)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),z=h(k),M=z.j(I);w(M)||M.l(D)>0;)k-=U,z=h(k),M=z.j(I);E(z)&&(z=y),q=q.add(z),D=A(D,M)}return new O(q,D)}t.B=function(D){return C(this,D).h},t.and=function(D){const I=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<I;U++)k[U]=this.i(U)&D.i(U);return new c(k,this.h&D.h)},t.or=function(D){const I=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<I;U++)k[U]=this.i(U)|D.i(U);return new c(k,this.h|D.h)},t.xor=function(D){const I=Math.max(this.g.length,D.g.length),k=[];for(let U=0;U<I;U++)k[U]=this.i(U)^D.i(U);return new c(k,this.h^D.h)};function V(D){const I=D.g.length+1,k=[];for(let U=0;U<I;U++)k[U]=D.i(U)<<1|D.i(U-1)>>>31;return new c(k,D.h)}function $(D,I){const k=I>>5;I%=32;const U=D.g.length-k,q=[];for(let z=0;z<U;z++)q[z]=I>0?D.i(z+k)>>>I|D.i(z+k+1)<<32-I:D.i(z+k);return new c(q,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,YM=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=p,nl=c}).apply(typeof E2<"u"?E2:typeof self<"u"?self:typeof window<"u"?window:{});var Wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var XM,Zf,ZM,Tg,F1,JM,ez,tz;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wp=="object"&&Wp];for(var S=0;S<v.length;++S){var P=v[S];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(v,S){if(S)e:{var P=r;v=v.split(".");for(var B=0;B<v.length-1;B++){var re=v[B];if(!(re in P))break e;P=P[re]}v=v[v.length-1],B=P[v],S=S(B),S!=B&&S!=null&&e(P,v,{configurable:!0,writable:!0,value:S})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(S){var P=[],B;for(B in S)Object.prototype.hasOwnProperty.call(S,B)&&P.push([B,S[B]]);return P}});var s=s||{},c=this||self;function u(v){var S=typeof v;return S=="object"&&v!=null||S=="function"}function f(v,S,P){return v.call.apply(v.bind,arguments)}function h(v,S,P){return h=f,h.apply(null,arguments)}function p(v,S){var P=Array.prototype.slice.call(arguments,1);return function(){var B=P.slice();return B.push.apply(B,arguments),v.apply(this,B)}}function g(v,S){function P(){}P.prototype=S.prototype,v.Z=S.prototype,v.prototype=new P,v.prototype.constructor=v,v.Ob=function(B,re,ue){for(var Ne=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)Ne[Ze-2]=arguments[Ze];return S.prototype[re].apply(B,Ne)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function _(v){const S=v.length;if(S>0){const P=Array(S);for(let B=0;B<S;B++)P[B]=v[B];return P}return[]}function E(v,S){for(let B=1;B<arguments.length;B++){const re=arguments[B];var P=typeof re;if(P=P!="object"?P:re?Array.isArray(re)?"array":P:"null",P=="array"||P=="object"&&typeof re.length=="number"){P=v.length||0;const ue=re.length||0;v.length=P+ue;for(let Ne=0;Ne<ue;Ne++)v[P+Ne]=re[Ne]}else v.push(re)}}class w{constructor(S,P){this.i=S,this.j=P,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function N(v){c.setTimeout(()=>{throw v},0)}function A(){var v=D;let S=null;return v.g&&(S=v.g,v.g=v.g.next,v.g||(v.h=null),S.next=null),S}class R{constructor(){this.h=this.g=null}add(S,P){const B=O.get();B.set(S,P),this.h?this.h.next=B:this.g=B,this.h=B}}var O=new w(()=>new C,v=>v.reset());class C{constructor(){this.next=this.g=this.h=null}set(S,P){this.h=S,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let V,$=!1,D=new R,I=()=>{const v=Promise.resolve(void 0);V=()=>{v.then(k)}};function k(){for(var v;v=A();){try{v.h.call(v.g)}catch(P){N(P)}var S=O;S.j(v),S.h<100&&(S.h++,v.next=S.g,S.g=v)}$=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(v,S){this.type=v,this.g=this.target=S,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,S=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const P=()=>{};c.addEventListener("test",P,S),c.removeEventListener("test",P,S)}catch{}return v})();function M(v){return/^[\s\xa0]*$/.test(v)}function W(v,S){q.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,S)}g(W,q),W.prototype.init=function(v,S){const P=this.type=v.type,B=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=S,S=v.relatedTarget,S||(P=="mouseover"?S=v.fromElement:P=="mouseout"&&(S=v.toElement)),this.relatedTarget=S,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),H=0;function le(v,S,P,B,re){this.listener=v,this.proxy=null,this.src=S,this.type=P,this.capture=!!B,this.ha=re,this.key=++H,this.da=this.fa=!1}function _e(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function je(v,S,P){for(const B in v)S.call(P,v[B],B,v)}function Y(v,S){for(const P in v)S.call(void 0,v[P],P,v)}function F(v){const S={};for(const P in v)S[P]=v[P];return S}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(v,S){let P,B;for(let re=1;re<arguments.length;re++){B=arguments[re];for(P in B)v[P]=B[P];for(let ue=0;ue<te.length;ue++)P=te[ue],Object.prototype.hasOwnProperty.call(B,P)&&(v[P]=B[P])}}function we(v){this.src=v,this.g={},this.h=0}we.prototype.add=function(v,S,P,B,re){const ue=v.toString();v=this.g[ue],v||(v=this.g[ue]=[],this.h++);const Ne=ne(v,S,B,re);return Ne>-1?(S=v[Ne],P||(S.fa=!1)):(S=new le(S,this.src,ue,!!B,re),S.fa=P,v.push(S)),S};function Z(v,S){const P=S.type;if(P in v.g){var B=v.g[P],re=Array.prototype.indexOf.call(B,S,void 0),ue;(ue=re>=0)&&Array.prototype.splice.call(B,re,1),ue&&(_e(S),v.g[P].length==0&&(delete v.g[P],v.h--))}}function ne(v,S,P,B){for(let re=0;re<v.length;++re){const ue=v[re];if(!ue.da&&ue.listener==S&&ue.capture==!!P&&ue.ha==B)return re}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Me={};function se(v,S,P,B,re){if(Array.isArray(S)){for(let ue=0;ue<S.length;ue++)se(v,S[ue],P,B,re);return null}return P=mr(P),v&&v[Q]?v.J(S,P,u(B)?!!B.capture:!1,re):Se(v,S,P,!1,B,re)}function Se(v,S,P,B,re,ue){if(!S)throw Error("Invalid event type");const Ne=u(re)?!!re.capture:!!re;let Ze=ht(v);if(Ze||(v[me]=Ze=new we(v)),P=Ze.add(S,P,B,Ne,ue),P.proxy)return P;if(B=X(),P.proxy=B,B.src=v,B.listener=P,v.addEventListener)z||(re=Ne),re===void 0&&(re=!1),v.addEventListener(S.toString(),B,re);else if(v.attachEvent)v.attachEvent(Fe(S.toString()),B);else if(v.addListener&&v.removeListener)v.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return P}function X(){function v(P){return S.call(v.src,v.listener,P)}const S=ot;return v}function pe(v,S,P,B,re){if(Array.isArray(S))for(var ue=0;ue<S.length;ue++)pe(v,S[ue],P,B,re);else B=u(B)?!!B.capture:!!B,P=mr(P),v&&v[Q]?(v=v.i,ue=String(S).toString(),ue in v.g&&(S=v.g[ue],P=ne(S,P,B,re),P>-1&&(_e(S[P]),Array.prototype.splice.call(S,P,1),S.length==0&&(delete v.g[ue],v.h--)))):v&&(v=ht(v))&&(S=v.g[S.toString()],v=-1,S&&(v=ne(S,P,B,re)),(P=v>-1?S[v]:null)&&ke(P))}function ke(v){if(typeof v!="number"&&v&&!v.da){var S=v.src;if(S&&S[Q])Z(S.i,v);else{var P=v.type,B=v.proxy;S.removeEventListener?S.removeEventListener(P,B,v.capture):S.detachEvent?S.detachEvent(Fe(P),B):S.addListener&&S.removeListener&&S.removeListener(B),(P=ht(S))?(Z(P,v),P.h==0&&(P.src=null,S[me]=null)):_e(v)}}}function Fe(v){return v in Me?Me[v]:Me[v]="on"+v}function ot(v,S){if(v.da)v=!0;else{S=new W(S,this);const P=v.listener,B=v.ha||v.src;v.fa&&ke(v),v=P.call(B,S)}return v}function ht(v){return v=v[me],v instanceof we?v:null}var gt="__closure_events_fn_"+(Math.random()*1e9>>>0);function mr(v){return typeof v=="function"?v:(v[gt]||(v[gt]=function(S){return v.handleEvent(S)}),v[gt])}function Pt(){U.call(this),this.i=new we(this),this.M=this,this.G=null}g(Pt,U),Pt.prototype[Q]=!0,Pt.prototype.removeEventListener=function(v,S,P,B){pe(this,v,S,P,B)};function It(v,S){var P,B=v.G;if(B)for(P=[];B;B=B.G)P.push(B);if(v=v.M,B=S.type||S,typeof S=="string")S=new q(S,v);else if(S instanceof q)S.target=S.target||v;else{var re=S;S=new q(B,v),ye(S,re)}re=!0;let ue,Ne;if(P)for(Ne=P.length-1;Ne>=0;Ne--)ue=S.g=P[Ne],re=zr(ue,B,!0,S)&&re;if(ue=S.g=v,re=zr(ue,B,!0,S)&&re,re=zr(ue,B,!1,S)&&re,P)for(Ne=0;Ne<P.length;Ne++)ue=S.g=P[Ne],re=zr(ue,B,!1,S)&&re}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var v=this.i;for(const S in v.g){const P=v.g[S];for(let B=0;B<P.length;B++)_e(P[B]);delete v.g[S],v.h--}}this.G=null},Pt.prototype.J=function(v,S,P,B){return this.i.add(String(v),S,!1,P,B)},Pt.prototype.K=function(v,S,P,B){return this.i.add(String(v),S,!0,P,B)};function zr(v,S,P,B){if(S=v.i.g[String(S)],!S)return!0;S=S.concat();let re=!0;for(let ue=0;ue<S.length;++ue){const Ne=S[ue];if(Ne&&!Ne.da&&Ne.capture==P){const Ze=Ne.listener,gn=Ne.ha||Ne.src;Ne.fa&&Z(v.i,Ne),re=Ze.call(gn,B)!==!1&&re}}return re&&!B.defaultPrevented}function fe(v,S){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(v,S||0)}function Ie(v){v.g=fe(()=>{v.g=null,v.i&&(v.i=!1,Ie(v))},v.l);const S=v.h;v.h=null,v.m.apply(null,S)}class Ve extends U{constructor(S,P){super(),this.m=S,this.l=P,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ie(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(v){U.call(this),this.h=v,this.g={}}g(Ke,U);var Vt=[];function zn(v){je(v.g,function(S,P){this.g.hasOwnProperty(P)&&ke(S)},v),v.g={}}Ke.prototype.N=function(){Ke.Z.N.call(this),zn(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lr=c.JSON.stringify,ao=c.JSON.parse,qr=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Hi(){}function Hc(){}var sn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nt(){q.call(this,"d")}g(Nt,q);function Ur(){q.call(this,"c")}g(Ur,q);var en={},El=null;function so(){return El=El||new Pt}en.Ia="serverreachability";function Gc(v){q.call(this,en.Ia,v)}g(Gc,q);function yi(v){const S=so();It(S,new Gc(S))}en.STAT_EVENT="statevent";function ns(v,S){q.call(this,en.STAT_EVENT,v),this.stat=S}g(ns,q);function on(v){const S=so();It(S,new ns(S,v))}en.Ja="timingevent";function bi(v,S){q.call(this,en.Ja,v),this.size=S}g(bi,q);function pr(v,S){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},S)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function ee(v,S,P,B,re,ue){v.info(function(){if(v.g)if(ue){var Ne="",Ze=ue.split("&");for(let wt=0;wt<Ze.length;wt++){var gn=Ze[wt].split("=");if(gn.length>1){const Yt=gn[0];gn=gn[1];const Ei=Yt.split("_");Ne=Ei.length>=2&&Ei[1]=="type"?Ne+(Yt+"="+gn+"&"):Ne+(Yt+"=redacted&")}}}else Ne=null;else Ne=ue;return"XMLHTTP REQ ("+B+") [attempt "+re+"]: "+S+`
`+P+`
`+Ne})}function Ue(v,S,P,B,re,ue,Ne){v.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+re+"]: "+S+`
`+P+`
`+ue+" "+Ne})}function vt(v,S,P,B){v.info(function(){return"XMLHTTP TEXT ("+S+"): "+Nl(v,P)+(B?" "+B:"")})}function Fn(v,S){v.info(function(){return"TIMEOUT: "+S})}ei.prototype.info=function(){};function Nl(v,S){if(!v.g)return S;if(!S)return null;try{const ue=JSON.parse(S);if(ue){for(v=0;v<ue.length;v++)if(Array.isArray(ue[v])){var P=ue[v];if(!(P.length<2)){var B=P[1];if(Array.isArray(B)&&!(B.length<1)){var re=B[0];if(re!="noop"&&re!="stop"&&re!="close")for(let Ne=1;Ne<B.length;Ne++)B[Ne]=""}}}}return Lr(ue)}catch{return S}}var _i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Md={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zd;function Sl(){}g(Sl,Hi),Sl.prototype.g=function(){return new XMLHttpRequest},zd=new Sl;function rs(v){return encodeURIComponent(String(v))}function Sm(v){var S=1;v=v.split(":");const P=[];for(;S>0&&v.length;)P.push(v.shift()),S--;return v.length&&P.push(v.join(":")),P}function Gi(v,S,P,B){this.j=v,this.i=S,this.l=P,this.S=B||1,this.V=new Ke(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ki}function Ki(){this.i=null,this.g="",this.h=!1}var En={},Hn={};function pa(v,S,P){v.M=1,v.A=Al(Sn(S)),v.u=P,v.R=!0,Kc(v,null)}function Kc(v,S){v.F=Date.now(),ga(v),v.B=Sn(v.A);var P=v.B,B=v.S;Array.isArray(B)||(B=[String(B)]),Xc(P.i,"t",B),v.C=0,P=v.j.L,v.h=new Ki,v.g=Vm(v.j,P?S:null,!v.u),v.P>0&&(v.O=new Ve(h(v.Y,v,v.g),v.P)),S=v.V,P=v.g,B=v.ba;var re="readystatechange";Array.isArray(re)||(re&&(Vt[0]=re.toString()),re=Vt);for(let ue=0;ue<re.length;ue++){const Ne=se(P,re[ue],B||S.handleEvent,!1,S.h||S);if(!Ne)break;S.g[Ne.key]=Ne}S=v.J?F(v.J):{},v.u?(v.v||(v.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,S)):(v.v="GET",v.g.ea(v.B,v.v,null,S)),yi(),ee(v.i,v.v,v.B,v.l,v.S,v.u)}Gi.prototype.ba=function(v){v=v.target;const S=this.O;S&&Yi(v)==3?S.j():this.Y(v)},Gi.prototype.Y=function(v){try{if(v==this.g)e:{const Ze=Yi(this.g),gn=this.g.ya(),wt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||rr(this.g)))){this.K||Ze!=4||gn==7||(gn==8||wt<=0?yi(3):yi(2)),va(this);var S=this.g.ca();this.X=S;var P=T0(this);if(this.o=S==200,Ue(this.i,this.v,this.B,this.l,this.S,Ze,S),this.o){if(this.U&&!this.L){t:{if(this.g){var B,re=this.g;if((B=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(B)){var ue=B;break t}}ue=null}if(v=ue)vt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ya(this,v);else{this.o=!1,this.m=3,on(12),ti(this),xi(this);break e}}if(this.R){v=!0;let Yt;for(;!this.K&&this.C<P.length;)if(Yt=Tm(this,P),Yt==Hn){Ze==4&&(this.m=4,on(14),v=!1),vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==En){this.m=4,on(15),vt(this.i,this.l,P,"[Invalid Chunk]"),v=!1;break}else vt(this.i,this.l,Yt,null),ya(this,Yt);if(Am(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||P.length!=0||this.h.h||(this.m=1,on(16),v=!1),this.o=this.o&&v,!v)vt(this.i,this.l,P,"[Invalid Chunked Response]"),ti(this),xi(this);else if(P.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Zd(Ne),Ne.P=!0,on(11))}}else vt(this.i,this.l,P,null),ya(this,P);Ze==4&&ti(this),this.o&&!this.K&&(Ze==4?zm(this.j,this):(this.o=!1,ga(this)))}else as(this.g),S==400&&P.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),ti(this),xi(this)}}}catch{}};function T0(v){if(!Am(v))return v.g.la();const S=rr(v.g);if(S==="")return"";let P="";const B=S.length,re=Yi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return ti(v),xi(v),"";v.h.i=new c.TextDecoder}for(let ue=0;ue<B;ue++)v.h.h=!0,P+=v.h.i.decode(S[ue],{stream:!(re&&ue==B-1)});return S.length=0,v.h.g+=P,v.C=0,v.h.g}function Am(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Tm(v,S){var P=v.C,B=S.indexOf(`
`,P);return B==-1?Hn:(P=Number(S.substring(P,B)),isNaN(P)?En:(B+=1,B+P>S.length?Hn:(S=S.slice(B,B+P),v.C=B+P,S)))}Gi.prototype.cancel=function(){this.K=!0,ti(this)};function ga(v){v.T=Date.now()+v.H,Qc(v,v.H)}function Qc(v,S){if(v.D!=null)throw Error("WatchDog timer not null");v.D=pr(h(v.aa,v),S)}function va(v){v.D&&(c.clearTimeout(v.D),v.D=null)}Gi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(Fn(this.i,this.B),this.M!=2&&(yi(),on(17)),ti(this),this.m=2,xi(this)):Qc(this,this.T-v)};function xi(v){v.j.I==0||v.K||zm(v.j,v)}function ti(v){va(v);var S=v.O;S&&typeof S.dispose=="function"&&S.dispose(),v.O=null,zn(v.V),v.g&&(S=v.g,v.g=null,S.abort(),S.dispose())}function ya(v,S){try{var P=v.j;if(P.I!=0&&(P.g==v||_a(P.h,v))){if(!v.L&&_a(P.h,v)&&P.I==3){try{var B=P.Ba.g.parse(S)}catch{B=null}if(Array.isArray(B)&&B.length==3){var re=B;if(re[0]==0){e:if(!P.v){if(P.g)if(P.g.F+3e3<v.F)nu(P),po(P);else break e;kl(P),on(18)}}else P.xa=re[1],0<P.xa-P.K&&re[2]<37500&&P.F&&P.A==0&&!P.C&&(P.C=pr(h(P.Va,P),6e3));ba(P.h)<=1&&P.ta&&(P.ta=void 0)}else Sa(P,11)}else if((v.L||P.g==v)&&nu(P),!M(S))for(re=P.Ba.g.parse(S),S=0;S<re.length;S++){let wt=re[S];const Yt=wt[0];if(!(Yt<=P.K))if(P.K=Yt,wt=wt[1],P.I==2)if(wt[0]=="c"){P.M=wt[1],P.ba=wt[2];const Ei=wt[3];Ei!=null&&(P.ka=Ei,P.j.info("VER="+P.ka));const Aa=wt[4];Aa!=null&&(P.za=Aa,P.j.info("SVER="+P.za));const Xi=wt[5];Xi!=null&&typeof Xi=="number"&&Xi>0&&(B=1.5*Xi,P.O=B,P.j.info("backChannelRequestTimeoutMs_="+B)),B=P;const Zi=v.g;if(Zi){const Dl=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dl){var ue=B.h;ue.g||Dl.indexOf("spdy")==-1&&Dl.indexOf("quic")==-1&&Dl.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Ud(ue,ue.h),ue.h=null))}if(B.G){const ru=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;ru&&(B.wa=ru,St(B.J,B.G,ru))}}P.I=3,P.l&&P.l.ra(),P.aa&&(P.T=Date.now()-v.F,P.j.info("Handshake RTT: "+P.T+"ms")),B=P;var Ne=v;if(B.na=Um(B,B.L?B.ba:null,B.W),Ne.L){Vd(B.h,Ne);var Ze=Ne,gn=B.O;gn&&(Ze.H=gn),Ze.D&&(va(Ze),ga(Ze)),B.g=Ne}else Dm(B);P.i.length>0&&Na(P)}else wt[0]!="stop"&&wt[0]!="close"||Sa(P,7);else P.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Sa(P,7):Yd(P):wt[0]!="noop"&&P.l&&P.l.qa(wt),P.A=0)}}yi(4)}catch{}}var Nn=class{constructor(v,S){this.g=v,this.map=S}};function Ld(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qd(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ba(v){return v.h?1:v.g?v.g.size:0}function _a(v,S){return v.h?v.h==S:v.g?v.g.has(S):!1}function Ud(v,S){v.g?v.g.add(S):v.h=S}function Vd(v,S){v.h&&v.h==S?v.h=null:v.g&&v.g.has(S)&&v.g.delete(S)}Ld.prototype.cancel=function(){if(this.i=Bd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Bd(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let S=v.i;for(const P of v.g.values())S=S.concat(P.G);return S}return _(v.i)}var Cm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wc(v,S){if(v){v=v.split("&");for(let P=0;P<v.length;P++){const B=v[P].indexOf("=");let re,ue=null;B>=0?(re=v[P].substring(0,B),ue=v[P].substring(B+1)):re=v[P],S(re,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function ni(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;v instanceof ni?(this.l=v.l,Gn(this,v.j),this.o=v.o,this.g=v.g,oo(this,v.u),this.h=v.h,$d(this,Rm(v.i)),this.m=v.m):v&&(S=String(v).match(Cm))?(this.l=!1,Gn(this,S[1]||"",!0),this.o=xa(S[2]||""),this.g=xa(S[3]||"",!0),oo(this,S[4]),this.h=xa(S[5]||"",!0),$d(this,S[6]||"",!0),this.m=xa(S[7]||"")):(this.l=!1,this.i=new co(null,this.l))}ni.prototype.toString=function(){const v=[];var S=this.j;S&&v.push(Tl(S,Yc,!0),":");var P=this.g;return(P||S=="file")&&(v.push("//"),(S=this.o)&&v.push(Tl(S,Yc,!0),"@"),v.push(rs(P).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.u,P!=null&&v.push(":",String(P))),(P=this.h)&&(this.g&&P.charAt(0)!="/"&&v.push("/"),v.push(Tl(P,P.charAt(0)=="/"?Fd:Om,!0))),(P=this.i.toString())&&v.push("?",P),(P=this.m)&&v.push("#",Tl(P,Pm)),v.join("")},ni.prototype.resolve=function(v){const S=Sn(this);let P=!!v.j;P?Gn(S,v.j):P=!!v.o,P?S.o=v.o:P=!!v.g,P?S.g=v.g:P=v.u!=null;var B=v.h;if(P)oo(S,v.u);else if(P=!!v.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var re=S.h.lastIndexOf("/");re!=-1&&(B=S.h.slice(0,re+1)+B)}if(re=B,re==".."||re==".")B="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){B=re.lastIndexOf("/",0)==0,re=re.split("/");const ue=[];for(let Ne=0;Ne<re.length;){const Ze=re[Ne++];Ze=="."?B&&Ne==re.length&&ue.push(""):Ze==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),B&&Ne==re.length&&ue.push("")):(ue.push(Ze),B=!0)}B=ue.join("/")}else B=re}return P?S.h=B:P=v.i.toString()!=="",P?$d(S,Rm(v.i)):P=!!v.m,P&&(S.m=v.m),S};function Sn(v){return new ni(v)}function Gn(v,S,P){v.j=P?xa(S,!0):S,v.j&&(v.j=v.j.replace(/:$/,""))}function oo(v,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);v.u=S}else v.u=null}function $d(v,S,P){S instanceof co?(v.i=S,Zc(v.i,v.l)):(P||(S=Tl(S,lo)),v.i=new co(S,v.l))}function St(v,S,P){v.i.set(S,P)}function Al(v){return St(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function xa(v,S){return v?S?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Tl(v,S,P){return typeof v=="string"?(v=encodeURI(v).replace(S,Vr),P&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Vr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Yc=/[#\/\?@]/g,Om=/[#\?:]/g,Fd=/[#\?]/g,lo=/[#\?@]/g,Pm=/#/g;function co(v,S){this.h=this.g=null,this.i=v||null,this.j=!!S}function Br(v){v.g||(v.g=new Map,v.h=0,v.i&&Wc(v.i,function(S,P){v.add(decodeURIComponent(S.replace(/\+/g," ")),P)}))}t=co.prototype,t.add=function(v,S){Br(this),this.i=null,v=uo(this,v);let P=this.g.get(v);return P||this.g.set(v,P=[]),P.push(S),this.h+=1,this};function Im(v,S){Br(v),S=uo(v,S),v.g.has(S)&&(v.i=null,v.h-=v.g.get(S).length,v.g.delete(S))}function Hd(v,S){return Br(v),S=uo(v,S),v.g.has(S)}t.forEach=function(v,S){Br(this),this.g.forEach(function(P,B){P.forEach(function(re){v.call(S,re,B,this)},this)},this)};function Gd(v,S){Br(v);let P=[];if(typeof S=="string")Hd(v,S)&&(P=P.concat(v.g.get(uo(v,S))));else for(v=Array.from(v.g.values()),S=0;S<v.length;S++)P=P.concat(v[S]);return P}t.set=function(v,S){return Br(this),this.i=null,v=uo(this,v),Hd(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[S]),this.h+=1,this},t.get=function(v,S){return v?(v=Gd(this,v),v.length>0?String(v[0]):S):S};function Xc(v,S,P){Im(v,S),P.length>0&&(v.i=null,v.g.set(uo(v,S),_(P)),v.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],S=Array.from(this.g.keys());for(let B=0;B<S.length;B++){var P=S[B];const re=rs(P);P=Gd(this,P);for(let ue=0;ue<P.length;ue++){let Ne=re;P[ue]!==""&&(Ne+="="+rs(P[ue])),v.push(Ne)}}return this.i=v.join("&")};function Rm(v){const S=new co;return S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),S}function uo(v,S){return S=String(S),v.j&&(S=S.toLowerCase()),S}function Zc(v,S){S&&!v.j&&(Br(v),v.i=null,v.g.forEach(function(P,B){const re=B.toLowerCase();B!=re&&(Im(this,B),Xc(this,re,P))},v)),v.j=S}function Qi(v,S){const P=new ei;if(c.Image){const B=new Image;B.onload=p(wi,P,"TestLoadImage: loaded",!0,S,B),B.onerror=p(wi,P,"TestLoadImage: error",!1,S,B),B.onabort=p(wi,P,"TestLoadImage: abort",!1,S,B),B.ontimeout=p(wi,P,"TestLoadImage: timeout",!1,S,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=v}else S(!1)}function Kd(v,S){const P=new ei,B=new AbortController,re=setTimeout(()=>{B.abort(),wi(P,"TestPingServer: timeout",!1,S)},1e4);fetch(v,{signal:B.signal}).then(ue=>{clearTimeout(re),ue.ok?wi(P,"TestPingServer: ok",!0,S):wi(P,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(re),wi(P,"TestPingServer: error",!1,S)})}function wi(v,S,P,B,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),B(P)}catch{}}function fo(){this.g=new qr}function wa(v){this.i=v.Sb||null,this.h=v.ab||!1}g(wa,Hi),wa.prototype.g=function(){return new Cl(this.i,this.h)};function Cl(v,S){Pt.call(this),this.H=v,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Cl,Pt),t=Cl.prototype,t.open=function(v,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=S,this.readyState=1,Wi(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(S.body=v),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ho(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var S=v.value?v.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!v.done}))&&(this.response=this.responseText+=S)}v.done?ho(this):Wi(this),this.readyState==3&&Jc(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,ho(this))},t.Na=function(v){this.g&&(this.response=v,ho(this))},t.ga=function(){this.g&&ho(this)};function ho(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Wi(v)}t.setRequestHeader=function(v,S){this.A.append(v,S)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],S=this.h.entries();for(var P=S.next();!P.done;)P=P.value,v.push(P[0]+": "+P[1]),P=S.next();return v.join(`\r
`)};function Wi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function ji(v){let S="";return je(v,function(P,B){S+=B,S+=":",S+=P,S+=`\r
`}),S}function Ol(v,S,P){e:{for(B in P){var B=!1;break e}B=!0}B||(P=ji(P),typeof v=="string"?P!=null&&rs(P):St(v,S,P))}function Rt(v){Pt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Rt,Pt);var ja=/^https?$/i,Qd=["POST","PUT"];t=Rt.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,S,P,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);S=S?S.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zd.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(v),!0),this.B=!1}catch(ue){Pl(this,ue);return}if(v=P||"",P=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var re in B)P.set(re,B[re]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ue of B.keys())P.set(ue,B.get(ue));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(P.keys()).find(ue=>ue.toLowerCase()=="content-type"),re=c.FormData&&v instanceof c.FormData,!(Array.prototype.indexOf.call(Qd,S,void 0)>=0)||B||re||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ne]of P)this.g.setRequestHeader(ue,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ue){Pl(this,ue)}};function Pl(v,S){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=S,v.o=5,Wd(v),is(v)}function Wd(v){v.A||(v.A=!0,It(v,"complete"),It(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,It(this,"complete"),It(this,"abort"),is(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),Rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Il(this):this.Xa())},t.Xa=function(){Il(this)};function Il(v){if(v.h&&typeof s<"u"){if(v.v&&Yi(v)==4)setTimeout(v.Ca.bind(v),0);else if(It(v,"readystatechange"),Yi(v)==4){v.h=!1;try{const ue=v.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var P;if(!(P=S)){var B;if(B=ue===0){let Ne=String(v.D).match(Cm)[1]||null;!Ne&&c.self&&c.self.location&&(Ne=c.self.location.protocol.slice(0,-1)),B=!ja.test(Ne?Ne.toLowerCase():"")}P=B}if(P)It(v,"complete"),It(v,"success");else{v.o=6;try{var re=Yi(v)>2?v.g.statusText:""}catch{re=""}v.l=re+" ["+v.ca()+"]",Wd(v)}}finally{is(v)}}}}function is(v,S){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const P=v.g;v.g=null,S||It(v,"ready");try{P.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yi(v){return v.g?v.g.readyState:0}t.ca=function(){try{return Yi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var S=this.g.responseText;return v&&S.indexOf(v)==0&&(S=S.substring(v.length)),ao(S)}};function rr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function as(v){const S={};v=(v.g&&Yi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<v.length;B++){if(M(v[B]))continue;var P=Sm(v[B]);const re=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const ue=S[re]||[];S[re]=ue,ue.push(P)}Y(S,function(B){return B.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ea(v,S,P){return P&&P.internalChannelParams&&P.internalChannelParams[v]||S}function mo(v){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ea("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ea("baseRetryDelayMs",5e3,v),this.Za=Ea("retryDelaySeedMs",1e4,v),this.Ta=Ea("forwardChannelMaxRetries",2,v),this.va=Ea("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Ld(v&&v.concurrentRequestLimit),this.Ba=new fo,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=mo.prototype,t.ka=8,t.I=1,t.connect=function(v,S,P,B){on(0),this.W=v,this.H=S||{},P&&B!==void 0&&(this.H.OSID=P,this.H.OAID=B),this.F=this.X,this.J=Um(this,null,this.W),Na(this)};function Yd(v){if(eu(v),v.I==3){var S=v.V++,P=Sn(v.J);if(St(P,"SID",v.M),St(P,"RID",S),St(P,"TYPE","terminate"),Rl(v,P),S=new Gi(v,v.j,S),S.M=2,S.A=Al(Sn(P)),P=!1,c.navigator&&c.navigator.sendBeacon)try{P=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!P&&c.Image&&(new Image().src=S.A,P=!0),P||(S.g=Vm(S.j,null),S.g.ea(S.A)),S.F=Date.now(),ga(S)}qm(v)}function po(v){v.g&&(Zd(v),v.g.cancel(),v.g=null)}function eu(v){po(v),v.v&&(c.clearTimeout(v.v),v.v=null),nu(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&c.clearTimeout(v.m),v.m=null)}function Na(v){if(!qd(v.h)&&!v.m){v.m=!0;var S=v.Ea;V||I(),$||(V(),$=!0),D.add(S,v),v.D=0}}function tu(v,S){return ba(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=S.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=pr(h(v.Ea,v,S),Lm(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const re=new Gi(this,this.j,v);let ue=this.o;if(this.U&&(ue?(ue=F(ue),ye(ue,this.U)):ue=this.U),this.u!==null||this.R||(re.J=ue,ue=null),this.S)e:{for(var S=0,P=0;P<this.i.length;P++){t:{var B=this.i[P];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(S+=B,S>4096){S=P;break e}if(S===4096||P===this.i.length-1){S=P+1;break e}}S=1e3}else S=1e3;S=km(this,re,S),P=Sn(this.J),St(P,"RID",v),St(P,"CVER",22),this.G&&St(P,"X-HTTP-Session-Id",this.G),Rl(this,P),ue&&(this.R?S="headers="+rs(ji(ue))+"&"+S:this.u&&Ol(P,this.u,ue)),Ud(this.h,re),this.Ra&&St(P,"TYPE","init"),this.S?(St(P,"$req",S),St(P,"SID","null"),re.U=!0,pa(re,P,null)):pa(re,P,S),this.I=2}}else this.I==3&&(v?Xd(this,v):this.i.length==0||qd(this.h)||Xd(this))};function Xd(v,S){var P;S?P=S.l:P=v.V++;const B=Sn(v.J);St(B,"SID",v.M),St(B,"RID",P),St(B,"AID",v.K),Rl(v,B),v.u&&v.o&&Ol(B,v.u,v.o),P=new Gi(v,v.j,P,v.D+1),v.u===null&&(P.J=v.o),S&&(v.i=S.G.concat(v.i)),S=km(v,P,1e3),P.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Ud(v.h,P),pa(P,B,S)}function Rl(v,S){v.H&&je(v.H,function(P,B){St(S,B,P)}),v.l&&je({},function(P,B){St(S,B,P)})}function km(v,S,P){P=Math.min(v.i.length,P);const B=v.l?h(v.l.Ka,v.l,v):null;e:{var re=v.i;let Ze=-1;for(;;){const gn=["count="+P];Ze==-1?P>0?(Ze=re[0].g,gn.push("ofs="+Ze)):Ze=0:gn.push("ofs="+Ze);let wt=!0;for(let Yt=0;Yt<P;Yt++){var ue=re[Yt].g;const Ei=re[Yt].map;if(ue-=Ze,ue<0)Ze=Math.max(0,re[Yt].g-100),wt=!1;else try{ue="req"+ue+"_"||"";try{var Ne=Ei instanceof Map?Ei:Object.entries(Ei);for(const[Aa,Xi]of Ne){let Zi=Xi;u(Xi)&&(Zi=Lr(Xi)),gn.push(ue+Aa+"="+encodeURIComponent(Zi))}}catch(Aa){throw gn.push(ue+"type="+encodeURIComponent("_badmap")),Aa}}catch{B&&B(Ei)}}if(wt){Ne=gn.join("&");break e}}Ne=void 0}return v=v.i.splice(0,P),S.G=v,Ne}function Dm(v){if(!v.g&&!v.v){v.Y=1;var S=v.Da;V||I(),$||(V(),$=!0),D.add(S,v),v.A=0}}function kl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=pr(h(v.Da,v),Lm(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,Mm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=pr(h(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),po(this),Mm(this))};function Zd(v){v.B!=null&&(c.clearTimeout(v.B),v.B=null)}function Mm(v){v.g=new Gi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var S=Sn(v.na);St(S,"RID","rpc"),St(S,"SID",v.M),St(S,"AID",v.K),St(S,"CI",v.F?"0":"1"),!v.F&&v.ia&&St(S,"TO",v.ia),St(S,"TYPE","xmlhttp"),Rl(v,S),v.u&&v.o&&Ol(S,v.u,v.o),v.O&&(v.g.H=v.O);var P=v.g;v=v.ba,P.M=1,P.A=Al(Sn(S)),P.u=null,P.R=!0,Kc(P,v)}t.Va=function(){this.C!=null&&(this.C=null,po(this),kl(this),on(19))};function nu(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function zm(v,S){var P=null;if(v.g==S){nu(v),Zd(v),v.g=null;var B=2}else if(_a(v.h,S))P=S.G,Vd(v.h,S),B=1;else return;if(v.I!=0){if(S.o)if(B==1){P=S.u?S.u.length:0,S=Date.now()-S.F;var re=v.D;B=so(),It(B,new bi(B,P)),Na(v)}else Dm(v);else if(re=S.m,re==3||re==0&&S.X>0||!(B==1&&tu(v,S)||B==2&&kl(v)))switch(P&&P.length>0&&(S=v.h,S.i=S.i.concat(P)),re){case 1:Sa(v,5);break;case 4:Sa(v,10);break;case 3:Sa(v,6);break;default:Sa(v,2)}}}function Lm(v,S){let P=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(P*=2),P*S}function Sa(v,S){if(v.j.info("Error code "+S),S==2){var P=h(v.bb,v),B=v.Ua;const re=!B;B=new ni(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gn(B,"https"),Al(B),re?Qi(B.toString(),P):Kd(B.toString(),P)}else on(2);v.I=0,v.l&&v.l.pa(S),qm(v),eu(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function qm(v){if(v.I=0,v.ja=[],v.l){const S=Bd(v.h);(S.length!=0||v.i.length!=0)&&(E(v.ja,S),E(v.ja,v.i),v.h.i.length=0,_(v.i),v.i.length=0),v.l.oa()}}function Um(v,S,P){var B=P instanceof ni?Sn(P):new ni(P);if(B.g!="")S&&(B.g=S+"."+B.g),oo(B,B.u);else{var re=c.location;B=re.protocol,S=S?S+"."+re.hostname:re.hostname,re=+re.port;const ue=new ni(null);B&&Gn(ue,B),S&&(ue.g=S),re&&oo(ue,re),P&&(ue.h=P),B=ue}return P=v.G,S=v.wa,P&&S&&St(B,P,S),St(B,"VER",v.ka),Rl(v,B),B}function Vm(v,S,P){if(S&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=v.Aa&&!v.ma?new Rt(new wa({ab:P})):new Rt(v.ma),S.Fa(v.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bm(){}t=Bm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function go(){}go.prototype.g=function(v,S){return new Nr(v,S)};function Nr(v,S){Pt.call(this),this.g=new mo(S),this.l=v,this.h=S&&S.messageUrlParams||null,v=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(v?v["X-WebChannel-Content-Type"]=S.messageContentType:v={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(v?v["X-WebChannel-Client-Profile"]=S.sa:v={"X-WebChannel-Client-Profile":S.sa}),this.g.U=v,(v=S&&S.Qb)&&!M(v)&&(this.g.u=v),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!M(S)&&(this.g.G=S,v=this.h,v!==null&&S in v&&(v=this.h,S in v&&delete v[S])),this.j=new ss(this)}g(Nr,Pt),Nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nr.prototype.close=function(){Yd(this.g)},Nr.prototype.o=function(v){var S=this.g;if(typeof v=="string"){var P={};P.__data__=v,v=P}else this.v&&(P={},P.__data__=Lr(v),v=P);S.i.push(new Nn(S.Ya++,v)),S.I==3&&Na(S)},Nr.prototype.N=function(){this.g.l=null,delete this.j,Yd(this.g),delete this.g,Nr.Z.N.call(this)};function $m(v){Nt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var S=v.__sm__;if(S){e:{for(const P in S){v=P;break e}v=void 0}(this.i=v)&&(v=this.i,S=S!==null&&v in S?S[v]:void 0),this.data=S}else this.data=v}g($m,Nt);function Fm(){Ur.call(this),this.status=1}g(Fm,Ur);function ss(v){this.g=v}g(ss,Bm),ss.prototype.ra=function(){It(this.g,"a")},ss.prototype.qa=function(v){It(this.g,new $m(v))},ss.prototype.pa=function(v){It(this.g,new Fm)},ss.prototype.oa=function(){It(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,Nr.prototype.send=Nr.prototype.o,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,tz=function(){return new go},ez=function(){return so()},JM=en,F1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,Tg=_i,Md.COMPLETE="complete",ZM=Md,Hc.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Zf=Hc,Rt.prototype.listenOnce=Rt.prototype.K,Rt.prototype.getLastError=Rt.prototype.Ha,Rt.prototype.getLastErrorCode=Rt.prototype.ya,Rt.prototype.getStatus=Rt.prototype.ca,Rt.prototype.getResponseJson=Rt.prototype.La,Rt.prototype.getResponseText=Rt.prototype.la,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Fa,XM=Rt}).apply(typeof Wp<"u"?Wp:typeof self<"u"?self:typeof window<"u"?window:{});let br=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");let xd="12.8.0";function vF(t){xd=t}const _c=new wj("@firebase/firestore");function zu(){return _c.logLevel}function Te(t,...e){if(_c.logLevel<=ut.DEBUG){const n=e.map(Rj);_c.debug(`Firestore (${xd}): ${t}`,...n)}}function Ls(t,...e){if(_c.logLevel<=ut.ERROR){const n=e.map(Rj);_c.error(`Firestore (${xd}): ${t}`,...n)}}function td(t,...e){if(_c.logLevel<=ut.WARN){const n=e.map(Rj);_c.warn(`Firestore (${xd}): ${t}`,...n)}}function Rj(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,nz(t,r,n)}function nz(t,e,n){let r=`FIRESTORE (${xd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ls(r),new Error(r)}function Et(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||nz(e,i,r)}function Ye(t,e){return t}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class rz{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(br.UNAUTHENTICATED)))}shutdown(){}}class bF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class _F{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Et(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let s=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rs,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const f=s;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},u=f=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rs)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string",31837,{l:r}),new rz(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class xF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class wF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new xF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(br.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class N2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ui(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Et(this.o===void 0,3512);const r=s=>{s.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.m;return this.m=s.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new N2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new N2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function EF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class kj{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=EF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function dt(t,e){return t<e?-1:t>e?1:0}function H1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return M_(i)===M_(s)?dt(i,s):M_(i)?1:-1}return dt(t.length,e.length)}const NF=55296,SF=57343;function M_(t){const e=t.charCodeAt(0);return e>=NF&&e<=SF}function nd(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const S2="__name__";class Ma{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ma.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ma?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ma.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return dt(e.length,n.length)}static compareSegments(e,n){const r=Ma.isNumericId(e),i=Ma.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ma.extractNumericId(e).compare(Ma.extractNumericId(n)):H1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nl.fromString(e.substring(4,e.length-2))}}class Gt extends Ma{construct(e,n,r){return new Gt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Gt(n)}static emptyPath(){return new Gt([])}}const AF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends Ma{construct(e,n,r){return new dr(e,n,r)}static isValidIdentifier(e){return AF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===S2}static keyField(){return new dr([S2])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ae(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Ae(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ae(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(s(),i++)}if(s(),c)throw new Ae(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(n)}static emptyPath(){return new dr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Gt.fromString(e))}static fromName(e){return new qe(Gt.fromString(e).popFirst(5))}static empty(){return new qe(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Gt(e.slice()))}}function iz(t,e,n){if(!n)throw new Ae(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TF(t,e,n,r){if(e===!0&&r===!0)throw new Ae(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function A2(t){if(!qe.isDocumentKey(t))throw new Ae(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function T2(t){if(qe.isDocumentKey(t))throw new Ae(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function az(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function my(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ge(12329,{type:typeof t})}function Or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=my(t);throw new Ae(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function CF(t,e){if(e<=0)throw new Ae(ge.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function kn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Xh(t,e){if(!az(t))throw new Ae(ge.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&c!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ae(ge.INVALID_ARGUMENT,n);return!0}const C2=-62135596800,O2=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*O2);return new nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<C2)throw new Ae(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/O2}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xh(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-C2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:kn("string",nt._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new nt(0,0))}static max(){return new Qe(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const bh=-1;function OF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Qe.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new ol(i,qe.empty(),e)}function PF(t){return new ol(t.readTime,t.key,bh)}class ol{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ol(Qe.min(),qe.empty(),bh)}static max(){return new ol(Qe.max(),qe.empty(),bh)}}function IF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=qe.comparator(t.documentKey,e.documentKey),n!==0?n:dt(t.largestBatchId,e.largestBatchId))}const RF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function wd(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==RF)throw t;Te("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.reject(n)}static resolve(e){return new xe(((n,r)=>{n(e)}))}static reject(e){return new xe(((n,r)=>{r(e)}))}static waitFor(e){return new xe(((n,r)=>{let i=0,s=0,c=!1;e.forEach((u=>{++i,u.next((()=>{++s,c&&s===i&&n()}),(f=>r(f)))})),c=!0,s===i&&n()}))}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next((i=>i?xe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new xe(((r,i)=>{const s=e.length,c=new Array(s);let u=0;for(let f=0;f<s;f++){const h=f;n(e[h]).next((p=>{c[h]=p,++u,u===s&&r(c)}),(p=>i(p)))}}))}static doWhile(e,n){return new xe(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function DF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jd(t){return t.name==="IndexedDbTransactionError"}class py{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}py.ce=-1;const Dj=-1;function gy(t){return t==null}function Xg(t){return t===0&&1/t==-1/0}function MF(t){return typeof t=="number"&&Number.isInteger(t)&&!Xg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const sz="";function zF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=P2(e)),e=LF(t.get(n),e);return P2(e)}function LF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case sz:n+="";break;default:n+=s}}return n}function P2(t){return t+sz+""}function I2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _l(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class rn{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new rn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yp(this.root,e,this.comparator,!0)}}class Yp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ur(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new R2(this.data.getIterator())}getIteratorFrom(e){return new R2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Un(this.comparator);return n.data=e,n}}class R2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fi{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new fi([])}unionWith(e){let n=new Un(dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new fi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nd(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class lz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new lz("Invalid base64 string: "+s):s}})(e);return new hr(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let c=0;c<i.length;++c)s+=String.fromCharCode(i[c]);return s})(e);return new hr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hr.EMPTY_BYTE_STRING=new hr("");const qF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ll(t){if(Et(!!t,39018),typeof t=="string"){let e=0;const n=qF.exec(t);if(Et(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(t.seconds),nanos:_n(t.nanos)}}function _n(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cl(t){return typeof t=="string"?hr.fromBase64String(t):hr.fromUint8Array(t)}const cz="server_timestamp",uz="__type__",dz="__previous_value__",fz="__local_write_time__";function Mj(t){return(t?.mapValue?.fields||{})[uz]?.stringValue===cz}function vy(t){const e=t.mapValue.fields[dz];return Mj(e)?vy(e):e}function _h(t){const e=ll(t.mapValue.fields[fz].timestampValue);return new nt(e.seconds,e.nanos)}class UF{constructor(e,n,r,i,s,c,u,f,h,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p,this.apiKey=g}}const Zg="(default)";class xh{constructor(e,n){this.projectId=e,this.database=n||Zg}static empty(){return new xh("","")}get isDefaultDatabase(){return this.database===Zg}isEqual(e){return e instanceof xh&&e.projectId===this.projectId&&e.database===this.database}}function VF(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ae(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xh(t.options.projectId,e)}const hz="__type__",BF="__max__",Xp={mapValue:{}},mz="__vector__",Jg="value";function ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mj(t)?4:FF(t)?9007199254740991:$F(t)?10:11:Ge(28295,{value:t})}function Qa(t,e){if(t===e)return!0;const n=ul(t);if(n!==ul(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _h(t).isEqual(_h(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const c=ll(i.timestampValue),u=ll(s.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return cl(i.bytesValue).isEqual(cl(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return _n(i.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return _n(i.integerValue)===_n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const c=_n(i.doubleValue),u=_n(s.doubleValue);return c===u?Xg(c)===Xg(u):isNaN(c)&&isNaN(u)}return!1})(t,e);case 9:return nd(t.arrayValue.values||[],e.arrayValue.values||[],Qa);case 10:case 11:return(function(i,s){const c=i.mapValue.fields||{},u=s.mapValue.fields||{};if(I2(c)!==I2(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!Qa(c[f],u[f])))return!1;return!0})(t,e);default:return Ge(52216,{left:t})}}function wh(t,e){return(t.values||[]).find((n=>Qa(n,e)))!==void 0}function rd(t,e){if(t===e)return 0;const n=ul(t),r=ul(e);if(n!==r)return dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(t.booleanValue,e.booleanValue);case 2:return(function(s,c){const u=_n(s.integerValue||s.doubleValue),f=_n(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(t,e);case 3:return k2(t.timestampValue,e.timestampValue);case 4:return k2(_h(t),_h(e));case 5:return H1(t.stringValue,e.stringValue);case 6:return(function(s,c){const u=cl(s),f=cl(c);return u.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(s,c){const u=s.split("/"),f=c.split("/");for(let h=0;h<u.length&&h<f.length;h++){const p=dt(u[h],f[h]);if(p!==0)return p}return dt(u.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,c){const u=dt(_n(s.latitude),_n(c.latitude));return u!==0?u:dt(_n(s.longitude),_n(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return D2(t.arrayValue,e.arrayValue);case 10:return(function(s,c){const u=s.fields||{},f=c.fields||{},h=u[Jg]?.arrayValue,p=f[Jg]?.arrayValue,g=dt(h?.values?.length||0,p?.values?.length||0);return g!==0?g:D2(h,p)})(t.mapValue,e.mapValue);case 11:return(function(s,c){if(s===Xp.mapValue&&c===Xp.mapValue)return 0;if(s===Xp.mapValue)return 1;if(c===Xp.mapValue)return-1;const u=s.fields||{},f=Object.keys(u),h=c.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let g=0;g<f.length&&g<p.length;++g){const y=H1(f[g],p[g]);if(y!==0)return y;const _=rd(u[f[g]],h[p[g]]);if(_!==0)return _}return dt(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Ge(23264,{he:n})}}function k2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return dt(t,e);const n=ll(t),r=ll(e),i=dt(n.seconds,r.seconds);return i!==0?i:dt(n.nanos,r.nanos)}function D2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=rd(n[i],r[i]);if(s)return s}return dt(n.length,r.length)}function id(t){return G1(t)}function G1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ll(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return cl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return qe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=G1(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const c of r)s?s=!1:i+=",",i+=`${c}:${G1(n.fields[c])}`;return i+"}"})(t.mapValue):Ge(61005,{value:t})}function Cg(t){switch(ul(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vy(t);return e?16+Cg(e):16;case 5:return 2*t.stringValue.length;case 6:return cl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Cg(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return _l(r.fields,((s,c)=>{i+=s.length+Cg(c)})),i})(t.mapValue);default:throw Ge(13486,{value:t})}}function M2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function K1(t){return!!t&&"integerValue"in t}function zj(t){return!!t&&"arrayValue"in t}function z2(t){return!!t&&"nullValue"in t}function L2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Og(t){return!!t&&"mapValue"in t}function $F(t){return(t?.mapValue?.fields||{})[hz]?.stringValue===mz}function lh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _l(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=lh(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lh(t.arrayValue.values[n]);return e}return{...t}}function FF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BF}class Wr{constructor(e){this.value=e}static empty(){return new Wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Og(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(n)}setAll(e){let n=dr.emptyPath(),r={},i=[];e.forEach(((c,u)=>{if(!n.isImmediateParentOf(u)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=u.popLast()}c?r[u.lastSegment()]=lh(c):i.push(u.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Og(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Og(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_l(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Wr(lh(this.value))}}function pz(t){const e=[];return _l(t.fields,((n,r)=>{const i=new dr([n]);if(Og(r)){const s=pz(r.mapValue).fields;if(s.length===0)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)})),new fi(e)}class _r{constructor(e,n,r,i,s,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=c,this.documentState=u}static newInvalidDocument(e){return new _r(e,0,Qe.min(),Qe.min(),Qe.min(),Wr.empty(),0)}static newFoundDocument(e,n,r,i){return new _r(e,1,n,Qe.min(),r,i,0)}static newNoDocument(e,n){return new _r(e,2,n,Qe.min(),Qe.min(),Wr.empty(),0)}static newUnknownDocument(e,n){return new _r(e,3,n,Qe.min(),Qe.min(),Wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ev{constructor(e,n){this.position=e,this.inclusive=n}}function q2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],c=t.position[i];if(s.field.isKeyField()?r=qe.comparator(qe.fromName(c.referenceValue),n.key):r=rd(c,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function U2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qa(t.position[n],e.position[n]))return!1;return!0}class jh{constructor(e,n="asc"){this.field=e,this.dir=n}}function HF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class gz{}class Rn extends gz{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new KF(e,n,r):n==="array-contains"?new YF(e,r):n==="in"?new XF(e,r):n==="not-in"?new ZF(e,r):n==="array-contains-any"?new JF(e,r):new Rn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QF(e,r):new WF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(rd(n,this.value)):n!==null&&ul(this.value)===ul(n)&&this.matchesComparison(rd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ua extends gz{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ua(e,n)}matches(e){return vz(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vz(t){return t.op==="and"}function yz(t){return GF(t)&&vz(t)}function GF(t){for(const e of t.filters)if(e instanceof ua)return!1;return!0}function Q1(t){if(t instanceof Rn)return t.field.canonicalString()+t.op.toString()+id(t.value);if(yz(t))return t.filters.map((e=>Q1(e))).join(",");{const e=t.filters.map((n=>Q1(n))).join(",");return`${t.op}(${e})`}}function bz(t,e){return t instanceof Rn?(function(r,i){return i instanceof Rn&&r.op===i.op&&r.field.isEqual(i.field)&&Qa(r.value,i.value)})(t,e):t instanceof ua?(function(r,i){return i instanceof ua&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,c,u)=>s&&bz(c,i.filters[u])),!0):!1})(t,e):void Ge(19439)}function _z(t){return t instanceof Rn?(function(n){return`${n.field.canonicalString()} ${n.op} ${id(n.value)}`})(t):t instanceof ua?(function(n){return n.op.toString()+" {"+n.getFilters().map(_z).join(" ,")+"}"})(t):"Filter"}class KF extends Rn{constructor(e,n,r){super(e,n,r),this.key=qe.fromName(r.referenceValue)}matches(e){const n=qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class QF extends Rn{constructor(e,n){super(e,"in",n),this.keys=xz("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class WF extends Rn{constructor(e,n){super(e,"not-in",n),this.keys=xz("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function xz(t,e){return(e.arrayValue?.values||[]).map((n=>qe.fromName(n.referenceValue)))}class YF extends Rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zj(n)&&wh(n.arrayValue,this.value)}}class XF extends Rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wh(this.value.arrayValue,n)}}class ZF extends Rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wh(this.value.arrayValue,n)}}class JF extends Rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zj(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>wh(this.value.arrayValue,r)))}}class eH{constructor(e,n=null,r=[],i=[],s=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=u,this.Te=null}}function V2(t,e=null,n=[],r=[],i=null,s=null,c=null){return new eH(t,e,n,r,i,s,c)}function Lj(t){const e=Ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Q1(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),gy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>id(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>id(r))).join(",")),e.Te=n}return e.Te}function qj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bz(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!U2(t.startAt,e.startAt)&&U2(t.endAt,e.endAt)}function W1(t){return qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Ed{constructor(e,n=null,r=[],i=[],s=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tH(t,e,n,r,i,s,c,u){return new Ed(t,e,n,r,i,s,c,u)}function yy(t){return new Ed(t)}function B2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nH(t){return qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wz(t){return t.collectionGroup!==null}function ch(t){const e=Ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Un(dr.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new jh(s,r))})),n.has(dr.keyField().canonicalString())||e.Ie.push(new jh(dr.keyField(),r))}return e.Ie}function Fa(t){const e=Ye(t);return e.Ee||(e.Ee=rH(e,ch(t))),e.Ee}function rH(t,e){if(t.limitType==="F")return V2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new jh(i.field,s)}));const n=t.endAt?new ev(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ev(t.startAt.position,t.startAt.inclusive):null;return V2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Y1(t,e){const n=t.filters.concat([e]);return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function iH(t,e){const n=t.explicitOrderBy.concat([e]);return new Ed(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function tv(t,e,n){return new Ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function by(t,e){return qj(Fa(t),Fa(e))&&t.limitType===e.limitType}function jz(t){return`${Lj(Fa(t))}|lt:${t.limitType}`}function Lu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>_z(i))).join(", ")}]`),gy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>id(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>id(i))).join(",")),`Target(${r})`})(Fa(t))}; limitType=${t.limitType})`}function _y(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):qe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of ch(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(c,u,f){const h=q2(c,u,f);return c.inclusive?h<=0:h<0})(r.startAt,ch(r),i)||r.endAt&&!(function(c,u,f){const h=q2(c,u,f);return c.inclusive?h>=0:h>0})(r.endAt,ch(r),i))})(t,e)}function aH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ez(t){return(e,n)=>{let r=!1;for(const i of ch(t)){const s=sH(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sH(t,e,n){const r=t.field.isKeyField()?qe.comparator(e.key,n.key):(function(s,c,u){const f=c.data.field(s),h=u.data.field(s);return f!==null&&h!==null?rd(f,h):Ge(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ge(19790,{direction:t.dir})}}class Mc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return oz(this.inner)}size(){return this.innerSize}}const oH=new rn(qe.comparator);function qs(){return oH}const Nz=new rn(qe.comparator);function Jf(...t){let e=Nz;for(const n of t)e=e.insert(n.key,n);return e}function Sz(t){let e=Nz;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ic(){return uh()}function Az(){return uh()}function uh(){return new Mc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const lH=new rn(qe.comparator),cH=new Un(qe.comparator);function ft(...t){let e=cH;for(const n of t)e=e.add(n);return e}const uH=new Un(dt);function dH(){return uH}function Uj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xg(e)?"-0":e}}function Tz(t){return{integerValue:""+t}}function Cz(t,e){return MF(e)?Tz(e):Uj(t,e)}class xy{constructor(){this._=void 0}}function fH(t,e,n){return t instanceof Eh?(function(i,s){const c={fields:{[uz]:{stringValue:cz},[fz]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Mj(s)&&(s=vy(s)),s&&(c.fields[dz]=s),{mapValue:c}})(n,e):t instanceof Nh?Pz(t,e):t instanceof Sh?Iz(t,e):(function(i,s){const c=Oz(i,s),u=$2(c)+$2(i.Ae);return K1(c)&&K1(i.Ae)?Tz(u):Uj(i.serializer,u)})(t,e)}function hH(t,e,n){return t instanceof Nh?Pz(t,e):t instanceof Sh?Iz(t,e):n}function Oz(t,e){return t instanceof Ah?(function(r){return K1(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Eh extends xy{}class Nh extends xy{constructor(e){super(),this.elements=e}}function Pz(t,e){const n=Rz(e);for(const r of t.elements)n.some((i=>Qa(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Sh extends xy{constructor(e){super(),this.elements=e}}function Iz(t,e){let n=Rz(e);for(const r of t.elements)n=n.filter((i=>!Qa(i,r)));return{arrayValue:{values:n}}}class Ah extends xy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $2(t){return _n(t.integerValue||t.doubleValue)}function Rz(t){return zj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class kz{constructor(e,n){this.field=e,this.transform=n}}function mH(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Nh&&i instanceof Nh||r instanceof Sh&&i instanceof Sh?nd(r.elements,i.elements,Qa):r instanceof Ah&&i instanceof Ah?Qa(r.Ae,i.Ae):r instanceof Eh&&i instanceof Eh})(t.transform,e.transform)}class pH{constructor(e,n){this.version=e,this.transformResults=n}}class Pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wy{}function Dz(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jy(t.key,Pr.none()):new Zh(t.key,t.data,Pr.none());{const n=t.data,r=Wr.empty();let i=new Un(dr.comparator);for(let s of e.fields)if(!i.has(s)){let c=n.field(s);c===null&&s.length>1&&(s=s.popLast(),c=n.field(s)),c===null?r.delete(s):r.set(s,c),i=i.add(s)}return new xl(t.key,r,new fi(i.toArray()),Pr.none())}}function gH(t,e,n){t instanceof Zh?(function(i,s,c){const u=i.value.clone(),f=H2(i.fieldTransforms,s,c.transformResults);u.setAll(f),s.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(t,e,n):t instanceof xl?(function(i,s,c){if(!Pg(i.precondition,s))return void s.convertToUnknownDocument(c.version);const u=H2(i.fieldTransforms,s,c.transformResults),f=s.data;f.setAll(Mz(i)),f.setAll(u),s.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(t,e,n):(function(i,s,c){s.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function dh(t,e,n,r){return t instanceof Zh?(function(s,c,u,f){if(!Pg(s.precondition,c))return u;const h=s.value.clone(),p=G2(s.fieldTransforms,f,c);return h.setAll(p),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof xl?(function(s,c,u,f){if(!Pg(s.precondition,c))return u;const h=G2(s.fieldTransforms,f,c),p=c.data;return p.setAll(Mz(s)),p.setAll(h),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(s,c,u){return Pg(s.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(t,e,n)}function vH(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Oz(r.transform,i||null);s!=null&&(n===null&&(n=Wr.empty()),n.set(r.field,s))}return n||null}function F2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nd(r,i,((s,c)=>mH(s,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zh extends wy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xl extends wy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Mz(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function H2(t,e,n){const r=new Map;Et(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],c=s.transform,u=e.data.field(s.field);r.set(s.field,hH(c,u,n[i]))}return r}function G2(t,e,n){const r=new Map;for(const i of t){const s=i.transform,c=n.data.field(i.field);r.set(i.field,fH(s,c,e))}return r}class jy extends wy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yH extends wy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bH{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gH(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Az();return this.mutations.forEach((i=>{const s=e.get(i.key),c=s.overlayedDocument;let u=this.applyToLocalView(c,s.mutatedFields);u=n.has(i.key)?null:u;const f=Dz(c,u);f!==null&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(Qe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ft())}isEqual(e){return this.batchId===e.batchId&&nd(this.mutations,e.mutations,((n,r)=>F2(n,r)))&&nd(this.baseMutations,e.baseMutations,((n,r)=>F2(n,r)))}}class Vj{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Et(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return lH})();const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new Vj(e,n,r,i)}}class _H{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class xH{constructor(e,n){this.count=e,this.unchangedNames=n}}var Pn,yt;function wH(t){switch(t){case ge.OK:return Ge(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Ge(15467,{code:t})}}function zz(t){if(t===void 0)return Ls("GRPC error has no .code"),ge.UNKNOWN;switch(t){case Pn.OK:return ge.OK;case Pn.CANCELLED:return ge.CANCELLED;case Pn.UNKNOWN:return ge.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return ge.INTERNAL;case Pn.UNAVAILABLE:return ge.UNAVAILABLE;case Pn.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Pn.NOT_FOUND:return ge.NOT_FOUND;case Pn.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Pn.ABORTED:return ge.ABORTED;case Pn.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Pn.DATA_LOSS:return ge.DATA_LOSS;default:return Ge(39323,{code:t})}}(yt=Pn||(Pn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function jH(){return new TextEncoder}const EH=new nl([4294967295,4294967295],0);function K2(t){const e=jH().encode(t),n=new YM;return n.update(e),new Uint8Array(n.digest())}function Q2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new nl([n,r],0),new nl([i,s],0)]}class Bj{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new eh(`Invalid padding: ${n}`);if(r<0)throw new eh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new eh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(nl.fromNumber(r)));return i.compare(EH)===1&&(i=new nl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=K2(e),[r,i]=Q2(n);for(let s=0;s<this.hashCount;s++){const c=this.ye(r,i,s);if(!this.we(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),c=new Bj(s,i,n);return r.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const n=K2(e),[r,i]=Q2(n);for(let s=0;s<this.hashCount;s++){const c=this.ye(r,i,s);this.be(c)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class eh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ey{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ey(Qe.min(),i,new rn(dt),qs(),ft())}}class Jh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jh(r,n,ft(),ft(),ft())}}class Ig{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Lz{constructor(e,n){this.targetId=e,this.Ce=n}}class qz{constructor(e,n,r=hr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class W2{constructor(){this.ve=0,this.Fe=Y2(),this.Me=hr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),n=ft(),r=ft();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ge(38017,{changeType:s})}})),new Jh(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Y2()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class NH{constructor(e){this.Ge=e,this.ze=new Map,this.je=qs(),this.He=Zp(),this.Je=Zp(),this.Ze=new rn(dt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(W1(s))if(r===0){const c=new qe(s.path);this.et(n,c,_r.newNoDocument(c,Qe.min()))}else Et(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const u=this.ut(e),f=u?this.ct(u,e,c):1;if(f!==0){this.it(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let c,u;try{c=cl(r).toUint8Array()}catch(f){if(f instanceof lz)return td("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new Bj(c,i,s)}catch(f){return td(f instanceof eh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,c)=>{const u=this.ot(c);if(u){if(s.current&&W1(u.target)){const f=new qe(u.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,_r.newNoDocument(f,e))}s.Be&&(n.set(c,s.ke()),s.Ke())}}));let r=ft();this.Je.forEach(((s,c)=>{let u=!0;c.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,c)=>c.setReadTime(e)));const i=new Ey(e,n,this.Ze,this.je,r);return this.je=qs(),this.He=Zp(),this.Je=Zp(),this.Ze=new rn(dt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new W2,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Un(dt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Un(dt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zp(){return new rn(qe.comparator)}function Y2(){return new rn(qe.comparator)}const SH={asc:"ASCENDING",desc:"DESCENDING"},AH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TH={and:"AND",or:"OR"};class CH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function X1(t,e){return t.useProto3Json||gy(e)?e:{value:e}}function nv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OH(t,e){return nv(t,e.toTimestamp())}function Ha(t){return Et(!!t,49232),Qe.fromTimestamp((function(n){const r=ll(n);return new nt(r.seconds,r.nanos)})(t))}function $j(t,e){return Z1(t,e).canonicalString()}function Z1(t,e){const n=(function(i){return new Gt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Vz(t){const e=Gt.fromString(t);return Et(Gz(e),10190,{key:e.toString()}),e}function J1(t,e){return $j(t.databaseId,e.path)}function z_(t,e){const n=Vz(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qe($z(n))}function Bz(t,e){return $j(t.databaseId,e)}function PH(t){const e=Vz(t);return e.length===4?Gt.emptyPath():$z(e)}function ew(t){return new Gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $z(t){return Et(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function X2(t,e,n){return{name:J1(t,e),fields:n.value.mapValue.fields}}function IH(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ge(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,p){return h.useProto3Json?(Et(p===void 0||typeof p=="string",58123),hr.fromBase64String(p||"")):(Et(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),hr.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(h){const p=h.code===void 0?ge.UNKNOWN:zz(h.code);return new Ae(p,h.message||"")})(c);n=new qz(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=z_(t,r.document.name),s=Ha(r.document.updateTime),c=r.document.createTime?Ha(r.document.createTime):Qe.min(),u=new Wr({mapValue:{fields:r.document.fields}}),f=_r.newFoundDocument(i,s,c,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Ig(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=z_(t,r.document),s=r.readTime?Ha(r.readTime):Qe.min(),c=_r.newNoDocument(i,s),u=r.removedTargetIds||[];n=new Ig([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=z_(t,r.document),s=r.removedTargetIds||[];n=new Ig([],s,i,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,c=new xH(i,s),u=r.targetId;n=new Lz(u,c)}}return n}function RH(t,e){let n;if(e instanceof Zh)n={update:X2(t,e.key,e.value)};else if(e instanceof jy)n={delete:J1(t,e.key)};else if(e instanceof xl)n={update:X2(t,e.key,e.data),updateMask:BH(e.fieldMask)};else{if(!(e instanceof yH))return Ge(16599,{dt:e.type});n={verify:J1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,c){const u=c.transform;if(u instanceof Eh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Nh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Sh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ah)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ge(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:OH(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ge(27497)})(t,e.precondition)),n}function kH(t,e){return t&&t.length>0?(Et(e!==void 0,14353),t.map((n=>(function(i,s){let c=i.updateTime?Ha(i.updateTime):Ha(s);return c.isEqual(Qe.min())&&(c=Ha(s)),new pH(c,i.transformResults||[])})(n,e)))):[]}function DH(t,e){return{documents:[Bz(t,e.path)]}}function MH(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bz(t,i);const s=(function(h){if(h.length!==0)return Hz(ua.create(h,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const c=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:qu(y.field),direction:qH(y.dir)}})(p)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=X1(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:i}}function zH(t){let e=PH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Et(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=(function(g){const y=Fz(g);return y instanceof ua&&yz(y)?y.getFilters():[y]})(n.where));let c=[];n.orderBy&&(c=(function(g){return g.map((y=>(function(E){return new jh(Uu(E.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(y)))})(n.orderBy));let u=null;n.limit&&(u=(function(g){let y;return y=typeof g=="object"?g.value:g,gy(y)?null:y})(n.limit));let f=null;n.startAt&&(f=(function(g){const y=!!g.before,_=g.values||[];return new ev(_,y)})(n.startAt));let h=null;return n.endAt&&(h=(function(g){const y=!g.before,_=g.values||[];return new ev(_,y)})(n.endAt)),tH(e,i,c,s,u,"F",f,h)}function LH(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Fz(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Uu(n.unaryFilter.field);return Rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uu(n.unaryFilter.field);return Rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Uu(n.unaryFilter.field);return Rn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Uu(n.unaryFilter.field);return Rn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Rn.create(Uu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ua.create(n.compositeFilter.filters.map((r=>Fz(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(n.compositeFilter.op))})(t):Ge(30097,{filter:t})}function qH(t){return SH[t]}function UH(t){return AH[t]}function VH(t){return TH[t]}function qu(t){return{fieldPath:t.canonicalString()}}function Uu(t){return dr.fromServerFormat(t.fieldPath)}function Hz(t){return t instanceof Rn?(function(n){if(n.op==="=="){if(L2(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NAN"}};if(z2(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L2(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NOT_NAN"}};if(z2(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(n.field),op:UH(n.op),value:n.value}}})(t):t instanceof ua?(function(n){const r=n.getFilters().map((i=>Hz(i)));return r.length===1?r[0]:{compositeFilter:{op:VH(n.op),filters:r}}})(t):Ge(54877,{filter:t})}function BH(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Gz(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Kz(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class Xo{constructor(e,n,r,i,s=Qe.min(),c=Qe.min(),u=hr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new Xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $H{constructor(e){this.yt=e}}function FH(t){const e=zH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tv(e,e.limit,"L"):e}class HH{constructor(){this.Sn=new GH}addToCollectionParentIndex(e,n){return this.Sn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(ol.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(ol.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class GH{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Un(Gt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(Gt.comparator)).toArray()}}const Z2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qz=41943040;class Qr{static withCacheSize(e){return new Qr(e,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Qr.DEFAULT_COLLECTION_PERCENTILE=10,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qr.DEFAULT=new Qr(Qz,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qr.DISABLED=new Qr(-1,0,0);class ad{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ad(0)}static ar(){return new ad(-1)}}const J2="LruGarbageCollector",KH=1048576;function eO([t,e],[n,r]){const i=dt(t,n);return i===0?dt(e,r):i}class QH{constructor(e){this.Pr=e,this.buffer=new Un(eO),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();eO(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Te(J2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jd(n)?Te(J2,"Ignoring IndexedDB error during garbage collection: ",n):await wd(n)}await this.Ar(3e5)}))}}class YH{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(py.ce);const r=new QH(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(Z2)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z2):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,c,u,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,c=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,n)))).next((g=>(s=g,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),zu()<=ut.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${s} targets in `+(f-u)+`ms
	Removed ${g} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g}))))}}function XH(t,e){return new YH(t,e)}class ZH{constructor(){this.changes=new Mc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class eG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&dh(r.mutation,i,fi.empty(),nt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ft()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ft()){const i=ic();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let c=Jf();return s.forEach(((u,f)=>{c=c.insert(u,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=ic();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ft())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((c,u)=>{n.set(c,u)}))}))}computeViews(e,n,r,i){let s=qs();const c=uh(),u=(function(){return uh()})();return n.forEach(((f,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof xl)?s=s.insert(h.key,h):p!==void 0?(c.set(h.key,p.mutation.getFieldMask()),dh(p.mutation,h,p.mutation.getFieldMask(),nt.now())):c.set(h.key,fi.empty())})),this.recalculateAndSaveOverlays(e,s).next((f=>(f.forEach(((h,p)=>c.set(h,p))),n.forEach(((h,p)=>u.set(h,new JH(p,c.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=uh();let i=new rn(((c,u)=>c-u)),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const u of c)u.keys().forEach((f=>{const h=n.get(f);if(h===null)return;let p=r.get(f)||fi.empty();p=u.applyToLocalView(h,p),r.set(f,p);const g=(i.get(u.batchId)||ft()).add(f);i=i.insert(u.batchId,g)}))})).next((()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),h=f.key,p=f.value,g=Az();p.forEach((y=>{if(!s.has(y)){const _=Dz(n.get(y),r.get(y));_!==null&&g.set(y,_),s=s.add(y)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,g))}return xe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return nH(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wz(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const c=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):xe.resolve(ic());let u=bh,f=s;return c.next((h=>xe.forEach(h,((p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(p)?xe.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{f=f.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,f,h,ft()))).next((p=>({batchId:u,changes:Sz(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qe(n)).next((r=>{let i=Jf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let c=Jf();return this.indexManager.getCollectionParents(e,s).next((u=>xe.forEach(u,(f=>{const h=(function(g,y){return new Ed(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,f.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,y)=>{c=c.insert(g,y)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(s=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((c=>{s.forEach(((f,h)=>{const p=h.getKey();c.get(p)===null&&(c=c.insert(p,_r.newInvalidDocument(p)))}));let u=Jf();return c.forEach(((f,h)=>{const p=s.get(f);p!==void 0&&dh(p.mutation,h,fi.empty(),nt.now()),_y(n,h)&&(u=u.insert(f,h))})),u}))}}class tG{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return xe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ha(i.createTime)}})(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:FH(i.bundledQuery),readTime:Ha(i.readTime)}})(n)),xe.resolve()}}class nG{constructor(){this.overlays=new rn(qe.comparator),this.Lr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ic();return xe.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.bt(e,n,s)})),xe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Lr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const i=ic(),s=n.length+1,c=new qe(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return xe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new rn(((h,p)=>h-p));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=ic(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=ic(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,p)=>u.set(h,p))),!(u.size()>=i)););return xe.resolve(u)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new _H(n,r));let s=this.Lr.get(n);s===void 0&&(s=ft(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}class rG{constructor(){this.sessionToken=hr.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}class Fj{constructor(){this.kr=new Un(Yn.Kr),this.qr=new Un(Yn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Yn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Yn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new qe(new Gt([])),r=new Yn(n,e),i=new Yn(n,e+1),s=[];return this.qr.forEachInRange([r,i],(c=>{this.Wr(c),s.push(c.key)})),s}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new qe(new Gt([])),r=new Yn(n,e),i=new Yn(n,e+1);let s=ft();return this.qr.forEachInRange([r,i],(c=>{s=s.add(c.key)})),s}containsKey(e){const n=new Yn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return qe.comparator(e.key,n.key)||dt(e.Hr,n.Hr)}static Ur(e,n){return dt(e.Hr,n.Hr)||qe.comparator(e.key,n.key)}}class iG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Un(Yn.Kr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new bH(s,n,r,i);this.mutationQueue.push(c);for(const u of i)this.Jr=this.Jr.add(new Yn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return xe.resolve(c)}lookupMutationBatch(e,n){return xe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?Dj:this.Yn-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yn(n,0),i=new Yn(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],(c=>{const u=this.Zr(c.Hr);s.push(u)})),xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Un(dt);return n.forEach((i=>{const s=new Yn(i,0),c=new Yn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,c],(u=>{r=r.add(u.Hr)}))})),xe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;qe.isDocumentKey(s)||(s=s.child(""));const c=new Yn(new qe(s),0);let u=new Un(dt);return this.Jr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(f.Hr)),!0)}),c),xe.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Et(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return xe.forEach(n.mutations,(i=>{const s=new Yn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Yn(n,0),i=this.Jr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class aG{constructor(e){this.ti=e,this.docs=(function(){return new rn(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,c=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(n))}getEntries(e,n){let r=qs();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_r.newInvalidDocument(i))})),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qs();const c=n.path,u=new qe(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||IF(PF(p),r)<=0||(i.has(p.key)||_y(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return xe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ge(9500)}ni(e,n){return xe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new sG(this)}getSize(e){return xe.resolve(this.size)}}class sG extends ZH{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),xe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class oG{constructor(e){this.persistence=e,this.ri=new Mc((n=>Lj(n)),qj),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.ii=0,this.si=new Fj,this.targetCount=0,this.oi=ad._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),xe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ad(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.lr(n),xe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach(((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ri.delete(c),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),xe.waitFor(s).next((()=>i))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((c=>{s.push(i.markPotentiallyOrphaned(e,c))})),xe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this.si.containsKey(n))}}class Wz{constructor(e,n){this._i={},this.overlays={},this.ai=new py(0),this.ui=!1,this.ui=!0,this.ci=new rG,this.referenceDelegate=e(this),this.li=new oG(this),this.indexManager=new HH,this.remoteDocumentCache=(function(i){return new aG(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new $H(n),this.Pi=new tG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new iG(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const i=new lG(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((s=>this.referenceDelegate.Ii(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ei(e,n){return xe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class lG extends kF{constructor(e){super(),this.currentSequenceNumber=e}}class Hj{constructor(e){this.persistence=e,this.Ri=new Fj,this.Ai=null}static Vi(e){return new Hj(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.di.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.di,(r=>{const i=qe.fromPath(r);return this.mi(e,i).next((s=>{s||n.removeEntry(i,Qe.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class rv{constructor(e,n){this.persistence=e,this.fi=new Mc((r=>zF(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=XH(this,n)}static Vi(e,n){return new rv(e,n)}Ti(){}Ii(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return xe.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((s=>s?xe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,(c=>this.wr(e,c,n).next((u=>{u||(r++,s.removeEntry(c,Qe.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cg(e.data.value)),n}wr(e,n,r){return xe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return xe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Gj{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ft(),i=ft();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Gj(e,n.fromCache,r,i)}}class cG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uG{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return M8()?8:DF(wr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next((c=>{s.result=c})).next((()=>{if(!s.result)return this.ps(e,n,i,r).next((c=>{s.result=c}))})).next((()=>{if(s.result)return;const c=new cG;return this.ys(e,n,c).next((u=>{if(s.result=u,this.As)return this.ws(e,n,c,u.size)}))})).next((()=>s.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(zu()<=ut.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Lu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(zu()<=ut.DEBUG&&Te("QueryEngine","Query:",Lu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(zu()<=ut.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Lu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fa(n))):xe.resolve())}gs(e,n){if(B2(n))return xe.resolve(null);let r=Fa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=tv(n,null,"F"),r=Fa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const c=ft(...s);return this.fs.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.bs(n,u);return this.Ss(n,h,c,f.readTime)?this.gs(e,tv(n,null,"F")):this.Ds(e,h,n,f)}))))})))))}ps(e,n,r,i){return B2(n)||i.isEqual(Qe.min())?xe.resolve(null):this.fs.getDocuments(e,r).next((s=>{const c=this.bs(n,s);return this.Ss(n,c,r,i)?xe.resolve(null):(zu()<=ut.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lu(n)),this.Ds(e,c,n,OF(i,bh)).next((u=>u)))}))}bs(e,n){let r=new Un(Ez(e));return n.forEach(((i,s)=>{_y(e,s)&&(r=r.add(s))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return zu()<=ut.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Lu(n)),this.fs.getDocumentsMatchingQuery(e,n,ol.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((c=>{s=s.insert(c.key,c)})),s)))}}const Kj="LocalStore",dG=3e8;class fG{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new rn(dt),this.Fs=new Mc((s=>Lj(s)),qj),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eG(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function hG(t,e,n,r){return new fG(t,e,n,r)}async function Yz(t,e){const n=Ye(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const c=[],u=[];let f=ft();for(const h of i){c.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of s){u.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(r,f).next((h=>({Ns:h,removedBatchIds:c,addedBatchIds:u})))}))}))}function mG(t,e){const n=Ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return(function(u,f,h,p){const g=h.batch,y=g.keys();let _=xe.resolve();return y.forEach((E=>{_=_.next((()=>p.getEntry(f,E))).next((w=>{const N=h.docVersions.get(E);Et(N!==null,48541),w.version.compareTo(N)<0&&(g.applyToRemoteDocument(w,h),w.isValidDocument()&&(w.setReadTime(h.commitVersion),p.addEntry(w)))}))})),_.next((()=>u.mutationQueue.removeMutationBatch(f,g)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let f=ft();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(f=f.add(u.batch.mutations[h].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function Xz(t){const e=Ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function pG(t,e){const n=Ye(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const c=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const u=[];e.targetChanges.forEach(((p,g)=>{const y=i.get(g);if(!y)return;u.push(n.li.removeMatchingKeys(s,p.removedDocuments,g).next((()=>n.li.addMatchingKeys(s,p.addedDocuments,g))));let _=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(hr.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),i=i.insert(g,_),(function(w,N,A){return w.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=dG?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(y,_,p)&&u.push(n.li.updateTargetData(s,_))}));let f=qs(),h=ft();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))})),u.push(gG(s,c,e.documentUpdates).next((p=>{f=p.Bs,h=p.Ls}))),!r.isEqual(Qe.min())){const p=n.li.getLastRemoteSnapshotVersion(s).next((g=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(p)}return xe.waitFor(u).next((()=>c.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,f,h))).next((()=>f))})).then((s=>(n.vs=i,s)))}function gG(t,e,n){let r=ft(),i=ft();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let c=qs();return n.forEach(((u,f)=>{const h=s.get(u);f.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),f.isNoDocument()&&f.version.isEqual(Qe.min())?(e.removeEntry(u,f.readTime),c=c.insert(u,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),c=c.insert(u,f)):Te(Kj,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",f.version)})),{Bs:c,Ls:i}}))}function vG(t,e){const n=Ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Dj),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function yG(t,e){const n=Ye(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((s=>s?(i=s,xe.resolve(i)):n.li.allocateTargetId(r).next((c=>(i=new Xo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function tw(t,e,n){const r=Ye(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!jd(c))throw c;Te(Kj,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function tO(t,e,n){const r=Ye(t);let i=Qe.min(),s=ft();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,h,p){const g=Ye(f),y=g.Fs.get(p);return y!==void 0?xe.resolve(g.vs.get(y)):g.li.getTargetData(h,p)})(r,c,Fa(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,u.targetId).next((f=>{s=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:Qe.min(),n?s:ft()))).next((u=>(bG(r,aH(e),u),{documents:u,ks:s})))))}function bG(t,e,n){let r=t.Ms.get(e)||Qe.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Ms.set(e,r)}class nO{constructor(){this.activeTargetIds=dH()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _G{constructor(){this.vo=new nO,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new nO,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xG{Mo(e){}shutdown(){}}const rO="ConnectivityMonitor";class iO{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Te(rO,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Te(rO,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Jp=null;function nw(){return Jp===null?Jp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jp++,"0x"+Jp.toString(16)}const L_="RestConnection",wG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class jG{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Zg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const c=nw(),u=this.Qo(e,n.toUriEncodedString());Te(L_,`Sending RPC '${e}' ${c}:`,u,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,i,s);const{host:h}=new URL(u),p=yl(h);return this.zo(e,u,f,r,p).then((g=>(Te(L_,`Received RPC '${e}' ${c}: `,g),g)),(g=>{throw td(L_,`RPC '${e}' ${c} failed with error: `,g,"url: ",u,"request:",r),g}))}jo(e,n,r,i,s,c){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}Qo(e,n){const r=wG[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class EG{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const vr="WebChannelConnection",Lf=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Wu extends jG{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wu.c_){const e=ez();Lf(e,JM.STAT_EVENT,(n=>{n.stat===F1.PROXY?Te(vr,"STAT_EVENT: detected buffering proxy"):n.stat===F1.NOPROXY&&Te(vr,"STAT_EVENT: detected no buffering proxy")})),Wu.c_=!0}}zo(e,n,r,i,s){const c=nw();return new Promise(((u,f)=>{const h=new XM;h.setWithCredentials(!0),h.listenOnce(ZM.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Tg.NO_ERROR:const g=h.getResponseJson();Te(vr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(g)),u(g);break;case Tg.TIMEOUT:Te(vr,`RPC '${e}' ${c} timed out`),f(new Ae(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Tg.HTTP_ERROR:const y=h.getStatus();if(Te(vr,`RPC '${e}' ${c} failed with status:`,y,"response text:",h.getResponseText()),y>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_?.error;if(E&&E.status&&E.message){const w=(function(A){const R=A.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(R)>=0?R:ge.UNKNOWN})(E.status);f(new Ae(w,E.message))}else f(new Ae(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Ae(ge.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Te(vr,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(i);Te(vr,`RPC '${e}' ${c} sending request:`,i),h.send(n,"POST",p,r,15)}))}T_(e,n,r){const i=nw(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Te(vr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=c.createWebChannel(h,u);this.I_(p);let g=!1,y=!1;const _=new EG({Ho:E=>{y?Te(vr,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(Te(vr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Te(vr,`RPC '${e}' stream ${i} sending:`,E),p.send(E))},Jo:()=>p.close()});return Lf(p,Zf.EventType.OPEN,(()=>{y||(Te(vr,`RPC '${e}' stream ${i} transport opened.`),_.i_())})),Lf(p,Zf.EventType.CLOSE,(()=>{y||(y=!0,Te(vr,`RPC '${e}' stream ${i} transport closed`),_.o_(),this.E_(p))})),Lf(p,Zf.EventType.ERROR,(E=>{y||(y=!0,td(vr,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),_.o_(new Ae(ge.UNAVAILABLE,"The operation could not be completed")))})),Lf(p,Zf.EventType.MESSAGE,(E=>{if(!y){const w=E.data[0];Et(!!w,16349);const N=w,A=N?.error||N[0]?.error;if(A){Te(vr,`RPC '${e}' stream ${i} received error:`,A);const R=A.status;let O=(function($){const D=Pn[$];if(D!==void 0)return zz(D)})(R),C=A.message;O===void 0&&(O=ge.INTERNAL,C="Unknown error status: "+R+" with message "+A.message),y=!0,_.o_(new Ae(O,C)),p.close()}else Te(vr,`RPC '${e}' stream ${i} received:`,w),_.__(w)}})),Wu.u_(),setTimeout((()=>{_.s_()}),0),_}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return tz()}}function NG(t){return new Wu(t)}function q_(){return typeof document<"u"?document:null}function Ny(t){return new CH(t,!0)}Wu.c_=!1;class Zz{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const aO="PersistentStream";class Jz{constructor(e,n,r,i,s,c,u,f){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zz(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(Ls(n.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ae(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(aO,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Te(aO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SG extends Jz{constructor(e,n,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IH(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Qe.min();const c=s.targetChange;return c.targetIds&&c.targetIds.length?Qe.min():c.readTime?Ha(c.readTime):Qe.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=ew(this.serializer),n.addTarget=(function(s,c){let u;const f=c.target;if(u=W1(f)?{documents:DH(s,f)}:{query:MH(s,f).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=Uz(s,c.resumeToken);const h=X1(s,c.expectedCount);h!==null&&(u.expectedCount=h)}else if(c.snapshotVersion.compareTo(Qe.min())>0){u.readTime=nv(s,c.snapshotVersion.toTimestamp());const h=X1(s,c.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=LH(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=ew(this.serializer),n.removeTarget=e,this.K_(n)}}class AG extends Jz{constructor(e,n,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kH(e.writeResults,e.commitTime),r=Ha(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ew(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>RH(this.serializer,r)))};this.K_(n)}}class TG{}class CG extends TG{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ae(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Wo(e,Z1(n,r),i,s,c))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ae(ge.UNKNOWN,s.toString())}))}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.jo(e,Z1(n,r),i,c,u,s))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(ge.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function OG(t,e,n,r){return new CG(t,e,n,r)}class PG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ls(n),this.aa=!1):Te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const xc="RemoteStore";class IG{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{zc(this)&&(Te(xc,"Restarting streams for network reachability change."),await(async function(f){const h=Ye(f);h.Ea.add(4),await em(h),h.Va.set("Unknown"),h.Ea.delete(4),await Sy(h)})(this))}))})),this.Va=new PG(r,i)}}async function Sy(t){if(zc(t))for(const e of t.Ra)await e(!0)}async function em(t){for(const e of t.Ra)await e(!1)}function e4(t,e){const n=Ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xj(n)?Yj(n):Nd(n).O_()&&Wj(n,e))}function Qj(t,e){const n=Ye(t),r=Nd(n);n.Ia.delete(e),r.O_()&&t4(n,e),n.Ia.size===0&&(r.O_()?r.L_():zc(n)&&n.Va.set("Unknown"))}function Wj(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nd(t).Z_(e)}function t4(t,e){t.da.$e(e),Nd(t).X_(e)}function Yj(t){t.da=new NH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Nd(t).start(),t.Va.ua()}function Xj(t){return zc(t)&&!Nd(t).x_()&&t.Ia.size>0}function zc(t){return Ye(t).Ea.size===0}function n4(t){t.da=void 0}async function RG(t){t.Va.set("Online")}async function kG(t){t.Ia.forEach(((e,n)=>{Wj(t,e)}))}async function DG(t,e){n4(t),Xj(t)?(t.Va.ha(e),Yj(t)):t.Va.set("Unknown")}async function MG(t,e,n){if(t.Va.set("Online"),e instanceof qz&&e.state===2&&e.cause)try{await(async function(i,s){const c=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ia.delete(u),i.da.removeTarget(u))})(t,e)}catch(r){Te(xc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await iv(t,r)}else if(e instanceof Ig?t.da.Xe(e):e instanceof Lz?t.da.st(e):t.da.tt(e),!n.isEqual(Qe.min()))try{const r=await Xz(t.localStore);n.compareTo(r)>=0&&await(function(s,c){const u=s.da.Tt(c);return u.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(f.resumeToken,c))}})),u.targetMismatches.forEach(((f,h)=>{const p=s.Ia.get(f);if(!p)return;s.Ia.set(f,p.withResumeToken(hr.EMPTY_BYTE_STRING,p.snapshotVersion)),t4(s,f);const g=new Xo(p.target,f,h,p.sequenceNumber);Wj(s,g)})),s.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){Te(xc,"Failed to raise snapshot:",r),await iv(t,r)}}async function iv(t,e,n){if(!jd(e))throw e;t.Ea.add(1),await em(t),t.Va.set("Offline"),n||(n=()=>Xz(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te(xc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Sy(t)}))}function r4(t,e){return e().catch((n=>iv(t,n,e)))}async function Ay(t){const e=Ye(t),n=dl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dj;for(;zG(e);)try{const i=await vG(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,LG(e,i)}catch(i){await iv(e,i)}i4(e)&&a4(e)}function zG(t){return zc(t)&&t.Ta.length<10}function LG(t,e){t.Ta.push(e);const n=dl(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function i4(t){return zc(t)&&!dl(t).x_()&&t.Ta.length>0}function a4(t){dl(t).start()}async function qG(t){dl(t).ra()}async function UG(t){const e=dl(t);for(const n of t.Ta)e.ea(n.mutations)}async function VG(t,e,n){const r=t.Ta.shift(),i=Vj.from(r,e,n);await r4(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Ay(t)}async function BG(t,e){e&&dl(t).Y_&&await(async function(r,i){if((function(c){return wH(c)&&c!==ge.ABORTED})(i.code)){const s=r.Ta.shift();dl(r).B_(),await r4(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Ay(r)}})(t,e),i4(t)&&a4(t)}async function sO(t,e){const n=Ye(t);n.asyncQueue.verifyOperationInProgress(),Te(xc,"RemoteStore received new credentials");const r=zc(n);n.Ea.add(3),await em(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sy(n)}async function $G(t,e){const n=Ye(t);e?(n.Ea.delete(2),await Sy(n)):e||(n.Ea.add(2),await em(n),n.Va.set("Unknown"))}function Nd(t){return t.ma||(t.ma=(function(n,r,i){const s=Ye(n);return s.sa(),new SG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Zo:RG.bind(null,t),Yo:kG.bind(null,t),t_:DG.bind(null,t),J_:MG.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Xj(t)?Yj(t):t.Va.set("Unknown")):(await t.ma.stop(),n4(t))}))),t.ma}function dl(t){return t.fa||(t.fa=(function(n,r,i){const s=Ye(n);return s.sa(),new AG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:qG.bind(null,t),t_:BG.bind(null,t),ta:UG.bind(null,t),na:VG.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Ay(t)):(await t.fa.stop(),t.Ta.length>0&&(Te(xc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Zj{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const c=Date.now()+r,u=new Zj(e,n,c,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jj(t,e){if(Ls("AsyncQueue",`${e}: ${t}`),jd(t))return new Ae(ge.UNAVAILABLE,`${e}: ${t}`);throw t}class Yu{static emptySet(e){return new Yu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||qe.comparator(n.key,r.key):(n,r)=>qe.comparator(n.key,r.key),this.keyedMap=Jf(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class oO{constructor(){this.ga=new rn(qe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class sd{constructor(e,n,r,i,s,c,u,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const c=[];return n.forEach((u=>{c.push({type:0,doc:u})})),new sd(e,n,Yu.emptySet(n),c,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&by(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class FG{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class HG{constructor(){this.queries=lO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ye(n),s=i.queries;i.queries=lO(),s.forEach(((c,u)=>{for(const f of u.ba)f.onError(r)}))})(this,new Ae(ge.ABORTED,"Firestore shutting down"))}}function lO(){return new Mc((t=>jz(t)),by)}async function eE(t,e){const n=Ye(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new FG,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const u=Jj(c,`Initialization of query '${Lu(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&nE(n)}async function tE(t,e){const n=Ye(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const c=s.ba.indexOf(e);c>=0&&(s.ba.splice(c,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GG(t,e){const n=Ye(t);let r=!1;for(const i of e){const s=i.query,c=n.queries.get(s);if(c){for(const u of c.ba)u.Fa(i)&&(r=!0);c.wa=i}}r&&nE(n)}function KG(t,e,n){const r=Ye(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function nE(t){t.Ca.forEach((e=>{e.next()}))}var rw,cO;(cO=rw||(rw={})).Ma="default",cO.Cache="cache";class rE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new sd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rw.Cache}}class s4{constructor(e){this.key=e}}class o4{constructor(e){this.key=e}}class QG{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ft(),this.mutatedKeys=ft(),this.eu=Ez(e),this.tu=new Yu(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new oO,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,c=i,u=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const y=i.get(p),_=_y(this.query,g)?g:null,E=!!y&&this.mutatedKeys.has(y.key),w=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let N=!1;y&&_?y.data.isEqual(_.data)?E!==w&&(r.track({type:3,doc:_}),N=!0):this.su(y,_)||(r.track({type:2,doc:_}),N=!0,(f&&this.eu(_,f)>0||h&&this.eu(_,h)<0)&&(u=!0)):!y&&_?(r.track({type:0,doc:_}),N=!0):y&&!_&&(r.track({type:1,doc:y}),N=!0,(f||h)&&(u=!0)),N&&(_?(c=c.add(_),s=w?s.add(p):s.delete(p)):(c=c.delete(p),s=s.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Ss:u,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,g)=>(function(_,E){const w=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:N})}};return w(_)-w(E)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],f=this.Ya.size===0&&this.current&&!i?1:0,h=f!==this.Xa;return this.Xa=f,c.length!==0||h?{snapshot:new sd(this.query,e.tu,s,c,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oO,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ft(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new o4(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new s4(r))})),n}cu(e){this.Za=e.ks,this.Ya=ft();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const iE="SyncEngine";class WG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YG{constructor(e){this.key=e,this.hu=!1}}class XG{constructor(e,n,r,i,s,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Mc((u=>jz(u)),by),this.Iu=new Map,this.Eu=new Set,this.Ru=new rn(qe.comparator),this.Au=new Map,this.Vu=new Fj,this.du={},this.mu=new Map,this.fu=ad.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZG(t,e,n=!0){const r=h4(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await l4(r,e,n,!0),i}async function JG(t,e){const n=h4(t);await l4(n,e,!0,!1)}async function l4(t,e,n,r){const i=await yG(t.localStore,Fa(e)),s=i.targetId,c=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await eK(t,e,s,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&e4(t.remoteStore,i),u}async function eK(t,e,n,r,i){t.pu=(g,y,_)=>(async function(w,N,A,R){let O=N.view.ru(A);O.Ss&&(O=await tO(w.localStore,N.query,!1).then((({documents:D})=>N.view.ru(D,O))));const C=R&&R.targetChanges.get(N.targetId),V=R&&R.targetMismatches.get(N.targetId)!=null,$=N.view.applyChanges(O,w.isPrimaryClient,C,V);return dO(w,N.targetId,$.au),$.snapshot})(t,g,y,_);const s=await tO(t.localStore,e,!0),c=new QG(e,s.ks),u=c.ru(s.documents),f=Jh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=c.applyChanges(u,t.isPrimaryClient,f);dO(t,n,h.au);const p=new WG(e,n,c);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function tK(t,e,n){const r=Ye(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((c=>!by(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tw(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Qj(r.remoteStore,i.targetId),iw(r,i.targetId)})).catch(wd)):(iw(r,i.targetId),await tw(r.localStore,i.targetId,!0))}async function nK(t,e){const n=Ye(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qj(n.remoteStore,r.targetId))}async function rK(t,e,n){const r=uK(t);try{const i=await(function(c,u){const f=Ye(c),h=nt.now(),p=u.reduce(((_,E)=>_.add(E.key)),ft());let g,y;return f.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let E=qs(),w=ft();return f.xs.getEntries(_,p).next((N=>{E=N,E.forEach(((A,R)=>{R.isValidDocument()||(w=w.add(A))}))})).next((()=>f.localDocuments.getOverlayedDocuments(_,E))).next((N=>{g=N;const A=[];for(const R of u){const O=vH(R,g.get(R.key).overlayedDocument);O!=null&&A.push(new xl(R.key,O,pz(O.value.mapValue),Pr.exists(!0)))}return f.mutationQueue.addMutationBatch(_,h,A,u)})).next((N=>{y=N;const A=N.applyToLocalDocumentSet(g,w);return f.documentOverlayCache.saveOverlays(_,N.batchId,A)}))})).then((()=>({batchId:y.batchId,changes:Sz(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,u,f){let h=c.du[c.currentUser.toKey()];h||(h=new rn(dt)),h=h.insert(u,f),c.du[c.currentUser.toKey()]=h})(r,i.batchId,n),await tm(r,i.changes),await Ay(r.remoteStore)}catch(i){const s=Jj(i,"Failed to persist write");n.reject(s)}}async function c4(t,e){const n=Ye(t);try{const r=await pG(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const c=n.Au.get(s);c&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Et(c.hu,14607):i.removedDocuments.size>0&&(Et(c.hu,42227),c.hu=!1))})),await tm(n,r,e)}catch(r){await wd(r)}}function uO(t,e,n){const r=Ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(c,u){const f=Ye(c);f.onlineState=u;let h=!1;f.queries.forEach(((p,g)=>{for(const y of g.ba)y.va(u)&&(h=!0)})),h&&nE(f)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iK(t,e,n){const r=Ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let c=new rn(qe.comparator);c=c.insert(s,_r.newNoDocument(s,Qe.min()));const u=ft().add(s),f=new Ey(Qe.min(),new Map,new rn(dt),c,u);await c4(r,f),r.Ru=r.Ru.remove(s),r.Au.delete(e),aE(r)}else await tw(r.localStore,e,!1).then((()=>iw(r,e,n))).catch(wd)}async function aK(t,e){const n=Ye(t),r=e.batch.batchId;try{const i=await mG(n.localStore,e);d4(n,r,null),u4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tm(n,i)}catch(i){await wd(i)}}async function sK(t,e,n){const r=Ye(t);try{const i=await(function(c,u){const f=Ye(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return f.mutationQueue.lookupMutationBatch(h,u).next((g=>(Et(g!==null,37113),p=g.keys(),f.mutationQueue.removeMutationBatch(h,g)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>f.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);d4(r,e,n),u4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tm(r,i)}catch(i){await wd(i)}}function u4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function d4(t,e,n){const r=Ye(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function iw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||f4(t,r)}))}function f4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Qj(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),aE(t))}function dO(t,e,n){for(const r of n)r instanceof s4?(t.Vu.addReference(r.key,e),oK(t,r)):r instanceof o4?(Te(iE,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||f4(t,r.key)):Ge(19791,{wu:r})}function oK(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Te(iE,"New document in limbo: "+n),t.Eu.add(r),aE(t))}function aE(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new qe(Gt.fromString(e)),r=t.fu.next();t.Au.set(r,new YG(n)),t.Ru=t.Ru.insert(n,r),e4(t.remoteStore,new Xo(Fa(yy(n.path)),r,"TargetPurposeLimboResolution",py.ce))}}async function tm(t,e,n){const r=Ye(t),i=[],s=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,f)=>{c.push(r.pu(f,e,n).then((h=>{if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:n?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Gj.Es(f.targetId,h);s.push(p)}})))})),await Promise.all(c),r.Pu.J_(i),await(async function(f,h){const p=Ye(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>xe.forEach(h,(y=>xe.forEach(y.Ts,(_=>p.persistence.referenceDelegate.addReference(g,y.targetId,_))).next((()=>xe.forEach(y.Is,(_=>p.persistence.referenceDelegate.removeReference(g,y.targetId,_)))))))))}catch(g){if(!jd(g))throw g;Te(Kj,"Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const _=p.vs.get(y),E=_.snapshotVersion,w=_.withLastLimboFreeSnapshotVersion(E);p.vs=p.vs.insert(y,w)}}})(r.localStore,s))}async function lK(t,e){const n=Ye(t);if(!n.currentUser.isEqual(e)){Te(iE,"User change. New user:",e.toKey());const r=await Yz(n.localStore,e);n.currentUser=e,(function(s,c){s.mu.forEach((u=>{u.forEach((f=>{f.reject(new Ae(ge.CANCELLED,c))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tm(n,r.Ns)}}function cK(t,e){const n=Ye(t),r=n.Au.get(e);if(r&&r.hu)return ft().add(r.key);{let i=ft();const s=n.Iu.get(e);if(!s)return i;for(const c of s){const u=n.Tu.get(c);i=i.unionWith(u.view.nu)}return i}}function h4(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=c4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iK.bind(null,e),e.Pu.J_=GG.bind(null,e.eventManager),e.Pu.yu=KG.bind(null,e.eventManager),e}function uK(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sK.bind(null,e),e}class av{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ny(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return hG(this.persistence,new uG,e.initialUser,this.serializer)}Cu(e){return new Wz(Hj.Vi,this.serializer)}Du(e){return new _G}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}av.provider={build:()=>new av};class dK extends av{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Et(this.persistence.referenceDelegate instanceof rv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new WH(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qr.withCacheSize(this.cacheSizeBytes):Qr.DEFAULT;return new Wz((r=>rv.Vi(r,n)),this.serializer)}}class aw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lK.bind(null,this.syncEngine),await $G(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HG})()}createDatastore(e){const n=Ny(e.databaseInfo.databaseId),r=NG(e.databaseInfo);return OG(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,c,u){return new IG(r,i,s,c,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>uO(this.syncEngine,n,0)),(function(){return iO.v()?new iO:new xG})())}createSyncEngine(e,n){return(function(i,s,c,u,f,h,p){const g=new XG(i,s,c,u,f,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ye(n);Te(xc,"RemoteStore shutting down."),r.Ea.add(5),await em(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}aw.provider={build:()=>new aw};class sE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const fl="FirestoreClient";class fK{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=kj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async c=>{Te(fl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Te(fl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jj(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function U_(t,e){t.asyncQueue.verifyOperationInProgress(),Te(fl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Yz(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function fO(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hK(t);Te(fl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>sO(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>sO(e.remoteStore,i))),t._onlineComponents=e}async function hK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(fl,"Using user provided OfflineComponentProvider");try{await U_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;td("Error using user provided cache. Falling back to memory cache: "+n),await U_(t,new av)}}else Te(fl,"Using default OfflineComponentProvider"),await U_(t,new dK(void 0));return t._offlineComponents}async function m4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(fl,"Using user provided OnlineComponentProvider"),await fO(t,t._uninitializedComponentsProvider._online)):(Te(fl,"Using default OnlineComponentProvider"),await fO(t,new aw))),t._onlineComponents}function mK(t){return m4(t).then((e=>e.syncEngine))}async function sv(t){const e=await m4(t),n=e.eventManager;return n.onListen=ZG.bind(null,e.syncEngine),n.onUnlisten=tK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nK.bind(null,e.syncEngine),n}function pK(t,e,n,r){const i=new sE(r),s=new rE(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>eE(await sv(t),s))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>tE(await sv(t),s)))}}function gK(t,e,n={}){const r=new Rs;return t.asyncQueue.enqueueAndForget((async()=>(function(s,c,u,f,h){const p=new sE({next:y=>{p.Nu(),c.enqueueAndForget((()=>tE(s,g)));const _=y.docs.has(u);!_&&y.fromCache?h.reject(new Ae(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&f&&f.source==="server"?h.reject(new Ae(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new rE(yy(u.path),p,{includeMetadataChanges:!0,Ka:!0});return eE(s,g)})(await sv(t),t.asyncQueue,e,n,r))),r.promise}function vK(t,e,n={}){const r=new Rs;return t.asyncQueue.enqueueAndForget((async()=>(function(s,c,u,f,h){const p=new sE({next:y=>{p.Nu(),c.enqueueAndForget((()=>tE(s,g))),y.fromCache&&f.source==="server"?h.reject(new Ae(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new rE(u,p,{includeMetadataChanges:!0,Ka:!0});return eE(s,g)})(await sv(t),t.asyncQueue,e,n,r))),r.promise}function yK(t,e){const n=new Rs;return t.asyncQueue.enqueueAndForget((async()=>rK(await mK(t),e,n))),n.promise}function p4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const bK="ComponentProvider",hO=new Map;function _K(t,e,n,r,i){return new UF(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,p4(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const g4="firestore.googleapis.com",mO=!0;class pO{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g4,this.ssl=mO}else this.host=e.host,this.ssl=e.ssl??mO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qz;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KH)throw new Ae(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p4(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ae(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ae(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ae(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ty{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yF;switch(r.type){case"firstParty":return new wF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=hO.get(n);r&&(Te(bK,"Removing Datastore"),hO.delete(n),r.terminate())})(this),Promise.resolve()}}function xK(t,e,n,r={}){t=Or(t,Ty);const i=yl(e),s=t._getSettings(),c={...s,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(_j(`https://${u}`),xj("Firestore",!0)),s.host!==g4&&s.host!==u&&td("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...s,host:u,ssl:i,emulatorOptions:r};if(!gc(f,c)&&(t._setSettings(f),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=br.MOCK_USER;else{h=uM(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ae(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new br(g)}t._authCredentials=new bF(new rz(h,p))}}class Ys{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class hn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}toJSON(){return{type:hn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xh(n,hn._jsonSchema))return new hn(e,r||null,new qe(Gt.fromString(n.referencePath)))}}hn._jsonSchemaVersion="firestore/documentReference/1.0",hn._jsonSchema={type:kn("string",hn._jsonSchemaVersion),referencePath:kn("string")};class rl extends Ys{constructor(e,n,r){super(e,n,yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new qe(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function rt(t,e,...n){if(t=Ft(t),iz("collection","path",e),t instanceof Ty){const r=Gt.fromString(e,...n);return T2(r),new rl(t,null,r)}{if(!(t instanceof hn||t instanceof rl))throw new Ae(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Gt.fromString(e,...n));return T2(r),new rl(t.firestore,null,r)}}function Xe(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=kj.newId()),iz("doc","path",e),t instanceof Ty){const r=Gt.fromString(e,...n);return A2(r),new hn(t,null,new qe(r))}{if(!(t instanceof hn||t instanceof rl))throw new Ae(ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Gt.fromString(e,...n));return A2(r),new hn(t.firestore,t instanceof rl?t.converter:null,new qe(r))}}const gO="AsyncQueue";class vO{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zz(this,"async_queue_retry"),this._c=()=>{const r=q_();r&&Te(gO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=q_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=q_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!jd(e))throw e;Te(gO,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ls("INTERNAL UNHANDLED ERROR: ",yO(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Zj.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ge(47125,{Pc:yO(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yO(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Wa extends Ty{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new vO,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vO(e),this._firestoreClient=void 0,await e}}}function wK(t,e){const n=typeof t=="object"?t:Ej(),r=typeof t=="string"?t:Zg,i=uy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=oM("firestore");s&&xK(i,...s)}return i}function nm(t){if(t._terminated)throw new Ae(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jK(t),t._firestoreClient}function jK(t){const e=t._freezeSettings(),n=_K(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new fK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}class Mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mi(hr.fromBase64String(e))}catch(n){throw new Ae(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mi(hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xh(e,Mi._jsonSchema))return Mi.fromBase64String(e.bytes)}}Mi._jsonSchemaVersion="firestore/bytes/1.0",Mi._jsonSchema={type:kn("string",Mi._jsonSchemaVersion),bytes:kn("string")};class Cy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rm{constructor(e){this._methodName=e}}class Ga{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ga._jsonSchemaVersion}}static fromJSON(e){if(Xh(e,Ga._jsonSchema))return new Ga(e.latitude,e.longitude)}}Ga._jsonSchemaVersion="firestore/geoPoint/1.0",Ga._jsonSchema={type:kn("string",Ga._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};class sa{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:sa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xh(e,sa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new sa(e.vectorValues);throw new Ae(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sa._jsonSchemaVersion="firestore/vectorValue/1.0",sa._jsonSchema={type:kn("string",sa._jsonSchemaVersion),vectorValues:kn("object")};const EK=/^__.*__$/;class NK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zh(e,this.data,n,this.fieldTransforms)}}class v4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function y4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:t})}}class oE{constructor(e,n,r,i,s,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new oE({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ov(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(y4(this.dataSource)&&EK.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class SK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ny(e)}createContext(e,n,r,i=!1){return new oE({dataSource:e,methodName:n,targetDoc:r,path:dr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function im(t){const e=t._freezeSettings(),n=Ny(t._databaseId);return new SK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lE(t,e,n,r,i,s={}){const c=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);dE("Data must be an object, but it was:",c,r);const u=x4(r,c);let f,h;if(s.merge)f=new fi(c.fieldMask),h=c.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const y=wc(e,g,n);if(!c.contains(y))throw new Ae(ge.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);E4(p,y)||p.push(y)}f=new fi(p),h=c.fieldTransforms.filter((g=>f.covers(g.field)))}else f=null,h=c.fieldTransforms;return new NK(new Wr(u),f,h)}class Oy extends rm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oy}}class cE extends rm{_toFieldTransform(e){return new kz(e.path,new Eh)}isEqual(e){return e instanceof cE}}class uE extends rm{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Ah(e.serializer,Cz(e.serializer,this.Vc));return new kz(e.path,n)}isEqual(e){return e instanceof uE&&this.Vc===e.Vc}}function b4(t,e,n,r){const i=t.createContext(1,e,n);dE("Data must be an object, but it was:",i,r);const s=[],c=Wr.empty();_l(r,((f,h)=>{const p=j4(e,f,n);h=Ft(h);const g=i.childContextForFieldPath(p);if(h instanceof Oy)s.push(p);else{const y=am(h,g);y!=null&&(s.push(p),c.set(p,y))}}));const u=new fi(s);return new v4(c,u,i.fieldTransforms)}function _4(t,e,n,r,i,s){const c=t.createContext(1,e,n),u=[wc(e,r,n)],f=[i];if(s.length%2!=0)throw new Ae(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)u.push(wc(e,s[y])),f.push(s[y+1]);const h=[],p=Wr.empty();for(let y=u.length-1;y>=0;--y)if(!E4(h,u[y])){const _=u[y];let E=f[y];E=Ft(E);const w=c.childContextForFieldPath(_);if(E instanceof Oy)h.push(_);else{const N=am(E,w);N!=null&&(h.push(_),p.set(_,N))}}const g=new fi(h);return new v4(p,g,c.fieldTransforms)}function AK(t,e,n,r=!1){return am(n,t.createContext(r?4:3,e))}function am(t,e){if(w4(t=Ft(t)))return dE("Unsupported field value:",e,t),x4(t,e);if(t instanceof rm)return(function(r,i){if(!y4(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const s=[];let c=0;for(const u of r){let f=am(u,i.childContextForArray(c));f==null&&(f={nullValue:"NULL_VALUE"}),s.push(f),c++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Cz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:nv(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nv(i.serializer,s)}}if(r instanceof Ga)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mi)return{bytesValue:Uz(i.serializer,r._byteString)};if(r instanceof hn){const s=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(s))throw i.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$j(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sa)return(function(c,u){const f=c instanceof sa?c.toArray():c;return{mapValue:{fields:{[hz]:{stringValue:mz},[Jg]:{arrayValue:{values:f.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return Uj(u.serializer,p)}))}}}}}})(r,i);if(Kz(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${my(r)}`)})(t,e)}function x4(t,e){const n={};return oz(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(t,((r,i)=>{const s=am(i,e.childContextForField(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function w4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Ga||t instanceof Mi||t instanceof hn||t instanceof rm||t instanceof sa||Kz(t))}function dE(t,e,n){if(!w4(n)||!az(n)){const r=my(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function wc(t,e,n){if((e=Ft(e))instanceof Cy)return e._internalPath;if(typeof e=="string")return j4(t,e);throw ov("Field path arguments must be of type string or ",t,!1,void 0,n)}const TK=new RegExp("[~\\*/\\[\\]]");function j4(t,e,n){if(e.search(TK)>=0)throw ov(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cy(...e.split("."))._internalPath}catch{throw ov(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ov(t,e,n,r,i){const s=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(s||c)&&(f+=" (found",s&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new Ae(ge.INVALID_ARGUMENT,u+t+f)}function E4(t,e){return t.some((n=>n.isEqual(e)))}class CK{convertValue(e,n="none"){switch(ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _l(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){const n=e.fields?.[Jg].arrayValue?.values?.map((r=>_n(r.doubleValue)));return new sa(n)}convertGeoPoint(e){return new Ga(_n(e.latitude),_n(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_h(e));default:return null}}convertTimestamp(e){const n=ll(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Gt.fromString(e);Et(Gz(r),9688,{name:e});const i=new xh(r.get(1),r.get(3)),s=new qe(r.popFirst(5));return i.isEqual(n)||Ls(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class fE extends CK{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function nn(){return new cE("serverTimestamp")}function N4(t){return new uE("increment",t)}const bO="@firebase/firestore",_O="4.10.0";function xO(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class S4{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(wc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OK extends S4{data(){return super.data()}}function A4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hE{}class mE extends hE{}function Lt(t,e,...n){let r=[];e instanceof hE&&r.push(e),r=r.concat(n),(function(s){const c=s.filter((f=>f instanceof pE)).length,u=s.filter((f=>f instanceof Py)).length;if(c>1||c>0&&u>0)throw new Ae(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Py extends mE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Py(e,n,r)}_apply(e){const n=this._parse(e);return T4(e._query,n),new Ys(e.firestore,e.converter,Y1(e._query,n))}_parse(e){const n=im(e.firestore);return(function(s,c,u,f,h,p,g){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ae(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){jO(g,p);const E=[];for(const w of g)E.push(wO(f,s,w));y={arrayValue:{values:E}}}else y=wO(f,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||jO(g,p),y=AK(u,c,g,p==="in"||p==="not-in");return Rn.create(h,p,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function st(t,e,n){const r=e,i=wc("where",t);return Py._create(i,r,n)}class pE extends hE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pE(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ua.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let c=i;const u=s.getFlattenedFilters();for(const f of u)T4(c,f),c=Y1(c,f)})(e._query,n),new Ys(e.firestore,e.converter,Y1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gE extends mE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gE(e,n)}_apply(e){const n=(function(i,s,c){if(i.startAt!==null)throw new Ae(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ae(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jh(s,c)})(e._query,this._field,this._direction);return new Ys(e.firestore,e.converter,iH(e._query,n))}}function jr(t,e="asc"){const n=e,r=wc("orderBy",t);return gE._create(r,n)}class vE extends mE{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new vE(e,n,r)}_apply(e){return new Ys(e.firestore,e.converter,tv(e._query,this._limit,this._limitType))}}function hl(t){return CF("limit",t),vE._create("limit",t,"F")}function wO(t,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new Ae(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wz(e)&&n.indexOf("/")!==-1)throw new Ae(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Gt.fromString(n));if(!qe.isDocumentKey(r))throw new Ae(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return M2(t,new qe(r))}if(n instanceof hn)return M2(t,n._key);throw new Ae(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${my(n)}.`)}function jO(t,e){if(!Array.isArray(t)||t.length===0)throw new Ae(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T4(t,e){const n=(function(i,s){for(const c of i)for(const u of c.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ae(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function yE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class th{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cc extends S4{constructor(e,n,r,i,s,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=cc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}cc._jsonSchemaVersion="firestore/documentSnapshot/1.0",cc._jsonSchema={type:kn("string",cc._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class Rg extends cc{data(e={}){return super.data(e)}}class uc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new th(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Rg(this._firestore,this._userDataWriter,r.key,r,new th(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((u=>{const f=new Rg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new th(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const f=new Rg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new th(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return u.type!==0&&(h=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:PK(u.type),doc:f,oldIndex:h,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kj.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:t})}}uc._jsonSchemaVersion="firestore/querySnapshot/1.0",uc._jsonSchema={type:kn("string",uc._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class IK{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=im(e)}set(e,n,r){this._verifyNotCommitted();const i=V_(e,this._firestore),s=yE(i.converter,n,r),c=lE(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,Pr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=V_(e,this._firestore);let c;return c=typeof(n=Ft(n))=="string"||n instanceof Cy?_4(this._dataReader,"WriteBatch.update",s._key,n,r,i):b4(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(c.toMutation(s._key,Pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=V_(e,this._firestore);return this._mutations=this._mutations.concat(new jy(n._key,Pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function V_(t,e){if((t=Ft(t)).firestore!==e)throw new Ae(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Li(t){t=Or(t,hn);const e=Or(t.firestore,Wa),n=nm(e);return gK(n,t._key).then((r=>O4(e,t,r)))}function qt(t){t=Or(t,Ys);const e=Or(t.firestore,Wa),n=nm(e),r=new fE(e);return A4(t._query),vK(n,t._query).then((i=>new uc(e,r,t,i)))}function RK(t,e,n){t=Or(t,hn);const r=Or(t.firestore,Wa),i=yE(t.converter,e,n),s=im(r);return sm(r,[lE(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Pr.none())])}function wn(t,e,n,...r){t=Or(t,hn);const i=Or(t.firestore,Wa),s=im(i);let c;return c=typeof(e=Ft(e))=="string"||e instanceof Cy?_4(s,"updateDoc",t._key,e,n,r):b4(s,"updateDoc",t._key,e),sm(i,[c.toMutation(t._key,Pr.exists(!0))])}function Sd(t){return sm(Or(t.firestore,Wa),[new jy(t._key,Pr.none())])}function Bi(t,e){const n=Or(t.firestore,Wa),r=Xe(t),i=yE(t.converter,e),s=im(t.firestore);return sm(n,[lE(s,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pr.exists(!1))]).then((()=>r))}function C4(t,...e){t=Ft(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xO(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xO(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let s,c,u;if(t instanceof hn)c=Or(t.firestore,Wa),u=yy(t._key.path),s={next:h=>{e[r]&&e[r](O4(c,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Or(t,Ys);c=Or(h.firestore,Wa),u=h._query;const p=new fE(c);s={next:g=>{e[r]&&e[r](new uc(c,p,h,g))},error:e[r+1],complete:e[r+2]},A4(t._query)}const f=nm(c);return pK(f,u,i,s)}function sm(t,e){const n=nm(t);return yK(n,e)}function O4(t,e,n){const r=n.docs.get(e._key),i=new fE(t);return new cc(t,i,e._key,r,new th(n.hasPendingWrites,n.fromCache),e.converter)}function Th(t){return t=Or(t,Wa),nm(t),new IK(t,(e=>sm(t,e)))}(function(e,n=!0){vF(kc),vc(new sl("firestore",((r,{instanceIdentifier:i,options:s})=>{const c=r.getProvider("app").getImmediate(),u=new Wa(new _F(r.getProvider("auth-internal")),new jF(c,r.getProvider("app-check-internal")),VF(c,i),c);return s={useFetchStreams:n,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),Va(bO,_O,e),Va(bO,_O,"esm2020")})();var kK="firebase",DK="12.8.0";Va(kK,DK,"app");const P4="firebasestorage.googleapis.com",I4="storageBucket",MK=120*1e3,zK=600*1e3;class pn extends ts{constructor(e,n,r=0){super(B_(e),`Firebase Storage: ${n} (${B_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return B_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mn||(mn={}));function B_(t){return"storage/"+t}function bE(){const t="An unknown error occurred, please check the error payload for server response.";return new pn(mn.UNKNOWN,t)}function LK(t){return new pn(mn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function qK(t){return new pn(mn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UK(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pn(mn.UNAUTHENTICATED,t)}function VK(){return new pn(mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BK(t){return new pn(mn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $K(){return new pn(mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FK(){return new pn(mn.CANCELED,"User canceled the upload/download.")}function HK(t){return new pn(mn.INVALID_URL,"Invalid URL '"+t+"'.")}function GK(t){return new pn(mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function KK(){return new pn(mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+I4+"' property when initializing the app?")}function QK(){return new pn(mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function WK(){return new pn(mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function YK(t){return new pn(mn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sw(t){return new pn(mn.INVALID_ARGUMENT,t)}function R4(){return new pn(mn.APP_DELETED,"The Firebase app was deleted.")}function XK(t){return new pn(mn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fh(t,e){return new pn(mn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function qf(t){throw new pn(mn.INTERNAL_ERROR,"Internal error: "+t)}class hi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=hi.makeFromUrl(e,n)}catch{return new hi(e,"")}if(r.path==="")return r;throw GK(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function h(C){C.path_=decodeURIComponent(C.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",_=new RegExp(`^https?://${g}/${p}/b/${i}/o${y}`,"i"),E={bucket:1,path:3},w=n===P4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",A=new RegExp(`^https?://${w}/${i}/${N}`,"i"),O=[{regex:u,indices:f,postModify:s},{regex:_,indices:E,postModify:h},{regex:A,indices:{bucket:1,path:2},postModify:h}];for(let C=0;C<O.length;C++){const V=O[C],$=V.regex.exec(e);if($){const D=$[V.indices.bucket];let I=$[V.indices.path];I||(I=""),r=new hi(D,I),V.postModify(r);break}}if(r==null)throw HK(e);return r}}class ZK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function JK(t,e,n){let r=1,i=null,s=null,c=!1,u=0;function f(){return u===2}let h=!1;function p(...N){h||(h=!0,e.apply(null,N))}function g(N){i=setTimeout(()=>{i=null,t(_,f())},N)}function y(){s&&clearTimeout(s)}function _(N,...A){if(h){y();return}if(N){y(),p.call(null,N,...A);return}if(f()||c){y(),p.call(null,N,...A);return}r<64&&(r*=2);let O;u===1?(u=2,O=0):O=(r+Math.random())*1e3,g(O)}let E=!1;function w(N){E||(E=!0,y(),!h&&(i!==null?(N||(u=2),clearTimeout(i),g(0)):N||(u=1)))}return g(0),s=setTimeout(()=>{c=!0,w(!0)},n),w}function eQ(t){t(!1)}function tQ(t){return t!==void 0}function nQ(t){return typeof t=="object"&&!Array.isArray(t)}function _E(t){return typeof t=="string"||t instanceof String}function EO(t){return xE()&&t instanceof Blob}function xE(){return typeof Blob<"u"}function NO(t,e,n,r){if(r<e)throw sw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw sw(`Invalid value for '${t}'. Expected ${n} or less.`)}function Iy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function k4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var dc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(dc||(dc={}));function rQ(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}class iQ{constructor(e,n,r,i,s,c,u,f,h,p,g,y=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,w)=>{this.resolve_=E,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new eg(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const c=u=>{const f=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const u=s.getErrorCode()===dc.NO_ERROR,f=s.getStatus();if(!u||rQ(f,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===dc.ABORT;r(!1,new eg(!1,null,p));return}const h=this.successCodes_.indexOf(f)!==-1;r(!0,new eg(h,s))})},n=(r,i)=>{const s=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(u,u.getResponse());tQ(f)?s(f):s()}catch(f){c(f)}else if(u!==null){const f=bE();f.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,f)):c(f)}else if(i.canceled){const f=this.appDelete_?R4():FK();c(f)}else{const f=$K();c(f)}};this.canceled_?n(!1,new eg(!1,null,!0)):this.backoffId_=JK(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class eg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function aQ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function sQ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function oQ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lQ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cQ(t,e,n,r,i,s,c=!0,u=!1){const f=k4(t.urlParams),h=t.url+f,p=Object.assign({},t.headers);return oQ(p,e),aQ(p,n),sQ(p,s),lQ(p,r),new iQ(h,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,u)}function uQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dQ(...t){const e=uQ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(xE())return new Blob(t);throw new pn(mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fQ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function hQ(t){if(typeof atob>"u")throw YK("base-64");return atob(t)}const La={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $_{constructor(e,n){this.data=e,this.contentType=n||null}}function mQ(t,e){switch(t){case La.RAW:return new $_(D4(e));case La.BASE64:case La.BASE64URL:return new $_(M4(t,e));case La.DATA_URL:return new $_(gQ(e),vQ(e))}throw bE()}function D4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,c=t.charCodeAt(++n);r=65536|(s&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function pQ(t){let e;try{e=decodeURIComponent(t)}catch{throw fh(La.DATA_URL,"Malformed data URL.")}return D4(e)}function M4(t,e){switch(t){case La.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw fh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case La.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw fh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=hQ(e)}catch(i){throw i.message.includes("polyfill")?i:fh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class z4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw fh(La.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=yQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gQ(t){const e=new z4(t);return e.base64?M4(La.BASE64,e.rest):pQ(e.rest)}function vQ(t){return new z4(t).contentType}function yQ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Qo{constructor(e,n){let r=0,i="";EO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(EO(this.data_)){const r=this.data_,i=fQ(r,e,n);return i===null?null:new Qo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Qo(r,!0)}}static getBlob(...e){if(xE()){const n=e.map(r=>r instanceof Qo?r.data_:r);return new Qo(dQ.apply(null,n))}else{const n=e.map(c=>_E(c)?mQ(La.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(c=>{for(let u=0;u<c.length;u++)i[s++]=c[u]}),new Qo(i,!0)}}uploadData(){return this.data_}}function L4(t){let e;try{e=JSON.parse(t)}catch{return null}return nQ(e)?e:null}function bQ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _Q(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function q4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function xQ(t,e){return e}class Ar{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||xQ}}let tg=null;function wQ(t){return!_E(t)||t.length<2?t:q4(t)}function U4(){if(tg)return tg;const t=[];t.push(new Ar("bucket")),t.push(new Ar("generation")),t.push(new Ar("metageneration")),t.push(new Ar("name","fullPath",!0));function e(s,c){return wQ(c)}const n=new Ar("name");n.xform=e,t.push(n);function r(s,c){return c!==void 0?Number(c):c}const i=new Ar("size");return i.xform=r,t.push(i),t.push(new Ar("timeCreated")),t.push(new Ar("updated")),t.push(new Ar("md5Hash",null,!0)),t.push(new Ar("cacheControl",null,!0)),t.push(new Ar("contentDisposition",null,!0)),t.push(new Ar("contentEncoding",null,!0)),t.push(new Ar("contentLanguage",null,!0)),t.push(new Ar("contentType",null,!0)),t.push(new Ar("metadata","customMetadata",!0)),tg=t,tg}function jQ(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new hi(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function EQ(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const c=n[s];r[c.local]=c.xform(r,e[c.server])}return jQ(r,t),r}function V4(t,e,n){const r=L4(e);return r===null?null:EQ(t,r,n)}function NQ(t,e,n,r){const i=L4(e);if(i===null||!_E(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const c=encodeURIComponent;return s.split(",").map(h=>{const p=t.bucket,g=t.fullPath,y="/b/"+c(p)+"/o/"+c(g),_=Iy(y,n,r),E=k4({alt:"media",token:h});return _+E})[0]}function SQ(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class wE{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function B4(t){if(!t)throw bE()}function AQ(t,e){function n(r,i){const s=V4(t,i,e);return B4(s!==null),s}return n}function TQ(t,e){function n(r,i){const s=V4(t,i,e);return B4(s!==null),NQ(s,i,t.host,t._protocol)}return n}function $4(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=VK():i=UK():n.getStatus()===402?i=qK(t.bucket):n.getStatus()===403?i=BK(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function F4(t){const e=$4(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=LK(t.path)),s.serverResponse=i.serverResponse,s}return n}function CQ(t,e,n){const r=e.fullServerUrl(),i=Iy(r,t.host,t._protocol),s="GET",c=t.maxOperationRetryTime,u=new wE(i,s,TQ(t,n),c);return u.errorHandler=F4(e),u}function OQ(t,e){const n=e.fullServerUrl(),r=Iy(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function c(f,h){}const u=new wE(r,i,c,s);return u.successCodes=[200,204],u.errorHandler=F4(e),u}function PQ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function IQ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=PQ(null,e)),r}function RQ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let O="";for(let C=0;C<2;C++)O=O+Math.random().toString().slice(2);return O}const f=u();c["Content-Type"]="multipart/related; boundary="+f;const h=IQ(e,r,i),p=SQ(h,n),g="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+f+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+f+"--",_=Qo.getBlob(g,r,y);if(_===null)throw QK();const E={name:h.fullPath},w=Iy(s,t.host,t._protocol),N="POST",A=t.maxUploadRetryTime,R=new wE(w,N,AQ(t,n),A);return R.urlParams=E,R.headers=c,R.body=_.uploadData(),R.errorHandler=$4(e),R}class kQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw qf("cannot .send() more than once");if(yl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const c in s)s.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,s[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class DQ extends kQ{initXhr(){this.xhr_.responseType="text"}}function jE(){return new DQ}class jc{constructor(e,n){this._service=e,n instanceof hi?this._location=n:this._location=hi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new jc(e,n)}get root(){const e=new hi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return q4(this._location.path)}get storage(){return this._service}get parent(){const e=bQ(this._location.path);if(e===null)return null;const n=new hi(this._location.bucket,e);return new jc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw XK(e)}}function MQ(t,e,n){t._throwIfRoot("uploadBytes");const r=RQ(t.storage,t._location,U4(),new Qo(e,!0),n);return t.storage.makeRequestWithTokens(r,jE).then(i=>({metadata:i,ref:t}))}function zQ(t){t._throwIfRoot("getDownloadURL");const e=CQ(t.storage,t._location,U4());return t.storage.makeRequestWithTokens(e,jE).then(n=>{if(n===null)throw WK();return n})}function LQ(t){t._throwIfRoot("deleteObject");const e=OQ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,jE)}function qQ(t,e){const n=_Q(t._location.path,e),r=new hi(t._location.bucket,n);return new jc(t.storage,r)}function UQ(t){return/^[A-Za-z]+:\/\//.test(t)}function VQ(t,e){return new jc(t,e)}function H4(t,e){if(t instanceof EE){const n=t;if(n._bucket==null)throw KK();const r=new jc(n,n._bucket);return e!=null?H4(r,e):r}else return e!==void 0?qQ(t,e):t}function BQ(t,e){if(e&&UQ(e)){if(t instanceof EE)return VQ(t,e);throw sw("To use ref(service, url), the first argument must be a Storage instance.")}else return H4(t,e)}function SO(t,e){const n=e?.[I4];return n==null?null:hi.makeFromBucketSpec(n,t)}function $Q(t,e,n,r={}){t.host=`${e}:${n}`;const i=yl(e);i&&(_j(`https://${t.host}/b`),xj("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:uM(s,t.app.options.projectId))}class EE{constructor(e,n,r,i,s,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=c,this._bucket=null,this._host=P4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MK,this._maxUploadRetryTime=zK,this._requests=new Set,i!=null?this._bucket=hi.makeFromBucketSpec(i,this._host):this._bucket=SO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hi.makeFromBucketSpec(this._url,e):this._bucket=SO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jc(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new ZK(R4());{const c=cQ(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const AO="@firebase/storage",TO="0.14.0";const G4="storage";function FQ(t,e,n){return t=Ft(t),MQ(t,e,n)}function HQ(t){return t=Ft(t),zQ(t)}function GQ(t){return t=Ft(t),LQ(t)}function CO(t,e){return t=Ft(t),BQ(t,e)}function KQ(t=Ej(),e){t=Ft(t);const r=uy(t,G4).getImmediate({identifier:e}),i=oM("storage");return i&&QQ(r,...i),r}function QQ(t,e,n,r={}){$Q(t,e,n,r)}function WQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new EE(n,r,i,e,kc)}function YQ(){vc(new sl(G4,WQ,"PUBLIC").setMultipleInstances(!0)),Va(AO,TO,""),Va(AO,TO,"esm2020")}YQ();const XQ={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},NE=hM(XQ),ng=pF(NE),Ee=wK(NE),OO=KQ(NE),PO={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},IO=t=>PO[t]||PO.default,K4=j.createContext(null),ZQ=({children:t})=>{const[e,n]=j.useState(null),[r,i]=j.useState(!0),s=async y=>{try{const _=await Li(Xe(Ee,"users",y));if(_.exists()){const E=_.data();return{uid:y,email:E.email,displayName:E.displayName,role:E.role,isPremium:E.isPremium||!1,subscriptionEnd:E.subscriptionEnd?.toDate()||null,photoURL:E.photoURL,createdAt:E.createdAt?.toDate()||new Date,lastLogin:E.lastLogin?.toDate()}}return null}catch(_){return console.error("Erreur lors de la rcupration des donnes utilisateur:",_),null}},c=async(y,_)=>{const E=Xe(Ee,"users",y.uid);(await Li(E)).exists()?await wn(E,{lastLogin:nn()}):await RK(E,{email:y.email,displayName:y.displayName||_?.displayName||"",role:_?.role||"eleve",isPremium:!1,photoURL:y.photoURL,createdAt:nn(),lastLogin:nn()})},u=async(y,_)=>{try{const E=await Z7(ng,y,_);await c(E.user)}catch(E){throw new Error(IO(E.code))}},f=async y=>{try{if(y.password!==y.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const _=await X7(ng,y.email,y.password);await e$(_.user,{displayName:y.displayName}),await c(_.user,{displayName:y.displayName,role:y.role})}catch(_){throw _.message?_:new Error(IO(_.code))}},h=async()=>{try{await i$(ng),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},p=async y=>{if(!e)throw new Error("Aucun utilisateur connect.");try{const _=Xe(Ee,"users",e.uid);await wn(_,{...y,updatedAt:nn()}),n(E=>E?{...E,...y}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};j.useEffect(()=>{const y=r$(ng,async _=>{if(_){const E=await s(_.uid);n(E)}else n(null);i(!1)});return()=>y()},[]);const g={currentUser:e,loading:r,login:u,register:f,logout:h,updateProfile:p};return o.jsx(K4.Provider,{value:g,children:r?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement..."})]}):t})},Vn=()=>{const t=j.useContext(K4);if(!t)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return t},SE=({children:t,allowedRoles:e,requirePremium:n=!1})=>{const{currentUser:r,loading:i}=Vn();return i?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Vrification des autorisations..."})]}):r?e&&!e.includes(r.role)?o.jsxs("div",{className:"error-container",children:[o.jsx("h2",{children:"Accs non autoris"}),o.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),o.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!r.isPremium?o.jsxs("div",{className:"error-container premium-required",children:[o.jsx("h2",{children:"Contenu Premium"}),o.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),o.jsxs("div",{className:"premium-cta",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",o.jsx("strong",{children:"20 000 FCFA/an"})]}),o.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):o.jsx(o.Fragment,{children:t}):o.jsxs("div",{className:"error-container",children:[o.jsx("h2",{children:"Accs refus"}),o.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),o.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},ws=({children:t})=>o.jsx(SE,{allowedRoles:["admin"],children:t}),JQ=({children:t})=>o.jsx(SE,{allowedRoles:["admin","prof"],children:t});const eW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),RO=t=>{const e=tW(t);return e.charAt(0).toUpperCase()+e.slice(1)},Q4=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),nW=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var rW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iW=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:c,...u},f)=>j.createElement("svg",{ref:f,...rW,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Q4("lucide",i),...!s&&!nW(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,p])=>j.createElement(h,p)),...Array.isArray(s)?s:[s]]));const De=(t,e)=>{const n=j.forwardRef(({className:r,...i},s)=>j.createElement(iW,{ref:s,iconNode:e,className:Q4(`lucide-${eW(RO(t))}`,`lucide-${t}`,r),...i}));return n.displayName=RO(t),n};const aW=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],F_=De("arrow-left",aW);const sW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ec=De("arrow-right",sW);const oW=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ec=De("award",oW);const lW=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],oa=De("book-open",lW);const cW=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],H_=De("calendar",cW);const uW=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Xu=De("chart-column",uW);const dW=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],lv=De("chevron-down",dW);const fW=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ow=De("chevron-up",fW);const hW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cv=De("circle-alert",hW);const mW=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bn=De("circle-check-big",mW);const pW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kg=De("circle-question-mark",pW);const gW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lw=De("circle-x",gW);const vW=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],od=De("clock",vW);const yW=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],bW=De("copy",yW);const _W=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],nh=De("crown",_W);const xW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cw=De("eye",xW);const wW=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],jW=De("facebook",wW);const EW=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],NW=De("file-text",EW);const SW=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],W4=De("funnel",SW);const AW=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ld=De("graduation-cap",AW);const TW=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],CW=De("grip-vertical",TW);const OW=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],PW=De("heart",OW);const IW=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],uw=De("house",IW);const RW=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],kW=De("instagram",RW);const DW=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],kO=De("layout-dashboard",DW);const MW=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],zW=De("linkedin",MW);const LW=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dw=De("lock",LW);const qW=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],DO=De("log-out",qW);const UW=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],VW=De("mail",UW);const BW=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$W=De("map-pin",BW);const FW=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],HW=De("menu",FW);const GW=[["path",{d:"M5 12h14",key:"1ays0h"}]],KW=De("minus",GW);const QW=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],WW=De("pen-line",QW);const YW=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],XW=De("phone",YW);const ZW=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],hh=De("play",ZW);const JW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rg=De("plus",JW);const eY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tY=De("refresh-cw",eY);const nY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],rY=De("rotate-ccw",nY);const iY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],aY=De("save",iY);const sY=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Y4=De("search",sY);const oY=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lY=De("settings",oY);const cY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],AE=De("shield",cY);const uY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],mi=De("star",uY);const dY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],MO=De("target",dY);const fY=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],hY=De("timer",fY);const mY=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zO=De("trash-2",mY);const pY=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],gY=De("trending-down",pY);const vY=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fw=De("trending-up",vY);const yY=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],X4=De("trophy",yY);const bY=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],_Y=De("twitter",bY);const xY=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],wY=De("user-check",xY);const jY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],EY=De("user-x",jY);const NY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],SY=De("user",NY);const AY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dg=De("users",AY);const TY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fc=De("x",TY);const CY=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],OY=De("youtube",CY);const PY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Z4=De("zap",PY),IY=()=>{const{currentUser:t,logout:e,loading:n}=Vn(),r=kr(),i=vl(),[s,c]=j.useState(!1),[u,f]=j.useState(!1),[h,p]=j.useState(!1),g=j.useRef(null),y=[{path:"/",label:"Accueil",icon:o.jsx(uw,{size:18})},{path:"/disciplines",label:"Disciplines",icon:o.jsx(oa,{size:18})},{path:"/quiz",label:"Quiz",icon:o.jsx(ld,{size:18}),requireAuth:!0,requirePremium:!0},{path:t?.role==="eleve"?"/eleve/dashboard":t?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:o.jsx(kO,{size:18}),requireAuth:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:o.jsx(Xu,{size:18}),requireAuth:!0,requireRole:["parent"]}];j.useEffect(()=>{const C=V=>{g.current&&!g.current.contains(V.target)&&f(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),j.useEffect(()=>{c(!1),f(!1)},[i.pathname]),j.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]);const _=async()=>{try{p(!0),await e(),f(!1),r("/")}catch(C){console.error("Erreur lors de la dconnexion:",C)}finally{p(!1)}},E=()=>{c(!s)},w=()=>{f(!u)},N=C=>!(C.requireAuth&&!t||C.requirePremium&&t&&!t.isPremium||C.requireRole&&t&&!C.requireRole.includes(t.role)),A=C=>C==="/"?i.pathname==="/":i.pathname.startsWith(C),R=C=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[C]||C,O=()=>t?t.displayName?t.displayName.split(" ").map(V=>V[0]).join("").toUpperCase().slice(0,2):t.email[0].toUpperCase():"?";return o.jsxs("header",{className:"header",children:[o.jsxs("div",{className:"header__container",children:[o.jsxs(tt,{to:"/",className:"header__logo",children:[o.jsx(ld,{className:"header__logo-icon",size:32}),o.jsxs("div",{className:"header__logo-text",children:[o.jsx("span",{className:"header__logo-name",children:"PedaClic"}),o.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),o.jsx("nav",{className:"header__nav header__nav--desktop",children:o.jsx("ul",{className:"header__nav-list",children:y.map(C=>N(C)&&o.jsx("li",{className:"header__nav-item",children:o.jsxs(tt,{to:C.path,className:`header__nav-link ${A(C.path)?"header__nav-link--active":""}`,children:[C.icon,o.jsx("span",{children:C.label}),C.requirePremium&&o.jsx(nh,{size:14,className:"header__premium-badge"})]})},C.path))})}),o.jsxs("div",{className:"header__actions",children:[n?o.jsx("div",{className:"header__loading",children:o.jsx("div",{className:"header__spinner"})}):t?o.jsxs("div",{className:"header__user",ref:g,children:[t.isPremium&&o.jsxs("span",{className:"header__premium-tag",children:[o.jsx(nh,{size:14}),"Premium"]}),o.jsxs("button",{className:"header__user-button",onClick:w,"aria-expanded":u,"aria-haspopup":"true",children:[o.jsx("div",{className:"header__avatar",children:t.photoURL?o.jsx("img",{src:t.photoURL,alt:t.displayName||"Avatar",className:"header__avatar-img"}):o.jsx("span",{className:"header__avatar-initials",children:O()})}),o.jsx("span",{className:"header__user-name",children:t.displayName||t.email.split("@")[0]}),o.jsx(lv,{size:16,className:`header__chevron ${u?"header__chevron--open":""}`})]}),u&&o.jsxs("div",{className:"header__dropdown",children:[o.jsxs("div",{className:"header__dropdown-header",children:[o.jsx("p",{className:"header__dropdown-email",children:t.email}),o.jsx("span",{className:`header__dropdown-role header__dropdown-role--${t.role}`,children:R(t.role)})]}),o.jsx("div",{className:"header__dropdown-divider"}),o.jsxs("nav",{className:"header__dropdown-nav",children:[o.jsxs(tt,{to:t.role==="eleve"?"/eleve/dashboard":t.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[o.jsx(kO,{size:18}),o.jsx("span",{children:"Tableau de bord"})]}),t.role==="eleve"&&o.jsxs(tt,{to:"/eleve/suivi",className:"header__dropdown-link",children:[o.jsx(Xu,{size:18}),o.jsx("span",{children:"Mes points  amliorer"})]}),t.role==="parent"&&o.jsxs(tt,{to:"/parent/dashboard",className:"header__dropdown-link",children:[o.jsx(Xu,{size:18}),o.jsx("span",{children:"Espace Parent"})]}),o.jsxs(tt,{to:"/profil",className:"header__dropdown-link",children:[o.jsx(SY,{size:18}),o.jsx("span",{children:"Mon profil"})]}),t.role==="admin"&&o.jsxs(tt,{to:"/admin",className:"header__dropdown-link",children:[o.jsx(lY,{size:18}),o.jsx("span",{children:"Administration"})]}),!t.isPremium&&o.jsxs(tt,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[o.jsx(nh,{size:18}),o.jsx("span",{children:"Passer Premium"})]})]}),o.jsx("div",{className:"header__dropdown-divider"}),o.jsxs("button",{className:"header__dropdown-logout",onClick:_,disabled:h,children:[o.jsx(DO,{size:18}),o.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]}):o.jsxs("div",{className:"header__auth-buttons",children:[o.jsx(tt,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),o.jsx(tt,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),o.jsx("button",{className:"header__mobile-toggle",onClick:E,"aria-label":s?"Fermer le menu":"Ouvrir le menu","aria-expanded":s,children:s?o.jsx(fc,{size:24}):o.jsx(HW,{size:24})})]})]}),o.jsxs("div",{className:`header__mobile-menu ${s?"header__mobile-menu--open":""}`,children:[o.jsx("div",{className:"header__mobile-overlay",onClick:()=>c(!1)}),o.jsxs("div",{className:"header__mobile-content",children:[o.jsx("nav",{className:"header__mobile-nav",children:o.jsx("ul",{className:"header__mobile-list",children:y.map(C=>N(C)&&o.jsx("li",{className:"header__mobile-item",children:o.jsxs(tt,{to:C.path,className:`header__mobile-link ${A(C.path)?"header__mobile-link--active":""}`,children:[C.icon,o.jsx("span",{children:C.label}),C.requirePremium&&o.jsx(nh,{size:14,className:"header__premium-badge"})]})},C.path))})}),!t&&o.jsxs("div",{className:"header__mobile-auth",children:[o.jsx(tt,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),o.jsx(tt,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),t&&o.jsxs("div",{className:"header__mobile-user",children:[o.jsxs("div",{className:"header__mobile-user-info",children:[o.jsx("div",{className:"header__avatar header__avatar--large",children:t.photoURL?o.jsx("img",{src:t.photoURL,alt:t.displayName||"Avatar",className:"header__avatar-img"}):o.jsx("span",{className:"header__avatar-initials",children:O()})}),o.jsxs("div",{className:"header__mobile-user-details",children:[o.jsx("p",{className:"header__mobile-user-name",children:t.displayName||t.email.split("@")[0]}),o.jsx("p",{className:"header__mobile-user-email",children:t.email})]})]}),o.jsxs("button",{className:"header__mobile-logout",onClick:_,disabled:h,children:[o.jsx(DO,{size:18}),o.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},RY=()=>{const t=new Date().getFullYear(),e=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],n=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],r=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:o.jsx(jW,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:o.jsx(_Y,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:o.jsx(kW,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:o.jsx(zW,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:o.jsx(OY,{size:20})}];return o.jsxs("footer",{className:"footer",children:[o.jsx("div",{className:"footer__main",children:o.jsxs("div",{className:"footer__container",children:[o.jsxs("div",{className:"footer__column footer__column--about",children:[o.jsxs(tt,{to:"/",className:"footer__logo",children:[o.jsx(ld,{className:"footer__logo-icon",size:36}),o.jsxs("div",{className:"footer__logo-text",children:[o.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),o.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),o.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),o.jsxs("div",{className:"footer__stats",children:[o.jsxs("div",{className:"footer__stat",children:[o.jsx(oa,{size:18}),o.jsx("span",{children:"500+ cours"})]}),o.jsxs("div",{className:"footer__stat",children:[o.jsx(Dg,{size:18}),o.jsx("span",{children:"10 000+ lves"})]})]})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),o.jsx("nav",{className:"footer__nav",children:o.jsx("ul",{className:"footer__list",children:e.map((i,s)=>o.jsx("li",{className:"footer__item",children:o.jsx(tt,{to:i.path,className:"footer__link",children:i.label})},s))})})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),o.jsx("nav",{className:"footer__nav",children:o.jsx("ul",{className:"footer__list",children:n.map((i,s)=>o.jsx("li",{className:"footer__item",children:o.jsx(tt,{to:i.path,className:"footer__link",children:i.label})},s))})})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),o.jsxs("div",{className:"footer__contact",children:[o.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[o.jsx(VW,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"contact@pedaclic.sn"})]}),o.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[o.jsx(XW,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"+221 77 000 00 00"})]}),o.jsxs("div",{className:"footer__contact-item",children:[o.jsx($W,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"Dakar, Sngal"})]})]}),o.jsxs("div",{className:"footer__social",children:[o.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),o.jsx("div",{className:"footer__social-links",children:r.map((i,s)=>o.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:i.name,children:i.icon},s))})]})]})]})}),o.jsx("div",{className:"footer__bottom",children:o.jsxs("div",{className:"footer__container footer__bottom-content",children:[o.jsxs("p",{className:"footer__copyright",children:[" ",t," PedaClic. Tous droits rservs."]}),o.jsxs("p",{className:"footer__made-with",children:["Fait avec ",o.jsx(PW,{size:14,className:"footer__heart"})," au Sngal "]}),o.jsxs("nav",{className:"footer__legal",children:[o.jsxs(tt,{to:"/mentions-legales",className:"footer__legal-link",children:[o.jsx(NW,{size:14})," Mentions lgales"]}),o.jsxs(tt,{to:"/confidentialite",className:"footer__legal-link",children:[o.jsx(AE,{size:14})," Confidentialit"]}),o.jsxs(tt,{to:"/aide",className:"footer__legal-link",children:[o.jsx(kg,{size:14})," Aide"]})]})]})})]})},Ia=({children:t,hideHeader:e=!1,hideFooter:n=!1,className:r=""})=>o.jsxs("div",{className:"layout",children:[!e&&o.jsx(IY,{}),o.jsx("main",{className:`layout__main ${e?"":"layout__main--with-header"} ${r}`,children:t}),!n&&o.jsx(RY,{})]}),kY=()=>{const{currentUser:t}=Vn();return o.jsxs("div",{className:"home-page",children:[o.jsxs("section",{className:"home-page__hero",children:[o.jsxs("div",{className:"home-page__hero-content",children:[o.jsxs("div",{className:"home-page__hero-badge",children:[o.jsx(mi,{size:14}),o.jsx("span",{children:"Plateforme N1 au Sngal"})]}),o.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",o.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),o.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),o.jsx("div",{className:"home-page__hero-cta",children:t?o.jsxs(tt,{to:t.role==="eleve"?"/eleve/dashboard":t.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",o.jsx(ec,{size:20})]}):o.jsxs(o.Fragment,{children:[o.jsxs(tt,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",o.jsx(ec,{size:20})]}),o.jsxs(tt,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[o.jsx(hh,{size:18}),"Dcouvrir les cours"]})]})}),o.jsxs("div",{className:"home-page__hero-stats",children:[o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"10 000+"}),o.jsx("span",{children:"lves inscrits"})]}),o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"500+"}),o.jsx("span",{children:"Cours disponibles"})]}),o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"95%"}),o.jsx("span",{children:"Taux de russite"})]})]})]}),o.jsx("div",{className:"home-page__hero-image",children:o.jsxs("div",{className:"home-page__hero-illustration",children:[o.jsx(ld,{size:120}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),o.jsx("section",{className:"home-page__levels",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),o.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),o.jsxs("div",{className:"home-page__levels-grid",children:[o.jsxs(tt,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[o.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),o.jsx("h3",{children:"Collge"}),o.jsx("p",{children:"6me  3me"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx(bn,{size:16})," Prparation au BFEM"]}),o.jsxs("li",{children:[o.jsx(bn,{size:16})," 9 matires disponibles"]}),o.jsxs("li",{children:[o.jsx(bn,{size:16})," Exercices corrigs"]})]}),o.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",o.jsx(ec,{size:16})]})]}),o.jsxs(tt,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[o.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),o.jsx("h3",{children:"Lyce"}),o.jsx("p",{children:"2nde  Terminale"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx(bn,{size:16})," Prparation au BAC"]}),o.jsxs("li",{children:[o.jsx(bn,{size:16})," 12 matires disponibles"]}),o.jsxs("li",{children:[o.jsx(bn,{size:16})," Annales d'examens"]})]}),o.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",o.jsx(ec,{size:16})]})]})]})]})}),o.jsx("section",{className:"home-page__features",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),o.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),o.jsxs("div",{className:"home-page__features-grid",children:[o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon",children:o.jsx(oa,{size:28})}),o.jsx("h3",{children:"Cours complets"}),o.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:o.jsx(Z4,{size:28})}),o.jsx("h3",{children:"Quiz interactifs"}),o.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:o.jsx(X4,{size:28})}),o.jsx("h3",{children:"Suivi de progression"}),o.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:o.jsx(AE,{size:28})}),o.jsx("h3",{children:"Contenu vrifi"}),o.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:o.jsx(od,{size:28})}),o.jsx("h3",{children:"Accessible 24/7"}),o.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:o.jsx(Ec,{size:28})}),o.jsx("h3",{children:"Certificats"}),o.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),o.jsx("section",{className:"home-page__premium",children:o.jsx("div",{className:"home-page__container",children:o.jsxs("div",{className:"home-page__premium-content",children:[o.jsxs("div",{className:"home-page__premium-text",children:[o.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),o.jsx("h2",{children:"Passez  la vitesse suprieure"}),o.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",o.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),o.jsxs("ul",{className:"home-page__premium-features",children:[o.jsxs("li",{children:[o.jsx(bn,{size:18})," Quiz illimits dans toutes les matires"]}),o.jsxs("li",{children:[o.jsx(bn,{size:18})," Corrections dtailles des exercices"]}),o.jsxs("li",{children:[o.jsx(bn,{size:18})," Annales des examens (BFEM, BAC)"]}),o.jsxs("li",{children:[o.jsx(bn,{size:18})," Support prioritaire"]})]}),o.jsxs(tt,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",o.jsx(ec,{size:20})]})]}),o.jsx("div",{className:"home-page__premium-pricing",children:o.jsxs("div",{className:"home-page__pricing-card",children:[o.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),o.jsx("h3",{children:"Abonnement Annuel"}),o.jsxs("div",{className:"home-page__pricing-price",children:[o.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),o.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),o.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),o.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),o.jsx(tt,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),o.jsx("section",{className:"home-page__testimonials",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),o.jsxs("div",{className:"home-page__testimonials-grid",children:[o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(mi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Fatou Adara"}),o.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(mi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Moussa Diallo"}),o.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(mi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Aminata Ndiaye"}),o.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),o.jsx("section",{className:"home-page__final-cta",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{children:"Prt  russir ?"}),o.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!t&&o.jsxs(tt,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",o.jsx(ec,{size:24})]})]})})]})},DY=()=>{const{login:t}=Vn(),e=kr(),r=vl().state?.from||"/",[i,s]=j.useState({email:"",password:""}),[c,u]=j.useState(!1),[f,h]=j.useState(""),[p,g]=j.useState(!1),y=w=>{const{name:N,value:A}=w.target;s(R=>({...R,[N]:A})),f&&h("")},_=()=>i.email.trim()?i.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)?!0:(h("Veuillez entrer une adresse email valide."),!1):(h("Veuillez entrer votre mot de passe."),!1):(h("Veuillez entrer votre adresse email."),!1),E=async w=>{if(w.preventDefault(),!!_()){u(!0),h("");try{await t(i.email,i.password),e(r,{replace:!0})}catch(N){N instanceof Error?h(N.message):h("Une erreur est survenue lors de la connexion.")}finally{u(!1)}}};return o.jsx("div",{className:"auth-page",children:o.jsxs("div",{className:"auth-container",children:[o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs(tt,{to:"/",className:"auth-logo",children:[o.jsx("div",{className:"auth-logo__icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),o.jsx("span",{children:"PedaClic"})]}),o.jsx("h1",{className:"auth-title",children:"Connexion"}),o.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),f&&o.jsxs("div",{className:"auth-error",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4M12 16h.01"})]}),o.jsx("span",{children:f})]}),o.jsxs("form",{onSubmit:E,className:"auth-form",children:[o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:y,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:c})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),o.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),o.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:i.password,onChange:y,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:c}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>g(!p),"aria-label":p?"Masquer le mot de passe":"Afficher le mot de passe",children:p?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),o.jsx("div",{className:"auth-forgot",children:o.jsx(tt,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),o.jsx("button",{type:"submit",className:"auth-button",disabled:c,children:c?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:"ou"})}),o.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",o.jsx(tt,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),o.jsxs("div",{className:"auth-welcome",children:[o.jsx("h2",{children:"Bienvenue sur PedaClic !"}),o.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),o.jsxs("ul",{className:"auth-features",children:[o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},MY=()=>{const{register:t}=Vn(),e=kr(),[n,r]=j.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[i,s]=j.useState(!1),[c,u]=j.useState(""),[f,h]=j.useState(!1),[p,g]=j.useState(!1),[y,_]=j.useState(!1),E=A=>{const{name:R,value:O}=A.target;r(C=>({...C,[R]:O})),c&&u("")},w=()=>n.displayName.trim()?n.displayName.trim().length<2?(u("Le nom doit contenir au moins 2 caractres."),!1):n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.password?n.password.length<6?(u("Le mot de passe doit contenir au moins 6 caractres."),!1):n.password!==n.confirmPassword?(u("Les mots de passe ne correspondent pas."),!1):y?!0:(u("Veuillez accepter les conditions d'utilisation."),!1):(u("Veuillez entrer un mot de passe."),!1):(u("Veuillez entrer une adresse email valide."),!1):(u("Veuillez entrer votre adresse email."),!1):(u("Veuillez entrer votre nom complet."),!1),N=async A=>{if(A.preventDefault(),!!w()){s(!0),u("");try{await t(n),e("/disciplines",{replace:!0})}catch(R){R instanceof Error?u(R.message):u("Une erreur est survenue lors de l'inscription.")}finally{s(!1)}}};return o.jsx("div",{className:"auth-page",children:o.jsxs("div",{className:"auth-container",children:[o.jsxs("div",{className:"auth-card auth-card--register",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs(tt,{to:"/",className:"auth-logo",children:[o.jsx("div",{className:"auth-logo__icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),o.jsx("span",{children:"PedaClic"})]}),o.jsx("h1",{className:"auth-title",children:"Crer un compte"}),o.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),c&&o.jsxs("div",{className:"auth-error",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4M12 16h.01"})]}),o.jsx("span",{children:c})]}),o.jsxs("form",{onSubmit:N,className:"auth-form",children:[o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),o.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:E,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:i})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:E,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:i})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{className:"auth-label",children:"Je suis :"}),o.jsxs("div",{className:"auth-role-selector",children:[o.jsxs("label",{className:`auth-role-option ${n.role==="eleve"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"eleve",checked:n.role==="eleve",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),o.jsx("span",{children:"lve"})]})]}),o.jsxs("label",{className:`auth-role-option ${n.role==="prof"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"prof",checked:n.role==="prof",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),o.jsx("span",{children:"Professeur"})]})]}),o.jsxs("label",{className:`auth-role-option ${n.role==="parent"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"parent",checked:n.role==="parent",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),o.jsx("span",{children:"Parent d'lve"})]})]})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),o.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),o.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:n.password,onChange:E,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:i}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>h(!f),"aria-label":f?"Masquer":"Afficher",children:f?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),o.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),o.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:E,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:i}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>g(!p),"aria-label":p?"Masquer":"Afficher",children:p?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),o.jsx("div",{className:"auth-checkbox-field",children:o.jsxs("label",{className:"auth-checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:y,onChange:A=>_(A.target.checked),className:"auth-checkbox",disabled:i}),o.jsx("span",{className:"auth-checkbox-custom"}),o.jsxs("span",{children:["J'accepte les"," ",o.jsx(tt,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",o.jsx(tt,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),o.jsx("button",{type:"submit",className:"auth-button",disabled:i,children:i?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:"ou"})}),o.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",o.jsx(tt,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),o.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[o.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),o.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),o.jsxs("div",{className:"auth-stats",children:[o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"10 000+"}),o.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"500+"}),o.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"95%"}),o.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),o.jsxs("div",{className:"auth-testimonial",children:[o.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),o.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},J4=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],eL=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],tL=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],nL={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function LO(t){switch(t){case"college":return J4;case"lycee":return eL;case"formation_libre":return tL;default:return[]}}function rL(t){return[...J4,...eL,...tL].find(n=>n.value===t)?.label||t}const qO=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],zY=()=>{const[t,e]=j.useState("college"),[n,r]=j.useState([]),[i,s]=j.useState(!0),c=kr();j.useEffect(()=>{const h=Lt(rt(Ee,"disciplines"),jr("ordre")),p=C4(h,g=>{const y=g.docs.map(_=>({id:_.id,..._.data(),createdAt:_.data().createdAt?.toDate()||new Date,updatedAt:_.data().updatedAt?.toDate()||new Date}));r(y),s(!1)});return()=>p()},[]);const u=n.filter(h=>h.niveau===t),f=qO.find(h=>h.niveau===t);return o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[o.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[o.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),o.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:qO.map(h=>{const p=t===h.niveau;return o.jsxs("button",{onClick:()=>e(h.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${p?h.color:"#e2e8f0"}`,background:p?h.bgLight:"#fff",color:p?h.color:"#718096",fontSize:"1rem",fontWeight:p?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:p?`0 2px 8px ${h.color}20`:"none"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:h.icon}),h.label]},h.niveau)})}),i&&o.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!i&&u.length===0&&o.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[o.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),o.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",nL[t]," pour le moment."]})]}),!i&&u.length>0&&o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:u.map(h=>o.jsxs("div",{onClick:()=>c(`/disciplines/${h.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${h.couleur||f.color}`},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[o.jsx("span",{style:{fontSize:"1.8rem"},children:h.icone||""}),o.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:h.nom})]}),h.description&&o.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:h.description.length>100?`${h.description.slice(0,100)}...`:h.description}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:o.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:f.bgLight,color:f.color},children:rL(h.classe)})}),h.coefficient!==void 0&&o.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",h.coefficient]})]},h.id))})]})},Uf="disciplines",UO=t=>{const e=t.data();return{id:t.id,nom:e.nom,niveau:e.niveau,classe:e.classe,ordre:e.ordre,coefficient:e.coefficient,couleur:e.couleur,icone:e.icone,description:e.description,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},Lc={async getAll(t){try{const e=[jr("ordre","asc")];t?.niveau&&e.unshift(st("niveau","==",t.niveau)),t?.classe&&e.unshift(st("classe","==",t.classe));const n=Lt(rt(Ee,Uf),...e);return(await qt(n)).docs.map(UO)}catch(e){throw console.error("Erreur lors de la rcupration des disciplines:",e),new Error("Impossible de rcuprer les disciplines")}},async getById(t){try{const e=Xe(Ee,Uf,t),n=await Li(e);return n.exists()?UO(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la discipline:",e),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(t){return this.getAll({niveau:t})},async getByClasse(t){return this.getAll({classe:t})},async create(t){try{return(await Bi(rt(Ee,Uf),{...t,createdAt:nn(),updatedAt:nn()})).id}catch(e){throw console.error("Erreur lors de la cration de la discipline:",e),new Error("Impossible de crer la discipline")}},async update(t,e){try{const n=Xe(Ee,Uf,t);await wn(n,{...e,updatedAt:nn()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(t){try{const e=Xe(Ee,Uf,t);await Sd(e)}catch(e){throw console.error("Erreur lors de la suppression de la discipline:",e),new Error("Impossible de supprimer la discipline")}},async exists(t){return await this.getById(t)!==null},async countByNiveau(t){return(await this.getByNiveau(t)).length}},Xl="ressources",LY="ressources",VO=t=>{const e=t.data();return{id:t.id,disciplineId:e.disciplineId,titre:e.titre,type:e.type,contenu:e.contenu,description:e.description,isPremium:e.isPremium||!1,ordre:e.ordre||0,chapitre:e.chapitre,fichierURL:e.fichierURL,dureeEstimee:e.dureeEstimee,tags:e.tags||[],auteurId:e.auteurId,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},qY=t=>{const e=Date.now(),n=t.split(".").pop();return`${t.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${e}.${n}`},Es={async getAll(t,e){try{const n=[jr("ordre","asc")];t?.disciplineId&&n.unshift(st("disciplineId","==",t.disciplineId)),t?.chapitreId&&n.unshift(st("chapitre","==",t.chapitreId)),t?.type&&n.unshift(st("type","==",t.type)),t?.isPremium!==void 0&&n.unshift(st("isPremium","==",t.isPremium)),t?.auteurId&&n.unshift(st("auteurId","==",t.auteurId)),e&&n.push(hl(e));const r=Lt(rt(Ee,Xl),...n);return(await qt(r)).docs.map(VO)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(t){try{const e=Xe(Ee,Xl,t),n=await Li(e);return n.exists()?VO(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la ressource:",e),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(t){return this.getAll({disciplineId:t})},async getByChapitre(t){return this.getAll({chapitreId:t})},async getByType(t){return this.getAll({type:t})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(t,e){try{return(await Bi(rt(Ee,Xl),{...t,auteurId:e,createdAt:nn(),updatedAt:nn()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(t,e){try{const n=Xe(Ee,Xl,t);await wn(n,{...e,updatedAt:nn()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(t){try{const e=await this.getById(t);e?.fichierURL&&await this.deleteFile(e.fichierURL);const n=Xe(Ee,Xl,t);await Sd(n)}catch(e){throw console.error("Erreur lors de la suppression de la ressource:",e),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(t){try{const e=await this.getByDiscipline(t),n=Th(Ee);for(const r of e){r.fichierURL&&await this.deleteFile(r.fichierURL);const i=Xe(Ee,Xl,r.id);n.delete(i)}await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des ressources:",e),new Error("Impossible de supprimer les ressources")}},async uploadFile(t,e){try{const n=qY(t.name),r=`${LY}/${e}/${n}`,i=CO(OO,r);return await FQ(i,t),await HQ(i)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(t){try{const e=CO(OO,t);await GQ(e)}catch(e){console.warn("Fichier non trouv ou dj supprim:",e)}},async reorder(t,e){try{const n=Th(Ee);e.forEach((r,i)=>{const s=Xe(Ee,Xl,r);n.update(s,{ordre:i+1,updatedAt:nn()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(t,e){await this.update(t,{isPremium:e})},async countByType(t){return(await this.getByType(t)).length},async getStats(){try{const t=await this.getAll(),e={total:t.length,premium:t.filter(n=>n.isPremium).length,gratuit:t.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return t.forEach(n=>{e.parType[n.type]!==void 0&&e.parType[n.type]++}),e}catch(t){throw console.error("Erreur lors du calcul des statistiques:",t),new Error("Impossible de calculer les statistiques")}}},UY=()=>{const{id:t}=ly(),e=kr(),[n,r]=j.useState(null),[i,s]=j.useState([]),[c,u]=j.useState([]),[f,h]=j.useState(!0),[p,g]=j.useState(null),[y,_]=j.useState("tous"),[E,w]=j.useState(new Set),N=j.useCallback(async()=>{if(t)try{h(!0),g(null);const k=await Lc.getById(t);if(!k){g("Discipline introuvable."),h(!1);return}r(k);const U=await Es.getAll({disciplineId:t}),q=new Map,z=[];for(const W of U){const Q=W.chapitre||W.chapitreId;Q?(q.has(Q)||q.set(Q,[]),q.get(Q).push(W)):z.push(W)}const M=Array.from(q.entries()).map(([W,Q])=>({chapitreNom:W,ressources:Q.sort((H,le)=>H.ordre-le.ordre)})).sort((W,Q)=>W.chapitreNom.localeCompare(Q.chapitreNom,"fr"));s(M),u(z),M.length>0&&w(new Set([M[0].chapitreNom]))}catch(k){console.error("Erreur chargement discipline:",k),g("Impossible de charger les donnes. Ressayez plus tard.")}finally{h(!1)}},[t]);j.useEffect(()=>{N()},[N]);const A=k=>{w(U=>{const q=new Set(U);return q.has(k)?q.delete(k):q.add(k),q})},R=k=>y==="tous"?k:k.filter(U=>U.type===y),O=k=>{switch(k){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},C=k=>{switch(k){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return k}},V=k=>{switch(k){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},$=k=>k==="college"?"Collge":"Lyce";if(f)return o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[o.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),o.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(p||!n)return o.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[o.jsx("span",{style:{fontSize:"3rem"},children:""}),o.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:p||"Discipline introuvable"}),o.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),o.jsx("button",{onClick:()=>e("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const D=[...i.flatMap(k=>k.ressources),...c],I=[...new Set(D.map(k=>k.type))];return o.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[o.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[o.jsx(tt,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),o.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),o.jsx(tt,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),o.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),o.jsx("span",{style:{color:"#374151"},children:n.nom})]}),o.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"2.5rem"},children:n.icone||""}),o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:n.nom}),n.description&&o.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:n.description})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",$(n.niveau),"  ",n.classe]}),o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",D.length," ressource",D.length!==1?"s":""]}),n.coefficient&&o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",n.coefficient]})]})]}),I.length>1&&o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[o.jsxs("button",{onClick:()=>_("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:y==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:y==="tous"?"#2563eb":"#fff",color:y==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",D.length,")"]}),I.map(k=>{const U=D.filter(z=>z.type===k).length,q=y===k;return o.jsxs("button",{onClick:()=>_(k),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:q?`2px solid ${V(k)}`:"1px solid #d1d5db",background:q?V(k):"#fff",color:q?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[O(k)," ",C(k)," (",U,")"]},k)})]}),i.length===0&&c.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[o.jsx("span",{style:{fontSize:"3rem"},children:""}),o.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),o.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[i.map(k=>{const U=R(k.ressources);if(U.length===0&&y!=="tous")return null;const q=E.has(k.chapitreNom),z=y==="tous"?k.ressources:U;return o.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:q?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[o.jsx("button",{onClick:()=>A(k.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:q?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.25rem",transform:q?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:k.chapitreNom}),o.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[k.ressources.length," ressource",k.ressources.length!==1?"s":""]})]})]})}),q&&o.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:z.map(M=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:W=>W.currentTarget.style.background="#eef2ff",onMouseLeave:W=>W.currentTarget.style.background="#f9fafb",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:O(M.type)}),o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:M.titre}),M.description&&o.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:M.description})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:V(M.type)},children:C(M.type)}),M.isPremium&&o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),M.dureeEstimee&&o.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",M.dureeEstimee," min"]})]})]},M.id))})]},k.chapitreNom)}),R(c).length>0&&o.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:R(c).map(k=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:O(k.type)}),o.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:k.titre})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:V(k.type)},children:C(k.type)}),k.isPremium&&o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},k.id))})]})]}),o.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:o.jsx(tt,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},G_=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],VY=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],BY=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],$Y=()=>{const{currentUser:t}=Vn(),e=vl(),n=kr(),[r,i]=j.useState("annuel"),[s,c]=j.useState(!1),[u,f]=j.useState(null),[h,p]=j.useState(null);e.state?.from;const g=()=>!t||!t.isPremium?!1:t.subscriptionEnd?(t.subscriptionEnd instanceof Date?t.subscriptionEnd:new Date(t.subscriptionEnd))>new Date:!0,y=async()=>{if(!t){n("/connexion",{state:{from:"/premium"}});return}if(g()){f("Vous tes dj abonn Premium !");return}try{c(!0),f(null);const w=G_.find(C=>C.id===r);if(!w)throw new Error("Plan invalide");const N=await Bi(rt(Ee,"transactions"),{userId:t.uid,userEmail:t.email,planType:r,montant:w.prix,devise:"XOF",statut:"pending",dateTransaction:nn(),createdAt:nn()}),A={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${w.nom}`,item_price:w.prix,currency:"XOF",ref_command:N.id,success_url:`${window.location.origin}/premium/success?ref=${N.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${N.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:t.uid,planType:r,transactionId:N.id}),env:"test"},O=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:A.apiKey,API_SECRET:A.apiSecret},body:JSON.stringify({item_name:A.item_name,item_price:A.item_price,currency:A.currency,ref_command:A.ref_command,command_name:`Abonnement Premium ${w.nom} - ${t.email}`,env:A.env,ipn_url:A.ipn_url,success_url:A.success_url,cancel_url:A.cancel_url,custom_field:A.custom_field})})).json();if(O.success===1&&O.redirect_url)window.location.href=O.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const C=new Date,V=new Date(C);r==="mensuel"?V.setMonth(V.getMonth()+1):V.setFullYear(V.getFullYear()+1),await wn(Xe(Ee,"users",t.uid),{isPremium:!0,subscriptionEnd:V,subscriptionPlan:r,updatedAt:nn()}),await wn(Xe(Ee,"transactions",N.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:V,updatedAt:nn()}),n("/premium/success",{state:{plan:w.nom,montant:w.prix,expiration:V.toLocaleDateString("fr-FR")}})}}catch(w){console.error("Erreur paiement:",w),f("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{c(!1)}},_=w=>{p(h===w?null:w)},E=w=>w.toLocaleString("fr-FR")+" FCFA";if(g()){const w=t?.subscriptionEnd instanceof Date?t.subscriptionEnd:new Date(t?.subscriptionEnd||Date.now());return o.jsx("div",{className:"premium-page",children:o.jsx("div",{className:"container",children:o.jsxs("div",{className:"premium-already",children:[o.jsx("span",{className:"premium-already__icon",children:""}),o.jsx("h1",{children:"Vous tes dj Premium !"}),o.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",o.jsx("strong",{children:w.toLocaleDateString("fr-FR")})]}),o.jsxs("div",{className:"premium-already__actions",children:[o.jsx(tt,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),o.jsx(tt,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return o.jsxs("div",{className:"premium-page",children:[o.jsx("section",{className:"premium-hero",children:o.jsxs("div",{className:"container",children:[o.jsx("span",{className:"premium-hero__badge",children:" Premium"}),o.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",o.jsx("span",{children:"PedaClic"})]}),o.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),o.jsx("section",{className:"premium-pricing",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),o.jsx("div",{className:"pricing-cards",children:G_.map(w=>o.jsxs("div",{className:`pricing-card ${r===w.id?"pricing-card--selected":""} ${w.popular?"pricing-card--popular":""}`,onClick:()=>i(w.id),children:[w.popular&&o.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),o.jsxs("div",{className:"pricing-card__header",children:[o.jsx("h3",{className:"pricing-card__name",children:w.nom}),o.jsx("p",{className:"pricing-card__duration",children:w.duree})]}),o.jsxs("div",{className:"pricing-card__price",children:[w.prixOriginal&&o.jsx("span",{className:"pricing-card__original",children:E(w.prixOriginal)}),o.jsx("span",{className:"pricing-card__amount",children:E(w.prix)}),w.id==="mensuel"&&o.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),w.economie&&o.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",w.economie]}),o.jsx("div",{className:"pricing-card__radio",children:o.jsx("span",{className:`radio-dot ${r===w.id?"radio-dot--active":""}`})})]},w.id))}),o.jsxs("div",{className:"pricing-cta",children:[u&&o.jsxs("div",{className:"pricing-error",children:[o.jsx("span",{children:""})," ",u]}),t?o.jsx("button",{className:"btn btn--premium btn--lg",onClick:y,disabled:s,children:s?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):o.jsxs(o.Fragment,{children:["Payer ",E(G_.find(w=>w.id===r)?.prix||0)]})}):o.jsxs("div",{className:"pricing-login",children:[o.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),o.jsx(tt,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),o.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",o.jsx(tt,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),o.jsxs("div",{className:"payment-methods",children:[o.jsx("p",{children:"Paiement scuris par"}),o.jsxs("div",{className:"payment-methods__logos",children:[o.jsx("span",{className:"payment-logo",children:" Orange Money"}),o.jsx("span",{className:"payment-logo",children:" Wave"}),o.jsx("span",{className:"payment-logo",children:" Free Money"}),o.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),o.jsx("section",{className:"premium-features",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),o.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),o.jsx("div",{className:"features-grid",children:VY.map((w,N)=>o.jsxs("div",{className:"feature-card",children:[o.jsx("span",{className:"feature-card__icon",children:w.icone}),o.jsx("h3",{className:"feature-card__title",children:w.titre}),o.jsx("p",{className:"feature-card__description",children:w.description})]},N))})]})}),o.jsx("section",{className:"premium-comparison",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),o.jsxs("div",{className:"comparison-table",children:[o.jsxs("div",{className:"comparison-header",children:[o.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),o.jsx("div",{className:"comparison-free",children:"Gratuit"}),o.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((w,N)=>o.jsxs("div",{className:"comparison-row",children:[o.jsx("div",{className:"comparison-feature",children:w.feature}),o.jsx("div",{className:"comparison-free",children:w.free?o.jsx("span",{className:"check",children:""}):o.jsx("span",{className:"cross",children:""})}),o.jsx("div",{className:"comparison-premium",children:o.jsx("span",{className:"check check--premium",children:""})})]},N))]})]})}),o.jsx("section",{className:"premium-testimonials",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),o.jsxs("div",{className:"testimonials-grid",children:[o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),o.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),o.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),o.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),o.jsx("section",{className:"premium-faq",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Questions frquentes"}),o.jsx("div",{className:"faq-list",children:BY.map((w,N)=>o.jsxs("div",{className:`faq-item ${h===N?"faq-item--open":""}`,children:[o.jsxs("button",{className:"faq-item__question",onClick:()=>_(N),"aria-expanded":h===N,children:[o.jsx("span",{children:w.question}),o.jsx("span",{className:"faq-item__icon",children:h===N?"":"+"})]}),h===N&&o.jsx("div",{className:"faq-item__answer",children:o.jsx("p",{children:w.reponse})})]},N))})]})}),o.jsx("section",{className:"premium-cta-final",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{children:"Prt  russir vos examens ?"}),o.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),o.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},FY=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],js=({children:t,currentPage:e="dashboard"})=>{const{currentUser:n,logout:r}=Vn(),[i,s]=j.useState(!0),[c,u]=j.useState(!1),f=async()=>{try{u(!0),await r(),window.location.href="/connexion"}catch(g){console.error("Erreur lors de la dconnexion:",g),u(!1)}},h=()=>n?.displayName?n.displayName.split(" ").map(g=>g[0]).join("").toUpperCase().slice(0,2):"AD",p=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}};return o.jsxs("div",{className:"admin-layout",children:[o.jsxs("aside",{className:`admin-sidebar ${i?"":"admin-sidebar--collapsed"}`,children:[o.jsx("header",{className:"admin-sidebar__header",children:o.jsxs("a",{href:"/",className:"admin-sidebar__logo",children:[o.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),o.jsx("span",{children:"PedaClic"})]})}),o.jsx("nav",{className:"admin-sidebar__nav",children:FY.map((g,y)=>o.jsxs("div",{className:"admin-nav__section",children:[o.jsx("h3",{className:"admin-nav__title",children:g.title}),o.jsx("ul",{className:"admin-nav__list",children:g.items.map(_=>o.jsx("li",{className:"admin-nav__item",children:o.jsxs("a",{href:_.href,className:`admin-nav__link ${e===_.id?"admin-nav__link--active":""}`,children:[o.jsx("span",{className:"admin-nav__icon",children:_.icon}),o.jsx("span",{className:"admin-nav__label",children:_.label})]})},_.id))})]},y))}),o.jsx("footer",{className:"admin-sidebar__footer",children:o.jsxs("div",{className:"admin-user",children:[o.jsx("div",{className:"admin-user__avatar",children:h()}),o.jsxs("div",{className:"admin-user__info",children:[o.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),o.jsx("div",{className:"admin-user__role",children:p()})]}),o.jsx("button",{onClick:f,disabled:c,className:"admin-logout-btn",title:"Se dconnecter",children:c?"...":""})]})})]}),o.jsxs("main",{className:"admin-content",children:[o.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>s(!i),"aria-label":"Toggle sidebar",children:""}),t]}),o.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Uo="chapitres",K_=t=>{const e=t.data();return{id:t.id,disciplineId:e.disciplineId,numero:e.numero,titre:e.titre,description:e.description,objectifs:e.objectifs||[],dureeEstimee:e.dureeEstimee,isPremium:e.isPremium||!1,actif:e.actif!==!1,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},Vo={async getByDiscipline(t){try{const e=Lt(rt(Ee,Uo),st("disciplineId","==",t),jr("numero","asc"));return(await qt(e)).docs.map(K_)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const t=Lt(rt(Ee,Uo),jr("numero","asc"));return(await qt(t)).docs.map(K_)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getById(t){try{const e=Xe(Ee,Uo,t),n=await Li(e);return n.exists()?K_(n):null}catch(e){throw console.error("Erreur lors de la rcupration du chapitre:",e),new Error("Impossible de rcuprer le chapitre")}},async create(t){try{return(await Bi(rt(Ee,Uo),{...t,actif:t.actif!==!1,createdAt:nn(),updatedAt:nn()})).id}catch(e){throw console.error("Erreur lors de la cration du chapitre:",e),new Error("Impossible de crer le chapitre")}},async update(t,e){try{const n=Xe(Ee,Uo,t);await wn(n,{...e,updatedAt:nn()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(t){try{const e=Xe(Ee,Uo,t);await Sd(e)}catch(e){throw console.error("Erreur lors de la suppression du chapitre:",e),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(t){try{const e=await this.getByDiscipline(t),n=Th(Ee);e.forEach(r=>{const i=Xe(Ee,Uo,r.id);n.delete(i)}),await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des chapitres:",e),new Error("Impossible de supprimer les chapitres")}},async reorder(t,e){try{const n=Th(Ee);e.forEach((r,i)=>{const s=Xe(Ee,Uo,r);n.update(s,{numero:i+1,updatedAt:nn()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(t,e){await this.update(t,{actif:e})},async countByDiscipline(t){return(await this.getByDiscipline(t)).length},async getNextNumero(t){return await this.countByDiscipline(t)+1}},HY=()=>{const{currentUser:t}=Vn(),e=kr(),[n,r]=j.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[i,s]=j.useState(!0),[c,u]=j.useState(null);return j.useEffect(()=>{(async()=>{try{s(!0),u(null);const[h,p,g,y,_]=await Promise.all([Lc.getAll(),Vo.getAll(),Es.getStats(),qt(rt(Ee,"quizzes")),qt(rt(Ee,"quizzes_v2"))]);r({totalDisciplines:h.length,totalChapitres:p.length,totalRessources:g.total,ressourcesPremium:g.premium,ressourcesGratuites:g.gratuit,totalQuiz:y.size,totalQuizAvances:_.size,ressourcesParType:g.parType})}catch(h){console.error("Erreur lors du chargement des statistiques:",h),u("Impossible de charger les statistiques")}finally{s(!1)}})()},[]),o.jsxs("div",{className:"admin-dashboard",children:[o.jsx("header",{className:"admin-page-header",children:o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),o.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",t?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),c&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:c})})]}),i?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des statistiques..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/disciplines"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalDisciplines}),o.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/chapitres"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalChapitres}),o.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/ressources"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalRessources}),o.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/ressources"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.ressourcesPremium}),o.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/quiz"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalQuiz}),o.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/quiz-avance"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalQuizAvances}),o.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),o.jsxs("section",{className:"content-card",children:[o.jsx("div",{className:"content-card__header",children:o.jsx("h2",{children:"Rpartition des ressources par type"})}),o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"resource-type-grid",children:[o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.cours}),o.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.exercice}),o.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.video}),o.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.document}),o.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/quiz"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.totalQuiz+n.totalQuizAvances}),o.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),o.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[o.jsx("div",{className:"content-card__header",children:o.jsx("h2",{children:"Actions rapides"})}),o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"quick-actions-grid",children:[o.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les disciplines"}),o.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),o.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les chapitres"}),o.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),o.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les ressources"}),o.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),o.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les quiz"}),o.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),o.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Quiz avancs"}),o.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),o.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les utilisateurs"}),o.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),o.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},Be={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},Q_={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},GY=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(Q_),[i,s]=j.useState(null),[c,u]=j.useState(!1),[f,h]=j.useState("all");j.useEffect(()=>{const R=Lt(rt(Ee,"disciplines"),jr("nom")),O=C4(R,C=>{const V=C.docs.map($=>({id:$.id,...$.data(),createdAt:$.data().createdAt?.toDate()||new Date,updatedAt:$.data().updatedAt?.toDate()||new Date}));e(V)});return()=>O()},[]);const p=j.useCallback(R=>{const O=LO(R)[0]?.value||"6eme";r(C=>({...C,niveau:R,classe:O,coefficient:R==="formation_libre"?void 0:C.coefficient}))},[]),g=async R=>{if(R.preventDefault(),!!n.nom.trim()){u(!0);try{const O={nom:n.nom.trim(),niveau:n.niveau,classe:n.classe,ordre:n.ordre,...n.coefficient!==void 0&&{coefficient:n.coefficient},couleur:n.couleur||"",icone:n.icone||"",description:n.description||"",updatedAt:nt.now()};i?await wn(Xe(Ee,"disciplines",i),O):await Bi(rt(Ee,"disciplines"),{...O,createdAt:nt.now()}),r(Q_),s(null)}catch(O){console.error("Erreur lors de la sauvegarde :",O),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{u(!1)}}},y=R=>{r({nom:R.nom,niveau:R.niveau,classe:R.classe,ordre:R.ordre,coefficient:R.coefficient,couleur:R.couleur||"",icone:R.icone||"",description:R.description||""}),s(R.id)},_=async(R,O)=>{if(window.confirm(`Supprimer la discipline "${O}" ? Cette action est irrversible.`))try{await Sd(Xe(Ee,"disciplines",R))}catch(C){console.error("Erreur lors de la suppression :",C)}},E=()=>{r(Q_),s(null)},w=LO(n.niveau),N=f==="all"?t:t.filter(R=>R.niveau===f),A=R=>({...Be.badge,...R==="college"?Be.badgeCollege:{},...R==="lycee"?Be.badgeLycee:{},...R==="formation_libre"?Be.badgeFormationLibre:{}});return o.jsxs("div",{style:Be.container,children:[o.jsx("h2",{style:Be.title,children:" Gestion des Disciplines"}),o.jsxs("form",{style:Be.form,onSubmit:g,children:[o.jsx("h3",{style:Be.formTitle,children:i?" Modifier la discipline":" Ajouter une discipline"}),o.jsxs("div",{style:Be.formGrid,children:[o.jsxs("div",{style:Be.fieldGroup,children:[o.jsx("label",{style:Be.label,children:"Nom de la discipline"}),o.jsx("input",{type:"text",style:Be.input,value:n.nom,onChange:R=>r({...n,nom:R.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),o.jsxs("div",{style:Be.fieldGroup,children:[o.jsx("label",{style:Be.label,children:"Niveau"}),o.jsxs("select",{style:Be.select,value:n.niveau,onChange:R=>p(R.target.value),children:[o.jsx("option",{value:"college",children:" Collge"}),o.jsx("option",{value:"lycee",children:" Lyce"}),o.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),o.jsxs("div",{style:Be.fieldGroup,children:[o.jsx("label",{style:Be.label,children:n.niveau==="formation_libre"?"Niveau de formation":"Classe"}),o.jsx("select",{style:Be.select,value:n.classe,onChange:R=>r({...n,classe:R.target.value}),children:w.map(({value:R,label:O})=>o.jsx("option",{value:R,children:O},R))})]}),o.jsxs("div",{style:Be.fieldGroup,children:[o.jsx("label",{style:Be.label,children:"Ordre d'affichage"}),o.jsx("input",{type:"number",style:Be.input,value:n.ordre,onChange:R=>r({...n,ordre:Number(R.target.value)}),placeholder:"Ex : 1",min:"0"})]}),o.jsxs("div",{style:Be.fieldGroup,children:[o.jsxs("label",{style:Be.label,children:["Coefficient",n.niveau==="formation_libre"&&o.jsx("span",{style:Be.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"number",style:Be.input,value:n.coefficient??"",onChange:R=>r({...n,coefficient:R.target.value?Number(R.target.value):void 0}),placeholder:n.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:n.niveau!=="formation_libre"})]}),o.jsxs("div",{style:Be.fieldGroup,children:[o.jsxs("label",{style:Be.label,children:["Couleur",o.jsx("span",{style:Be.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"color",style:{...Be.input,maxWidth:"80px",padding:"4px",height:"40px"},value:n.couleur||"#3182ce",onChange:R=>r({...n,couleur:R.target.value})})]})]}),o.jsxs("div",{style:{...Be.fieldGroup,marginBottom:"20px"},children:[o.jsxs("label",{style:Be.label,children:["Description",o.jsx("span",{style:Be.labelOptional,children:"(optionnel)"})]}),o.jsx("textarea",{style:Be.textarea,value:n.description,onChange:R=>r({...n,description:R.target.value}),placeholder:"Brve description de la discipline..."})]}),o.jsxs("div",{style:{...Be.fieldGroup,marginBottom:"20px"},children:[o.jsxs("label",{style:Be.label,children:["Icne (emoji)",o.jsx("span",{style:Be.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"text",style:{...Be.input,maxWidth:"120px"},value:n.icone,onChange:R=>r({...n,icone:R.target.value}),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("button",{type:"submit",style:Be.btnPrimary,disabled:c,children:c?"Enregistrement...":i?"Mettre  jour":"Ajouter la discipline"}),i&&o.jsx("button",{type:"button",style:Be.btnSecondary,onClick:E,children:"Annuler"})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{style:Be.formTitle,children:[" Disciplines existantes (",N.length,")"]}),o.jsxs("div",{style:Be.tabs,children:[o.jsx("button",{style:{...Be.tab,...f==="all"?Be.tabActive:{}},onClick:()=>h("all"),children:"Toutes"}),o.jsx("button",{style:{...Be.tab,...f==="college"?Be.tabActive:{}},onClick:()=>h("college"),children:" Collge"}),o.jsx("button",{style:{...Be.tab,...f==="lycee"?Be.tabActive:{}},onClick:()=>h("lycee"),children:" Lyce"}),o.jsx("button",{style:{...Be.tab,...f==="formation_libre"?Be.tabActive:{}},onClick:()=>h("formation_libre"),children:" Formation libre"})]}),N.length===0?o.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):N.map(R=>o.jsxs("div",{style:Be.card,children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[R.icone&&o.jsx("span",{style:{fontSize:"1.2rem"},children:R.icone}),o.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:R.nom}),o.jsx("span",{style:A(R.niveau),children:nL[R.niveau]})]}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[R.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",rL(R.classe),R.coefficient!==void 0&&o.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",R.coefficient]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("button",{style:Be.btnEdit,onClick:()=>y(R),children:"Modifier"}),o.jsx("button",{style:Be.btnDanger,onClick:()=>_(R.id,R.nom),children:"Supprimer"})]})]},R.id))]})]})},BO={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},KY=()=>{const[t,e]=j.useState([]),[n,r]=j.useState([]),[i,s]=j.useState(""),[c,u]=j.useState(!0),[f,h]=j.useState(!1),[p,g]=j.useState(!1),[y,_]=j.useState(null),[E,w]=j.useState(null),[N,A]=j.useState(null),[R,O]=j.useState(!1),[C,V]=j.useState(!1),[$,D]=j.useState(null),[I,k]=j.useState(null),[U,q]=j.useState({...BO,disciplineId:""}),[z,M]=j.useState({}),[W,Q]=j.useState(""),H=j.useCallback(async()=>{try{u(!0);const X=await Lc.getAll();e(X),X.length>0&&!i&&s(X[0].id)}catch(X){console.error("Erreur lors du chargement des disciplines:",X),w("Impossible de charger les disciplines.")}finally{u(!1)}},[i]),le=j.useCallback(async()=>{if(!i){r([]);return}try{h(!0);const X=await Vo.getByDiscipline(i);r(X)}catch(X){console.error("Erreur lors du chargement des chapitres:",X),w("Impossible de charger les chapitres.")}finally{h(!1)}},[i]);j.useEffect(()=>{H()},[H]),j.useEffect(()=>{le()},[le]);const _e=()=>{const X={};return U.disciplineId||(X.disciplineId="Veuillez slectionner une discipline"),U.titre.trim()?U.titre.length<3&&(X.titre="Le titre doit contenir au moins 3 caractres"):X.titre="Le titre du chapitre est requis",U.numero<1&&(X.numero="Le numro doit tre suprieur  0"),M(X),Object.keys(X).length===0},je=X=>{s(X),w(null)},Y=async()=>{const X=await Vo.getNextNumero(i);D(null),q({...BO,disciplineId:i,numero:X}),M({}),Q(""),O(!0)},F=X=>{D(X),q({disciplineId:X.disciplineId,numero:X.numero,titre:X.titre,description:X.description,objectifs:X.objectifs||[],dureeEstimee:X.dureeEstimee,isPremium:X.isPremium,actif:X.actif}),M({}),Q(""),O(!0)},te=X=>{k(X),V(!0)},ye=()=>{O(!1),V(!1),D(null),k(null),M({}),Q("")},we=X=>{const{name:pe,value:ke,type:Fe}=X.target,ot=X.target.checked;q(ht=>({...ht,[pe]:Fe==="checkbox"?ot:Fe==="number"?Number(ke):ke})),z[pe]&&M(ht=>({...ht,[pe]:void 0}))},Z=()=>{W.trim()&&(q(X=>({...X,objectifs:[...X.objectifs||[],W.trim()]})),Q(""))},ne=X=>{q(pe=>({...pe,objectifs:(pe.objectifs||[]).filter((ke,Fe)=>Fe!==X)}))},me=async X=>{if(X.preventDefault(),!!_e())try{g(!0),w(null),$?(await Vo.update($.id,U),A("Chapitre modifi avec succs !")):(await Vo.create(U),A("Chapitre cr avec succs !")),ye(),await le(),setTimeout(()=>A(null),3e3)}catch(pe){console.error("Erreur lors de la sauvegarde:",pe),w("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{g(!1)}},Me=async()=>{if(I)try{_(I.id),await Vo.delete(I.id),A("Chapitre supprim avec succs !"),ye(),await le(),setTimeout(()=>A(null),3e3)}catch(X){console.error("Erreur lors de la suppression:",X),w("Erreur lors de la suppression. Veuillez ressayer.")}finally{_(null)}},se=async X=>{try{await Vo.toggleActive(X.id,!X.actif),await le(),A(X.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>A(null),2e3)}catch{w("Erreur lors de la mise  jour")}},Se=X=>{const pe=t.find(ke=>ke.id===X);return pe?pe.nom:"Non trouve"};return o.jsxs("div",{className:"chapitre-manager",children:[o.jsxs("header",{className:"admin-page-header",children:[o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),o.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),o.jsx("div",{className:"admin-page-header__actions",children:o.jsxs("button",{onClick:Y,className:"btn btn--primary",disabled:!i||c,children:[o.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),E&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:E})}),o.jsx("button",{onClick:()=>w(null),className:"alert__close",children:""})]}),N&&o.jsxs("div",{className:"alert alert--success",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:N})})]}),o.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"discipline-selector",children:[o.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),c?o.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?o.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",o.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):o.jsx("div",{className:"discipline-tabs",children:t.map(X=>o.jsxs("button",{className:`discipline-tab ${i===X.id?"discipline-tab--active":""}`,onClick:()=>je(X.id),style:{"--discipline-color":X.couleur||"#2563eb"},children:[o.jsx("span",{className:"discipline-tab__icon",children:X.icone||""}),o.jsx("span",{className:"discipline-tab__name",children:X.nom}),o.jsx("span",{className:"discipline-tab__class",children:X.classe})]},X.id))})]})})}),o.jsxs("div",{className:"admin-table-container",children:[o.jsx("div",{className:"admin-table-header",children:o.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",i&&`- ${Se(i)}`,n.length>0&&` (${n.length})`]})}),f?o.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des chapitres..."})]}):i?n.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),o.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),o.jsx("button",{onClick:Y,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):o.jsx("div",{className:"chapitres-list",children:n.map(X=>o.jsxs("div",{className:`chapitre-card ${X.actif?"":"chapitre-card--inactive"}`,children:[o.jsx("div",{className:"chapitre-card__number",children:X.numero}),o.jsxs("div",{className:"chapitre-card__content",children:[o.jsxs("h3",{className:"chapitre-card__title",children:[X.titre,X.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"}),!X.actif&&o.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),X.description&&o.jsx("p",{className:"chapitre-card__description",children:X.description}),o.jsxs("div",{className:"chapitre-card__meta",children:[X.dureeEstimee&&o.jsxs("span",{children:[" ",X.dureeEstimee,"h estime"]}),X.objectifs&&X.objectifs.length>0&&o.jsxs("span",{children:[" ",X.objectifs.length," objectif(s)"]})]})]}),o.jsxs("div",{className:"chapitre-card__actions",children:[o.jsx("button",{onClick:()=>se(X),className:`table-action-btn ${X.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:X.actif?"Dsactiver":"Activer",children:X.actif?"":""}),o.jsx("button",{onClick:()=>F(X),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),o.jsx("button",{onClick:()=>te(X),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:y===X.id,children:y===X.id?"":""})]})]},X.id))}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),o.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),R&&o.jsx("div",{className:"modal-overlay",onClick:ye,children:o.jsxs("div",{className:"modal modal--lg",onClick:X=>X.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:$?"Modifier le chapitre":"Nouveau chapitre"}),o.jsx("button",{onClick:ye,className:"modal__close",children:""})]}),o.jsxs("form",{onSubmit:me,children:[o.jsxs("div",{className:"modal__body",children:[!$&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),o.jsxs("select",{name:"disciplineId",className:`form-select ${z.disciplineId?"form-select--error":""}`,value:U.disciplineId,onChange:we,children:[o.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(X=>o.jsxs("option",{value:X.id,children:[X.icone," ",X.nom," (",X.classe,")"]},X.id))]}),z.disciplineId&&o.jsx("span",{className:"form-error",children:z.disciplineId})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[o.jsx("label",{className:"form-label form-label--required",children:"N"}),o.jsx("input",{type:"number",name:"numero",className:`form-input ${z.numero?"form-input--error":""}`,min:"1",value:U.numero,onChange:we}),z.numero&&o.jsx("span",{className:"form-error",children:z.numero})]}),o.jsxs("div",{className:"form-group",style:{flex:1},children:[o.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),o.jsx("input",{type:"text",name:"titre",className:`form-input ${z.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:U.titre,onChange:we}),z.titre&&o.jsx("span",{className:"form-error",children:z.titre})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:U.description||"",onChange:we})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),o.jsxs("div",{className:"objectifs-input",children:[o.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:W,onChange:X=>Q(X.target.value),onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),Z())}),o.jsx("button",{type:"button",onClick:Z,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),U.objectifs&&U.objectifs.length>0&&o.jsx("ul",{className:"objectifs-list",children:U.objectifs.map((X,pe)=>o.jsxs("li",{className:"objectif-item",children:[o.jsxs("span",{children:[" ",X]}),o.jsx("button",{type:"button",onClick:()=>ne(pe),className:"objectif-remove",children:""})]},pe))})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),o.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:U.dureeEstimee||"",onChange:we})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Options"}),o.jsxs("div",{className:"form-options",children:[o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"isPremium",checked:U.isPremium,onChange:we}),o.jsx("span",{children:"Contenu Premium "})]}),o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"actif",checked:U.actif!==!1,onChange:we}),o.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{type:"button",onClick:ye,className:"btn btn--outline",disabled:p,children:"Annuler"}),o.jsx("button",{type:"submit",className:"btn btn--primary",disabled:p,children:p?"Enregistrement...":$?"Mettre  jour":"Crer le chapitre"})]})]})]})}),C&&I&&o.jsx("div",{className:"modal-overlay",onClick:ye,children:o.jsxs("div",{className:"modal",onClick:X=>X.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),o.jsx("button",{onClick:ye,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[o.jsxs("p",{children:["Supprimer le chapitre ",o.jsxs("strong",{children:[I.numero,". ",I.titre]})," ?"]}),o.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{onClick:ye,className:"btn btn--outline",children:"Annuler"}),o.jsx("button",{onClick:Me,className:"btn btn--danger",disabled:y!==null,children:y?"Suppression...":"Supprimer"})]})]})}),o.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},ig=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],ag={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},W_=50,$O={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},QY=()=>{const{currentUser:t}=Vn(),[e,n]=j.useState([]),[r,i]=j.useState([]),[s,c]=j.useState([]),[u,f]=j.useState([]),[h,p]=j.useState(""),[g,y]=j.useState(""),[_,E]=j.useState(""),[w,N]=j.useState(""),[A,R]=j.useState(""),[O,C]=j.useState(!0),[V,$]=j.useState(!1),[D,I]=j.useState(!1),[k,U]=j.useState(!1),[q,z]=j.useState(null),[M,W]=j.useState(!1),[Q,H]=j.useState(0),[le,_e]=j.useState(null),[je,Y]=j.useState(null),[F,te]=j.useState(!1),[ye,we]=j.useState(!1),[Z,ne]=j.useState(!1),[me,Me]=j.useState(null),[se,Se]=j.useState(null),[X,pe]=j.useState(null),[ke,Fe]=j.useState({...$O,disciplineId:""}),[ot,ht]=j.useState({}),[gt,mr]=j.useState(null),[Pt,It]=j.useState(null),zr=j.useRef(null),[fe,Ie]=j.useState(""),Ve=j.useCallback(async()=>{try{C(!0);const ee=await Lc.getAll();n(ee),ee.length>0&&!h&&p(ee[0].id)}catch(ee){console.error("Erreur lors du chargement des disciplines:",ee),_e("Impossible de charger les disciplines.")}finally{C(!1)}},[h]),Ke=j.useCallback(async()=>{if(!h){i([]);return}try{$(!0);const ee=await Vo.getByDiscipline(h);i(ee)}catch(ee){console.error("Erreur lors du chargement des chapitres:",ee)}finally{$(!1)}},[h]),Vt=j.useCallback(async()=>{if(!h){c([]),f([]);return}try{I(!0);const ee=await Es.getByDiscipline(h);c(ee),f(ee)}catch(ee){console.error("Erreur lors du chargement des ressources:",ee),_e("Impossible de charger les ressources.")}finally{I(!1)}},[h]);j.useEffect(()=>{Ve()},[Ve]),j.useEffect(()=>{Ke()},[Ke]),j.useEffect(()=>{Vt()},[Vt]),j.useEffect(()=>{let ee=[...s];if(g&&(ee=ee.filter(Ue=>Ue.chapitre===g)),_&&(ee=ee.filter(Ue=>Ue.type===_)),w==="premium"?ee=ee.filter(Ue=>Ue.isPremium):w==="free"&&(ee=ee.filter(Ue=>!Ue.isPremium)),A){const Ue=A.toLowerCase();ee=ee.filter(vt=>vt.titre.toLowerCase().includes(Ue)||vt.description?.toLowerCase().includes(Ue)||vt.tags?.some(Fn=>Fn.toLowerCase().includes(Ue)))}f(ee)},[s,g,_,w,A]);const zn=()=>{const ee={};if(ke.disciplineId||(ee.disciplineId="Veuillez slectionner une discipline"),ke.titre.trim()?ke.titre.length<3&&(ee.titre="Le titre doit contenir au moins 3 caractres"):ee.titre="Le titre est requis",ke.type||(ee.type="Veuillez slectionner un type de ressource"),gt){const Ue="."+gt.name.split(".").pop()?.toLowerCase(),vt=ag[ke.type];vt.includes(Ue)||(ee.fichier=`Extension non autorise. Extensions acceptes : ${vt.join(", ")}`),gt.size/(1024*1024)>W_&&(ee.fichier=`Le fichier est trop volumineux (max ${W_} Mo)`)}return ht(ee),Object.keys(ee).length===0},Lr=ee=>{p(ee),y(""),_e(null)},ao=()=>{Me(null),Fe({...$O,disciplineId:h}),ht({}),mr(null),It(null),Ie(""),te(!0)},qr=ee=>{Me(ee),Fe({disciplineId:ee.disciplineId,titre:ee.titre,type:ee.type,description:ee.description,contenu:ee.contenu,chapitre:ee.chapitre||"",ordre:ee.ordre,isPremium:ee.isPremium,actif:ee.actif,tags:ee.tags||[],duree:ee.duree,urlExterne:ee.urlExterne||""}),ht({}),mr(null),It(ee.fichierURL||null),Ie(""),te(!0)},Hi=ee=>{pe(ee),ne(!0)},Hc=ee=>{Se(ee),we(!0)},sn=()=>{te(!1),we(!1),ne(!1),Me(null),Se(null),pe(null),ht({}),mr(null),It(null),Ie("")},Nt=ee=>{const{name:Ue,value:vt,type:Fn}=ee.target,Nl=ee.target.checked;Fe(_i=>({..._i,[Ue]:Fn==="checkbox"?Nl:Fn==="number"?Number(vt):vt})),ot[Ue]&&ht(_i=>({..._i,[Ue]:void 0}))},Ur=ee=>{const Ue=ee.target.files?.[0];if(Ue)if(mr(Ue),ht(vt=>({...vt,fichier:void 0})),Ue.type.startsWith("image/")||Ue.type.startsWith("video/")){const vt=new FileReader;vt.onloadend=()=>{It(vt.result)},vt.readAsDataURL(Ue)}else It(null)},en=()=>{mr(null),It(null),zr.current&&(zr.current.value="")},El=()=>{fe.trim()&&!ke.tags?.includes(fe.trim())&&(Fe(ee=>({...ee,tags:[...ee.tags||[],fe.trim()]})),Ie(""))},so=ee=>{Fe(Ue=>({...Ue,tags:(Ue.tags||[]).filter((vt,Fn)=>Fn!==ee)}))},Gc=async ee=>{if(ee.preventDefault(),!!zn())try{U(!0),_e(null);let Ue=me?.fichierURL,vt=me?.fichierNom;if(gt){W(!0);const Nl=me?.id||`temp_${Date.now()}`;Ue=await Es.uploadFile(gt,Nl),vt=gt?.name||"fichier",W(!1)}const Fn={...ke,fichierURL:Ue,fichierNom:vt};me?(await Es.update(me.id,Fn),Y("Ressource modifie avec succs !")):(await Es.create(Fn,"admin"),Y("Ressource cre avec succs !")),sn(),await Vt(),setTimeout(()=>Y(null),3e3)}catch(Ue){console.error("Erreur lors de la sauvegarde:",Ue),_e("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{U(!1),W(!1),H(0)}},yi=async()=>{if(se)try{z(se.id),se.fichierURL&&await Es.deleteFile(se.fichierURL),await Es.delete(se.id),Y("Ressource supprime avec succs !"),sn(),await Vt(),setTimeout(()=>Y(null),3e3)}catch(ee){console.error("Erreur lors de la suppression:",ee),_e("Erreur lors de la suppression. Veuillez ressayer.")}finally{z(null)}},ns=async ee=>{try{await Es.togglePremium(ee.id,!ee.isPremium),await Vt(),Y(ee.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>Y(null),2e3)}catch{_e("Erreur lors de la mise  jour")}},on=ee=>{const Ue=e.find(vt=>vt.id===ee);return Ue?Ue.nom:"Non trouve"},bi=ee=>{const Ue=r.find(vt=>vt.id===ee);return Ue?`${Ue.numero}. ${Ue.titre}`:""},pr=ee=>ig.find(Ue=>Ue.value===ee)||ig[0],ei=ee=>ee<1024?ee+" o":ee<1024*1024?(ee/1024).toFixed(1)+" Ko":(ee/(1024*1024)).toFixed(1)+" Mo";return o.jsxs("div",{className:"resource-manager",children:[o.jsxs("header",{className:"admin-page-header",children:[o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),o.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),o.jsx("div",{className:"admin-page-header__actions",children:o.jsxs("button",{onClick:ao,className:"btn btn--primary",disabled:!h||O,children:[o.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),le&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:le})}),o.jsx("button",{onClick:()=>_e(null),className:"alert__close",children:""})]}),je&&o.jsxs("div",{className:"alert alert--success",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:je})})]}),o.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"discipline-selector",children:[o.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),O?o.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?o.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",o.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):o.jsx("div",{className:"discipline-tabs",children:e.map(ee=>o.jsxs("button",{className:`discipline-tab ${h===ee.id?"discipline-tab--active":""}`,onClick:()=>Lr(ee.id),style:{"--discipline-color":ee.couleur||"#2563eb"},children:[o.jsx("span",{className:"discipline-tab__icon",children:ee.icone||""}),o.jsx("span",{className:"discipline-tab__name",children:ee.nom}),o.jsx("span",{className:"discipline-tab__class",children:ee.classe})]},ee.id))})]})})}),o.jsxs("div",{className:"admin-table-container",children:[o.jsxs("div",{className:"admin-table-header",children:[o.jsxs("h2",{className:"admin-table-title",children:["Ressources ",h&&`- ${on(h)}`,u.length>0&&` (${u.length})`]}),o.jsxs("div",{className:"admin-table-actions",children:[o.jsxs("div",{className:"search-input",children:[o.jsx("span",{className:"search-input__icon",children:""}),o.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:A,onChange:ee=>R(ee.target.value)})]}),o.jsxs("select",{className:"form-select form-select--sm",value:g,onChange:ee=>y(ee.target.value),disabled:V||r.length===0,children:[o.jsx("option",{value:"",children:"Tous les chapitres"}),r.map(ee=>o.jsxs("option",{value:ee.id,children:[ee.numero,". ",ee.titre]},ee.id))]}),o.jsxs("select",{className:"form-select form-select--sm",value:_,onChange:ee=>E(ee.target.value),children:[o.jsx("option",{value:"",children:"Tous les types"}),ig.map(ee=>o.jsxs("option",{value:ee.value,children:[ee.icon," ",ee.label]},ee.value))]}),o.jsxs("select",{className:"form-select form-select--sm",value:w,onChange:ee=>N(ee.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"premium",children:" Premium"}),o.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),D?o.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des ressources..."})]}):h?u.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),o.jsx("p",{className:"empty-state__message",children:A||_||w||g?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!A&&!_&&!w&&!g&&o.jsx("button",{onClick:ao,className:"btn btn--primary",children:"Crer la premire ressource"})]}):o.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:u.map(ee=>{const Ue=pr(ee.type);return o.jsxs("div",{className:"resource-item",children:[o.jsx("div",{className:`resource-item__icon resource-item__icon--${ee.type}`,style:{backgroundColor:`${Ue.color}15`,color:Ue.color},children:Ue.icon}),o.jsxs("div",{className:"resource-item__content",children:[o.jsxs("div",{className:"resource-item__title",children:[ee.titre,ee.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"}),!ee.actif&&o.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),o.jsxs("div",{className:"resource-item__meta",children:[o.jsx("span",{children:Ue.label}),ee.chapitre&&o.jsxs("span",{children:[" ",bi(ee.chapitre)]}),ee.duree&&o.jsxs("span",{children:[" ",ee.duree," min"]}),ee.fichierNom&&o.jsxs("span",{children:[" ",ee.fichierNom]}),ee.tags&&ee.tags.length>0&&o.jsxs("span",{children:[" ",ee.tags.join(", ")]})]})]}),o.jsxs("div",{className:"resource-item__actions",children:[o.jsx("button",{onClick:()=>ns(ee),className:`table-action-btn ${ee.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:ee.isPremium?"Passer en gratuit":"Passer en Premium",children:ee.isPremium?"":""}),(ee.fichierURL||ee.urlExterne)&&o.jsx("button",{onClick:()=>Hi(ee),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),o.jsx("button",{onClick:()=>qr(ee),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),o.jsx("button",{onClick:()=>Hc(ee),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:q===ee.id,children:q===ee.id?"":""})]})]},ee.id)})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),o.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),F&&o.jsx("div",{className:"modal-overlay",onClick:sn,children:o.jsxs("div",{className:"modal modal--xl",onClick:ee=>ee.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:me?"Modifier la ressource":"Nouvelle ressource"}),o.jsx("button",{onClick:sn,className:"modal__close",children:""})]}),o.jsxs("form",{onSubmit:Gc,children:[o.jsxs("div",{className:"modal__body",children:[!me&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),o.jsxs("select",{name:"disciplineId",className:`form-select ${ot.disciplineId?"form-select--error":""}`,value:ke.disciplineId,onChange:Nt,children:[o.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(ee=>o.jsxs("option",{value:ee.id,children:[ee.icone," ",ee.nom," (",ee.classe,")"]},ee.id))]}),ot.disciplineId&&o.jsx("span",{className:"form-error",children:ot.disciplineId})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",style:{flex:2},children:[o.jsx("label",{className:"form-label form-label--required",children:"Titre"}),o.jsx("input",{type:"text",name:"titre",className:`form-input ${ot.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:ke.titre,onChange:Nt}),ot.titre&&o.jsx("span",{className:"form-error",children:ot.titre})]}),o.jsxs("div",{className:"form-group",style:{flex:1},children:[o.jsx("label",{className:"form-label form-label--required",children:"Type"}),o.jsx("select",{name:"type",className:`form-select ${ot.type?"form-select--error":""}`,value:ke.type,onChange:Nt,children:ig.map(ee=>o.jsxs("option",{value:ee.value,children:[ee.icon," ",ee.label]},ee.value))}),ot.type&&o.jsx("span",{className:"form-error",children:ot.type})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),o.jsxs("select",{name:"chapitreId",className:"form-select",value:ke.chapitre||"",onChange:Nt,disabled:V,children:[o.jsx("option",{value:"",children:"Aucun chapitre"}),r.map(ee=>o.jsxs("option",{value:ee.id,children:[ee.numero,". ",ee.titre]},ee.id))]})]}),o.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[o.jsx("label",{className:"form-label",children:"Ordre"}),o.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:ke.ordre,onChange:Nt})]}),o.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[o.jsx("label",{className:"form-label",children:"Dure (min)"}),o.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:ke.duree||"",onChange:Nt})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:ke.description||"",onChange:Nt})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Fichier",o.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",ag[ke.type].join(", ")," - max ",W_," Mo)"]})]}),o.jsxs("div",{className:"file-upload",children:[o.jsx("input",{ref:zr,type:"file",accept:ag[ke.type].join(","),onChange:Ur,className:"file-upload__input",id:"file-input"}),!gt&&!Pt?o.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[o.jsx("div",{className:"file-upload__icon",children:""}),o.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),o.jsx("p",{className:"file-upload__hint",children:ag[ke.type].join(", ")})]}):o.jsxs("div",{className:"file-upload__preview",children:[gt?.type.startsWith("image/")&&Pt&&o.jsx("img",{src:Pt,alt:"Aperu",className:"file-preview__image"}),gt?.type.startsWith("video/")&&Pt&&o.jsx("video",{src:Pt,controls:!0,className:"file-preview__video"}),!gt?.type.startsWith("image/")&&!gt?.type.startsWith("video/")&&o.jsx("div",{className:"file-preview__document",children:o.jsx("span",{className:"file-preview__icon",children:pr(ke.type).icon})}),o.jsxs("div",{className:"file-preview__info",children:[o.jsx("p",{className:"file-preview__name",children:gt?.name||me?.fichierNom}),gt&&o.jsx("p",{className:"file-preview__size",children:ei(gt.size)})]}),o.jsx("button",{type:"button",onClick:en,className:"file-preview__remove",children:""})]})]}),ot.fichier&&o.jsx("span",{className:"form-error",children:ot.fichier}),M&&o.jsxs("div",{className:"upload-progress",children:[o.jsx("div",{className:"upload-progress__bar",style:{width:`${Q}%`}}),o.jsxs("span",{className:"upload-progress__text",children:[Q,"%"]})]})]}),ke.type==="video"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),o.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:ke.urlExterne||"",onChange:Nt}),o.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),ke.type==="cours"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Contenu du cours"}),o.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:ke.contenu||"",onChange:Nt}),o.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Tags"}),o.jsxs("div",{className:"tags-input",children:[o.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:fe,onChange:ee=>Ie(ee.target.value),onKeyPress:ee=>ee.key==="Enter"&&(ee.preventDefault(),El())}),o.jsx("button",{type:"button",onClick:El,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),ke.tags&&ke.tags.length>0&&o.jsx("div",{className:"tags-list",children:ke.tags.map((ee,Ue)=>o.jsxs("span",{className:"tag",children:[ee,o.jsx("button",{type:"button",onClick:()=>so(Ue),className:"tag__remove",children:""})]},Ue))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Options"}),o.jsxs("div",{className:"form-options",children:[o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"isPremium",checked:ke.isPremium,onChange:Nt}),o.jsx("span",{children:"Contenu Premium "})]}),o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"actif",checked:ke.actif!==!1,onChange:Nt}),o.jsx("span",{children:"Ressource active"})]})]})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{type:"button",onClick:sn,className:"btn btn--outline",disabled:k||M,children:"Annuler"}),o.jsx("button",{type:"submit",className:"btn btn--primary",disabled:k||M,children:k||M?M?`Upload ${Q}%...`:"Enregistrement...":me?"Mettre  jour":"Crer la ressource"})]})]})]})}),Z&&X&&o.jsx("div",{className:"modal-overlay",onClick:sn,children:o.jsxs("div",{className:"modal modal--xl",onClick:ee=>ee.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsxs("h2",{className:"modal__title",children:[pr(X.type).icon," ",X.titre]}),o.jsx("button",{onClick:sn,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[X.type==="video"&&X.urlExterne?o.jsx("div",{className:"preview-video",children:o.jsx("iframe",{src:X.urlExterne.replace("watch?v=","embed/"),title:X.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):X.fichierURL?o.jsx("div",{className:"preview-file",children:X.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?o.jsx("img",{src:X.fichierURL,alt:X.titre}):X.fichierURL.match(/\.(mp4|webm)$/i)?o.jsx("video",{src:X.fichierURL,controls:!0}):X.fichierURL.match(/\.pdf$/i)?o.jsx("iframe",{src:X.fichierURL,title:X.titre}):o.jsxs("div",{className:"preview-download",children:[o.jsx("span",{className:"preview-download__icon",children:pr(X.type).icon}),o.jsx("p",{children:X.fichierNom}),o.jsx("a",{href:X.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):X.contenu?o.jsx("div",{className:"preview-content",children:o.jsx("p",{children:X.contenu})}):o.jsx("div",{className:"preview-empty",children:o.jsx("p",{children:"Aucun contenu  prvisualiser"})}),o.jsxs("div",{className:"preview-info",children:[X.description&&o.jsx("p",{className:"preview-description",children:X.description}),o.jsxs("div",{className:"preview-meta",children:[o.jsxs("span",{children:["Type : ",pr(X.type).label]}),X.duree&&o.jsxs("span",{children:["Dure : ",X.duree," min"]}),X.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),ye&&se&&o.jsx("div",{className:"modal-overlay",onClick:sn,children:o.jsxs("div",{className:"modal",onClick:ee=>ee.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),o.jsx("button",{onClick:sn,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[o.jsxs("p",{children:["Supprimer la ressource ",o.jsx("strong",{children:se.titre})," ?"]}),se.fichierURL&&o.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{onClick:sn,className:"btn btn--outline",children:"Annuler"}),o.jsx("button",{onClick:yi,className:"btn btn--danger",disabled:q!==null,children:q?"Suppression...":"Supprimer"})]})]})}),o.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},iL=rt(Ee,"quizzes"),aL=async t=>{try{let e=Lt(iL,jr("titre","asc"));t?.disciplineId;let r=(await qt(e)).docs.map(i=>({id:i.id,...i.data()}));return t?.isPremium,t?.difficulte,r}catch(e){throw console.error("Erreur lors de la rcupration des quiz :",e),e}},WY=async t=>{try{const e=await Li(Xe(Ee,"quizzes",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Erreur lors de la rcupration du quiz :",e),e}},YY=async t=>{try{return(await Bi(iL,{...t,createdAt:nt.now(),updatedAt:nt.now()})).id}catch(e){throw console.error("Erreur lors de la cration du quiz :",e),e}},XY=async(t,e)=>{try{await wn(Xe(Ee,"quizzes",t),{...e,updatedAt:nt.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du quiz :",n),n}},ZY=async t=>{try{await Sd(Xe(Ee,"quizzes",t))}catch(e){throw console.error("Erreur lors de la suppression du quiz :",e),e}},JY=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,FO=()=>({id:JY(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),HO=t=>{const e=t.questions||[],n=e.reduce((i,s)=>i+(s.points||1),0),r={facile:e.filter(i=>i.difficulte==="facile").length,moyen:e.filter(i=>i.difficulte==="moyen").length,difficile:e.filter(i=>i.difficulte==="difficile").length};return{nombreQuestions:e.length,totalPoints:n,parDifficulte:r,duree:t.duree||0}},eX=()=>{const[t,e]=j.useState([]),[n,r]=j.useState([]),[i,s]=j.useState(!0),[c,u]=j.useState(null),[f,h]=j.useState(null),[p,g]=j.useState(""),[y,_]=j.useState(""),[E,w]=j.useState(""),[N,A]=j.useState(""),[R,O]=j.useState(!1),[C,V]=j.useState("list"),[$,D]=j.useState(null),[I,k]=j.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[U,q]=j.useState(null),[z,M]=j.useState(!1),[W,Q]=j.useState(null),[H,le]=j.useState(null),[_e,je]=j.useState({}),[Y,F]=j.useState(!1),te=j.useCallback(async()=>{s(!0),u(null);try{const[fe,Ie]=await Promise.all([aL(),Lc.getAll()]);e(fe),r(Ie.map(Ve=>({id:Ve.id,nom:Ve.nom||Ve.name||Ve.id})))}catch(fe){u("Erreur lors du chargement des donnes."),console.error(fe)}finally{s(!1)}},[]);j.useEffect(()=>{te()},[te]),j.useEffect(()=>{if(f){const fe=setTimeout(()=>h(null),4e3);return()=>clearTimeout(fe)}},[f]);const ye=t.filter(fe=>{if(p){const Ie=p.toLowerCase();if(!fe.titre.toLowerCase().includes(Ie))return!1}return!(y&&fe.disciplineId!==y||E==="true"&&!fe.isPremium||E==="false"&&fe.isPremium||N&&!fe.questions?.some(Ve=>Ve.difficulte===N))}),we=()=>{D(null),k({disciplineId:"",titre:"",questions:[FO()],duree:15,isPremium:!1,noteMinimale:50}),q(null),V("form")},Z=fe=>{D(fe),k({disciplineId:fe.disciplineId,titre:fe.titre,questions:fe.questions||[],duree:fe.duree||15,isPremium:fe.isPremium||!1,noteMinimale:fe.noteMinimale||50}),q(null),V("form")},ne=async()=>{if(!I.titre.trim()){u("Le titre du quiz est obligatoire.");return}if(!I.disciplineId){u("Veuillez slectionner une discipline.");return}if(I.questions.length===0){u("Le quiz doit contenir au moins une question.");return}for(let fe=0;fe<I.questions.length;fe++){const Ie=I.questions[fe];if(!Ie.question.trim()){u(`La question ${fe+1} n'a pas d'nonc.`);return}if(Ie.options.filter(Ke=>!Ke.trim()).length>0){u(`La question ${fe+1} a des options vides.`);return}}M(!0),u(null);try{$?(await XY($.id,I),h("Quiz mis  jour avec succs !")):(await YY(I),h("Quiz cr avec succs !")),await te(),V("list")}catch(fe){u("Erreur lors de la sauvegarde du quiz."),console.error(fe)}finally{M(!1)}},me=async fe=>{try{await ZY(fe),h("Quiz supprim avec succs."),Q(null),await te()}catch(Ie){u("Erreur lors de la suppression du quiz."),console.error(Ie)}},Me=()=>{const fe=FO();k(Ie=>({...Ie,questions:[...Ie.questions,fe]})),q(fe.id)},se=fe=>{const Ie=I.questions.find(zn=>zn.id===fe);if(!Ie)return;const Ve={...Ie,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${Ie.question} (copie)`},Ke=I.questions.findIndex(zn=>zn.id===fe),Vt=[...I.questions];Vt.splice(Ke+1,0,Ve),k(zn=>({...zn,questions:Vt})),q(Ve.id)},Se=fe=>{k(Ie=>({...Ie,questions:Ie.questions.filter(Ve=>Ve.id!==fe)})),U===fe&&q(null)},X=(fe,Ie,Ve)=>{k(Ke=>({...Ke,questions:Ke.questions.map(Vt=>Vt.id===fe?{...Vt,[Ie]:Ve}:Vt)}))},pe=(fe,Ie,Ve)=>{k(Ke=>({...Ke,questions:Ke.questions.map(Vt=>Vt.id===fe?{...Vt,options:Vt.options.map((zn,Lr)=>Lr===Ie?Ve:zn)}:Vt)}))},ke=fe=>{le(fe),je({}),F(!1),V("preview")},Fe=(fe,Ie)=>{Y||je(Ve=>({...Ve,[fe]:Ie}))},ot=()=>{F(!0)},ht=fe=>n.find(Ie=>Ie.id===fe)?.nom||fe,gt=({level:fe})=>{const Ie={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return o.jsx("span",{className:`quiz-badge ${Ie[fe]||"quiz-badge-moyen"}`,children:fe.charAt(0).toUpperCase()+fe.slice(1)})},mr=()=>o.jsxs(o.Fragment,{children:[c&&o.jsxs("div",{className:"admin-message admin-message-error",children:[o.jsx(cv,{size:18}),o.jsx("span",{children:c}),o.jsx("button",{onClick:()=>u(null),className:"admin-message-close",children:o.jsx(fc,{size:16})})]}),f&&o.jsxs("div",{className:"admin-message admin-message-success",children:[o.jsx(bn,{size:18}),o.jsx("span",{children:f})]})]}),Pt=()=>o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(oa,{size:24})," Gestion des Quiz"]}),o.jsxs("p",{className:"admin-subtitle",children:[t.length," quiz au total  ",ye.length," affich(s)"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:we,children:[o.jsx(rg,{size:18})," Nouveau Quiz"]})]}),o.jsxs("div",{className:"admin-toolbar",children:[o.jsxs("div",{className:"admin-search-wrapper",children:[o.jsx(Y4,{size:18,className:"admin-search-icon"}),o.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:p,onChange:fe=>g(fe.target.value)})]}),o.jsxs("button",{className:`admin-btn admin-btn-outline ${R?"active":""}`,onClick:()=>O(!R),children:[o.jsx(W4,{size:16})," Filtres",R?o.jsx(ow,{size:14}):o.jsx(lv,{size:14})]})]}),R&&o.jsxs("div",{className:"admin-filters-panel",children:[o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Discipline"}),o.jsxs("select",{className:"admin-select",value:y,onChange:fe=>_(fe.target.value),children:[o.jsx("option",{value:"",children:"Toutes les disciplines"}),n.map(fe=>o.jsx("option",{value:fe.id,children:fe.nom},fe.id))]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Accs"}),o.jsxs("select",{className:"admin-select",value:E,onChange:fe=>w(fe.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"false",children:"Gratuit"}),o.jsx("option",{value:"true",children:"Premium"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Difficult"}),o.jsxs("select",{className:"admin-select",value:N,onChange:fe=>A(fe.target.value),children:[o.jsx("option",{value:"",children:"Toutes"}),o.jsx("option",{value:"facile",children:"Facile"}),o.jsx("option",{value:"moyen",children:"Moyen"}),o.jsx("option",{value:"difficile",children:"Difficile"})]})]}),o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{_(""),w(""),A(""),g("")},children:"Rinitialiser"})]}),i?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des quiz..."})]}):ye.length===0?o.jsxs("div",{className:"admin-empty-state",children:[o.jsx(kg,{size:48}),o.jsx("h3",{children:"Aucun quiz trouv"}),o.jsx("p",{children:t.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),t.length===0&&o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:we,children:[o.jsx(rg,{size:18})," Crer un quiz"]})]}):o.jsx("div",{className:"quiz-grid",children:ye.map(fe=>{const Ie=HO(fe);return o.jsxs("div",{className:"quiz-card",children:[o.jsxs("div",{className:"quiz-card-header",children:[o.jsxs("div",{className:"quiz-card-title-row",children:[o.jsx("h3",{className:"quiz-card-title",children:fe.titre}),fe.isPremium&&o.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[o.jsx(mi,{size:12})," Premium"]})]}),o.jsx("span",{className:"quiz-card-discipline",children:ht(fe.disciplineId)})]}),o.jsxs("div",{className:"quiz-card-stats",children:[o.jsxs("div",{className:"quiz-stat",children:[o.jsx(kg,{size:14}),o.jsxs("span",{children:[Ie.nombreQuestions," question(s)"]})]}),o.jsxs("div",{className:"quiz-stat",children:[o.jsx(Ec,{size:14}),o.jsxs("span",{children:[Ie.totalPoints," pts"]})]}),o.jsxs("div",{className:"quiz-stat",children:[o.jsx(od,{size:14}),o.jsxs("span",{children:[Ie.duree," min"]})]})]}),o.jsxs("div",{className:"quiz-card-difficulty",children:[Ie.parDifficulte.facile>0&&o.jsx(gt,{level:"facile"}),Ie.parDifficulte.moyen>0&&o.jsx(gt,{level:"moyen"}),Ie.parDifficulte.difficile>0&&o.jsx(gt,{level:"difficile"})]}),o.jsxs("div",{className:"quiz-card-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>ke(fe),title:"Prvisualiser",children:[o.jsx(cw,{size:14})," Aperu"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>Z(fe),title:"Modifier",children:[o.jsx(WW,{size:14})," Modifier"]}),W===fe.id?o.jsxs("div",{className:"quiz-delete-confirm",children:[o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>me(fe.id),children:"Confirmer"}),o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>Q(null),children:"Annuler"})]}):o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>Q(fe.id),title:"Supprimer",children:o.jsx(zO,{size:14})})]})]},fe.id)})})]}),It=()=>o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(oa,{size:24}),$?"Modifier le quiz":"Nouveau quiz"]}),o.jsxs("p",{className:"admin-subtitle",children:[I.questions.length," question(s) ajoute(s)"]})]}),o.jsxs("div",{className:"admin-header-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>V("list"),children:[o.jsx(fc,{size:18})," Annuler"]}),o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ne,disabled:z,children:[o.jsx(aY,{size:18})," ",z?"Enregistrement...":"Enregistrer"]})]})]}),o.jsxs("div",{className:"admin-card quiz-form-section",children:[o.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),o.jsxs("div",{className:"quiz-form-grid",children:[o.jsxs("div",{className:"admin-form-group quiz-form-full",children:[o.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),o.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:I.titre,onChange:fe=>k(Ie=>({...Ie,titre:fe.target.value}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Discipline *"}),o.jsxs("select",{className:"admin-select",value:I.disciplineId,onChange:fe=>k(Ie=>({...Ie,disciplineId:fe.target.value})),children:[o.jsx("option",{value:"",children:"-- Slectionner --"}),n.map(fe=>o.jsx("option",{value:fe.id,children:fe.nom},fe.id))]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),o.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:I.duree,onChange:fe=>k(Ie=>({...Ie,duree:parseInt(fe.target.value)||15}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),o.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:I.noteMinimale,onChange:fe=>k(Ie=>({...Ie,noteMinimale:parseInt(fe.target.value)||50}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Accs"}),o.jsxs("div",{className:`quiz-toggle ${I.isPremium?"quiz-toggle-active":""}`,onClick:()=>k(fe=>({...fe,isPremium:!fe.isPremium})),children:[o.jsx(mi,{size:16}),o.jsx("span",{children:I.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),o.jsxs("div",{className:"admin-card quiz-form-section",children:[o.jsxs("div",{className:"quiz-questions-header",children:[o.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",I.questions.length,")"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:Me,children:[o.jsx(rg,{size:14})," Ajouter une question"]})]}),I.questions.length===0?o.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[o.jsx(kg,{size:36}),o.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):o.jsx("div",{className:"quiz-questions-list",children:I.questions.map((fe,Ie)=>o.jsxs("div",{className:`quiz-question-item ${U===fe.id?"expanded":""}`,children:[o.jsxs("div",{className:"quiz-question-header",onClick:()=>q(U===fe.id?null:fe.id),children:[o.jsxs("div",{className:"quiz-question-header-left",children:[o.jsx(CW,{size:16,className:"quiz-grip-icon"}),o.jsxs("span",{className:"quiz-question-number",children:["Q",Ie+1]}),o.jsx("span",{className:"quiz-question-preview",children:fe.question||"Question sans nonc..."})]}),o.jsxs("div",{className:"quiz-question-header-right",children:[o.jsx(gt,{level:fe.difficulte||"moyen"}),o.jsxs("span",{className:"quiz-question-points",children:[fe.points," pt(s)"]}),U===fe.id?o.jsx(ow,{size:16}):o.jsx(lv,{size:16})]})]}),U===fe.id&&o.jsxs("div",{className:"quiz-question-body",children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"nonc de la question *"}),o.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:fe.question,onChange:Ve=>X(fe.id,"question",Ve.target.value)})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),o.jsx("div",{className:"quiz-options-grid",children:fe.options.map((Ve,Ke)=>o.jsxs("div",{className:`quiz-option-item ${fe.reponseCorrecte===Ke?"quiz-option-correct":""}`,children:[o.jsx("button",{type:"button",className:`quiz-option-radio ${fe.reponseCorrecte===Ke?"active":""}`,onClick:()=>X(fe.id,"reponseCorrecte",Ke),title:fe.reponseCorrecte===Ke?"Bonne rponse":"Marquer comme bonne rponse",children:fe.reponseCorrecte===Ke?o.jsx(bn,{size:16}):o.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+Ke)})}),o.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+Ke)}`,value:Ve,onChange:Vt=>pe(fe.id,Ke,Vt.target.value)})]},Ke))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),o.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:fe.explication,onChange:Ve=>X(fe.id,"explication",Ve.target.value)})]}),o.jsxs("div",{className:"quiz-question-meta",children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Difficult"}),o.jsxs("select",{className:"admin-select",value:fe.difficulte,onChange:Ve=>X(fe.id,"difficulte",Ve.target.value),children:[o.jsx("option",{value:"facile",children:"Facile"}),o.jsx("option",{value:"moyen",children:"Moyen"}),o.jsx("option",{value:"difficile",children:"Difficile"})]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Points"}),o.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:fe.points,onChange:Ve=>X(fe.id,"points",parseInt(Ve.target.value)||1)})]})]}),o.jsxs("div",{className:"quiz-question-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>se(fe.id),children:[o.jsx(bW,{size:14})," Dupliquer"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>Se(fe.id),children:[o.jsx(zO,{size:14})," Supprimer"]})]})]})]},fe.id))}),I.questions.length>0&&o.jsx("div",{className:"quiz-add-question-bottom",children:o.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:Me,children:[o.jsx(rg,{size:16})," Ajouter une question"]})})]})]}),zr=()=>{if(!H)return null;const fe=HO(H);let Ie=0,Ve=0;return Y&&H.questions.forEach(Ke=>{Ve+=Ke.points||1,_e[Ke.id]===Ke.reponseCorrecte&&(Ie+=Ke.points||1)}),o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(cw,{size:24})," Prvisualisation : ",H.titre]}),o.jsxs("p",{className:"admin-subtitle",children:[ht(H.disciplineId),"  ",fe.nombreQuestions," questions  ",fe.duree," min"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{V("list"),le(null)},children:[o.jsx(fc,{size:18})," Fermer"]})]}),Y&&o.jsxs("div",{className:`quiz-preview-score ${Ie/Ve>=(H.noteMinimale||50)/100?"success":"fail"}`,children:[o.jsx(Ec,{size:32}),o.jsxs("div",{children:[o.jsxs("h3",{children:["Score : ",Ie,"/",Ve," (",Math.round(Ie/Ve*100),"%)"]}),o.jsxs("p",{children:["Note minimale : ",H.noteMinimale||50,"% "," ",Ie/Ve>=(H.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),o.jsx("div",{className:"quiz-preview-questions",children:H.questions.map((Ke,Vt)=>{const zn=_e[Ke.id],Lr=zn===Ke.reponseCorrecte;return o.jsxs("div",{className:"admin-card quiz-preview-question",children:[o.jsxs("div",{className:"quiz-preview-question-header",children:[o.jsxs("span",{className:"quiz-question-number",children:["Q",Vt+1]}),o.jsx(gt,{level:Ke.difficulte||"moyen"}),o.jsxs("span",{className:"quiz-question-points",children:[Ke.points," pt(s)"]})]}),o.jsx("p",{className:"quiz-preview-question-text",children:Ke.question}),o.jsx("div",{className:"quiz-preview-options",children:Ke.options.map((ao,qr)=>{let Hi="quiz-preview-option";return Y?qr===Ke.reponseCorrecte?Hi+=" correct":qr===zn&&!Lr&&(Hi+=" incorrect"):zn===qr&&(Hi+=" selected"),o.jsxs("button",{className:Hi,onClick:()=>Fe(Ke.id,qr),disabled:Y,children:[o.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+qr)}),o.jsx("span",{children:ao}),Y&&qr===Ke.reponseCorrecte&&o.jsx(bn,{size:16,className:"quiz-preview-check"})]},qr)})}),Y&&Ke.explication&&o.jsxs("div",{className:"quiz-preview-explication",children:[o.jsx("strong",{children:"Explication :"})," ",Ke.explication]})]},Ke.id)})}),!Y&&o.jsx("div",{className:"quiz-preview-submit",children:o.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:ot,disabled:Object.keys(_e).length<H.questions.length,children:[o.jsx(bn,{size:18})," Soumettre (",Object.keys(_e).length,"/",H.questions.length,")"]})})]})};return o.jsxs("div",{className:"admin-container",children:[mr(),C==="list"&&Pt(),C==="form"&&It(),C==="preview"&&zr()]})},sL=rt(Ee,"users"),tX=rt(Ee,"quizResults"),nX=async t=>{try{let e=Lt(sL,jr("displayName","asc"));t?.role;let r=(await qt(e)).docs.map(i=>({uid:i.id,...i.data()}));return t?.isPremium,t?.isActive,t?.search,r}catch(e){throw console.error("Erreur lors de la rcupration des utilisateurs :",e),e}},rX=async(t,e)=>{try{await wn(Xe(Ee,"users",t),{role:e,updatedAt:nt.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du rle :",n),n}},iX=async(t,e)=>{try{const n={isPremium:e,updatedAt:nt.now()};if(e){const r=new Date;r.setDate(r.getDate()+30),n.subscriptionEnd=nt.fromDate(r)}else n.subscriptionEnd=null;await wn(Xe(Ee,"users",t),n)}catch(n){throw console.error("Erreur lors de la mise  jour du statut Premium :",n),n}},aX=async(t,e)=>{try{await wn(Xe(Ee,"users",t),{isActive:e,updatedAt:nt.now()})}catch(n){throw console.error("Erreur lors du changement de statut du compte :",n),n}},sX=async t=>{try{const e=Lt(tX,st("userId","==",t)),r=(await qt(e)).docs.map(f=>({id:f.id,...f.data()})),i=r.length,s=r.filter(f=>f.reussi).length,c=i>0?Math.round(r.reduce((f,h)=>f+h.score,0)/i):0,u=r.length>0?new Date(Math.max(...r.map(f=>{const h=f.datePassage;return h?.toDate?h.toDate().getTime():new Date(h).getTime()}))):null;return{totalQuizPasses:i,scoresMoyens:c,quizReussis:s,dernierQuiz:u}}catch(e){return console.error("Erreur lors du calcul des statistiques :",e),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},oX=async()=>{try{const e=(await qt(sL)).docs.map(n=>n.data());return{total:e.length,admins:e.filter(n=>n.role==="admin").length,profs:e.filter(n=>n.role==="prof").length,eleves:e.filter(n=>n.role==="eleve").length,premium:e.filter(n=>n.isPremium).length,actifs:e.filter(n=>n.isActive!==!1).length}}catch(t){throw console.error("Erreur lors du calcul des stats globales :",t),t}},lX=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(null),[i,s]=j.useState(!0),[c,u]=j.useState(null),[f,h]=j.useState(null),[p,g]=j.useState(""),[y,_]=j.useState(""),[E,w]=j.useState(""),[N,A]=j.useState(""),[R,O]=j.useState(!1),[C,V]=j.useState(null),[$,D]=j.useState(null),[I,k]=j.useState(!1),[U,q]=j.useState(null),[z,M]=j.useState(null),W=j.useCallback(async()=>{s(!0),u(null);try{const[Z,ne]=await Promise.all([nX(),oX()]);e(Z),r(ne)}catch(Z){u("Erreur lors du chargement des utilisateurs."),console.error(Z)}finally{s(!1)}},[]);j.useEffect(()=>{W()},[W]),j.useEffect(()=>{if(f){const Z=setTimeout(()=>h(null),4e3);return()=>clearTimeout(Z)}},[f]);const Q=t.filter(Z=>{if(p){const ne=p.toLowerCase();if(!Z.displayName?.toLowerCase().includes(ne)&&!Z.email?.toLowerCase().includes(ne))return!1}return!(y&&Z.role!==y||E==="true"&&!Z.isPremium||E==="false"&&Z.isPremium||N==="true"&&Z.isActive===!1||N==="false"&&Z.isActive!==!1)}),H=async Z=>{V(Z),k(!0);try{const ne=await sX(Z.uid);D(ne)}catch(ne){console.error("Erreur lors du chargement des statistiques :",ne),D(null)}finally{k(!1)}},le=async()=>{if(z){q(z.userId);try{switch(z.type){case"role":await rX(z.userId,z.value),h("Rle mis  jour avec succs.");break;case"premium":await iX(z.userId,z.value),h(z.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await aX(z.userId,z.value),h(z.value?"Compte ractiv.":"Compte dsactiv.");break}await W()}catch(Z){u("Erreur lors de l'excution de l'action."),console.error(Z)}finally{q(null),M(null)}}},_e=({role:Z})=>{const ne={admin:{icon:o.jsx(AE,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:o.jsx(ld,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:o.jsx(oa,{size:12}),className:"user-badge-eleve",label:"lve"}},me=ne[Z]||ne.eleve;return o.jsxs("span",{className:`user-badge ${me.className}`,children:[me.icon," ",me.label]})},je=Z=>Z?(Z?.toDate?Z.toDate():new Date(Z)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",Y=Z=>Z?Z.charAt(0).toUpperCase():"?",F=()=>o.jsxs(o.Fragment,{children:[c&&o.jsxs("div",{className:"admin-message admin-message-error",children:[o.jsx(cv,{size:18}),o.jsx("span",{children:c}),o.jsx("button",{onClick:()=>u(null),className:"admin-message-close",children:o.jsx(fc,{size:16})})]}),f&&o.jsxs("div",{className:"admin-message admin-message-success",children:[o.jsx(bn,{size:18}),o.jsx("span",{children:f})]})]}),te=()=>{if(!n)return null;const Z=[{label:"Total",value:n.total,icon:o.jsx(Dg,{size:20}),color:"stat-blue"},{label:"lves",value:n.eleves,icon:o.jsx(oa,{size:20}),color:"stat-green"},{label:"Professeurs",value:n.profs,icon:o.jsx(ld,{size:20}),color:"stat-purple"},{label:"Premium",value:n.premium,icon:o.jsx(mi,{size:20}),color:"stat-gold"}];return o.jsx("div",{className:"user-stats-grid",children:Z.map(ne=>o.jsxs("div",{className:`user-stat-card ${ne.color}`,children:[o.jsx("div",{className:"user-stat-icon",children:ne.icon}),o.jsxs("div",{className:"user-stat-info",children:[o.jsx("span",{className:"user-stat-value",children:ne.value}),o.jsx("span",{className:"user-stat-label",children:ne.label})]})]},ne.label))})},ye=()=>z?o.jsx("div",{className:"admin-modal-overlay",onClick:()=>M(null),children:o.jsxs("div",{className:"admin-modal",onClick:Z=>Z.stopPropagation(),children:[o.jsxs("div",{className:"admin-modal-header",children:[o.jsx("h3",{children:"Confirmer l'action"}),o.jsx("button",{className:"admin-modal-close",onClick:()=>M(null),children:o.jsx(fc,{size:20})})]}),o.jsx("div",{className:"admin-modal-body",children:o.jsx("p",{children:z.label})}),o.jsxs("div",{className:"admin-modal-footer",children:[o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>M(null),children:"Annuler"}),o.jsx("button",{className:"admin-btn admin-btn-primary",onClick:le,disabled:U===z.userId,children:U===z.userId?"En cours...":"Confirmer"})]})]})}):null,we=()=>C?o.jsx("div",{className:"admin-modal-overlay",onClick:()=>V(null),children:o.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:Z=>Z.stopPropagation(),children:[o.jsxs("div",{className:"admin-modal-header",children:[o.jsx("h3",{children:"Dtail de l'utilisateur"}),o.jsx("button",{className:"admin-modal-close",onClick:()=>V(null),children:o.jsx(fc,{size:20})})]}),o.jsxs("div",{className:"admin-modal-body",children:[o.jsxs("div",{className:"user-detail-profile",children:[o.jsx("div",{className:"user-detail-avatar",children:Y(C.displayName)}),o.jsxs("div",{className:"user-detail-info",children:[o.jsx("h4",{children:C.displayName||"Sans nom"}),o.jsx("p",{children:C.email}),o.jsxs("div",{className:"user-detail-badges",children:[o.jsx(_e,{role:C.role}),C.isPremium&&o.jsxs("span",{className:"user-badge user-badge-premium",children:[o.jsx(mi,{size:12})," Premium"]}),o.jsx("span",{className:`user-badge ${C.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:C.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),o.jsxs("div",{className:"user-detail-dates",children:[o.jsxs("div",{children:[o.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),o.jsx("span",{children:je(C.createdAt)})]}),C.isPremium&&C.subscriptionEnd&&o.jsxs("div",{children:[o.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),o.jsx("span",{children:je(C.subscriptionEnd)})]})]}),o.jsxs("div",{className:"user-detail-stats-section",children:[o.jsxs("h4",{children:[o.jsx(Xu,{size:18})," Statistiques"]}),I?o.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des statistiques..."})]}):$?o.jsxs("div",{className:"user-detail-stats-grid",children:[o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(oa,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:$.totalQuizPasses}),o.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(fw,{size:20}),o.jsxs("span",{className:"user-detail-stat-value",children:[$.scoresMoyens,"%"]}),o.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(Ec,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:$.quizReussis}),o.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(od,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:$.dernierQuiz?je($.dernierQuiz):"Aucun"}),o.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):o.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return o.jsxs("div",{className:"admin-container",children:[F(),ye(),we(),o.jsxs("div",{className:"user-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(Dg,{size:24})," Gestion des Utilisateurs"]}),o.jsxs("p",{className:"admin-subtitle",children:[t.length," utilisateur(s) au total  ",Q.length," affich(s)"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:W,children:[o.jsx(tY,{size:16})," Actualiser"]})]}),te(),o.jsxs("div",{className:"admin-toolbar",children:[o.jsxs("div",{className:"admin-search-wrapper",children:[o.jsx(Y4,{size:18,className:"admin-search-icon"}),o.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:p,onChange:Z=>g(Z.target.value)})]}),o.jsxs("button",{className:`admin-btn admin-btn-outline ${R?"active":""}`,onClick:()=>O(!R),children:[o.jsx(W4,{size:16})," Filtres",R?o.jsx(ow,{size:14}):o.jsx(lv,{size:14})]})]}),R&&o.jsxs("div",{className:"admin-filters-panel",children:[o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Rle"}),o.jsxs("select",{className:"admin-select",value:y,onChange:Z=>_(Z.target.value),children:[o.jsx("option",{value:"",children:"Tous les rles"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"prof",children:"Professeur"}),o.jsx("option",{value:"eleve",children:"lve"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),o.jsxs("select",{className:"admin-select",value:E,onChange:Z=>w(Z.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Premium"}),o.jsx("option",{value:"false",children:"Gratuit"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Statut"}),o.jsxs("select",{className:"admin-select",value:N,onChange:Z=>A(Z.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Actifs"}),o.jsx("option",{value:"false",children:"Dsactivs"})]})]}),o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{_(""),w(""),A(""),g("")},children:"Rinitialiser"})]}),i?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des utilisateurs..."})]}):Q.length===0?o.jsxs("div",{className:"admin-empty-state",children:[o.jsx(Dg,{size:48}),o.jsx("h3",{children:"Aucun utilisateur trouv"}),o.jsx("p",{children:t.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):o.jsx("div",{className:"user-table-wrapper",children:o.jsxs("table",{className:"user-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Utilisateur"}),o.jsx("th",{children:"Rle"}),o.jsx("th",{children:"Abonnement"}),o.jsx("th",{children:"Statut"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:Q.map(Z=>o.jsxs("tr",{className:Z.isActive===!1?"user-row-inactive":"",children:[o.jsx("td",{children:o.jsxs("div",{className:"user-cell-info",children:[o.jsx("div",{className:"user-avatar-sm",children:Y(Z.displayName)}),o.jsxs("div",{children:[o.jsx("span",{className:"user-cell-name",children:Z.displayName||"Sans nom"}),o.jsx("span",{className:"user-cell-email",children:Z.email})]})]})}),o.jsx("td",{children:o.jsxs("select",{className:"admin-select admin-select-sm",value:Z.role,onChange:ne=>M({type:"role",userId:Z.uid,value:ne.target.value,label:`Changer le rle de "${Z.displayName||Z.email}" en "${ne.target.value}" ?`}),children:[o.jsx("option",{value:"eleve",children:"lve"}),o.jsx("option",{value:"prof",children:"Professeur"}),o.jsx("option",{value:"admin",children:"Admin"})]})}),o.jsx("td",{children:o.jsx("button",{className:`user-premium-toggle ${Z.isPremium?"active":""}`,onClick:()=>M({type:"premium",userId:Z.uid,value:!Z.isPremium,label:Z.isPremium?`Dsactiver le statut Premium de "${Z.displayName||Z.email}" ?`:`Activer le statut Premium de "${Z.displayName||Z.email}" pour 30 jours ?`}),disabled:U===Z.uid,children:Z.isPremium?o.jsxs(o.Fragment,{children:[o.jsx(nh,{size:14})," Premium"]}):o.jsxs(o.Fragment,{children:[o.jsx(mi,{size:14})," Gratuit"]})})}),o.jsx("td",{children:o.jsx("button",{className:`user-status-toggle ${Z.isActive!==!1?"active":"inactive"}`,onClick:()=>M({type:"active",userId:Z.uid,value:Z.isActive===!1,label:Z.isActive===!1?`Ractiver le compte de "${Z.displayName||Z.email}" ?`:`Dsactiver le compte de "${Z.displayName||Z.email}" ?`}),disabled:U===Z.uid,children:Z.isActive!==!1?o.jsxs(o.Fragment,{children:[o.jsx(wY,{size:14})," Actif"]}):o.jsxs(o.Fragment,{children:[o.jsx(EY,{size:14})," Dsactiv"]})})}),o.jsx("td",{children:o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>H(Z),title:"Voir les statistiques",children:[o.jsx(cw,{size:14})," Dtail"]})})]},Z.uid))})]})})]})]})},oL=rt(Ee,"quiz_results"),cX=async t=>{try{return(await Bi(oL,{...t,datePassage:nt.now()})).id}catch(e){throw console.error("Erreur lors de la sauvegarde du rsultat :",e),e}},Ry=async(t,e)=>{try{let n=Lt(oL,st("userId","==",t),jr("datePassage","desc"));return e&&(n=Lt(n,hl(e))),(await qt(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Erreur lors de la rcupration de l'historique :",n),n}},uX=async t=>{try{const e=await Ry(t);if(e.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const n=e.reduce((p,g)=>p+g.pourcentage,0),r=Math.round(n/e.length),i=Math.max(...e.map(p=>p.pourcentage)),s=e.reduce((p,g)=>p+(g.tempsEcoule||0),0),c=e.filter(p=>p.reussi).length;let u=0,f=0;for(const p of e)p.reussi?(u++,f=Math.max(f,u)):(e.find(g=>!g.reussi),f=Math.max(f,u),u=0);let h=0;for(const p of e)if(p.reussi)h++;else break;return{totalQuizPasses:e.length,totalQuizReussis:c,moyenneGenerale:r,tempsTotal:s,meilleurScore:i,serieReussites:h,meilleureSerieReussites:Math.max(f,h)}}catch(e){return console.error("Erreur lors du calcul des stats :",e),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},dX=async t=>{try{const e=await Ry(t);if(e.length===0)return[];const n={};for(const r of e){const i=r.disciplineId;n[i]||(n[i]=[]),n[i].push(r)}return Object.entries(n).map(([r,i])=>{const s=Math.round(i.reduce((g,y)=>g+y.pourcentage,0)/i.length),c=Math.max(...i.map(g=>g.pourcentage)),u=i[0].pourcentage,f=i.filter(g=>g.reussi).length,h=i.reduce((g,y)=>g+(y.tempsEcoule||0),0);let p="stable";if(i.length>=4){const g=i.slice(0,3),y=i.slice(3,6),_=g.reduce((w,N)=>w+N.pourcentage,0)/g.length,E=y.reduce((w,N)=>w+N.pourcentage,0)/y.length;_-E>5?p="up":E-_>5&&(p="down")}return{disciplineId:r,disciplineNom:i[0].disciplineNom||r,nombreQuiz:i.length,moyenne:s,meilleurScore:c,dernierScore:u,quizReussis:f,tempsTotal:h,tendance:p}})}catch(e){return console.error("Erreur lors du calcul de la progression par discipline :",e),[]}},fX=async(t,e)=>{try{return(await Ry(t,e||20)).reverse().map(r=>({date:(r.datePassage?.toDate?r.datePassage.toDate():new Date(r.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:r.pourcentage,discipline:r.disciplineNom||r.disciplineId}))}catch(n){return console.error("Erreur lors de la rcupration des donnes temporelles :",n),[]}},hX=(t,e)=>[{id:"premier_quiz",nom:"Premier pas",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",obtenu:t.totalQuizPasses>=1},{id:"dix_quiz",nom:"Explorateur",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",obtenu:t.totalQuizPasses>=10},{id:"vingt_cinq_quiz",nom:"Assidu",description:"Passer 25 quiz",icone:"",condition:"25 quiz passs",obtenu:t.totalQuizPasses>=25},{id:"cinquante_quiz",nom:"Champion",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",obtenu:t.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",obtenu:t.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent",description:"Maintenir une moyenne de 80%+",icone:"",condition:"Moyenne  80%",obtenu:t.moyenneGenerale>=80&&t.totalQuizPasses>=5},{id:"moyenne_60",nom:"Bon lve",description:"Maintenir une moyenne de 60%+",icone:"",condition:"Moyenne  60%",obtenu:t.moyenneGenerale>=60&&t.totalQuizPasses>=5},{id:"serie_3",nom:"En forme",description:"3 quiz russis d'affile",icone:"",condition:"Srie de 3 russites",obtenu:t.meilleureSerieReussites>=3},{id:"serie_5",nom:"Imbattable",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",obtenu:t.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",obtenu:t.meilleureSerieReussites>=10},{id:"multi_3",nom:"Polyvalent",description:"Passer des quiz dans 3 disciplines",icone:"",condition:"3 disciplines diffrentes",obtenu:e.length>=3},{id:"multi_5",nom:"Touche--tout",description:"Passer des quiz dans 5 disciplines",icone:"",condition:"5 disciplines diffrentes",obtenu:e.length>=5}],lL=t=>{if(t<60)return`${t} s`;const e=Math.floor(t/60),n=t%60;return n>0?`${e} min ${n.toString().padStart(2,"0")} s`:`${e} min`},Vu=t=>t>=80?"#10b981":t>=60?"#3b82f6":t>=40?"#f59e0b":"#ef4444",cL=t=>t>=80?"Excellent":t>=60?"Bien":t>=40?"Passable":" amliorer",mX=()=>{const{quizId:t}=ly(),e=kr(),{currentUser:n}=Vn(),[r,i]=j.useState(null),[s,c]=j.useState(""),[u,f]=j.useState(!0),[h,p]=j.useState(null),[g,y]=j.useState("intro"),[_,E]=j.useState(0),[w,N]=j.useState({}),[A,R]=j.useState(0),[O,C]=j.useState(0),V=j.useRef(null),[$,D]=j.useState(0),[I,k]=j.useState(0),[U,q]=j.useState(0),[z,M]=j.useState(!1),[W,Q]=j.useState(!1);j.useEffect(()=>{(async()=>{if(!t){p("ID du quiz manquant."),f(!1);return}try{const ne=await WY(t);if(!ne){p("Quiz introuvable."),f(!1);return}i(ne),R(ne.duree*60);try{const Me=(await Lc.getAll()).find(se=>se.id===ne.disciplineId);c(Me?.nom||ne.disciplineId)}catch{c(ne.disciplineId)}}catch(ne){p("Erreur lors du chargement du quiz."),console.error(ne)}finally{f(!1)}})()},[t]),j.useEffect(()=>{if(g==="playing")return V.current=setInterval(()=>{R(Z=>Z<=1?(clearInterval(V.current),je(),0):Z-1),C(Z=>Z+1)},1e3),()=>{V.current&&clearInterval(V.current)}},[g]);const H=()=>{y("playing"),E(0),N({}),C(0),r&&R(r.duree*60)},le=(Z,ne)=>{N(me=>({...me,[Z]:ne}))},_e=Z=>{r&&Z>=0&&Z<r.questions.length&&E(Z)},je=j.useCallback(async()=>{if(!r||!n||g==="review")return;V.current&&clearInterval(V.current);let Z=0,ne=0,me=0;r.questions.forEach(Se=>{const X=Se.points||1;ne+=X,w[Se.id]===Se.reponseCorrecte&&(Z+=X,me++)});const Me=ne>0?Math.round(Z/ne*100):0,se=Me>=(r.noteMinimale||50);D(Z),k(ne),q(me),y("review"),M(!0);try{const Se={quizId:r.id,quizTitre:r.titre,disciplineId:r.disciplineId,disciplineNom:s,userId:n.uid,reponses:r.questions.map(X=>w[X.id]??-1),tempsEcoule:O,score:Z,totalPoints:ne,pourcentage:Me,reussi:se,nombreQuestions:r.questions.length,bonnesReponses:me};await cX(Se),Q(!0)}catch(Se){console.error("Erreur lors de la sauvegarde :",Se)}finally{M(!1)}},[r,n,w,O,s,g]),Y=Z=>{const ne=Math.floor(Z/60),me=Z%60;return`${ne.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")}`},F=()=>{if(!r)return"";const Z=r.duree*60,ne=A/Z;return ne<=.1?"timer-critical":ne<=.25?"timer-warning":""},te=Object.keys(w).length;if(u)return o.jsxs("div",{className:"quiz-player-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement du quiz..."})]});if(h||!r)return o.jsxs("div",{className:"quiz-player-error",children:[o.jsx(cv,{size:48}),o.jsx("h3",{children:h||"Quiz introuvable"}),o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(uw,{size:18})," Retour au tableau de bord"]})]});if(r.isPremium&&!n?.isPremium)return o.jsx("div",{className:"quiz-player-locked",children:o.jsxs("div",{className:"qp-locked-card",children:[o.jsx(dw,{size:48}),o.jsx("h3",{children:"Quiz Premium"}),o.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),o.jsxs("p",{className:"qp-locked-price",children:[" partir de ",o.jsx("strong",{children:"2 000 FCFA/mois"})]}),o.jsxs("div",{className:"qp-locked-actions",children:[o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/premium"),children:[o.jsx(mi,{size:18})," Devenir Premium"]}),o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(F_,{size:18})," Retour"]})]})]})});if(g==="intro")return o.jsx("div",{className:"quiz-player-intro",children:o.jsxs("div",{className:"qp-intro-card",children:[o.jsxs("div",{className:"qp-intro-header",children:[o.jsxs("button",{className:"qp-back-btn",onClick:()=>e(-1),children:[o.jsx(F_,{size:20})," Retour"]}),r.isPremium&&o.jsxs("span",{className:"qp-badge qp-badge-premium",children:[o.jsx(mi,{size:12})," Premium"]})]}),o.jsxs("div",{className:"qp-intro-content",children:[o.jsx("h1",{className:"qp-intro-title",children:r.titre}),o.jsx("span",{className:"qp-intro-discipline",children:s}),o.jsxs("div",{className:"qp-intro-stats",children:[o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(oa,{size:20}),o.jsxs("div",{children:[o.jsx("span",{className:"qp-intro-stat-value",children:r.questions.length}),o.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(od,{size:20}),o.jsxs("div",{children:[o.jsxs("span",{className:"qp-intro-stat-value",children:[r.duree," min"]}),o.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(Ec,{size:20}),o.jsxs("div",{children:[o.jsxs("span",{className:"qp-intro-stat-value",children:[r.noteMinimale||50,"%"]}),o.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),o.jsxs("div",{className:"qp-intro-instructions",children:[o.jsx("h3",{children:"Instructions"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),o.jsx("li",{children:"Chaque question a une seule bonne rponse"}),o.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),o.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),o.jsxs("li",{children:["Il faut obtenir au moins ",r.noteMinimale||50,"% pour russir"]})]})]})]}),o.jsxs("button",{className:"qp-btn qp-btn-start",onClick:H,children:[o.jsx(hh,{size:20})," Commencer le quiz"]})]})});if(g==="playing"){const Z=r.questions[_];return o.jsxs("div",{className:"quiz-player-game",children:[o.jsxs("div",{className:"qp-game-header",children:[o.jsxs("div",{className:"qp-game-info",children:[o.jsx("span",{className:"qp-game-title",children:r.titre}),o.jsx("span",{className:"qp-game-discipline",children:s})]}),o.jsxs("div",{className:`qp-timer ${F()}`,children:[o.jsx(hY,{size:18}),o.jsx("span",{children:Y(A)})]})]}),o.jsx("div",{className:"qp-progress-bar",children:o.jsx("div",{className:"qp-progress-fill",style:{width:`${(_+1)/r.questions.length*100}%`}})}),o.jsxs("div",{className:"qp-game-content",children:[o.jsxs("div",{className:"qp-question-header",children:[o.jsxs("span",{className:"qp-question-number",children:["Question ",_+1,"/",r.questions.length]}),o.jsxs("span",{className:"qp-question-points",children:[Z.points||1," pt(s)"]})]}),o.jsx("h2",{className:"qp-question-text",children:Z.question}),o.jsx("div",{className:"qp-options-list",children:Z.options.map((ne,me)=>o.jsxs("button",{className:`qp-option ${w[Z.id]===me?"selected":""}`,onClick:()=>le(Z.id,me),children:[o.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+me)}),o.jsx("span",{className:"qp-option-text",children:ne}),w[Z.id]===me&&o.jsx(bn,{size:18,className:"qp-option-check"})]},me))})]}),o.jsxs("div",{className:"qp-game-footer",children:[o.jsx("div",{className:"qp-question-indicators",children:r.questions.map((ne,me)=>o.jsx("button",{className:`qp-indicator ${me===_?"active":""} ${w[ne.id]!==void 0?"answered":""}`,onClick:()=>_e(me),children:me+1},ne.id))}),o.jsxs("div",{className:"qp-nav-buttons",children:[o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>_e(_-1),disabled:_===0,children:[o.jsx(F_,{size:16})," Prcdent"]}),_<r.questions.length-1?o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>_e(_+1),children:["Suivant ",o.jsx(ec,{size:16})]}):o.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:je,disabled:te<r.questions.length,children:[o.jsx(bn,{size:16}),"Soumettre (",te,"/",r.questions.length,")"]})]})]})]})}const ye=I>0?Math.round($/I*100):0,we=ye>=(r.noteMinimale||50);return o.jsxs("div",{className:"quiz-player-review",children:[o.jsxs("div",{className:`qp-score-card ${we?"success":"fail"}`,children:[o.jsx("div",{className:"qp-score-icon",children:we?o.jsx(Ec,{size:48}):o.jsx(cv,{size:48})}),o.jsx("h2",{className:"qp-score-title",children:we?"Flicitations ! ":"Continuez vos efforts ! "}),o.jsxs("div",{className:"qp-score-circle",style:{borderColor:Vu(ye)},children:[o.jsxs("span",{className:"qp-score-value",children:[ye,"%"]}),o.jsx("span",{className:"qp-score-label",children:cL(ye)})]}),o.jsxs("div",{className:"qp-score-details",children:[o.jsxs("div",{className:"qp-score-detail",children:[o.jsxs("span",{children:[U,"/",r.questions.length]}),o.jsx("small",{children:"Bonnes rponses"})]}),o.jsxs("div",{className:"qp-score-detail",children:[o.jsxs("span",{children:[$,"/",I]}),o.jsx("small",{children:"Points"})]}),o.jsxs("div",{className:"qp-score-detail",children:[o.jsx("span",{children:lL(O)}),o.jsx("small",{children:"Temps"})]})]}),z&&o.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),W&&o.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),o.jsxs("div",{className:"qp-review-actions",children:[o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(uw,{size:18})," Tableau de bord"]}),o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:H,children:[o.jsx(rY,{size:18})," Recommencer"]})]}),o.jsxs("div",{className:"qp-review-questions",children:[o.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),r.questions.map((Z,ne)=>{const me=w[Z.id],Me=me===Z.reponseCorrecte;return o.jsxs("div",{className:`qp-review-question ${Me?"correct":"incorrect"}`,children:[o.jsxs("div",{className:"qp-review-question-header",children:[o.jsxs("span",{className:"qp-review-q-number",children:["Q",ne+1]}),Me?o.jsxs("span",{className:"qp-review-badge correct",children:[o.jsx(bn,{size:14})," Correct"]}):o.jsxs("span",{className:"qp-review-badge incorrect",children:[o.jsx(lw,{size:14})," Incorrect"]}),o.jsxs("span",{className:"qp-review-q-points",children:[Me?Z.points||1:0,"/",Z.points||1," pt(s)"]})]}),o.jsx("p",{className:"qp-review-q-text",children:Z.question}),o.jsx("div",{className:"qp-review-options",children:Z.options.map((se,Se)=>{let X="qp-review-option";return Se===Z.reponseCorrecte&&(X+=" correct-answer"),Se===me&&!Me&&(X+=" wrong-answer"),o.jsxs("div",{className:X,children:[o.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+Se)}),o.jsx("span",{children:se}),Se===Z.reponseCorrecte&&o.jsx(bn,{size:14,className:"qp-review-check"}),Se===me&&!Me&&o.jsx(lw,{size:14,className:"qp-review-x"})]},Se)})}),Z.explication&&o.jsxs("div",{className:"qp-review-explication",children:[o.jsx("strong",{children:" Explication :"})," ",Z.explication]})]},Z.id)})]})]})};function uL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=uL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ut(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=uL(t))&&(r&&(r+=" "),r+=e);return r}var pX=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function TE(t){if(typeof t!="string")return!1;var e=pX;return e.includes(t)}var gX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],vX=new Set(gX);function dL(t){return typeof t!="string"?!1:vX.has(t)}function fL(t){return typeof t=="string"&&t.startsWith("data-")}function da(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(dL(n)||fL(n))&&(e[n]=t[n]);return e}function om(t){if(t==null)return null;if(j.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return da(e)}return typeof t=="object"&&!Array.isArray(t)?da(t):null}function Ir(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(dL(n)||fL(n)||TE(n))&&(e[n]=t[n]);return e}function yX(t){return t==null?null:j.isValidElement(t)?Ir(t.props):typeof t=="object"&&!Array.isArray(t)?Ir(t):null}var bX=["children","width","height","viewBox","className","style","title","desc"];function hw(){return hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hw.apply(null,arguments)}function _X(t,e){if(t==null)return{};var n,r,i=xX(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xX(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hL=j.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:c,style:u,title:f,desc:h}=t,p=_X(t,bX),g=s||{width:r,height:i,x:0,y:0},y=Ut("recharts-surface",c);return j.createElement("svg",hw({},Ir(p),{className:y,width:r,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),j.createElement("title",null,f),j.createElement("desc",null,h),n)}),wX=["children","className"];function mw(){return mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mw.apply(null,arguments)}function jX(t,e){if(t==null)return{};var n,r,i=EX(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function EX(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qi=j.forwardRef((t,e)=>{var{children:n,className:r}=t,i=jX(t,wX),s=Ut("recharts-layer",r);return j.createElement("g",mw({className:s},Ir(i),{ref:e}),n)}),NX=j.createContext(null);function Ht(t){return function(){return t}}const mL=Math.cos,uv=Math.sin,ma=Math.sqrt,dv=Math.PI,ky=2*dv,pw=Math.PI,gw=2*pw,tc=1e-6,SX=gw-tc;function pL(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function AX(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return pL;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class TX{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?pL:AX(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,c){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,u=this._y1,f=r-e,h=i-n,p=c-e,g=u-n,y=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>tc)if(!(Math.abs(g*f-h*p)>tc)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let _=r-c,E=i-u,w=f*f+h*h,N=_*_+E*E,A=Math.sqrt(w),R=Math.sqrt(y),O=s*Math.tan((pw-Math.acos((w+y-N)/(2*A*R)))/2),C=O/R,V=O/A;Math.abs(C-1)>tc&&this._append`L${e+C*p},${n+C*g}`,this._append`A${s},${s},0,0,${+(g*_>p*E)},${this._x1=e+V*f},${this._y1=n+V*h}`}}arc(e,n,r,i,s,c){if(e=+e,n=+n,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),h=e+u,p=n+f,g=1^c,y=c?i-s:s-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>tc||Math.abs(this._y1-p)>tc)&&this._append`L${h},${p}`,r&&(y<0&&(y=y%gw+gw),y>SX?this._append`A${r},${r},0,1,${g},${e-u},${n-f}A${r},${r},0,1,${g},${this._x1=h},${this._y1=p}`:y>tc&&this._append`A${r},${r},0,${+(y>=pw)},${g},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function CE(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new TX(e)}function OE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function gL(t){this._context=t}gL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Dy(t){return new gL(t)}function vL(t){return t[0]}function yL(t){return t[1]}function bL(t,e){var n=Ht(!0),r=null,i=Dy,s=null,c=CE(u);t=typeof t=="function"?t:t===void 0?vL:Ht(t),e=typeof e=="function"?e:e===void 0?yL:Ht(e);function u(f){var h,p=(f=OE(f)).length,g,y=!1,_;for(r==null&&(s=i(_=c())),h=0;h<=p;++h)!(h<p&&n(g=f[h],h,f))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+t(g,h,f),+e(g,h,f));if(_)return s=null,_+""||null}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ht(+f),u):t},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ht(+f),u):e},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Ht(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(s=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=s=null:s=i(r=f),u):r},u}function sg(t,e,n){var r=null,i=Ht(!0),s=null,c=Dy,u=null,f=CE(h);t=typeof t=="function"?t:t===void 0?vL:Ht(+t),e=typeof e=="function"?e:Ht(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?yL:Ht(+n);function h(g){var y,_,E,w=(g=OE(g)).length,N,A=!1,R,O=new Array(w),C=new Array(w);for(s==null&&(u=c(R=f())),y=0;y<=w;++y){if(!(y<w&&i(N=g[y],y,g))===A)if(A=!A)_=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),E=y-1;E>=_;--E)u.point(O[E],C[E]);u.lineEnd(),u.areaEnd()}A&&(O[y]=+t(N,y,g),C[y]=+e(N,y,g),u.point(r?+r(N,y,g):O[y],n?+n(N,y,g):C[y]))}if(R)return u=null,R+""||null}function p(){return bL().defined(i).curve(c).context(s)}return h.x=function(g){return arguments.length?(t=typeof g=="function"?g:Ht(+g),r=null,h):t},h.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Ht(+g),h):t},h.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Ht(+g),h):r},h.y=function(g){return arguments.length?(e=typeof g=="function"?g:Ht(+g),n=null,h):e},h.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Ht(+g),h):e},h.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Ht(+g),h):n},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(n)},h.lineX1=function(){return p().x(r).y(e)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Ht(!!g),h):i},h.curve=function(g){return arguments.length?(c=g,s!=null&&(u=c(s)),h):c},h.context=function(g){return arguments.length?(g==null?s=u=null:u=c(s=g),h):s},h}class _L{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function CX(t){return new _L(t,!0)}function OX(t){return new _L(t,!1)}const PE={draw(t,e){const n=ma(e/dv);t.moveTo(n,0),t.arc(0,0,n,0,ky)}},PX={draw(t,e){const n=ma(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},xL=ma(1/3),IX=xL*2,RX={draw(t,e){const n=ma(e/IX),r=n*xL;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},kX={draw(t,e){const n=ma(e),r=-n/2;t.rect(r,r,n,n)}},DX=.8908130915292852,wL=uv(dv/10)/uv(7*dv/10),MX=uv(ky/10)*wL,zX=-mL(ky/10)*wL,LX={draw(t,e){const n=ma(e*DX),r=MX*n,i=zX*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const c=ky*s/5,u=mL(c),f=uv(c);t.lineTo(f*n,-u*n),t.lineTo(u*r-f*i,f*r+u*i)}t.closePath()}},Y_=ma(3),qX={draw(t,e){const n=-ma(e/(Y_*3));t.moveTo(0,n*2),t.lineTo(-Y_*n,-n),t.lineTo(Y_*n,-n),t.closePath()}},Ri=-.5,ki=ma(3)/2,vw=1/ma(12),UX=(vw/2+1)*3,VX={draw(t,e){const n=ma(e/UX),r=n/2,i=n*vw,s=r,c=n*vw+n,u=-s,f=c;t.moveTo(r,i),t.lineTo(s,c),t.lineTo(u,f),t.lineTo(Ri*r-ki*i,ki*r+Ri*i),t.lineTo(Ri*s-ki*c,ki*s+Ri*c),t.lineTo(Ri*u-ki*f,ki*u+Ri*f),t.lineTo(Ri*r+ki*i,Ri*i-ki*r),t.lineTo(Ri*s+ki*c,Ri*c-ki*s),t.lineTo(Ri*u+ki*f,Ri*f-ki*u),t.closePath()}};function BX(t,e){let n=null,r=CE(i);t=typeof t=="function"?t:Ht(t||PE),e=typeof e=="function"?e:Ht(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ht(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ht(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function fv(){}function hv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function jL(t){this._context=t}jL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $X(t){return new jL(t)}function EL(t){this._context=t}EL.prototype={areaStart:fv,areaEnd:fv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:hv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function FX(t){return new EL(t)}function NL(t){this._context=t}NL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:hv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function HX(t){return new NL(t)}function SL(t){this._context=t}SL.prototype={areaStart:fv,areaEnd:fv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function GX(t){return new SL(t)}function GO(t){return t<0?-1:1}function KO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),c=(n-t._y1)/(i||r<0&&-0),u=(s*i+c*r)/(r+i);return(GO(s)+GO(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(u))||0}function QO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function X_(t,e,n){var r=t._x0,i=t._y0,s=t._x1,c=t._y1,u=(s-r)/3;t._context.bezierCurveTo(r+u,i+u*e,s-u,c-u*n,s,c)}function mv(t){this._context=t}mv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:X_(this,this._t0,QO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,X_(this,QO(this,n=KO(this,t,e)),n);break;default:X_(this,this._t0,n=KO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function AL(t){this._context=new TL(t)}(AL.prototype=Object.create(mv.prototype)).point=function(t,e){mv.prototype.point.call(this,e,t)};function TL(t){this._context=t}TL.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function KX(t){return new mv(t)}function QX(t){return new AL(t)}function CL(t){this._context=t}CL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=WO(t),i=WO(e),s=0,c=1;c<n;++s,++c)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[c],e[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function WO(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),c=new Array(n);for(i[0]=0,s[0]=2,c[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,c[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,c[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,c[e]-=r*c[e-1];for(i[n-1]=c[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(c[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function WX(t){return new CL(t)}function My(t,e){this._context=t,this._t=e}My.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function YX(t){return new My(t,.5)}function XX(t){return new My(t,0)}function ZX(t){return new My(t,1)}function Nc(t,e){if((c=t.length)>1)for(var n=1,r,i,s=t[e[0]],c,u=s.length;n<c;++n)for(i=s,s=t[e[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function yw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function JX(t,e){return t[e]}function eZ(t){const e=[];return e.key=t,e}function tZ(){var t=Ht([]),e=yw,n=Nc,r=JX;function i(s){var c=Array.from(t.apply(this,arguments),eZ),u,f=c.length,h=-1,p;for(const g of s)for(u=0,++h;u<f;++u)(c[u][h]=[0,+r(g,c[u].key,h,s)]).data=g;for(u=0,p=OE(e(c));u<f;++u)c[p[u]].index=u;return n(c,p),c}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ht(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Ht(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?yw:typeof s=="function"?s:Ht(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Nc,i):n},i}function nZ(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,c;i<s;++i){for(c=n=0;n<r;++n)c+=t[n][i][1]||0;if(c)for(n=0;n<r;++n)t[n][i][1]/=c}Nc(t,e)}}function rZ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var c=0,u=0;c<i;++c)u+=t[c][n][1]||0;r[n][1]+=r[n][0]=-u/2}Nc(t,e)}}function iZ(t,e){if(!(!((c=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,c;r<s;++r){for(var u=0,f=0,h=0;u<c;++u){for(var p=t[e[u]],g=p[r][1]||0,y=p[r-1][1]||0,_=(g-y)/2,E=0;E<u;++E){var w=t[e[E]],N=w[r][1]||0,A=w[r-1][1]||0;_+=N-A}f+=g,h+=_*g}i[r-1][1]+=i[r-1][0]=n,f&&(n-=h/f)}i[r-1][1]+=i[r-1][0]=n,Nc(t,e)}}var Z_={},J_={},YO;function aZ(){return YO||(YO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(J_)),J_}var ex={},XO;function OL(){return XO||(XO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(ex)),ex}var tx={},ZO;function IE(){return ZO||(ZO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(tx)),tx}var nx={},rx={},JO;function sZ(){return JO||(JO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(rx)),rx}var eP;function RE(){return eP||(eP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sZ(),n=IE();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],c=i.length;if(c===0)return s;let u=0,f="",h="",p=!1;for(i.charCodeAt(0)===46&&(s.push(""),u++);u<c;){const g=i[u];h?g==="\\"&&u+1<c?(u++,f+=i[u]):g===h?h="":f+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,s.push(f),f=""):f+=g:g==="["?(p=!0,f&&(s.push(f),f="")):g==="."?f&&(s.push(f),f=""):f+=g,u++}return f&&s.push(f),s}t.toPath=r})(nx)),nx}var tP;function kE(){return tP||(tP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aZ(),n=OL(),r=IE(),i=RE();function s(u,f,h){if(u==null)return h;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return h;const p=u[f];return p===void 0?n.isDeepKey(f)?s(u,i.toPath(f),h):h:p}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const p=u[f];return p===void 0?h:p}default:{if(Array.isArray(f))return c(u,f,h);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return h;const p=u[f];return p===void 0?h:p}}}function c(u,f,h){if(f.length===0)return h;let p=u;for(let g=0;g<f.length;g++){if(p==null||e.isUnsafeProperty(f[g]))return h;p=p[f[g]]}return p===void 0?h:p}t.get=s})(Z_)),Z_}var ix,nP;function oZ(){return nP||(nP=1,ix=kE().get),ix}var lZ=oZ();const cd=es(lZ);var cZ=4;function Zo(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cZ,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function dn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,c)=>{var u=n[c-1];return typeof u=="string"?i+u+s:u!==void 0?i+Zo(u)+s:i+s},"")}var Yr=t=>t===0?0:t>0?1:-1,Ya=t=>typeof t=="number"&&t!=+t,Sc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Pe=t=>(typeof t=="number"||t instanceof Number)&&!Ya(t),Xa=t=>Pe(t)||typeof t=="string",uZ=0,Ch=t=>{var e=++uZ;return"".concat(t||"").concat(e)},fa=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(e)&&typeof e!="string")return r;var s;if(Sc(e)){if(n==null)return r;var c=e.indexOf("%");s=n*parseFloat(e.slice(0,c))/100}else s=+e;return Ya(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},PL=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function fn(t,e,n){return Pe(t)&&Pe(e)?Zo(t+n*(e-t)):e}function IL(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):cd(r,e))===n)}var an=t=>t===null||typeof t>"u",lm=t=>an(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Xr(t){return t!=null}function qc(){}var dZ=["type","size","sizeType"];function bw(){return bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bw.apply(null,arguments)}function rP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rP(Object(n),!0).forEach(function(r){fZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fZ(t,e,n){return(e=hZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hZ(t){var e=mZ(t,"string");return typeof e=="symbol"?e:e+""}function mZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pZ(t,e){if(t==null)return{};var n,r,i=gZ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function gZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var RL={symbolCircle:PE,symbolCross:PX,symbolDiamond:RX,symbolSquare:kX,symbolStar:LX,symbolTriangle:qX,symbolWye:VX},vZ=Math.PI/180,yZ=t=>{var e="symbol".concat(lm(t));return RL[e]||PE},bZ=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*vZ;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},_Z=(t,e)=>{RL["symbol".concat(lm(t))]=e},kL=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=pZ(t,dZ),s=iP(iP({},i),{},{type:e,size:n,sizeType:r}),c="circle";typeof e=="string"&&(c=e);var u=()=>{var y=yZ(c),_=BX().type(y).size(bZ(n,r,c)),E=_();if(E!==null)return E},{className:f,cx:h,cy:p}=s,g=Ir(s);return Pe(h)&&Pe(p)&&Pe(n)?j.createElement("path",bw({},g,{className:Ut("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};kL.registerSymbol=_Z;var DL=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,DE=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(j.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{TE(i)&&(r[i]=(s=>n[i](n,s)))}),r},xZ=(t,e,n)=>r=>(t(e,n,r),null),ME=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];TE(i)&&typeof s=="function"&&(r||(r={}),r[i]=xZ(s,e,n))}),r};function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wZ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(n),!0).forEach(function(r){jZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jZ(t,e,n){return(e=EZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EZ(t){var e=NZ(t,"string");return typeof e=="symbol"?e:e+""}function NZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dr(t,e){var n=wZ({},t),r=e,i=Object.keys(e),s=i.reduce((c,u)=>(c[u]===void 0&&r[u]!==void 0&&(c[u]=r[u]),c),n);return s}var ax={},sx={},sP;function SZ(){return sP||(sP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const c=n[s],u=r(c,s,n);i.has(u)||i.set(u,c)}return Array.from(i.values())}t.uniqBy=e})(sx)),sx}var ox={},oP;function AZ(){return oP||(oP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(ox)),ox}var lx={},lP;function ML(){return lP||(lP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(lx)),lx}var cx={},ux={},dx={},cP;function TZ(){return cP||(cP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(dx)),dx}var uP;function zE(){return uP||(uP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TZ();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(ux)),ux}var fx={},dP;function CZ(){return dP||(dP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(fx)),fx}var fP;function OZ(){return fP||(fP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zE(),n=CZ();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(cx)),cx}var hx={},mx={},hP;function PZ(){return hP||(hP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kE();function n(r){return function(i){return e.get(i,r)}}t.property=n})(mx)),mx}var px={},gx={},vx={},yx={},mP;function zL(){return mP||(mP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(yx)),yx}var bx={},pP;function LL(){return pP||(pP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(bx)),bx}var _x={},gP;function qL(){return gP||(gP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(_x)),_x}var vP;function IZ(){return vP||(vP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zL(),n=LL(),r=qL();function i(p,g,y){return typeof y!="function"?i(p,g,()=>{}):s(p,g,function _(E,w,N,A,R,O){const C=y(E,w,N,A,R,O);return C!==void 0?!!C:s(E,w,_,O)},new Map)}function s(p,g,y,_){if(g===p)return!0;switch(typeof g){case"object":return c(p,g,y,_);case"function":return Object.keys(g).length>0?s(p,{...g},y,_):r.isEqualsSameValueZero(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:r.isEqualsSameValueZero(p,g)}}function c(p,g,y,_){if(g==null)return!0;if(Array.isArray(g))return f(p,g,y,_);if(g instanceof Map)return u(p,g,y,_);if(g instanceof Set)return h(p,g,y,_);const E=Object.keys(g);if(p==null||n.isPrimitive(p))return E.length===0;if(E.length===0)return!0;if(_?.has(g))return _.get(g)===p;_?.set(g,p);try{for(let w=0;w<E.length;w++){const N=E[w];if(!n.isPrimitive(p)&&!(N in p)||g[N]===void 0&&p[N]!==void 0||g[N]===null&&p[N]!==null||!y(p[N],g[N],N,p,g,_))return!1}return!0}finally{_?.delete(g)}}function u(p,g,y,_){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[E,w]of g.entries()){const N=p.get(E);if(y(N,w,E,p,g,_)===!1)return!1}return!0}function f(p,g,y,_){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const E=new Set;for(let w=0;w<g.length;w++){const N=g[w];let A=!1;for(let R=0;R<p.length;R++){if(E.has(R))continue;const O=p[R];let C=!1;if(y(O,N,w,p,g,_)&&(C=!0),C){E.add(R),A=!0;break}}if(!A)return!1}return!0}function h(p,g,y,_){return g.size===0?!0:p instanceof Set?f([...p],[...g],y,_):!1}t.isMatchWith=i,t.isSetMatch=h})(vx)),vx}var yP;function UL(){return yP||(yP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IZ();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(gx)),gx}var xx={},wx={},jx={},bP;function RZ(){return bP||(bP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(jx)),jx}var Ex={},_P;function LE(){return _P||(_P=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Ex)),Ex}var Nx={},xP;function VL(){return xP||(xP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",u="[object Date]",f="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",y="[object ArrayBuffer]",_="[object Object]",E="[object Error]",w="[object DataView]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",R="[object Uint16Array]",O="[object Uint32Array]",C="[object BigUint64Array]",V="[object Int8Array]",$="[object Int16Array]",D="[object Int32Array]",I="[object BigInt64Array]",k="[object Float32Array]",U="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=y,t.arrayTag=p,t.bigInt64ArrayTag=I,t.bigUint64ArrayTag=C,t.booleanTag=i,t.dataViewTag=w,t.dateTag=u,t.errorTag=E,t.float32ArrayTag=k,t.float64ArrayTag=U,t.functionTag=g,t.int16ArrayTag=$,t.int32ArrayTag=D,t.int8ArrayTag=V,t.mapTag=f,t.numberTag=r,t.objectTag=_,t.regexpTag=e,t.setTag=h,t.stringTag=n,t.symbolTag=c,t.uint16ArrayTag=R,t.uint32ArrayTag=O,t.uint8ArrayTag=N,t.uint8ClampedArrayTag=A})(Nx)),Nx}var Sx={},wP;function kZ(){return wP||(wP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Sx)),Sx}var jP;function BL(){return jP||(jP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RZ(),n=LE(),r=VL(),i=LL(),s=kZ();function c(p,g){return u(p,void 0,p,new Map,g)}function u(p,g,y,_=new Map,E=void 0){const w=E?.(p,g,y,_);if(w!==void 0)return w;if(i.isPrimitive(p))return p;if(_.has(p))return _.get(p);if(Array.isArray(p)){const N=new Array(p.length);_.set(p,N);for(let A=0;A<p.length;A++)N[A]=u(p[A],A,y,_,E);return Object.hasOwn(p,"index")&&(N.index=p.index),Object.hasOwn(p,"input")&&(N.input=p.input),N}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const N=new RegExp(p.source,p.flags);return N.lastIndex=p.lastIndex,N}if(p instanceof Map){const N=new Map;_.set(p,N);for(const[A,R]of p)N.set(A,u(R,A,y,_,E));return N}if(p instanceof Set){const N=new Set;_.set(p,N);for(const A of p)N.add(u(A,void 0,y,_,E));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const N=new(Object.getPrototypeOf(p)).constructor(p.length);_.set(p,N);for(let A=0;A<p.length;A++)N[A]=u(p[A],A,y,_,E);return N}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const N=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return _.set(p,N),f(N,p,y,_,E),N}if(typeof File<"u"&&p instanceof File){const N=new File([p],p.name,{type:p.type});return _.set(p,N),f(N,p,y,_,E),N}if(typeof Blob<"u"&&p instanceof Blob){const N=new Blob([p],{type:p.type});return _.set(p,N),f(N,p,y,_,E),N}if(p instanceof Error){const N=new p.constructor;return _.set(p,N),N.message=p.message,N.name=p.name,N.stack=p.stack,N.cause=p.cause,f(N,p,y,_,E),N}if(p instanceof Boolean){const N=new Boolean(p.valueOf());return _.set(p,N),f(N,p,y,_,E),N}if(p instanceof Number){const N=new Number(p.valueOf());return _.set(p,N),f(N,p,y,_,E),N}if(p instanceof String){const N=new String(p.valueOf());return _.set(p,N),f(N,p,y,_,E),N}if(typeof p=="object"&&h(p)){const N=Object.create(Object.getPrototypeOf(p));return _.set(p,N),f(N,p,y,_,E),N}return p}function f(p,g,y=p,_,E){const w=[...Object.keys(g),...e.getSymbols(g)];for(let N=0;N<w.length;N++){const A=w[N],R=Object.getOwnPropertyDescriptor(p,A);(R==null||R.writable)&&(p[A]=u(g[A],A,y,_,E))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=c,t.cloneDeepWithImpl=u,t.copyProperties=f})(wx)),wx}var EP;function DZ(){return EP||(EP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BL();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(xx)),xx}var NP;function MZ(){return NP||(NP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UL(),n=DZ();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(px)),px}var Ax={},Tx={},Cx={},SP;function zZ(){return SP||(SP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BL(),n=LE(),r=VL();function i(s,c){return e.cloneDeepWith(s,(u,f,h,p)=>{const g=c?.(u,f,h,p);if(g!==void 0)return g;if(typeof s=="object"){if(n.getTag(s)===r.objectTag&&typeof s.constructor!="function"){const y={};return p.set(s,y),e.copyProperties(y,s,h,p),y}switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const y=new s.constructor(s?.valueOf());return e.copyProperties(y,s),y}case r.argumentsTag:{const y={};return e.copyProperties(y,s),y.length=s.length,y[Symbol.iterator]=s[Symbol.iterator],y}default:return}}})}t.cloneDeepWith=i})(Cx)),Cx}var AP;function LZ(){return AP||(AP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zZ();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Tx)),Tx}var Ox={},Px={},TP;function $L(){return TP||(TP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Px)),Px}var Ix={},CP;function qZ(){return CP||(CP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LE();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Ix)),Ix}var OP;function UZ(){return OP||(OP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OL(),n=$L(),r=qZ(),i=RE();function s(c,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&e.isDeepKey(u)&&c?.[u]==null?f=i.toPath(u):f=[u],f.length===0)return!1;let h=c;for(let p=0;p<f.length;p++){const g=f[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}t.has=s})(Ox)),Ox}var PP;function VZ(){return PP||(PP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UL(),n=IE(),r=LZ(),i=kE(),s=UZ();function c(u,f){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(h){const p=i.get(h,u);return p===void 0?s.has(h,u):f===void 0?p===void 0:e.isMatch(p,f)}}t.matchesProperty=c})(Ax)),Ax}var IP;function BZ(){return IP||(IP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ML(),n=PZ(),r=MZ(),i=VZ();function s(c){if(c==null)return e.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):r.matches(c);case"string":case"symbol":case"number":return n.property(c)}}t.iteratee=s})(hx)),hx}var RP;function $Z(){return RP||(RP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SZ(),n=AZ(),r=ML(),i=OZ(),s=BZ();function c(u,f=r.identity){return i.isArrayLikeObject(u)?e.uniqBy(Array.from(u),n.ary(s.iteratee(f),1)):[]}t.uniqBy=c})(ax)),ax}var Rx,kP;function FZ(){return kP||(kP=1,Rx=$Z().uniqBy),Rx}var HZ=FZ();const DP=es(HZ);function GZ(t,e,n){return e===!0?DP(t,n):typeof e=="function"?DP(t,e):t}var kx={exports:{}},Dx={},Mx={exports:{}},zx={};var MP;function KZ(){if(MP)return zx;MP=1;var t=vd();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,c=t.useDebugValue;function u(g,y){var _=y(),E=r({inst:{value:_,getSnapshot:y}}),w=E[0].inst,N=E[1];return s(function(){w.value=_,w.getSnapshot=y,f(w)&&N({inst:w})},[g,_,y]),i(function(){return f(w)&&N({inst:w}),g(function(){f(w)&&N({inst:w})})},[g]),c(_),_}function f(g){var y=g.getSnapshot;g=g.value;try{var _=y();return!n(g,_)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return zx.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,zx}var zP;function QZ(){return zP||(zP=1,Mx.exports=KZ()),Mx.exports}var LP;function WZ(){if(LP)return Dx;LP=1;var t=vd(),e=QZ();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,c=t.useEffect,u=t.useMemo,f=t.useDebugValue;return Dx.useSyncExternalStoreWithSelector=function(h,p,g,y,_){var E=s(null);if(E.current===null){var w={hasValue:!1,value:null};E.current=w}else w=E.current;E=u(function(){function A($){if(!R){if(R=!0,O=$,$=y($),_!==void 0&&w.hasValue){var D=w.value;if(_(D,$))return C=D}return C=$}if(D=C,r(O,$))return D;var I=y($);return _!==void 0&&_(D,I)?(O=$,D):(O=$,C=I)}var R=!1,O,C,V=g===void 0?null:g;return[function(){return A(p())},V===null?void 0:function(){return A(V())}]},[p,g,y,_]);var N=i(h,E[0],E[1]);return c(function(){w.hasValue=!0,w.value=N},[N]),f(N),N},Dx}var qP;function YZ(){return qP||(qP=1,kx.exports=WZ()),kx.exports}var XZ=YZ(),qE=j.createContext(null),ZZ=t=>t,jn=()=>{var t=j.useContext(qE);return t?t.store.dispatch:ZZ},Mg=()=>{},JZ=()=>Mg,eJ=(t,e)=>t===e;function ze(t){var e=j.useContext(qE),n=j.useMemo(()=>e?r=>{if(r!=null)return t(r)}:Mg,[e,t]);return XZ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:JZ,e?e.store.getState:Mg,e?e.store.getState:Mg,n,eJ)}function tJ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function nJ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function rJ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var UP=t=>Array.isArray(t)?t:[t];function iJ(t){const e=Array.isArray(t[0])?t[0]:t;return rJ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function aJ(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var sJ=class{constructor(t){this.value=t}deref(){return this.value}},oJ=typeof WeakRef<"u"?WeakRef:sJ,lJ=0,VP=1;function og(){return{s:lJ,v:void 0,o:null,p:null}}function FL(t,e={}){let n=og();const{resultEqualityCheck:r}=e;let i,s=0;function c(){let u=n;const{length:f}=arguments;for(let g=0,y=f;g<y;g++){const _=arguments[g];if(typeof _=="function"||typeof _=="object"&&_!==null){let E=u.o;E===null&&(u.o=E=new WeakMap);const w=E.get(_);w===void 0?(u=og(),E.set(_,u)):u=w}else{let E=u.p;E===null&&(u.p=E=new Map);const w=E.get(_);w===void 0?(u=og(),E.set(_,u)):u=w}}const h=u;let p;if(u.s===VP)p=u.v;else if(p=t.apply(null,arguments),s++,r){const g=i?.deref?.()??i;g!=null&&r(g,p)&&(p=g,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new oJ(p):p}return h.s=VP,h.v=p,p}return c.clearCache=()=>{n=og(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function cJ(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,c=0,u,f={},h=i.pop();typeof h=="object"&&(f=h,h=i.pop()),tJ(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...f},{memoize:g,memoizeOptions:y=[],argsMemoize:_=FL,argsMemoizeOptions:E=[]}=p,w=UP(y),N=UP(E),A=iJ(i),R=g(function(){return s++,h.apply(null,arguments)},...w),O=_(function(){c++;const V=aJ(A,arguments);return u=R.apply(null,V),u},...N);return Object.assign(O,{resultFunc:h,memoizedResultFunc:R,dependencies:A,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:_})};return Object.assign(r,{withTypes:()=>r}),r}var ce=cJ(FL),uJ=Object.assign((t,e=ce)=>{nJ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((c,u,f)=>(c[n[f]]=u,c),{}))},{withTypes:()=>uJ}),Lx={},qx={},Ux={},BP;function dJ(){return BP||(BP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const c=e(r),u=e(i);if(c===u&&c===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-c:c-u}return 0};t.compareValues=n})(Ux)),Ux}var Vx={},Bx={},$P;function HL(){return $P||($P=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Bx)),Bx}var FP;function fJ(){return FP||(FP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HL(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||c!=null&&Object.hasOwn(c,s)}t.isKey=i})(Vx)),Vx}var HP;function hJ(){return HP||(HP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dJ(),n=fJ(),r=RE();function i(s,c,u,f){if(s==null)return[];u=f?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(_=>String(_));const h=(_,E)=>{let w=_;for(let N=0;N<E.length&&w!=null;++N)w=w[E[N]];return w},p=(_,E)=>E==null||_==null?E:typeof _=="object"&&"key"in _?Object.hasOwn(E,_.key)?E[_.key]:h(E,_.path):typeof _=="function"?_(E):Array.isArray(_)?h(E,_):typeof E=="object"?E[_]:E,g=c.map(_=>(Array.isArray(_)&&_.length===1&&(_=_[0]),_==null||typeof _=="function"||Array.isArray(_)||n.isKey(_)?_:{key:_,path:r.toPath(_)}));return s.map(_=>({original:_,criteria:g.map(E=>p(E,_))})).slice().sort((_,E)=>{for(let w=0;w<g.length;w++){const N=e.compareValues(_.criteria[w],E.criteria[w],u[w]);if(N!==0)return N}return 0}).map(_=>_.original)}t.orderBy=i})(qx)),qx}var $x={},GP;function mJ(){return GP||(GP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),c=(u,f)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&f<s?c(p,f+1):i.push(p)}};return c(n,0),i}t.flatten=e})($x)),$x}var Fx={},KP;function GL(){return KP||(KP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$L(),n=zE(),r=zL(),i=qL();function s(c,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&e.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.isEqualsSameValueZero(f[u],c):!1}t.isIterateeCall=s})(Fx)),Fx}var QP;function pJ(){return QP||(QP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hJ(),n=mJ(),r=GL();function i(s,...c){const u=c.length;return u>1&&r.isIterateeCall(s,c[0],c[1])?c=[]:u>2&&r.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),e.orderBy(s,n.flatten(c),["asc"])}t.sortBy=i})(Lx)),Lx}var Hx,WP;function gJ(){return WP||(WP=1,Hx=pJ().sortBy),Hx}var vJ=gJ();const zy=es(vJ);var KL=t=>t.legend.settings,yJ=t=>t.legend.size,bJ=t=>t.legend.payload;ce([bJ,KL],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?zy(r,n):r});var lg=1;function _J(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=j.useState({height:0,left:0,top:0,width:0}),r=j.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-e.height)>lg||Math.abs(c.left-e.left)>lg||Math.abs(c.top-e.top)>lg||Math.abs(c.width-e.width)>lg)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function lr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xJ=typeof Symbol=="function"&&Symbol.observable||"@@observable",YP=xJ,Gx=()=>Math.random().toString(36).substring(7).split("").join("."),wJ={INIT:`@@redux/INIT${Gx()}`,REPLACE:`@@redux/REPLACE${Gx()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gx()}`},pv=wJ;function UE(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function QL(t,e,n){if(typeof t!="function")throw new Error(lr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(lr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(lr(1));return n(QL)(t,e)}let r=t,i=e,s=new Map,c=s,u=0,f=!1;function h(){c===s&&(c=new Map,s.forEach((N,A)=>{c.set(A,N)}))}function p(){if(f)throw new Error(lr(3));return i}function g(N){if(typeof N!="function")throw new Error(lr(4));if(f)throw new Error(lr(5));let A=!0;h();const R=u++;return c.set(R,N),function(){if(A){if(f)throw new Error(lr(6));A=!1,h(),c.delete(R),s=null}}}function y(N){if(!UE(N))throw new Error(lr(7));if(typeof N.type>"u")throw new Error(lr(8));if(typeof N.type!="string")throw new Error(lr(17));if(f)throw new Error(lr(9));try{f=!0,i=r(i,N)}finally{f=!1}return(s=c).forEach(R=>{R()}),N}function _(N){if(typeof N!="function")throw new Error(lr(10));r=N,y({type:pv.REPLACE})}function E(){const N=g;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(lr(11));function R(){const C=A;C.next&&C.next(p())}return R(),{unsubscribe:N(R)}},[YP](){return this}}}return y({type:pv.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:_,[YP]:E}}function jJ(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:pv.INIT})>"u")throw new Error(lr(12));if(typeof n(void 0,{type:pv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lr(13))})}function WL(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const c=e[s];typeof t[c]=="function"&&(n[c]=t[c])}const r=Object.keys(n);let i;try{jJ(n)}catch(s){i=s}return function(c={},u){if(i)throw i;let f=!1;const h={};for(let p=0;p<r.length;p++){const g=r[p],y=n[g],_=c[g],E=y(_,u);if(typeof E>"u")throw u&&u.type,new Error(lr(14));h[g]=E,f=f||E!==_}return f=f||r.length!==Object.keys(c).length,f?h:c}}function gv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function EJ(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(lr(15))};const c={getState:i.getState,dispatch:(f,...h)=>s(f,...h)},u=t.map(f=>f(c));return s=gv(...u)(i.dispatch),{...i,dispatch:s}}}function YL(t){return UE(t)&&"type"in t&&typeof t.type=="string"}var XL=Symbol.for("immer-nothing"),XP=Symbol.for("immer-draftable"),Rr=Symbol.for("immer-state");function na(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var pi=Object,ud=pi.getPrototypeOf,vv="constructor",Ly="prototype",_w="configurable",yv="enumerable",zg="writable",Oh="value",Us=t=>!!t&&!!t[Rr];function ha(t){return t?ZL(t)||Uy(t)||!!t[XP]||!!t[vv]?.[XP]||Vy(t)||By(t):!1}var NJ=pi[Ly][vv].toString(),ZP=new WeakMap;function ZL(t){if(!t||!VE(t))return!1;const e=ud(t);if(e===null||e===pi[Ly])return!0;const n=pi.hasOwnProperty.call(e,vv)&&e[vv];if(n===Object)return!0;if(!Bu(n))return!1;let r=ZP.get(n);return r===void 0&&(r=Function.toString.call(n),ZP.set(n,r)),r===NJ}function qy(t,e,n=!0){cm(t)===0?(n?Reflect.ownKeys(t):pi.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function cm(t){const e=t[Rr];return e?e.type_:Uy(t)?1:Vy(t)?2:By(t)?3:0}var JP=(t,e,n=cm(t))=>n===2?t.has(e):pi[Ly].hasOwnProperty.call(t,e),xw=(t,e,n=cm(t))=>n===2?t.get(e):t[e],bv=(t,e,n,r=cm(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function SJ(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Uy=Array.isArray,Vy=t=>t instanceof Map,By=t=>t instanceof Set,VE=t=>typeof t=="object",Bu=t=>typeof t=="function",Kx=t=>typeof t=="boolean";function AJ(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Ns=t=>t.copy_||t.base_,BE=t=>t.modified_?t.copy_:t.base_;function ww(t,e){if(Vy(t))return new Map(t);if(By(t))return new Set(t);if(Uy(t))return Array[Ly].slice.call(t);const n=ZL(t);if(e===!0||e==="class_only"&&!n){const r=pi.getOwnPropertyDescriptors(t);delete r[Rr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const c=i[s],u=r[c];u[zg]===!1&&(u[zg]=!0,u[_w]=!0),(u.get||u.set)&&(r[c]={[_w]:!0,[zg]:!0,[yv]:u[yv],[Oh]:t[c]})}return pi.create(ud(t),r)}else{const r=ud(t);if(r!==null&&n)return{...t};const i=pi.create(r);return pi.assign(i,t)}}function $E(t,e=!1){return $y(t)||Us(t)||!ha(t)||(cm(t)>1&&pi.defineProperties(t,{set:cg,add:cg,clear:cg,delete:cg}),pi.freeze(t),e&&qy(t,(n,r)=>{$E(r,!0)},!1)),t}function TJ(){na(2)}var cg={[Oh]:TJ};function $y(t){return t===null||!VE(t)?!0:pi.isFrozen(t)}var _v="MapSet",jw="Patches",eI="ArrayMethods",JL={};function Ac(t){const e=JL[t];return e||na(0,t),e}var tI=t=>!!JL[t],Ph,e3=()=>Ph,CJ=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:tI(_v)?Ac(_v):void 0,arrayMethodsPlugin_:tI(eI)?Ac(eI):void 0});function nI(t,e){e&&(t.patchPlugin_=Ac(jw),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ew(t){Nw(t),t.drafts_.forEach(OJ),t.drafts_=null}function Nw(t){t===Ph&&(Ph=t.parent_)}var rI=t=>Ph=CJ(Ph,t);function OJ(t){const e=t[Rr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function iI(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Rr].modified_&&(Ew(e),na(4)),ha(t)&&(t=aI(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Rr].base_,t,e)}else t=aI(e,n);return PJ(e,t,!0),Ew(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==XL?t:void 0}function aI(t,e){if($y(e))return e;const n=e[Rr];if(!n)return xv(e,t.handledSet_,t);if(!Fy(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);r3(n,t)}return n.copy_}function PJ(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$E(e,n)}function t3(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var Fy=(t,e)=>t.scope_===e,IJ=[];function n3(t,e,n,r){const i=Ns(t),s=t.type_;if(r!==void 0&&xw(i,r,s)===e){bv(i,r,n,s);return}if(!t.draftLocations_){const u=t.draftLocations_=new Map;qy(i,(f,h)=>{if(Us(h)){const p=u.get(h)||[];p.push(f),u.set(h,p)}})}const c=t.draftLocations_.get(e)??IJ;for(const u of c)bv(i,u,n,s)}function RJ(t,e,n){t.callbacks_.push(function(i){const s=e;if(!s||!Fy(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const c=BE(s);n3(t,s.draft_??s,c,n),r3(s,i)})}function r3(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}t3(t)}}function kJ(t,e,n){const{scope_:r}=t;if(Us(n)){const i=n[Rr];Fy(i,r)&&i.callbacks_.push(function(){Lg(t);const c=BE(i);n3(t,n,c,e)})}else ha(n)&&t.callbacks_.push(function(){const s=Ns(t);t.type_===3?s.has(n)&&xv(n,r.handledSet_,r):xw(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&xv(xw(t.copy_,e,t.type_),r.handledSet_,r)})}function xv(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Us(t)||e.has(t)||!ha(t)||$y(t)||(e.add(t),qy(t,(r,i)=>{if(Us(i)){const s=i[Rr];if(Fy(s,n)){const c=BE(s);bv(t,r,c,t.type_),t3(s)}}else ha(i)&&xv(i,e,n)})),t}function DJ(t,e){const n=Uy(t),r={type_:n?1:0,scope_:e?e.scope_:e3(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=wv;n&&(i=[r],s=Ih);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=c,[u,r]}var wv={get(t,e){if(e===Rr)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Ns(t);if(!JP(i,e,t.type_))return MJ(t,i,e);const s=i[e];if(t.finalized_||!ha(s)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&AJ(e))return s;if(s===Qx(t.base_,e)){Lg(t);const c=t.type_===1?+e:e,u=Aw(t.scope_,s,t,c);return t.copy_[c]=u}return s},has(t,e){return e in Ns(t)},ownKeys(t){return Reflect.ownKeys(Ns(t))},set(t,e,n){const r=i3(Ns(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Qx(Ns(t),e),s=i?.[Rr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(SJ(n,i)&&(n!==void 0||JP(t.base_,e,t.type_)))return!0;Lg(t),Sw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),kJ(t,e,n)),!0},deleteProperty(t,e){return Lg(t),Qx(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Sw(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ns(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[zg]:!0,[_w]:t.type_!==1||e!=="length",[yv]:r[yv],[Oh]:n[e]}},defineProperty(){na(11)},getPrototypeOf(t){return ud(t.base_)},setPrototypeOf(){na(12)}},Ih={};for(let t in wv){let e=wv[t];Ih[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Ih.deleteProperty=function(t,e){return Ih.set.call(this,t,e,void 0)};Ih.set=function(t,e,n){return wv.set.call(this,t[0],e,n,t[0])};function Qx(t,e){const n=t[Rr];return(n?Ns(n):t)[e]}function MJ(t,e,n){const r=i3(e,n);return r?Oh in r?r[Oh]:r.get?.call(t.draft_):void 0}function i3(t,e){if(!(e in t))return;let n=ud(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=ud(n)}}function Sw(t){t.modified_||(t.modified_=!0,t.parent_&&Sw(t.parent_))}function Lg(t){t.copy_||(t.assigned_=new Map,t.copy_=ww(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var zJ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Bu(n)&&!Bu(r)){const c=r;r=n;const u=this;return function(h=c,...p){return u.produce(h,g=>r.call(this,g,...p))}}Bu(r)||na(6),i!==void 0&&!Bu(i)&&na(7);let s;if(ha(n)){const c=rI(this),u=Aw(c,n,void 0);let f=!0;try{s=r(u),f=!1}finally{f?Ew(c):Nw(c)}return nI(c,i),iI(s,c)}else if(!n||!VE(n)){if(s=r(n),s===void 0&&(s=n),s===XL&&(s=void 0),this.autoFreeze_&&$E(s,!0),i){const c=[],u=[];Ac(jw).generateReplacementPatches_(n,s,{patches_:c,inversePatches_:u}),i(c,u)}return s}else na(1,n)},this.produceWithPatches=(n,r)=>{if(Bu(n))return(u,...f)=>this.produceWithPatches(u,h=>n(h,...f));let i,s;return[this.produce(n,r,(u,f)=>{i=u,s=f}),i,s]},Kx(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Kx(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Kx(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ha(e)||na(8),Us(e)&&(e=la(e));const n=rI(this),r=Aw(n,e,void 0);return r[Rr].isManual_=!0,Nw(n),r}finishDraft(e,n){const r=e&&e[Rr];(!r||!r.isManual_)&&na(9);const{scope_:i}=r;return nI(i,n),iI(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=Ac(jw).applyPatches_;return Us(e)?i(e,n):this.produce(e,s=>i(s,n))}};function Aw(t,e,n,r){const[i,s]=Vy(e)?Ac(_v).proxyMap_(e,n):By(e)?Ac(_v).proxySet_(e,n):DJ(e,n);return(n?.scope_??e3()).drafts_.push(i),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?RJ(n,s,r):s.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:h}=f;s.modified_&&h&&h.generatePatches_(s,[],f)}),i}function la(t){return Us(t)||na(10,t),a3(t)}function a3(t){if(!ha(t)||$y(t))return t;const e=t[Rr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=ww(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=ww(t,!0);return qy(n,(i,s)=>{bv(n,i,a3(s))},r),e&&(e.finalized_=!1),n}var LJ=new zJ,s3=LJ.produce;function o3(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var qJ=o3(),UJ=o3,VJ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gv:gv.apply(null,arguments)};function Ui(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(gi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>YL(r)&&r.type===t,n}var l3=class rh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,rh.prototype)}static get[Symbol.species](){return rh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new rh(...e[0].concat(this)):new rh(...e.concat(this))}};function sI(t){return ha(t)?s3(t,()=>{}):t}function ug(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function BJ(t){return typeof t=="boolean"}var $J=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let c=new l3;return n&&(BJ(n)?c.push(qJ):c.push(UJ(n.extraArgument))),c},c3="RTK_autoBatch",Zt=()=>t=>({payload:t,meta:{[c3]:!0}}),oI=t=>e=>{setTimeout(e,t)},u3=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,c=!1;const u=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:oI(10):t.type==="callback"?t.queueNotification:oI(t.timeout),h=()=>{c=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const g=()=>i&&p(),y=r.subscribe(g);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[c3],s=!i,s&&(c||(c=!0,f(h))),r.dispatch(p)}finally{i=!0}}})},FJ=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new l3(t);return r&&i.push(u3(typeof r=="object"?r:void 0)),i};function HJ(t){const e=$J(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(UE(n))u=WL(n);else throw new Error(gi(1));let f;typeof r=="function"?f=r(e):f=e();let h=gv;i&&(h=VJ({trace:!1,...typeof i=="object"&&i}));const p=EJ(...f),g=FJ(p);let y=typeof c=="function"?c(g):g();const _=h(...y);return QL(u,s,_)}function d3(t){const e={},n=[];let r;const i={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(gi(28));if(u in e)throw new Error(gi(29));return e[u]=c,i},addAsyncThunk(s,c){return c.pending&&(e[s.pending.type]=c.pending),c.rejected&&(e[s.rejected.type]=c.rejected),c.fulfilled&&(e[s.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return n.push({matcher:s,reducer:c}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function GJ(t){return typeof t=="function"}function KJ(t,e){let[n,r,i]=d3(e),s;if(GJ(t))s=()=>sI(t());else{const u=sI(t);s=()=>u}function c(u=s(),f){let h=[n[f.type],...r.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,g)=>{if(g)if(Us(p)){const _=g(p,f);return _===void 0?p:_}else{if(ha(p))return s3(p,y=>g(y,f));{const y=g(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return c.getInitialState=s,c}var QJ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",WJ=(t=21)=>{let e="",n=t;for(;n--;)e+=QJ[Math.random()*64|0];return e},YJ=Symbol.for("rtk-slice-createasyncthunk");function XJ(t,e){return`${t}/${e}`}function ZJ({creators:t}={}){const e=t?.asyncThunk?.[YJ];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(gi(11));const c=(typeof r.reducers=="function"?r.reducers(eee()):r.reducers)||{},u=Object.keys(c),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(O,C){const V=typeof O=="string"?O:O.type;if(!V)throw new Error(gi(12));if(V in f.sliceCaseReducersByType)throw new Error(gi(13));return f.sliceCaseReducersByType[V]=C,h},addMatcher(O,C){return f.sliceMatchers.push({matcher:O,reducer:C}),h},exposeAction(O,C){return f.actionCreators[O]=C,h},exposeCaseReducer(O,C){return f.sliceCaseReducersByName[O]=C,h}};u.forEach(O=>{const C=c[O],V={reducerName:O,type:XJ(i,O),createNotation:typeof r.reducers=="function"};nee(C)?iee(V,C,h,e):tee(V,C,h)});function p(){const[O={},C=[],V=void 0]=typeof r.extraReducers=="function"?d3(r.extraReducers):[r.extraReducers],$={...O,...f.sliceCaseReducersByType};return KJ(r.initialState,D=>{for(let I in $)D.addCase(I,$[I]);for(let I of f.sliceMatchers)D.addMatcher(I.matcher,I.reducer);for(let I of C)D.addMatcher(I.matcher,I.reducer);V&&D.addDefaultCase(V)})}const g=O=>O,y=new Map,_=new WeakMap;let E;function w(O,C){return E||(E=p()),E(O,C)}function N(){return E||(E=p()),E.getInitialState()}function A(O,C=!1){function V(D){let I=D[O];return typeof I>"u"&&C&&(I=ug(_,V,N)),I}function $(D=g){const I=ug(y,C,()=>new WeakMap);return ug(I,D,()=>{const k={};for(const[U,q]of Object.entries(r.selectors??{}))k[U]=JJ(q,D,()=>ug(_,D,N),C);return k})}return{reducerPath:O,getSelectors:$,get selectors(){return $(V)},selectSlice:V}}const R={name:i,reducer:w,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:N,...A(s),injectInto(O,{reducerPath:C,...V}={}){const $=C??s;return O.inject({reducerPath:$,reducer:w},V),{...R,...A($,!0)}}};return R}}function JJ(t,e,n,r){function i(s,...c){let u=e(s);return typeof u>"u"&&r&&(u=n()),t(u,...c)}return i.unwrapped=t,i}var Jr=ZJ();function eee(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function tee({type:t,reducerName:e,createNotation:n},r,i){let s,c;if("reducer"in r){if(n&&!ree(r))throw new Error(gi(17));s=r.reducer,c=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,c?Ui(t,c):Ui(t))}function nee(t){return t._reducerDefinitionType==="asyncThunk"}function ree(t){return t._reducerDefinitionType==="reducerWithPrepare"}function iee({type:t,reducerName:e},n,r,i){if(!i)throw new Error(gi(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:f,settled:h,options:p}=n,g=i(t,s,p);r.exposeAction(e,g),c&&r.addCase(g.fulfilled,c),u&&r.addCase(g.pending,u),f&&r.addCase(g.rejected,f),h&&r.addMatcher(g.settled,h),r.exposeCaseReducer(e,{fulfilled:c||dg,pending:u||dg,rejected:f||dg,settled:h||dg})}function dg(){}var aee="task",f3="listener",h3="completed",FE="cancelled",see=`task-${FE}`,oee=`task-${h3}`,Tw=`${f3}-${FE}`,lee=`${f3}-${h3}`,Hy=class{constructor(t){this.code=t,this.message=`${aee} ${FE} (reason: ${t})`}name="TaskAbortError";message},HE=(t,e)=>{if(typeof t!="function")throw new TypeError(gi(32))},jv=()=>{},m3=(t,e=jv)=>(t.catch(e),t),p3=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),hc=t=>{if(t.aborted)throw new Hy(t.reason)};function g3(t,e){let n=jv;return new Promise((r,i)=>{const s=()=>i(new Hy(t.reason));if(t.aborted){s();return}n=p3(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=jv})}var cee=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Hy?"cancelled":"rejected",error:n}}finally{e?.()}},Ev=t=>e=>m3(g3(t,e).then(n=>(hc(t),n))),v3=t=>{const e=Ev(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Zu}=Object,lI={},Gy="listenerMiddleware",uee=(t,e)=>{const n=r=>p3(t,()=>r.abort(t.reason));return(r,i)=>{HE(r);const s=new AbortController;n(s);const c=cee(async()=>{hc(t),hc(s.signal);const u=await r({pause:Ev(s.signal),delay:v3(s.signal),signal:s.signal});return hc(s.signal),u},()=>s.abort(oee));return i?.autoJoin&&e.push(c.catch(jv)),{result:Ev(t)(c),cancel(){s.abort(see)}}}},dee=(t,e)=>{const n=async(r,i)=>{hc(e);let s=()=>{};const u=[new Promise((f,h)=>{let p=t({predicate:r,effect:(g,y)=>{y.unsubscribe(),f([g,y.getState(),y.getOriginalState()])}});s=()=>{p(),h()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await g3(e,Promise.race(u));return hc(e),f}finally{s()}};return(r,i)=>m3(n(r,i))},y3=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Ui(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(gi(21));return HE(s),{predicate:i,type:e,effect:s}},b3=Zu(t=>{const{type:e,predicate:n,effect:r}=y3(t);return{id:WJ(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(gi(22))}}},{withTypes:()=>b3}),cI=(t,e)=>{const{type:n,effect:r,predicate:i}=y3(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},Cw=t=>{t.pending.forEach(e=>{e.abort(Tw)})},fee=(t,e)=>()=>{for(const n of e.keys())Cw(n);t.clear()},uI=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},_3=Zu(Ui(`${Gy}/add`),{withTypes:()=>_3}),hee=Ui(`${Gy}/removeAll`),x3=Zu(Ui(`${Gy}/remove`),{withTypes:()=>x3}),mee=(...t)=>{console.error(`${Gy}/error`,...t)},um=(t={})=>{const e=new Map,n=new Map,r=_=>{const E=n.get(_)??0;n.set(_,E+1)},i=_=>{const E=n.get(_)??1;E===1?n.delete(_):n.set(_,E-1)},{extra:s,onError:c=mee}=t;HE(c);const u=_=>(_.unsubscribe=()=>e.delete(_.id),e.set(_.id,_),E=>{_.unsubscribe(),E?.cancelActive&&Cw(_)}),f=_=>{const E=cI(e,_)??b3(_);return u(E)};Zu(f,{withTypes:()=>f});const h=_=>{const E=cI(e,_);return E&&(E.unsubscribe(),_.cancelActive&&Cw(E)),!!E};Zu(h,{withTypes:()=>h});const p=async(_,E,w,N)=>{const A=new AbortController,R=dee(f,A.signal),O=[];try{_.pending.add(A),r(_),await Promise.resolve(_.effect(E,Zu({},w,{getOriginalState:N,condition:(C,V)=>R(C,V).then(Boolean),take:R,delay:v3(A.signal),pause:Ev(A.signal),extra:s,signal:A.signal,fork:uee(A.signal,O),unsubscribe:_.unsubscribe,subscribe:()=>{e.set(_.id,_)},cancelActiveListeners:()=>{_.pending.forEach((C,V,$)=>{C!==A&&(C.abort(Tw),$.delete(C))})},cancel:()=>{A.abort(Tw),_.pending.delete(A)},throwIfCancelled:()=>{hc(A.signal)}})))}catch(C){C instanceof Hy||uI(c,C,{raisedBy:"effect"})}finally{await Promise.all(O),A.abort(lee),i(_),_.pending.delete(A)}},g=fee(e,n);return{middleware:_=>E=>w=>{if(!YL(w))return E(w);if(_3.match(w))return f(w.payload);if(hee.match(w)){g();return}if(x3.match(w))return h(w.payload);let N=_.getState();const A=()=>{if(N===lI)throw new Error(gi(23));return N};let R;try{if(R=E(w),e.size>0){const O=_.getState(),C=Array.from(e.values());for(const V of C){let $=!1;try{$=V.predicate(w,O,N)}catch(D){$=!1,uI(c,D,{raisedBy:"predicate"})}$&&p(V,w,_,A)}}}finally{N=lI}return R},startListening:f,stopListening:h,clearListeners:g}};function gi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var pee={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},w3=Jr({name:"chartLayout",initialState:pee,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:gee,setLayout:vee,setChartSize:yee,setScale:bee}=w3.actions,_ee=w3.reducer;function j3(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function pt(t){return Number.isFinite(t)}function Za(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function dI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dI(Object(n),!0).forEach(function(r){xee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xee(t,e,n){return(e=wee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wee(t){var e=jee(t,"string");return typeof e=="symbol"?e:e+""}function jee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dn(t,e,n){return an(t)||an(e)?n:Xa(e)?cd(t,e,n):typeof e=="function"?e(t):n}var Eee=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:c,layout:u}=e;if((u==="vertical"||u==="horizontal"&&c==="middle")&&s!=="center"&&Pe(t[s]))return Fu(Fu({},t),{},{[s]:t[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&c!=="middle"&&Pe(t[c]))return Fu(Fu({},t),{},{[c]:t[c]+(i||0)})}return t},Xs=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",E3=(t,e,n,r)=>{if(r)return t.map(u=>u.coordinate);var i,s,c=t.map(u=>(u.coordinate===e&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||c.push(e),s||c.push(n),c},N3=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:c,realScaleType:u,isCategorical:f,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:y,axisType:_}=t;if(!c)return null;var E=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,w=i==="category"&&c.bandwidth?c.bandwidth()/E:0;if(w=_==="angleAxis"&&s&&s.length>=2?Yr(s[0]-s[1])*2*w:w,g||y){var N=(g||y||[]).map((A,R)=>{var O=r?r.indexOf(A):A,C=c.map(O);return pt(C)?{coordinate:C+w,value:A,offset:w,index:R}:null}).filter(Xr);return N}return f&&h?h.map((A,R)=>{var O=c.map(A);return pt(O)?{coordinate:O+w,value:A,index:R,offset:w}:null}).filter(Xr):c.ticks&&p!=null?c.ticks(p).map((A,R)=>{var O=c.map(A);return pt(O)?{coordinate:O+w,value:A,index:R,offset:w}:null}).filter(Xr):c.domain().map((A,R)=>{var O=c.map(A);return pt(O)?{coordinate:O+w,value:r?r[A]:A,index:R,offset:w}:null}).filter(Xr)},Nee=(t,e)=>{if(!e||e.length!==2||!Pe(e[0])||!Pe(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Pe(t[0])||t[0]<n)&&(i[0]=n),(!Pe(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},See=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,c=0,u=0;u<n;++u){var f=t[u],h=f?.[i];if(h!=null){var p=h[1],g=h[0],y=Ya(p)?g:p;y>=0?(h[0]=s,s+=y,h[1]=s):(h[0]=c,c+=y,h[1]=c)}}}},Aee=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,c=0;c<n;++c){var u=t[c],f=u?.[i];if(f!=null){var h=Ya(f[1])?f[0]:f[1];h>=0?(f[0]=s,s+=h,f[1]=s):(f[0]=0,f[1]=0)}}}},Tee={sign:See,expand:nZ,none:Nc,silhouette:rZ,wiggle:iZ,positive:Aee},Cee=(t,e,n)=>{var r,i=(r=Tee[n])!==null&&r!==void 0?r:Nc,s=tZ().keys(e).value((u,f)=>Number(Dn(u,f,0))).order(yw).offset(i),c=s(t);return c.forEach((u,f)=>{u.forEach((h,p)=>{var g=Dn(t[p],e[f],0);Array.isArray(g)&&g.length===2&&Pe(g[0])&&Pe(g[1])&&(h[0]=g[0],h[1]=g[1])})}),c};function Oee(t){return t==null?void 0:String(t)}function fI(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:c}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!an(i[e.dataKey])){var u=IL(n,"value",i[e.dataKey]);if(u)return u.coordinate+r/2}return n!=null&&n[s]?n[s].coordinate+r/2:null}var f=Dn(i,an(c)?e.dataKey:c),h=e.scale.map(f);return Pe(h)?h:null}var hI=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:c}=t;if(e.type==="category")return n[c]?n[c].coordinate+r:null;var u=Dn(s,e.dataKey,e.scale.domain()[c]);if(an(u))return null;var f=e.scale.map(u);return Pe(f)?f-i/2+r:null},Pee=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Iee=t=>{var e=t.flat(2).filter(Pe);return[Math.min(...e),Math.max(...e)]},Ree=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],kee=(t,e,n)=>{if(t!=null)return Ree(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:c}=s,u=c.reduce((f,h)=>{var p=j3(h,e,n),g=Iee(p);return!pt(g[0])||!pt(g[1])?f:[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},mI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dd=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=zy(e,p=>p.coordinate),s=1/0,c=1,u=i.length;c<u;c++){var f=i[c],h=i[c-1];s=Math.min((f?.coordinate||0)-(h?.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function gI(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Fu(Fu({},e),{},{dataKey:n,payload:r,value:i,name:s})}function Ky(t,e){if(t)return String(t);if(typeof e=="string")return e}var Dee=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Mee=(t,e)=>e==="centric"?t.angle:t.radius,Zs=t=>t.layout.width,Js=t=>t.layout.height,zee=t=>t.layout.scale,S3=t=>t.layout.margin,Qy=ce(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Wy=ce(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Lee="data-recharts-item-index",qee="data-recharts-item-id",dm=60;function vI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vI(Object(n),!0).forEach(function(r){Uee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uee(t,e,n){return(e=Vee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vee(t){var e=Bee(t,"string");return typeof e=="symbol"?e:e+""}function Bee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $ee=t=>t.brush.height;function Fee(t){var e=Wy(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:dm;return n+i}return n},0)}function Hee(t){var e=Wy(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:dm;return n+i}return n},0)}function Gee(t){var e=Qy(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Kee(t){var e=Qy(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Jn=ce([Zs,Js,S3,$ee,Fee,Hee,Gee,Kee,KL,yJ],(t,e,n,r,i,s,c,u,f,h)=>{var p={left:(n.left||0)+i,right:(n.right||0)+s},g={top:(n.top||0)+c,bottom:(n.bottom||0)+u},y=fg(fg({},g),p),_=y.bottom;y.bottom+=r,y=Eee(y,f,h);var E=t-y.left-y.right,w=e-y.top-y.bottom;return fg(fg({brushBottom:_},y),{},{width:Math.max(E,0),height:Math.max(w,0)})}),Qee=ce(Jn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),GE=ce(Zs,Js,(t,e)=>({x:0,y:0,width:t,height:e})),Wee=j.createContext(null),Er=()=>j.useContext(Wee)!=null,Yy=t=>t.brush,Xy=ce([Yy,Jn,S3],(t,e,n)=>({height:t.height,x:Pe(t.x)?t.x:e.left,y:Pe(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Pe(t.width)?t.width:e.width})),Wx={},Yx={},Xx={},yI;function Yee(){return yI||(yI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let c,u=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{u!==null&&(n.apply(c,u),c=void 0,u=null)},g=()=>{h&&p(),w()};let y=null;const _=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},r)},E=()=>{y!==null&&(clearTimeout(y),y=null)},w=()=>{E(),c=void 0,u=null},N=()=>{p()},A=function(...R){if(i?.aborted)return;c=this,u=R;const O=y==null;_(),f&&O&&p()};return A.schedule=_,A.cancel=w,A.flush=N,i?.addEventListener("abort",w,{once:!0}),A}t.debounce=e})(Xx)),Xx}var bI;function Xee(){return bI||(bI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yee();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:u=!0,maxWait:f}=s,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let p,g=null;const y=e.debounce(function(...w){p=r.apply(this,w),g=null},i,{edges:h}),_=function(...w){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(p=r.apply(this,w),g=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,w),p)},E=()=>(y.flush(),p);return _.cancel=y.cancel,_.flush=E,_}t.debounce=n})(Yx)),Yx}var _I;function Zee(){return _I||(_I=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xee();function n(r,i=0,s={}){const{leading:c=!0,trailing:u=!0}=s;return e.debounce(r,i,{leading:c,maxWait:i,trailing:u})}t.throttle=n})(Wx)),Wx}var Zx,xI;function Jee(){return xI||(xI=1,Zx=Zee().throttle),Zx}var ete=Jee();const tte=es(ete);var Nv=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(n.replace(/%s/g,()=>i[c++]))}},qa={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},A3=(t,e,n)=>{var{width:r=qa.width,height:i=qa.height,aspect:s,maxHeight:c}=n,u=Sc(r)?t:Number(r),f=Sc(i)?e:Number(i);return s&&s>0&&(u?f=u/s:f&&(u=f*s),c&&f!=null&&f>c&&(f=c)),{calculatedWidth:u,calculatedHeight:f}},nte={width:0,height:0,overflow:"visible"},rte={width:0,overflowX:"visible"},ite={height:0,overflowY:"visible"},ate={},ste=t=>{var{width:e,height:n}=t,r=Sc(e),i=Sc(n);return r&&i?nte:r?rte:i?ite:ate};function ote(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i=qa.width,s=qa.height):i===void 0?i=r&&r>0?void 0:qa.width:s===void 0&&(s=r&&r>0?void 0:qa.height),{width:i,height:s}}function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ow.apply(null,arguments)}function wI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wI(Object(n),!0).forEach(function(r){lte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lte(t,e,n){return(e=cte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cte(t){var e=ute(t,"string");return typeof e=="symbol"?e:e+""}function ute(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T3=j.createContext(qa.initialDimension);function dte(t){return Za(t.width)&&Za(t.height)}function C3(t){var{children:e,width:n,height:r}=t,i=j.useMemo(()=>({width:n,height:r}),[n,r]);return dte(i)?j.createElement(T3.Provider,{value:i},e):null}var KE=()=>j.useContext(T3),fte=j.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=qa.initialDimension,width:i,height:s,minWidth:c=qa.minWidth,minHeight:u,maxHeight:f,children:h,debounce:p=qa.debounce,id:g,className:y,onResize:_,style:E={}}=t,w=j.useRef(null),N=j.useRef();N.current=_,j.useImperativeHandle(e,()=>w.current);var[A,R]=j.useState({containerWidth:r.width,containerHeight:r.height}),O=j.useCallback((I,k)=>{R(U=>{var q=Math.round(I),z=Math.round(k);return U.containerWidth===q&&U.containerHeight===z?U:{containerWidth:q,containerHeight:z}})},[]);j.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return qc;var I=z=>{var M,W=z[0];if(W!=null){var{width:Q,height:H}=W.contentRect;O(Q,H),(M=N.current)===null||M===void 0||M.call(N,Q,H)}};p>0&&(I=tte(I,p,{trailing:!0,leading:!1}));var k=new ResizeObserver(I),{width:U,height:q}=w.current.getBoundingClientRect();return O(U,q),k.observe(w.current),()=>{k.disconnect()}},[O,p]);var{containerWidth:C,containerHeight:V}=A;Nv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:$,calculatedHeight:D}=A3(C,V,{width:i,height:s,aspect:n,maxHeight:f});return Nv($!=null&&$>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,D,i,s,c,u,n),j.createElement("div",{id:g?"".concat(g):void 0,className:Ut("recharts-responsive-container",y),style:jI(jI({},E),{},{width:i,height:s,minWidth:c,minHeight:u,maxHeight:f}),ref:w},j.createElement("div",{style:ste({width:i,height:s})},j.createElement(C3,{width:$,height:D},h)))}),EI=j.forwardRef((t,e)=>{var n=KE();if(Za(n.width)&&Za(n.height))return t.children;var{width:r,height:i}=ote({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:c}=A3(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Pe(s)&&Pe(c)?j.createElement(C3,{width:s,height:c},t.children):j.createElement(fte,Ow({},t,{width:r,height:i,ref:e}))});function QE(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var Zy=()=>{var t,e=Er(),n=ze(Qee),r=ze(Xy),i=(t=ze(Yy))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},hte={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},O3=()=>{var t;return(t=ze(Jn))!==null&&t!==void 0?t:hte},P3=()=>ze(Zs),I3=()=>ze(Js),Ot=t=>t.layout.layoutType,Uc=()=>ze(Ot),R3=()=>{var t=Uc();if(t==="horizontal"||t==="vertical")return t},k3=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},mte=()=>{var t=Uc();return t!==void 0},fm=t=>{var e=jn(),n=Er(),{width:r,height:i}=t,s=KE(),c=r,u=i;return s&&(c=s.width>0?s.width:r,u=s.height>0?s.height:i),j.useEffect(()=>{!n&&Za(c)&&Za(u)&&e(yee({width:c,height:u}))},[e,n,c,u]),null},D3=Symbol.for("immer-nothing"),NI=Symbol.for("immer-draftable"),vi=Symbol.for("immer-state");function ra(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Rh=Object.getPrototypeOf;function fd(t){return!!t&&!!t[vi]}function Tc(t){return t?M3(t)||Array.isArray(t)||!!t[NI]||!!t.constructor?.[NI]||hm(t)||e0(t):!1}var pte=Object.prototype.constructor.toString(),SI=new WeakMap;function M3(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=SI.get(n);return r===void 0&&(r=Function.toString.call(n),SI.set(n,r)),r===pte}function Sv(t,e,n=!0){Jy(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Jy(t){const e=t[vi];return e?e.type_:Array.isArray(t)?1:hm(t)?2:e0(t)?3:0}function Pw(t,e){return Jy(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function z3(t,e,n){const r=Jy(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function gte(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function hm(t){return t instanceof Map}function e0(t){return t instanceof Set}function nc(t){return t.copy_||t.base_}function Iw(t,e){if(hm(t))return new Map(t);if(e0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=M3(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[vi];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const c=i[s],u=r[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(Rh(t),r)}else{const r=Rh(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function WE(t,e=!1){return t0(t)||fd(t)||!Tc(t)||(Jy(t)>1&&Object.defineProperties(t,{set:hg,add:hg,clear:hg,delete:hg}),Object.freeze(t),e&&Object.values(t).forEach(n=>WE(n,!0))),t}function vte(){ra(2)}var hg={value:vte};function t0(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var yte={};function Cc(t){const e=yte[t];return e||ra(0,t),e}var kh;function L3(){return kh}function bte(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function AI(t,e){e&&(Cc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Rw(t){kw(t),t.drafts_.forEach(_te),t.drafts_=null}function kw(t){t===kh&&(kh=t.parent_)}function TI(t){return kh=bte(kh,t)}function _te(t){const e=t[vi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function CI(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[vi].modified_&&(Rw(e),ra(4)),Tc(t)&&(t=Av(e,t),e.parent_||Tv(e,t)),e.patches_&&Cc("Patches").generateReplacementPatches_(n[vi].base_,t,e.patches_,e.inversePatches_)):t=Av(e,n,[]),Rw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==D3?t:void 0}function Av(t,e,n){if(t0(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[vi];if(!i)return Sv(e,(s,c)=>OI(t,i,e,s,c,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Tv(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let c=s,u=!1;i.type_===3&&(c=new Set(s),s.clear(),u=!0),Sv(c,(f,h)=>OI(t,i,s,f,h,n,u),r),Tv(t,s,!1),n&&t.patches_&&Cc("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function OI(t,e,n,r,i,s,c){if(i==null||typeof i!="object"&&!c)return;const u=t0(i);if(!(u&&!c)){if(fd(i)){const f=s&&e&&e.type_!==3&&!Pw(e.assigned_,r)?s.concat(r):void 0,h=Av(t,i,f);if(z3(n,r,h),fd(h))t.canAutoFreeze_=!1;else return}else c&&n.add(i);if(Tc(i)&&!u){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&u)return;Av(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(hm(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Tv(t,i)}}}function Tv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&WE(e,n)}function xte(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:L3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=YE;n&&(i=[r],s=Dh);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=c,u}var YE={get(t,e){if(e===vi)return t;const n=nc(t);if(!Pw(n,e))return wte(t,n,e);const r=n[e];return t.finalized_||!Tc(r)?r:r===Jx(t.base_,e)?(e1(t),t.copy_[e]=Mw(r,t)):r},has(t,e){return e in nc(t)},ownKeys(t){return Reflect.ownKeys(nc(t))},set(t,e,n){const r=q3(nc(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Jx(nc(t),e),s=i?.[vi];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(gte(n,i)&&(n!==void 0||Pw(t.base_,e)))return!0;e1(t),Dw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Jx(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,e1(t),Dw(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=nc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ra(11)},getPrototypeOf(t){return Rh(t.base_)},setPrototypeOf(){ra(12)}},Dh={};Sv(YE,(t,e)=>{Dh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Dh.deleteProperty=function(t,e){return Dh.set.call(this,t,e,void 0)};Dh.set=function(t,e,n){return YE.set.call(this,t[0],e,n,t[0])};function Jx(t,e){const n=t[vi];return(n?nc(n):t)[e]}function wte(t,e,n){const r=q3(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function q3(t,e){if(!(e in t))return;let n=Rh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Rh(n)}}function Dw(t){t.modified_||(t.modified_=!0,t.parent_&&Dw(t.parent_))}function e1(t){t.copy_||(t.copy_=Iw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var jte=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const c=this;return function(f=s,...h){return c.produce(f,p=>n.call(this,p,...h))}}typeof n!="function"&&ra(6),r!==void 0&&typeof r!="function"&&ra(7);let i;if(Tc(e)){const s=TI(this),c=Mw(e,void 0);let u=!0;try{i=n(c),u=!1}finally{u?Rw(s):kw(s)}return AI(s,r),CI(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===D3&&(i=void 0),this.autoFreeze_&&WE(i,!0),r){const s=[],c=[];Cc("Patches").generateReplacementPatches_(e,i,s,c),r(s,c)}return i}else ra(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...u)=>this.produceWithPatches(c,f=>e(f,...u));let r,i;return[this.produce(e,n,(c,u)=>{r=c,i=u}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Tc(t)||ra(8),fd(t)&&(t=Ete(t));const e=TI(this),n=Mw(t,void 0);return n[vi].isManual_=!0,kw(e),n}finishDraft(t,e){const n=t&&t[vi];(!n||!n.isManual_)&&ra(9);const{scope_:r}=n;return AI(r,e),CI(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Cc("Patches").applyPatches_;return fd(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Mw(t,e){const n=hm(t)?Cc("MapSet").proxyMap_(t,e):e0(t)?Cc("MapSet").proxySet_(t,e):xte(t,e);return(e?e.scope_:L3()).drafts_.push(n),n}function Ete(t){return fd(t)||ra(10,t),U3(t)}function U3(t){if(!Tc(t)||t0(t))return t;const e=t[vi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Iw(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Iw(t,!0);return Sv(n,(i,s)=>{z3(n,i,U3(s))},r),e&&(e.finalized_=!1),n}var Nte=new jte;Nte.produce;var Ste={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},V3=Jr({name:"legend",initialState:Ste,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Zt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=la(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Zt()},removeLegendPayload:{reducer(t,e){var n=la(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Zt()}}}),{setLegendSize:gve,setLegendSettings:vve,addLegendPayload:Ate,replaceLegendPayload:Tte,removeLegendPayload:Cte}=V3.actions,Ote=V3.reducer;function zw(){return zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zw.apply(null,arguments)}function PI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PI(Object(n),!0).forEach(function(r){Pte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pte(t,e,n){return(e=Ite(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ite(t){var e=Rte(t,"string");return typeof e=="symbol"?e:e+""}function Rte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kte(t){return Array.isArray(t)&&Xa(t[0])&&Xa(t[1])?t.join(" ~ "):t}var Ru={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Dte=t=>{var{separator:e=Ru.separator,contentStyle:n,itemStyle:r,labelStyle:i=Ru.labelStyle,payload:s,formatter:c,itemSorter:u,wrapperClassName:f,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:y=Ru.accessibilityLayer}=t,_=()=>{if(s&&s.length){var V={padding:0,margin:0},$=(u?zy(s,u):s).map((D,I)=>{if(D.type==="none")return null;var k=D.formatter||c||kte,{value:U,name:q}=D,z=U,M=q;if(k){var W=k(U,q,D,I,s);if(Array.isArray(W))[z,M]=W;else if(W!=null)z=W;else return null}var Q=Vf(Vf({},Ru.itemStyle),{},{color:D.color||Ru.itemStyle.color},r);return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:Q},Xa(M)?j.createElement("span",{className:"recharts-tooltip-item-name"},M):null,Xa(M)?j.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,j.createElement("span",{className:"recharts-tooltip-item-value"},z),j.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:V},$)}return null},E=Vf(Vf({},Ru.contentStyle),n),w=Vf({margin:0},i),N=!an(p),A=N?p:"",R=Ut("recharts-default-tooltip",f),O=Ut("recharts-tooltip-label",h);N&&g&&s!==void 0&&s!==null&&(A=g(p,s));var C=y?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",zw({className:R,style:E},C),j.createElement("p",{className:O,style:w},j.isValidElement(A)?A:"".concat(A)),_())},Bf="recharts-tooltip-wrapper",Mte={visibility:"hidden"};function zte(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ut(Bf,{["".concat(Bf,"-right")]:Pe(n)&&e&&Pe(e.x)&&n>=e.x,["".concat(Bf,"-left")]:Pe(n)&&e&&Pe(e.x)&&n<e.x,["".concat(Bf,"-bottom")]:Pe(r)&&e&&Pe(e.y)&&r>=e.y,["".concat(Bf,"-top")]:Pe(r)&&e&&Pe(e.y)&&r<e.y})}function II(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:s,reverseDirection:c,tooltipDimension:u,viewBox:f,viewBoxDimension:h}=t;if(s&&Pe(s[r]))return s[r];var p=n[r]-u-(i>0?i:0),g=n[r]+i;if(e[r])return c[r]?p:g;var y=f[r];if(y==null)return 0;if(c[r]){var _=p,E=y;return _<E?Math.max(g,y):Math.max(p,y)}if(h==null)return 0;var w=g+u,N=y+h;return w>N?Math.max(p,y):Math.max(g,y)}function Lte(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function qte(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:s,reverseDirection:c,tooltipBox:u,useTranslate3d:f,viewBox:h}=t,p,g,y;return u.height>0&&u.width>0&&n?(g=II({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:s,reverseDirection:c,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),y=II({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:s,reverseDirection:c,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),p=Lte({translateX:g,translateY:y,useTranslate3d:f})):p=Mte,{cssProperties:p,cssClasses:zte({translateX:g,translateY:y,coordinate:n})}}function RI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RI(Object(n),!0).forEach(function(r){Lw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lw(t,e,n){return(e=Ute(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ute(t){var e=Vte(t,"string");return typeof e=="symbol"?e:e+""}function Vte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Bte extends j.PureComponent{constructor(){super(...arguments),Lw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Lw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:c,hasPayload:u,isAnimationActive:f,offset:h,position:p,reverseDirection:g,useTranslate3d:y,viewBox:_,wrapperStyle:E,lastBoundingBox:w,innerRef:N,hasPortalFromProps:A}=this.props,R=typeof h=="number"?h:h.x,O=typeof h=="number"?h:h.y,{cssClasses:C,cssProperties:V}=qte({allowEscapeViewBox:n,coordinate:c,offsetLeft:R,offsetTop:O,position:p,reverseDirection:g,tooltipBox:{height:w.height,width:w.width},useTranslate3d:y,viewBox:_}),$=A?{}:mg(mg({transition:f&&e?"transform ".concat(r,"ms ").concat(i):void 0},V),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=mg(mg({},$),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},E);return j.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:D,ref:N},s)}}var B3=()=>{var t;return(t=ze(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qw.apply(null,arguments)}function kI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kI(Object(n),!0).forEach(function(r){$te(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $te(t,e,n){return(e=Fte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fte(t){var e=Hte(t,"string");return typeof e=="symbol"?e:e+""}function Hte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MI={curveBasisClosed:FX,curveBasisOpen:HX,curveBasis:$X,curveBumpX:CX,curveBumpY:OX,curveLinearClosed:GX,curveLinear:Dy,curveMonotoneX:KX,curveMonotoneY:QX,curveNatural:WX,curveStep:YX,curveStepAfter:ZX,curveStepBefore:XX},Cv=t=>pt(t.x)&&pt(t.y),zI=t=>t.base!=null&&Cv(t.base)&&Cv(t),$f=t=>t.x,Ff=t=>t.y,Gte=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(lm(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=MI["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return MI[n]||Dy},LI={connectNulls:!1,type:"linear"},Kte=t=>{var{type:e=LI.type,points:n=[],baseLine:r,layout:i,connectNulls:s=LI.connectNulls}=t,c=Gte(e,i),u=s?n.filter(Cv):n;if(Array.isArray(r)){var f,h=n.map((E,w)=>DI(DI({},E),{},{base:r[w]}));i==="vertical"?f=sg().y(Ff).x1($f).x0(E=>E.base.x):f=sg().x($f).y1(Ff).y0(E=>E.base.y);var p=f.defined(zI).curve(c),g=s?h.filter(zI):h;return p(g)}var y;i==="vertical"&&Pe(r)?y=sg().y(Ff).x1($f).x0(r):Pe(r)?y=sg().x($f).y1(Ff).y0(r):y=bL().x($f).y(Ff);var _=y.defined(Cv).curve(c);return _(u)},$3=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=Uc();if((!n||!n.length)&&!r)return null;var c={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},u=n&&n.length?Kte(c):r;return j.createElement("path",qw({},da(t),DE(t),{className:Ut("recharts-curve",e),d:u===null?void 0:u,ref:i}))},Qte=["x","y","top","left","width","height","className"];function Uw(){return Uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uw.apply(null,arguments)}function qI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qI(Object(n),!0).forEach(function(r){Yte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yte(t,e,n){return(e=Xte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xte(t){var e=Zte(t,"string");return typeof e=="symbol"?e:e+""}function Zte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jte(t,e){if(t==null)return{};var n,r,i=ene(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ene(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var tne=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),nne=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:c=0,className:u}=t,f=Jte(t,Qte),h=Wte({x:e,y:n,top:r,left:i,width:s,height:c},f);return!Pe(e)||!Pe(n)||!Pe(s)||!Pe(c)||!Pe(r)||!Pe(i)?null:j.createElement("path",Uw({},Ir(h),{className:Ut("recharts-cross",u),d:tne(e,n,s,c,r,i)}))};function rne(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function UI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UI(Object(n),!0).forEach(function(r){ine(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ine(t,e,n){return(e=ane(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ane(t){var e=sne(t,"string");return typeof e=="symbol"?e:e+""}function sne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var one=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),F3=(t,e,n)=>t.map(r=>"".concat(one(r)," ").concat(e,"ms ").concat(n)).join(","),lne=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Mh=(t,e)=>Object.keys(e).reduce((n,r)=>VI(VI({},n),{},{[r]:t(r,e[r])}),{});function BI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BI(Object(n),!0).forEach(function(r){cne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cne(t,e,n){return(e=une(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function une(t){var e=dne(t,"string");return typeof e=="symbol"?e:e+""}function dne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ov=(t,e,n)=>t+(e-t)*n,Vw=t=>{var{from:e,to:n}=t;return e!==n},H3=(t,e,n)=>{var r=Mh((i,s)=>{if(Vw(s)){var[c,u]=t(s.from,s.to,s.velocity);return qn(qn({},s),{},{from:c,velocity:u})}return s},e);return n<1?Mh((i,s)=>Vw(s)&&r[i]!=null?qn(qn({},s),{},{velocity:Ov(s.velocity,r[i].velocity,n),from:Ov(s.from,r[i].from,n)}):s,e):H3(t,r,n-1)};function fne(t,e,n,r,i,s){var c,u=r.reduce((y,_)=>qn(qn({},y),{},{[_]:{from:t[_],velocity:0,to:e[_]}}),{}),f=()=>Mh((y,_)=>_.from,u),h=()=>!Object.values(u).filter(Vw).length,p=null,g=y=>{c||(c=y);var _=y-c,E=_/n.dt;u=H3(n,u,E),i(qn(qn(qn({},t),e),f())),c=y,h()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{var y;(y=p)===null||y===void 0||y()})}function hne(t,e,n,r,i,s,c){var u=null,f=i.reduce((g,y)=>{var _=t[y],E=e[y];return _==null||E==null?g:qn(qn({},g),{},{[y]:[_,E]})},{}),h,p=g=>{h||(h=g);var y=(g-h)/r,_=Mh((w,N)=>Ov(...N,n(y)),f);if(s(qn(qn(qn({},t),e),_)),y<1)u=c.setTimeout(p);else{var E=Mh((w,N)=>Ov(...N,n(1)),f);s(qn(qn(qn({},t),e),E))}};return()=>(u=c.setTimeout(p),()=>{var g;(g=u)===null||g===void 0||g()})}const mne=(t,e,n,r,i,s)=>{var c=lne(t,e);return n==null?()=>(i(qn(qn({},t),e)),()=>{}):n.isStepper===!0?fne(t,e,n,c,i,s):hne(t,e,n,r,c,i,s)};var Pv=1e-4,G3=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],K3=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),$I=(t,e)=>n=>{var r=G3(t,e);return K3(r,n)},pne=(t,e)=>n=>{var r=G3(t,e),i=[...r.map((s,c)=>s*c).slice(1),0];return K3(i,n)},gne=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},vne=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=gne(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},yne=(t,e,n,r)=>{var i=$I(t,n),s=$I(e,r),c=pne(t,n),u=h=>h>1?1:h<0?0:h,f=h=>{for(var p=h>1?1:h,g=p,y=0;y<8;++y){var _=i(g)-p,E=c(g);if(Math.abs(_-p)<Pv||E<Pv)return s(g);g=u(g-_/E)}return s(g)};return f.isStepper=!1,f},FI=function(){return yne(...vne(...arguments))},bne=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(c,u,f)=>{var h=-(c-u)*n,p=f*r,g=f+(h-p)*i/1e3,y=f*i/1e3+c;return Math.abs(y-u)<Pv&&Math.abs(g)<Pv?[u,0]:[y,g]};return s.isStepper=!0,s.dt=i,s},_ne=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return FI(t);case"spring":return bne();default:if(t.split("(")[0]==="cubic-bezier")return FI(t)}return typeof t=="function"?t:null};function xne(t){var e,n=()=>null,r=!1,i=null,s=c=>{if(!r){if(Array.isArray(c)){if(!c.length)return;var u=c,[f,...h]=u;if(typeof f=="number"){i=t.setTimeout(s.bind(null,h),f);return}s(f),i=t.setTimeout(s.bind(null,h));return}typeof c=="string"&&(e=c,n(e)),typeof c=="object"&&(e=c,n(e)),typeof c=="function"&&c()}};return{stop:()=>{r=!0},start:c=>{r=!1,i&&(i(),i=null),s(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>t}}class wne{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=c=>{c-r>=n?e(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function jne(){return xne(new wne)}var Ene=j.createContext(jne);function Nne(t,e){var n=j.useContext(Ene);return j.useMemo(()=>e??n(t),[t,e,n])}var Sne=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),n0={isSsr:Sne()},Ane={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},HI={t:0},t1={t:1};function r0(t){var e=Dr(t,Ane),{isActive:n,canBegin:r,duration:i,easing:s,begin:c,onAnimationEnd:u,onAnimationStart:f,children:h}=e,p=n==="auto"?!n0.isSsr:n,g=Nne(e.animationId,e.animationManager),[y,_]=j.useState(p?HI:t1),E=j.useRef(null);return j.useEffect(()=>{p||_(t1)},[p]),j.useEffect(()=>{if(!p||!r)return qc;var w=mne(HI,t1,_ne(s),i,_,g.getTimeoutController()),N=()=>{E.current=w()};return g.start([f,c,N,i,u]),()=>{g.stop(),E.current&&E.current(),u()}},[p,r,i,s,c,f,u,g]),h(y.t)}function i0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=j.useRef(Ch(e)),r=j.useRef(t);return r.current!==t&&(n.current=Ch(e),r.current=t),n.current}var Tne=["radius"],Cne=["radius"],GI,KI,QI,WI,YI,XI,ZI,JI,eR,tR;function nR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(n),!0).forEach(function(r){One(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function One(t,e,n){return(e=Pne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pne(t){var e=Ine(t,"string");return typeof e=="symbol"?e:e+""}function Ine(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iv(){return Iv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Iv.apply(null,arguments)}function iR(t,e){if(t==null)return{};var n,r,i=Rne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ra(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var aR=(t,e,n,r,i)=>{var s=Zo(n),c=Zo(r),u=Math.min(Math.abs(s)/2,Math.abs(c)/2),f=c>=0?1:-1,h=s>=0?1:-1,p=c>=0&&s>=0||c<0&&s<0?1:0,g;if(u>0&&Array.isArray(i)){for(var y=[0,0,0,0],_=0,E=4;_<E;_++){var w,N=(w=i[_])!==null&&w!==void 0?w:0;y[_]=N>u?u:N}g=dn(GI||(GI=Ra(["M",",",""])),t,e+f*y[0]),y[0]>0&&(g+=dn(KI||(KI=Ra(["A ",",",",0,0,",",",",",""])),y[0],y[0],p,t+h*y[0],e)),g+=dn(QI||(QI=Ra(["L ",",",""])),t+n-h*y[1],e),y[1]>0&&(g+=dn(WI||(WI=Ra(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],p,t+n,e+f*y[1])),g+=dn(YI||(YI=Ra(["L ",",",""])),t+n,e+r-f*y[2]),y[2]>0&&(g+=dn(XI||(XI=Ra(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],p,t+n-h*y[2],e+r)),g+=dn(ZI||(ZI=Ra(["L ",",",""])),t+h*y[3],e+r),y[3]>0&&(g+=dn(JI||(JI=Ra(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],p,t,e+r-f*y[3])),g+="Z"}else if(u>0&&i===+i&&i>0){var A=Math.min(u,i);g=dn(eR||(eR=Ra(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+f*A,A,A,p,t+h*A,e,t+n-h*A,e,A,A,p,t+n,e+f*A,t+n,e+r-f*A,A,A,p,t+n-h*A,e+r,t+h*A,e+r,A,A,p,t,e+r-f*A)}else g=dn(tR||(tR=Ra(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return g},sR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q3=t=>{var e=Dr(t,sR),n=j.useRef(null),[r,i]=j.useState(-1);j.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var le=n.current.getTotalLength();le&&i(le)}catch{}},[]);var{x:s,y:c,width:u,height:f,radius:h,className:p}=e,{animationEasing:g,animationDuration:y,animationBegin:_,isAnimationActive:E,isUpdateAnimationActive:w}=e,N=j.useRef(u),A=j.useRef(f),R=j.useRef(s),O=j.useRef(c),C=j.useMemo(()=>({x:s,y:c,width:u,height:f,radius:h}),[s,c,u,f,h]),V=i0(C,"rectangle-");if(s!==+s||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var $=Ut("recharts-rectangle",p);if(!w){var D=Ir(e),{radius:I}=D,k=iR(D,Tne);return j.createElement("path",Iv({},k,{x:Zo(s),y:Zo(c),width:Zo(u),height:Zo(f),radius:typeof h=="number"?h:void 0,className:$,d:aR(s,c,u,f,h)}))}var U=N.current,q=A.current,z=R.current,M=O.current,W="0px ".concat(r===-1?1:r,"px"),Q="".concat(r,"px 0px"),H=F3(["strokeDasharray"],y,typeof g=="string"?g:sR.animationEasing);return j.createElement(r0,{animationId:V,key:V,canBegin:r>0,duration:y,easing:g,isActive:w,begin:_},le=>{var _e=fn(U,u,le),je=fn(q,f,le),Y=fn(z,s,le),F=fn(M,c,le);n.current&&(N.current=_e,A.current=je,R.current=Y,O.current=F);var te;E?le>0?te={transition:H,strokeDasharray:Q}:te={strokeDasharray:W}:te={strokeDasharray:Q};var ye=Ir(e),{radius:we}=ye,Z=iR(ye,Cne);return j.createElement("path",Iv({},Z,{radius:typeof h=="number"?h:void 0,className:$,d:aR(Y,F,_e,je,h),ref:n,style:rR(rR({},te),e.style)}))})};function oR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oR(Object(n),!0).forEach(function(r){kne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kne(t,e,n){return(e=Dne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dne(t){var e=Mne(t,"string");return typeof e=="symbol"?e:e+""}function Mne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rv=Math.PI/180,zne=t=>t*180/Math.PI,fr=(t,e,n,r)=>({x:t+Math.cos(-Rv*r)*n,y:e+Math.sin(-Rv*r)*n}),Lne=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},qne=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},Une=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,c=qne({x:n,y:r},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var u=(n-i)/c,f=Math.acos(u);return r>s&&(f=2*Math.PI-f),{radius:c,angle:zne(f),angleInRadian:f}},Vne=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},Bne=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),c=Math.min(i,s);return t+c*360},$ne=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=Une({x:n,y:r},e),{innerRadius:c,outerRadius:u}=e;if(i<c||i>u||i===0)return null;var{startAngle:f,endAngle:h}=Vne(e),p=s,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?lR(lR({},e),{},{radius:i,angle:Bne(p,e)}):null};function W3(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,c=fr(e,n,r,i),u=fr(e,n,r,s);return{points:[c,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var cR,uR,dR,fR,hR,mR,pR;function Bw(){return Bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bw.apply(null,arguments)}function ac(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Fne=(t,e)=>{var n=Yr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},pg=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:c,cornerRadius:u,cornerIsExternal:f}=t,h=u*(c?1:-1)+r,p=Math.asin(u/h)/Rv,g=f?i:i+s*p,y=fr(e,n,h,g),_=fr(e,n,r,g),E=f?i-s*p:i,w=fr(e,n,h*Math.cos(p*Rv),E);return{center:y,circleTangency:_,lineTangency:w,theta:p}},Y3=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:c}=t,u=Fne(s,c),f=s+u,h=fr(e,n,i,s),p=fr(e,n,i,f),g=dn(cR||(cR=ac(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(s>f),p.x,p.y);if(r>0){var y=fr(e,n,r,s),_=fr(e,n,r,f);g+=dn(uR||(uR=ac(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),_.x,_.y,r,r,+(Math.abs(u)>180),+(s<=f),y.x,y.y)}else g+=dn(dR||(dR=ac(["L ",","," Z"])),e,n);return g},Hne=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:h}=t,p=Yr(h-f),{circleTangency:g,lineTangency:y,theta:_}=pg({cx:e,cy:n,radius:i,angle:f,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:E,lineTangency:w,theta:N}=pg({cx:e,cy:n,radius:i,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:u}),A=u?Math.abs(f-h):Math.abs(f-h)-_-N;if(A<0)return c?dn(fR||(fR=ac(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,s,s,s*2,s,s,-s*2):Y3({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:h});var R=dn(hR||(hR=ac(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,s,s,+(p<0),g.x,g.y,i,i,+(A>180),+(p<0),E.x,E.y,s,s,+(p<0),w.x,w.y);if(r>0){var{circleTangency:O,lineTangency:C,theta:V}=pg({cx:e,cy:n,radius:r,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:$,lineTangency:D,theta:I}=pg({cx:e,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),k=u?Math.abs(f-h):Math.abs(f-h)-V-I;if(k<0&&s===0)return"".concat(R,"L").concat(e,",").concat(n,"Z");R+=dn(mR||(mR=ac(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),D.x,D.y,s,s,+(p<0),$.x,$.y,r,r,+(k>180),+(p>0),O.x,O.y,s,s,+(p<0),C.x,C.y)}else R+=dn(pR||(pR=ac(["L",",","Z"])),e,n);return R},Gne={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},X3=t=>{var e=Dr(t,Gne),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:p,className:g}=e;if(s<i||h===p)return null;var y=Ut("recharts-sector",g),_=s-i,E=fa(c,_,0,!0),w;return E>0&&Math.abs(h-p)<360?w=Hne({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(E,_/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:p}):w=Y3({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:h,endAngle:p}),j.createElement("path",Bw({},Ir(e),{className:y,d:w}))};function Kne(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(DL(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:c,angle:u}=e,f=fr(r,i,s,u),h=fr(r,i,c,u);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return W3(e)}}var n1={},r1={},i1={},gR;function Qne(){return gR||(gR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HL();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(i1)),i1}var vR;function Wne(){return vR||(vR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qne();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(r1)),r1}var yR;function Yne(){return yR||(yR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GL(),n=Wne();function r(i,s,c){c&&typeof c!="number"&&e.isIterateeCall(i,s,c)&&(s=c=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),c=c===void 0?i<s?1:-1:n.toFinite(c);const u=Math.max(Math.ceil((s-i)/(c||1)),0),f=new Array(u);for(let h=0;h<u;h++)f[h]=i,i+=c;return f}t.range=r})(n1)),n1}var a1,bR;function Xne(){return bR||(bR=1,a1=Yne().range),a1}var Zne=Xne();const Z3=es(Zne);function il(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jne(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XE(t){let e,n,r;t.length!==2?(e=il,n=(u,f)=>il(t(u),f),r=(u,f)=>t(u)-f):(e=t===il||t===Jne?t:ere,n=t,r=t);function i(u,f,h=0,p=u.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;n(u[g],f)<0?h=g+1:p=g}while(h<p)}return h}function s(u,f,h=0,p=u.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;n(u[g],f)<=0?h=g+1:p=g}while(h<p)}return h}function c(u,f,h=0,p=u.length){const g=i(u,f,h,p-1);return g>h&&r(u[g-1],f)>-r(u[g],f)?g-1:g}return{left:i,center:c,right:s}}function ere(){return 0}function J3(t){return t===null?NaN:+t}function*tre(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const nre=XE(il),mm=nre.right;XE(J3).center;class _R extends Map{constructor(e,n=are){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(xR(this,e))}has(e){return super.has(xR(this,e))}set(e,n){return super.set(rre(this,e),n)}delete(e){return super.delete(ire(this,e))}}function xR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function rre({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ire({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function are(t){return t!==null&&typeof t=="object"?t.valueOf():t}function sre(t=il){if(t===il)return e6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function e6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ore=Math.sqrt(50),lre=Math.sqrt(10),cre=Math.sqrt(2);function kv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),c=s>=ore?10:s>=lre?5:s>=cre?2:1;let u,f,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(t*h),f=Math.round(e*h),u/h<t&&++u,f/h>e&&--f,h=-h):(h=Math.pow(10,i)*c,u=Math.round(t/h),f=Math.round(e/h),u*h<t&&++u,f*h>e&&--f),f<u&&.5<=n&&n<2?kv(t,e,n*2):[u,f,h]}function $w(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,c]=r?kv(e,t,n):kv(t,e,n);if(!(s>=i))return[];const u=s-i+1,f=new Array(u);if(r)if(c<0)for(let h=0;h<u;++h)f[h]=(s-h)/-c;else for(let h=0;h<u;++h)f[h]=(s-h)*c;else if(c<0)for(let h=0;h<u;++h)f[h]=(i+h)/-c;else for(let h=0;h<u;++h)f[h]=(i+h)*c;return f}function Fw(t,e,n){return e=+e,t=+t,n=+n,kv(t,e,n)[2]}function Hw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Fw(e,t,n):Fw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function wR(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function jR(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function t6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?e6:sre(i);r>n;){if(r-n>600){const f=r-n+1,h=e-n+1,p=Math.log(f),g=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*g*(f-g)/f)*(h-f/2<0?-1:1),_=Math.max(n,Math.floor(e-h*g/f+y)),E=Math.min(r,Math.floor(e+(f-h)*g/f+y));t6(t,e,_,E,i)}const s=t[e];let c=n,u=r;for(Hf(t,n,e),i(t[r],s)>0&&Hf(t,n,r);c<u;){for(Hf(t,c,u),++c,--u;i(t[c],s)<0;)++c;for(;i(t[u],s)>0;)--u}i(t[n],s)===0?Hf(t,n,u):(++u,Hf(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function Hf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ure(t,e,n){if(t=Float64Array.from(tre(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return jR(t);if(e>=1)return wR(t);var r,i=(r-1)*e,s=Math.floor(i),c=wR(t6(t,s).subarray(0,s+1)),u=jR(t.subarray(s+1));return c+(u-c)*(i-s)}}function dre(t,e,n=J3){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),c=+n(t[s],s,t),u=+n(t[s+1],s+1,t);return c+(u-c)*(i-s)}}function fre(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function $i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function eo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Gw=Symbol("implicit");function ZE(){var t=new _R,e=[],n=[],r=Gw;function i(s){let c=t.get(s);if(c===void 0){if(r!==Gw)return r;t.set(s,c=e.push(s)-1)}return n[c%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new _R;for(const c of s)t.has(c)||t.set(c,e.push(c)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return ZE(e,n).unknown(r)},$i.apply(i,arguments),i}function JE(){var t=ZE().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,c,u=!1,f=0,h=0,p=.5;delete t.unknown;function g(){var y=e().length,_=i<r,E=_?i:r,w=_?r:i;s=(w-E)/Math.max(1,y-f+h*2),u&&(s=Math.floor(s)),E+=(w-E-s*(y-f))*p,c=s*(1-f),u&&(E=Math.round(E),c=Math.round(c));var N=fre(y).map(function(A){return E+s*A});return n(_?N.reverse():N)}return t.domain=function(y){return arguments.length?(e(y),g()):e()},t.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,g()},t.bandwidth=function(){return c},t.step=function(){return s},t.round=function(y){return arguments.length?(u=!!y,g()):u},t.padding=function(y){return arguments.length?(f=Math.min(1,h=+y),g()):f},t.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),g()):f},t.paddingOuter=function(y){return arguments.length?(h=+y,g()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),g()):p},t.copy=function(){return JE(e(),[r,i]).round(u).paddingInner(f).paddingOuter(h).align(p)},$i.apply(g(),arguments)}function n6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return n6(e())},t}function hre(){return n6(JE.apply(null,arguments).paddingInner(1))}function eN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function r6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function pm(){}var zh=.7,Dv=1/zh,Ju="\\s*([+-]?\\d+)\\s*",Lh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mre=/^#([0-9a-f]{3,8})$/,pre=new RegExp(`^rgb\\(${Ju},${Ju},${Ju}\\)$`),gre=new RegExp(`^rgb\\(${Ka},${Ka},${Ka}\\)$`),vre=new RegExp(`^rgba\\(${Ju},${Ju},${Ju},${Lh}\\)$`),yre=new RegExp(`^rgba\\(${Ka},${Ka},${Ka},${Lh}\\)$`),bre=new RegExp(`^hsl\\(${Lh},${Ka},${Ka}\\)$`),_re=new RegExp(`^hsla\\(${Lh},${Ka},${Ka},${Lh}\\)$`),ER={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eN(pm,qh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:NR,formatHex:NR,formatHex8:xre,formatHsl:wre,formatRgb:SR,toString:SR});function NR(){return this.rgb().formatHex()}function xre(){return this.rgb().formatHex8()}function wre(){return i6(this).formatHsl()}function SR(){return this.rgb().formatRgb()}function qh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mre.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?AR(e):n===3?new Zr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?gg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?gg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pre.exec(t))?new Zr(e[1],e[2],e[3],1):(e=gre.exec(t))?new Zr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vre.exec(t))?gg(e[1],e[2],e[3],e[4]):(e=yre.exec(t))?gg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bre.exec(t))?OR(e[1],e[2]/100,e[3]/100,1):(e=_re.exec(t))?OR(e[1],e[2]/100,e[3]/100,e[4]):ER.hasOwnProperty(t)?AR(ER[t]):t==="transparent"?new Zr(NaN,NaN,NaN,0):null}function AR(t){return new Zr(t>>16&255,t>>8&255,t&255,1)}function gg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zr(t,e,n,r)}function jre(t){return t instanceof pm||(t=qh(t)),t?(t=t.rgb(),new Zr(t.r,t.g,t.b,t.opacity)):new Zr}function Kw(t,e,n,r){return arguments.length===1?jre(t):new Zr(t,e,n,r??1)}function Zr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}eN(Zr,Kw,r6(pm,{brighter(t){return t=t==null?Dv:Math.pow(Dv,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?zh:Math.pow(zh,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zr(mc(this.r),mc(this.g),mc(this.b),Mv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TR,formatHex:TR,formatHex8:Ere,formatRgb:CR,toString:CR}));function TR(){return`#${sc(this.r)}${sc(this.g)}${sc(this.b)}`}function Ere(){return`#${sc(this.r)}${sc(this.g)}${sc(this.b)}${sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function CR(){const t=Mv(this.opacity);return`${t===1?"rgb(":"rgba("}${mc(this.r)}, ${mc(this.g)}, ${mc(this.b)}${t===1?")":`, ${t})`}`}function Mv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function sc(t){return t=mc(t),(t<16?"0":"")+t.toString(16)}function OR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ia(t,e,n,r)}function i6(t){if(t instanceof ia)return new ia(t.h,t.s,t.l,t.opacity);if(t instanceof pm||(t=qh(t)),!t)return new ia;if(t instanceof ia)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),c=NaN,u=s-i,f=(s+i)/2;return u?(e===s?c=(n-r)/u+(n<r)*6:n===s?c=(r-e)/u+2:c=(e-n)/u+4,u/=f<.5?s+i:2-s-i,c*=60):u=f>0&&f<1?0:c,new ia(c,u,f,t.opacity)}function Nre(t,e,n,r){return arguments.length===1?i6(t):new ia(t,e,n,r??1)}function ia(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}eN(ia,Nre,r6(pm,{brighter(t){return t=t==null?Dv:Math.pow(Dv,t),new ia(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?zh:Math.pow(zh,t),new ia(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zr(s1(t>=240?t-240:t+120,i,r),s1(t,i,r),s1(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ia(PR(this.h),vg(this.s),vg(this.l),Mv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mv(this.opacity);return`${t===1?"hsl(":"hsla("}${PR(this.h)}, ${vg(this.s)*100}%, ${vg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function PR(t){return t=(t||0)%360,t<0?t+360:t}function vg(t){return Math.max(0,Math.min(1,t||0))}function s1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const tN=t=>()=>t;function Sre(t,e){return function(n){return t+n*e}}function Are(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Tre(t){return(t=+t)==1?a6:function(e,n){return n-e?Are(e,n,t):tN(isNaN(e)?n:e)}}function a6(t,e){var n=e-t;return n?Sre(t,n):tN(isNaN(t)?e:t)}const IR=(function t(e){var n=Tre(e);function r(i,s){var c=n((i=Kw(i)).r,(s=Kw(s)).r),u=n(i.g,s.g),f=n(i.b,s.b),h=a6(i.opacity,s.opacity);return function(p){return i.r=c(p),i.g=u(p),i.b=f(p),i.opacity=h(p),i+""}}return r.gamma=t,r})(1);function Cre(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Ore(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Pre(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),c;for(c=0;c<r;++c)i[c]=Ad(t[c],e[c]);for(;c<n;++c)s[c]=e[c];return function(u){for(c=0;c<r;++c)s[c]=i[c](u);return s}}function Ire(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function zv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Rre(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ad(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Qw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o1=new RegExp(Qw.source,"g");function kre(t){return function(){return t}}function Dre(t){return function(e){return t(e)+""}}function Mre(t,e){var n=Qw.lastIndex=o1.lastIndex=0,r,i,s,c=-1,u=[],f=[];for(t=t+"",e=e+"";(r=Qw.exec(t))&&(i=o1.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),u[c]?u[c]+=s:u[++c]=s),(r=r[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,f.push({i:c,x:zv(r,i)})),n=o1.lastIndex;return n<e.length&&(s=e.slice(n),u[c]?u[c]+=s:u[++c]=s),u.length<2?f[0]?Dre(f[0].x):kre(e):(e=f.length,function(h){for(var p=0,g;p<e;++p)u[(g=f[p]).i]=g.x(h);return u.join("")})}function Ad(t,e){var n=typeof e,r;return e==null||n==="boolean"?tN(e):(n==="number"?zv:n==="string"?(r=qh(e))?(e=r,IR):Mre:e instanceof qh?IR:e instanceof Date?Ire:Ore(e)?Cre:Array.isArray(e)?Pre:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Rre:zv)(t,e)}function nN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function zre(t,e){e===void 0&&(e=t,t=Ad);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(c){var u=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return s[u](c-u)}}function Lre(t){return function(){return t}}function Lv(t){return+t}var RR=[0,1];function Cr(t){return t}function Ww(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Lre(isNaN(e)?NaN:.5)}function qre(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ure(t,e,n){var r=t[0],i=t[1],s=e[0],c=e[1];return i<r?(r=Ww(i,r),s=n(c,s)):(r=Ww(r,i),s=n(s,c)),function(u){return s(r(u))}}function Vre(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)i[c]=Ww(t[c],t[c+1]),s[c]=n(e[c],e[c+1]);return function(u){var f=mm(t,u,1,r)-1;return s[f](i[f](u))}}function gm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function a0(){var t=RR,e=RR,n=Ad,r,i,s,c=Cr,u,f,h;function p(){var y=Math.min(t.length,e.length);return c!==Cr&&(c=qre(t[0],t[y-1])),u=y>2?Vre:Ure,f=h=null,g}function g(y){return y==null||isNaN(y=+y)?s:(f||(f=u(t.map(r),e,n)))(r(c(y)))}return g.invert=function(y){return c(i((h||(h=u(e,t.map(r),zv)))(y)))},g.domain=function(y){return arguments.length?(t=Array.from(y,Lv),p()):t.slice()},g.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},g.rangeRound=function(y){return e=Array.from(y),n=nN,p()},g.clamp=function(y){return arguments.length?(c=y?!0:Cr,p()):c!==Cr},g.interpolate=function(y){return arguments.length?(n=y,p()):n},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,_){return r=y,i=_,p()}}function rN(){return a0()(Cr,Cr)}function Bre(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function qv(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function hd(t){return t=qv(Math.abs(t)),t?t[1]:NaN}function $re(t,e){return function(n,r){for(var i=n.length,s=[],c=0,u=t[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),s.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=t[c=(c+1)%t.length];return s.reverse().join(e)}}function Fre(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uh(t){if(!(e=Hre.exec(t)))throw new Error("invalid format: "+t);var e;return new iN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Uh.prototype=iN.prototype;function iN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}iN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gre(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Uv;function Kre(t,e){var n=qv(t,e);if(!n)return Uv=void 0,t.toPrecision(e);var r=n[0],i=n[1],s=i-(Uv=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return s===c?r:s>c?r+new Array(s-c+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+qv(t,Math.max(0,e+s-1))[0]}function kR(t,e){var n=qv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const DR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Bre,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kR(t*100,e),r:kR,s:Kre,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function MR(t){return t}var zR=Array.prototype.map,LR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Qre(t){var e=t.grouping===void 0||t.thousands===void 0?MR:$re(zR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?MR:Fre(zR.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function h(g,y){g=Uh(g);var _=g.fill,E=g.align,w=g.sign,N=g.symbol,A=g.zero,R=g.width,O=g.comma,C=g.precision,V=g.trim,$=g.type;$==="n"?(O=!0,$="g"):DR[$]||(C===void 0&&(C=12),V=!0,$="g"),(A||_==="0"&&E==="=")&&(A=!0,_="0",E="=");var D=(y&&y.prefix!==void 0?y.prefix:"")+(N==="$"?n:N==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():""),I=(N==="$"?r:/[%p]/.test($)?c:"")+(y&&y.suffix!==void 0?y.suffix:""),k=DR[$],U=/[defgprs%]/.test($);C=C===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function q(z){var M=D,W=I,Q,H,le;if($==="c")W=k(z)+W,z="";else{z=+z;var _e=z<0||1/z<0;if(z=isNaN(z)?f:k(Math.abs(z),C),V&&(z=Gre(z)),_e&&+z==0&&w!=="+"&&(_e=!1),M=(_e?w==="("?w:u:w==="-"||w==="("?"":w)+M,W=($==="s"&&!isNaN(z)&&Uv!==void 0?LR[8+Uv/3]:"")+W+(_e&&w==="("?")":""),U){for(Q=-1,H=z.length;++Q<H;)if(le=z.charCodeAt(Q),48>le||le>57){W=(le===46?i+z.slice(Q+1):z.slice(Q))+W,z=z.slice(0,Q);break}}}O&&!A&&(z=e(z,1/0));var je=M.length+z.length+W.length,Y=je<R?new Array(R-je+1).join(_):"";switch(O&&A&&(z=e(Y+z,Y.length?R-W.length:1/0),Y=""),E){case"<":z=M+z+W+Y;break;case"=":z=M+Y+z+W;break;case"^":z=Y.slice(0,je=Y.length>>1)+M+z+W+Y.slice(je);break;default:z=Y+M+z+W;break}return s(z)}return q.toString=function(){return g+""},q}function p(g,y){var _=Math.max(-8,Math.min(8,Math.floor(hd(y)/3)))*3,E=Math.pow(10,-_),w=h((g=Uh(g),g.type="f",g),{suffix:LR[8+_/3]});return function(N){return w(E*N)}}return{format:h,formatPrefix:p}}var yg,aN,s6;Wre({thousands:",",grouping:[3],currency:["$",""]});function Wre(t){return yg=Qre(t),aN=yg.format,s6=yg.formatPrefix,yg}function Yre(t){return Math.max(0,-hd(Math.abs(t)))}function Xre(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hd(e)/3)))*3-hd(Math.abs(t)))}function Zre(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hd(e)-hd(t))+1}function o6(t,e,n,r){var i=Hw(t,e,n),s;switch(r=Uh(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Xre(i,c))&&(r.precision=s),s6(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Zre(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Yre(i))&&(r.precision=s-(r.type==="%")*2);break}}return aN(r)}function wl(t){var e=t.domain;return t.ticks=function(n){var r=e();return $w(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return o6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,c=r[i],u=r[s],f,h,p=10;for(u<c&&(h=c,c=u,u=h,h=i,i=s,s=h);p-- >0;){if(h=Fw(c,u,n),h===f)return r[i]=c,r[s]=u,e(r);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;f=h}return t},t}function l6(){var t=rN();return t.copy=function(){return gm(t,l6())},$i.apply(t,arguments),wl(t)}function c6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Lv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return c6(t).unknown(e)},t=arguments.length?Array.from(t,Lv):[0,1],wl(n)}function u6(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],c;return s<i&&(c=n,n=r,r=c,c=i,i=s,s=c),t[n]=e.floor(i),t[r]=e.ceil(s),t}function qR(t){return Math.log(t)}function UR(t){return Math.exp(t)}function Jre(t){return-Math.log(-t)}function eie(t){return-Math.exp(-t)}function tie(t){return isFinite(t)?+("1e"+t):t<0?0:t}function nie(t){return t===10?tie:t===Math.E?Math.exp:e=>Math.pow(t,e)}function rie(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function VR(t){return(e,n)=>-t(-e,n)}function sN(t){const e=t(qR,UR),n=e.domain;let r=10,i,s;function c(){return i=rie(r),s=nie(r),n()[0]<0?(i=VR(i),s=VR(s),t(Jre,eie)):t(qR,UR),e}return e.base=function(u){return arguments.length?(r=+u,c()):r},e.domain=function(u){return arguments.length?(n(u),c()):n()},e.ticks=u=>{const f=n();let h=f[0],p=f[f.length-1];const g=p<h;g&&([h,p]=[p,h]);let y=i(h),_=i(p),E,w;const N=u==null?10:+u;let A=[];if(!(r%1)&&_-y<N){if(y=Math.floor(y),_=Math.ceil(_),h>0){for(;y<=_;++y)for(E=1;E<r;++E)if(w=y<0?E/s(-y):E*s(y),!(w<h)){if(w>p)break;A.push(w)}}else for(;y<=_;++y)for(E=r-1;E>=1;--E)if(w=y>0?E/s(-y):E*s(y),!(w<h)){if(w>p)break;A.push(w)}A.length*2<N&&(A=$w(h,p,N))}else A=$w(y,_,Math.min(_-y,N)).map(s);return g?A.reverse():A},e.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Uh(f)).precision==null&&(f.trim=!0),f=aN(f)),u===1/0)return f;const h=Math.max(1,r*u/e.ticks().length);return p=>{let g=p/s(Math.round(i(p)));return g*r<r-.5&&(g*=r),g<=h?f(p):""}},e.nice=()=>n(u6(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),e}function d6(){const t=sN(a0()).domain([1,10]);return t.copy=()=>gm(t,d6()).base(t.base()),$i.apply(t,arguments),t}function BR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function $R(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function oN(t){var e=1,n=t(BR(e),$R(e));return n.constant=function(r){return arguments.length?t(BR(e=+r),$R(e)):e},wl(n)}function f6(){var t=oN(a0());return t.copy=function(){return gm(t,f6()).constant(t.constant())},$i.apply(t,arguments)}function FR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function iie(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function aie(t){return t<0?-t*t:t*t}function lN(t){var e=t(Cr,Cr),n=1;function r(){return n===1?t(Cr,Cr):n===.5?t(iie,aie):t(FR(n),FR(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},wl(e)}function cN(){var t=lN(a0());return t.copy=function(){return gm(t,cN()).exponent(t.exponent())},$i.apply(t,arguments),t}function sie(){return cN.apply(null,arguments).exponent(.5)}function HR(t){return Math.sign(t)*t*t}function oie(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function h6(){var t=rN(),e=[0,1],n=!1,r;function i(s){var c=oie(t(s));return isNaN(c)?r:n?Math.round(c):c}return i.invert=function(s){return t.invert(HR(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Lv)).map(HR)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return h6(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},$i.apply(i,arguments),wl(i)}function m6(){var t=[],e=[],n=[],r;function i(){var c=0,u=Math.max(1,e.length);for(n=new Array(u-1);++c<u;)n[c-1]=dre(t,c/u);return s}function s(c){return c==null||isNaN(c=+c)?r:e[mm(n,c)]}return s.invertExtent=function(c){var u=e.indexOf(c);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},s.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let u of c)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(il),i()},s.range=function(c){return arguments.length?(e=Array.from(c),i()):e.slice()},s.unknown=function(c){return arguments.length?(r=c,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return m6().domain(t).range(e).unknown(r)},$i.apply(s,arguments)}function p6(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function c(f){return f!=null&&f<=f?i[mm(r,f,0,n)]:s}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return c}return c.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,u()):[t,e]},c.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},c.invertExtent=function(f){var h=i.indexOf(f);return h<0?[NaN,NaN]:h<1?[t,r[0]]:h>=n?[r[n-1],e]:[r[h-1],r[h]]},c.unknown=function(f){return arguments.length&&(s=f),c},c.thresholds=function(){return r.slice()},c.copy=function(){return p6().domain([t,e]).range(i).unknown(s)},$i.apply(wl(c),arguments)}function g6(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[mm(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var c=e.indexOf(s);return[t[c-1],t[c]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return g6().domain(t).range(e).unknown(n)},$i.apply(i,arguments)}const l1=new Date,c1=new Date;function Bn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const c=i(s),u=i.ceil(s);return s-c<u-s?c:u},i.offset=(s,c)=>(e(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,u)=>{const f=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<c)||!(u>0))return f;let h;do f.push(h=new Date(+s)),e(s,u),t(s);while(h<s&&s<c);return f},i.filter=s=>Bn(c=>{if(c>=c)for(;t(c),!s(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;e(c,-1),!s(c););else for(;--u>=0;)for(;e(c,1),!s(c););}),n&&(i.count=(s,c)=>(l1.setTime(+s),c1.setTime(+c),t(l1),t(c1),Math.floor(n(l1,c1))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?c=>r(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const Vv=Bn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Vv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Bn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Vv);Vv.range;const Cs=1e3,zi=Cs*60,Os=zi*60,Vs=Os*24,uN=Vs*7,GR=Vs*30,u1=Vs*365,oc=Bn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Cs)},(t,e)=>(e-t)/Cs,t=>t.getUTCSeconds());oc.range;const dN=Bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cs)},(t,e)=>{t.setTime(+t+e*zi)},(t,e)=>(e-t)/zi,t=>t.getMinutes());dN.range;const fN=Bn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*zi)},(t,e)=>(e-t)/zi,t=>t.getUTCMinutes());fN.range;const hN=Bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cs-t.getMinutes()*zi)},(t,e)=>{t.setTime(+t+e*Os)},(t,e)=>(e-t)/Os,t=>t.getHours());hN.range;const mN=Bn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Os)},(t,e)=>(e-t)/Os,t=>t.getUTCHours());mN.range;const vm=Bn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*zi)/Vs,t=>t.getDate()-1);vm.range;const s0=Bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Vs,t=>t.getUTCDate()-1);s0.range;const v6=Bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Vs,t=>Math.floor(t/Vs));v6.range;function Vc(t){return Bn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*zi)/uN)}const o0=Vc(0),Bv=Vc(1),lie=Vc(2),cie=Vc(3),md=Vc(4),uie=Vc(5),die=Vc(6);o0.range;Bv.range;lie.range;cie.range;md.range;uie.range;die.range;function Bc(t){return Bn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/uN)}const l0=Bc(0),$v=Bc(1),fie=Bc(2),hie=Bc(3),pd=Bc(4),mie=Bc(5),pie=Bc(6);l0.range;$v.range;fie.range;hie.range;pd.range;mie.range;pie.range;const pN=Bn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());pN.range;const gN=Bn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());gN.range;const Bs=Bn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Bs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Bs.range;const $s=Bn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());$s.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});$s.range;function y6(t,e,n,r,i,s){const c=[[oc,1,Cs],[oc,5,5*Cs],[oc,15,15*Cs],[oc,30,30*Cs],[s,1,zi],[s,5,5*zi],[s,15,15*zi],[s,30,30*zi],[i,1,Os],[i,3,3*Os],[i,6,6*Os],[i,12,12*Os],[r,1,Vs],[r,2,2*Vs],[n,1,uN],[e,1,GR],[e,3,3*GR],[t,1,u1]];function u(h,p,g){const y=p<h;y&&([h,p]=[p,h]);const _=g&&typeof g.range=="function"?g:f(h,p,g),E=_?_.range(h,+p+1):[];return y?E.reverse():E}function f(h,p,g){const y=Math.abs(p-h)/g,_=XE(([,,N])=>N).right(c,y);if(_===c.length)return t.every(Hw(h/u1,p/u1,g));if(_===0)return Vv.every(Math.max(Hw(h,p,g),1));const[E,w]=c[y/c[_-1][2]<c[_][2]/y?_-1:_];return E.every(w)}return[u,f]}const[gie,vie]=y6($s,gN,l0,v6,mN,fN),[yie,bie]=y6(Bs,pN,o0,vm,hN,dN);function d1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function f1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _ie(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,c=t.shortDays,u=t.months,f=t.shortMonths,h=Kf(i),p=Qf(i),g=Kf(s),y=Qf(s),_=Kf(c),E=Qf(c),w=Kf(u),N=Qf(u),A=Kf(f),R=Qf(f),O={a:le,A:_e,b:je,B:Y,c:null,d:ZR,e:ZR,f:$ie,g:Jie,G:tae,H:Uie,I:Vie,j:Bie,L:b6,m:Fie,M:Hie,p:F,q:te,Q:tk,s:nk,S:Gie,u:Kie,U:Qie,V:Wie,w:Yie,W:Xie,x:null,X:null,y:Zie,Y:eae,Z:nae,"%":ek},C={a:ye,A:we,b:Z,B:ne,c:null,d:JR,e:JR,f:sae,g:gae,G:yae,H:rae,I:iae,j:aae,L:x6,m:oae,M:lae,p:me,q:Me,Q:tk,s:nk,S:cae,u:uae,U:dae,V:fae,w:hae,W:mae,x:null,X:null,y:pae,Y:vae,Z:bae,"%":ek},V={a:U,A:q,b:z,B:M,c:W,d:YR,e:YR,f:Mie,g:WR,G:QR,H:XR,I:XR,j:Iie,L:Die,m:Pie,M:Rie,p:k,q:Oie,Q:Lie,s:qie,S:kie,u:Nie,U:Sie,V:Aie,w:Eie,W:Tie,x:Q,X:H,y:WR,Y:QR,Z:Cie,"%":zie};O.x=$(n,O),O.X=$(r,O),O.c=$(e,O),C.x=$(n,C),C.X=$(r,C),C.c=$(e,C);function $(se,Se){return function(X){var pe=[],ke=-1,Fe=0,ot=se.length,ht,gt,mr;for(X instanceof Date||(X=new Date(+X));++ke<ot;)se.charCodeAt(ke)===37&&(pe.push(se.slice(Fe,ke)),(gt=KR[ht=se.charAt(++ke)])!=null?ht=se.charAt(++ke):gt=ht==="e"?" ":"0",(mr=Se[ht])&&(ht=mr(X,gt)),pe.push(ht),Fe=ke+1);return pe.push(se.slice(Fe,ke)),pe.join("")}}function D(se,Se){return function(X){var pe=Gf(1900,void 0,1),ke=I(pe,se,X+="",0),Fe,ot;if(ke!=X.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(Se&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(Fe=f1(Gf(pe.y,0,1)),ot=Fe.getUTCDay(),Fe=ot>4||ot===0?$v.ceil(Fe):$v(Fe),Fe=s0.offset(Fe,(pe.V-1)*7),pe.y=Fe.getUTCFullYear(),pe.m=Fe.getUTCMonth(),pe.d=Fe.getUTCDate()+(pe.w+6)%7):(Fe=d1(Gf(pe.y,0,1)),ot=Fe.getDay(),Fe=ot>4||ot===0?Bv.ceil(Fe):Bv(Fe),Fe=vm.offset(Fe,(pe.V-1)*7),pe.y=Fe.getFullYear(),pe.m=Fe.getMonth(),pe.d=Fe.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),ot="Z"in pe?f1(Gf(pe.y,0,1)).getUTCDay():d1(Gf(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(ot+5)%7:pe.w+pe.U*7-(ot+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,f1(pe)):d1(pe)}}function I(se,Se,X,pe){for(var ke=0,Fe=Se.length,ot=X.length,ht,gt;ke<Fe;){if(pe>=ot)return-1;if(ht=Se.charCodeAt(ke++),ht===37){if(ht=Se.charAt(ke++),gt=V[ht in KR?Se.charAt(ke++):ht],!gt||(pe=gt(se,X,pe))<0)return-1}else if(ht!=X.charCodeAt(pe++))return-1}return pe}function k(se,Se,X){var pe=h.exec(Se.slice(X));return pe?(se.p=p.get(pe[0].toLowerCase()),X+pe[0].length):-1}function U(se,Se,X){var pe=_.exec(Se.slice(X));return pe?(se.w=E.get(pe[0].toLowerCase()),X+pe[0].length):-1}function q(se,Se,X){var pe=g.exec(Se.slice(X));return pe?(se.w=y.get(pe[0].toLowerCase()),X+pe[0].length):-1}function z(se,Se,X){var pe=A.exec(Se.slice(X));return pe?(se.m=R.get(pe[0].toLowerCase()),X+pe[0].length):-1}function M(se,Se,X){var pe=w.exec(Se.slice(X));return pe?(se.m=N.get(pe[0].toLowerCase()),X+pe[0].length):-1}function W(se,Se,X){return I(se,e,Se,X)}function Q(se,Se,X){return I(se,n,Se,X)}function H(se,Se,X){return I(se,r,Se,X)}function le(se){return c[se.getDay()]}function _e(se){return s[se.getDay()]}function je(se){return f[se.getMonth()]}function Y(se){return u[se.getMonth()]}function F(se){return i[+(se.getHours()>=12)]}function te(se){return 1+~~(se.getMonth()/3)}function ye(se){return c[se.getUTCDay()]}function we(se){return s[se.getUTCDay()]}function Z(se){return f[se.getUTCMonth()]}function ne(se){return u[se.getUTCMonth()]}function me(se){return i[+(se.getUTCHours()>=12)]}function Me(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Se=$(se+="",O);return Se.toString=function(){return se},Se},parse:function(se){var Se=D(se+="",!1);return Se.toString=function(){return se},Se},utcFormat:function(se){var Se=$(se+="",C);return Se.toString=function(){return se},Se},utcParse:function(se){var Se=D(se+="",!0);return Se.toString=function(){return se},Se}}}var KR={"-":"",_:" ",0:"0"},er=/^\s*\d+/,xie=/^%/,wie=/[\\^$*+?|[\]().{}]/g;function xt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function jie(t){return t.replace(wie,"\\$&")}function Kf(t){return new RegExp("^(?:"+t.map(jie).join("|")+")","i")}function Qf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Eie(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Nie(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Sie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Aie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Tie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function QR(t,e,n){var r=er.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function WR(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Cie(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Oie(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Pie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function YR(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Iie(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function XR(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Rie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function kie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Die(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Mie(t,e,n){var r=er.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function zie(t,e,n){var r=xie.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Lie(t,e,n){var r=er.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function qie(t,e,n){var r=er.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ZR(t,e){return xt(t.getDate(),e,2)}function Uie(t,e){return xt(t.getHours(),e,2)}function Vie(t,e){return xt(t.getHours()%12||12,e,2)}function Bie(t,e){return xt(1+vm.count(Bs(t),t),e,3)}function b6(t,e){return xt(t.getMilliseconds(),e,3)}function $ie(t,e){return b6(t,e)+"000"}function Fie(t,e){return xt(t.getMonth()+1,e,2)}function Hie(t,e){return xt(t.getMinutes(),e,2)}function Gie(t,e){return xt(t.getSeconds(),e,2)}function Kie(t){var e=t.getDay();return e===0?7:e}function Qie(t,e){return xt(o0.count(Bs(t)-1,t),e,2)}function _6(t){var e=t.getDay();return e>=4||e===0?md(t):md.ceil(t)}function Wie(t,e){return t=_6(t),xt(md.count(Bs(t),t)+(Bs(t).getDay()===4),e,2)}function Yie(t){return t.getDay()}function Xie(t,e){return xt(Bv.count(Bs(t)-1,t),e,2)}function Zie(t,e){return xt(t.getFullYear()%100,e,2)}function Jie(t,e){return t=_6(t),xt(t.getFullYear()%100,e,2)}function eae(t,e){return xt(t.getFullYear()%1e4,e,4)}function tae(t,e){var n=t.getDay();return t=n>=4||n===0?md(t):md.ceil(t),xt(t.getFullYear()%1e4,e,4)}function nae(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xt(e/60|0,"0",2)+xt(e%60,"0",2)}function JR(t,e){return xt(t.getUTCDate(),e,2)}function rae(t,e){return xt(t.getUTCHours(),e,2)}function iae(t,e){return xt(t.getUTCHours()%12||12,e,2)}function aae(t,e){return xt(1+s0.count($s(t),t),e,3)}function x6(t,e){return xt(t.getUTCMilliseconds(),e,3)}function sae(t,e){return x6(t,e)+"000"}function oae(t,e){return xt(t.getUTCMonth()+1,e,2)}function lae(t,e){return xt(t.getUTCMinutes(),e,2)}function cae(t,e){return xt(t.getUTCSeconds(),e,2)}function uae(t){var e=t.getUTCDay();return e===0?7:e}function dae(t,e){return xt(l0.count($s(t)-1,t),e,2)}function w6(t){var e=t.getUTCDay();return e>=4||e===0?pd(t):pd.ceil(t)}function fae(t,e){return t=w6(t),xt(pd.count($s(t),t)+($s(t).getUTCDay()===4),e,2)}function hae(t){return t.getUTCDay()}function mae(t,e){return xt($v.count($s(t)-1,t),e,2)}function pae(t,e){return xt(t.getUTCFullYear()%100,e,2)}function gae(t,e){return t=w6(t),xt(t.getUTCFullYear()%100,e,2)}function vae(t,e){return xt(t.getUTCFullYear()%1e4,e,4)}function yae(t,e){var n=t.getUTCDay();return t=n>=4||n===0?pd(t):pd.ceil(t),xt(t.getUTCFullYear()%1e4,e,4)}function bae(){return"+0000"}function ek(){return"%"}function tk(t){return+t}function nk(t){return Math.floor(+t/1e3)}var ku,j6,E6;_ae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _ae(t){return ku=_ie(t),j6=ku.format,ku.parse,E6=ku.utcFormat,ku.utcParse,ku}function xae(t){return new Date(t)}function wae(t){return t instanceof Date?+t:+new Date(+t)}function vN(t,e,n,r,i,s,c,u,f,h){var p=rN(),g=p.invert,y=p.domain,_=h(".%L"),E=h(":%S"),w=h("%I:%M"),N=h("%I %p"),A=h("%a %d"),R=h("%b %d"),O=h("%B"),C=h("%Y");function V($){return(f($)<$?_:u($)<$?E:c($)<$?w:s($)<$?N:r($)<$?i($)<$?A:R:n($)<$?O:C)($)}return p.invert=function($){return new Date(g($))},p.domain=function($){return arguments.length?y(Array.from($,wae)):y().map(xae)},p.ticks=function($){var D=y();return t(D[0],D[D.length-1],$??10)},p.tickFormat=function($,D){return D==null?V:h(D)},p.nice=function($){var D=y();return(!$||typeof $.range!="function")&&($=e(D[0],D[D.length-1],$??10)),$?y(u6(D,$)):p},p.copy=function(){return gm(p,vN(t,e,n,r,i,s,c,u,f,h))},p}function jae(){return $i.apply(vN(yie,bie,Bs,pN,o0,vm,hN,dN,oc,j6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Eae(){return $i.apply(vN(gie,vie,$s,gN,l0,s0,mN,fN,oc,E6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function c0(){var t=0,e=1,n,r,i,s,c=Cr,u=!1,f;function h(g){return g==null||isNaN(g=+g)?f:c(i===0?.5:(g=(s(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e]=g,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),h):[t,e]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(y){var _,E;return arguments.length?([_,E]=y,c=g(_,E),h):[c(0),c(1)]}}return h.range=p(Ad),h.rangeRound=p(nN),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return s=g,n=g(t),r=g(e),i=n===r?0:1/(r-n),h}}function jl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function N6(){var t=wl(c0()(Cr));return t.copy=function(){return jl(t,N6())},eo.apply(t,arguments)}function S6(){var t=sN(c0()).domain([1,10]);return t.copy=function(){return jl(t,S6()).base(t.base())},eo.apply(t,arguments)}function A6(){var t=oN(c0());return t.copy=function(){return jl(t,A6()).constant(t.constant())},eo.apply(t,arguments)}function yN(){var t=lN(c0());return t.copy=function(){return jl(t,yN()).exponent(t.exponent())},eo.apply(t,arguments)}function Nae(){return yN.apply(null,arguments).exponent(.5)}function T6(){var t=[],e=Cr;function n(r){if(r!=null&&!isNaN(r=+r))return e((mm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(il),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>ure(t,s/r))},n.copy=function(){return T6(e).domain(t)},eo.apply(n,arguments)}function u0(){var t=0,e=.5,n=1,r=1,i,s,c,u,f,h=Cr,p,g=!1,y;function _(w){return isNaN(w=+w)?y:(w=.5+((w=+p(w))-s)*(r*w<r*s?u:f),h(g?Math.max(0,Math.min(1,w)):w))}_.domain=function(w){return arguments.length?([t,e,n]=w,i=p(t=+t),s=p(e=+e),c=p(n=+n),u=i===s?0:.5/(s-i),f=s===c?0:.5/(c-s),r=s<i?-1:1,_):[t,e,n]},_.clamp=function(w){return arguments.length?(g=!!w,_):g},_.interpolator=function(w){return arguments.length?(h=w,_):h};function E(w){return function(N){var A,R,O;return arguments.length?([A,R,O]=N,h=zre(w,[A,R,O]),_):[h(0),h(.5),h(1)]}}return _.range=E(Ad),_.rangeRound=E(nN),_.unknown=function(w){return arguments.length?(y=w,_):y},function(w){return p=w,i=w(t),s=w(e),c=w(n),u=i===s?0:.5/(s-i),f=s===c?0:.5/(c-s),r=s<i?-1:1,_}}function C6(){var t=wl(u0()(Cr));return t.copy=function(){return jl(t,C6())},eo.apply(t,arguments)}function O6(){var t=sN(u0()).domain([.1,1,10]);return t.copy=function(){return jl(t,O6()).base(t.base())},eo.apply(t,arguments)}function P6(){var t=oN(u0());return t.copy=function(){return jl(t,P6()).constant(t.constant())},eo.apply(t,arguments)}function bN(){var t=lN(u0());return t.copy=function(){return jl(t,bN()).exponent(t.exponent())},eo.apply(t,arguments)}function Sae(){return bN.apply(null,arguments).exponent(.5)}const ih=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:JE,scaleDiverging:C6,scaleDivergingLog:O6,scaleDivergingPow:bN,scaleDivergingSqrt:Sae,scaleDivergingSymlog:P6,scaleIdentity:c6,scaleImplicit:Gw,scaleLinear:l6,scaleLog:d6,scaleOrdinal:ZE,scalePoint:hre,scalePow:cN,scaleQuantile:m6,scaleQuantize:p6,scaleRadial:h6,scaleSequential:N6,scaleSequentialLog:S6,scaleSequentialPow:yN,scaleSequentialQuantile:T6,scaleSequentialSqrt:Nae,scaleSequentialSymlog:A6,scaleSqrt:sie,scaleSymlog:f6,scaleThreshold:g6,scaleTime:jae,scaleUtc:Eae,tickFormat:o6},Symbol.toStringTag,{value:"Module"}));var to=t=>t.chartData,I6=ce([to],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),_N=(t,e,n,r)=>r?I6(t):to(t),Aae=(t,e,n)=>n?I6(t):to(t);function Fs(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(pt(e)&&pt(n))return!0}return!1}function rk(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function R6(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(pt(n))i=n;else if(typeof n=="function")return;if(pt(r))s=r;else if(typeof r=="function")return;var c=[i,s];if(Fs(c))return c}}function Tae(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Fs(r))return rk(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,c,u;if(i==="auto")e!=null&&(c=Math.min(...e));else if(Pe(i))c=i;else if(typeof i=="function")try{e!=null&&(c=i(e?.[0]))}catch{}else if(typeof i=="string"&&mI.test(i)){var f=mI.exec(i);if(f==null||f[1]==null||e==null)c=void 0;else{var h=+f[1];c=e[0]-h}}else c=e?.[0];if(s==="auto")e!=null&&(u=Math.max(...e));else if(Pe(s))u=s;else if(typeof s=="function")try{e!=null&&(u=s(e?.[1]))}catch{}else if(typeof s=="string"&&pI.test(s)){var p=pI.exec(s);if(p==null||p[1]==null||e==null)u=void 0;else{var g=+p[1];u=e[1]+g}}else u=e?.[1];var y=[c,u];if(Fs(y))return e==null?y:rk(y,e,n)}}}var Td=1e9,Cae={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wN,Jt=!0,Vi="[DecimalError] ",pc=Vi+"Invalid argument: ",xN=Vi+"Exponent out of range: ",Cd=Math.floor,rc=Math.pow,Oae=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,di,Xn=1e7,Wt=7,k6=9007199254740991,Fv=Cd(k6/Wt),Ce={};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ce.comparedTo=Ce.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Wt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ce.dividedBy=Ce.div=function(t){return ks(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.idiv=function(t){var e=this,n=e.constructor;return $t(ks(e,new n(t),0,1),n.precision)};Ce.equals=Ce.eq=function(t){return!this.cmp(t)};Ce.exponent=function(){return Mn(this)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){return this.cmp(t)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(di))throw Error(Vi+"NaN");if(n.s<1)throw Error(Vi+(n.s?"NaN":"-Infinity"));return n.eq(di)?new r(0):(Jt=!1,e=ks(Vh(n,s),Vh(t,s),s),Jt=!0,$t(e,i))};Ce.minus=Ce.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?z6(e,t):D6(e,(t.s=-t.s,t))};Ce.modulo=Ce.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Vi+"NaN");return n.s?(Jt=!1,e=ks(n,t,0,1).times(t),Jt=!0,n.minus(e)):$t(new r(n),i)};Ce.naturalExponential=Ce.exp=function(){return M6(this)};Ce.naturalLogarithm=Ce.ln=function(){return Vh(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ce.plus=Ce.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?D6(e,t):z6(e,(t.s=-t.s,t))};Ce.precision=Ce.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(pc+t);if(e=Mn(i)+1,r=i.d.length-1,n=r*Wt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ce.squareRoot=Ce.sqrt=function(){var t,e,n,r,i,s,c,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(Vi+"NaN")}for(t=Mn(u),Jt=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=Ua(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Cd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new f(e)):r=new f(i.toString()),n=f.precision,i=c=n+3;;)if(s=r,r=s.plus(ks(u,s,c+2)).times(.5),Ua(s.d).slice(0,c)===(e=Ua(r.d)).slice(0,c)){if(e=e.slice(c-3,c+1),i==c&&e=="4999"){if($t(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(e!="9999")break;c+=4}return Jt=!0,$t(r,n)};Ce.times=Ce.mul=function(t){var e,n,r,i,s,c,u,f,h,p=this,g=p.constructor,y=p.d,_=(t=new g(t)).d;if(!p.s||!t.s)return new g(0);for(t.s*=p.s,n=p.e+t.e,f=y.length,h=_.length,f<h&&(s=y,y=_,_=s,c=f,f=h,h=c),s=[],c=f+h,r=c;r--;)s.push(0);for(r=h;--r>=0;){for(e=0,i=f+r;i>r;)u=s[i]+_[r]*y[i-r-1]+e,s[i--]=u%Xn|0,e=u/Xn|0;s[i]=(s[i]+e)%Xn|0}for(;!s[--c];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Jt?$t(t,g.precision):t};Ce.toDecimalPlaces=Ce.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ja(t,0,Td),e===void 0?e=r.rounding:Ja(e,0,8),$t(n,t+Mn(n)+1,e))};Ce.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Oc(r,!0):(Ja(t,0,Td),e===void 0?e=i.rounding:Ja(e,0,8),r=$t(new i(r),t+1,e),n=Oc(r,!0,t+1)),n};Ce.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Oc(i):(Ja(t,0,Td),e===void 0?e=s.rounding:Ja(e,0,8),r=$t(new s(i),t+Mn(i)+1,e),n=Oc(r.abs(),!1,t+Mn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ce.toInteger=Ce.toint=function(){var t=this,e=t.constructor;return $t(new e(t),Mn(t)+1,e.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(t){var e,n,r,i,s,c,u=this,f=u.constructor,h=12,p=+(t=new f(t));if(!t.s)return new f(di);if(u=new f(u),!u.s){if(t.s<1)throw Error(Vi+"Infinity");return u}if(u.eq(di))return u;if(r=f.precision,t.eq(di))return $t(u,r);if(e=t.e,n=t.d.length-1,c=e>=n,s=u.s,c){if((n=p<0?-p:p)<=k6){for(i=new f(di),e=Math.ceil(r/Wt+4),Jt=!1;n%2&&(i=i.times(u),ak(i.d,e)),n=Cd(n/2),n!==0;)u=u.times(u),ak(u.d,e);return Jt=!0,t.s<0?new f(di).div(i):$t(i,r)}}else if(s<0)throw Error(Vi+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,Jt=!1,i=t.times(Vh(u,r+h)),Jt=!0,i=M6(i),i.s=s,i};Ce.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Mn(i),r=Oc(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ja(t,1,Td),e===void 0?e=s.rounding:Ja(e,0,8),i=$t(new s(i),t,e),n=Mn(i),r=Oc(i,t<=n||n<=s.toExpNeg,t)),r};Ce.toSignificantDigits=Ce.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ja(t,1,Td),e===void 0?e=r.rounding:Ja(e,0,8)),$t(new r(n),t,e)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Mn(t),n=t.constructor;return Oc(t,e<=n.toExpNeg||e>=n.toExpPos)};function D6(t,e){var n,r,i,s,c,u,f,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Jt?$t(e,g):e;if(f=t.d,h=e.d,c=t.e,i=e.e,f=f.slice(),s=c-i,s){for(s<0?(r=f,s=-s,u=h.length):(r=h,i=c,u=f.length),c=Math.ceil(g/Wt),u=c>u?c+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=f.length,s=h.length,u-s<0&&(s=u,r=h,h=f,f=r),n=0;s;)n=(f[--s]=f[s]+h[s]+n)/Xn|0,f[s]%=Xn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return e.d=f,e.e=i,Jt?$t(e,g):e}function Ja(t,e,n){if(t!==~~t||t<e||t>n)throw Error(pc+t)}function Ua(t){var e,n,r,i=t.length-1,s="",c=t[0];if(i>0){for(s+=c,e=1;e<i;e++)r=t[e]+"",n=Wt-r.length,n&&(s+=Bo(n)),s+=r;c=t[e],r=c+"",n=Wt-r.length,n&&(s+=Bo(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var ks=(function(){function t(r,i){var s,c=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+c,r[u]=s%Xn|0,c=s/Xn|0;return c&&r.unshift(c),r}function e(r,i,s,c){var u,f;if(s!=c)f=s>c?1:-1;else for(u=f=0;u<s;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,s){for(var c=0;s--;)r[s]-=c,c=r[s]<i[s]?1:0,r[s]=c*Xn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,c){var u,f,h,p,g,y,_,E,w,N,A,R,O,C,V,$,D,I,k=r.constructor,U=r.s==i.s?1:-1,q=r.d,z=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(Vi+"Division by zero");for(f=r.e-i.e,D=z.length,V=q.length,_=new k(U),E=_.d=[],h=0;z[h]==(q[h]||0);)++h;if(z[h]>(q[h]||0)&&--f,s==null?R=s=k.precision:c?R=s+(Mn(r)-Mn(i))+1:R=s,R<0)return new k(0);if(R=R/Wt+2|0,h=0,D==1)for(p=0,z=z[0],R++;(h<V||p)&&R--;h++)O=p*Xn+(q[h]||0),E[h]=O/z|0,p=O%z|0;else{for(p=Xn/(z[0]+1)|0,p>1&&(z=t(z,p),q=t(q,p),D=z.length,V=q.length),C=D,w=q.slice(0,D),N=w.length;N<D;)w[N++]=0;I=z.slice(),I.unshift(0),$=z[0],z[1]>=Xn/2&&++$;do p=0,u=e(z,w,D,N),u<0?(A=w[0],D!=N&&(A=A*Xn+(w[1]||0)),p=A/$|0,p>1?(p>=Xn&&(p=Xn-1),g=t(z,p),y=g.length,N=w.length,u=e(g,w,y,N),u==1&&(p--,n(g,D<y?I:z,y))):(p==0&&(u=p=1),g=z.slice()),y=g.length,y<N&&g.unshift(0),n(w,g,N),u==-1&&(N=w.length,u=e(z,w,D,N),u<1&&(p++,n(w,D<N?I:z,N))),N=w.length):u===0&&(p++,w=[0]),E[h++]=p,u&&w[0]?w[N++]=q[C]||0:(w=[q[C]],N=1);while((C++<V||w[0]!==void 0)&&R--)}return E[0]||E.shift(),_.e=f,$t(_,c?s+Mn(_)+1:s)}})();function M6(t,e){var n,r,i,s,c,u,f=0,h=0,p=t.constructor,g=p.precision;if(Mn(t)>16)throw Error(xN+Mn(t));if(!t.s)return new p(di);for(Jt=!1,u=g,c=new p(.03125);t.abs().gte(.1);)t=t.times(c),h+=5;for(r=Math.log(rc(2,h))/Math.LN10*2+5|0,u+=r,n=i=s=new p(di),p.precision=u;;){if(i=$t(i.times(t),u),n=n.times(++f),c=s.plus(ks(i,n,u)),Ua(c.d).slice(0,u)===Ua(s.d).slice(0,u)){for(;h--;)s=$t(s.times(s),u);return p.precision=g,e==null?(Jt=!0,$t(s,g)):s}s=c}}function Mn(t){for(var e=t.e*Wt,n=t.d[0];n>=10;n/=10)e++;return e}function h1(t,e,n){if(e>t.LN10.sd())throw Jt=!0,n&&(t.precision=n),Error(Vi+"LN10 precision limit exceeded");return $t(new t(t.LN10),e)}function Bo(t){for(var e="";t--;)e+="0";return e}function Vh(t,e){var n,r,i,s,c,u,f,h,p,g=1,y=10,_=t,E=_.d,w=_.constructor,N=w.precision;if(_.s<1)throw Error(Vi+(_.s?"NaN":"-Infinity"));if(_.eq(di))return new w(0);if(e==null?(Jt=!1,h=N):h=e,_.eq(10))return e==null&&(Jt=!0),h1(w,h);if(h+=y,w.precision=h,n=Ua(E),r=n.charAt(0),s=Mn(_),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)_=_.times(t),n=Ua(_.d),r=n.charAt(0),g++;s=Mn(_),r>1?(_=new w("0."+n),s++):_=new w(r+"."+n.slice(1))}else return f=h1(w,h+2,N).times(s+""),_=Vh(new w(r+"."+n.slice(1)),h-y).plus(f),w.precision=N,e==null?(Jt=!0,$t(_,N)):_;for(u=c=_=ks(_.minus(di),_.plus(di),h),p=$t(_.times(_),h),i=3;;){if(c=$t(c.times(p),h),f=u.plus(ks(c,new w(i),h)),Ua(f.d).slice(0,h)===Ua(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(h1(w,h+2,N).times(s+""))),u=ks(u,new w(g),h),w.precision=N,e==null?(Jt=!0,$t(u,N)):u;u=f,i+=2}}function ik(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Cd(n/Wt),t.d=[],r=(n+1)%Wt,n<0&&(r+=Wt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Wt;r<i;)t.d.push(+e.slice(r,r+=Wt));e=e.slice(r),r=Wt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Jt&&(t.e>Fv||t.e<-Fv))throw Error(xN+n)}else t.s=0,t.e=0,t.d=[0];return t}function $t(t,e,n){var r,i,s,c,u,f,h,p,g=t.d;for(c=1,s=g[0];s>=10;s/=10)c++;if(r=e-c,r<0)r+=Wt,i=e,h=g[p=0];else{if(p=Math.ceil((r+1)/Wt),s=g.length,p>=s)return t;for(h=s=g[p],c=1;s>=10;s/=10)c++;r%=Wt,i=r-Wt+c}if(n!==void 0&&(s=rc(10,c-i-1),u=h/s%10|0,f=e<0||g[p+1]!==void 0||h%s,f=n<4?(u||f)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?h/rc(10,c-i):0:g[p-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return f?(s=Mn(t),g.length=1,e=e-s-1,g[0]=rc(10,(Wt-e%Wt)%Wt),t.e=Cd(-e/Wt)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=p,s=1,p--):(g.length=p+1,s=rc(10,Wt-r),g[p]=i>0?(h/rc(10,c-i)%rc(10,i)|0)*s:0),f)for(;;)if(p==0){(g[0]+=s)==Xn&&(g[0]=1,++t.e);break}else{if(g[p]+=s,g[p]!=Xn)break;g[p--]=0,s=1}for(r=g.length;g[--r]===0;)g.pop();if(Jt&&(t.e>Fv||t.e<-Fv))throw Error(xN+Mn(t));return t}function z6(t,e){var n,r,i,s,c,u,f,h,p,g,y=t.constructor,_=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Jt?$t(e,_):e;if(f=t.d,g=e.d,r=e.e,h=t.e,f=f.slice(),c=h-r,c){for(p=c<0,p?(n=f,c=-c,u=g.length):(n=g,r=h,u=f.length),i=Math.max(Math.ceil(_/Wt),u)+2,c>i&&(c=i,n.length=1),n.reverse(),i=c;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=g.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(f[i]!=g[i]){p=f[i]<g[i];break}c=0}for(p&&(n=f,f=g,g=n,e.s=-e.s),u=f.length,i=g.length-u;i>0;--i)f[u++]=0;for(i=g.length;i>c;){if(f[--i]<g[i]){for(s=i;s&&f[--s]===0;)f[s]=Xn-1;--f[s],f[i]+=Xn}f[i]-=g[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(e.d=f,e.e=r,Jt?$t(e,_):e):new y(0)}function Oc(t,e,n){var r,i=Mn(t),s=Ua(t.d),c=s.length;return e?(n&&(r=n-c)>0?s=s.charAt(0)+"."+s.slice(1)+Bo(r):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Bo(-i-1)+s,n&&(r=n-c)>0&&(s+=Bo(r))):i>=c?(s+=Bo(i+1-c),n&&(r=n-i-1)>0&&(s=s+"."+Bo(r))):((r=i+1)<c&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-c)>0&&(i+1===c&&(s+="."),s+=Bo(r))),t.s<0?"-"+s:s}function ak(t,e){if(t.length>e)return t.length=e,!0}function L6(t){var e,n,r;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(pc+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return ik(c,s.toString())}else if(typeof s!="string")throw Error(pc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,Oae.test(s))ik(c,s);else throw Error(pc+s)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=L6,i.config=i.set=Pae,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Pae(t){if(!t||typeof t!="object")throw Error(Vi+"Object expected");var e,n,r,i=["precision",1,Td,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Cd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(pc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(pc+n+": "+r);return this}var wN=L6(Cae);di=new wN(1);const Ct=wN;function q6(t){var e;return t===0?e=1:e=Math.floor(new Ct(t).abs().log(10).toNumber())+1,e}function U6(t,e,n){for(var r=new Ct(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var V6=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},B6=(t,e,n)=>{if(t.lte(0))return new Ct(0);var r=q6(t.toNumber()),i=new Ct(10).pow(r),s=t.div(i),c=r!==1?.05:.1,u=new Ct(Math.ceil(s.div(c).toNumber())).add(n).mul(c),f=u.mul(i);return e?new Ct(f.toNumber()):new Ct(Math.ceil(f.toNumber()))},Iae=(t,e,n)=>{var r=new Ct(1),i=new Ct(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Ct(10).pow(q6(t)-1),i=new Ct(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Ct(Math.floor(t)))}else t===0?i=new Ct(Math.floor((e-1)/2)):n||(i=new Ct(Math.floor(t)));for(var c=Math.floor((e-1)/2),u=[],f=0;f<e;f++)u.push(i.add(new Ct(f-c).mul(r)).toNumber());return u},$6=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Ct(0),tickMin:new Ct(0),tickMax:new Ct(0)};var c=B6(new Ct(n).sub(e).div(r-1),i,s),u;e<=0&&n>=0?u=new Ct(0):(u=new Ct(e).add(n).div(2),u=u.sub(new Ct(u).mod(c)));var f=Math.ceil(u.sub(e).div(c).toNumber()),h=Math.ceil(new Ct(n).sub(u).div(c).toNumber()),p=f+h+1;return p>r?$6(e,n,r,i,s+1):(p<r&&(h=n>0?h+(r-p):h,f=n>0?f:f+(r-p)),{step:c,tickMin:u.sub(new Ct(f).mul(c)),tickMax:u.add(new Ct(h).mul(c))})},Rae=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,f]=V6([n,r]);if(u===-1/0||f===1/0){var h=f===1/0?[u,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),f];return n>r?h.reverse():h}if(u===f)return Iae(u,i,s);var{step:p,tickMin:g,tickMax:y}=$6(u,f,c,s,0),_=U6(g,y.add(new Ct(.1).mul(p)),p);return n>r?_.reverse():_},kae=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=V6([r,i]);if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var f=Math.max(n,2),h=B6(new Ct(u).sub(c).div(f-1),s,0),p=[...U6(new Ct(c),new Ct(u),h),u];return s===!1&&(p=p.map(g=>Math.round(g))),r>i?p.reverse():p},F6=t=>t.rootProps.maxBarSize,Dae=t=>t.rootProps.barGap,H6=t=>t.rootProps.barCategoryGap,Mae=t=>t.rootProps.barSize,d0=t=>t.rootProps.stackOffset,G6=t=>t.rootProps.reverseStackOrder,jN=t=>t.options.chartName,EN=t=>t.rootProps.syncId,K6=t=>t.rootProps.syncMethod,NN=t=>t.options.eventEmitter,Zn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Zl={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},ka={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},f0=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function h0(t,e,n){if(n!=="auto")return n;if(t!=null)return Xs(t,e)?"category":"number"}function sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(n),!0).forEach(function(r){zae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zae(t,e,n){return(e=Lae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lae(t){var e=qae(t,"string");return typeof e=="symbol"?e:e+""}function qae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ok={allowDataOverflow:Zl.allowDataOverflow,allowDecimals:Zl.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zl.angleAxisId,includeHidden:!1,name:void 0,reversed:Zl.reversed,scale:Zl.scale,tick:Zl.tick,tickCount:void 0,ticks:void 0,type:Zl.type,unit:void 0},lk={allowDataOverflow:ka.allowDataOverflow,allowDecimals:ka.allowDecimals,allowDuplicatedCategory:ka.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ka.radiusAxisId,includeHidden:ka.includeHidden,name:void 0,reversed:ka.reversed,scale:ka.scale,tick:ka.tick,tickCount:ka.tickCount,ticks:void 0,type:ka.type,unit:void 0},Uae=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},SN=ce([Uae,k3],(t,e)=>{var n;if(t!=null)return t;var r=(n=h0(e,"angleAxis",ok.type))!==null&&n!==void 0?n:"category";return Hv(Hv({},ok),{},{type:r})}),Vae=(t,e)=>t.polarAxis.radiusAxis[e],AN=ce([Vae,k3],(t,e)=>{var n;if(t!=null)return t;var r=(n=h0(e,"radiusAxis",lk.type))!==null&&n!==void 0?n:"category";return Hv(Hv({},lk),{},{type:r})}),m0=t=>t.polarOptions,TN=ce([Zs,Js,Jn],Lne),Q6=ce([m0,TN],(t,e)=>{if(t!=null)return fa(t.innerRadius,e,0)}),W6=ce([m0,TN],(t,e)=>{if(t!=null)return fa(t.outerRadius,e,e*.8)}),Bae=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Y6=ce([m0],Bae);ce([SN,Y6],f0);var X6=ce([TN,Q6,W6],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ce([AN,X6],f0);var Z6=ce([Ot,m0,Q6,W6,Zs,Js],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:c,cy:u,startAngle:f,endAngle:h}=e;return{cx:fa(c,i,i/2),cy:fa(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:h,clockWise:!1}}}),tr=(t,e)=>e,p0=(t,e,n)=>n;function CN(t){return t?.id}function J6(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,c=new Map;return t.forEach(u=>{var f,h=(f=u.data)!==null&&f!==void 0?f:r;if(!(h==null||h.length===0)){var p=CN(u);h.forEach((g,y)=>{var _=s==null||i?y:String(Dn(g,s,null)),E=Dn(g,u.dataKey,0),w;c.has(_)?w=c.get(_):w={},Object.assign(w,{[p]:E}),c.set(_,w)})}}),Array.from(c.values())}function g0(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var v0=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function y0(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function $ae(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var nr=t=>{var e=Ot(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Od=t=>t.tooltip.settings.axisId;function Fae(t){if(t in ih)return ih[t]();var e="scale".concat(lm(t));if(e in ih)return ih[e]()}function ck(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(s){function c(){return s.apply(this,arguments)}return c.toString=function(){return s.toString()},c})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(s){var c=i[0],u=i[1];return c<=u?s>=c&&s<=u:s>=u&&s<=c},bandwidth:n?()=>n.call(t):void 0,ticks:e?s=>e.call(t,s):void 0,map:(s,c)=>{var u=t(s);if(u!=null){if(t.bandwidth&&c!==null&&c!==void 0&&c.position){var f=t.bandwidth();switch(c.position){case"middle":u+=f/2;break;case"end":u+=f;break}}return u}}}}function uk(t,e,n){if(typeof t=="function")return ck(t.copy().domain(e).range(n));if(t!=null){var r=Fae(t);if(r!=null)return r.domain(e).range(n),ck(r)}}var Hae=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Fs(e)){for(var n,r,i=0;i<e.length;i++){var s=e[i];pt(s)&&((n===void 0||s<n)&&(n=s),(r===void 0||s>r)&&(r=s))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(n),!0).forEach(function(r){Gae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gae(t,e,n){return(e=Kae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kae(t){var e=Qae(t,"string");return typeof e=="symbol"?e:e+""}function Qae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yw=[0,"auto"],Qn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},e5=(t,e)=>t.cartesianAxis.xAxis[e],no=(t,e)=>{var n=e5(t,e);return n??Qn},Wn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Yw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:dm},t5=(t,e)=>t.cartesianAxis.yAxis[e],ro=(t,e)=>{var n=t5(t,e);return n??Wn},Wae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ON=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Wae},Mr=(t,e,n)=>{switch(e){case"xAxis":return no(t,n);case"yAxis":return ro(t,n);case"zAxis":return ON(t,n);case"angleAxis":return SN(t,n);case"radiusAxis":return AN(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Yae=(t,e,n)=>{switch(e){case"xAxis":return no(t,n);case"yAxis":return ro(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ym=(t,e,n)=>{switch(e){case"xAxis":return no(t,n);case"yAxis":return ro(t,n);case"angleAxis":return SN(t,n);case"radiusAxis":return AN(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},n5=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function r5(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var b0=t=>t.graphicalItems.cartesianItems,Xae=ce([tr,p0],r5),i5=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),bm=ce([b0,Mr,Xae],i5,{memoizeOptions:{resultEqualityCheck:y0}}),a5=ce([bm],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(g0)),s5=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Zae=ce([bm],s5),o5=t=>t.map(e=>e.data).filter(Boolean).flat(1),Jae=ce([bm],o5,{memoizeOptions:{resultEqualityCheck:y0}}),l5=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},PN=ce([Jae,_N],l5),c5=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Dn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Dn(i,r)}))):t.map(r=>({value:r})),_0=ce([PN,Mr,bm],c5);function u5(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function qg(t){if(Xa(t)||t instanceof Date){var e=Number(t);if(pt(e))return e}}function fk(t){if(Array.isArray(t)){var e=[qg(t[0]),qg(t[1])];return Fs(e)?e:void 0}var n=qg(t);if(n!=null)return[n,n]}function Hs(t){return t.map(qg).filter(Xr)}function ese(t,e,n){return!n||typeof e!="number"||Ya(e)?[]:n.length?Hs(n.flatMap(r=>{var i=Dn(t,r.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!pt(s)||!pt(c)))return[e-s,e+c]})):[]}var $n=t=>{var e=nr(t),n=Od(t);return ym(t,e,n)},_m=ce([$n],t=>t?.dataKey),tse=ce([a5,_N,$n],J6),d5=(t,e,n,r)=>{var i={},s=e.reduce((c,u)=>{if(u.stackId==null)return c;var f=c[u.stackId];return f==null&&(f=[]),f.push(u),c[u.stackId]=f,c},i);return Object.fromEntries(Object.entries(s).map(c=>{var[u,f]=c,h=r?[...f].reverse():f,p=h.map(CN);return[u,{stackedData:Cee(t,p,n),graphicalItems:h}]}))},Xw=ce([tse,a5,d0,G6],d5),f5=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var c=kee(t,i,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},nse=ce([Mr],t=>t.allowDataOverflow),IN=t=>{var e;if(t==null||!("domain"in t))return Yw;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Hs(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:Yw},h5=ce([Mr],IN),m5=ce([h5,nse],R6),rse=ce([Xw,to,tr,m5],f5,{memoizeOptions:{resultEqualityCheck:v0}}),RN=t=>t.errorBars,ise=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>u5(n,r)),Kv=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),u=Math.max(...s);return[c,u]}},p5=(t,e,n,r,i)=>{var s,c;if(n.length>0&&t.forEach(u=>{n.forEach(f=>{var h,p,g=(h=r[f.id])===null||h===void 0?void 0:h.filter(A=>u5(i,A)),y=Dn(u,(p=e.dataKey)!==null&&p!==void 0?p:f.dataKey),_=ese(u,y,g);if(_.length>=2){var E=Math.min(..._),w=Math.max(..._);(s==null||E<s)&&(s=E),(c==null||w>c)&&(c=w)}var N=fk(y);N!=null&&(s=s==null?N[0]:Math.min(s,N[0]),c=c==null?N[1]:Math.max(c,N[1]))})}),e?.dataKey!=null&&t.forEach(u=>{var f=fk(Dn(u,e.dataKey));f!=null&&(s=s==null?f[0]:Math.min(s,f[0]),c=c==null?f[1]:Math.max(c,f[1]))}),pt(s)&&pt(c))return[s,c]},ase=ce([PN,Mr,Zae,RN,tr],p5,{memoizeOptions:{resultEqualityCheck:v0}});function sse(t){var{value:e}=t;if(Xa(e)||e instanceof Date)return e}var ose=(t,e,n)=>{var r=t.map(sse).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&PL(r))?Z3(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},g5=t=>t.referenceElements.dots,Pd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),lse=ce([g5,tr,p0],Pd),v5=t=>t.referenceElements.areas,cse=ce([v5,tr,p0],Pd),y5=t=>t.referenceElements.lines,use=ce([y5,tr,p0],Pd),b5=(t,e)=>{if(t!=null){var n=Hs(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},dse=ce(lse,tr,b5),_5=(t,e)=>{if(t!=null){var n=Hs(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},fse=ce([cse,tr],_5);function hse(t){var e;if(t.x!=null)return Hs([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Hs(n)}function mse(t){var e;if(t.y!=null)return Hs([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Hs(n)}var x5=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?hse(r):mse(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},pse=ce([use,tr],x5),gse=ce(dse,pse,fse,(t,e,n)=>Kv(t,n,e)),w5=(t,e,n,r,i,s,c,u)=>{if(n!=null)return n;var f=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=f?Kv(r,s,i):Kv(s,i);return Tae(e,h,t.allowDataOverflow)},vse=ce([Mr,h5,m5,rse,ase,gse,Ot,tr],w5,{memoizeOptions:{resultEqualityCheck:v0}}),yse=[0,1],j5=(t,e,n,r,i,s,c)=>{if(!((t==null||n==null||n.length===0)&&c===void 0)){var{dataKey:u,type:f}=t,h=Xs(e,s);if(h&&u==null){var p;return Z3(0,(p=n?.length)!==null&&p!==void 0?p:0)}return f==="category"?ose(r,t,h):i==="expand"?yse:c}},kN=ce([Mr,Ot,PN,_0,d0,tr,vse],j5);function bse(t){return t in ih}var E5=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var s="scale".concat(lm(r));return bse(s)?s:"point"}}},Id=ce([Mr,n5,jN],E5);function DN(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?uk(t.scale,n,r):uk(e,n,r)}var N5=(t,e,n)=>{var r=IN(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Fs(t))return Rae(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Fs(t))return kae(t,e.tickCount,e.allowDecimals)}},MN=ce([kN,ym,Id],N5),S5=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Fs(e)&&Array.isArray(n)&&n.length>0){var i,s,c=e[0],u=(i=n[0])!==null&&i!==void 0?i:0,f=e[1],h=(s=n[n.length-1])!==null&&s!==void 0?s:0;return[Math.min(c,u),Math.max(f,h)]}return e},_se=ce([Mr,kN,MN,tr],S5),xse=ce(_0,Mr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Hs(t.map(g=>g.value))).sort((g,y)=>g-y),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var c=s-i;if(c===0)return 1/0;for(var u=0;u<r.length-1;u++){var f=r[u],h=r[u+1];if(!(f==null||h==null)){var p=h-f;n=Math.min(n,p)}}return n/c}}),A5=ce(xse,Ot,H6,Jn,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!pt(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var c=fa(n,t*s),u=t*s/2;return u-c-(u-c)/s*c}return 0}),wse=(t,e,n)=>{var r=no(t,e);return r==null||typeof r.padding!="string"?0:A5(t,"xAxis",e,n,r.padding)},jse=(t,e,n)=>{var r=ro(t,e);return r==null||typeof r.padding!="string"?0:A5(t,"yAxis",e,n,r.padding)},Ese=ce(no,wse,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Nse=ce(ro,jse,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Sse=ce([Jn,Ese,Xy,Yy,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),Ase=ce([Jn,Ot,Nse,Xy,Yy,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:c}=i;return s?[r.height-c.bottom,c.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),xm=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Sse(t,n,r);case"yAxis":return Ase(t,n,r);case"zAxis":return(i=ON(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Y6(t);case"radiusAxis":return X6(t,n);default:return}},T5=ce([Mr,xm],f0),Tse=ce([Id,_se],Hae),x0=ce([Mr,Id,Tse,T5],DN);ce([bm,RN,tr],ise);function C5(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var w0=(t,e)=>e,j0=(t,e,n)=>n,Cse=ce(Qy,w0,j0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(C5)),Ose=ce(Wy,w0,j0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(C5)),O5=(t,e)=>({width:t.width,height:e.height}),Pse=(t,e)=>{var n=typeof e.width=="number"?e.width:dm;return{width:n,height:t.height}},P5=ce(Jn,no,O5),Ise=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Rse=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},kse=ce(Js,Jn,Cse,w0,j0,(t,e,n,r,i)=>{var s={},c;return n.forEach(u=>{var f=O5(e,u);c==null&&(c=Ise(e,r,t));var h=r==="top"&&!i||r==="bottom"&&i;s[u.id]=c-Number(h)*f.height,c+=(h?-1:1)*f.height}),s}),Dse=ce(Zs,Jn,Ose,w0,j0,(t,e,n,r,i)=>{var s={},c;return n.forEach(u=>{var f=Pse(e,u);c==null&&(c=Rse(e,r,t));var h=r==="left"&&!i||r==="right"&&i;s[u.id]=c-Number(h)*f.width,c+=(h?-1:1)*f.width}),s}),Mse=(t,e)=>{var n=no(t,e);if(n!=null)return kse(t,n.orientation,n.mirror)},zse=ce([Jn,no,Mse,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Lse=(t,e)=>{var n=ro(t,e);if(n!=null)return Dse(t,n.orientation,n.mirror)},qse=ce([Jn,ro,Lse,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),I5=ce(Jn,ro,(t,e)=>{var n=typeof e.width=="number"?e.width:dm;return{width:n,height:t.height}}),hk=(t,e,n)=>{switch(e){case"xAxis":return P5(t,n).width;case"yAxis":return I5(t,n).height;default:return}},R5=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=n,u=Xs(t,r),f=e.map(h=>h.value);if(c&&u&&s==="category"&&i&&PL(f))return f}},zN=ce([Ot,_0,Mr,tr],R5),k5=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,c=Xs(t,r);if(c&&(i==="number"||s!=="auto"))return e.map(u=>u.value)}},LN=ce([Ot,_0,ym,tr],k5),mk=ce([Ot,Yae,Id,x0,zN,LN,xm,MN,tr],(t,e,n,r,i,s,c,u,f)=>{if(e!=null){var h=Xs(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:n,scale:r}}}),Use=(t,e,n,r,i,s,c,u,f)=>{if(!(e==null||r==null)){var h=Xs(t,f),{type:p,ticks:g,tickCount:y}=e,_=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,E=p==="category"&&r.bandwidth?r.bandwidth()/_:0;E=f==="angleAxis"&&s!=null&&s.length>=2?Yr(s[0]-s[1])*2*E:E;var w=g||i;return w?w.map((N,A)=>{var R=c?c.indexOf(N):N,O=r.map(R);return pt(O)?{index:A,coordinate:O+E,value:N,offset:E}:null}).filter(Xr):h&&u?u.map((N,A)=>{var R=r.map(N);return pt(R)?{coordinate:R+E,value:N,index:A,offset:E}:null}).filter(Xr):r.ticks?r.ticks(y).map((N,A)=>{var R=r.map(N);return pt(R)?{coordinate:R+E,value:N,index:A,offset:E}:null}).filter(Xr):r.domain().map((N,A)=>{var R=r.map(N);return pt(R)?{coordinate:R+E,value:c?c[N]:N,index:A,offset:E}:null}).filter(Xr)}},D5=ce([Ot,ym,Id,x0,MN,xm,zN,LN,tr],Use),Vse=(t,e,n,r,i,s,c)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=Xs(t,c),{tickCount:f}=e,h=0;return h=c==="angleAxis"&&r?.length>=2?Yr(r[0]-r[1])*2*h:h,u&&s?s.map((p,g)=>{var y=n.map(p);return pt(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(Xr):n.ticks?n.ticks(f).map((p,g)=>{var y=n.map(p);return pt(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(Xr):n.domain().map((p,g)=>{var y=n.map(p);return pt(y)?{coordinate:y+h,value:i?i[p]:p,index:g,offset:h}:null}).filter(Xr)}},ml=ce([Ot,ym,x0,xm,zN,LN,tr],Vse),pl=ce(Mr,x0,(t,e)=>{if(!(t==null||e==null))return Gv(Gv({},t),{},{scale:e})}),Bse=ce([Mr,Id,kN,T5],DN);ce((t,e,n)=>ON(t,n),Bse,(t,e)=>{if(!(t==null||e==null))return Gv(Gv({},t),{},{scale:e})});var $se=ce([Ot,Qy,Wy],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),M5=t=>t.options.defaultTooltipEventType,z5=t=>t.options.validateTooltipEventTypes;function L5(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function qN(t,e){var n=M5(t),r=z5(t);return L5(e,n,r)}function Fse(t){return ze(e=>qN(e,t))}var q5=(t,e)=>{var n,r=Number(e);if(!(Ya(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Hse=t=>t.tooltip.settings,Wo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Gse={itemInteraction:{click:Wo,hover:Wo},axisInteraction:{click:Wo,hover:Wo},keyboardInteraction:Wo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},U5=Jr({name:"tooltip",initialState:Gse,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Zt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=la(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Zt()},removeTooltipEntrySettings:{reducer(t,e){var n=la(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Zt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Kse,replaceTooltipEntrySettings:Qse,removeTooltipEntrySettings:Wse,setTooltipSettingsState:Yse,setActiveMouseOverItemIndex:V5,mouseLeaveItem:Xse,mouseLeaveChart:B5,setActiveClickItemIndex:Zse,setMouseOverAxisIndex:$5,setMouseClickAxisIndex:Jse,setSyncInteraction:Zw,setKeyboardInteraction:Jw}=U5.actions,eoe=U5.reducer;function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(n),!0).forEach(function(r){toe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function toe(t,e,n){return(e=noe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function noe(t){var e=roe(t,"string");return typeof e=="symbol"?e:e+""}function roe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ioe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function aoe(t){return t.index!=null}var F5=(t,e,n,r)=>{if(e==null)return Wo;var i=ioe(t,e,n);if(i==null)return Wo;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(aoe(i)){if(s)return bg(bg({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return bg(bg({},Wo),{},{coordinate:i.coordinate})};function soe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function ooe(t,e){var n=soe(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),c=Math.max(r,i);return n>=s&&n<=c}function loe(t,e,n){if(n==null||e==null)return!0;var r=Dn(t,e);return r==null||!Fs(n)?!0:ooe(r,n)}var UN=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var s=Number(i);if(!pt(s))return i;var c=0,u=1/0;e.length>0&&(u=e.length-1);var f=Math.max(c,Math.min(s,u)),h=e[f];return h==null||loe(h,n,r)?String(f):null},H5=(t,e,n,r,i,s,c)=>{if(s!=null){var u=c[0],f=u?.getPosition(s);if(f!=null)return f;var h=i?.[Number(s)];if(h)return n==="horizontal"?{x:h.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:h.coordinate}}},G5=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},K5=t=>t.options.tooltipPayloadSearcher,Rd=t=>t.tooltip;function gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gk(Object(n),!0).forEach(function(r){coe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function coe(t,e,n){return(e=uoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uoe(t){var e=doe(t,"string");return typeof e=="symbol"?e:e+""}function doe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function foe(t,e){return t??e}var Q5=(t,e,n,r,i,s,c)=>{if(!(e==null||s==null)){var{chartData:u,computedData:f,dataStartIndex:h,dataEndIndex:p}=n,g=[];return t.reduce((y,_)=>{var E,{dataDefinedOnItem:w,settings:N}=_,A=foe(w,u),R=Array.isArray(A)?j3(A,h,p):A,O=(E=N?.dataKey)!==null&&E!==void 0?E:r,C=N?.nameKey,V;if(r&&Array.isArray(R)&&!Array.isArray(R[0])&&c==="axis"?V=IL(R,r,i):V=s(R,e,f,C),Array.isArray(V))V.forEach(D=>{var I=vk(vk({},N),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});y.push(gI({tooltipEntrySettings:I,dataKey:D.dataKey,payload:D.payload,value:Dn(D.payload,D.dataKey),name:D.name}))});else{var $;y.push(gI({tooltipEntrySettings:N,dataKey:O,payload:V,value:Dn(V,O),name:($=Dn(V,C))!==null&&$!==void 0?$:N?.name}))}return y},g)}},VN=ce([$n,n5,jN],E5),hoe=ce([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),moe=ce([nr,Od],r5),kd=ce([hoe,$n,moe],i5,{memoizeOptions:{resultEqualityCheck:y0}}),poe=ce([kd],t=>t.filter(g0)),goe=ce([kd],o5,{memoizeOptions:{resultEqualityCheck:y0}}),Dd=ce([goe,to],l5),voe=ce([poe,to,$n],J6),BN=ce([Dd,$n,kd],c5),W5=ce([$n],IN),yoe=ce([$n],t=>t.allowDataOverflow),Y5=ce([W5,yoe],R6),boe=ce([kd],t=>t.filter(g0)),_oe=ce([voe,boe,d0,G6],d5),xoe=ce([_oe,to,nr,Y5],f5),woe=ce([kd],s5),joe=ce([Dd,$n,woe,RN,nr],p5,{memoizeOptions:{resultEqualityCheck:v0}}),Eoe=ce([g5,nr,Od],Pd),Noe=ce([Eoe,nr],b5),Soe=ce([v5,nr,Od],Pd),Aoe=ce([Soe,nr],_5),Toe=ce([y5,nr,Od],Pd),Coe=ce([Toe,nr],x5),Ooe=ce([Noe,Coe,Aoe],Kv),Poe=ce([$n,W5,Y5,xoe,joe,Ooe,Ot,nr],w5),wm=ce([$n,Ot,Dd,BN,d0,nr,Poe],j5),Ioe=ce([wm,$n,VN],N5),Roe=ce([$n,wm,Ioe,nr],S5),X5=t=>{var e=nr(t),n=Od(t),r=!1;return xm(t,e,n,r)},Z5=ce([$n,X5],f0),J5=ce([$n,VN,Roe,Z5],DN),koe=ce([Ot,BN,$n,nr],R5),Doe=ce([Ot,BN,$n,nr],k5),Moe=(t,e,n,r,i,s,c,u)=>{if(e){var{type:f}=e,h=Xs(t,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/p:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?Yr(i[0]-i[1])*2*g:g,h&&c?c.map((y,_)=>{var E=r.map(y);return pt(E)?{coordinate:E+g,value:y,index:_,offset:g}:null}).filter(Xr):r.domain().map((y,_)=>{var E=r.map(y);return pt(E)?{coordinate:E+g,value:s?s[y]:y,index:_,offset:g}:null}).filter(Xr)}}},io=ce([Ot,$n,VN,J5,X5,koe,Doe,nr],Moe),$N=ce([M5,z5,Hse],(t,e,n)=>L5(n.shared,t,e)),eq=t=>t.tooltip.settings.trigger,FN=t=>t.tooltip.settings.defaultIndex,jm=ce([Rd,$N,eq,FN],F5),Pc=ce([jm,Dd,_m,wm],UN),tq=ce([io,Pc],q5),nq=ce([jm],t=>{if(t)return t.dataKey});ce([jm],t=>{if(t)return t.graphicalItemId});var rq=ce([Rd,$N,eq,FN],G5),zoe=ce([Zs,Js,Ot,Jn,io,FN,rq],H5),Loe=ce([jm,zoe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),qoe=ce([jm],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),Uoe=ce([rq,Pc,to,_m,tq,K5,$N],Q5),Voe=ce([Uoe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yk(Object(n),!0).forEach(function(r){Boe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Boe(t,e,n){return(e=$oe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $oe(t){var e=Foe(t,"string");return typeof e=="symbol"?e:e+""}function Foe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hoe=()=>ze($n),Goe=()=>{var t=Hoe(),e=ze(io),n=ze(J5);return dd(!t||!n?void 0:bk(bk({},t),{},{scale:n}),e)};function _k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Du(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(n),!0).forEach(function(r){Koe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Koe(t,e,n){return(e=Qoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qoe(t){var e=Woe(t,"string");return typeof e=="symbol"?e:e+""}function Woe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yoe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Xoe=(t,e,n,r)=>{var i=e.find(h=>h&&h.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:c}=r;return Du(Du(Du({},r),fr(r.cx,r.cy,c,s)),{},{angle:s,radius:c})}var u=i.coordinate,{angle:f}=r;return Du(Du(Du({},r),fr(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Zoe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var iq=(t,e,n,r,i)=>{var s,c=(s=e?.length)!==null&&s!==void 0?s:0;if(c<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var f,h,p,g,y,_=u>0?(f=n[u-1])===null||f===void 0?void 0:f.coordinate:(h=n[c-1])===null||h===void 0?void 0:h.coordinate,E=(p=n[u])===null||p===void 0?void 0:p.coordinate,w=u>=c-1?(g=n[0])===null||g===void 0?void 0:g.coordinate:(y=n[u+1])===null||y===void 0?void 0:y.coordinate,N=void 0;if(!(_==null||E==null||w==null))if(Yr(E-_)!==Yr(w-E)){var A=[];if(Yr(w-E)===Yr(i[1]-i[0])){N=w;var R=E+i[1]-i[0];A[0]=Math.min(R,(R+_)/2),A[1]=Math.max(R,(R+_)/2)}else{N=_;var O=w+i[1]-i[0];A[0]=Math.min(E,(O+E)/2),A[1]=Math.max(E,(O+E)/2)}var C=[Math.min(E,(N+E)/2),Math.max(E,(N+E)/2)];if(t>C[0]&&t<=C[1]||t>=A[0]&&t<=A[1]){var V;return(V=n[u])===null||V===void 0?void 0:V.index}}else{var $=Math.min(_,w),D=Math.max(_,w);if(t>($+E)/2&&t<=(D+E)/2){var I;return(I=n[u])===null||I===void 0?void 0:I.index}}}else if(e)for(var k=0;k<c;k++){var U=e[k];if(U!=null){var q=e[k+1],z=e[k-1];if(k===0&&q!=null&&t<=(U.coordinate+q.coordinate)/2||k===c-1&&z!=null&&t>(U.coordinate+z.coordinate)/2||k>0&&k<c-1&&z!=null&&q!=null&&t>(U.coordinate+z.coordinate)/2&&t<=(U.coordinate+q.coordinate)/2)return U.index}}return-1},Joe=()=>ze(jN),HN=(t,e)=>e,aq=(t,e,n)=>n,GN=(t,e,n,r)=>r,ele=ce(io,t=>zy(t,e=>e.coordinate)),KN=ce([Rd,HN,aq,GN],F5),QN=ce([KN,Dd,_m,wm],UN),tle=(t,e,n)=>{if(e!=null){var r=Rd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},sq=ce([Rd,HN,aq,GN],G5),Qv=ce([Zs,Js,Ot,Jn,io,GN,sq],H5),nle=ce([KN,Qv],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),oq=ce([io,QN],q5),rle=ce([sq,QN,to,_m,oq,K5,HN],Q5),ile=ce([KN,QN],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),ale=(t,e,n,r,i,s,c)=>{if(!(!t||!n||!r||!i)&&Zoe(t,c)){var u=Dee(t,e),f=iq(u,s,i,n,r),h=Yoe(e,i,f,t);return{activeIndex:String(f),activeCoordinate:h}}},sle=(t,e,n,r,i,s,c)=>{if(!(!t||!r||!i||!s||!n)){var u=$ne(t,n);if(u){var f=Mee(u,e),h=iq(f,c,s,r,i),p=Xoe(e,s,h,u);return{activeIndex:String(h),activeCoordinate:p}}}},ole=(t,e,n,r,i,s,c,u)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?ale(t,e,r,i,s,c,u):sle(t,e,n,r,i,s,c)},lle=ce(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),cle=ce(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Zn)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:$ae}});function xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(n),!0).forEach(function(r){ule(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ule(t,e,n){return(e=dle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dle(t){var e=fle(t,"string");return typeof e=="symbol"?e:e+""}function fle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hle={},mle={zIndexMap:Object.values(Zn).reduce((t,e)=>wk(wk({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),hle)},ple=new Set(Object.values(Zn));function gle(t){return ple.has(t)}var lq=Jr({name:"zIndex",initialState:mle,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Zt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!gle(n)&&delete t.zIndexMap[n])},prepare:Zt()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Zt()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Zt()}}}),{registerZIndexPortal:vle,unregisterZIndexPortal:yle,registerZIndexPortalElement:ble,unregisterZIndexPortalElement:_le}=lq.actions,xle=lq.reducer;function Fi(t){var{zIndex:e,children:n}=t,r=mte(),i=r&&e!==void 0&&e!==0,s=Er(),c=jn();j.useLayoutEffect(()=>i?(c(vle({zIndex:e})),()=>{c(yle({zIndex:e}))}):qc,[c,e,i]);var u=ze(f=>lle(f,e,s));return i?u?KD.createPortal(n,u):null:n}function ej(){return ej=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ej.apply(null,arguments)}function jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _g(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jk(Object(n),!0).forEach(function(r){wle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wle(t,e,n){return(e=jle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jle(t){var e=Ele(t,"string");return typeof e=="symbol"?e:e+""}function Ele(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nle(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return j.isValidElement(e)?j.cloneElement(e,r):j.createElement(n,r)}function Sle(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:c,layout:u,cursor:f,tooltipEventType:h,chartName:p}=t,g=n,y=r,_=i;if(!f||!g||p!=="ScatterChart"&&h!=="axis")return null;var E,w,N;if(p==="ScatterChart")E=g,w=nne,N=Zn.cursorLine;else if(p==="BarChart")E=rne(u,g,s,c),w=Q3,N=Zn.cursorRectangle;else if(u==="radial"&&DL(g)){var{cx:A,cy:R,radius:O,startAngle:C,endAngle:V}=W3(g);E={cx:A,cy:R,startAngle:C,endAngle:V,innerRadius:O,outerRadius:O},w=X3,N=Zn.cursorLine}else E={points:Kne(u,g,s)},w=$3,N=Zn.cursorLine;var $=typeof f=="object"&&"className"in f?f.className:void 0,D=_g(_g(_g(_g({stroke:"#ccc",pointerEvents:"none"},s),E),om(f)),{},{payload:y,payloadIndex:_,className:Ut("recharts-tooltip-cursor",$)});return j.createElement(Fi,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:N},j.createElement(Nle,{cursor:f,cursorComp:w,cursorProps:D}))}function Ale(t){var e=Goe(),n=O3(),r=Uc(),i=Joe();return e==null||n==null||r==null||i==null?null:j.createElement(Sle,ej({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var cq=j.createContext(null),Tle=()=>j.useContext(cq),m1={exports:{}},Ek;function Cle(){return Ek||(Ek=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function s(f,h,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var _=new i(p,g||f,y),E=n?n+h:h;return f._events[E]?f._events[E].fn?f._events[E]=[f._events[E],_]:f._events[E].push(_):(f._events[E]=_,f._eventsCount++),f}function c(f,h){--f._eventsCount===0?f._events=new r:delete f._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)e.call(p,g)&&h.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=n?n+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,_=g.length,E=new Array(_);y<_;y++)E[y]=g[y].fn;return E},u.prototype.listenerCount=function(h){var p=n?n+h:h,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(h,p,g,y,_,E){var w=n?n+h:h;if(!this._events[w])return!1;var N=this._events[w],A=arguments.length,R,O;if(N.fn){switch(N.once&&this.removeListener(h,N.fn,void 0,!0),A){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,p),!0;case 3:return N.fn.call(N.context,p,g),!0;case 4:return N.fn.call(N.context,p,g,y),!0;case 5:return N.fn.call(N.context,p,g,y,_),!0;case 6:return N.fn.call(N.context,p,g,y,_,E),!0}for(O=1,R=new Array(A-1);O<A;O++)R[O-1]=arguments[O];N.fn.apply(N.context,R)}else{var C=N.length,V;for(O=0;O<C;O++)switch(N[O].once&&this.removeListener(h,N[O].fn,void 0,!0),A){case 1:N[O].fn.call(N[O].context);break;case 2:N[O].fn.call(N[O].context,p);break;case 3:N[O].fn.call(N[O].context,p,g);break;case 4:N[O].fn.call(N[O].context,p,g,y);break;default:if(!R)for(V=1,R=new Array(A-1);V<A;V++)R[V-1]=arguments[V];N[O].fn.apply(N[O].context,R)}}return!0},u.prototype.on=function(h,p,g){return s(this,h,p,g,!1)},u.prototype.once=function(h,p,g){return s(this,h,p,g,!0)},u.prototype.removeListener=function(h,p,g,y){var _=n?n+h:h;if(!this._events[_])return this;if(!p)return c(this,_),this;var E=this._events[_];if(E.fn)E.fn===p&&(!y||E.once)&&(!g||E.context===g)&&c(this,_);else{for(var w=0,N=[],A=E.length;w<A;w++)(E[w].fn!==p||y&&!E[w].once||g&&E[w].context!==g)&&N.push(E[w]);N.length?this._events[_]=N.length===1?N[0]:N:c(this,_)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&c(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(m1)),m1.exports}var Ole=Cle();const Ple=es(Ole);var Bh=new Ple,tj="recharts.syncEvent.tooltip",Nk="recharts.syncEvent.brush",uq=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Ya(n))return t[n]}},Ile={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},dq=Jr({name:"options",initialState:Ile,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Rle=dq.reducer,{createEventEmitter:kle}=dq.actions;function Dle(t){return t.tooltip.syncInteraction}var Mle={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},fq=Jr({name:"chartData",initialState:Mle,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:Sk,setDataStartEndIndexes:zle,setComputedData:yve}=fq.actions,Lle=fq.reducer,qle=["x","y"];function Ak(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ak(Object(n),!0).forEach(function(r){Ule(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ak(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ule(t,e,n){return(e=Vle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vle(t){var e=Ble(t,"string");return typeof e=="symbol"?e:e+""}function Ble(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $le(t,e){if(t==null)return{};var n,r,i=Fle(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fle(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Hle(){var t=ze(EN),e=ze(NN),n=jn(),r=ze(K6),i=ze(io),s=Uc(),c=Zy(),u=ze(f=>f.rootProps.className);j.useEffect(()=>{if(t==null)return qc;var f=(h,p,g)=>{if(e!==g&&t===h){if(r==="index"){var y;if(c&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate&&p.payload.sourceViewBox){var _=p.payload.coordinate,{x:E,y:w}=_,N=$le(_,qle),{x:A,y:R,width:O,height:C}=p.payload.sourceViewBox,V=Mu(Mu({},N),{},{x:c.x+(O?(E-A)/O:0)*c.width,y:c.y+(C?(w-R)/C:0)*c.height});n(Mu(Mu({},p),{},{payload:Mu(Mu({},p.payload),{},{coordinate:V})}))}else n(p);return}if(i!=null){var $;if(typeof r=="function"){var D={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},I=r(i,D);$=i[I]}else r==="value"&&($=i.find(H=>String(H.value)===p.payload.label));var{coordinate:k}=p.payload;if($==null||p.payload.active===!1||k==null||c==null){n(Zw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:U,y:q}=k,z=Math.min(U,c.x+c.width),M=Math.min(q,c.y+c.height),W={x:s==="horizontal"?$.coordinate:z,y:s==="horizontal"?M:$.coordinate},Q=Zw({active:p.payload.active,coordinate:W,dataKey:p.payload.dataKey,index:String($.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});n(Q)}}};return Bh.on(tj,f),()=>{Bh.off(tj,f)}},[u,n,e,t,r,i,s,c])}function Gle(){var t=ze(EN),e=ze(NN),n=jn();j.useEffect(()=>{if(t==null)return qc;var r=(i,s,c)=>{e!==c&&t===i&&n(zle(s))};return Bh.on(Nk,r),()=>{Bh.off(Nk,r)}},[n,e,t])}function Kle(){var t=jn();j.useEffect(()=>{t(kle())},[t]),Hle(),Gle()}function Qle(t,e,n,r,i,s){var c=ze(_=>tle(_,t,e)),u=ze(NN),f=ze(EN),h=ze(K6),p=ze(Dle),g=p?.active,y=Zy();j.useEffect(()=>{if(!g&&f!=null&&u!=null){var _=Zw({active:s,coordinate:n,dataKey:c,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:y,graphicalItemId:void 0});Bh.emit(tj,f,_,u)}},[g,n,c,i,r,u,f,h,s,y])}function Tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ck(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tk(Object(n),!0).forEach(function(r){Wle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wle(t,e,n){return(e=Yle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yle(t){var e=Xle(t,"string");return typeof e=="symbol"?e:e+""}function Xle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zle(t){return t.dataKey}function Jle(t,e){return j.isValidElement(t)?j.cloneElement(t,e):typeof t=="function"?j.createElement(t,e):j.createElement(Dte,e)}var Ok=[],ece={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Pk(t){var e,n,r=Dr(t,ece),{active:i,allowEscapeViewBox:s,animationDuration:c,animationEasing:u,content:f,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:y,position:_,reverseDirection:E,useTranslate3d:w,wrapperStyle:N,cursor:A,shared:R,trigger:O,defaultIndex:C,portal:V,axisId:$}=r,D=jn(),I=typeof C=="number"?String(C):C;j.useEffect(()=>{D(Yse({shared:R,trigger:O,axisId:$,active:i,defaultIndex:I}))},[D,R,O,$,i,I]);var k=Zy(),U=B3(),q=Fse(R),{activeIndex:z,isActive:M}=(e=ze(me=>ile(me,q,O,I)))!==null&&e!==void 0?e:{},W=ze(me=>rle(me,q,O,I)),Q=ze(me=>oq(me,q,O,I)),H=ze(me=>nle(me,q,O,I)),le=W,_e=Tle(),je=(n=i??M)!==null&&n!==void 0?n:!1,[Y,F]=_J([le,je]),te=q==="axis"?Q:void 0;Qle(q,O,H,te,z,je);var ye=V??_e;if(ye==null||k==null||q==null)return null;var we=le??Ok;je||(we=Ok),h&&we.length&&(we=GZ(we.filter(me=>me.value!=null&&(me.hide!==!0||r.includeHidden)),y,Zle));var Z=we.length>0,ne=j.createElement(Bte,{allowEscapeViewBox:s,animationDuration:c,animationEasing:u,isAnimationActive:p,active:je,coordinate:H,hasPayload:Z,offset:g,position:_,reverseDirection:E,useTranslate3d:w,viewBox:k,wrapperStyle:N,lastBoundingBox:Y,innerRef:F,hasPortalFromProps:!!V},Jle(f,Ck(Ck({},r),{},{payload:we,label:te,active:je,activeIndex:z,coordinate:H,accessibilityLayer:U})));return j.createElement(j.Fragment,null,KD.createPortal(ne,ye),je&&j.createElement(Ale,{cursor:A,tooltipEventType:q,coordinate:H,payload:we,index:z}))}var WN=t=>null;WN.displayName="Cell";function tce(t,e,n){return(e=nce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nce(t){var e=rce(t,"string");return typeof e=="symbol"?e:e+""}function rce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ice{constructor(e){tce(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ace(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ik(Object(n),!0).forEach(function(r){sce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sce(t,e,n){return(e=oce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oce(t){var e=lce(t,"string");return typeof e=="symbol"?e:e+""}function lce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cce={cacheSize:2e3,enableCache:!0},hq=ace({},cce),Rk=new ice(hq.cacheSize),uce={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kk="recharts_measurement_span";function dce(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",c=e.letterSpacing||"",u=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(u)}var Dk=(t,e)=>{try{var n=document.getElementById(kk);n||(n=document.createElement("span"),n.setAttribute("id",kk),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,uce,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},mh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||n0.isSsr)return{width:0,height:0};if(!hq.enableCache)return Dk(e,n);var r=dce(e,n),i=Rk.get(r);if(i)return i;var s=Dk(e,n);return Rk.set(r,s),s},mq;function fce(t,e,n){return(e=hce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hce(t){var e=mce(t,"string");return typeof e=="symbol"?e:e+""}function mce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pce=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gce=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vce={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},yce=["cm","mm","pt","pc","in","Q","px"];function bce(t){return yce.includes(t)}var Hu="NaN";function _ce(t,e){return t*vce[e]}class cr{static parse(e){var n,[,r,i]=(n=gce.exec(e))!==null&&n!==void 0?n:[];return r==null?cr.NaN:new cr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ya(e)&&(this.unit=""),n!==""&&!pce.test(n)&&(this.num=NaN,this.unit=""),bce(n)&&(this.num=_ce(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new cr(NaN,""):new cr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new cr(NaN,""):new cr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new cr(NaN,""):new cr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new cr(NaN,""):new cr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ya(this.num)}}mq=cr;fce(cr,"NaN",new mq(NaN,""));function pq(t){if(t==null||t.includes(Hu))return Hu;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=Mk.exec(e))!==null&&n!==void 0?n:[],c=cr.parse(r??""),u=cr.parse(s??""),f=i==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Hu;e=e.replace(Mk,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,p,g,y]=(h=zk.exec(e))!==null&&h!==void 0?h:[],_=cr.parse(p??""),E=cr.parse(y??""),w=g==="+"?_.add(E):_.subtract(E);if(w.isNaN())return Hu;e=e.replace(zk,w.toString())}return e}var Lk=/\(([^()]*)\)/;function xce(t){for(var e=t,n;(n=Lk.exec(e))!=null;){var[,r]=n;e=e.replace(Lk,pq(r))}return e}function wce(t){var e=t.replace(/\s+/g,"");return e=xce(e),e=pq(e),e}function jce(t){try{return wce(t)}catch{return Hu}}function p1(t){var e=jce(t.slice(5,-1));return e===Hu?"":e}var Ece=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Nce=["dx","dy","angle","className","breakAll"];function nj(){return nj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nj.apply(null,arguments)}function qk(t,e){if(t==null)return{};var n,r,i=Sce(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Sce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gq=/[ \f\n\r\t\v\u2028\u2029]+/,vq=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];an(e)||(n?i=e.toString().split(""):i=e.toString().split(gq));var s=i.map(u=>({word:u,width:mh(u,r).width})),c=n?0:mh("",r).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function Ace(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var yq=(t,e,n,r)=>t.reduce((i,s)=>{var{word:c,width:u}=s,f=i[i.length-1];if(f&&u!=null&&(e==null||r||f.width+u+n<Number(e)))f.words.push(c),f.width+=u+n;else{var h={words:[c],width:u};i.push(h)}return i},[]),bq=t=>t.reduce((e,n)=>e.width>n.width?e:n),Tce="",Uk=(t,e,n,r,i,s,c,u)=>{var f=t.slice(0,e),h=vq({breakAll:n,style:r,children:f+Tce});if(!h)return[!1,[]];var p=yq(h.wordsWithComputedWidth,s,c,u),g=p.length>i||bq(p).width>Number(s);return[g,p]},Cce=(t,e,n,r,i)=>{var{maxLines:s,children:c,style:u,breakAll:f}=t,h=Pe(s),p=String(c),g=yq(e,r,n,i);if(!h||i)return g;var y=g.length>s||bq(g).width>Number(r);if(!y)return g;for(var _=0,E=p.length-1,w=0,N;_<=E&&w<=p.length-1;){var A=Math.floor((_+E)/2),R=A-1,[O,C]=Uk(p,R,f,u,s,r,n,i),[V]=Uk(p,A,f,u,s,r,n,i);if(!O&&!V&&(_=A+1),O&&V&&(E=A-1),!O&&V){N=C;break}w++}return N||g},Vk=t=>{var e=an(t)?[]:t.toString().split(gq);return[{words:e,width:void 0}]},Oce=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:c}=t;if((e||n)&&!n0.isSsr){var u,f,h=vq({breakAll:s,children:r,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;u=p,f=g}else return Vk(r);return Cce({breakAll:s,children:r,maxLines:c,style:i},u,f,e,!!n)}return Vk(r)},_q="#808080",Pce={angle:0,breakAll:!1,capHeight:"0.71em",fill:_q,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},YN=j.forwardRef((t,e)=>{var n=Dr(t,Pce),{x:r,y:i,lineHeight:s,capHeight:c,fill:u,scaleToFit:f,textAnchor:h,verticalAnchor:p}=n,g=qk(n,Ece),y=j.useMemo(()=>Oce({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),{dx:_,dy:E,angle:w,className:N,breakAll:A}=g,R=qk(g,Nce);if(!Xa(r)||!Xa(i)||y.length===0)return null;var O=Number(r)+(Pe(_)?_:0),C=Number(i)+(Pe(E)?E:0);if(!pt(O)||!pt(C))return null;var V;switch(p){case"start":V=p1("calc(".concat(c,")"));break;case"middle":V=p1("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:V=p1("calc(".concat(y.length-1," * -").concat(s,")"));break}var $=[],D=y[0];if(f&&D!=null){var I=D.width,{width:k}=g;$.push("scale(".concat(Pe(k)&&Pe(I)?k/I:1,")"))}return w&&$.push("rotate(".concat(w,", ").concat(O,", ").concat(C,")")),$.length&&(R.transform=$.join(" ")),j.createElement("text",nj({},Ir(R),{ref:e,x:O,y:C,className:Ut("recharts-text",N),textAnchor:h,fill:u.includes("url")?_q:u}),y.map((U,q)=>{var z=U.words.join(A?"":" ");return j.createElement("tspan",{x:O,dy:q===0?V:s,key:"".concat(z,"-").concat(q)},z)}))});YN.displayName="Text";function Bk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bk(Object(n),!0).forEach(function(r){Ice(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ice(t,e,n){return(e=Rce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rce(t){var e=kce(t,"string");return typeof e=="symbol"?e:e+""}function kce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dce=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:s,y:c,height:u,upperWidth:f,lowerWidth:h}=QE(e),p=s,g=s+(f-h)/2,y=(p+g)/2,_=(f+h)/2,E=p+f/2,w=u>=0?1:-1,N=w*r,A=w>0?"end":"start",R=w>0?"start":"end",O=f>=0?1:-1,C=O*r,V=O>0?"end":"start",$=O>0?"start":"end",D=i;if(n==="top"){var I={x:p+f/2,y:c-N,horizontalAnchor:"middle",verticalAnchor:A};return D&&(I.height=Math.max(c-D.y,0),I.width=f),I}if(n==="bottom"){var k={x:g+h/2,y:c+u+N,horizontalAnchor:"middle",verticalAnchor:R};return D&&(k.height=Math.max(D.y+D.height-(c+u),0),k.width=h),k}if(n==="left"){var U={x:y-C,y:c+u/2,horizontalAnchor:V,verticalAnchor:"middle"};return D&&(U.width=Math.max(U.x-D.x,0),U.height=u),U}if(n==="right"){var q={x:y+_+C,y:c+u/2,horizontalAnchor:$,verticalAnchor:"middle"};return D&&(q.width=Math.max(D.x+D.width-q.x,0),q.height=u),q}var z=D?{width:_,height:u}:{};return n==="insideLeft"?Da({x:y+C,y:c+u/2,horizontalAnchor:$,verticalAnchor:"middle"},z):n==="insideRight"?Da({x:y+_-C,y:c+u/2,horizontalAnchor:V,verticalAnchor:"middle"},z):n==="insideTop"?Da({x:p+f/2,y:c+N,horizontalAnchor:"middle",verticalAnchor:R},z):n==="insideBottom"?Da({x:g+h/2,y:c+u-N,horizontalAnchor:"middle",verticalAnchor:A},z):n==="insideTopLeft"?Da({x:p+C,y:c+N,horizontalAnchor:$,verticalAnchor:R},z):n==="insideTopRight"?Da({x:p+f-C,y:c+N,horizontalAnchor:V,verticalAnchor:R},z):n==="insideBottomLeft"?Da({x:g+C,y:c+u-N,horizontalAnchor:$,verticalAnchor:A},z):n==="insideBottomRight"?Da({x:g+h-C,y:c+u-N,horizontalAnchor:V,verticalAnchor:A},z):n&&typeof n=="object"&&(Pe(n.x)||Sc(n.x))&&(Pe(n.y)||Sc(n.y))?Da({x:s+fa(n.x,_),y:c+fa(n.y,u),horizontalAnchor:"end",verticalAnchor:"end"},z):Da({x:E,y:c+u/2,horizontalAnchor:"middle",verticalAnchor:"middle"},z)},Mce=["labelRef"],zce=["content"];function $k(t,e){if(t==null)return{};var n,r,i=Lce(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ah(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(n),!0).forEach(function(r){qce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qce(t,e,n){return(e=Uce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uce(t){var e=Vce(t,"string");return typeof e=="symbol"?e:e+""}function Vce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ss(){return Ss=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ss.apply(null,arguments)}var xq=j.createContext(null),Bce=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:c,children:u}=t,f=j.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:c}),[e,n,r,i,s,c]);return j.createElement(xq.Provider,{value:f},u)},wq=()=>{var t=j.useContext(xq),e=Zy();return t||(e?QE(e):void 0)},$ce=j.createContext(null),Fce=()=>{var t=j.useContext($ce),e=ze(Z6);return t||e},Hce=t=>{var{value:e,formatter:n}=t,r=an(t.children)?e:t.children;return typeof n=="function"?n(r):r},XN=t=>t!=null&&typeof t=="function",Gce=(t,e)=>{var n=Yr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Kce=(t,e,n,r,i)=>{var{offset:s,className:c}=t,{cx:u,cy:f,innerRadius:h,outerRadius:p,startAngle:g,endAngle:y,clockWise:_}=i,E=(h+p)/2,w=Gce(g,y),N=w>=0?1:-1,A,R;switch(e){case"insideStart":A=g+N*s,R=_;break;case"insideEnd":A=y-N*s,R=!_;break;case"end":A=y+N*s,R=_;break;default:throw new Error("Unsupported position ".concat(e))}R=w<=0?R:!R;var O=fr(u,f,E,A),C=fr(u,f,E,A+(R?1:-1)*359),V="M".concat(O.x,",").concat(O.y,`
    A`).concat(E,",").concat(E,",0,1,").concat(R?0:1,`,
    `).concat(C.x,",").concat(C.y),$=an(t.id)?Ch("recharts-radial-line-"):t.id;return j.createElement("text",Ss({},r,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",c)}),j.createElement("defs",null,j.createElement("path",{id:$,d:V})),j.createElement("textPath",{xlinkHref:"#".concat($)},n))},Qce=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:c,startAngle:u,endAngle:f}=t,h=(u+f)/2;if(n==="outside"){var{x:p,y:g}=fr(r,i,c+e,h);return{x:p,y:g,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+c)/2,{x:_,y:E}=fr(r,i,y,h);return{x:_,y:E,textAnchor:"middle",verticalAnchor:"middle"}},Ug=t=>t!=null&&"cx"in t&&Pe(t.cx),Wce={angle:0,offset:5,zIndex:Zn.label,position:"middle",textBreakAll:!1};function Yce(t){if(!Ug(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function $o(t){var e=Dr(t,Wce),{viewBox:n,parentViewBox:r,position:i,value:s,children:c,content:u,className:f="",textBreakAll:h,labelRef:p}=e,g=Fce(),y=wq(),_=i==="center"?y:g??y,E,w,N;n==null?E=_:Ug(n)?E=n:E=QE(n);var A=Yce(E);if(!E||an(s)&&an(c)&&!j.isValidElement(u)&&typeof u!="function")return null;var R=ah(ah({},e),{},{viewBox:E});if(j.isValidElement(u)){var{labelRef:O}=R,C=$k(R,Mce);return j.cloneElement(u,C)}if(typeof u=="function"){var{content:V}=R,$=$k(R,zce);if(w=j.createElement(u,$),j.isValidElement(w))return w}else w=Hce(e);var D=Ir(e);if(Ug(E)){if(i==="insideStart"||i==="insideEnd"||i==="end")return Kce(e,i,w,D,E);N=Qce(E,e.offset,e.position)}else{if(!A)return null;var I=Dce({viewBox:A,position:i,offset:e.offset,parentViewBox:Ug(r)?void 0:r});N=ah(ah({x:I.x,y:I.y,textAnchor:I.horizontalAnchor,verticalAnchor:I.verticalAnchor},I.width!==void 0?{width:I.width}:{}),I.height!==void 0?{height:I.height}:{})}return j.createElement(Fi,{zIndex:e.zIndex},j.createElement(YN,Ss({ref:p,className:Ut("recharts-label",f)},D,N,{textAnchor:Ace(D.textAnchor)?D.textAnchor:N.textAnchor,breakAll:h}),w))}$o.displayName="Label";var Xce=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?j.createElement($o,Ss({key:"label-implicit"},r)):Xa(t)?j.createElement($o,Ss({key:"label-implicit",value:t},r)):j.isValidElement(t)?t.type===$o?j.cloneElement(t,ah({key:"label-implicit"},r)):j.createElement($o,Ss({key:"label-implicit",content:t},r)):XN(t)?j.createElement($o,Ss({key:"label-implicit",content:t},r)):t&&typeof t=="object"?j.createElement($o,Ss({},t,{key:"label-implicit"},r)):null};function Zce(t){var{label:e,labelRef:n}=t,r=wq();return Xce(e,r,n)||null}var g1={},v1={},Hk;function Jce(){return Hk||(Hk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(v1)),v1}var y1={},Gk;function eue(){return Gk||(Gk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(y1)),y1}var Kk;function tue(){return Kk||(Kk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jce(),n=eue(),r=zE();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(g1)),g1}var b1,Qk;function nue(){return Qk||(Qk=1,b1=tue().last),b1}var rue=nue();const iue=es(rue);var aue=["valueAccessor"],sue=["dataKey","clockWise","id","textBreakAll","zIndex"];function Wv(){return Wv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wv.apply(null,arguments)}function Wk(t,e){if(t==null)return{};var n,r,i=oue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lue=t=>Array.isArray(t.value)?iue(t.value):t.value,jq=j.createContext(void 0),Eq=jq.Provider,Nq=j.createContext(void 0);Nq.Provider;function cue(){return j.useContext(jq)}function uue(){return j.useContext(Nq)}function Vg(t){var{valueAccessor:e=lue}=t,n=Wk(t,aue),{dataKey:r,clockWise:i,id:s,textBreakAll:c,zIndex:u}=n,f=Wk(n,sue),h=cue(),p=uue(),g=h||p;return!g||!g.length?null:j.createElement(Fi,{zIndex:u??Zn.label},j.createElement(qi,{className:"recharts-label-list"},g.map((y,_)=>{var E,w=an(r)?e(y,_):Dn(y.payload,r),N=an(s)?{}:{id:"".concat(s,"-").concat(_)};return j.createElement($o,Wv({key:"label-".concat(_)},Ir(y),f,N,{fill:(E=n.fill)!==null&&E!==void 0?E:y.fill,parentViewBox:y.parentViewBox,value:w,textBreakAll:c,viewBox:y.viewBox,index:_,zIndex:0}))})))}Vg.displayName="LabelList";function Sq(t){var{label:e}=t;return e?e===!0?j.createElement(Vg,{key:"labelList-implicit"}):j.isValidElement(e)||XN(e)?j.createElement(Vg,{key:"labelList-implicit",content:e}):typeof e=="object"?j.createElement(Vg,Wv({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function rj(){return rj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rj.apply(null,arguments)}var Aq=t=>{var{cx:e,cy:n,r,className:i}=t,s=Ut("recharts-dot",i);return Pe(e)&&Pe(n)&&Pe(r)?j.createElement("circle",rj({},da(t),DE(t),{className:s,cx:e,cy:n,r})):null},due={radiusAxis:{},angleAxis:{}},Tq=Jr({name:"polarAxis",initialState:due,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:bve,removeRadiusAxis:_ve,addAngleAxis:xve,removeAngleAxis:wve}=Tq.actions,fue=Tq.reducer;function hue(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var _1={exports:{}},zt={};var Yk;function mue(){if(Yk)return zt;Yk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),_=Symbol.for("react.client.reference");function E(w){if(typeof w=="object"&&w!==null){var N=w.$$typeof;switch(N){case t:switch(w=w.type,w){case n:case i:case r:case f:case h:case y:return w;default:switch(w=w&&w.$$typeof,w){case c:case u:case g:case p:return w;case s:return w;default:return N}}case e:return N}}}return zt.ContextConsumer=s,zt.ContextProvider=c,zt.Element=t,zt.ForwardRef=u,zt.Fragment=n,zt.Lazy=g,zt.Memo=p,zt.Portal=e,zt.Profiler=i,zt.StrictMode=r,zt.Suspense=f,zt.SuspenseList=h,zt.isContextConsumer=function(w){return E(w)===s},zt.isContextProvider=function(w){return E(w)===c},zt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},zt.isForwardRef=function(w){return E(w)===u},zt.isFragment=function(w){return E(w)===n},zt.isLazy=function(w){return E(w)===g},zt.isMemo=function(w){return E(w)===p},zt.isPortal=function(w){return E(w)===e},zt.isProfiler=function(w){return E(w)===i},zt.isStrictMode=function(w){return E(w)===r},zt.isSuspense=function(w){return E(w)===f},zt.isSuspenseList=function(w){return E(w)===h},zt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===i||w===r||w===f||w===h||typeof w=="object"&&w!==null&&(w.$$typeof===g||w.$$typeof===p||w.$$typeof===c||w.$$typeof===s||w.$$typeof===u||w.$$typeof===_||w.getModuleId!==void 0)},zt.typeOf=E,zt}var Xk;function pue(){return Xk||(Xk=1,_1.exports=mue()),_1.exports}var gue=pue(),Zk=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",Jk=null,x1=null,Cq=t=>{if(t===Jk&&Array.isArray(x1))return x1;var e=[];return j.Children.forEach(t,n=>{an(n)||(gue.isFragment(n)?e=e.concat(Cq(n.props.children)):e.push(n))}),x1=e,Jk=t,e};function vue(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>Zk(i)):r=[Zk(e)],Cq(t).forEach(i=>{var s=cd(i,"type.displayName")||cd(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var Oq=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,w1={},eD;function yue(){return eD||(eD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(w1)),w1}var j1,tD;function bue(){return tD||(tD=1,j1=yue().isPlainObject),j1}var _ue=bue();const xue=es(_ue);var nD,rD,iD,aD,sD;function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){wue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wue(t,e,n){return(e=jue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jue(t){var e=Eue(t,"string");return typeof e=="symbol"?e:e+""}function Eue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yv(){return Yv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yv.apply(null,arguments)}function Wf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var cD=(t,e,n,r,i)=>{var s=n-r,c;return c=dn(nD||(nD=Wf(["M ",",",""])),t,e),c+=dn(rD||(rD=Wf(["L ",",",""])),t+n,e),c+=dn(iD||(iD=Wf(["L ",",",""])),t+n-s/2,e+i),c+=dn(aD||(aD=Wf(["L ",",",""])),t+n-s/2-r,e+i),c+=dn(sD||(sD=Wf(["L ",","," Z"])),t,e),c},Nue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Sue=t=>{var e=Dr(t,Nue),{x:n,y:r,upperWidth:i,lowerWidth:s,height:c,className:u}=e,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=e,y=j.useRef(null),[_,E]=j.useState(-1),w=j.useRef(i),N=j.useRef(s),A=j.useRef(c),R=j.useRef(n),O=j.useRef(r),C=i0(t,"trapezoid-");if(j.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var W=y.current.getTotalLength();W&&E(W)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var V=Ut("recharts-trapezoid",u);if(!g)return j.createElement("g",null,j.createElement("path",Yv({},Ir(e),{className:V,d:cD(n,r,i,s,c)})));var $=w.current,D=N.current,I=A.current,k=R.current,U=O.current,q="0px ".concat(_===-1?1:_,"px"),z="".concat(_,"px 0px"),M=F3(["strokeDasharray"],h,f);return j.createElement(r0,{animationId:C,key:C,canBegin:_>0,duration:h,easing:f,isActive:g,begin:p},W=>{var Q=fn($,i,W),H=fn(D,s,W),le=fn(I,c,W),_e=fn(k,n,W),je=fn(U,r,W);y.current&&(w.current=Q,N.current=H,A.current=le,R.current=_e,O.current=je);var Y=W>0?{transition:M,strokeDasharray:z}:{strokeDasharray:q};return j.createElement("path",Yv({},Ir(e),{className:V,d:cD(_e,je,Q,H,le),ref:y,style:lD(lD({},Y),e.style)}))})},Aue=["option","shapeType","activeClassName"];function Tue(t,e){if(t==null)return{};var n,r,i=Cue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(n),!0).forEach(function(r){Oue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oue(t,e,n){return(e=Pue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pue(t){var e=Iue(t,"string");return typeof e=="symbol"?e:e+""}function Iue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rue(t,e){return Xv(Xv({},e),t)}function kue(t,e){return t==="symbols"}function dD(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return j.createElement(Q3,n);case"trapezoid":return j.createElement(Sue,n);case"sector":return j.createElement(X3,n);case"symbols":if(kue(e))return j.createElement(kL,n);break;case"curve":return j.createElement($3,n);default:return null}}function Due(t){return j.isValidElement(t)?t.props:t}function Pq(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=Tue(t,Aue),s;if(j.isValidElement(e))s=j.cloneElement(e,Xv(Xv({},i),Due(e)));else if(typeof e=="function")s=e(i,i.index);else if(xue(e)&&typeof e!="boolean"){var c=Rue(e,i);s=j.createElement(dD,{shapeType:n,elementProps:c})}else{var u=i;s=j.createElement(dD,{shapeType:n,elementProps:u})}return i.isActive?j.createElement(qi,{className:r},s):s}var Iq=(t,e,n)=>{var r=jn();return(i,s)=>c=>{t?.(i,s,c),r(V5({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Rq=t=>{var e=jn();return(n,r)=>i=>{t?.(n,r,i),e(Xse())}},kq=(t,e,n)=>{var r=jn();return(i,s)=>c=>{t?.(i,s,c),r(Zse({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function Dq(t){var{tooltipEntrySettings:e}=t,n=jn(),r=Er(),i=j.useRef(null);return j.useLayoutEffect(()=>{r||(i.current===null?n(Kse(e)):i.current!==e&&n(Qse({prev:i.current,next:e})),i.current=e)},[e,n,r]),j.useLayoutEffect(()=>()=>{i.current&&(n(Wse(i.current)),i.current=null)},[n]),null}function Mq(t){var{legendPayload:e}=t,n=jn(),r=Er(),i=j.useRef(null);return j.useLayoutEffect(()=>{r||(i.current===null?n(Ate(e)):i.current!==e&&n(Tte({prev:i.current,next:e})),i.current=e)},[n,r,e]),j.useLayoutEffect(()=>()=>{i.current&&(n(Cte(i.current)),i.current=null)},[n]),null}var E1,Mue=()=>{var[t]=j.useState(()=>Ch("uid-"));return t},zue=(E1=HD.useId)!==null&&E1!==void 0?E1:Mue;function Lue(t,e){var n=zue();return e||(t?"".concat(t,"-").concat(n):n)}var que=j.createContext(void 0),zq=t=>{var{id:e,type:n,children:r}=t,i=Lue("recharts-".concat(n),e);return j.createElement(que.Provider,{value:i},r(i))},Uue={cartesianItems:[],polarItems:[]},Lq=Jr({name:"graphicalItems",initialState:Uue,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Zt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=la(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Zt()},removeCartesianGraphicalItem:{reducer(t,e){var n=la(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Zt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Zt()},removePolarGraphicalItem:{reducer(t,e){var n=la(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Zt()}}}),{addCartesianGraphicalItem:Vue,replaceCartesianGraphicalItem:Bue,removeCartesianGraphicalItem:$ue,addPolarGraphicalItem:jve,removePolarGraphicalItem:Eve}=Lq.actions,Fue=Lq.reducer,Hue=t=>{var e=jn(),n=j.useRef(null);return j.useLayoutEffect(()=>{n.current===null?e(Vue(t)):n.current!==t&&e(Bue({prev:n.current,next:t})),n.current=t},[e,t]),j.useLayoutEffect(()=>()=>{n.current&&(e($ue(n.current)),n.current=null)},[e]),null},qq=j.memo(Hue),Gue=["points"];function fD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(n),!0).forEach(function(r){Kue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kue(t,e,n){return(e=Que(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Que(t){var e=Wue(t,"string");return typeof e=="symbol"?e:e+""}function Wue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zv.apply(null,arguments)}function Yue(t,e){if(t==null)return{};var n,r,i=Xue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Zue(t){var{option:e,dotProps:n,className:r}=t;if(j.isValidElement(e))return j.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Ut(r,typeof e!="boolean"?e.className:""),s=n??{},{points:c}=s,u=Yue(s,Gue);return j.createElement(Aq,Zv({},u,{className:i}))}function Jue(t,e){return t==null?!1:e?!0:t.length===1}function ede(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:c,needClip:u,clipPathId:f,zIndex:h=Zn.scatter}=t;if(!Jue(e,n))return null;var p=Oq(n),g=yX(n),y=e.map((E,w)=>{var N,A,R=N1(N1(N1({r:3},c),g),{},{index:w,cx:(N=E.x)!==null&&N!==void 0?N:void 0,cy:(A=E.y)!==null&&A!==void 0?A:void 0,dataKey:s,value:E.value,payload:E.payload,points:e});return j.createElement(Zue,{key:"dot-".concat(w),option:n,dotProps:R,className:i})}),_={};return u&&f!=null&&(_.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(f,")")),j.createElement(Fi,{zIndex:h},j.createElement(qi,Zv({className:r},_),y))}function hD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(n),!0).forEach(function(r){tde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tde(t,e,n){return(e=nde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nde(t){var e=rde(t,"string");return typeof e=="symbol"?e:e+""}function rde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uq=0,ide={xAxis:{},yAxis:{},zAxis:{}},Vq=Jr({name:"cartesianAxis",initialState:ide,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Zt()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Zt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Zt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Zt()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Zt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Zt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Zt()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Zt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Zt()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s,c=i.widthHistory||[];if(c.length===3&&c[0]===c[2]&&r===c[1]&&r!==i.width&&Math.abs(r-((s=c[0])!==null&&s!==void 0?s:0))<=1)return;var u=[...c,r].slice(-3);t.yAxis[n]=mD(mD({},i),{},{width:r,widthHistory:u})}}}}),{addXAxis:ade,replaceXAxis:sde,removeXAxis:ode,addYAxis:lde,replaceYAxis:cde,removeYAxis:ude,addZAxis:Nve,replaceZAxis:Sve,removeZAxis:Ave,updateYAxisWidth:dde}=Vq.actions,fde=Vq.reducer,hde=ce([Jn],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),mde=ce([hde,Zs,Js],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),ZN=()=>ze(mde),pde=()=>ze(Voe);function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){gde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gde(t,e,n){return(e=vde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vde(t){var e=yde(t,"string");return typeof e=="symbol"?e:e+""}function yde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bde=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:c}=t;if(i===!1||e.x==null||e.y==null)return null;var u={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},f=S1(S1(S1({},u),om(i)),DE(i)),h;return j.isValidElement(i)?h=j.cloneElement(i,f):typeof i=="function"?h=i(f):h=j.createElement(Aq,f),j.createElement(qi,{className:"recharts-active-dot",clipPath:c},h)};function _de(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:c=Zn.activeDot}=t,u=ze(Pc),f=pde();if(e==null||f==null)return null;var h=e.find(p=>f.includes(p.payload));return an(h)?null:j.createElement(Fi,{zIndex:c},j.createElement(bde,{point:h,childIndex:Number(u),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var gD=(t,e,n)=>{var r=n??t;if(!an(r))return fa(r,e,0)},xde=(t,e,n)=>{var r={},i=t.filter(g0),s=t.filter(h=>h.stackId==null),c=i.reduce((h,p)=>{var g=h[p.stackId];return g==null&&(g=[]),g.push(p),h[p.stackId]=g,h},r),u=Object.entries(c).map(h=>{var p,[g,y]=h,_=y.map(w=>w.dataKey),E=gD(e,n,(p=y[0])===null||p===void 0?void 0:p.barSize);return{stackId:g,dataKeys:_,barSize:E}}),f=s.map(h=>{var p=[h.dataKey].filter(y=>y!=null),g=gD(e,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...u,...f]};function vD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(n),!0).forEach(function(r){wde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wde(t,e,n){return(e=jde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jde(t){var e=Ede(t,"string");return typeof e=="symbol"?e:e+""}function Ede(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nde(t,e,n,r,i){var s,c=r.length;if(!(c<1)){var u=fa(t,n,0,!0),f,h=[];if(pt((s=r[0])===null||s===void 0?void 0:s.barSize)){var p=!1,g=n/c,y=r.reduce((R,O)=>R+(O.barSize||0),0);y+=(c-1)*u,y>=n&&(y-=(c-1)*u,u=0),y>=n&&g>0&&(p=!0,g*=.9,y=c*g);var _=(n-y)/2>>0,E={offset:_-u,size:0};f=r.reduce((R,O)=>{var C,V={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:E.offset+E.size+u,size:p?g:(C=O.barSize)!==null&&C!==void 0?C:0}},$=[...R,V];return E=V.position,$},h)}else{var w=fa(e,n,0,!0);n-2*w-(c-1)*u<=0&&(u=0);var N=(n-2*w-(c-1)*u)/c;N>1&&(N>>=0);var A=pt(i)?Math.min(N,i):N;f=r.reduce((R,O,C)=>[...R,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:w+(N+u)*C+(N-A)/2,size:A}}],h)}return f}}var Sde=(t,e,n,r,i,s,c)=>{var u=an(c)?e:c,f=Nde(n,r,i!==s?i:s,t,u);return i!==s&&f!=null&&(f=f.map(h=>xg(xg({},h),{},{position:xg(xg({},h.position),{},{offset:h.position.offset-i/2})}))),f},Ade=(t,e)=>{var n=CN(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===n)}}}},Tde=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function Cde(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&pt(t.zIndex)?t.zIndex:e}var Ode=t=>{var{chartData:e}=t,n=jn(),r=Er();return j.useEffect(()=>r?()=>{}:(n(Sk(e)),()=>{n(Sk(void 0))}),[e,n,r]),null},yD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Bq=Jr({name:"brush",initialState:yD,reducers:{setBrushSettings(t,e){return e.payload==null?yD:e.payload}}}),{setBrushSettings:Tve}=Bq.actions,Pde=Bq.reducer;function Ide(t){return(t%180+180)%180}var Rde=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Ide(i),c=s*Math.PI/180,u=Math.atan(r/n),f=c>u&&c<Math.PI-u?r/Math.sin(c):n/Math.cos(c);return Math.abs(f)},kde={dots:[],areas:[],lines:[]},$q=Jr({name:"referenceElements",initialState:kde,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=la(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=la(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=la(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Cve,removeDot:Ove,addArea:Pve,removeArea:Ive,addLine:Rve,removeLine:kve}=$q.actions,Dde=$q.reducer,Mde=j.createContext(void 0),zde=t=>{var{children:e}=t,[n]=j.useState("".concat(Ch("recharts"),"-clip")),r=ZN();if(r==null)return null;var{x:i,y:s,width:c,height:u}=r;return j.createElement(Mde.Provider,{value:n},j.createElement("defs",null,j.createElement("clipPath",{id:n},j.createElement("rect",{x:i,y:s,height:u,width:c}))),e)};function Fq(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Lde(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Rde(r,n)}function qde(t,e,n){var r=n==="width",{x:i,y:s,width:c,height:u}=t;return e===1?{start:r?i:s,end:r?i+c:s+u}:{start:r?i+c:s+u,end:r?i:s}}function $h(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function Ude(t,e){return Fq(t,e+1)}function Vde(t,e,n,r,i){for(var s=(r||[]).slice(),{start:c,end:u}=e,f=0,h=1,p=c,g=function(){var E=r?.[f];if(E===void 0)return{v:Fq(r,h)};var w=f,N,A=()=>(N===void 0&&(N=n(E,w)),N),R=E.coordinate,O=f===0||$h(t,R,A,p,u);O||(f=0,p=c,h+=1),O&&(p=R+t*(A()/2+i),f+=h)},y;h<=s.length;)if(y=g(),y)return y.v;return[]}function Bde(t,e,n,r,i){var s=(r||[]).slice(),c=s.length;if(c===0)return[];for(var{start:u,end:f}=e,h=1;h<=c;h++){for(var p=(c-1)%h,g=u,y=!0,_=function(){var C=r[w];if(C==null)return 0;var V=w,$,D=()=>($===void 0&&($=n(C,V)),$),I=C.coordinate,k=w===p||$h(t,I,D,g,f);if(!k)return y=!1,1;k&&(g=I+t*(D()/2+i))},E,w=p;w<c&&(E=_(),!(E!==0&&E===1));w+=h);if(y){for(var N=[],A=p;A<c;A+=h){var R=r[A];R!=null&&N.push(R)}return N}}return[]}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){$de(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $de(t,e,n){return(e=Fde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fde(t){var e=Hde(t,"string");return typeof e=="symbol"?e:e+""}function Hde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gde(t,e,n,r,i){for(var s=(r||[]).slice(),c=s.length,{start:u}=e,{end:f}=e,h=function(y){var _=s[y];if(_==null)return 1;var E=_,w,N=()=>(w===void 0&&(w=n(_,y)),w);if(y===c-1){var A=t*(E.coordinate+t*N()/2-f);s[y]=E=yr(yr({},E),{},{tickCoord:A>0?E.coordinate-A*t:E.coordinate})}else s[y]=E=yr(yr({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var R=$h(t,E.tickCoord,N,u,f);R&&(f=E.tickCoord-t*(N()/2+i),s[y]=yr(yr({},E),{},{isShow:!0}))}},p=c-1;p>=0;p--)h(p);return s}function Kde(t,e,n,r,i,s){var c=(r||[]).slice(),u=c.length,{start:f,end:h}=e;if(s){var p=r[u-1];if(p!=null){var g=n(p,u-1),y=t*(p.coordinate+t*g/2-h);if(c[u-1]=p=yr(yr({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate}),p.tickCoord!=null){var _=$h(t,p.tickCoord,()=>g,f,h);_&&(h=p.tickCoord-t*(g/2+i),c[u-1]=yr(yr({},p),{},{isShow:!0}))}}}for(var E=s?u-1:u,w=function(R){var O=c[R];if(O==null)return 1;var C=O,V,$=()=>(V===void 0&&(V=n(O,R)),V);if(R===0){var D=t*(C.coordinate-t*$()/2-f);c[R]=C=yr(yr({},C),{},{tickCoord:D<0?C.coordinate-D*t:C.coordinate})}else c[R]=C=yr(yr({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var I=$h(t,C.tickCoord,$,f,h);I&&(f=C.tickCoord+t*($()/2+i),c[R]=yr(yr({},C),{},{isShow:!0}))}},N=0;N<E;N++)w(N);return c}function JN(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:c,orientation:u,interval:f,tickFormatter:h,unit:p,angle:g}=t;if(!i||!i.length||!r)return[];if(Pe(f)||n0.isSsr){var y;return(y=Ude(i,Pe(f)?f:0))!==null&&y!==void 0?y:[]}var _=[],E=u==="top"||u==="bottom"?"width":"height",w=p&&E==="width"?mh(p,{fontSize:e,letterSpacing:n}):{width:0,height:0},N=(V,$)=>{var D=typeof h=="function"?h(V.value,$):V.value;return E==="width"?Lde(mh(D,{fontSize:e,letterSpacing:n}),w,g):mh(D,{fontSize:e,letterSpacing:n})[E]},A=i[0],R=i[1],O=i.length>=2&&A!=null&&R!=null?Yr(R.coordinate-A.coordinate):1,C=qde(s,O,E);return f==="equidistantPreserveStart"?Vde(O,C,N,i,c):f==="equidistantPreserveEnd"?Bde(O,C,N,i,c):(f==="preserveStart"||f==="preserveStartEnd"?_=Kde(O,C,N,i,c,f==="preserveStartEnd"):_=Gde(O,C,N,i,c),_.filter(V=>V.isShow))}var Qde=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,c=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>c&&(c=g.width)}});var u=n?n.getBoundingClientRect().width:0,f=i+s,h=c+f+u+(n?r:0);return Math.round(h)}return 0},Wde=["axisLine","width","height","className","hide","ticks","axisType"];function Yde(t,e){if(t==null)return{};var n,r,i=Xde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ic(){return Ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ic.apply(null,arguments)}function _D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_D(Object(n),!0).forEach(function(r){Zde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zde(t,e,n){return(e=Jde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jde(t){var e=efe(t,"string");return typeof e=="symbol"?e:e+""}function efe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ds={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Zn.axis};function tfe(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:c,axisLine:u,otherSvgProps:f}=t;if(!u)return null;var h=un(un(un({},f),da(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!c||s==="bottom"&&c);h=un(un({},h),{},{x1:e,y1:n+p*i,x2:e+r,y2:n+p*i})}else{var g=+(s==="left"&&!c||s==="right"&&c);h=un(un({},h),{},{x1:e+g*r,y1:n,x2:e+g*r,y2:n+i})}return j.createElement("line",Ic({},h,{className:Ut("recharts-cartesian-axis-line",cd(u,"className"))}))}function nfe(t,e,n,r,i,s,c,u,f){var h,p,g,y,_,E,w=u?-1:1,N=t.tickSize||c,A=Pe(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":h=p=t.coordinate,y=n+ +!u*i,g=y-w*N,E=g-w*f,_=A;break;case"left":g=y=t.coordinate,p=e+ +!u*r,h=p-w*N,_=h-w*f,E=A;break;case"right":g=y=t.coordinate,p=e+ +u*r,h=p+w*N,_=h+w*f,E=A;break;default:h=p=t.coordinate,y=n+ +u*i,g=y+w*N,E=g+w*f,_=A;break}return{line:{x1:h,y1:g,x2:p,y2:y},tick:{x:_,y:E}}}function rfe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function ife(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function afe(t){var{option:e,tickProps:n,value:r}=t,i,s=Ut(n.className,"recharts-cartesian-axis-tick-value");if(j.isValidElement(e))i=j.cloneElement(e,un(un({},n),{},{className:s}));else if(typeof e=="function")i=e(un(un({},n),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(c=Ut(c,hue(e))),i=j.createElement(YN,Ic({},n,{className:c}),r)}return i}var sfe=j.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:c,unit:u,padding:f,tickTextProps:h,orientation:p,mirror:g,x:y,y:_,width:E,height:w,tickSize:N,tickMargin:A,fontSize:R,letterSpacing:O,getTicksConfig:C,events:V,axisType:$}=t,D=JN(un(un({},C),{},{ticks:n}),R,O),I=rfe(p,g),k=ife(p,g),U=da(C),q=om(r),z={};typeof i=="object"&&(z=i);var M=un(un({},U),{},{fill:"none"},z),W=D.map(le=>un({entry:le},nfe(le,y,_,E,w,p,N,g,A))),Q=W.map(le=>{var{entry:_e,line:je}=le;return j.createElement(qi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(_e.value,"-").concat(_e.coordinate,"-").concat(_e.tickCoord)},i&&j.createElement("line",Ic({},M,je,{className:Ut("recharts-cartesian-axis-tick-line",cd(i,"className"))})))}),H=W.map((le,_e)=>{var je,Y,{entry:F,tick:te}=le,ye=un(un(un(un({verticalAnchor:k},U),{},{textAnchor:I,stroke:"none",fill:s},te),{},{index:_e,payload:F,visibleTicksCount:D.length,tickFormatter:c,padding:f},h),{},{angle:(je=(Y=h?.angle)!==null&&Y!==void 0?Y:U.angle)!==null&&je!==void 0?je:0}),we=un(un({},ye),q);return j.createElement(qi,Ic({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(F.value,"-").concat(F.coordinate,"-").concat(F.tickCoord)},ME(V,F,_e)),r&&j.createElement(afe,{option:r,tickProps:we,value:"".concat(typeof c=="function"?c(F.value,_e):F.value).concat(u||"")}))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat($,"-ticks")},H.length>0&&j.createElement(Fi,{zIndex:Zn.label},j.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat($,"-tick-labels"),ref:e},H)),Q.length>0&&j.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat($,"-tick-lines")},Q))}),ofe=j.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:c,ticks:u,axisType:f}=t,h=Yde(t,Wde),[p,g]=j.useState(""),[y,_]=j.useState(""),E=j.useRef(null);j.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var N;return Qde({ticks:E.current,label:(N=t.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=j.useCallback(N=>{if(N){var A=N.getElementsByClassName("recharts-cartesian-axis-tick-value");E.current=A;var R=A[0];if(R){var O=window.getComputedStyle(R),C=O.fontSize,V=O.letterSpacing;(C!==p||V!==y)&&(g(C),_(V))}}},[p,y]);return c||r!=null&&r<=0||i!=null&&i<=0?null:j.createElement(Fi,{zIndex:t.zIndex},j.createElement(qi,{className:Ut("recharts-cartesian-axis",s)},j.createElement(tfe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:da(t)}),j.createElement(sfe,{ref:w,axisType:f,events:h,fontSize:p,getTicksConfig:t,height:t.height,letterSpacing:y,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:u,unit:t.unit,width:t.width,x:t.x,y:t.y}),j.createElement(Bce,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},j.createElement(Zce,{label:t.label,labelRef:t.labelRef}),t.children)))}),eS=j.forwardRef((t,e)=>{var n=Dr(t,Ds);return j.createElement(ofe,Ic({},n,{ref:e}))});eS.displayName="CartesianAxis";var lfe=["x1","y1","x2","y2","key"],cfe=["offset"],ufe=["xAxisId","yAxisId"],dfe=["xAxisId","yAxisId"];function xD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(n),!0).forEach(function(r){ffe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ffe(t,e,n){return(e=hfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hfe(t){var e=mfe(t,"string");return typeof e=="symbol"?e:e+""}function mfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lc(){return lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lc.apply(null,arguments)}function Jv(t,e){if(t==null)return{};var n,r,i=pfe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gfe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:c,ry:u}=t;return j.createElement("rect",{x:r,y:i,ry:u,width:s,height:c,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Hq(t){var{option:e,lineItemProps:n}=t,r;if(j.isValidElement(e))r=j.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:c,x2:u,y2:f,key:h}=n,p=Jv(n,lfe),g=(i=da(p))!==null&&i!==void 0?i:{},{offset:y}=g,_=Jv(g,cfe);r=j.createElement("line",lc({},_,{x1:s,y1:c,x2:u,y2:f,fill:"none",key:h}))}return r}function vfe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=t,u=Jv(t,ufe),f=i.map((h,p)=>{var g=xr(xr({},u),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(p),index:p});return j.createElement(Hq,{key:"line-".concat(p),option:r,lineItemProps:g})});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function yfe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=t,u=Jv(t,dfe),f=i.map((h,p)=>{var g=xr(xr({},u),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(p),index:p});return j.createElement(Hq,{option:r,lineItemProps:g,key:"line-".concat(p)})});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function bfe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:c,horizontalPoints:u,horizontal:f=!0}=t;if(!f||!e||!e.length||u==null)return null;var h=u.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var _=h[y+1],E=_==null,w=E?i+c-g:_-g;if(w<=0)return null;var N=y%e.length;return j.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:w,width:s,stroke:"none",fill:e[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function _fe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:c,height:u,verticalPoints:f}=t;if(!e||!n||!n.length)return null;var h=f.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var _=h[y+1],E=_==null,w=E?i+c-g:_-g;if(w<=0)return null;var N=y%n.length;return j.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:w,height:u,stroke:"none",fill:n[N],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var xfe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return E3(JN(xr(xr(xr({},Ds),n),{},{ticks:N3(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},wfe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return E3(JN(xr(xr(xr({},Ds),n),{},{ticks:N3(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},jfe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Zn.grid};function ij(t){var e=P3(),n=I3(),r=O3(),i=xr(xr({},Dr(t,jfe)),{},{x:Pe(t.x)?t.x:r.left,y:Pe(t.y)?t.y:r.top,width:Pe(t.width)?t.width:r.width,height:Pe(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:c,x:u,y:f,width:h,height:p,syncWithTicks:g,horizontalValues:y,verticalValues:_}=i,E=Er(),w=ze(k=>mk(k,"xAxis",s,E)),N=ze(k=>mk(k,"yAxis",c,E));if(!Za(h)||!Za(p)||!Pe(u)||!Pe(f))return null;var A=i.verticalCoordinatesGenerator||xfe,R=i.horizontalCoordinatesGenerator||wfe,{horizontalPoints:O,verticalPoints:C}=i;if((!O||!O.length)&&typeof R=="function"){var V=y&&y.length,$=R({yAxis:N?xr(xr({},N),{},{ticks:V?y:N.ticks}):void 0,width:e??h,height:n??p,offset:r},V?!0:g);Nv(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(O=$)}if((!C||!C.length)&&typeof A=="function"){var D=_&&_.length,I=A({xAxis:w?xr(xr({},w),{},{ticks:D?_:w.ticks}):void 0,width:e??h,height:n??p,offset:r},D?!0:g);Nv(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(C=I)}return j.createElement(Fi,{zIndex:i.zIndex},j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(gfe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),j.createElement(bfe,lc({},i,{horizontalPoints:O})),j.createElement(_fe,lc({},i,{verticalPoints:C})),j.createElement(vfe,lc({},i,{offset:r,horizontalPoints:O,xAxis:w,yAxis:N})),j.createElement(yfe,lc({},i,{offset:r,verticalPoints:C,xAxis:w,yAxis:N}))))}ij.displayName="CartesianGrid";var Efe={},Gq=Jr({name:"errorBars",initialState:Efe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Dve,replaceErrorBar:Mve,removeErrorBar:zve}=Gq.actions,Nfe=Gq.reducer,Sfe=["children"];function Afe(t,e){if(t==null)return{};var n,r,i=Tfe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Cfe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Ofe=j.createContext(Cfe);function Kq(t){var{children:e}=t,n=Afe(t,Sfe);return j.createElement(Ofe.Provider,{value:n},e)}function tS(t,e){var n,r,i=ze(h=>no(h,t)),s=ze(h=>ro(h,e)),c=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Qn.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Wn.allowDataOverflow,f=c||u;return{needClip:f,needClipX:c,needClipY:u}}function Qq(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=ZN(),{needClipX:s,needClipY:c,needClip:u}=tS(e,n);if(!u||!i)return null;var{x:f,y:h,width:p,height:g}=i;return j.createElement("clipPath",{id:"clipPath-".concat(r)},j.createElement("rect",{x:s?f:f-p/2,y:c?h:h-g/2,width:s?p:p*2,height:c?g:g*2}))}var Wq=(t,e,n,r)=>pl(t,"xAxis",e,r),Yq=(t,e,n,r)=>ml(t,"xAxis",e,r),Xq=(t,e,n,r)=>pl(t,"yAxis",n,r),Zq=(t,e,n,r)=>ml(t,"yAxis",n,r),Pfe=ce([Ot,Wq,Xq,Yq,Zq],(t,e,n,r,i)=>Xs(t,"xAxis")?dd(e,r,!1):dd(n,i,!1)),Ife=(t,e,n,r,i)=>i;function Rfe(t){return t.type==="line"}var kfe=ce([b0,Ife],(t,e)=>t.filter(Rfe).find(n=>n.id===e)),Dfe=ce([Ot,Wq,Xq,Yq,Zq,kfe,Pfe,_N],(t,e,n,r,i,s,c,u)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:p}=u;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||c==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:g,data:y}=s,_;if(y!=null&&y.length>0?_=y:_=f?.slice(h,p+1),_!=null)return whe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:g,bandSize:c,displayedData:_})}});function Mfe(t){var e=om(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,c=Number(i),u=Number(s);return(Number.isNaN(c)||c<0)&&(c=n),(Number.isNaN(u)||u<0)&&(u=r),{r:c,strokeWidth:u}}return{r:n,strokeWidth:r}}var A1={exports:{}},T1={};var wD;function zfe(){if(wD)return T1;wD=1;var t=vd();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,c=t.useMemo,u=t.useDebugValue;return T1.useSyncExternalStoreWithSelector=function(f,h,p,g,y){var _=i(null);if(_.current===null){var E={hasValue:!1,value:null};_.current=E}else E=_.current;_=c(function(){function N(V){if(!A){if(A=!0,R=V,V=g(V),y!==void 0&&E.hasValue){var $=E.value;if(y($,V))return O=$}return O=V}if($=O,n(R,V))return $;var D=g(V);return y!==void 0&&y($,D)?(R=V,$):(R=V,O=D)}var A=!1,R,O,C=p===void 0?null:p;return[function(){return N(h())},C===null?void 0:function(){return N(C())}]},[h,p,g,y]);var w=r(f,_[0],_[1]);return s(function(){E.hasValue=!0,E.value=w},[w]),u(w),w},T1}var jD;function Lfe(){return jD||(jD=1,A1.exports=zfe()),A1.exports}Lfe();function qfe(t){t()}function Ufe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){qfe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var ED={notify(){},get:()=>[]};function Vfe(t,e){let n,r=ED,i=0,s=!1;function c(w){p();const N=r.subscribe(w);let A=!1;return()=>{A||(A=!0,N(),g())}}function u(){r.notify()}function f(){E.onStateChange&&E.onStateChange()}function h(){return s}function p(){i++,n||(n=t.subscribe(f),r=Ufe())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=ED)}function y(){s||(s=!0,p())}function _(){s&&(s=!1,g())}const E={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:h,trySubscribe:y,tryUnsubscribe:_,getListeners:()=>r};return E}var Bfe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$fe=Bfe(),Ffe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Hfe=Ffe(),Gfe=()=>$fe||Hfe?j.useLayoutEffect:j.useEffect,Kfe=Gfe();function ND(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Qfe(t,e){if(ND(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!ND(t[n[i]],e[n[i]]))return!1;return!0}var Wfe=Symbol.for("react-redux-context"),Yfe=typeof globalThis<"u"?globalThis:{};function Xfe(){if(!j.createContext)return{};const t=Yfe[Wfe]??=new Map;let e=t.get(j.createContext);return e||(e=j.createContext(null),t.set(j.createContext,e)),e}var Zfe=Xfe();function Jfe(t){const{children:e,context:n,serverState:r,store:i}=t,s=j.useMemo(()=>{const f=Vfe(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),c=j.useMemo(()=>i.getState(),[i]);Kfe(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),c!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,c]);const u=n||Zfe;return j.createElement(u.Provider,{value:s},e)}var ehe=Jfe,the=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function nhe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function E0(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(the.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Qfe(t[r],e[r]))return!1}else if(!nhe(t[r],e[r]))return!1;return!0}var rhe=["id"],ihe=["type","layout","connectNulls","needClip","shape"],ahe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Fh(){return Fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fh.apply(null,arguments)}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function za(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){she(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function she(t,e,n){return(e=ohe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ohe(t){var e=lhe(t,"string");return typeof e=="symbol"?e:e+""}function lhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nS(t,e){if(t==null)return{};var n,r,i=che(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function che(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uhe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Ky(n,e),payload:t}]},dhe=j.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:c,hide:u,unit:f,tooltipType:h,id:p}=t,g={dataDefinedOnItem:n,getPosition:qc,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Ky(c,e),hide:u,type:h,color:r,unit:f,graphicalItemId:p}};return j.createElement(Dq,{tooltipEntrySettings:g})}),Jq=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function fhe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var hhe=(t,e,n)=>{var r=n.reduce((_,E)=>_+E);if(!r)return Jq(e,t);for(var i=Math.floor(t/r),s=t%r,c=e-t,u=[],f=0,h=0;f<n.length;h+=(p=n[f])!==null&&p!==void 0?p:0,++f){var p,g=n[f];if(g!=null&&h+g>s){u=[...n.slice(0,f),s-h];break}}var y=u.length%2===0?[0,c]:[c];return[...fhe(n,i),...u,...y].map(_=>"".concat(_,"px")).join(", ")};function mhe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:c}=r,{id:u}=r,f=nS(r,rhe),h=da(f);return j.createElement(ede,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:c,clipPathId:e})}function phe(t){var{showLabels:e,children:n,points:r}=t,i=j.useMemo(()=>r?.map(s=>{var c,u,f={x:(c=s.x)!==null&&c!==void 0?c:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return za(za({},f),{},{value:s.value,payload:s.payload,viewBox:f,parentViewBox:void 0,fill:void 0})}),[r]);return j.createElement(Eq,{value:e?i:void 0},n)}function AD(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:c,layout:u,connectNulls:f,needClip:h,shape:p}=s,g=nS(s,ihe),y=za(za({},Ir(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(e,")"):void 0,points:r,type:c,layout:u,connectNulls:f,strokeDasharray:i??s.strokeDasharray});return j.createElement(j.Fragment,null,r?.length>1&&j.createElement(Pq,Fh({shapeType:"curve",option:p},y,{pathRef:n})),j.createElement(mhe,{points:r,clipPathId:e,props:s}))}function ghe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function vhe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:c,strokeDasharray:u,isAnimationActive:f,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:y,width:_,height:E,onAnimationEnd:w,onAnimationStart:N}=n,A=i.current,R=i0(c,"recharts-line-"),O=j.useRef(R),[C,V]=j.useState(!1),$=!C,D=j.useCallback(()=>{typeof w=="function"&&w(),V(!1)},[w]),I=j.useCallback(()=>{typeof N=="function"&&N(),V(!0)},[N]),k=ghe(r.current),U=j.useRef(0);O.current!==R&&(U.current=s.current,O.current=R);var q=U.current;return j.createElement(phe,{points:c,showLabels:$},n.children,j.createElement(r0,{animationId:R,begin:h,duration:p,isActive:f,easing:g,onAnimationEnd:D,onAnimationStart:I,key:R},z=>{var M=fn(q,k+q,z),W=Math.min(M,k),Q;if(f)if(u){var H="".concat(u).split(/[,\s]+/gim).map(je=>parseFloat(je));Q=hhe(W,k,H)}else Q=Jq(k,W);else Q=u==null?void 0:String(u);if(z>0&&k>0&&(i.current=c,s.current=Math.max(s.current,W)),A){var le=A.length/c.length,_e=z===1?c:c.map((je,Y)=>{var F=Math.floor(Y*le);if(A[F]){var te=A[F];return za(za({},je),{},{x:fn(te.x,je.x,z),y:fn(te.y,je.y,z)})}return y?za(za({},je),{},{x:fn(_*2,je.x,z),y:fn(E/2,je.y,z)}):za(za({},je),{},{x:je.x,y:je.y})});return i.current=_e,j.createElement(AD,{props:n,points:_e,clipPathId:e,pathRef:r,strokeDasharray:Q})}return j.createElement(AD,{props:n,points:c,clipPathId:e,pathRef:r,strokeDasharray:Q})}),j.createElement(Sq,{label:n.label}))}function yhe(t){var{clipPathId:e,props:n}=t,r=j.useRef(null),i=j.useRef(0),s=j.useRef(null);return j.createElement(vhe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var bhe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Dn(t.payload,e)}};class _he extends j.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:c,top:u,left:f,width:h,height:p,id:g,needClip:y,zIndex:_}=this.props;if(e)return null;var E=Ut("recharts-line",i),w=g,{r:N,strokeWidth:A}=Mfe(n),R=Oq(n),O=N*2+A,C=y?"url(#clipPath-".concat(R?"":"dots-").concat(w,")"):void 0;return j.createElement(Fi,{zIndex:_},j.createElement(qi,{className:E},y&&j.createElement("defs",null,j.createElement(Qq,{clipPathId:w,xAxisId:s,yAxisId:c}),!R&&j.createElement("clipPath",{id:"clipPath-dots-".concat(w)},j.createElement("rect",{x:f-O/2,y:u-O/2,width:h+O,height:p+O}))),j.createElement(Kq,{xAxisId:s,yAxisId:c,data:r,dataPointFormatter:bhe,errorBarOffset:0},j.createElement(yhe,{props:this.props,clipPathId:w}))),j.createElement(_de,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:C}))}}var eU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Zn.line,type:"linear"};function xhe(t){var e=Dr(t,eU),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:c,connectNulls:u,dot:f,hide:h,isAnimationActive:p,label:g,legendType:y,xAxisId:_,yAxisId:E,id:w}=e,N=nS(e,ahe),{needClip:A}=tS(_,E),R=ZN(),O=Uc(),C=Er(),V=ze(U=>Dfe(U,_,E,C,w));if(O!=="horizontal"&&O!=="vertical"||V==null||R==null)return null;var{height:$,width:D,x:I,y:k}=R;return j.createElement(_he,Fh({},N,{id:w,connectNulls:u,dot:f,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:c,isAnimationActive:p,hide:h,label:g,legendType:y,xAxisId:_,yAxisId:E,points:V,layout:O,height:$,width:D,left:I,top:k,needClip:A}))}function whe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:c,bandSize:u,displayedData:f}=t;return f.map((h,p)=>{var g=Dn(h,c);if(e==="horizontal"){var y=fI({axis:n,ticks:i,bandSize:u,entry:h,index:p}),_=an(g)?null:r.scale.map(g);return{x:y,y:_??null,value:g,payload:h}}var E=an(g)?null:n.scale.map(g),w=fI({axis:r,ticks:s,bandSize:u,entry:h,index:p});return E==null||w==null?null:{x:E,y:w,value:g,payload:h}}).filter(Boolean)}function jhe(t){var e=Dr(t,eU),n=Er();return j.createElement(zq,{id:e.id,type:"line"},r=>j.createElement(j.Fragment,null,j.createElement(Mq,{legendPayload:uhe(e)}),j.createElement(dhe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),j.createElement(qq,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),j.createElement(xhe,Fh({},e,{id:r}))))}var tU=j.memo(jhe,E0);tU.displayName="Line";function $c(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Uq}function Fc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Uq}var Ehe="Invariant failed";function Nhe(t,e){throw new Error(Ehe)}function aj(){return aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aj.apply(null,arguments)}function ey(t){return j.createElement(Pq,aj({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var She=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Pe(e))return e;var s=Pe(r)||an(r);return s?e(r,i):(s||Nhe(),n)}},Ahe=(t,e,n)=>n,The=(t,e)=>e,Em=ce([b0,The],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Che=ce([Em],t=>t?.maxBarSize),Ohe=(t,e,n,r)=>r,Phe=ce([Ot,b0,$c,Fc,Ahe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Ihe=(t,e,n)=>{var r=Ot(t),i=$c(t,e),s=Fc(t,e);if(!(i==null||s==null))return r==="horizontal"?Xw(t,"yAxis",s,n):Xw(t,"xAxis",i,n)},Rhe=(t,e)=>{var n=Ot(t),r=$c(t,e),i=Fc(t,e);if(!(r==null||i==null))return n==="horizontal"?hk(t,"xAxis",r):hk(t,"yAxis",i)},khe=ce([Phe,Mae,Rhe],xde),Dhe=(t,e,n)=>{var r,i,s=Em(t,e);if(s==null)return 0;var c=$c(t,e),u=Fc(t,e);if(c==null||u==null)return 0;var f=Ot(t),h=F6(t),{maxBarSize:p}=s,g=an(p)?h:p,y,_;return f==="horizontal"?(y=pl(t,"xAxis",c,n),_=ml(t,"xAxis",c,n)):(y=pl(t,"yAxis",u,n),_=ml(t,"yAxis",u,n)),(r=(i=dd(y,_,!0))!==null&&i!==void 0?i:g)!==null&&r!==void 0?r:0},nU=(t,e,n)=>{var r=Ot(t),i=$c(t,e),s=Fc(t,e);if(!(i==null||s==null)){var c,u;return r==="horizontal"?(c=pl(t,"xAxis",i,n),u=ml(t,"xAxis",i,n)):(c=pl(t,"yAxis",s,n),u=ml(t,"yAxis",s,n)),dd(c,u)}},Mhe=ce([khe,F6,Dae,H6,Dhe,nU,Che],Sde),zhe=(t,e,n)=>{var r=$c(t,e);if(r!=null)return pl(t,"xAxis",r,n)},Lhe=(t,e,n)=>{var r=Fc(t,e);if(r!=null)return pl(t,"yAxis",r,n)},qhe=(t,e,n)=>{var r=$c(t,e);if(r!=null)return ml(t,"xAxis",r,n)},Uhe=(t,e,n)=>{var r=Fc(t,e);if(r!=null)return ml(t,"yAxis",r,n)},Vhe=ce([Mhe,Em],Tde),Bhe=ce([Ihe,Em],Ade),$he=ce([Jn,GE,zhe,Lhe,qhe,Uhe,Vhe,Ot,Aae,nU,Bhe,Em,Ohe],(t,e,n,r,i,s,c,u,f,h,p,g,y)=>{var{chartData:_,dataStartIndex:E,dataEndIndex:w}=f;if(!(g==null||c==null||e==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||h==null)){var{data:N}=g,A;if(N!=null&&N.length>0?A=N:A=_?.slice(E,w+1),A!=null)return vme({layout:u,barSettings:g,pos:c,parentViewBox:e,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:A,offset:t,cells:y,dataStartIndex:E})}}),Fhe=["index"];function sj(){return sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sj.apply(null,arguments)}function Hhe(t,e){if(t==null)return{};var n,r,i=Ghe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ghe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rU=j.createContext(void 0),Khe=t=>{var e=j.useContext(rU);if(e!=null)return e.stackId;if(t!=null)return Oee(t)},Qhe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Whe=t=>{var e=j.useContext(rU);if(e!=null){var{stackId:n}=e;return"url(#".concat(Qhe(n,t),")")}},iU=t=>{var{index:e}=t,n=Hhe(t,Fhe),r=Whe(e);return j.createElement(qi,sj({className:"recharts-bar-stack-layer",clipPath:r},n))},Yhe=["onMouseEnter","onMouseLeave","onClick"],Xhe=["value","background","tooltipPosition"],Zhe=["id"],Jhe=["onMouseEnter","onClick","onMouseLeave"];function Gs(){return Gs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gs.apply(null,arguments)}function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){eme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eme(t,e,n){return(e=tme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tme(t){var e=nme(t,"string");return typeof e=="symbol"?e:e+""}function nme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ty(t,e){if(t==null)return{};var n,r,i=rme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ime=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Ky(n,e),payload:t}]},ame=j.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:c,unit:u,tooltipType:f,id:h}=t,p={dataDefinedOnItem:void 0,getPosition:qc,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Ky(s,e),hide:c,type:f,color:i,unit:u,graphicalItemId:h}};return j.createElement(Dq,{tooltipEntrySettings:p})});function sme(t){var e=ze(Pc),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:c,onMouseLeave:u,onClick:f}=s,h=ty(s,Yhe),p=Iq(c,r,s.id),g=Rq(u),y=kq(f,r,s.id);if(!i||n==null)return null;var _=om(i);return j.createElement(Fi,{zIndex:Cde(i,Zn.barBackground)},n.map((E,w)=>{var{value:N,background:A,tooltipPosition:R}=E,O=ty(E,Xhe);if(!A)return null;var C=p(E,w),V=g(E,w),$=y(E,w),D=Tr(Tr(Tr(Tr(Tr({option:i,isActive:String(w)===e},O),{},{fill:"#eee"},A),_),ME(h,E,w)),{},{onMouseEnter:C,onMouseLeave:V,onClick:$,dataKey:r,index:w,className:"recharts-bar-background-rectangle"});return j.createElement(ey,Gs({key:"background-bar-".concat(w)},D))}))}function ome(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Tr(Tr({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return j.createElement(Eq,{value:e?i:void 0},n)}function lme(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:c}=t,u=ze(Pc),f=ze(nq),h=n&&String(s)===u&&(f==null||c===f),p=h?n:e;return h?j.createElement(Fi,{zIndex:Zn.activeBar},j.createElement(iU,{index:s},j.createElement(ey,Gs({},r,{name:String(r.name)},i,{isActive:h,option:p,index:s,dataKey:c})))):j.createElement(ey,Gs({},r,{name:String(r.name)},i,{isActive:h,option:p,index:s,dataKey:c}))}function cme(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return j.createElement(ey,Gs({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function ume(t){var e,{data:n,props:r}=t,i=(e=da(r))!==null&&e!==void 0?e:{},{id:s}=i,c=ty(i,Zhe),{shape:u,dataKey:f,activeBar:h}=r,{onMouseEnter:p,onClick:g,onMouseLeave:y}=r,_=ty(r,Jhe),E=Iq(p,f,s),w=Rq(y),N=kq(g,f,s);return n?j.createElement(j.Fragment,null,n.map((A,R)=>j.createElement(iU,Gs({index:R,key:"rectangle-".concat(A?.x,"-").concat(A?.y,"-").concat(A?.value,"-").concat(R),className:"recharts-bar-rectangle"},ME(_,A,R),{onMouseEnter:E(A,R),onMouseLeave:w(A,R),onClick:N(A,R)}),h?j.createElement(lme,{shape:u,activeBar:h,baseProps:c,entry:A,index:R,dataKey:f}):j.createElement(cme,{shape:u,baseProps:c,entry:A,index:R,dataKey:f})))):null}function dme(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:f,onAnimationEnd:h,onAnimationStart:p}=e,g=n.current,y=i0(e,"recharts-bar-"),[_,E]=j.useState(!1),w=!_,N=j.useCallback(()=>{typeof h=="function"&&h(),E(!1)},[h]),A=j.useCallback(()=>{typeof p=="function"&&p(),E(!0)},[p]);return j.createElement(ome,{showLabels:w,rects:r},j.createElement(r0,{animationId:y,begin:c,duration:u,isActive:s,easing:f,onAnimationEnd:N,onAnimationStart:A,key:y},R=>{var O=R===1?r:r?.map((C,V)=>{var $=g&&g[V];if($)return Tr(Tr({},C),{},{x:fn($.x,C.x,R),y:fn($.y,C.y,R),width:fn($.width,C.width,R),height:fn($.height,C.height,R)});if(i==="horizontal"){var D=fn(0,C.height,R),I=fn(C.stackedBarStart,C.y,R);return Tr(Tr({},C),{},{y:I,height:D})}var k=fn(0,C.width,R),U=fn(C.stackedBarStart,C.x,R);return Tr(Tr({},C),{},{width:k,x:U})});return R>0&&(n.current=O??null),O==null?null:j.createElement(qi,null,j.createElement(ume,{props:e,data:O}))}),j.createElement(Sq,{label:e.label}),e.children)}function fme(t){var e=j.useRef(null);return j.createElement(dme,{previousRectanglesRef:e,props:t})}var aU=0,hme=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Dn(t,e)}};class mme extends j.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:c,needClip:u,background:f,id:h}=this.props;if(e||n==null)return null;var p=Ut("recharts-bar",i),g=h;return j.createElement(qi,{className:p,id:h},u&&j.createElement("defs",null,j.createElement(Qq,{clipPathId:g,xAxisId:s,yAxisId:c})),j.createElement(qi,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},j.createElement(sme,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),j.createElement(fme,this.props)))}}var pme={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:aU,xAxisId:0,yAxisId:0,zIndex:Zn.bar};function gme(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:p}=t,{needClip:g}=tS(e,n),y=Uc(),_=Er(),E=vue(t.children,WN),w=ze(R=>$he(R,t.id,_,E));if(y!=="vertical"&&y!=="horizontal")return null;var N,A=w?.[0];return A==null||A.height==null||A.width==null?N=0:N=y==="vertical"?A.height/2:A.width/2,j.createElement(Kq,{xAxisId:e,yAxisId:n,data:w,dataPointFormatter:hme,errorBarOffset:N},j.createElement(mme,Gs({},t,{layout:y,needClip:g,data:w,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:p})))}function vme(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:c,yAxis:u,xAxisTicks:f,yAxisTicks:h,stackedData:p,displayedData:g,offset:y,cells:_,parentViewBox:E,dataStartIndex:w}=t,N=e==="horizontal"?u:c,A=p?N.scale.domain():null,R=Pee({numericAxis:N}),O=N.scale.map(R);return g.map((C,V)=>{var $,D,I,k,U,q;if(p){var z=p[V+w];if(z==null)return null;$=Nee(z,A)}else $=Dn(C,n),Array.isArray($)||($=[R,$]);var M=She(r,aU)($[1],V);if(e==="horizontal"){var W,Q=u.scale.map($[0]),H=u.scale.map($[1]);if(Q==null||H==null)return null;D=hI({axis:c,ticks:f,bandSize:s,offset:i.offset,entry:C,index:V}),I=(W=H??Q)!==null&&W!==void 0?W:void 0,k=i.size;var le=Q-H;if(U=Ya(le)?0:le,q={x:D,y:y.top,width:k,height:y.height},Math.abs(M)>0&&Math.abs(U)<Math.abs(M)){var _e=Yr(U||M)*(Math.abs(M)-Math.abs(U));I-=_e,U+=_e}}else{var je=c.scale.map($[0]),Y=c.scale.map($[1]);if(je==null||Y==null)return null;if(D=je,I=hI({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:C,index:V}),k=Y-je,U=i.size,q={x:y.left,y:I,width:y.width,height:U},Math.abs(M)>0&&Math.abs(k)<Math.abs(M)){var F=Yr(k||M)*(Math.abs(M)-Math.abs(k));k+=F}}if(D==null||I==null||k==null||U==null)return null;var te=Tr(Tr({},C),{},{stackedBarStart:O,x:D,y:I,width:k,height:U,value:p?$:$[1],payload:C,background:q,tooltipPosition:{x:D+k/2,y:I+U/2},parentViewBox:E},_&&_[V]&&_[V].props);return te}).filter(Boolean)}function yme(t){var e=Dr(t,pme),n=Khe(e.stackId),r=Er();return j.createElement(zq,{id:e.id,type:"bar"},i=>j.createElement(j.Fragment,null,j.createElement(Mq,{legendPayload:ime(e)}),j.createElement(ame,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),j.createElement(qq,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),j.createElement(Fi,{zIndex:e.zIndex},j.createElement(gme,Gs({},e,{id:i})))))}var sU=j.memo(yme,E0);sU.displayName="Bar";var bme=["domain","range"],_me=["domain","range"];function CD(t,e){if(t==null)return{};var n,r,i=xme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function OD(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function oU(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=CD(t,bme),{domain:s,range:c}=e,u=CD(e,_me);return!OD(n,s)||!OD(r,c)?!1:E0(i,u)}var wme=["type"],jme=["dangerouslySetInnerHTML","ticks","scale"],Eme=["id","scale"];function oj(){return oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oj.apply(null,arguments)}function PD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ID(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PD(Object(n),!0).forEach(function(r){Nme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nme(t,e,n){return(e=Sme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sme(t){var e=Ame(t,"string");return typeof e=="symbol"?e:e+""}function Ame(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lj(t,e){if(t==null)return{};var n,r,i=Tme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Cme(t){var e=jn(),n=j.useRef(null),r=R3(),{type:i}=t,s=lj(t,wme),c=h0(r,"xAxis",i),u=j.useMemo(()=>{if(c!=null)return ID(ID({},s),{},{type:c})},[s,c]);return j.useLayoutEffect(()=>{u!=null&&(n.current===null?e(ade(u)):n.current!==u&&e(sde({prev:n.current,next:u})),n.current=u)},[u,e]),j.useLayoutEffect(()=>()=>{n.current&&(e(ode(n.current)),n.current=null)},[e]),null}var Ome=t=>{var{xAxisId:e,className:n}=t,r=ze(GE),i=Er(),s="xAxis",c=ze(A=>D5(A,s,e,i)),u=ze(A=>P5(A,e)),f=ze(A=>zse(A,e)),h=ze(A=>e5(A,e));if(u==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:y}=t,_=lj(t,jme),{id:E,scale:w}=h,N=lj(h,Eme);return j.createElement(eS,oj({},_,N,{x:f.x,y:f.y,width:u.width,height:u.height,className:Ut("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:c,axisType:s}))},Pme={allowDataOverflow:Qn.allowDataOverflow,allowDecimals:Qn.allowDecimals,allowDuplicatedCategory:Qn.allowDuplicatedCategory,angle:Qn.angle,axisLine:Ds.axisLine,height:Qn.height,hide:!1,includeHidden:Qn.includeHidden,interval:Qn.interval,label:!1,minTickGap:Qn.minTickGap,mirror:Qn.mirror,orientation:Qn.orientation,padding:Qn.padding,reversed:Qn.reversed,scale:Qn.scale,tick:Qn.tick,tickCount:Qn.tickCount,tickLine:Ds.tickLine,tickSize:Ds.tickSize,type:Qn.type,xAxisId:0},Ime=t=>{var e=Dr(t,Pme);return j.createElement(j.Fragment,null,j.createElement(Cme,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),j.createElement(Ome,e))},cj=j.memo(Ime,oU);cj.displayName="XAxis";var Rme=["type"],kme=["dangerouslySetInnerHTML","ticks","scale"],Dme=["id","scale"];function uj(){return uj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uj.apply(null,arguments)}function RD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(n),!0).forEach(function(r){Mme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mme(t,e,n){return(e=zme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zme(t){var e=Lme(t,"string");return typeof e=="symbol"?e:e+""}function Lme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dj(t,e){if(t==null)return{};var n,r,i=qme(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ume(t){var e=jn(),n=j.useRef(null),r=R3(),{type:i}=t,s=dj(t,Rme),c=h0(r,"yAxis",i),u=j.useMemo(()=>{if(c!=null)return kD(kD({},s),{},{type:c})},[c,s]);return j.useLayoutEffect(()=>{u!=null&&(n.current===null?e(lde(u)):n.current!==u&&e(cde({prev:n.current,next:u})),n.current=u)},[u,e]),j.useLayoutEffect(()=>()=>{n.current&&(e(ude(n.current)),n.current=null)},[e]),null}function Vme(t){var{yAxisId:e,className:n,width:r,label:i}=t,s=j.useRef(null),c=j.useRef(null),u=ze(GE),f=Er(),h=jn(),p="yAxis",g=ze($=>I5($,e)),y=ze($=>qse($,e)),_=ze($=>D5($,p,e,f)),E=ze($=>t5($,e));if(j.useLayoutEffect(()=>{if(!(r!=="auto"||!g||XN(i)||j.isValidElement(i)||E==null)){var $=s.current;if($){var D=$.getCalculatedWidth();Math.round(g.width)!==Math.round(D)&&h(dde({id:e,width:D}))}}},[_,g,h,i,e,r,E]),g==null||y==null||E==null)return null;var{dangerouslySetInnerHTML:w,ticks:N,scale:A}=t,R=dj(t,kme),{id:O,scale:C}=E,V=dj(E,Dme);return j.createElement(eS,uj({},R,V,{ref:s,labelRef:c,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:g.width,height:g.height,className:Ut("recharts-".concat(p," ").concat(p),n),viewBox:u,ticks:_,axisType:p}))}var Bme={allowDataOverflow:Wn.allowDataOverflow,allowDecimals:Wn.allowDecimals,allowDuplicatedCategory:Wn.allowDuplicatedCategory,angle:Wn.angle,axisLine:Ds.axisLine,hide:!1,includeHidden:Wn.includeHidden,interval:Wn.interval,label:!1,minTickGap:Wn.minTickGap,mirror:Wn.mirror,orientation:Wn.orientation,padding:Wn.padding,reversed:Wn.reversed,scale:Wn.scale,tick:Wn.tick,tickCount:Wn.tickCount,tickLine:Ds.tickLine,tickSize:Ds.tickSize,type:Wn.type,width:Wn.width,yAxisId:0},$me=t=>{var e=Dr(t,Bme);return j.createElement(j.Fragment,null,j.createElement(Ume,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),j.createElement(Vme,e))},fj=j.memo($me,oU);fj.displayName="YAxis";var Fme=(t,e)=>e,rS=ce([Fme,Ot,Z6,nr,Z5,io,ele,Jn],ole),iS=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},lU=Ui("mouseClick"),cU=um();cU.startListening({actionCreator:lU,effect:(t,e)=>{var n=t.payload,r=rS(e.getState(),iS(n));r?.activeIndex!=null&&e.dispatch(Jse({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var hj=Ui("mouseMove"),uU=um(),wg=null;uU.startListening({actionCreator:hj,effect:(t,e)=>{var n=t.payload;wg!==null&&cancelAnimationFrame(wg);var r=iS(n);wg=requestAnimationFrame(()=>{var i=e.getState(),s=qN(i,i.tooltip.settings.shared);if(s==="axis"){var c=rS(i,r);c?.activeIndex!=null?e.dispatch($5({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):e.dispatch(B5())}wg=null})}});function Hme(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var DD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},dU=Jr({name:"rootProps",initialState:DD,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:DD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Gme=dU.reducer,{updateOptions:Kme}=dU.actions,Qme=null,Wme={updatePolarOptions:(t,e)=>e.payload},fU=Jr({name:"polarOptions",initialState:Qme,reducers:Wme}),{updatePolarOptions:Lve}=fU.actions,Yme=fU.reducer,hU=Ui("keyDown"),mU=Ui("focus"),aS=um();aS.startListening({actionCreator:hU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=UN(i,Dd(n),_m(n),wm(n)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var f=io(n);if(s==="Enter"){var h=Qv(n,"axis","hover",String(i.index));e.dispatch(Jw({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var p=$se(n),g=p==="left-to-right"?1:-1,y=s==="ArrowRight"?1:-1,_=u+y*g;if(!(f==null||_>=f.length||_<0)){var E=Qv(n,"axis","hover",String(_));e.dispatch(Jw({active:!0,activeIndex:_.toString(),activeCoordinate:E}))}}}}}});aS.startListening({actionCreator:mU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",c=Qv(n,"axis","hover",String(s));e.dispatch(Jw({active:!0,activeIndex:s,activeCoordinate:c}))}}}});var Di=Ui("externalEvent"),pU=um(),C1=new Map;pU.startListening({actionCreator:Di,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=C1.get(i);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var u=e.getState(),f={activeCoordinate:Loe(u),activeDataKey:nq(u),activeIndex:Pc(u),activeLabel:tq(u),activeTooltipIndex:Pc(u),isTooltipActive:qoe(u)};n(f,r)}finally{C1.delete(i)}});C1.set(i,c)}}});var Xme=ce([Rd],t=>t.tooltipItemPayloads),Zme=ce([Xme,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(s=>s.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),gU=Ui("touchMove"),vU=um();vU.startListening({actionCreator:gU,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=qN(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var c=rS(r,iS({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));c?.activeIndex!=null&&e.dispatch($5({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var h=document.elementFromPoint(f.clientX,f.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(Lee),g=(u=h.getAttribute(qee))!==null&&u!==void 0?u:void 0,y=kd(r).find(w=>w.id===g);if(p==null||y==null||g==null)return;var{dataKey:_}=y,E=Zme(r,p,g);e.dispatch(V5({activeDataKey:_,activeIndex:p,activeCoordinate:E,activeGraphicalItemId:g}))}}}});var Jme=WL({brush:Pde,cartesianAxis:fde,chartData:Lle,errorBars:Nfe,graphicalItems:Fue,layout:_ee,legend:Ote,options:Rle,polarAxis:fue,polarOptions:Yme,referenceElements:Dde,rootProps:Gme,tooltip:eoe,zIndex:xle}),epe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return HJ({reducer:Jme,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([cU.middleware,uU.middleware,aS.middleware,pU.middleware,vU.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(u3({type:"raf"}))},devTools:{serialize:{replacer:Hme},name:"recharts-".concat(n)}})};function tpe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Er(),s=j.useRef(null);if(i)return n;s.current==null&&(s.current=epe(e,r));var c=qE;return j.createElement(ehe,{context:c,store:s.current},n)}function npe(t){var{layout:e,margin:n}=t,r=jn(),i=Er();return j.useEffect(()=>{i||(r(vee(e)),r(gee(n)))},[r,i,e,n]),null}var rpe=j.memo(npe,E0);function ipe(t){var e=jn();return j.useEffect(()=>{e(Kme(t))},[e,t]),null}function MD(t){var{zIndex:e,isPanorama:n}=t,r=j.useRef(null),i=jn();return j.useLayoutEffect(()=>(r.current&&i(ble({zIndex:e,element:r.current,isPanorama:n})),()=>{i(_le({zIndex:e,isPanorama:n}))}),[i,e,n]),j.createElement("g",{tabIndex:-1,ref:r})}function zD(t){var{children:e,isPanorama:n}=t,r=ze(cle);if(!r||r.length===0)return e;var i=r.filter(c=>c<0),s=r.filter(c=>c>0);return j.createElement(j.Fragment,null,i.map(c=>j.createElement(MD,{key:c,zIndex:c,isPanorama:n})),e,s.map(c=>j.createElement(MD,{key:c,zIndex:c,isPanorama:n})))}var ape=["children"];function spe(t,e){if(t==null)return{};var n,r,i=ope(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ope(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ny(){return ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ny.apply(null,arguments)}var lpe={width:"100%",height:"100%",display:"block"},cpe=j.forwardRef((t,e)=>{var n=P3(),r=I3(),i=B3();if(!Za(n)||!Za(r))return null;var{children:s,otherAttributes:c,title:u,desc:f}=t,h,p;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?p=c.role:p=i?"application":void 0),j.createElement(hL,ny({},c,{title:u,desc:f,role:p,tabIndex:h,width:n,height:r,style:lpe,ref:e}),s)}),upe=t=>{var{children:e}=t,n=ze(Xy);if(!n)return null;var{width:r,height:i,y:s,x:c}=n;return j.createElement(hL,{width:r,height:i,x:c,y:s},e)},LD=j.forwardRef((t,e)=>{var{children:n}=t,r=spe(t,ape),i=Er();return i?j.createElement(upe,null,j.createElement(zD,{isPanorama:!0},n)):j.createElement(cpe,ny({ref:e},r),j.createElement(zD,{isPanorama:!1},n))});function dpe(){var t=jn(),[e,n]=j.useState(null),r=ze(zee);return j.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;pt(s)&&s!==r&&t(bee(s))}},[e,t,r]),n}function qD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(n),!0).forEach(function(r){hpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hpe(t,e,n){return(e=mpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mpe(t){var e=ppe(t,"string");return typeof e=="symbol"?e:e+""}function ppe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function al(){return al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},al.apply(null,arguments)}var gpe=()=>(Kle(),null);function ry(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var vpe=j.forwardRef((t,e)=>{var n,r,i=j.useRef(null),[s,c]=j.useState({containerWidth:ry((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:ry((r=t.style)===null||r===void 0?void 0:r.height)}),u=j.useCallback((h,p)=>{c(g=>{var y=Math.round(h),_=Math.round(p);return g.containerWidth===y&&g.containerHeight===_?g:{containerWidth:y,containerHeight:_}})},[]),f=j.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();u(p,g);var y=E=>{var w=E[0];if(w!=null){var{width:N,height:A}=w.contentRect;u(N,A)}},_=new ResizeObserver(y);_.observe(h),i.current=_}},[e,u]);return j.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),j.createElement(j.Fragment,null,j.createElement(fm,{width:s.containerWidth,height:s.containerHeight}),j.createElement("div",al({ref:f},t)))}),ype=j.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=j.useState({containerWidth:ry(n),containerHeight:ry(r)}),c=j.useCallback((f,h)=>{s(p=>{var g=Math.round(f),y=Math.round(h);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),u=j.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null){var{width:h,height:p}=f.getBoundingClientRect();c(h,p)}},[e,c]);return j.createElement(j.Fragment,null,j.createElement(fm,{width:i.containerWidth,height:i.containerHeight}),j.createElement("div",al({ref:u},t)))}),bpe=j.forwardRef((t,e)=>{var{width:n,height:r}=t;return j.createElement(j.Fragment,null,j.createElement(fm,{width:n,height:r}),j.createElement("div",al({ref:e},t)))}),_pe=j.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?j.createElement(ype,al({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?j.createElement(bpe,al({},t,{width:n,height:r,ref:e})):j.createElement(j.Fragment,null,j.createElement(fm,{width:n,height:r}),j.createElement("div",al({ref:e},t)))});function xpe(t){return t?vpe:_pe}var wpe=j.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:c,onDoubleClick:u,onMouseDown:f,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:y,onTouchEnd:_,onTouchMove:E,onTouchStart:w,style:N,width:A,responsive:R,dispatchTouchEvents:O=!0}=t,C=j.useRef(null),V=jn(),[$,D]=j.useState(null),[I,k]=j.useState(null),U=dpe(),q=KE(),z=q?.width>0?q.width:A,M=q?.height>0?q.height:i,W=j.useCallback(se=>{U(se),typeof e=="function"&&e(se),D(se),k(se),se!=null&&(C.current=se)},[U,e,D,k]),Q=j.useCallback(se=>{V(lU(se)),V(Di({handler:s,reactEvent:se}))},[V,s]),H=j.useCallback(se=>{V(hj(se)),V(Di({handler:h,reactEvent:se}))},[V,h]),le=j.useCallback(se=>{V(B5()),V(Di({handler:p,reactEvent:se}))},[V,p]),_e=j.useCallback(se=>{V(hj(se)),V(Di({handler:g,reactEvent:se}))},[V,g]),je=j.useCallback(()=>{V(mU())},[V]),Y=j.useCallback(se=>{V(hU(se.key))},[V]),F=j.useCallback(se=>{V(Di({handler:c,reactEvent:se}))},[V,c]),te=j.useCallback(se=>{V(Di({handler:u,reactEvent:se}))},[V,u]),ye=j.useCallback(se=>{V(Di({handler:f,reactEvent:se}))},[V,f]),we=j.useCallback(se=>{V(Di({handler:y,reactEvent:se}))},[V,y]),Z=j.useCallback(se=>{V(Di({handler:w,reactEvent:se}))},[V,w]),ne=j.useCallback(se=>{O&&V(gU(se)),V(Di({handler:E,reactEvent:se}))},[V,O,E]),me=j.useCallback(se=>{V(Di({handler:_,reactEvent:se}))},[V,_]),Me=xpe(R);return j.createElement(cq.Provider,{value:$},j.createElement(NX.Provider,{value:I},j.createElement(Me,{width:z??N?.width,height:M??N?.height,className:Ut("recharts-wrapper",r),style:fpe({position:"relative",cursor:"default",width:z,height:M},N),onClick:Q,onContextMenu:F,onDoubleClick:te,onFocus:je,onKeyDown:Y,onMouseDown:ye,onMouseEnter:H,onMouseLeave:le,onMouseMove:_e,onMouseUp:we,onTouchEnd:me,onTouchMove:ne,onTouchStart:Z,ref:W},j.createElement(gpe,null),n)))}),jpe=["width","height","responsive","children","className","style","compact","title","desc"];function Epe(t,e){if(t==null)return{};var n,r,i=Npe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Npe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Spe=j.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:c,style:u,compact:f,title:h,desc:p}=t,g=Epe(t,jpe),y=da(g);return f?j.createElement(j.Fragment,null,j.createElement(fm,{width:n,height:r}),j.createElement(LD,{otherAttributes:y,title:h,desc:p},s)):j.createElement(wpe,{className:c,style:u,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},j.createElement(LD,{otherAttributes:y,title:h,desc:p,ref:e},j.createElement(zde,null,s)))});function mj(){return mj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mj.apply(null,arguments)}var Ape={top:5,right:5,bottom:5,left:5},Tpe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Ape,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},yU=j.forwardRef(function(e,n){var r,i=Dr(e.categoricalChartProps,Tpe),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:h}=e,p={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return j.createElement(tpe,{preloadedState:{options:p},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:s},j.createElement(Ode,{chartData:h.data}),j.createElement(rpe,{layout:i.layout,margin:i.margin}),j.createElement(ipe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),j.createElement(Spe,mj({},i,{ref:n})))}),Cpe=["axis"],Ope=j.forwardRef((t,e)=>j.createElement(yU,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Cpe,tooltipPayloadSearcher:uq,categoricalChartProps:t,ref:e})),Ppe=["axis","item"],Ipe=j.forwardRef((t,e)=>j.createElement(yU,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ppe,tooltipPayloadSearcher:uq,categoricalChartProps:t,ref:e}));const Rpe=8,kpe=12,Dpe=14,Mpe=1;function sS(t){return t instanceof nt?t.toDate():t instanceof Date?t:t?.seconds?new Date(t.seconds*1e3):new Date(t)}function UD(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function N0(){const t=new Date,e=t.getDay(),n=e===0?-6:1-e,r=new Date(t);return r.setDate(t.getDate()+n),r.setHours(0,0,0,0),r}function zpe(){const t=N0(),e=new Date(t);return e.setDate(t.getDate()+6),e.setHours(23,59,59,999),e}function O1(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function S0(t){try{const e=Lt(rt(Ee,"quiz_results"),st("userId","==",t),jr("datePassage","desc"));return(await qt(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Erreur rcupration rsultats lve:",e),[]}}async function Lpe(t){try{const e=await S0(t);if(e.length===0)return[];const n=new Map;e.forEach(s=>{const c=s.disciplineId;n.has(c)||n.set(c,[]),n.get(c).push(s)});const r=[];n.forEach((s,c)=>{if(s.length<Mpe)return;const u=s.map(N=>N.pourcentage/100*20),f=u.reduce((N,A)=>N+A,0)/u.length;if(f>=Dpe)return;let h="stable";if(u.length>=3){const N=u.slice(0,2),A=u.slice(2,4),R=N.reduce((V,$)=>V+$,0)/N.length,O=A.reduce((V,$)=>V+$,0)/A.length,C=R-O;C>1.5?h="hausse":C<-1.5&&(h="baisse")}let p="modere";f<Rpe?p="critique":f<kpe&&(p="important");const g=u[0],y=Math.max(...u),_=Math.min(...u),E=sS(s[0].datePassage),w=s[0].disciplineNom||"Discipline inconnue";r.push({id:`lacune_${c}`,disciplineId:c,disciplineNom:w,moyenne:Math.round(f*10)/10,nombreQuiz:s.length,tendance:h,niveauUrgence:p,dernierQuizDate:E,scoreDetails:{dernierScore:Math.round(g*10)/10,meilleurScore:Math.round(y*10)/10,pireScore:Math.round(_*10)/10}})});const i={critique:0,important:1,modere:2};return r.sort((s,c)=>{const u=i[s.niveauUrgence]-i[c.niveauUrgence];return u!==0?u:s.moyenne-c.moyenne}),r}catch(e){return console.error("Erreur dtection lacunes:",e),[]}}function qpe(t){const e=[];let n=1;return t.forEach(r=>{const{id:i,disciplineNom:s,niveauUrgence:c,moyenne:u,tendance:f}=r;switch(c){case"critique":e.push({id:`reco_cours_${i}`,lacuneId:i,type:"revoir_cours",titre:` Revoir les cours de ${s}`,description:`Ta moyenne est de ${u}/20 en ${s}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:s,priorite:n++,completee:!1,dateCreation:new Date}),e.push({id:`reco_quiz_${i}`,lacuneId:i,type:"refaire_quiz",titre:` Refaire les quiz de ${s}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:s,priorite:n++,completee:!1,dateCreation:new Date});break;case"important":e.push({id:`reco_exercice_${i}`,lacuneId:i,type:"exercice_cible",titre:` Exercices cibls en ${s}`,description:`Avec ${u}/20 de moyenne, concentre-toi sur les exercices pratiques. ${f==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:s,priorite:n++,completee:!1,dateCreation:new Date}),e.push({id:`reco_cours2_${i}`,lacuneId:i,type:"revoir_cours",titre:` Rviser les points cls en ${s}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:s,priorite:n++,completee:!1,dateCreation:new Date});break;case"modere":e.push({id:`reco_consolider_${i}`,lacuneId:i,type:"refaire_quiz",titre:` Consolider tes acquis en ${s}`,description:`Tu es proche du niveau attendu (${u}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:s,priorite:n++,completee:!1,dateCreation:new Date});break}}),e}async function Upe(t){try{const e=await S0(t);if(e.length===0)return{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const n=new Set;e.forEach(w=>{const N=sS(w.datePassage),A=`${N.getFullYear()}-${N.getMonth()}-${N.getDate()}`;n.add(A)});const r=Array.from(n).map(w=>{const[N,A,R]=w.split("-").map(Number);return new Date(N,A,R)}).sort((w,N)=>N.getTime()-w.getTime()),i=r.length,s=r[0];let c=0;const u=new Date;u.setHours(0,0,0,0);const f=r[0];if(O1(f,u)<=1){c=1;for(let w=1;w<r.length&&O1(r[w],r[w-1])===1;w++)c++}let p=0,g=1;for(let w=1;w<r.length;w++)O1(r[w],r[w-1])===1?g++:(p=Math.max(p,g),g=1);p=Math.max(p,g,c);const y=N0(),_=[];for(let w=0;w<7;w++){const N=new Date(y);N.setDate(y.getDate()+w);const A=r.some(R=>UD(R,N));_.push(A)}const E=[];for(let w=0;w<4;w++){const N=new Date(y);N.setDate(y.getDate()-w*7);let A=0;for(let O=0;O<7;O++){const C=new Date(N);C.setDate(N.getDate()+O),r.some(V=>UD(V,C))&&A++}const R=Math.ceil((N.getDate()+new Date(N.getFullYear(),N.getMonth(),1).getDay())/7);E.push({semaine:w===0?"Cette sem.":`Sem. -${w}`,joursActifs:A})}return{userId:t,streakActuel:c,meilleurStreak:p,dernierJourActif:s,totalJoursActifs:i,semaineCourante:_,historiqueHebdo:E.reverse()}}catch(e){return console.error("Erreur calcul streak:",e),{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function Vpe(t,e,n){const r=[],i=N0(),s=zpe(),c=e.length>2?5:3;if(r.push({id:`obj_quiz_${t}_${i.getTime()}`,userId:t,titre:`Passer ${c} quiz cette semaine`,description:`Entrane-toi en passant au moins ${c} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:c,progression:0,statut:"en_cours",dateDebut:i,dateFin:s,recompense:' Badge "Travailleur"'}),e.length>0){const f=e[0],h=Math.min(f.moyenne+3,14);r.push({id:`obj_score_${t}_${i.getTime()}`,userId:t,titre:`Atteindre ${Math.round(h)}/20 en ${f.disciplineNom}`,description:`Ta moyenne actuelle est de ${f.moyenne}/20. Vise ${Math.round(h)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(h),progression:Math.round(f.moyenne),statut:"en_cours",disciplineId:f.disciplineId,disciplineNom:f.disciplineNom,dateDebut:i,dateFin:s,recompense:' Badge "En progrs"'})}const u=n.streakActuel>=5?7:n.streakActuel+2;return r.push({id:`obj_streak_${t}_${i.getTime()}`,userId:t,titre:`Maintenir un streak de ${u} jours`,description:`Tu es actuellement  ${n.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:u,progression:n.streakActuel,statut:n.streakActuel>=u?"atteint":"en_cours",dateDebut:i,dateFin:s,recompense:' Badge "Flamme"'}),r}function Bpe(t,e,n,r){let i=0;if(r.length>0){const g=r.reduce((y,_)=>y+_.pourcentage/100*20,0)/r.length;i=Math.min(g/20*100,100)}let s=100;const c=t.filter(g=>g.niveauUrgence==="critique").length,u=t.filter(g=>g.niveauUrgence==="important").length;s-=c*25,s-=u*15,s=Math.max(s,0);const f=Math.min(e.streakActuel/7*100,100);let h=0;n.length>0&&(h=n.filter(y=>y.statut==="atteint").length/n.length*100);const p=i*.4+s*.25+f*.2+h*.15;return Math.round(Math.min(Math.max(p,0),100))}function $pe(t,e,n){const r=N0(),i=e.filter(s=>sS(s.datePassage)>=r);return t.map(s=>{const c={...s};switch(s.type){case"quiz_count":c.progression=i.length;break;case"score_min":if(s.disciplineId){const u=i.filter(f=>f.disciplineId===s.disciplineId);if(u.length>0){const f=Math.max(...u.map(h=>h.pourcentage));c.progression=Math.round(f/100*20)}}break;case"streak":c.progression=n.streakActuel;break}return c.progression>=c.cible&&(c.statut="atteint"),c})}async function oS(t){try{const e=await Lpe(t),n=qpe(e),r=await Upe(t);let i=Vpe(t,e,r);const s=await S0(t);i=$pe(i,s,r);const c=Bpe(e,r,i,s);return{lacunes:e,recommandations:n,streak:r,objectifs:i,scoreGlobal:c}}catch(e){return console.error("Erreur suivi complet:",e),{lacunes:[],recommandations:[],streak:{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function iy(t){switch(t){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function bU(t){switch(t){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function _U(t){switch(t){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function Fpe(t){return t>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":t>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":t>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":t>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function Hpe(t){return t.cible===0?0:Math.min(Math.round(t.progression/t.cible*100),100)}const Gpe="PEDA",Kpe=4,Qpe=5,Wpe=40,xU=5;function Ps(t){return t instanceof nt?t.toDate():t instanceof Date?t:t?.seconds?new Date(t.seconds*1e3):new Date(t)}function wU(t){const e=new Date,n=e.getDay(),r=n===0?-6:1-n,i=new Date(e);return i.setDate(e.getDate()+r),i.setHours(0,0,0,0),i}function Ype(t){const e=wU(),n=new Date(e);return n.setDate(e.getDate()+6),n.setHours(23,59,59,999),n}function VD(t){const e=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${t.getDate()} ${e[t.getMonth()]}`}function jU(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function Xpe(t){try{const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="",r="";for(let c=0;c<Kpe;c++)n+=e.charAt(Math.floor(Math.random()*e.length)),r+=e.charAt(Math.floor(Math.random()*e.length));const i=`${Gpe}-${n}-${r}`,s=Xe(Ee,"users",t);return await wn(s,{codeParent:i,codeParentGenere:new Date}),i}catch(e){throw console.error("Erreur gnration code invitation:",e),new Error("Impossible de gnrer le code d'invitation")}}async function Zpe(t){try{const e=Xe(Ee,"users",t),n=await Li(e);if(!n.exists())throw new Error("lve introuvable");const r=n.data();return r.codeParent?r.codeParent:await Xpe(t)}catch(e){throw console.error("Erreur rcupration code invitation:",e),new Error("Impossible de rcuprer le code d'invitation")}}async function Jpe(t,e){try{const n=e.trim().toUpperCase(),r=rt(Ee,"users"),i=Lt(r,st("codeParent","==",n),st("role","==","eleve"),hl(1)),s=await qt(i);if(s.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const c=s.docs[0],u=c.data(),f=c.id,h=rt(Ee,"liens_parent_enfant"),p=Lt(h,st("parentId","==",t),st("enfantId","==",f),st("statut","==","actif"),hl(1));if(!(await qt(p)).empty)throw new Error("Cet enfant est dj li  votre compte.");const y={parentId:t,enfantId:f,enfantNom:u.displayName||u.email,enfantEmail:u.email,enfantClasse:u.classe||void 0,codeInvitation:n,statut:"actif",dateCreation:new Date};return{id:(await Bi(h,y)).id,...y}}catch(n){throw console.error("Erreur liaison parent-enfant:",n),n}}async function ege(t){try{const e=rt(Ee,"liens_parent_enfant"),n=Lt(e,st("parentId","==",t),st("statut","==","actif"),jr("dateCreation","desc"));return(await qt(n)).docs.map(i=>({id:i.id,...i.data(),dateCreation:Ps(i.data().dateCreation),dateDerniereConsultation:i.data().dateDerniereConsultation?Ps(i.data().dateDerniereConsultation):void 0}))}catch(e){return console.error("Erreur rcupration enfants lis:",e),[]}}async function tge(t,e){try{const n=Xe(Ee,"liens_parent_enfant",t),r=await Li(n);if(!r.exists())throw new Error("Lien introuvable");if(r.data().parentId!==e)throw new Error("Action non autorise");await wn(n,{statut:"revoque",dateRevocation:new Date})}catch(n){throw console.error("Erreur rvocation lien:",n),n}}async function nge(t,e){try{const n=rt(Ee,"liens_parent_enfant"),r=Lt(n,st("parentId","==",t),st("enfantId","==",e),st("statut","==","actif"),hl(1)),i=await qt(r);if(i.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const s=Xe(Ee,"users",e),c=await Li(s);if(!c.exists())throw new Error("Profil de l'enfant introuvable.");const u=c.data(),f=await oS(e),h=await S0(e),p=h.slice(0,xU).map(E=>({quizTitre:E.quizTitre||"Quiz",disciplineNom:E.disciplineNom||"Discipline",pourcentage:E.pourcentage,noteSur20:Math.round(E.pourcentage/100*20*10)/10,reussi:E.reussi,datePassage:Ps(E.datePassage)})),g=await rge(t,e,u.displayName||u.email,f.lacunes,f.streak,f.scoreGlobal,h),y=ige(e,u.displayName||u.email,f,h),_=i.docs[0];return await wn(Xe(Ee,"liens_parent_enfant",_.id),{dateDerniereConsultation:new Date}),{enfant:{id:e,nom:u.displayName||u.email,email:u.email,classe:u.classe||void 0,derniereConnexion:u.lastLogin?Ps(u.lastLogin):void 0},scoreGlobal:f.scoreGlobal,streak:{actuel:f.streak.streakActuel,meilleur:f.streak.meilleurStreak,semaineCourante:f.streak.semaineCourante},lacunes:f.lacunes.map(E=>({disciplineNom:E.disciplineNom,moyenne:E.moyenne,niveauUrgence:E.niveauUrgence,tendance:E.tendance})),objectifs:f.objectifs.map(E=>({titre:E.titre,progression:E.progression,cible:E.cible,statut:E.statut})),derniersQuiz:p,resume:y,alertes:g}}catch(n){throw console.error("Erreur dashboard parent:",n),n}}async function rge(t,e,n,r,i,s,c){const u=[],f=new Date;if(r.filter(p=>p.niveauUrgence==="critique").forEach(p=>{u.push({id:`alerte_parent_lacune_${p.id}`,parentId:t,enfantId:e,enfantNom:n,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${p.disciplineNom}`,message:`${n} a une moyenne de ${p.moyenne}/20 en ${p.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:f})}),i.dernierJourActif){const p=jU(Ps(i.dernierJourActif),f);p>=Qpe&&u.push({id:`alerte_parent_inactif_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"inactivite",niveau:"important",titre:` ${n} est inactif`,message:`${n} n'a pas utilis PedaClic depuis ${p} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:f})}else c.length===0&&u.push({id:`alerte_parent_jamais_actif_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"inactivite",niveau:"modere",titre:` ${n} n'a pas encore commenc`,message:`${n} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:f});s<Wpe&&c.length>0&&u.push({id:`alerte_parent_score_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"score_bas",niveau:"important",titre:` Score global bas : ${s}/100`,message:`Le score de sant global de ${n} est de ${s}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:f}),r.filter(p=>p.tendance==="hausse").forEach(p=>{u.push({id:`alerte_parent_progression_${p.id}`,parentId:t,enfantId:e,enfantNom:n,type:"progression",niveau:"info",titre:` Progression en ${p.disciplineNom}`,message:`Bonne nouvelle ! ${n} montre une tendance  la hausse en ${p.disciplineNom}.`,lue:!1,dateCreation:f})}),i.streakActuel>=5&&u.push({id:`alerte_parent_streak_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"objectif_atteint",niveau:"info",titre:` Streak de ${i.streakActuel} jours !`,message:`Flicitations ! ${n} maintient un streak de ${i.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:f});const h={critique:0,important:1,modere:2,info:3};return u.sort((p,g)=>h[p.niveau]-h[g.niveau]),u}function ige(t,e,n,r){const i=wU(),s=Ype(),c=new Date(i);c.setDate(c.getDate()-7);const u=new Date(s);u.setDate(u.getDate()-7);const f=r.filter(C=>{const V=Ps(C.datePassage);return V>=i&&V<=s}),h=r.filter(C=>{const V=Ps(C.datePassage);return V>=c&&V<=u}),p=f.slice(0,xU).map(C=>({quizTitre:C.quizTitre||"Quiz",disciplineNom:C.disciplineNom||"Discipline",pourcentage:C.pourcentage,noteSur20:Math.round(C.pourcentage/100*20*10)/10,reussi:C.reussi,datePassage:Ps(C.datePassage)})),g=age(f,h),y=new Set;f.forEach(C=>{const V=Ps(C.datePassage);y.add(`${V.getFullYear()}-${V.getMonth()}-${V.getDate()}`)});const _=f.reduce((C,V)=>C+(V.tempsEcoule||5),0);let E=0;if(h.length>0){const C=h.reduce((V,$)=>V+$.pourcentage,0)/h.length;E=Math.round(C)}let w="stable";const N=n.scoreGlobal-E;N>5?w="hausse":N<-5&&(w="baisse");const A=n.lacunes.filter(C=>C.niveauUrgence==="critique"||C.niveauUrgence==="important").map(C=>C.disciplineNom),R=n.objectifs.filter(C=>C.statut==="atteint").length,O=`${VD(i)} - ${VD(s)} ${s.getFullYear()}`;return{enfantId:t,enfantNom:e,semaine:O,dateDebut:i,dateFin:s,scoreGlobal:n.scoreGlobal,scoreGlobalPrecedent:E,evolutionScore:w,nombreQuizSemaine:f.length,tempsEstimeMinutes:Math.round(_),joursActifsSemaine:y.size,streakActuel:n.streak.streakActuel,derniersQuiz:p,evolutionDisciplines:g,lacunesCritiques:n.lacunes.filter(C=>C.niveauUrgence==="critique").length,lacunesImportantes:n.lacunes.filter(C=>C.niveauUrgence==="important").length,disciplinesEnDifficulte:A,objectifsAtteints:R,objectifsTotal:n.objectifs.length}}function age(t,e){const n=new Map;t.forEach(s=>{n.has(s.disciplineId)||n.set(s.disciplineId,{scores:[],nom:s.disciplineNom||"Discipline"}),n.get(s.disciplineId).scores.push(s.pourcentage)});const r=new Map;e.forEach(s=>{r.has(s.disciplineId)||r.set(s.disciplineId,[]),r.get(s.disciplineId).push(s.pourcentage)});const i=[];return n.forEach((s,c)=>{const u=s.scores.reduce((E,w)=>E+w,0)/s.scores.length,f=r.get(c)||[],h=f.length>0?f.reduce((E,w)=>E+w,0)/f.length:u,p=Math.round(u/100*20*10)/10,g=Math.round(h/100*20*10)/10,y=Math.round((p-g)*10)/10;let _="stable";y>1?_="hausse":y<-1&&(_="baisse"),i.push({disciplineNom:s.nom,disciplineId:c,moyenneSemainePrecedente:g,moyenneSemaineCourante:p,evolution:_,ecart:y})}),i}function sge(t){return iy(t)}function oge(t){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[t]||"Alerte"}function BD(t){switch(t){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function lge(t){return t>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":t>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":t>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":t>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function P1(t){const n=jU(t,new Date);return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaine(s)`:`Il y a ${Math.floor(n/30)} mois`}const cge="PROF",uge=4,jg="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",EU=8,dge=7,fge=16;function Rc(t){return t instanceof nt?t.toDate():t instanceof Date?t:t?.seconds?new nt(t.seconds,t.nanoseconds||0).toDate():new Date(t)}function hge(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function NU(){let t=0;const e=10;for(;t<e;){let n="",r="";for(let u=0;u<uge;u++)n+=jg.charAt(Math.floor(Math.random()*jg.length)),r+=jg.charAt(Math.floor(Math.random()*jg.length));const i=`${cge}-${n}-${r}`,s=Lt(rt(Ee,"groupes_prof"),st("codeInvitation","==",i),hl(1));if((await qt(s)).empty)return i;t++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function mge(t,e,n){try{const r=await NU(),i={profId:t,profNom:e,nom:n.nom.trim(),description:n.description?.trim()||"",matiereId:n.matiereId,matiereNom:n.matiereNom,classeNiveau:n.classeNiveau,codeInvitation:r,nombreInscrits:0,statut:"actif",anneeScolaire:n.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},s=await Bi(rt(Ee,"groupes_prof"),i);return console.log(` Groupe "${n.nom}" cr avec code: ${r}`),{id:s.id,...i}}catch(r){throw console.error(" Erreur cration groupe:",r),new Error("Impossible de crer le groupe. Ressayez.")}}async function SU(t){try{const e=Lt(rt(Ee,"groupes_prof"),st("profId","==",t),jr("dateCreation","desc"));return(await qt(e)).docs.map(r=>({id:r.id,...r.data(),dateCreation:Rc(r.data().dateCreation),dateMiseAJour:r.data().dateMiseAJour?Rc(r.data().dateMiseAJour):void 0}))}catch(e){throw console.error(" Erreur rcupration groupes:",e),new Error("Impossible de charger vos groupes.")}}async function pge(t){try{const e=await Li(Xe(Ee,"groupes_prof",t));if(!e.exists())return null;const n=e.data();return{id:e.id,...n,dateCreation:Rc(n.dateCreation),dateMiseAJour:n.dateMiseAJour?Rc(n.dateMiseAJour):void 0}}catch(e){return console.error(" Erreur rcupration groupe:",e),null}}async function gge(t,e){try{const n=Xe(Ee,"groupes_prof",t);await wn(n,{...e,dateMiseAJour:new Date}),console.log(` Groupe ${t} mis  jour`)}catch(n){throw console.error(" Erreur modification groupe:",n),new Error("Impossible de modifier le groupe.")}}async function vge(t){try{const e=Th(Ee),n=Lt(rt(Ee,"inscriptions_groupe"),st("groupeId","==",t));(await qt(n)).docs.forEach(i=>e.delete(i.ref)),e.delete(Xe(Ee,"groupes_prof",t)),await e.commit(),console.log(` Groupe ${t} et ses inscriptions supprims`)}catch(e){throw console.error(" Erreur suppression groupe:",e),new Error("Impossible de supprimer le groupe.")}}async function yge(t){await gge(t,{statut:"archive"})}async function bge(t){try{const e=await NU();return await wn(Xe(Ee,"groupes_prof",t),{codeInvitation:e,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${t}: ${e}`),e}catch(e){throw console.error(" Erreur rgnration code:",e),new Error("Impossible de rgnrer le code.")}}async function _ge(t,e,n,r){try{const i=r.trim().toUpperCase(),s=Lt(rt(Ee,"groupes_prof"),st("codeInvitation","==",i),hl(1)),c=await qt(s);if(c.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=c.docs[0],f=u.data();if(f.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const h=Lt(rt(Ee,"inscriptions_groupe"),st("groupeId","==",u.id),st("eleveId","==",t),st("statut","==","actif"),hl(1));if(!(await qt(h)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const g={groupeId:u.id,eleveId:t,eleveNom:e,eleveEmail:n,statut:"actif",dateInscription:new Date},y=await Bi(rt(Ee,"inscriptions_groupe"),g);return await wn(Xe(Ee,"groupes_prof",u.id),{nombreInscrits:N4(1),dateMiseAJour:new Date}),console.log(` lve ${e} inscrit au groupe "${f.nom}"`),{id:y.id,...g}}catch(i){throw console.error(" Erreur inscription groupe:",i),i}}async function A0(t,e="actif"){try{const n=Lt(rt(Ee,"inscriptions_groupe"),st("groupeId","==",t),st("statut","==",e),jr("dateInscription","asc"));return(await qt(n)).docs.map(i=>({id:i.id,...i.data(),dateInscription:Rc(i.data().dateInscription),dateRetrait:i.data().dateRetrait?Rc(i.data().dateRetrait):void 0}))}catch(n){throw console.error(" Erreur rcupration lves groupe:",n),new Error("Impossible de charger les lves du groupe.")}}async function xge(t){try{const e=Lt(rt(Ee,"inscriptions_groupe"),st("eleveId","==",t),st("statut","==","actif")),n=await qt(e);if(n.empty)return[];const r=[];for(const i of n.docs){const s=i.data().groupeId,c=await pge(s);c&&c.statut==="actif"&&r.push(c)}return r}catch(e){return console.error(" Erreur rcupration groupes lve:",e),[]}}async function wge(t,e){try{await wn(Xe(Ee,"inscriptions_groupe",t),{statut:"retire",dateRetrait:new Date}),await wn(Xe(Ee,"groupes_prof",e),{nombreInscrits:N4(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(n){throw console.error(" Erreur retrait lve:",n),new Error("Impossible de retirer l'lve du groupe.")}}async function lS(t){try{const n=(await A0(t)).map(y=>y.eleveId);if(n.length===0)return{groupeId:t,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const r=[],i=[];for(let y=0;y<n.length;y+=10)i.push(n.slice(y,y+10));for(const y of i){const _=Lt(rt(Ee,"quiz_results"),st("userId","in",y));(await qt(_)).docs.forEach(w=>r.push({id:w.id,...w.data()}))}const s=new Map;for(const y of r){const _=y.userId;s.has(_)||s.set(_,{total:0,somme:0,reussis:0});const E=s.get(_);E.total++,E.somme+=y.score||0,(y.score||0)>=10&&E.reussis++}let c=0,u=0,f=0,h=0,p=20,g=0;for(const[,y]of s){const _=y.total>0?y.somme/y.total:0;c+=_,u++,g+=y.total,_<EU&&f++,_>h&&(h=_),_<p&&(p=_)}return u===0&&(p=0),{groupeId:t,nombreEleves:n.length,moyenneClasse:u>0?Math.round(c/u*10)/10:0,tauxReussite:g>0?Math.round(Array.from(s.values()).reduce((y,_)=>y+_.reussis,0)/g*100):0,tauxParticipation:Math.round(u/n.length*100),totalQuizPasses:g,elevesEnDifficulte:f,meilleureNote:Math.round(h*10)/10,pireNote:Math.round(p*10)/10,derniereMiseAJour:new Date}}catch(e){throw console.error(" Erreur calcul stats groupe:",e),new Error("Impossible de calculer les statistiques du groupe.")}}async function jge(t){try{const e=await A0(t);if(e.length===0)return[];const n=[];for(const r of e)try{const i=await oS(r.eleveId),s=Lt(rt(Ee,"quiz_results"),st("userId","==",r.eleveId),jr("datePassage","desc")),u=(await qt(s)).docs.map(_=>_.data());let f=0,h=0,p;if(u.length>0){const _=u.reduce((E,w)=>E+(w.score||0),0);f=Math.round(_/u.length*10)/10,h=Math.round(u.filter(E=>(E.score||0)>=10).length/u.length*100),p=Rc(u[0].datePassage)}let g="stable";if(u.length>=4){const _=u.slice(0,Math.ceil(u.length/2)),E=u.slice(Math.ceil(u.length/2)),w=_.reduce((A,R)=>A+(R.score||0),0)/_.length,N=E.reduce((A,R)=>A+(R.score||0),0)/E.length;w-N>1?g="hausse":N-w>1&&(g="baisse")}const y=i.lacunes.map(_=>({disciplineNom:_.disciplineNom,chapitre:_.chapitre,moyenne:_.moyenne,niveauUrgence:_.niveauUrgence}));n.push({eleveId:r.eleveId,eleveNom:r.eleveNom,eleveEmail:r.eleveEmail,moyenne:f,totalQuiz:u.length,tauxReussite:h,scoreGlobal:i.scoreGlobal,streak:{actuel:i.streak.streakActuel,meilleur:i.streak.meilleurStreak},lacunes:y,dernierQuiz:p,tendance:g})}catch(i){console.warn(` Suivi incomplet pour lve ${r.eleveNom}:`,i),n.push({eleveId:r.eleveId,eleveNom:r.eleveNom,eleveEmail:r.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return n.sort((r,i)=>i.moyenne-r.moyenne),n}catch(e){throw console.error(" Erreur stats lves groupe:",e),new Error("Impossible de charger les statistiques des lves.")}}async function Ege(t,e){try{const r=(await A0(t)).map(y=>y.eleveId);if(r.length===0)return null;const i=await Li(Xe(Ee,"quizzes",e));if(!i.exists())return null;const s=i.data(),c=[],u=[];for(let y=0;y<r.length;y+=10)u.push(r.slice(y,y+10));for(const y of u){const _=Lt(rt(Ee,"quiz_results"),st("quizId","==",e),st("userId","in",y));(await qt(_)).docs.forEach(w=>c.push(w.data()))}if(c.length===0)return null;const f=c.map(y=>y.score||0),h=c.map(y=>y.tempsEcoule||0),p=s.questions||[],g=[];for(let y=0;y<p.length;y++){const _=p[y];let E=0;const w=new Map;for(const R of c){const O=R.reponses?.[y];O!==void 0&&(w.set(O,(w.get(O)||0)+1),O!==_.reponseCorrecte&&E++)}const N=Math.round(E/c.length*100),A=Array.from(w.entries()).filter(([R])=>R!==_.reponseCorrecte).map(([R,O])=>({reponse:_.options?.[R]||`Option ${R+1}`,nombre:O})).sort((R,O)=>O.nombre-R.nombre);g.push({questionIndex:y,questionTexte:_.question,tauxEchec:N,reponseCorrecte:_.options?.[_.reponseCorrecte]||"N/A",reponsesFrequentes:A})}return g.sort((y,_)=>_.tauxEchec-y.tauxEchec),{quizId:e,quizTitre:s.titre||"Quiz sans titre",disciplineNom:s.disciplineNom||"",totalPassages:c.length,moyenneScore:Math.round(f.reduce((y,_)=>y+_,0)/f.length*10)/10,tauxReussite:Math.round(f.filter(y=>y>=10).length/f.length*100),tempsEcouleMoyen:Math.round(h.reduce((y,_)=>y+_,0)/h.length),questionsRatees:g}}catch(n){return console.error(" Erreur analyse quiz groupe:",n),null}}async function Nge(t){try{const e=Lt(rt(Ee,"quizzes"),st("disciplineId","==",t),jr("createdAt","desc"));return(await qt(e)).docs.map(r=>({id:r.id,titre:r.data().titre||"Quiz sans titre"}))}catch(e){return console.error(" Erreur rcupration quiz par matire:",e),[]}}function Sge(t,e){const n=[],r=new Date;for(const s of t){if(s.totalQuiz>0&&s.moyenne<EU&&n.push({id:`diff-${s.eleveId}`,type:"difficulte",eleveNom:s.eleveNom,eleveId:s.eleveId,groupeNom:e,message:`${s.eleveNom} a une moyenne de ${s.moyenne}/20. Lacunes : ${s.lacunes.map(c=>c.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:s.moyenne<5?"critique":"important",dateCreation:r}),s.dernierQuiz){const c=hge(s.dernierQuiz,r);c>=dge&&n.push({id:`inact-${s.eleveId}`,type:"inactivite",eleveNom:s.eleveNom,eleveId:s.eleveId,groupeNom:e,message:`${s.eleveNom} n'a pas fait de quiz depuis ${c} jours.`,niveauUrgence:c>=14?"important":"info",dateCreation:r})}else s.totalQuiz===0&&n.push({id:`inact-${s.eleveId}`,type:"inactivite",eleveNom:s.eleveNom,eleveId:s.eleveId,groupeNom:e,message:`${s.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:r});s.tendance==="baisse"&&s.totalQuiz>=4&&n.push({id:`baisse-${s.eleveId}`,type:"baisse",eleveNom:s.eleveNom,eleveId:s.eleveId,groupeNom:e,message:`${s.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:r}),s.moyenne>=fge&&s.totalQuiz>=3&&n.push({id:`felicite-${s.eleveId}`,type:"felicitation",eleveNom:s.eleveNom,eleveId:s.eleveId,groupeNom:e,message:`${s.eleveNom} excelle avec ${s.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:r})}const i={critique:0,important:1,info:2};return n.sort((s,c)=>i[s.niveauUrgence]-i[c.niveauUrgence]),n}function Age(t,e){const n=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],r=t.map(s=>{const c=s.lacunes.map(u=>`${u.disciplineNom} (${u.moyenne}/20)`).join(" | ")||"Aucune";return[`"${s.eleveNom}"`,`"${s.eleveEmail}"`,s.moyenne.toString(),s.totalQuiz.toString(),s.tauxReussite.toString(),s.streak.actuel.toString(),`"${c}"`,s.tendance].join(",")});return"\uFEFF"+[n.join(","),...r].join(`
`)}function Tge(t,e){const n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${e}.csv`,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}const Cge=()=>{const{currentUser:t}=Vn(),[e,n]=j.useState([]),[r,i]=j.useState(!1),[s,c]=j.useState(""),[u,f]=j.useState(!0),[h,p]=j.useState(!1),[g,y]=j.useState(null),[_,E]=j.useState(null),w=j.useCallback(async()=>{if(t?.uid)try{f(!0);const A=await xge(t.uid);n(A)}catch(A){console.error("Erreur chargement groupes:",A)}finally{f(!1)}},[t?.uid]);j.useEffect(()=>{w()},[w]);const N=async A=>{if(A.preventDefault(),!(!t?.uid||!s.trim()))try{p(!0),y(null),E(null),await _ge(t.uid,t.displayName||t.email||"lve",t.email||"",s),E("Tu as rejoint le groupe avec succs ! "),c(""),i(!1),await w(),setTimeout(()=>E(null),5e3)}catch(R){y(R.message||"Impossible de rejoindre le groupe.")}finally{p(!1)}};return o.jsxs("div",{className:"rejoindre-groupe-section",children:[o.jsxs("div",{className:"rejoindre-groupe-header",children:[o.jsx("h3",{children:" Mes groupes-classes"}),o.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>i(!r),children:r?" Annuler":" Rejoindre un groupe"})]}),g&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",g,o.jsx("button",{onClick:()=>y(null),className:"prof-alert-close",children:""})]}),_&&o.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:_}),r&&o.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[o.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),o.jsxs("form",{onSubmit:N,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[o.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:s,onChange:A=>c(A.target.value.toUpperCase()),maxLength:14,disabled:h,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),o.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:h||s.length<14,children:h?" Vrification...":" Rejoindre"})]})]}),u?o.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):e.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[o.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),o.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map(A=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#1f2937"},children:A.nom}),o.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[A.matiereNom,"  Prof: ",A.profNom]})]}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},A.id))})]})},Oge=()=>{const t=kr(),{currentUser:e}=Vn(),[n,r]=j.useState(null),[i,s]=j.useState([]),[c,u]=j.useState([]),[f,h]=j.useState([]),[p,g]=j.useState([]),[y,_]=j.useState([]),[E,w]=j.useState(!0),[N,A]=j.useState("overview"),[R,O]=j.useState(null),[C,V]=j.useState(!1),[$,D]=j.useState(!1),I=async()=>{if(e){V(!0);try{const M=await Zpe(e.uid);O(M)}catch(M){console.error("Erreur gnration code parent :",M)}finally{V(!1)}}},k=()=>{R&&(navigator.clipboard.writeText(R),D(!0),setTimeout(()=>D(!1),2e3))};if(j.useEffect(()=>{(async()=>{if(e){w(!0);try{const[W,Q,H,le,_e]=await Promise.all([uX(e.uid),dX(e.uid),fX(e.uid,20),Ry(e.uid,10),aL().catch(()=>[])]);r(W),s(Q),u(H),h(le),g(_e);const je=hX(W,Q);_(je)}catch(W){console.error("Erreur chargement dashboard :",W)}finally{w(!1)}}})()},[e]),E)return o.jsxs("div",{className:"sd-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const U=y.filter(M=>M.obtenu),q=y.length,z=e?.displayName||e?.email?.split("@")[0]||"lve";return o.jsxs("div",{className:"student-dashboard",children:[o.jsxs("div",{className:"sd-welcome",children:[o.jsxs("div",{className:"sd-welcome-text",children:[o.jsxs("h1",{children:["Bienvenue, ",z," "]}),o.jsx("p",{children:n&&n.totalQuizPasses>0?`Vous avez pass ${n.totalQuizPasses} quiz${n.totalQuizPasses>1,""} avec une moyenne de ${n.moyenneGenerale}%. Continuez !`:"Commencez par passer votre premier quiz pour suivre votre progression !"})]}),e?.isPremium&&o.jsxs("span",{className:"sd-premium-badge",children:[o.jsx(mi,{size:14})," Premium"]})]}),o.jsxs("div",{className:"sd-stats-grid",children:[o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:o.jsx(oa,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsx("span",{className:"sd-stat-value",children:n?.totalQuizPasses||0}),o.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:o.jsx(MO,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",style:{color:Vu(n?.moyenneGenerale||0)},children:[n?.moyenneGenerale||0,"%"]}),o.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:o.jsx(X4,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",children:[n?.meilleurScore||0,"%"]}),o.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:o.jsx(Z4,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsx("span",{className:"sd-stat-value",children:n?.serieReussites||0}),o.jsx("span",{className:"sd-stat-label",children:"Srie en cours "})]})]})]}),o.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[o.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),o.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression depuis leur Espace Parent."}),R?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:R}),o.jsx("button",{className:"sd-btn",onClick:k,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:$?"#10b981":"#f3f4f6",color:$?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:$?" Copi !":" Copier"})]}):o.jsx("button",{className:"sd-btn sd-btn-primary",onClick:I,disabled:C,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:C?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}}),"Gnration..."]}):o.jsx(o.Fragment,{children:" Gnrer mon code"})})]}),o.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:o.jsx(Cge,{})}),o.jsxs("div",{className:"sd-tabs",children:[o.jsxs("button",{className:`sd-tab ${N==="overview"?"active":""}`,onClick:()=>A("overview"),children:[o.jsx(Xu,{size:16})," Vue d'ensemble"]}),o.jsxs("button",{className:`sd-tab ${N==="history"?"active":""}`,onClick:()=>A("history"),children:[o.jsx(H_,{size:16})," Historique"]}),o.jsxs("button",{className:`sd-tab ${N==="badges"?"active":""}`,onClick:()=>A("badges"),children:[o.jsx(Ec,{size:16})," Badges (",U.length,"/",q,")"]})]}),N==="overview"&&o.jsxs("div",{className:"sd-overview",children:[c.length>1&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(fw,{size:18})," volution de vos scores"]}),o.jsx("div",{className:"sd-chart-container",children:o.jsx(EI,{width:"100%",height:280,children:o.jsxs(Ope,{data:c,children:[o.jsx(ij,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),o.jsx(cj,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),o.jsx(fj,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),o.jsx(Pk,{formatter:M=>[`${M}%`,"Score"],labelFormatter:M=>`Date : ${M}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),o.jsx(tU,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),i.length>0&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(Xu,{size:18})," Progression par discipline"]}),o.jsx("div",{className:"sd-chart-container",children:o.jsx(EI,{width:"100%",height:280,children:o.jsxs(Ipe,{data:i,layout:"vertical",children:[o.jsx(ij,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),o.jsx(cj,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),o.jsx(fj,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),o.jsx(Pk,{formatter:M=>[`${M}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),o.jsx(sU,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:i.map((M,W)=>o.jsx(WN,{fill:Vu(M.moyenne)},W))})]})})}),o.jsx("div",{className:"sd-disc-list",children:i.map(M=>o.jsxs("div",{className:"sd-disc-card",children:[o.jsxs("div",{className:"sd-disc-header",children:[o.jsx("span",{className:"sd-disc-name",children:M.disciplineNom}),o.jsxs("span",{className:"sd-disc-tendance",children:[M.tendance==="up"&&o.jsx(fw,{size:16,className:"tendance-up"}),M.tendance==="down"&&o.jsx(gY,{size:16,className:"tendance-down"}),M.tendance==="stable"&&o.jsx(KW,{size:16,className:"tendance-stable"})]})]}),o.jsxs("div",{className:"sd-disc-stats",children:[o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",style:{color:Vu(M.moyenne)},children:[M.moyenne,"%"]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsx("span",{className:"sd-disc-stat-value",children:M.nombreQuiz}),o.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",children:[M.meilleurScore,"%"]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",children:[M.quizReussis,"/",M.nombreQuiz]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),o.jsx("div",{className:"sd-disc-bar",children:o.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${M.moyenne}%`,background:Vu(M.moyenne)}})})]},M.disciplineId))})]}),p.length>0&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(hh,{size:18})," Quiz disponibles"]}),o.jsx("div",{className:"sd-quiz-grid",children:p.slice(0,6).map(M=>{const W=M.isPremium&&!e?.isPremium;return o.jsxs("div",{className:`sd-quiz-card ${W?"locked":""}`,onClick:()=>!W&&t(`/quiz/${M.id}`),children:[M.isPremium&&o.jsxs("span",{className:"sd-quiz-badge-premium",children:[W?o.jsx(dw,{size:10}):o.jsx(mi,{size:10})," Premium"]}),o.jsx("h4",{className:"sd-quiz-title",children:M.titre}),o.jsxs("div",{className:"sd-quiz-meta",children:[o.jsxs("span",{children:[o.jsx(oa,{size:12})," ",M.questions.length," questions"]}),o.jsxs("span",{children:[o.jsx(od,{size:12})," ",M.duree," min"]})]}),!W&&o.jsxs("button",{className:"sd-quiz-play-btn",children:[o.jsx(hh,{size:14})," Commencer"]}),W&&o.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:Q=>{Q.stopPropagation(),t("/premium")},children:[o.jsx(dw,{size:14})," Dbloquer"]})]},M.id)})})]}),n&&n.totalQuizPasses===0&&o.jsxs("div",{className:"sd-empty-state",children:[o.jsx(MO,{size:48}),o.jsx("h3",{children:"Commencez votre parcours !"}),o.jsx("p",{children:"Passez votre premier quiz pour voir votre progression ici."}),p.length>0&&o.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>t(`/quiz/${p[0].id}`),children:[o.jsx(hh,{size:18})," Passer un quiz"]})]})]}),N==="history"&&o.jsx("div",{className:"sd-history",children:f.length===0?o.jsxs("div",{className:"sd-empty-state",children:[o.jsx(H_,{size:48}),o.jsx("h3",{children:"Aucun quiz pass"}),o.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):o.jsx("div",{className:"sd-history-list",children:f.map(M=>{const W=M.datePassage?.toDate?M.datePassage.toDate():new Date(M.datePassage);return o.jsxs("div",{className:`sd-history-item ${M.reussi?"success":"fail"}`,children:[o.jsx("div",{className:`sd-history-icon ${M.reussi?"success":"fail"}`,children:M.reussi?o.jsx(bn,{size:20}):o.jsx(lw,{size:20})}),o.jsxs("div",{className:"sd-history-content",children:[o.jsxs("div",{className:"sd-history-top",children:[o.jsx("span",{className:"sd-history-title",children:M.quizTitre}),o.jsx("span",{className:"sd-history-discipline",children:M.disciplineNom})]}),o.jsxs("div",{className:"sd-history-meta",children:[o.jsxs("span",{children:[o.jsx(H_,{size:12}),W.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),o.jsxs("span",{children:[o.jsx(od,{size:12})," ",lL(M.tempsEcoule)]}),o.jsxs("span",{children:[o.jsx(bn,{size:12})," ",M.bonnesReponses,"/",M.nombreQuestions]})]})]}),o.jsxs("div",{className:"sd-history-score",style:{color:Vu(M.pourcentage)},children:[o.jsxs("span",{className:"sd-history-score-value",children:[M.pourcentage,"%"]}),o.jsx("span",{className:"sd-history-score-label",children:cL(M.pourcentage)})]})]},M.id)})})}),N==="badges"&&o.jsxs("div",{className:"sd-badges",children:[o.jsxs("div",{className:"sd-badges-summary",children:[o.jsxs("div",{className:"sd-badges-circle",children:[o.jsx("span",{className:"sd-badges-count",children:U.length}),o.jsxs("span",{className:"sd-badges-total",children:["/ ",q]})]}),o.jsx("p",{children:"badges obtenus"}),o.jsx("div",{className:"sd-badges-progress",children:o.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${U.length/q*100}%`}})})]}),o.jsx("div",{className:"sd-badges-grid",children:y.map(M=>o.jsxs("div",{className:`sd-badge-card ${M.obtenu?"obtained":"locked"}`,children:[o.jsx("span",{className:"sd-badge-icon",children:M.icone}),o.jsx("h4",{className:"sd-badge-name",children:M.nom}),o.jsx("p",{className:"sd-badge-description",children:M.description}),o.jsx("span",{className:"sd-badge-condition",children:M.condition}),M.obtenu&&o.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"})]},M.id))})]})]})},Pge=()=>{const{currentUser:t}=Vn(),e=kr(),[n,r]=j.useState(null),[i,s]=j.useState(!0),[c,u]=j.useState(null),f=["L","M","M","J","V","S","D"],h=j.useCallback(async()=>{if(t?.uid)try{s(!0),u(null);const O=await oS(t.uid);r(O)}catch(O){console.error("Erreur chargement suivi:",O),u("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{s(!1)}},[t?.uid]);j.useEffect(()=>{h()},[h]);const p=(()=>{const O=new Date().getDay();return O===0?6:O-1})();if(i)return o.jsx("div",{className:"suivi-page",children:o.jsx("div",{className:"suivi-container",children:o.jsxs("div",{className:"suivi-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(c)return o.jsx("div",{className:"suivi-page",children:o.jsx("div",{className:"suivi-container",children:o.jsxs("div",{className:"suivi-error",children:[o.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),o.jsx("p",{className:"suivi-error-text",children:c}),o.jsx("button",{className:"suivi-btn-retry",onClick:h,children:" Ressayer"})]})})});if(!n)return null;const{lacunes:g,recommandations:y,streak:_,objectifs:E,scoreGlobal:w}=n,N=2*Math.PI*40,A=N-w/100*N,R=w>=60?"#10b981":w>=30?"#f59e0b":"#ef4444";return o.jsx("div",{className:"suivi-page",children:o.jsxs("div",{className:"suivi-container",children:[o.jsx("div",{className:"suivi-header",children:o.jsxs("div",{className:"suivi-header-content",children:[o.jsxs("div",{children:[o.jsx("h1",{children:" Mes points  amliorer"}),o.jsx("p",{className:"suivi-motivation",children:Fpe(w)})]}),o.jsxs("div",{className:"score-global-circle",children:[o.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),o.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:R,strokeDasharray:N,strokeDashoffset:A}),o.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:w})]}),o.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),o.jsxs("div",{className:"streak-card",children:[o.jsxs("div",{className:"streak-header",children:[o.jsx("span",{className:"streak-flamme",children:_.streakActuel>0?"":""}),o.jsxs("div",{children:[o.jsx("div",{className:"streak-nombre",children:_.streakActuel}),o.jsx("div",{className:"streak-label",children:_.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),o.jsx("div",{className:"streak-semaine",children:f.map((O,C)=>o.jsxs("div",{className:"streak-jour",children:[o.jsx("span",{className:"streak-jour-label",children:O}),o.jsx("div",{className:`streak-jour-indicateur ${_.semaineCourante[C]?"actif":"inactif"} ${C===p?"aujourd-hui":""}`,children:_.semaineCourante[C]?"":""})]},C))}),o.jsxs("div",{className:"streak-stats",children:[o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsx("span",{className:"streak-stat-value",children:_.meilleurStreak}),o.jsx("span",{className:"streak-stat-label",children:"record"})]}),o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsx("span",{className:"streak-stat-value",children:_.totalJoursActifs}),o.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),_.dernierJourActif&&o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(_.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),o.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",o.jsx("span",{className:"suivi-section-badge",children:E.length})]}),E.length>0?o.jsx("div",{className:"objectifs-grid",children:E.map(O=>{const C=Hpe(O);return o.jsxs("div",{className:`objectif-card ${O.statut==="atteint"?"atteint":""}`,children:[o.jsxs("div",{className:"objectif-header",children:[o.jsx("span",{className:"objectif-titre",children:O.titre}),O.recompense&&o.jsx("span",{className:"objectif-recompense",children:O.recompense})]}),o.jsx("p",{className:"objectif-description",children:O.description}),o.jsxs("div",{className:"objectif-progress",children:[o.jsxs("div",{className:"objectif-progress-labels",children:[o.jsxs("span",{className:"objectif-progress-value",children:[O.progression," / ",O.cible]}),o.jsxs("span",{className:"objectif-progress-cible",children:[C,"%"]})]}),o.jsx("div",{className:"objectif-progress-track",children:o.jsx("div",{className:`objectif-progress-fill ${O.statut==="atteint"?"atteint":""}`,style:{width:`${C}%`}})})]}),o.jsx("p",{className:`objectif-statut ${O.statut}`,children:O.statut==="atteint"?" Objectif atteint !":O.statut==="en_cours"?" En cours...":" Non commenc"})]},O.id)})}):o.jsxs("div",{className:"suivi-empty",children:[o.jsx("div",{className:"suivi-empty-icon",children:""}),o.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),o.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),o.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",g.length>0&&o.jsx("span",{className:"suivi-section-badge",children:g.length})]}),g.length>0?o.jsx("div",{className:"lacunes-grid",children:g.map(O=>o.jsxs("div",{className:`lacune-card ${O.niveauUrgence}`,children:[o.jsxs("div",{className:"lacune-card-header",children:[o.jsx("span",{className:"lacune-discipline",children:O.disciplineNom}),o.jsx("span",{className:`lacune-badge ${O.niveauUrgence}`,children:bU(O.niveauUrgence)})]}),o.jsxs("div",{className:"lacune-score-bar",children:[o.jsxs("div",{className:"lacune-score-labels",children:[o.jsxs("span",{className:"lacune-score-value",style:{color:iy(O.niveauUrgence)},children:[O.moyenne,"/20"]}),o.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),o.jsx("div",{className:"lacune-progress-track",children:o.jsx("div",{className:`lacune-progress-fill ${O.niveauUrgence}`,style:{width:`${O.moyenne/20*100}%`}})})]}),o.jsxs("div",{className:"lacune-details",children:[o.jsxs("span",{className:"lacune-detail-tag",children:[_U(O.tendance)," ",O.tendance]}),o.jsxs("span",{className:"lacune-detail-tag",children:[" ",O.nombreQuiz," quiz"]}),o.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",O.scoreDetails.dernierScore,"/20"]})]})]},O.id))}):o.jsxs("div",{className:"suivi-empty",children:[o.jsx("div",{className:"suivi-empty-icon",children:""}),o.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),o.jsx("p",{className:"suivi-empty-text",children:w>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),o.jsx("button",{className:"suivi-cta-btn",onClick:()=>e("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),y.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",o.jsx("span",{className:"suivi-section-badge",children:y.length})]}),o.jsx("div",{className:"recommandations-list",children:y.map(O=>o.jsxs("div",{className:"recommandation-card",children:[o.jsx("div",{className:"recommandation-priorite",children:O.priorite}),o.jsxs("div",{className:"recommandation-content",children:[o.jsx("p",{className:"recommandation-titre",children:O.titre}),o.jsx("p",{className:"recommandation-description",children:O.description}),o.jsx("span",{className:"recommandation-discipline-tag",children:O.disciplineNom})]})]},O.id))})]}),o.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:o.jsx("button",{className:"suivi-cta-btn",onClick:()=>e("/disciplines"),children:" Passer un quiz maintenant"})})]})})},Ige=["2024-2025","2025-2026","2026-2027"],Rge=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],kge=({onSelectGroupe:t})=>{const{currentUser:e}=Vn(),[n,r]=j.useState([]),[i,s]=j.useState(new Map),[c,u]=j.useState(!0),[f,h]=j.useState(null),[p,g]=j.useState(!1),[y,_]=j.useState(!1),[E,w]=j.useState(null),[N,A]=j.useState(null),[R,O]=j.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:"2024-2025"}),[C,V]=j.useState("actif"),$=j.useCallback(async()=>{if(e?.uid)try{u(!0),h(null);const W=await SU(e.uid);r(W);const Q=new Map;for(const H of W)if(H.statut==="actif")try{const le=await lS(H.id);Q.set(H.id,le)}catch{console.warn(`Stats indisponibles pour ${H.nom}`)}s(Q)}catch(W){console.error("Erreur chargement groupes:",W),h("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{u(!1)}},[e?.uid]);j.useEffect(()=>{$()},[$]);const D=async W=>{if(W.preventDefault(),!(!e?.uid||!R.nom.trim()))try{_(!0),await mge(e.uid,e.displayName||e.email||"Professeur",R),O({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:"2024-2025"}),g(!1),await $()}catch(Q){h(Q.message||"Erreur lors de la cration du groupe.")}finally{_(!1)}},I=async W=>{try{await navigator.clipboard.writeText(W),w(W),setTimeout(()=>w(null),2e3)}catch{const Q=document.createElement("textarea");Q.value=W,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q),w(W),setTimeout(()=>w(null),2e3)}},k=async W=>{try{await vge(W),A(null),await $()}catch(Q){h(Q.message)}},U=async W=>{try{await yge(W),await $()}catch(Q){h(Q.message)}},q=async W=>{try{await bge(W),await $()}catch(Q){h(Q.message)}},z=(W,Q)=>{O(H=>({...H,[W]:Q}))},M=n.filter(W=>C==="tous"?!0:W.statut===C);return c?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):o.jsxs("div",{className:"groupe-manager",children:[o.jsxs("div",{className:"groupe-manager-header",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),o.jsxs("p",{className:"groupe-manager-subtitle",children:[n.length," groupe",n.length!==1?"s":"","  Anne ",R.anneeScolaire]})]}),o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>g(!p),children:p?" Annuler":" Nouveau groupe"})]}),f&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[o.jsx("span",{children:""})," ",f,o.jsx("button",{onClick:()=>h(null),className:"prof-alert-close",children:""})]}),p&&o.jsxs("div",{className:"groupe-form-container",children:[o.jsx("h3",{children:"Crer un nouveau groupe-classe"}),o.jsxs("form",{onSubmit:D,className:"groupe-form",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),o.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:R.nom,onChange:W=>z("nom",W.target.value),required:!0,className:"prof-input",maxLength:60})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),o.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:R.description||"",onChange:W=>z("description",W.target.value),className:"prof-input",maxLength:120})]}),o.jsxs("div",{className:"prof-form-row",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),o.jsx("select",{id:"groupe-niveau",value:R.classeNiveau,onChange:W=>z("classeNiveau",W.target.value),className:"prof-select",children:Rge.map(W=>o.jsx("option",{value:W.value,children:W.label},W.value))})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),o.jsx("select",{id:"groupe-annee",value:R.anneeScolaire,onChange:W=>z("anneeScolaire",W.target.value),className:"prof-select",children:Ige.map(W=>o.jsx("option",{value:W,children:W},W))})]})]}),o.jsxs("div",{className:"prof-form-row",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-matiere-id",children:"ID Matire *"}),o.jsx("input",{id:"groupe-matiere-id",type:"text",placeholder:"Ex: maths_3eme",value:R.matiereId,onChange:W=>z("matiereId",W.target.value),required:!0,className:"prof-input"})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-matiere-nom",children:"Nom de la matire *"}),o.jsx("input",{id:"groupe-matiere-nom",type:"text",placeholder:"Ex: Mathmatiques",value:R.matiereNom,onChange:W=>z("matiereNom",W.target.value),required:!0,className:"prof-input"})]})]}),o.jsx("div",{className:"prof-form-actions",children:o.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:y||!R.nom.trim(),children:y?" Cration...":" Crer le groupe"})})]})]}),o.jsxs("div",{className:"groupe-filtres",children:[o.jsxs("button",{className:`prof-filtre-btn ${C==="actif"?"active":""}`,onClick:()=>V("actif"),children:["Actifs (",n.filter(W=>W.statut==="actif").length,")"]}),o.jsxs("button",{className:`prof-filtre-btn ${C==="archive"?"active":""}`,onClick:()=>V("archive"),children:["Archivs (",n.filter(W=>W.statut==="archive").length,")"]}),o.jsxs("button",{className:`prof-filtre-btn ${C==="tous"?"active":""}`,onClick:()=>V("tous"),children:["Tous (",n.length,")"]})]}),M.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:C==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),o.jsx("p",{children:C==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),C!=="archive"&&o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>g(!0),children:" Crer mon premier groupe"})]}):o.jsx("div",{className:"groupe-grid",children:M.map(W=>{const Q=i.get(W.id);return o.jsxs("div",{className:`groupe-card ${W.statut==="archive"?"groupe-card-archive":""}`,children:[o.jsxs("div",{className:"groupe-card-header",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"groupe-card-titre",children:W.nom}),o.jsx("span",{className:"groupe-card-matiere",children:W.matiereNom})]}),o.jsx("span",{className:`groupe-badge groupe-badge-${W.statut}`,children:W.statut==="actif"?" Actif":" Archiv"})]}),o.jsxs("div",{className:"groupe-card-infos",children:[o.jsxs("span",{children:[" ",W.classeNiveau]}),o.jsxs("span",{children:[" ",W.anneeScolaire]}),o.jsxs("span",{children:[" ",W.nombreInscrits," lve",W.nombreInscrits!==1?"s":""]})]}),o.jsxs("div",{className:"groupe-card-code",children:[o.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),o.jsxs("div",{className:"groupe-code-box",children:[o.jsx("code",{className:"groupe-code-value",children:W.codeInvitation}),o.jsx("button",{className:"prof-btn-icon",onClick:H=>{H.stopPropagation(),I(W.codeInvitation)},title:"Copier le code",children:E===W.codeInvitation?"":""}),W.statut==="actif"&&o.jsx("button",{className:"prof-btn-icon",onClick:H=>{H.stopPropagation(),q(W.id)},title:"Rgnrer le code",children:""})]})]}),Q&&Q.nombreEleves>0&&o.jsxs("div",{className:"groupe-card-stats",children:[o.jsxs("div",{className:"groupe-stat-item",children:[o.jsx("span",{className:"groupe-stat-value",children:Q.moyenneClasse}),o.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),o.jsxs("div",{className:"groupe-stat-item",children:[o.jsxs("span",{className:"groupe-stat-value",children:[Q.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),o.jsxs("div",{className:"groupe-stat-item",children:[o.jsx("span",{className:"groupe-stat-value",children:Q.elevesEnDifficulte}),o.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),o.jsxs("div",{className:"groupe-card-actions",children:[W.statut==="actif"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>t(W),children:" Voir dtails"}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>U(W.id),children:" Archiver"})]}),N===W.id?o.jsxs("div",{className:"groupe-confirm-suppression",children:[o.jsx("span",{children:"Confirmer ?"}),o.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>k(W.id),children:"Oui, supprimer"}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>A(null),children:"Non"})]}):o.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>A(W.id),children:" Supprimer"})]})]},W.id)})})]})},Dge=({groupe:t,onRetour:e})=>{const[n,r]=j.useState(null),[i,s]=j.useState([]),[c,u]=j.useState([]),[f,h]=j.useState([]),[p,g]=j.useState(null),[y,_]=j.useState(!0),[E,w]=j.useState(null),[N,A]=j.useState("apercu"),[R,O]=j.useState("moyenne_desc"),[C,V]=j.useState(null),[$,D]=j.useState(null),[I,k]=j.useState(!1),[U,q]=j.useState(null),z=j.useCallback(async()=>{try{_(!0),w(null);const[Y,F,te]=await Promise.all([lS(t.id),jge(t.id),Nge(t.matiereId)]);r(Y),s(F),h(te);const ye=Sge(F,t.nom);u(ye)}catch(Y){console.error("Erreur chargement dtail groupe:",Y),w("Impossible de charger les donnes du groupe.")}finally{_(!1)}},[t.id,t.matiereId,t.nom]);j.useEffect(()=>{z()},[z]);const M=async Y=>{try{k(!0),D(Y);const F=await Ege(t.id,Y);g(F)}catch(F){console.error("Erreur analyse quiz:",F)}finally{k(!1)}},W=()=>{const Y=Age(i,t.nom),F=`PedaClic_${t.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;Tge(Y,F)},Q=async Y=>{try{q(Y);const te=(await A0(t.id)).find(ye=>ye.eleveId===Y);te&&(await wge(te.id,t.id),await z())}catch(F){w(F.message)}finally{q(null)}},H=[...i].sort((Y,F)=>{switch(R){case"moyenne_desc":return F.moyenne-Y.moyenne;case"moyenne_asc":return Y.moyenne-F.moyenne;case"nom":return Y.eleveNom.localeCompare(F.eleveNom);case"streak":return F.streak.actuel-Y.streak.actuel;case"quiz_count":return F.totalQuiz-Y.totalQuiz;default:return 0}}),le=Y=>Y>=16?"prof-note-excellent":Y>=12?"prof-note-bien":Y>=10?"prof-note-passable":Y>=8?"prof-note-insuffisant":"prof-note-critique",_e=Y=>{switch(Y){case"hausse":return"";case"baisse":return"";default:return""}},je=Y=>{switch(Y){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return y?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsxs("p",{children:['Chargement des donnes de "',t.nom,'"...']})]}):o.jsxs("div",{className:"groupe-detail",children:[o.jsxs("div",{className:"groupe-detail-header",children:[o.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:e,children:" Retour aux groupes"}),o.jsxs("div",{className:"groupe-detail-titre-section",children:[o.jsx("h2",{className:"groupe-detail-titre",children:t.nom}),o.jsxs("p",{className:"groupe-detail-subtitle",children:[t.matiereNom,"  ",t.classeNiveau,"  ",t.anneeScolaire]})]}),o.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:W,children:" Export CSV"})]}),E&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",E,o.jsx("button",{onClick:()=>w(null),className:"prof-alert-close",children:""})]}),o.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:i.length},{id:"quiz",label:" Quiz",count:f.length},{id:"alertes",label:" Alertes",count:c.length}].map(Y=>o.jsxs("button",{className:`groupe-onglet ${N===Y.id?"active":""}`,onClick:()=>A(Y.id),children:[Y.label,Y.count!==null&&Y.count>0&&o.jsx("span",{className:"groupe-onglet-badge",children:Y.count})]},Y.id))}),N==="apercu"&&n&&o.jsxs("div",{className:"groupe-apercu",children:[o.jsxs("div",{className:"groupe-stats-grid",children:[o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:`groupe-stat-card-value ${le(n.moyenneClasse)}`,children:[n.moyenneClasse,"/20"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:"groupe-stat-card-value",children:n.nombreEleves}),o.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:"groupe-stat-card-value",children:n.totalQuizPasses}),o.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxParticipation,"%"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:`groupe-stat-card-value ${n.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:n.elevesEnDifficulte}),o.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),o.jsx("div",{className:"groupe-apercu-notes",children:o.jsxs("div",{className:"groupe-note-range",children:[o.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),o.jsxs("span",{className:"prof-note-critique",children:[n.pireNote,"/20"]}),o.jsx("div",{className:"groupe-note-barre",children:o.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${n.pireNote/20*100}%`,width:`${(n.meilleureNote-n.pireNote)/20*100}%`}})}),o.jsxs("span",{className:"prof-note-excellent",children:[n.meilleureNote,"/20"]})]})}),i.length>=3&&o.jsxs("div",{className:"groupe-apercu-classement",children:[o.jsxs("div",{className:"groupe-classement-section",children:[o.jsx("h4",{children:" Top 3"}),i.slice(0,3).map((Y,F)=>o.jsxs("div",{className:"groupe-classement-item",children:[o.jsx("span",{className:"groupe-classement-rang",children:F===0?"":F===1?"":""}),o.jsx("span",{className:"groupe-classement-nom",children:Y.eleveNom}),o.jsxs("span",{className:`groupe-classement-note ${le(Y.moyenne)}`,children:[Y.moyenne,"/20"]})]},Y.eleveId))]}),o.jsxs("div",{className:"groupe-classement-section",children:[o.jsx("h4",{children:"  surveiller"}),i.filter(Y=>Y.moyenne<8&&Y.totalQuiz>0).slice(0,3).map(Y=>o.jsxs("div",{className:"groupe-classement-item",children:[o.jsx("span",{className:"groupe-classement-rang",children:""}),o.jsx("span",{className:"groupe-classement-nom",children:Y.eleveNom}),o.jsxs("span",{className:`groupe-classement-note ${le(Y.moyenne)}`,children:[Y.moyenne,"/20"]})]},Y.eleveId)),i.filter(Y=>Y.moyenne<8&&Y.totalQuiz>0).length===0&&o.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),N==="eleves"&&o.jsxs("div",{className:"groupe-eleves",children:[o.jsxs("div",{className:"groupe-eleves-toolbar",children:[o.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),o.jsxs("select",{id:"tri-eleves",value:R,onChange:Y=>O(Y.target.value),className:"prof-select prof-select-sm",children:[o.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),o.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),o.jsx("option",{value:"nom",children:"Nom (A-Z)"}),o.jsx("option",{value:"streak",children:"Streak ()"}),o.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),o.jsxs("span",{className:"groupe-eleves-count",children:[i.length," lve",i.length!==1?"s":""]})]}),i.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Aucun lve inscrit"}),o.jsxs("p",{children:["Partagez le code ",o.jsx("strong",{children:t.codeInvitation}),"  vos lves."]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"groupe-eleves-table-wrapper",children:o.jsxs("table",{className:"groupe-eleves-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"#"}),o.jsx("th",{children:"lve"}),o.jsx("th",{children:"Moyenne"}),o.jsx("th",{children:"Quiz"}),o.jsx("th",{children:"Russite"}),o.jsx("th",{children:"Streak"}),o.jsx("th",{children:"Tendance"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:H.map((Y,F)=>o.jsxs("tr",{className:`${C===Y.eleveId?"groupe-eleve-row-active":""}`,children:[o.jsx("td",{className:"groupe-eleve-rang",children:F+1}),o.jsx("td",{className:"groupe-eleve-nom-cell",children:o.jsxs("div",{children:[o.jsx("strong",{children:Y.eleveNom}),o.jsx("span",{className:"groupe-eleve-email",children:Y.eleveEmail})]})}),o.jsx("td",{children:o.jsxs("span",{className:`groupe-note-badge ${le(Y.moyenne)}`,children:[Y.moyenne,"/20"]})}),o.jsx("td",{children:Y.totalQuiz}),o.jsxs("td",{children:[Y.tauxReussite,"%"]}),o.jsx("td",{children:o.jsxs("span",{className:"groupe-streak",children:[" ",Y.streak.actuel,"j"]})}),o.jsxs("td",{children:[_e(Y.tendance)," ",Y.tendance]}),o.jsxs("td",{className:"groupe-eleve-actions",children:[o.jsx("button",{className:"prof-btn-icon",onClick:()=>V(C===Y.eleveId?null:Y.eleveId),title:"Voir dtails",children:C===Y.eleveId?"":""}),o.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>Q(Y.eleveId),disabled:U===Y.eleveId,title:"Retirer du groupe",children:U===Y.eleveId?"":""})]})]},Y.eleveId))})]})}),C&&(()=>{const Y=i.find(F=>F.eleveId===C);return Y?o.jsxs("div",{className:"groupe-eleve-detail",children:[o.jsxs("div",{className:"groupe-eleve-detail-header",children:[o.jsxs("h3",{children:[" Dtail  ",Y.eleveNom]}),o.jsx("button",{className:"prof-btn-icon",onClick:()=>V(null),children:""})]}),o.jsxs("div",{className:"groupe-eleve-detail-grid",children:[o.jsxs("div",{className:"groupe-eleve-detail-card",children:[o.jsx("h4",{children:"Score global"}),o.jsx("div",{className:"groupe-eleve-score-circle",children:o.jsxs("span",{className:le(Y.scoreGlobal/5),children:[Y.scoreGlobal,"/100"]})})]}),o.jsxs("div",{className:"groupe-eleve-detail-card",children:[o.jsx("h4",{children:" Streak"}),o.jsxs("p",{children:["Actuel : ",o.jsxs("strong",{children:[Y.streak.actuel," jour",Y.streak.actuel!==1?"s":""]})]}),o.jsxs("p",{children:["Meilleur : ",Y.streak.meilleur," jours"]})]}),o.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[o.jsx("h4",{children:" Lacunes dtectes"}),Y.lacunes.length===0?o.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):o.jsx("ul",{className:"groupe-lacunes-liste",children:Y.lacunes.map((F,te)=>o.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${F.niveauUrgence}`,children:[o.jsxs("span",{className:"groupe-lacune-nom",children:[F.disciplineNom,F.chapitre&&`  ${F.chapitre}`]}),o.jsxs("span",{className:"groupe-lacune-moyenne",children:[F.moyenne,"/20"]}),o.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${F.niveauUrgence}`,children:F.niveauUrgence})]},te))})]})]})]}):null})()]})]}),N==="quiz"&&o.jsxs("div",{className:"groupe-quiz",children:[o.jsxs("div",{className:"groupe-quiz-selector",children:[o.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),o.jsxs("select",{id:"select-quiz",value:$||"",onChange:Y=>{Y.target.value&&M(Y.target.value)},className:"prof-select",children:[o.jsx("option",{value:"",children:" Choisir un quiz "}),f.map(Y=>o.jsx("option",{value:Y.id,children:Y.titre},Y.id))]})]}),!$&&o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Analyse par quiz"}),o.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),I&&o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Analyse en cours..."})]}),p&&!I&&o.jsxs("div",{className:"groupe-quiz-resultats",children:[o.jsxs("div",{className:"groupe-quiz-stats-header",children:[o.jsx("h3",{children:p.quizTitre}),o.jsxs("div",{className:"groupe-quiz-stats-grid",children:[o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsx("span",{className:"groupe-stat-mini-value",children:p.totalPassages}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:`groupe-stat-mini-value ${le(p.moyenneScore)}`,children:[p.moyenneScore,"/20"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:"groupe-stat-mini-value",children:[p.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(p.tempsEcouleMoyen/60),"min"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),o.jsxs("div",{className:"groupe-quiz-questions",children:[o.jsx("h4",{children:" Questions les plus rates"}),p.questionsRatees.filter(Y=>Y.tauxEchec>30).map((Y,F)=>o.jsxs("div",{className:"groupe-quiz-question-card",children:[o.jsxs("div",{className:"groupe-quiz-question-header",children:[o.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",Y.questionIndex+1]}),o.jsxs("span",{className:"groupe-quiz-question-echec",children:[Y.tauxEchec,"% d'chec"]})]}),o.jsx("p",{className:"groupe-quiz-question-texte",children:Y.questionTexte}),o.jsx("div",{className:"groupe-quiz-question-reponse",children:o.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",Y.reponseCorrecte]})}),Y.reponsesFrequentes.length>0&&o.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[o.jsx("span",{children:"Erreurs frquentes :"}),Y.reponsesFrequentes.slice(0,2).map((te,ye)=>o.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",te.reponse," (",te.nombre," lve",te.nombre>1?"s":"",")"]},ye))]})]},F)),p.questionsRatees.filter(Y=>Y.tauxEchec>30).length===0&&o.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),N==="alertes"&&o.jsx("div",{className:"groupe-alertes",children:c.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Aucune alerte"}),o.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):o.jsx("div",{className:"groupe-alertes-liste",children:c.map(Y=>o.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${Y.niveauUrgence}`,children:[o.jsxs("div",{className:"groupe-alerte-header",children:[o.jsx("span",{className:"groupe-alerte-emoji",children:je(Y.type)}),o.jsx("span",{className:"groupe-alerte-eleve",children:Y.eleveNom}),o.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${Y.niveauUrgence}`,children:Y.niveauUrgence})]}),o.jsx("p",{className:"groupe-alerte-message",children:Y.message}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{A("eleves"),V(Y.eleveId)},children:" Voir dtail"})]},Y.id))})})]})},Mge=()=>{const{currentUser:t}=Vn(),[e,n]=j.useState("overview"),[r,i]=j.useState(null),[s,c]=j.useState(0),[u,f]=j.useState(0),[h,p]=j.useState(0),[g,y]=j.useState(0),[_,E]=j.useState([]),[w,N]=j.useState(!0),A=j.useCallback(async()=>{if(t?.uid)try{N(!0);const V=(await SU(t.uid)).filter(q=>q.statut==="actif");c(V.length);let $=0,D=0,I=0,k=0;const U=[];for(const q of V)try{const z=await lS(q.id);$+=z.nombreEleves,z.nombreEleves>0&&(D+=z.moyenneClasse,I++),k+=z.elevesEnDifficulte,U.push({...q,stats:z})}catch{U.push({...q})}f($),p(I>0?Math.round(D/I*10)/10:0),y(k),E(U)}catch(C){console.error("Erreur chargement rsum prof:",C)}finally{N(!1)}},[t?.uid]);j.useEffect(()=>{A()},[A]);const R=C=>{i(C),n("detail")},O=()=>{i(null),n("groupes"),A()};return w?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement de votre espace professeur..."})]}):o.jsxs("div",{className:"prof-dashboard",children:[o.jsx("header",{className:"prof-dashboard-header",children:o.jsxs("div",{children:[o.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),o.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",t?.displayName||"Professeur"," "]})]})}),e!=="detail"&&o.jsxs("nav",{className:"prof-nav",children:[o.jsx("button",{className:`prof-nav-btn ${e==="overview"?"active":""}`,onClick:()=>n("overview"),children:" Vue d'ensemble"}),o.jsx("button",{className:`prof-nav-btn ${e==="groupes"?"active":""}`,onClick:()=>n("groupes"),children:" Mes groupes-classes"})]}),e==="overview"&&o.jsxs("div",{className:"prof-overview",children:[o.jsxs("div",{className:"prof-overview-cards",children:[o.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>n("groupes"),children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:"prof-overview-card-value",children:s}),o.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",s!==1?"s":""," actif",s!==1?"s":""]})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:"prof-overview-card-value",children:u}),o.jsxs("span",{className:"prof-overview-card-label",children:["lve",u!==1?"s":""," inscrit",u!==1?"s":""]})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),o.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:`prof-overview-card-value ${g>0?"prof-note-critique":""}`,children:g}),o.jsxs("span",{className:"prof-overview-card-label",children:["lve",g!==1?"s":""," en difficult"]})]})]})]}),_.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),o.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>n("groupes"),children:" Crer un groupe-classe"})]}):o.jsxs("div",{className:"prof-overview-groupes",children:[o.jsx("h2",{children:"Mes groupes"}),o.jsx("div",{className:"prof-overview-groupes-grid",children:_.map(C=>o.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>R(C),children:[o.jsxs("div",{className:"prof-overview-groupe-header",children:[o.jsx("h3",{children:C.nom}),o.jsx("span",{className:"prof-overview-groupe-matiere",children:C.matiereNom})]}),C.stats&&o.jsxs("div",{className:"prof-overview-groupe-stats",children:[o.jsxs("div",{children:[o.jsx("span",{className:"prof-overview-groupe-stat-value",children:C.stats.nombreEleves}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[C.stats.moyenneClasse,"/20"]}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[C.stats.tauxReussite,"%"]}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),o.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},C.id))})]})]}),e==="groupes"&&o.jsx(kge,{onSelectGroupe:R}),e==="detail"&&r&&o.jsx(Dge,{groupe:r,onRetour:O})]})},zge=()=>{const{currentUser:t}=Vn(),e=t?.uid||"",n=t?.displayName||"Parent",[r,i]=j.useState([]),[s,c]=j.useState(null),[u,f]=j.useState(null),[h,p]=j.useState(!0),[g,y]=j.useState(!1),[_,E]=j.useState(null),[w,N]=j.useState(!1),[A,R]=j.useState(""),[O,C]=j.useState(!1),[V,$]=j.useState(null),[D,I]=j.useState(null),[k,U]=j.useState("apercu");j.useEffect(()=>{q()},[e]),j.useEffect(()=>{s&&z(s)},[s]);const q=async()=>{try{p(!0),E(null);const Q=await ege(e);i(Q),Q.length===1&&c(Q[0].enfantId)}catch(Q){E("Erreur lors du chargement des enfants."),console.error(Q)}finally{p(!1)}},z=async Q=>{try{y(!0),E(null);const H=await nge(e,Q);f(H)}catch(H){E(H.message||"Erreur lors du chargement du suivi."),f(null)}finally{y(!1)}},M=async Q=>{if(Q.preventDefault(),$(null),I(null),!A.trim()){$("Veuillez saisir le code d'invitation.");return}try{C(!0);const H=await Jpe(e,A);I(`${H.enfantNom} a t ajout avec succs !`),R(""),N(!1),await q(),c(H.enfantId)}catch(H){$(H.message||"Erreur lors de la liaison.")}finally{C(!1)}},W=async Q=>{if(window.confirm(`tes-vous sr de vouloir retirer ${Q.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await tge(Q.id,e),s===Q.enfantId&&(c(null),f(null)),await q()}catch(le){E(le.message||"Erreur lors de la suppression.")}};return h?o.jsxs("div",{className:"parent-loading",children:[o.jsx("div",{className:"parent-spinner"}),o.jsx("p",{children:"Chargement de votre espace parent..."})]}):o.jsxs("div",{className:"parent-dashboard",children:[o.jsxs("header",{className:"parent-header",children:[o.jsxs("div",{className:"parent-header-info",children:[o.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),o.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",o.jsx("strong",{children:n}),"  Suivez la progression de vos enfants"]})]}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{N(!w),$(null),I(null)},children:" Ajouter un enfant"})]}),_&&o.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[o.jsxs("span",{children:[" ",_]}),o.jsx("button",{onClick:()=>E(null),children:""})]}),D&&o.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[o.jsxs("span",{children:[" ",D]}),o.jsx("button",{onClick:()=>I(null),children:""})]}),w&&o.jsxs("div",{className:"parent-form-liaison",children:[o.jsx("h3",{children:" Lier un enfant  votre compte"}),o.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),o.jsxs("form",{onSubmit:M,className:"parent-form",children:[o.jsxs("div",{className:"parent-form-group",children:[o.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),o.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:A,onChange:Q=>R(Q.target.value.toUpperCase()),maxLength:14,disabled:O,className:"parent-input"})]}),V&&o.jsxs("p",{className:"parent-form-erreur",children:[" ",V]}),o.jsxs("div",{className:"parent-form-actions",children:[o.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:O,children:O?"Vrification...":" Valider"}),o.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>N(!1),children:"Annuler"})]})]})]}),r.length===0?o.jsxs("div",{className:"parent-empty-state",children:[o.jsx("div",{className:"parent-empty-icon",children:""}),o.jsx("h2",{children:"Aucun enfant li"}),o.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>N(!0),children:" Ajouter mon premier enfant"})]}):o.jsxs("div",{className:"parent-content",children:[o.jsxs("aside",{className:"parent-sidebar",children:[o.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),o.jsx("ul",{className:"parent-enfants-liste",children:r.map(Q=>o.jsxs("li",{className:`parent-enfant-card ${s===Q.enfantId?"parent-enfant-actif":""}`,onClick:()=>c(Q.enfantId),children:[o.jsx("div",{className:"parent-enfant-avatar",children:Q.enfantNom.charAt(0).toUpperCase()}),o.jsxs("div",{className:"parent-enfant-info",children:[o.jsx("span",{className:"parent-enfant-nom",children:Q.enfantNom}),Q.enfantClasse&&o.jsx("span",{className:"parent-enfant-classe",children:Q.enfantClasse})]}),o.jsx("button",{className:"parent-enfant-supprimer",onClick:H=>{H.stopPropagation(),W(Q)},title:"Retirer cet enfant",children:""})]},Q.id))})]}),o.jsx("main",{className:"parent-main",children:s?g?o.jsxs("div",{className:"parent-loading",children:[o.jsx("div",{className:"parent-spinner"}),o.jsx("p",{children:"Chargement du suivi..."})]}):u?o.jsxs("div",{className:"parent-dashboard-detail",children:[o.jsxs("div",{className:"parent-enfant-header",children:[o.jsxs("div",{className:"parent-enfant-header-info",children:[o.jsx("h2",{children:u.enfant.nom}),u.enfant.classe&&o.jsx("span",{className:"parent-badge",children:u.enfant.classe}),u.enfant.derniereConnexion&&o.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",P1(u.enfant.derniereConnexion)]})]}),o.jsx("p",{className:"parent-message-motivation",children:lge(u.scoreGlobal)})]}),o.jsxs("div",{className:"parent-indicateurs",children:[o.jsxs("div",{className:"parent-card parent-card-score",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Score Global"}),o.jsxs("span",{className:`parent-card-value parent-score-${u.scoreGlobal>=60?"bon":u.scoreGlobal>=40?"moyen":"bas"}`,children:[u.scoreGlobal,"/100"]})]})]}),o.jsxs("div",{className:"parent-card parent-card-streak",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Streak"}),o.jsxs("span",{className:"parent-card-value",children:[u.streak.actuel," jour",u.streak.actuel>1?"s":""]})]})]}),o.jsxs("div",{className:"parent-card parent-card-lacunes",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Lacunes"}),o.jsxs("span",{className:"parent-card-value",children:[u.lacunes.length," matire",u.lacunes.length>1?"s":""]})]})]}),o.jsxs("div",{className:"parent-card parent-card-objectifs",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Objectifs"}),o.jsxs("span",{className:"parent-card-value",children:[u.objectifs.filter(Q=>Q.statut==="atteint").length,"/",u.objectifs.length]})]})]})]}),o.jsxs("div",{className:"parent-section parent-section-semaine",children:[o.jsx("h3",{children:" Activit de la semaine"}),o.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((Q,H)=>o.jsxs("div",{className:`parent-jour ${u.streak.semaineCourante[H]?"parent-jour-actif":"parent-jour-inactif"}`,children:[o.jsx("span",{className:"parent-jour-label",children:Q}),o.jsx("span",{className:"parent-jour-icon",children:u.streak.semaineCourante[H]?"":""})]},Q))})]}),o.jsxs("div",{className:"parent-onglets",children:[o.jsx("button",{className:`parent-onglet ${k==="apercu"?"parent-onglet-actif":""}`,onClick:()=>U("apercu"),children:" Aperu"}),o.jsxs("button",{className:`parent-onglet ${k==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>U("lacunes"),children:[" Lacunes (",u.lacunes.length,")"]}),o.jsxs("button",{className:`parent-onglet ${k==="alertes"?"parent-onglet-actif":""}`,onClick:()=>U("alertes"),children:[" Alertes (",u.alertes.length,")"]}),o.jsx("button",{className:`parent-onglet ${k==="resume"?"parent-onglet-actif":""}`,onClick:()=>U("resume"),children:" Rsum"})]}),o.jsxs("div",{className:"parent-onglet-contenu",children:[k==="apercu"&&o.jsxs("div",{className:"parent-tab-apercu",children:[o.jsxs("div",{className:"parent-section",children:[o.jsx("h3",{children:" Derniers quiz passs"}),u.derniersQuiz.length===0?o.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):o.jsx("div",{className:"parent-quiz-liste",children:u.derniersQuiz.map((Q,H)=>o.jsxs("div",{className:`parent-quiz-item ${Q.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[o.jsxs("div",{className:"parent-quiz-info",children:[o.jsx("span",{className:"parent-quiz-discipline",children:Q.disciplineNom}),o.jsx("span",{className:"parent-quiz-titre",children:Q.quizTitre})]}),o.jsxs("div",{className:"parent-quiz-score",children:[o.jsxs("span",{className:`parent-quiz-note ${Q.reussi?"note-ok":"note-ko"}`,children:[Q.noteSur20,"/20"]}),o.jsx("span",{className:"parent-quiz-statut",children:Q.reussi?" Russi":" chou"})]}),o.jsx("span",{className:"parent-quiz-date",children:P1(Q.datePassage)})]},H))})]}),o.jsxs("div",{className:"parent-section",children:[o.jsx("h3",{children:" Objectifs de la semaine"}),u.objectifs.length===0?o.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):o.jsx("div",{className:"parent-objectifs-liste",children:u.objectifs.map((Q,H)=>o.jsxs("div",{className:"parent-objectif-item",children:[o.jsxs("div",{className:"parent-objectif-header",children:[o.jsx("span",{className:"parent-objectif-titre",children:Q.titre}),o.jsx("span",{className:`parent-objectif-statut parent-statut-${Q.statut}`,children:Q.statut==="atteint"?" Atteint":Q.statut==="en_cours"?" En cours":Q.statut==="echoue"?" chou":" Non commenc"})]}),o.jsx("div",{className:"parent-progress-bar",children:o.jsx("div",{className:`parent-progress-fill parent-progress-${Q.statut}`,style:{width:`${Math.min(Q.progression/Q.cible*100,100)}%`}})}),o.jsxs("span",{className:"parent-objectif-detail",children:[Q.progression,"/",Q.cible]})]},H))})]})]}),k==="lacunes"&&o.jsx("div",{className:"parent-tab-lacunes",children:u.lacunes.length===0?o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):o.jsx("div",{className:"parent-lacunes-liste",children:u.lacunes.map((Q,H)=>o.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:iy(Q.niveauUrgence)},children:[o.jsxs("div",{className:"parent-lacune-header",children:[o.jsx("span",{className:"parent-lacune-discipline",children:Q.disciplineNom}),o.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:iy(Q.niveauUrgence),color:"#fff"},children:bU(Q.niveauUrgence)})]}),o.jsxs("div",{className:"parent-lacune-details",children:[o.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",o.jsxs("strong",{children:[Q.moyenne,"/20"]})]}),o.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",_U(Q.tendance)," ",Q.tendance==="hausse"?"En hausse":Q.tendance==="baisse"?"En baisse":"Stable"]})]}),o.jsx("p",{className:"parent-lacune-conseil",children:Q.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":Q.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},H))})}),k==="alertes"&&o.jsx("div",{className:"parent-tab-alertes",children:u.alertes.length===0?o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):o.jsx("div",{className:"parent-alertes-liste",children:u.alertes.map((Q,H)=>o.jsxs("div",{className:`parent-alerte-item parent-alerte-${Q.niveau}`,children:[o.jsxs("div",{className:"parent-alerte-header",children:[o.jsx("span",{className:"parent-alerte-titre",children:Q.titre}),o.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:sge(Q.niveau),color:"#fff"},children:oge(Q.type)})]}),o.jsx("p",{className:"parent-alerte-message",children:Q.message}),o.jsx("span",{className:"parent-alerte-date",children:P1(Q.dateCreation)})]},H))})}),k==="resume"&&u.resume&&o.jsxs("div",{className:"parent-tab-resume",children:[o.jsxs("div",{className:"parent-resume-header",children:[o.jsxs("h3",{children:[" Rsum : ",u.resume.semaine]}),o.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",u.resume.scoreGlobal,"/100"," ",BD(u.resume.evolutionScore)]})]}),o.jsxs("div",{className:"parent-resume-stats",children:[o.jsxs("div",{className:"parent-resume-stat",children:[o.jsx("span",{className:"parent-resume-stat-value",children:u.resume.nombreQuizSemaine}),o.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.joursActifsSemaine,"/7"]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.tempsEstimeMinutes," min"]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.objectifsAtteints,"/",u.resume.objectifsTotal]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),u.resume.evolutionDisciplines.length>0&&o.jsxs("div",{className:"parent-section",children:[o.jsx("h4",{children:" volution par matire"}),o.jsx("div",{className:"parent-evolution-liste",children:u.resume.evolutionDisciplines.map((Q,H)=>o.jsxs("div",{className:"parent-evolution-item",children:[o.jsx("span",{className:"parent-evolution-discipline",children:Q.disciplineNom}),o.jsxs("div",{className:"parent-evolution-scores",children:[o.jsxs("span",{className:"parent-evolution-prec",children:[Q.moyenneSemainePrecedente,"/20"]}),o.jsx("span",{className:"parent-evolution-fleche",children:BD(Q.evolution)}),o.jsxs("span",{className:"parent-evolution-courante",children:[Q.moyenneSemaineCourante,"/20"]}),o.jsxs("span",{className:`parent-evolution-ecart ${Q.ecart>0?"ecart-positif":Q.ecart<0?"ecart-negatif":""}`,children:["(",Q.ecart>0?"+":"",Q.ecart,")"]})]})]},H))})]}),u.resume.disciplinesEnDifficulte.length>0&&o.jsxs("div",{className:"parent-section parent-section-warning",children:[o.jsx("h4",{children:" Matires ncessitant une attention"}),o.jsx("ul",{className:"parent-disciplines-difficulte",children:u.resume.disciplinesEnDifficulte.map((Q,H)=>o.jsx("li",{children:Q},H))})]})]}),k==="resume"&&!u.resume&&o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):o.jsxs("div",{className:"parent-erreur-dashboard",children:[o.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>s&&z(s),children:" Ressayer"})]}):o.jsx("div",{className:"parent-select-enfant",children:o.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},Lge=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],qge=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],Uge=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Ks=({value:t,onChange:e,placeholder:n="Saisissez votre texte...",minHeight:r=100,maxHeight:i=400,toolbar:s=Lge,disabled:c=!1,className:u=""})=>{const f=j.useRef(null),h=j.useRef(!1),[p,g]=j.useState(!1),[y,_]=j.useState(!1);j.useEffect(()=>{f.current&&!h.current&&f.current.innerHTML!==t&&(f.current.innerHTML=t||""),h.current=!1},[t]);const E=j.useCallback(()=>{f.current&&(h.current=!0,e(f.current.innerHTML))},[e]),w=j.useCallback((O,C)=>{f.current?.focus(),document.execCommand(O,!1,C),E()},[E]),N=j.useCallback(()=>{const O=prompt("URL du lien :","https://");O&&w("createLink",O)},[w]),A=j.useCallback(()=>{w("removeFormat"),w("formatBlock","p")},[w]);j.useEffect(()=>{const O=()=>{g(!1),_(!1)};return document.addEventListener("click",O),()=>document.removeEventListener("click",O)},[]);const R=O=>{switch(O){case"bold":return o.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:C=>{C.preventDefault(),w("bold")},children:o.jsx("strong",{children:"G"})},"bold");case"italic":return o.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:C=>{C.preventDefault(),w("italic")},children:o.jsx("em",{children:"I"})},"italic");case"underline":return o.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:C=>{C.preventDefault(),w("underline")},children:o.jsx("u",{children:"S"})},"underline");case"strikethrough":return o.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:C=>{C.preventDefault(),w("strikeThrough")},children:o.jsx("s",{children:"B"})},"strike");case"heading":return o.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:C=>{C.preventDefault(),w("formatBlock","h3")},children:"H"},"heading");case"color":return o.jsxs("span",{className:"rte-dropdown-wrapper",onClick:C=>C.stopPropagation(),children:[o.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{g(!p),_(!1)},children:o.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),p&&o.jsx("div",{className:"rte-color-picker",children:qge.map(C=>o.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:C,border:C==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:V=>{V.preventDefault(),w("foreColor",C),g(!1)}},C))})]},"color");case"highlight":return o.jsxs("span",{className:"rte-dropdown-wrapper",onClick:C=>C.stopPropagation(),children:[o.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{_(!y),g(!1)},children:o.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),y&&o.jsx("div",{className:"rte-color-picker",children:Uge.map(C=>o.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:C==="transparent"?"#fff":C,border:"1px solid #ccc"},onMouseDown:V=>{V.preventDefault(),w("hiliteColor",C),_(!1)},children:C==="transparent"?"":""},C))})]},"highlight");case"alignLeft":return o.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:C=>{C.preventDefault(),w("justifyLeft")},children:""},"alignL");case"alignCenter":return o.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:C=>{C.preventDefault(),w("justifyCenter")},children:""},"alignC");case"alignRight":return o.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:C=>{C.preventDefault(),w("justifyRight")},children:""},"alignR");case"bulletList":return o.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:C=>{C.preventDefault(),w("insertUnorderedList")},children:""},"ul");case"numberedList":return o.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:C=>{C.preventDefault(),w("insertOrderedList")},children:"1"},"ol");case"subscript":return o.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:C=>{C.preventDefault(),w("subscript")},children:["X",o.jsx("sub",{children:""})]},"sub");case"superscript":return o.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:C=>{C.preventDefault(),w("superscript")},children:["X",o.jsx("sup",{children:""})]},"sup");case"link":return o.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:C=>{C.preventDefault(),N()},children:""},"link");case"clean":return o.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:C=>{C.preventDefault(),A()},children:""},"clean");default:return null}};return o.jsxs("div",{className:`rte-container ${c?"rte-disabled":""} ${u}`,children:[!c&&o.jsx("div",{className:"rte-toolbar",children:s.map(O=>R(O))}),o.jsx("div",{ref:f,className:"rte-editor",contentEditable:!c,onInput:E,onBlur:E,"data-placeholder":n,style:{minHeight:`${r}px`,maxHeight:`${i}px`},suppressContentEditableWarning:!0})]})},gd={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},ay={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},sy={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function In(t="id"){return`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function Vge(t,e){const n={id:In("q"),type:t,enonce:"",difficulte:"moyen",points:2,ordre:e};switch(t){case"qcm_unique":return{...n,typeData:{options:[{id:In("opt"),texte:"",isCorrect:!0},{id:In("opt"),texte:"",isCorrect:!1},{id:In("opt"),texte:"",isCorrect:!1},{id:In("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...n,typeData:{options:[{id:In("opt"),texte:"",isCorrect:!0},{id:In("opt"),texte:"",isCorrect:!0},{id:In("opt"),texte:"",isCorrect:!1},{id:In("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...n,typeData:{items:[{id:In("item"),texte:"",ordreCorrect:1},{id:In("item"),texte:"",ordreCorrect:2},{id:In("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...n,typeData:{paires:[{id:In("pair"),gauche:"",droite:""},{id:In("pair"),gauche:"",droite:""},{id:In("pair"),gauche:"",droite:""}]}};case"essai":return{...n,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const Nm="quizzes_v2",Bge="quiz_results_v2";async function $ge(t,e){try{const n=await Bi(rt(Ee,Nm),{...t,auteurId:e,createdAt:nn(),updatedAt:nn()});return console.log(" Quiz avanc cr :",n.id),n.id}catch(n){throw console.error(" Erreur cration quiz avanc :",n),new Error("Impossible de crer le quiz")}}async function Fge(t,e){try{const n=Xe(Ee,Nm,t);await wn(n,{...e,updatedAt:nn()}),console.log(" Quiz avanc mis  jour :",t)}catch(n){throw console.error(" Erreur mise  jour quiz :",n),new Error("Impossible de mettre  jour le quiz")}}async function Hge(t){try{await Sd(Xe(Ee,Nm,t)),console.log(" Quiz avanc supprim :",t)}catch(e){throw console.error(" Erreur suppression quiz :",e),new Error("Impossible de supprimer le quiz")}}async function AU(t){try{const e=await Li(Xe(Ee,Nm,t));if(!e.exists())return null;const n=e.data();return{id:e.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}}catch(e){throw console.error(" Erreur rcupration quiz :",e),new Error("Impossible de rcuprer le quiz")}}async function Gge(){try{const t=Lt(rt(Ee,Nm),jr("createdAt","desc"));return(await qt(t)).docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||void 0}})}catch(t){throw console.error(" Erreur rcupration tous les quiz :",t),new Error("Impossible de rcuprer les quiz")}}function Kge(t,e){let n=0,r=0;const i=[];for(const s of t.questions){r+=s.points;const c=e.find(g=>g.questionId===s.id);if(!c){i.push({questionId:s.id,type:s.type,pointsObtenus:0,pointsMax:s.points,isCorrect:!1});continue}let u=0,f=!1,h=!1,p=!1;switch(s.type){case"qcm_unique":{const y=s.typeData.options.find(_=>_.isCorrect);y&&c.selectedOptionId===y.id&&(u=s.points,f=!0);break}case"qcm_multiple":{const g=s.typeData,y=g.options.filter(A=>A.isCorrect).map(A=>A.id),_=g.options.filter(A=>!A.isCorrect).map(A=>A.id),E=c.selectedOptionIds||[],w=E.some(A=>_.includes(A)),N=E.filter(A=>y.includes(A)).length;!w&&N===y.length?(u=s.points,f=!0):g.scoringPartiel&&N>0&&!w&&(u=Math.round(s.points*N/y.length*100)/100,h=!0);break}case"drag_drop":{const g=s.typeData,y=c.ordrePropose||[],_=g.items.sort((w,N)=>w.ordreCorrect-N.ordreCorrect).map(w=>w.id);let E=0;for(let w=0;w<_.length;w++)y[w]===_[w]&&E++;E===_.length?(u=s.points,f=!0):E>0&&(u=Math.round(s.points*E/_.length*100)/100,h=!0);break}case"mise_en_relation":{const g=s.typeData,y=c.relationsProposees||{};let _=0;for(const E of g.paires)y[E.id]===E.id&&_++;_===g.paires.length?(u=s.points,f=!0):_>0&&(u=Math.round(s.points*_/g.paires.length*100)/100,h=!0);break}case"essai":{const g=s.typeData,y=c.texteReponse||"";if(g.correctionMode==="mots_cles"&&g.motsCles.length>0){const _=y.toLowerCase().replace(/<[^>]*>/g,"");let E=0,w=0;for(const N of g.motsCles)E+=N.poids,_.includes(N.mot.toLowerCase())&&(w+=N.poids);E>0&&(u=Math.round(s.points*w/E*100)/100,f=w===E,h=w>0&&w<E)}else p=!0;break}}n+=u,i.push({questionId:s.id,type:s.type,pointsObtenus:u,pointsMax:s.points,isCorrect:f,isPartiel:h,correctionManuelleRequise:p})}return{score:n,scoreMax:r,details:i}}async function Qge(t,e,n,r){try{const{score:i,scoreMax:s,details:c}=Kge(t,n),u=s>0?Math.round(i/s*20*100)/100:0,f=c.some(g=>g.correctionManuelleRequise),h={quizId:t.id,userId:e,reponses:n,score:i,scoreMax:s,note20:u,tempsEcoule:r,datePassage:new Date,reussi:u>=t.noteMinimale,correctionManuelle:f,detailsParQuestion:c},p=await Bi(rt(Ee,Bge),{...h,datePassage:nn()});return console.log(" Rsultat quiz enregistr :",p.id),{id:p.id,...h}}catch(i){throw console.error(" Erreur soumission quiz :",i),new Error("Impossible d'enregistrer le rsultat")}}const Wge=({existingQuiz:t,disciplines:e,auteurId:n,onSave:r,onCancel:i})=>{const[s,c]=j.useState(t?.titre||""),[u,f]=j.useState(t?.description||""),[h,p]=j.useState(t?.disciplineId||""),[g,y]=j.useState(t?.duree||30),[_,E]=j.useState(t?.isPremium??!0),[w,N]=j.useState(t?.noteMinimale||10),[A,R]=j.useState(t?.melangerQuestions??!1),[O,C]=j.useState(t?.melangerOptions??!1),[V,$]=j.useState(t?.afficherCorrection??!0),[D,I]=j.useState(t?.tentativesMax||0),[k,U]=j.useState(t?.questions||[]),[q,z]=j.useState(null),[M,W]=j.useState(!1),[Q,H]=j.useState(null),[le,_e]=j.useState(!1),je=j.useCallback(ne=>{const me=Vge(ne,k.length+1);U(Me=>[...Me,me]),z(k.length),_e(!1)},[k.length]),Y=j.useCallback(ne=>{confirm("Supprimer cette question ?")&&(U(me=>me.filter((se,Se)=>Se!==ne).map((se,Se)=>({...se,ordre:Se+1}))),z(null))},[]),F=j.useCallback(ne=>{U(me=>{const Me=me[ne],se={...JSON.parse(JSON.stringify(Me)),id:In("q"),ordre:me.length+1};return[...me,se]})},[]),te=j.useCallback((ne,me)=>{U(Me=>{const se=[...Me],Se=me==="up"?ne-1:ne+1;return Se<0||Se>=se.length?Me:([se[ne],se[Se]]=[se[Se],se[ne]],se.map((X,pe)=>({...X,ordre:pe+1})))}),z(me==="up"?q!==null?q-1:null:q!==null?q+1:null)},[q]),ye=j.useCallback((ne,me)=>{U(Me=>Me.map((se,Se)=>Se===ne?{...se,...me}:se))},[]),we=async()=>{if(!s.trim()){H("Le titre est obligatoire");return}if(!h){H("Slectionnez une discipline");return}if(k.length===0){H("Ajoutez au moins une question");return}for(let ne=0;ne<k.length;ne++)if(!k[ne].enonce.replace(/<[^>]*>/g,"").trim()){H(`La question ${ne+1} n'a pas d'nonc`),z(ne);return}H(null),W(!0);try{const ne={disciplineId:h,titre:s.trim(),description:u.trim()||void 0,questions:k,duree:g,isPremium:_,noteMinimale:w,melangerQuestions:A,melangerOptions:O,afficherCorrection:V,tentativesMax:D};let me;t?.id?(await Fge(t.id,ne),me=t.id):me=await $ge(ne,n),r?.(me)}catch(ne){H(ne.message||"Erreur lors de la sauvegarde")}finally{W(!1)}},Z=k.reduce((ne,me)=>ne+me.points,0);return o.jsxs("div",{className:"quiz-editor",children:[o.jsxs("div",{className:"quiz-editor__header",children:[o.jsx("h2",{children:t?" Modifier le quiz":" Nouveau quiz avanc"}),o.jsxs("div",{className:"quiz-editor__header-actions",children:[o.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",Z," pts"]}),o.jsxs("span",{className:"quiz-editor__count-badge",children:[k.length," question",k.length>1?"s":""]})]})]}),Q&&o.jsxs("div",{className:"quiz-editor__error",children:[" ",Q,o.jsx("button",{onClick:()=>H(null),children:""})]}),o.jsxs("div",{className:"quiz-editor__section",children:[o.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),o.jsxs("div",{className:"quiz-editor__grid",children:[o.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[o.jsx("label",{children:"Titre du quiz *"}),o.jsx("input",{type:"text",value:s,onChange:ne=>c(ne.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Discipline *"}),o.jsxs("select",{value:h,onChange:ne=>p(ne.target.value),className:"quiz-editor__select",children:[o.jsx("option",{value:"",children:" Slectionner "}),e.map(ne=>o.jsxs("option",{value:ne.id,children:[ne.nom," (",ne.classe,")"]},ne.id))]})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Dure (minutes)"}),o.jsx("input",{type:"number",value:g,onChange:ne=>y(Number(ne.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Note minimale (/20)"}),o.jsx("input",{type:"number",value:w,onChange:ne=>N(Number(ne.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Tentatives max (0 = illimit)"}),o.jsx("input",{type:"number",value:D,onChange:ne=>I(Number(ne.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[o.jsx("label",{children:"Description (optionnel)"}),o.jsx(Ks,{value:u,onChange:f,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),o.jsxs("div",{className:"quiz-editor__options-row",children:[o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:_,onChange:ne=>E(ne.target.checked)}),o.jsx("span",{children:" Premium"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:A,onChange:ne=>R(ne.target.checked)}),o.jsx("span",{children:" Mlanger les questions"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:O,onChange:ne=>C(ne.target.checked)}),o.jsx("span",{children:" Mlanger les options QCM"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:V,onChange:ne=>$(ne.target.checked)}),o.jsx("span",{children:" Afficher la correction"})]})]})]}),o.jsxs("div",{className:"quiz-editor__section",children:[o.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),o.jsx("div",{className:"quiz-editor__questions-list",children:k.map((ne,me)=>o.jsx(Yge,{question:ne,index:me,isActive:q===me,onToggle:()=>z(q===me?null:me),onUpdate:Me=>ye(me,Me),onDelete:()=>Y(me),onDuplicate:()=>F(me),onMoveUp:()=>te(me,"up"),onMoveDown:()=>te(me,"down"),isFirst:me===0,isLast:me===k.length-1},ne.id))}),o.jsxs("div",{className:"quiz-editor__add-wrapper",children:[o.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>_e(!le),children:"+ Ajouter une question"}),le&&o.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(gd).map(ne=>o.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>je(ne),children:[o.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:sy[ne]},children:ay[ne]}),o.jsx("span",{children:gd[ne]})]},ne))})]})]}),o.jsxs("div",{className:"quiz-editor__actions",children:[o.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:i,disabled:M,children:"Annuler"}),o.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:we,disabled:M||k.length===0,children:M?" Sauvegarde...":t?" Mettre  jour":" Crer le quiz"})]})]})},Yge=({question:t,index:e,isActive:n,onToggle:r,onUpdate:i,onDelete:s,onDuplicate:c,onMoveUp:u,onMoveDown:f,isFirst:h,isLast:p})=>{const g=sy[t.type],y=ay[t.type],_=gd[t.type],E=w=>{const N=w.replace(/<[^>]*>/g,"").trim();return N.length>80?N.substring(0,80)+"...":N||"(sans nonc)"};return o.jsxs("div",{className:`question-editor ${n?"question-editor--active":""}`,style:{borderLeftColor:g},children:[o.jsxs("div",{className:"question-editor__header",onClick:r,children:[o.jsxs("div",{className:"question-editor__header-left",children:[o.jsx("span",{className:"question-editor__number",children:e+1}),o.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:g},children:[y," ",_]}),!n&&o.jsx("span",{className:"question-editor__preview",children:E(t.enonce)})]}),o.jsxs("div",{className:"question-editor__header-right",children:[o.jsxs("span",{className:"question-editor__points",children:[t.points," pts"]}),o.jsx("span",{className:"question-editor__toggle",children:n?"":""})]})]}),n&&o.jsxs("div",{className:"question-editor__body",children:[o.jsxs("div",{className:"question-editor__toolbar",children:[o.jsx("button",{type:"button",onClick:u,disabled:h,title:"Monter",children:""}),o.jsx("button",{type:"button",onClick:f,disabled:p,title:"Descendre",children:""}),o.jsx("button",{type:"button",onClick:c,title:"Dupliquer",children:""}),o.jsx("button",{type:"button",onClick:s,className:"btn-danger",title:"Supprimer",children:""})]}),o.jsxs("div",{className:"question-editor__field",children:[o.jsx("label",{children:"nonc de la question *"}),o.jsx(Ks,{value:t.enonce,onChange:w=>i({enonce:w}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),o.jsxs("div",{className:"question-editor__params",children:[o.jsxs("div",{className:"question-editor__param",children:[o.jsx("label",{children:"Difficult"}),o.jsxs("select",{value:t.difficulte,onChange:w=>i({difficulte:w.target.value}),children:[o.jsx("option",{value:"facile",children:" Facile"}),o.jsx("option",{value:"moyen",children:" Moyen"}),o.jsx("option",{value:"difficile",children:" Difficile"})]})]}),o.jsxs("div",{className:"question-editor__param",children:[o.jsx("label",{children:"Points"}),o.jsx("input",{type:"number",value:t.points,onChange:w=>i({points:Number(w.target.value)}),min:1,max:20})]})]}),o.jsxs("div",{className:"question-editor__type-specific",children:[t.type==="qcm_unique"&&o.jsx(Xge,{data:t.typeData,onChange:w=>i({typeData:w})}),t.type==="qcm_multiple"&&o.jsx(Zge,{data:t.typeData,onChange:w=>i({typeData:w})}),t.type==="drag_drop"&&o.jsx(Jge,{data:t.typeData,onChange:w=>i({typeData:w})}),t.type==="mise_en_relation"&&o.jsx(eve,{data:t.typeData,onChange:w=>i({typeData:w})}),t.type==="essai"&&o.jsx(tve,{data:t.typeData,onChange:w=>i({typeData:w})})]}),o.jsxs("div",{className:"question-editor__field",children:[o.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),o.jsx(Ks,{value:t.explication||"",onChange:w=>i({explication:w}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},Xge=({data:t,onChange:e})=>{const n=(s,c)=>{const u=t.options.map((f,h)=>h===s?{...f,...c}:c.isCorrect===!0?{...f,isCorrect:!1}:f);e({options:u})},r=()=>{t.options.length>=6||e({options:[...t.options,{id:In("opt"),texte:"",isCorrect:!1}]})},i=s=>{t.options.length<=2||e({options:t.options.filter((c,u)=>u!==s)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),t.options.map((s,c)=>o.jsxs("div",{className:"type-editor__option-row",children:[o.jsx("input",{type:"radio",name:`qcm_unique_${s.id}`,checked:s.isCorrect,onChange:()=>n(c,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ks,{value:s.texte,onChange:u=>n(c,{texte:u}),placeholder:`Option ${c+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),s.isCorrect&&o.jsx("span",{className:"type-editor__correct-badge",children:""}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.options.length<=2,title:"Supprimer cette option",children:""})]},s.id)),t.options.length<6&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une option"})]})},Zge=({data:t,onChange:e})=>{const n=(s,c)=>{const u=t.options.map((f,h)=>h===s?{...f,...c}:f);e({...t,options:u})},r=()=>{t.options.length>=8||e({...t,options:[...t.options,{id:In("opt"),texte:"",isCorrect:!1}]})},i=s=>{t.options.length<=2||e({...t,options:t.options.filter((c,u)=>u!==s)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),t.options.map((s,c)=>o.jsxs("div",{className:"type-editor__option-row",children:[o.jsx("input",{type:"checkbox",checked:s.isCorrect,onChange:u=>n(c,{isCorrect:u.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ks,{value:s.texte,onChange:u=>n(c,{texte:u}),placeholder:`Option ${c+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),s.isCorrect&&o.jsx("span",{className:"type-editor__correct-badge",children:""}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.options.length<=2,children:""})]},s.id)),t.options.length<8&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une option"}),o.jsxs("label",{className:"type-editor__sub-option",children:[o.jsx("input",{type:"checkbox",checked:t.scoringPartiel,onChange:s=>e({...t,scoringPartiel:s.target.checked})}),o.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},Jge=({data:t,onChange:e})=>{const n=(s,c)=>{const u=t.items.map((f,h)=>h===s?{...f,...c}:f);e({...t,items:u})},r=()=>{t.items.length>=10||e({...t,items:[...t.items,{id:In("item"),texte:"",ordreCorrect:t.items.length+1}]})},i=s=>{if(t.items.length<=2)return;const c=t.items.filter((u,f)=>f!==s).map((u,f)=>({...u,ordreCorrect:f+1}));e({...t,items:c})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),o.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),o.jsxs("div",{className:"type-editor__field-inline",children:[o.jsx("label",{children:"Consigne :"}),o.jsx("input",{type:"text",value:t.consigneOrdre,onChange:s=>e({...t,consigneOrdre:s.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),t.items.map((s,c)=>o.jsxs("div",{className:"type-editor__drag-row",children:[o.jsx("span",{className:"type-editor__drag-number",children:c+1}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ks,{value:s.texte,onChange:u=>n(c,{texte:u}),placeholder:`lment ${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.items.length<=2,children:""})]},s.id)),t.items.length<10&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter un lment"})]})},eve=({data:t,onChange:e})=>{const n=(s,c)=>{const u=t.paires.map((f,h)=>h===s?{...f,...c}:f);e({paires:u})},r=()=>{t.paires.length>=8||e({paires:[...t.paires,{id:In("pair"),gauche:"",droite:""}]})},i=s=>{t.paires.length<=2||e({paires:t.paires.filter((c,u)=>u!==s)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),o.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),o.jsxs("div",{className:"type-editor__relation-header",children:[o.jsx("span",{children:"Colonne A (gauche)"}),o.jsx("span",{}),o.jsx("span",{children:"Colonne B (droite)"}),o.jsx("span",{})]}),t.paires.map((s,c)=>o.jsxs("div",{className:"type-editor__relation-row",children:[o.jsx("div",{className:"type-editor__relation-cell",children:o.jsx(Ks,{value:s.gauche,onChange:u=>n(c,{gauche:u}),placeholder:`lment A${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("span",{className:"type-editor__relation-arrow",children:""}),o.jsx("div",{className:"type-editor__relation-cell",children:o.jsx(Ks,{value:s.droite,onChange:u=>n(c,{droite:u}),placeholder:`lment B${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.paires.length<=2,children:""})]},s.id)),t.paires.length<8&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une paire"})]})},tve=({data:t,onChange:e})=>{const n=()=>{e({...t,motsCles:[...t.motsCles,{mot:"",poids:1,obligatoire:!1}]})},r=(s,c)=>{const u=t.motsCles.map((f,h)=>h===s?{...f,...c}:f);e({...t,motsCles:u})},i=s=>{e({...t,motsCles:t.motsCles.filter((c,u)=>u!==s)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),o.jsxs("div",{className:"type-editor__params-row",children:[o.jsxs("div",{className:"type-editor__param-inline",children:[o.jsx("label",{children:"Mots minimum :"}),o.jsx("input",{type:"number",value:t.nombreMotsMin||"",onChange:s=>e({...t,nombreMotsMin:Number(s.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),o.jsxs("div",{className:"type-editor__param-inline",children:[o.jsx("label",{children:"Mots maximum :"}),o.jsx("input",{type:"number",value:t.nombreMotsMax||"",onChange:s=>e({...t,nombreMotsMax:Number(s.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),o.jsxs("div",{className:"type-editor__field-inline",children:[o.jsx("label",{children:"Mode de correction :"}),o.jsxs("select",{value:t.correctionMode,onChange:s=>e({...t,correctionMode:s.target.value}),children:[o.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),o.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),o.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(t.correctionMode==="mots_cles"||t.correctionMode==="semi_auto")&&o.jsxs("div",{className:"type-editor__keywords",children:[o.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),t.motsCles.map((s,c)=>o.jsxs("div",{className:"type-editor__keyword-row",children:[o.jsx("input",{type:"text",value:s.mot,onChange:u=>r(c,{mot:u.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),o.jsxs("select",{value:s.poids,onChange:u=>r(c,{poids:Number(u.target.value)}),className:"type-editor__keyword-weight",children:[o.jsx("option",{value:1,children:"Poids 1"}),o.jsx("option",{value:2,children:"Poids 2"}),o.jsx("option",{value:3,children:"Poids 3"}),o.jsx("option",{value:4,children:"Poids 4"}),o.jsx("option",{value:5,children:"Poids 5"})]}),o.jsxs("label",{className:"type-editor__keyword-required",children:[o.jsx("input",{type:"checkbox",checked:s.obligatoire,onChange:u=>r(c,{obligatoire:u.target.checked})}),o.jsx("span",{children:"Obligatoire"})]}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),children:""})]},c)),o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un mot-cl"})]}),o.jsxs("div",{className:"type-editor__field-block",children:[o.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),o.jsx(Ks,{value:t.reponseModele||"",onChange:s=>e({...t,reponseModele:s}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},$D=()=>{const{quizId:t}=ly(),e=kr(),{currentUser:n}=Vn(),[r,i]=j.useState([]),[s,c]=j.useState(void 0),[u,f]=j.useState(!0),[h,p]=j.useState(null);return j.useEffect(()=>{(async()=>{try{f(!0);const y=await Lc.getAll();if(i(y.map(_=>({id:_.id,nom:_.nom,classe:_.classe||""}))),t){const _=await AU(t);_?c(_):p("Quiz introuvable")}}catch(y){console.error("Erreur chargement donnes:",y),p(y.message||"Erreur de chargement")}finally{f(!1)}})()},[t]),u?o.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:o.jsx("p",{children:" Chargement..."})}):h?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsxs("p",{style:{color:"#dc2626"},children:[" ",h]}),o.jsx("button",{onClick:()=>e(-1),children:" Retour"})]}):o.jsx(Wge,{existingQuiz:s?{...s,id:s.id}:void 0,disciplines:r,auteurId:n?.uid||"",onSave:g=>{alert(" Quiz sauvegard avec succs !"),e("/admin/quiz")},onCancel:()=>e(-1)})},nve=()=>{const t=kr(),{currentUser:e}=Vn(),[n,r]=j.useState([]),[i,s]=j.useState(!0),[c,u]=j.useState(null),[f,h]=j.useState(null);j.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0),u(null);const w=await Gge();r(w)}catch(w){console.error("Erreur chargement quiz:",w),u("Impossible de charger les quiz")}finally{s(!1)}},g=async w=>{try{await Hge(w),r(N=>N.filter(A=>A.id!==w)),h(null)}catch(N){console.error("Erreur suppression:",N),alert("Erreur lors de la suppression : "+N.message)}},y=w=>{const N={};return w.questions.forEach(A=>{N[A.type]=(N[A.type]||0)+1}),Object.entries(N).map(([A,R])=>`${R} ${gd[A]||A}`).join(", ")},_=w=>w?(w.toDate?w.toDate():new Date(w)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",E=w=>w.questions.reduce((N,A)=>N+A.points,0);return o.jsxs("div",{style:{padding:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),o.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[n.length," quiz cr",n.length!==1?"s":""]})]}),o.jsx("button",{onClick:()=>t("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),c&&o.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",c,o.jsx("button",{onClick:p,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),i&&o.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!i&&n.length===0&&!c&&o.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),o.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),o.jsx("button",{onClick:()=>t("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!i&&n.length>0&&o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(w=>o.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:w.titre}),w.isPremium&&o.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",w.questions.length," question",w.questions.length!==1?"s":""]}),o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",E(w)," pts"]}),o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",w.duree," min"]})]}),o.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",y(w)]}),o.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",_(w.createdAt)]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>t(`/quiz-avance/${w.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),o.jsx("button",{onClick:()=>t(`/admin/quiz/modifier/${w.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),o.jsx("button",{onClick:()=>{const N=`${window.location.origin}/quiz-avance/${w.id}`;navigator.clipboard.writeText(N).then(()=>{alert(` Lien copi !

`+N+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),f===w.id?o.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[o.jsx("button",{onClick:()=>g(w.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),o.jsx("button",{onClick:()=>h(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):o.jsx("button",{onClick:()=>h(w.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},w.id))})]})},rve=({quiz:t,userId:e,onComplete:n,onQuit:r})=>{const i=j.useMemo(()=>{let I=[...t.questions];return t.melangerQuestions&&(I=I.sort(()=>Math.random()-.5)),I},[t]),[s,c]=j.useState(0),[u,f]=j.useState(new Map),[h,p]=j.useState(t.duree*60),[g,y]=j.useState(!1),[_,E]=j.useState(null),[w,N]=j.useState(!1),A=j.useRef(Date.now());j.useEffect(()=>{if(_)return;const I=setInterval(()=>{p(k=>k<=1?(clearInterval(I),$(),0):k-1)},1e3);return()=>clearInterval(I)},[_]);const R=I=>{const k=Math.floor(I/60),U=I%60;return`${k.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`},O=i[s],C=j.useCallback((I,k)=>{f(U=>{const q=new Map(U),z=q.get(I)||{questionId:I,type:O.type};return q.set(I,{...z,...k}),q})},[O]),V=I=>{I>=0&&I<i.length&&c(I)},$=async()=>{N(!1),y(!0);try{const I=Array.from(u.values()),k=Math.round((Date.now()-A.current)/1e3),U=await Qge(t,e,I,k);E(U),n?.(U)}catch(I){alert("Erreur lors de la soumission : "+I.message)}finally{y(!1)}},D=u.size;return _?o.jsx("div",{className:"quiz-player quiz-player--results",children:o.jsxs("div",{className:"quiz-results",children:[o.jsxs("div",{className:`quiz-results__header ${_.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[o.jsx("div",{className:"quiz-results__emoji",children:_.reussi?"":""}),o.jsx("h2",{children:_.reussi?"Flicitations !":"Quiz termin"}),o.jsxs("div",{className:"quiz-results__score",children:[o.jsxs("span",{className:"quiz-results__note",children:[_.note20,"/20"]}),o.jsxs("span",{className:"quiz-results__detail",children:[_.score,"/",_.scoreMax," points"]})]}),o.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",R(_.tempsEcoule)]}),_.correctionManuelle&&o.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),t.afficherCorrection&&o.jsxs("div",{className:"quiz-results__details",children:[o.jsx("h3",{children:" Dtail des rponses"}),i.map((I,k)=>{const U=_.detailsParQuestion.find(q=>q.questionId===I.id);return o.jsxs("div",{className:`quiz-results__question ${U?.isCorrect?"quiz-results__question--correct":U?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[o.jsxs("div",{className:"quiz-results__q-header",children:[o.jsxs("span",{children:["Q",k+1," "," ",o.jsxs("span",{style:{color:sy[I.type]},children:[ay[I.type]," ",gd[I.type]]})]}),o.jsxs("span",{className:"quiz-results__q-score",children:[U?.pointsObtenus||0,"/",U?.pointsMax||I.points," pts",U?.isCorrect&&" ",U?.isPartiel&&" ",!U?.isCorrect&&!U?.isPartiel&&" "]})]}),o.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:I.enonce}}),I.explication&&o.jsxs("div",{className:"quiz-results__q-explanation",children:[o.jsx("strong",{children:" Explication :"}),o.jsx("div",{dangerouslySetInnerHTML:{__html:I.explication}})]})]},I.id)})]}),o.jsx("div",{className:"quiz-results__actions",children:o.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:r,children:"Retour au tableau de bord"})})]})}):o.jsxs("div",{className:"quiz-player",children:[o.jsxs("div",{className:"quiz-player__topbar",children:[o.jsxs("div",{className:"quiz-player__info",children:[o.jsx("span",{className:"quiz-player__title",children:t.titre}),o.jsxs("span",{className:"quiz-player__progress",children:["Question ",s+1,"/",i.length]})]}),o.jsxs("div",{className:"quiz-player__topbar-right",children:[o.jsxs("span",{className:`quiz-player__timer ${h<60?"quiz-player__timer--danger":h<300?"quiz-player__timer--warning":""}`,children:[" ",R(h)]}),o.jsxs("span",{className:"quiz-player__answered",children:[D,"/",i.length," rpondue",D>1?"s":""]})]})]}),o.jsx("div",{className:"quiz-player__progress-bar",children:o.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(s+1)/i.length*100}%`}})}),o.jsxs("div",{className:"quiz-player__question-area",children:[o.jsxs("div",{className:"quiz-player__question-meta",children:[o.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:sy[O.type]},children:[ay[O.type]," ",gd[O.type]]}),o.jsxs("span",{className:"quiz-player__points",children:[O.points," point",O.points>1?"s":""]})]}),o.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:O.enonce}}),o.jsxs("div",{className:"quiz-player__answer-area",children:[O.type==="qcm_unique"&&o.jsx(ive,{question:O,reponse:u.get(O.id),onUpdate:I=>C(O.id,I),melangerOptions:t.melangerOptions}),O.type==="qcm_multiple"&&o.jsx(ave,{question:O,reponse:u.get(O.id),onUpdate:I=>C(O.id,I),melangerOptions:t.melangerOptions}),O.type==="drag_drop"&&o.jsx(sve,{question:O,reponse:u.get(O.id),onUpdate:I=>C(O.id,I)}),O.type==="mise_en_relation"&&o.jsx(ove,{question:O,reponse:u.get(O.id),onUpdate:I=>C(O.id,I)}),O.type==="essai"&&o.jsx(lve,{question:O,reponse:u.get(O.id),onUpdate:I=>C(O.id,I)})]})]}),o.jsxs("div",{className:"quiz-player__nav",children:[o.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>V(s-1),disabled:s===0,children:" Prcdent"}),o.jsx("div",{className:"quiz-player__pagination",children:i.map((I,k)=>o.jsx("button",{className:`quiz-player__page-dot ${k===s?"quiz-player__page-dot--current":""} ${u.has(I.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>V(k),title:`Question ${k+1}`,children:k+1},I.id))}),s<i.length-1?o.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>V(s+1),children:"Suivant "}):o.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>N(!0),disabled:g,children:g?" Envoi...":" Soumettre le quiz"})]}),w&&o.jsx("div",{className:"quiz-player__modal-overlay",children:o.jsxs("div",{className:"quiz-player__modal",children:[o.jsx("h3",{children:"Soumettre le quiz ?"}),o.jsxs("p",{children:["Vous avez rpondu  ",o.jsx("strong",{children:D})," question",D>1?"s":""," sur"," ",o.jsx("strong",{children:i.length}),"."]}),D<i.length&&o.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",i.length-D," question",i.length-D>1?"s":""," sans rponse !"]}),o.jsxs("div",{className:"quiz-player__modal-actions",children:[o.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>N(!1),children:"Continuer le quiz"}),o.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:$,children:"Confirmer la soumission"})]})]})})]})},ive=({question:t,reponse:e,onUpdate:n,melangerOptions:r})=>{const i=t.typeData,s=j.useMemo(()=>r?[...i.options].sort(()=>Math.random()-.5):i.options,[i.options,r]);return o.jsx("div",{className:"player-qcm",children:s.map(c=>o.jsxs("label",{className:`player-qcm__option ${e?.selectedOptionId===c.id?"player-qcm__option--selected":""}`,children:[o.jsx("input",{type:"radio",name:`q_${t.id}`,checked:e?.selectedOptionId===c.id,onChange:()=>n({selectedOptionId:c.id})}),o.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:c.texte}})]},c.id))})},ave=({question:t,reponse:e,onUpdate:n,melangerOptions:r})=>{const i=t.typeData,s=j.useMemo(()=>r?[...i.options].sort(()=>Math.random()-.5):i.options,[i.options,r]),c=e?.selectedOptionIds||[],u=f=>{const h=c.includes(f)?c.filter(p=>p!==f):[...c,f];n({selectedOptionIds:h})};return o.jsxs("div",{className:"player-qcm",children:[o.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),s.map(f=>o.jsxs("label",{className:`player-qcm__option ${c.includes(f.id)?"player-qcm__option--selected":""}`,children:[o.jsx("input",{type:"checkbox",checked:c.includes(f.id),onChange:()=>u(f.id)}),o.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:f.texte}})]},f.id))]})},sve=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,[i,s]=j.useState(()=>e?.ordrePropose?e.ordrePropose.map(y=>r.items.find(_=>_.id===y)).filter(Boolean):[...r.items].sort(()=>Math.random()-.5)),[c,u]=j.useState(null);j.useEffect(()=>{n({ordrePropose:i.map(y=>y.id)})},[i]);const f=y=>{u(y)},h=(y,_)=>{if(y.preventDefault(),c===null||c===_)return;const E=[...i],[w]=E.splice(c,1);E.splice(_,0,w),s(E),u(_)},p=()=>{u(null)},g=(y,_)=>{const E=_==="up"?y-1:y+1;if(E<0||E>=i.length)return;const w=[...i];[w[y],w[E]]=[w[E],w[y]],s(w)};return o.jsxs("div",{className:"player-dragdrop",children:[o.jsx("p",{className:"player-dragdrop__consigne",children:r.consigneOrdre}),o.jsx("div",{className:"player-dragdrop__list",children:i.map((y,_)=>o.jsxs("div",{className:`player-dragdrop__item ${c===_?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>f(_),onDragOver:E=>h(E,_),onDragEnd:p,children:[o.jsx("span",{className:"player-dragdrop__handle",children:""}),o.jsx("span",{className:"player-dragdrop__number",children:_+1}),o.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:y.texte}}),o.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[o.jsx("button",{type:"button",onClick:()=>g(_,"up"),disabled:_===0,children:""}),o.jsx("button",{type:"button",onClick:()=>g(_,"down"),disabled:_===i.length-1,children:""})]})]},y.id))})]})},ove=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,i=j.useMemo(()=>[...r.paires].sort(()=>Math.random()-.5),[r.paires]),[s,c]=j.useState(e?.relationsProposees||{}),[u,f]=j.useState(null);j.useEffect(()=>{n({relationsProposees:s})},[s]);const h=_=>{f(_)},p=_=>{u&&(c(E=>({...E,[u]:_})),f(null))},g=_=>{c(E=>{const w={...E};return delete w[_],w})},y=new Set(Object.values(s));return o.jsxs("div",{className:"player-relation",children:[o.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),o.jsxs("div",{className:"player-relation__columns",children:[o.jsxs("div",{className:"player-relation__col",children:[o.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),r.paires.map(_=>o.jsxs("div",{className:`player-relation__item player-relation__item--left ${u===_.id?"player-relation__item--selected":""} ${s[_.id]?"player-relation__item--matched":""}`,onClick:()=>{s[_.id]?g(_.id):h(_.id)},children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:_.gauche}}),s[_.id]&&o.jsx("span",{className:"player-relation__linked",children:""})]},_.id))]}),o.jsxs("div",{className:"player-relation__col",children:[o.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),i.map(_=>o.jsxs("div",{className:`player-relation__item player-relation__item--right ${y.has(_.id)?"player-relation__item--matched":""} ${u&&!y.has(_.id)?"player-relation__item--clickable":""}`,onClick:()=>{u&&!y.has(_.id)&&p(_.id)},children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:_.droite}}),y.has(_.id)&&o.jsx("span",{className:"player-relation__linked",children:""})]},_.id))]})]})]})},lve=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,[i,s]=j.useState(e?.texteReponse||""),c=i.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return j.useEffect(()=>{n({texteReponse:i})},[i]),o.jsxs("div",{className:"player-essai",children:[o.jsxs("div",{className:"player-essai__info",children:[r.nombreMotsMin&&o.jsxs("span",{className:c<r.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",r.nombreMotsMin," mots"]}),r.nombreMotsMax&&o.jsxs("span",{className:c>r.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",r.nombreMotsMax," mots"]}),o.jsxs("span",{className:"player-essai__count",children:[c," mot",c>1?"s":""]})]}),o.jsx("textarea",{className:"player-essai__textarea",value:i,onChange:u=>s(u.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},cve=()=>{const{quizId:t}=ly(),e=kr(),{currentUser:n}=Vn(),[r,i]=j.useState(null),[s,c]=j.useState(!0),[u,f]=j.useState(null);return j.useEffect(()=>{(async()=>{if(!t){f("ID du quiz manquant"),c(!1);return}try{const p=await AU(t);if(!p){f("Quiz introuvable");return}if(p.isPremium&&!n?.isPremium){f("Ce quiz est rserv aux abonns Premium");return}i(p)}catch(p){console.error("Erreur chargement quiz:",p),f(p.message||"Impossible de charger le quiz")}finally{c(!1)}})()},[t,n]),s?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),o.jsx("p",{children:"Chargement du quiz..."})]}):u?o.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:o.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),o.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:u}),u.includes("Premium")&&o.jsx("button",{onClick:()=>e("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),o.jsx("button",{onClick:()=>e(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):r?o.jsx(rve,{quiz:r,userId:n?.uid||"",onComplete:h=>{console.log(" Quiz termin  Note:",h.note20,"/20")},onQuit:()=>e("/dashboard")}):o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx("p",{children:"Quiz introuvable"}),o.jsx("button",{onClick:()=>e(-1),children:" Retour"})]})},uve=()=>o.jsx(ZQ,{children:o.jsxs(l8,{children:[o.jsx(tn,{path:"/",element:o.jsx(Ia,{children:o.jsx(kY,{})})}),o.jsx(tn,{path:"/disciplines",element:o.jsx(Ia,{children:o.jsx(zY,{})})}),o.jsx(tn,{path:"/disciplines/:id",element:o.jsx(Ia,{children:o.jsx(UY,{})})}),o.jsx(tn,{path:"/premium",element:o.jsx(Ia,{children:o.jsx($Y,{})})}),o.jsx(tn,{path:"/connexion",element:o.jsx(DY,{})}),o.jsx(tn,{path:"/inscription",element:o.jsx(MY,{})}),o.jsx(tn,{path:"/admin",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"dashboard",children:o.jsx(HY,{})})})}),o.jsx(tn,{path:"/admin/disciplines",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"disciplines",children:o.jsx(GY,{})})})}),o.jsx(tn,{path:"/admin/chapitres",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"chapitres",children:o.jsx(KY,{})})})}),o.jsx(tn,{path:"/admin/ressources",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"ressources",children:o.jsx(QY,{})})})}),o.jsx(tn,{path:"/admin/quiz",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"quiz",children:o.jsx(eX,{})})})}),o.jsx(tn,{path:"/admin/quiz/nouveau",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"quiz",children:o.jsx($D,{})})})}),o.jsx(tn,{path:"/admin/quiz/modifier/:quizId",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"quiz",children:o.jsx($D,{})})})}),o.jsx(tn,{path:"/admin/quiz-avance",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"quiz",children:o.jsx(nve,{})})})}),o.jsx(tn,{path:"/quiz-avance/:quizId",element:o.jsx(Ia,{children:o.jsx(cve,{})})}),o.jsx(tn,{path:"/admin/utilisateurs",element:o.jsx(ws,{children:o.jsx(js,{currentPage:"utilisateurs",children:o.jsx(lX,{})})})}),o.jsx(tn,{path:"/eleve/dashboard",element:o.jsx(Ia,{children:o.jsx(Oge,{})})}),o.jsx(tn,{path:"/eleve/suivi",element:o.jsx(Ia,{children:o.jsx(Pge,{})})}),o.jsx(tn,{path:"/quiz/:quizId",element:o.jsx(Ia,{children:o.jsx(mX,{})})}),o.jsx(tn,{path:"/parent/dashboard",element:o.jsx(SE,{allowedRoles:["parent","admin"],children:o.jsx(Ia,{children:o.jsx(zge,{})})})}),o.jsx(tn,{path:"/prof/dashboard",element:o.jsx(JQ,{children:o.jsx(Ia,{children:o.jsx(Mge,{})})})}),o.jsx(tn,{path:"*",element:o.jsx(s8,{to:"/",replace:!0})})]})}),TU=document.getElementById("root");if(!TU)throw new Error("L'lment #root n'existe pas");const dve=pV.createRoot(TU);dve.render(o.jsx(FD.StrictMode,{children:o.jsx(p8,{children:o.jsx(uve,{})})}));
//# sourceMappingURL=index-a9ffOvpd.js.map
