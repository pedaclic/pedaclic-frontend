function CN(i,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in i)){const u=Object.getOwnPropertyDescriptor(r,l);u&&Object.defineProperty(i,l,u.get?u:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function ME(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Xm={exports:{}},vc={};var x0;function RN(){if(x0)return vc;x0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:i,type:r,key:d,ref:l!==void 0?l:null,props:u}}return vc.Fragment=e,vc.jsx=n,vc.jsxs=n,vc}var T0;function jN(){return T0||(T0=1,Xm.exports=RN()),Xm.exports}var c=jN(),Wm={exports:{}},Re={};var w0;function IN(){if(w0)return Re;w0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function j(k){return k===null||typeof k!="object"?null:(k=w&&k[w]||k["@@iterator"],typeof k=="function"?k:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,q={};function ee(k,J,oe){this.props=k,this.context=J,this.refs=q,this.updater=oe||z}ee.prototype.isReactComponent={},ee.prototype.setState=function(k,J){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,J,"setState")},ee.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ue(){}ue.prototype=ee.prototype;function ae(k,J,oe){this.props=k,this.context=J,this.refs=q,this.updater=oe||z}var re=ae.prototype=new ue;re.constructor=ae,L(re,ee.prototype),re.isPureReactComponent=!0;var ve=Array.isArray;function le(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function C(k,J,oe){var de=oe.ref;return{$$typeof:i,type:k,key:J,ref:de!==void 0?de:null,props:oe}}function D(k,J){return C(k.type,J,k.props)}function O(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function V(k){var J={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(oe){return J[oe]})}var R=/\/+/g;function Le(k,J){return typeof k=="object"&&k!==null&&k.key!=null?V(""+k.key):J.toString(36)}function tt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(le,le):(k.status="pending",k.then(function(J){k.status==="pending"&&(k.status="fulfilled",k.value=J)},function(J){k.status==="pending"&&(k.status="rejected",k.reason=J)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function X(k,J,oe,de,Te){var Y=typeof k;(Y==="undefined"||Y==="boolean")&&(k=null);var _e=!1;if(k===null)_e=!0;else switch(Y){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(k.$$typeof){case i:case e:_e=!0;break;case E:return _e=k._init,X(_e(k._payload),J,oe,de,Te)}}if(_e)return Te=Te(k),_e=de===""?"."+Le(k,0):de,ve(Te)?(oe="",_e!=null&&(oe=_e.replace(R,"$&/")+"/"),X(Te,J,oe,"",function(Jt){return Jt})):Te!=null&&(O(Te)&&(Te=D(Te,oe+(Te.key==null||k&&k.key===Te.key?"":(""+Te.key).replace(R,"$&/")+"/")+_e)),J.push(Te)),1;_e=0;var Qe=de===""?".":de+":";if(ve(k))for(var Ue=0;Ue<k.length;Ue++)de=k[Ue],Y=Qe+Le(de,Ue),_e+=X(de,J,oe,Y,Te);else if(Ue=j(k),typeof Ue=="function")for(k=Ue.call(k),Ue=0;!(de=k.next()).done;)de=de.value,Y=Qe+Le(de,Ue++),_e+=X(de,J,oe,Y,Te);else if(Y==="object"){if(typeof k.then=="function")return X(tt(k),J,oe,de,Te);throw J=String(k),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return _e}function ce(k,J,oe){if(k==null)return k;var de=[],Te=0;return X(k,de,"","",function(Y){return J.call(oe,Y,Te++)}),de}function pe(k){if(k._status===-1){var J=k._result;J=J(),J.then(function(oe){(k._status===0||k._status===-1)&&(k._status=1,k._result=oe)},function(oe){(k._status===0||k._status===-1)&&(k._status=2,k._result=oe)}),k._status===-1&&(k._status=0,k._result=J)}if(k._status===1)return k._result.default;throw k._result}var Pe=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},De={map:ce,forEach:function(k,J,oe){ce(k,function(){J.apply(this,arguments)},oe)},count:function(k){var J=0;return ce(k,function(){J++}),J},toArray:function(k){return ce(k,function(J){return J})||[]},only:function(k){if(!O(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Re.Activity=x,Re.Children=De,Re.Component=ee,Re.Fragment=n,Re.Profiler=l,Re.PureComponent=ae,Re.StrictMode=r,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Re.__COMPILER_RUNTIME={__proto__:null,c:function(k){return S.H.useMemoCache(k)}},Re.cache=function(k){return function(){return k.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(k,J,oe){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var de=L({},k.props),Te=k.key;if(J!=null)for(Y in J.key!==void 0&&(Te=""+J.key),J)!A.call(J,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&J.ref===void 0||(de[Y]=J[Y]);var Y=arguments.length-2;if(Y===1)de.children=oe;else if(1<Y){for(var _e=Array(Y),Qe=0;Qe<Y;Qe++)_e[Qe]=arguments[Qe+2];de.children=_e}return C(k.type,Te,de)},Re.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Re.createElement=function(k,J,oe){var de,Te={},Y=null;if(J!=null)for(de in J.key!==void 0&&(Y=""+J.key),J)A.call(J,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Te[de]=J[de]);var _e=arguments.length-2;if(_e===1)Te.children=oe;else if(1<_e){for(var Qe=Array(_e),Ue=0;Ue<_e;Ue++)Qe[Ue]=arguments[Ue+2];Te.children=Qe}if(k&&k.defaultProps)for(de in _e=k.defaultProps,_e)Te[de]===void 0&&(Te[de]=_e[de]);return C(k,Y,Te)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(k){return{$$typeof:p,render:k}},Re.isValidElement=O,Re.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:pe}},Re.memo=function(k,J){return{$$typeof:_,type:k,compare:J===void 0?null:J}},Re.startTransition=function(k){var J=S.T,oe={};S.T=oe;try{var de=k(),Te=S.S;Te!==null&&Te(oe,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(le,Pe)}catch(Y){Pe(Y)}finally{J!==null&&oe.types!==null&&(J.types=oe.types),S.T=J}},Re.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Re.use=function(k){return S.H.use(k)},Re.useActionState=function(k,J,oe){return S.H.useActionState(k,J,oe)},Re.useCallback=function(k,J){return S.H.useCallback(k,J)},Re.useContext=function(k){return S.H.useContext(k)},Re.useDebugValue=function(){},Re.useDeferredValue=function(k,J){return S.H.useDeferredValue(k,J)},Re.useEffect=function(k,J){return S.H.useEffect(k,J)},Re.useEffectEvent=function(k){return S.H.useEffectEvent(k)},Re.useId=function(){return S.H.useId()},Re.useImperativeHandle=function(k,J,oe){return S.H.useImperativeHandle(k,J,oe)},Re.useInsertionEffect=function(k,J){return S.H.useInsertionEffect(k,J)},Re.useLayoutEffect=function(k,J){return S.H.useLayoutEffect(k,J)},Re.useMemo=function(k,J){return S.H.useMemo(k,J)},Re.useOptimistic=function(k,J){return S.H.useOptimistic(k,J)},Re.useReducer=function(k,J,oe){return S.H.useReducer(k,J,oe)},Re.useRef=function(k){return S.H.useRef(k)},Re.useState=function(k){return S.H.useState(k)},Re.useSyncExternalStore=function(k,J,oe){return S.H.useSyncExternalStore(k,J,oe)},Re.useTransition=function(){return S.H.useTransition()},Re.version="19.2.4",Re}var N0;function Zp(){return N0||(N0=1,Wm.exports=IN()),Wm.exports}var M=Zp();const PE=ME(M),DN=CN({__proto__:null,default:PE},[M]);var Jm={exports:{}},bc={},Zm={exports:{}},ep={};var A0;function ON(){return A0||(A0=1,(function(i){function e(X,ce){var pe=X.length;X.push(ce);e:for(;0<pe;){var Pe=pe-1>>>1,De=X[Pe];if(0<l(De,ce))X[Pe]=ce,X[pe]=De,pe=Pe;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ce=X[0],pe=X.pop();if(pe!==ce){X[0]=pe;e:for(var Pe=0,De=X.length,k=De>>>1;Pe<k;){var J=2*(Pe+1)-1,oe=X[J],de=J+1,Te=X[de];if(0>l(oe,pe))de<De&&0>l(Te,oe)?(X[Pe]=Te,X[de]=pe,Pe=de):(X[Pe]=oe,X[J]=pe,Pe=J);else if(de<De&&0>l(Te,pe))X[Pe]=Te,X[de]=pe,Pe=de;else break e}}return ce}function l(X,ce){var pe=X.sortIndex-ce.sortIndex;return pe!==0?pe:X.id-ce.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();i.unstable_now=function(){return d.now()-p}}var g=[],_=[],E=1,x=null,w=3,j=!1,z=!1,L=!1,q=!1,ee=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function re(X){for(var ce=n(_);ce!==null;){if(ce.callback===null)r(_);else if(ce.startTime<=X)r(_),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=n(_)}}function ve(X){if(L=!1,re(X),!z)if(n(g)!==null)z=!0,le||(le=!0,V());else{var ce=n(_);ce!==null&&tt(ve,ce.startTime-X)}}var le=!1,S=-1,A=5,C=-1;function D(){return q?!0:!(i.unstable_now()-C<A)}function O(){if(q=!1,le){var X=i.unstable_now();C=X;var ce=!0;try{e:{z=!1,L&&(L=!1,ue(S),S=-1),j=!0;var pe=w;try{t:{for(re(X),x=n(g);x!==null&&!(x.expirationTime>X&&D());){var Pe=x.callback;if(typeof Pe=="function"){x.callback=null,w=x.priorityLevel;var De=Pe(x.expirationTime<=X);if(X=i.unstable_now(),typeof De=="function"){x.callback=De,re(X),ce=!0;break t}x===n(g)&&r(g),re(X)}else r(g);x=n(g)}if(x!==null)ce=!0;else{var k=n(_);k!==null&&tt(ve,k.startTime-X),ce=!1}}break e}finally{x=null,w=pe,j=!1}ce=void 0}}finally{ce?V():le=!1}}}var V;if(typeof ae=="function")V=function(){ae(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Le=R.port2;R.port1.onmessage=O,V=function(){Le.postMessage(null)}}else V=function(){ee(O,0)};function tt(X,ce){S=ee(function(){X(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(X){switch(w){case 1:case 2:case 3:var ce=3;break;default:ce=w}var pe=w;w=ce;try{return X()}finally{w=pe}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var pe=w;w=X;try{return ce()}finally{w=pe}},i.unstable_scheduleCallback=function(X,ce,pe){var Pe=i.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Pe+pe:Pe):pe=Pe,X){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=pe+De,X={id:E++,callback:ce,priorityLevel:X,startTime:pe,expirationTime:De,sortIndex:-1},pe>Pe?(X.sortIndex=pe,e(_,X),n(g)===null&&X===n(_)&&(L?(ue(S),S=-1):L=!0,tt(ve,pe-Pe))):(X.sortIndex=De,e(g,X),z||j||(z=!0,le||(le=!0,V()))),X},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(X){var ce=w;return function(){var pe=w;w=ce;try{return X.apply(this,arguments)}finally{w=pe}}}})(ep)),ep}var S0;function kN(){return S0||(S0=1,Zm.exports=ON()),Zm.exports}var tp={exports:{}},vn={};var C0;function MN(){if(C0)return vn;C0=1;var i=Zp();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,_,E){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:g,containerInfo:_,implementation:E}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(g,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(g,_,null,E)},vn.flushSync=function(g){var _=d.T,E=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=_,r.p=E,r.d.f()}},vn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},vn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},vn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var E=_.as,x=p(E,_.crossOrigin),w=typeof _.integrity=="string"?_.integrity:void 0,j=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:j}):E==="script"&&r.d.X(g,{crossOrigin:x,integrity:w,fetchPriority:j,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},vn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=p(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},vn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,x=p(E,_.crossOrigin);r.d.L(g,E,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},vn.preloadModule=function(g,_){if(typeof g=="string")if(_){var E=p(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},vn.requestFormReset=function(g){r.d.r(g)},vn.unstable_batchedUpdates=function(g,_){return g(_)},vn.useFormState=function(g,_,E){return d.H.useFormState(g,_,E)},vn.useFormStatus=function(){return d.H.useHostTransitionStatus()},vn.version="19.2.4",vn}var R0;function VE(){if(R0)return tp.exports;R0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),tp.exports=MN(),tp.exports}var j0;function PN(){if(j0)return bc;j0=1;var i=kN(),e=Zp(),n=VE();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function _(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,o=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){a=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),t;if(m===o)return g(f),s;m=m.sibling}throw Error(r(188))}if(a.return!==o.return)a=f,o=m;else{for(var v=!1,T=f.child;T;){if(T===a){v=!0,a=f,o=m;break}if(T===o){v=!0,o=f,a=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===a){v=!0,a=m,o=f;break}if(T===o){v=!0,o=m,a=f;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function E(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=E(t),s!==null)return s;t=t.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case L:return"Fragment";case ee:return"Profiler";case q:return"StrictMode";case ve:return"Suspense";case le:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ae:return t.displayName||"Context";case ue:return(t._context.displayName||"Context")+".Consumer";case re:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case S:return s=t.displayName||null,s!==null?s:Le(t.type)||"Memo";case A:s=t._payload,t=t._init;try{return Le(t(s))}catch{}}return null}var tt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Pe=[],De=-1;function k(t){return{current:t}}function J(t){0>De||(t.current=Pe[De],Pe[De]=null,De--)}function oe(t,s){De++,Pe[De]=t.current,t.current=s}var de=k(null),Te=k(null),Y=k(null),_e=k(null);function Qe(t,s){switch(oe(Y,s),oe(Te,t),oe(de,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Gv(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Gv(s),t=Kv(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(de),oe(de,t)}function Ue(){J(de),J(Te),J(Y)}function Jt(t){t.memoizedState!==null&&oe(_e,t);var s=de.current,a=Kv(s,t.type);s!==a&&(oe(Te,t),oe(de,a))}function W(t){Te.current===t&&(J(de),J(Te)),_e.current===t&&(J(_e),pc._currentValue=pe)}var vt,Ve;function Ot(t){if(vt===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);vt=s&&s[1]||"",Ve=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vt+t+Ve}var zt=!1;function nn(t,s){if(!t||zt)return"";zt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch($){var K=$}Reflect.construct(t,[],ie)}else{try{ie.call()}catch($){K=$}t.call(ie.prototype)}}else{try{throw Error()}catch($){K=$}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var I=v.split(`
`),G=T.split(`
`);for(f=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(o===I.length||f===G.length)for(o=I.length-1,f=G.length-1;1<=o&&0<=f&&I[o]!==G[f];)f--;for(;1<=o&&0<=f;o--,f--)if(I[o]!==G[f]){if(o!==1||f!==1)do if(o--,f--,0>f||I[o]!==G[f]){var Z=`
`+I[o].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=o&&0<=f);break}}}finally{zt=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ot(a):""}function Zt(t,s){switch(t.tag){case 26:case 27:case 5:return Ot(t.type);case 16:return Ot("Lazy");case 13:return t.child!==s&&s!==null?Ot("Suspense Fallback"):Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return nn(t.type,!1);case 11:return nn(t.type.render,!1);case 1:return nn(t.type,!0);case 31:return Ot("Activity");default:return""}}function _i(t){try{var s="",a=null;do s+=Zt(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var mt=Object.prototype.hasOwnProperty,pt=i.unstable_scheduleCallback,ti=i.unstable_cancelCallback,Gs=i.unstable_shouldYield,Oi=i.unstable_requestPaint,sn=i.unstable_now,ki=i.unstable_getCurrentPriorityLevel,yi=i.unstable_ImmediatePriority,ea=i.unstable_UserBlockingPriority,Mi=i.unstable_NormalPriority,Ya=i.unstable_LowPriority,Xa=i.unstable_IdlePriority,Wa=i.log,Ja=i.unstable_setDisableYieldValue,At=null,rt=null;function Cn(t){if(typeof Wa=="function"&&Ja(t),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(At,t)}catch{}}var wt=Math.clz32?Math.clz32:Za,ta=Math.log,Ks=Math.LN2;function Za(t){return t>>>=0,t===0?32:31-(ta(t)/Ks|0)|0}var ni=256,us=262144,St=4194304;function ii(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function yn(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var f=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~m,o!==0?f=ii(o):(v&=T,v!==0?f=ii(v):a||(a=T&~t,a!==0&&(f=ii(a))))):(T=o&~m,T!==0?f=ii(T):v!==0?f=ii(v):a||(a=o&~t,a!==0&&(f=ii(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function zn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function B(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var t=St;return St<<=1,(St&62914560)===0&&(St=4194304),t}function Ye(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function rn(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function na(t,s,a,o,f,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,I=t.expirationTimes,G=t.hiddenUpdates;for(a=v&~a;0<a;){var Z=31-wt(a),ie=1<<Z;T[Z]=0,I[Z]=-1;var K=G[Z];if(K!==null)for(G[Z]=null,Z=0;Z<K.length;Z++){var $=K[Z];$!==null&&($.lane&=-536870913)}a&=~ie}o!==0&&Rn(t,o,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~s))}function Rn(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-wt(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function ia(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-wt(a),f=1<<o;f&s|t[o]&s&&(t[o]|=s),a&=~f}}function Eo(t,s){var a=s&-s;return a=(a&42)!==0?1:sa(a),(a&(t.suspendedLanes|s))!==0?0:a}function sa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function hs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mu(){var t=ce.p;return t!==0?t:(t=window.event,t===void 0?32:p0(t.type))}function vi(t,s){var a=ce.p;try{return ce.p=t,s()}finally{ce.p=a}}var bi=Math.random().toString(36).slice(2),Bt="__reactFiber$"+bi,an="__reactProps$"+bi,Pi="__reactContainer$"+bi,el="__reactEvents$"+bi,tf="__reactListeners$"+bi,pu="__reactHandles$"+bi,gu="__reactResources$"+bi,Vi="__reactMarker$"+bi;function tl(t){delete t[Bt],delete t[an],delete t[el],delete t[tf],delete t[pu]}function Li(t){var s=t[Bt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Pi]||a[Bt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Zv(t);t!==null;){if(a=t[Bt])return a;t=Zv(t)}return s}t=a,a=t.parentNode}return null}function si(t){if(t=t[Bt]||t[Pi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Bn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Ui(t){var s=t[gu];return s||(s=t[gu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function qt(t){t[Vi]=!0}var xo=new Set,To={};function zi(t,s){Bi(t,s),Bi(t+"Capture",s)}function Bi(t,s){for(To[t]=s,t=0;t<s.length;t++)xo.add(s[t])}var wo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),No={},Ao={};function _u(t){return mt.call(Ao,t)?!0:mt.call(No,t)?!1:wo.test(t)?Ao[t]=!0:(No[t]=!0,!1)}function nl(t,s,a){if(_u(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function qn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Ft(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qs(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function So(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function at(t){if(!t._valueTracker){var s=Qs(t)?"checked":"value";t._valueTracker=So(t,s,""+t[s])}}function ra(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=Qs(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function qi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var aa=/[\n"\\]/g;function jn(t){return t.replace(aa,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function il(t,s,a,o,f,m,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+ln(s)):t.value!==""+ln(s)&&(t.value=""+ln(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?Co(t,v,ln(s)):a!=null?Co(t,v,ln(a)):o!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+ln(T):t.removeAttribute("name")}function yu(t,s,a,o,f,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){at(t);return}a=a!=null?""+ln(a):"",s=s!=null?""+ln(s):a,T||s===t.value||(t.value=s),t.defaultValue=s}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),at(t)}function Co(t,s,a){s==="number"&&qi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function $s(t,s,a,o){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&o&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function vu(t,s,a){if(s!=null&&(s=""+ln(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+ln(a):""}function Ys(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(r(92));if(tt(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=ln(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),at(t)}function In(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ro(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||bu.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function jo(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in s)o=s[f],s.hasOwnProperty(f)&&a[f]!==o&&Ro(t,f,o)}else for(var m in s)s.hasOwnProperty(m)&&Ro(t,m,s[m])}function sl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rl(t){return Xs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ei(){}var Io=null;function ri(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ws=null,Fi=null;function la(t){var s=si(t);if(s&&(t=s.stateNode)){var a=t[an]||null;e:switch(t=s.stateNode,s.type){case"input":if(il(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+jn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var f=o[an]||null;if(!f)throw Error(r(90));il(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&ra(o)}break e;case"textarea":vu(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&$s(t,!!a.multiple,s,!1)}}}var al=!1;function Js(t,s,a){if(al)return t(s,a);al=!0;try{var o=t(s);return o}finally{if(al=!1,(Ws!==null||Fi!==null)&&(mh(),Ws&&(s=Ws,t=Fi,Fi=Ws=null,la(s),t)))for(s=0;s<t.length;s++)la(t[s])}}function xi(t,s){var a=t.stateNode;if(a===null)return null;var o=a[an]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oa=!1;if(ai)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){oa=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{oa=!1}var Hi=null,Do=null,ca=null;function Oo(){if(ca)return ca;var t,s=Do,a=s.length,o,f="value"in Hi?Hi.value:Hi.textContent,m=f.length;for(t=0;t<a&&s[t]===f[t];t++);var v=a-t;for(o=1;o<=v&&s[a-o]===f[m-o];o++);return ca=f.slice(t,1<o?1-o:void 0)}function ua(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ds(){return!0}function Ti(){return!1}function dn(t){function s(a,o,f,m,v){this._reactName=a,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ds:Ti,this.isPropagationStopped=Ti,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),s}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=dn(fs),Zs=x({},fs,{view:0,detail:0}),ko=dn(Zs),er,ll,Ki,ol=x({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ki&&(Ki&&t.type==="mousemove"?(er=t.screenX-Ki.screenX,ll=t.screenY-Ki.screenY):ll=er=0,Ki=t),er)},movementY:function(t){return"movementY"in t?t.movementY:ll}}),Mo=dn(ol),ha=x({},ol,{dataTransfer:0}),xu=dn(ha),Tu=x({},Zs,{relatedTarget:0}),da=dn(Tu),Po=x({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),wu=dn(Po),cl=x({},fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nu=dn(cl),Au=x({},fs,{data:0}),Qi=dn(Au),Su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ru[t])?!!s[t]:!1}function tr(){return ju}var wn=x({},Zs,{key:function(t){if(t.key){var s=Su[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(t){return t.type==="keypress"?ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Iu=dn(wn),Du=x({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ms=dn(Du),h=x({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),y=dn(h),b=x({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=dn(b),F=x({},ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=dn(F),he=x({},fs,{newState:0,oldState:0}),Oe=dn(he),kt=[9,13,27,32],nt=ai&&"CompositionEvent"in window,xt=null;ai&&"documentMode"in document&&(xt=document.documentMode);var li=ai&&"TextEvent"in window&&!xt,$i=ai&&(!nt||xt&&8<xt&&11>=xt),wi=" ",Ni=!1;function fa(t,s){switch(t){case"keyup":return kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ul(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hl=!1;function JT(t,s){switch(t){case"compositionend":return ul(s);case"keypress":return s.which!==32?null:(Ni=!0,wi);case"textInput":return t=s.data,t===wi&&Ni?null:t;default:return null}}function ZT(t,s){if(hl)return t==="compositionend"||!nt&&fa(t,s)?(t=Oo(),ca=Do=Hi=null,hl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $i&&s.locale!=="ko"?null:s.data;default:return null}}var ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n_(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ew[t.type]:s==="textarea"}function i_(t,s,a,o){Ws?Fi?Fi.push(o):Fi=[o]:Ws=o,s=Eh(s,"onChange"),0<s.length&&(a=new Gi("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var Vo=null,Lo=null;function tw(t){Uv(t,0)}function Ou(t){var s=Bn(t);if(ra(s))return t}function s_(t,s){if(t==="change")return s}var r_=!1;if(ai){var nf;if(ai){var sf="oninput"in document;if(!sf){var a_=document.createElement("div");a_.setAttribute("oninput","return;"),sf=typeof a_.oninput=="function"}nf=sf}else nf=!1;r_=nf&&(!document.documentMode||9<document.documentMode)}function l_(){Vo&&(Vo.detachEvent("onpropertychange",o_),Lo=Vo=null)}function o_(t){if(t.propertyName==="value"&&Ou(Lo)){var s=[];i_(s,Lo,t,ri(t)),Js(tw,s)}}function nw(t,s,a){t==="focusin"?(l_(),Vo=s,Lo=a,Vo.attachEvent("onpropertychange",o_)):t==="focusout"&&l_()}function iw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ou(Lo)}function sw(t,s){if(t==="click")return Ou(s)}function rw(t,s){if(t==="input"||t==="change")return Ou(s)}function aw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Fn=typeof Object.is=="function"?Object.is:aw;function Uo(t,s){if(Fn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var f=a[o];if(!mt.call(s,f)||!Fn(t[f],s[f]))return!1}return!0}function c_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function u_(t,s){var a=c_(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=c_(a)}}function h_(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?h_(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function d_(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=qi(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=qi(t.document)}return s}function rf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var lw=ai&&"documentMode"in document&&11>=document.documentMode,dl=null,af=null,zo=null,lf=!1;function f_(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lf||dl==null||dl!==qi(o)||(o=dl,"selectionStart"in o&&rf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),zo&&Uo(zo,o)||(zo=o,o=Eh(af,"onSelect"),0<o.length&&(s=new Gi("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=dl)))}function ma(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var fl={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},of={},m_={};ai&&(m_=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function pa(t){if(of[t])return of[t];if(!fl[t])return t;var s=fl[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in m_)return of[t]=s[a];return t}var p_=pa("animationend"),g_=pa("animationiteration"),__=pa("animationstart"),ow=pa("transitionrun"),cw=pa("transitionstart"),uw=pa("transitioncancel"),y_=pa("transitionend"),v_=new Map,cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cf.push("scrollEnd");function Ai(t,s){v_.set(t,s),zi(s,[t])}var ku=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},oi=[],ml=0,uf=0;function Mu(){for(var t=ml,s=uf=ml=0;s<t;){var a=oi[s];oi[s++]=null;var o=oi[s];oi[s++]=null;var f=oi[s];oi[s++]=null;var m=oi[s];if(oi[s++]=null,o!==null&&f!==null){var v=o.pending;v===null?f.next=f:(f.next=v.next,v.next=f),o.pending=f}m!==0&&b_(a,f,m)}}function Pu(t,s,a,o){oi[ml++]=t,oi[ml++]=s,oi[ml++]=a,oi[ml++]=o,uf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function hf(t,s,a,o){return Pu(t,s,a,o),Vu(t)}function ga(t,s){return Pu(t,null,null,s),Vu(t)}function b_(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-wt(a),t=m.hiddenUpdates,o=t[f],o===null?t[f]=[s]:o.push(s),s.lane=a|536870912),m):null}function Vu(t){if(50<oc)throw oc=0,bm=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var pl={};function hw(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,s,a,o){return new hw(t,s,a,o)}function df(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ps(t,s){var a=t.alternate;return a===null?(a=Hn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function E_(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Lu(t,s,a,o,f,m){var v=0;if(o=t,typeof t=="function")df(t)&&(v=1);else if(typeof t=="string")v=gN(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Hn(31,a,s,f),t.elementType=C,t.lanes=m,t;case L:return _a(a.children,f,m,s);case q:v=8,f|=24;break;case ee:return t=Hn(12,a,s,f|2),t.elementType=ee,t.lanes=m,t;case ve:return t=Hn(13,a,s,f),t.elementType=ve,t.lanes=m,t;case le:return t=Hn(19,a,s,f),t.elementType=le,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ae:v=10;break e;case ue:v=9;break e;case re:v=11;break e;case S:v=14;break e;case A:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return s=Hn(v,a,s,f),s.elementType=t,s.type=o,s.lanes=m,s}function _a(t,s,a,o){return t=Hn(7,t,o,s),t.lanes=a,t}function ff(t,s,a){return t=Hn(6,t,null,s),t.lanes=a,t}function x_(t){var s=Hn(18,null,null,0);return s.stateNode=t,s}function mf(t,s,a){return s=Hn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var T_=new WeakMap;function ci(t,s){if(typeof t=="object"&&t!==null){var a=T_.get(t);return a!==void 0?a:(s={value:t,source:s,stack:_i(s)},T_.set(t,s),s)}return{value:t,source:s,stack:_i(s)}}var gl=[],_l=0,Uu=null,Bo=0,ui=[],hi=0,nr=null,Yi=1,Xi="";function gs(t,s){gl[_l++]=Bo,gl[_l++]=Uu,Uu=t,Bo=s}function w_(t,s,a){ui[hi++]=Yi,ui[hi++]=Xi,ui[hi++]=nr,nr=t;var o=Yi;t=Xi;var f=32-wt(o)-1;o&=~(1<<f),a+=1;var m=32-wt(s)+f;if(30<m){var v=f-f%5;m=(o&(1<<v)-1).toString(32),o>>=v,f-=v,Yi=1<<32-wt(s)+f|a<<f|o,Xi=m+t}else Yi=1<<m|a<<f|o,Xi=t}function pf(t){t.return!==null&&(gs(t,1),w_(t,1,0))}function gf(t){for(;t===Uu;)Uu=gl[--_l],gl[_l]=null,Bo=gl[--_l],gl[_l]=null;for(;t===nr;)nr=ui[--hi],ui[hi]=null,Xi=ui[--hi],ui[hi]=null,Yi=ui[--hi],ui[hi]=null}function N_(t,s){ui[hi++]=Yi,ui[hi++]=Xi,ui[hi++]=nr,Yi=s.id,Xi=s.overflow,nr=t}var fn=null,bt=null,$e=!1,ir=null,di=!1,_f=Error(r(519));function sr(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qo(ci(s,t)),_f}function A_(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Bt]=t,s[an]=o,a){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(a=0;a<uc.length;a++)Be(uc[a],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),yu(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),Ys(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||Fv(s.textContent,a)?(o.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),o.onScroll!=null&&Be("scroll",s),o.onScrollEnd!=null&&Be("scrollend",s),o.onClick!=null&&(s.onclick=Ei),s=!0):s=!1,s||sr(t,!0)}function S_(t){for(fn=t.return;fn;)switch(fn.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:fn=fn.return}}function yl(t){if(t!==fn)return!1;if(!$e)return S_(t),$e=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Mm(t.type,t.memoizedProps)),a=!a),a&&bt&&sr(t),S_(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));bt=Jv(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));bt=Jv(t)}else s===27?(s=bt,yr(t.type)?(t=zm,zm=null,bt=t):bt=s):bt=fn?mi(t.stateNode.nextSibling):null;return!0}function ya(){bt=fn=null,$e=!1}function yf(){var t=ir;return t!==null&&(Mn===null?Mn=t:Mn.push.apply(Mn,t),ir=null),t}function qo(t){ir===null?ir=[t]:ir.push(t)}var vf=k(null),va=null,_s=null;function rr(t,s,a){oe(vf,s._currentValue),s._currentValue=a}function ys(t){t._currentValue=vf.current,J(vf)}function bf(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function Ef(t,s,a,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var I=0;I<s.length;I++)if(T.context===s[I]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),bf(m.return,a,t),o||(v=null);break e}m=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),bf(v,a,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function vl(t,s,a,o){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=f.type;Fn(f.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(f===_e.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(pc):t=[pc])}f=f.return}t!==null&&Ef(s,t,a,o),s.flags|=262144}function zu(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ba(t){va=t,_s=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function mn(t){return C_(va,t)}function Bu(t,s){return va===null&&ba(t),C_(t,s)}function C_(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},_s===null){if(t===null)throw Error(r(308));_s=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else _s=_s.next=s;return a}var dw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},fw=i.unstable_scheduleCallback,mw=i.unstable_NormalPriority,Ht={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xf(){return{controller:new dw,data:new Map,refCount:0}}function Fo(t){t.refCount--,t.refCount===0&&fw(mw,function(){t.controller.abort()})}var Ho=null,Tf=0,bl=0,El=null;function pw(t,s){if(Ho===null){var a=Ho=[];Tf=0,bl=Am(),El={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Tf++,s.then(R_,R_),s}function R_(){if(--Tf===0&&Ho!==null){El!==null&&(El.status="fulfilled");var t=Ho;Ho=null,bl=0,El=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function gw(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(o.status="rejected",o.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),o}var j_=X.S;X.S=function(t,s){fv=sn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&pw(t,s),j_!==null&&j_(t,s)};var Ea=k(null);function wf(){var t=Ea.current;return t!==null?t:ft.pooledCache}function qu(t,s){s===null?oe(Ea,Ea.current):oe(Ea,s.pool)}function I_(){var t=wf();return t===null?null:{parent:Ht._currentValue,pool:t}}var xl=Error(r(460)),Nf=Error(r(474)),Fu=Error(r(542)),Hu={then:function(){}};function D_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function O_(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Ei,Ei),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,M_(t),t;default:if(typeof s.status=="string")s.then(Ei,Ei);else{if(t=ft,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=o}},function(o){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,M_(t),t}throw Ta=s,xl}}function xa(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ta=a,xl):a}}var Ta=null;function k_(){if(Ta===null)throw Error(r(459));var t=Ta;return Ta=null,t}function M_(t){if(t===xl||t===Fu)throw Error(r(483))}var Tl=null,Go=0;function Gu(t){var s=Go;return Go+=1,Tl===null&&(Tl=[]),O_(Tl,t,s)}function Ko(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Ku(t,s){throw s.$$typeof===w?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function P_(t){function s(U,P){if(t){var H=U.deletions;H===null?(U.deletions=[P],U.flags|=16):H.push(P)}}function a(U,P){if(!t)return null;for(;P!==null;)s(U,P),P=P.sibling;return null}function o(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function f(U,P){return U=ps(U,P),U.index=0,U.sibling=null,U}function m(U,P,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<P?(U.flags|=67108866,P):H):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,P,H,ne){return P===null||P.tag!==6?(P=ff(H,U.mode,ne),P.return=U,P):(P=f(P,H),P.return=U,P)}function I(U,P,H,ne){var Ee=H.type;return Ee===L?Z(U,P,H.props.children,ne,H.key):P!==null&&(P.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===A&&xa(Ee)===P.type)?(P=f(P,H.props),Ko(P,H),P.return=U,P):(P=Lu(H.type,H.key,H.props,null,U.mode,ne),Ko(P,H),P.return=U,P)}function G(U,P,H,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=mf(H,U.mode,ne),P.return=U,P):(P=f(P,H.children||[]),P.return=U,P)}function Z(U,P,H,ne,Ee){return P===null||P.tag!==7?(P=_a(H,U.mode,ne,Ee),P.return=U,P):(P=f(P,H),P.return=U,P)}function ie(U,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=ff(""+P,U.mode,H),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case j:return H=Lu(P.type,P.key,P.props,null,U.mode,H),Ko(H,P),H.return=U,H;case z:return P=mf(P,U.mode,H),P.return=U,P;case A:return P=xa(P),ie(U,P,H)}if(tt(P)||V(P))return P=_a(P,U.mode,H,null),P.return=U,P;if(typeof P.then=="function")return ie(U,Gu(P),H);if(P.$$typeof===ae)return ie(U,Bu(U,P),H);Ku(U,P)}return null}function K(U,P,H,ne){var Ee=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ee!==null?null:T(U,P,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case j:return H.key===Ee?I(U,P,H,ne):null;case z:return H.key===Ee?G(U,P,H,ne):null;case A:return H=xa(H),K(U,P,H,ne)}if(tt(H)||V(H))return Ee!==null?null:Z(U,P,H,ne,null);if(typeof H.then=="function")return K(U,P,Gu(H),ne);if(H.$$typeof===ae)return K(U,P,Bu(U,H),ne);Ku(U,H)}return null}function $(U,P,H,ne,Ee){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return U=U.get(H)||null,T(P,U,""+ne,Ee);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case j:return U=U.get(ne.key===null?H:ne.key)||null,I(P,U,ne,Ee);case z:return U=U.get(ne.key===null?H:ne.key)||null,G(P,U,ne,Ee);case A:return ne=xa(ne),$(U,P,H,ne,Ee)}if(tt(ne)||V(ne))return U=U.get(H)||null,Z(P,U,ne,Ee,null);if(typeof ne.then=="function")return $(U,P,H,Gu(ne),Ee);if(ne.$$typeof===ae)return $(U,P,H,Bu(P,ne),Ee);Ku(P,ne)}return null}function ge(U,P,H,ne){for(var Ee=null,Je=null,ye=P,Me=P=0,Fe=null;ye!==null&&Me<H.length;Me++){ye.index>Me?(Fe=ye,ye=null):Fe=ye.sibling;var Ze=K(U,ye,H[Me],ne);if(Ze===null){ye===null&&(ye=Fe);break}t&&ye&&Ze.alternate===null&&s(U,ye),P=m(Ze,P,Me),Je===null?Ee=Ze:Je.sibling=Ze,Je=Ze,ye=Fe}if(Me===H.length)return a(U,ye),$e&&gs(U,Me),Ee;if(ye===null){for(;Me<H.length;Me++)ye=ie(U,H[Me],ne),ye!==null&&(P=m(ye,P,Me),Je===null?Ee=ye:Je.sibling=ye,Je=ye);return $e&&gs(U,Me),Ee}for(ye=o(ye);Me<H.length;Me++)Fe=$(ye,U,Me,H[Me],ne),Fe!==null&&(t&&Fe.alternate!==null&&ye.delete(Fe.key===null?Me:Fe.key),P=m(Fe,P,Me),Je===null?Ee=Fe:Je.sibling=Fe,Je=Fe);return t&&ye.forEach(function(Tr){return s(U,Tr)}),$e&&gs(U,Me),Ee}function we(U,P,H,ne){if(H==null)throw Error(r(151));for(var Ee=null,Je=null,ye=P,Me=P=0,Fe=null,Ze=H.next();ye!==null&&!Ze.done;Me++,Ze=H.next()){ye.index>Me?(Fe=ye,ye=null):Fe=ye.sibling;var Tr=K(U,ye,Ze.value,ne);if(Tr===null){ye===null&&(ye=Fe);break}t&&ye&&Tr.alternate===null&&s(U,ye),P=m(Tr,P,Me),Je===null?Ee=Tr:Je.sibling=Tr,Je=Tr,ye=Fe}if(Ze.done)return a(U,ye),$e&&gs(U,Me),Ee;if(ye===null){for(;!Ze.done;Me++,Ze=H.next())Ze=ie(U,Ze.value,ne),Ze!==null&&(P=m(Ze,P,Me),Je===null?Ee=Ze:Je.sibling=Ze,Je=Ze);return $e&&gs(U,Me),Ee}for(ye=o(ye);!Ze.done;Me++,Ze=H.next())Ze=$(ye,U,Me,Ze.value,ne),Ze!==null&&(t&&Ze.alternate!==null&&ye.delete(Ze.key===null?Me:Ze.key),P=m(Ze,P,Me),Je===null?Ee=Ze:Je.sibling=Ze,Je=Ze);return t&&ye.forEach(function(SN){return s(U,SN)}),$e&&gs(U,Me),Ee}function dt(U,P,H,ne){if(typeof H=="object"&&H!==null&&H.type===L&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case j:e:{for(var Ee=H.key;P!==null;){if(P.key===Ee){if(Ee=H.type,Ee===L){if(P.tag===7){a(U,P.sibling),ne=f(P,H.props.children),ne.return=U,U=ne;break e}}else if(P.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===A&&xa(Ee)===P.type){a(U,P.sibling),ne=f(P,H.props),Ko(ne,H),ne.return=U,U=ne;break e}a(U,P);break}else s(U,P);P=P.sibling}H.type===L?(ne=_a(H.props.children,U.mode,ne,H.key),ne.return=U,U=ne):(ne=Lu(H.type,H.key,H.props,null,U.mode,ne),Ko(ne,H),ne.return=U,U=ne)}return v(U);case z:e:{for(Ee=H.key;P!==null;){if(P.key===Ee)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){a(U,P.sibling),ne=f(P,H.children||[]),ne.return=U,U=ne;break e}else{a(U,P);break}else s(U,P);P=P.sibling}ne=mf(H,U.mode,ne),ne.return=U,U=ne}return v(U);case A:return H=xa(H),dt(U,P,H,ne)}if(tt(H))return ge(U,P,H,ne);if(V(H)){if(Ee=V(H),typeof Ee!="function")throw Error(r(150));return H=Ee.call(H),we(U,P,H,ne)}if(typeof H.then=="function")return dt(U,P,Gu(H),ne);if(H.$$typeof===ae)return dt(U,P,Bu(U,H),ne);Ku(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(a(U,P.sibling),ne=f(P,H),ne.return=U,U=ne):(a(U,P),ne=ff(H,U.mode,ne),ne.return=U,U=ne),v(U)):a(U,P)}return function(U,P,H,ne){try{Go=0;var Ee=dt(U,P,H,ne);return Tl=null,Ee}catch(ye){if(ye===xl||ye===Fu)throw ye;var Je=Hn(29,ye,null,U.mode);return Je.lanes=ne,Je.return=U,Je}}}var wa=P_(!0),V_=P_(!1),ar=!1;function Af(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function lr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function or(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(it&2)!==0){var f=o.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),o.pending=s,s=Vu(t),b_(t,null,a),s}return Pu(t,o,s,a),Vu(t)}function Qo(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,ia(t,a)}}function Cf(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Rf=!1;function $o(){if(Rf){var t=El;if(t!==null)throw t}}function Yo(t,s,a,o){Rf=!1;var f=t.updateQueue;ar=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var I=T,G=I.next;I.next=null,v===null?m=G:v.next=G,v=I;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==v&&(T===null?Z.firstBaseUpdate=G:T.next=G,Z.lastBaseUpdate=I))}if(m!==null){var ie=f.baseState;v=0,Z=G=I=null,T=m;do{var K=T.lane&-536870913,$=K!==T.lane;if($?(qe&K)===K:(o&K)===K){K!==0&&K===bl&&(Rf=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ge=t,we=T;K=s;var dt=a;switch(we.tag){case 1:if(ge=we.payload,typeof ge=="function"){ie=ge.call(dt,ie,K);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,K=typeof ge=="function"?ge.call(dt,ie,K):ge,K==null)break e;ie=x({},ie,K);break e;case 2:ar=!0}}K=T.callback,K!==null&&(t.flags|=64,$&&(t.flags|=8192),$=f.callbacks,$===null?f.callbacks=[K]:$.push(K))}else $={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(G=Z=$,I=ie):Z=Z.next=$,v|=K;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;$=T,T=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);Z===null&&(I=ie),f.baseState=I,f.firstBaseUpdate=G,f.lastBaseUpdate=Z,m===null&&(f.shared.lanes=0),fr|=v,t.lanes=v,t.memoizedState=ie}}function L_(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function U_(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)L_(a[t],s)}var wl=k(null),Qu=k(0);function z_(t,s){t=Ss,oe(Qu,t),oe(wl,s),Ss=t|s.baseLanes}function jf(){oe(Qu,Ss),oe(wl,wl.current)}function If(){Ss=Qu.current,J(wl),J(Qu)}var Gn=k(null),fi=null;function cr(t){var s=t.alternate;oe(Mt,Mt.current&1),oe(Gn,t),fi===null&&(s===null||wl.current!==null||s.memoizedState!==null)&&(fi=t)}function Df(t){oe(Mt,Mt.current),oe(Gn,t),fi===null&&(fi=t)}function B_(t){t.tag===22?(oe(Mt,Mt.current),oe(Gn,t),fi===null&&(fi=t)):ur()}function ur(){oe(Mt,Mt.current),oe(Gn,Gn.current)}function Kn(t){J(Gn),fi===t&&(fi=null),J(Mt)}var Mt=k(0);function $u(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Lm(a)||Um(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var vs=0,ke=null,ut=null,Gt=null,Yu=!1,Nl=!1,Na=!1,Xu=0,Xo=0,Al=null,_w=0;function Ct(){throw Error(r(321))}function Of(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Fn(t[a],s[a]))return!1;return!0}function kf(t,s,a,o,f,m){return vs=m,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=t===null||t.memoizedState===null?wy:Yf,Na=!1,m=a(o,f),Na=!1,Nl&&(m=F_(s,a,o,f)),q_(t),m}function q_(t){X.H=Zo;var s=ut!==null&&ut.next!==null;if(vs=0,Gt=ut=ke=null,Yu=!1,Xo=0,Al=null,s)throw Error(r(300));t===null||Kt||(t=t.dependencies,t!==null&&zu(t)&&(Kt=!0))}function F_(t,s,a,o){ke=t;var f=0;do{if(Nl&&(Al=null),Xo=0,Nl=!1,25<=f)throw Error(r(301));if(f+=1,Gt=ut=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=Ny,m=s(a,o)}while(Nl);return m}function yw(){var t=X.H,s=t.useState()[0];return s=typeof s.then=="function"?Wo(s):s,t=t.useState()[0],(ut!==null?ut.memoizedState:null)!==t&&(ke.flags|=1024),s}function Mf(){var t=Xu!==0;return Xu=0,t}function Pf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Vf(t){if(Yu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Yu=!1}vs=0,Gt=ut=ke=null,Nl=!1,Xo=Xu=0,Al=null}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?ke.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Pt(){if(ut===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var s=Gt===null?ke.memoizedState:Gt.next;if(s!==null)Gt=s,ut=t;else{if(t===null)throw ke.alternate===null?Error(r(467)):Error(r(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Gt===null?ke.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wo(t){var s=Xo;return Xo+=1,Al===null&&(Al=[]),t=O_(Al,t,s),s=ke,(Gt===null?s.memoizedState:Gt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?wy:Yf),t}function Ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Wo(t);if(t.$$typeof===ae)return mn(t)}throw Error(r(438,String(t)))}function Lf(t){var s=null,a=ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=ke.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Wu(),ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=D;return s.index++,a}function bs(t,s){return typeof s=="function"?s(t):s}function Zu(t){var s=Pt();return Uf(s,ut,t)}function Uf(t,s,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var f=t.baseQueue,m=o.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}s.baseQueue=f=m,o.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var T=v=null,I=null,G=s,Z=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(qe&ie)===ie:(vs&ie)===ie){var K=G.revertLane;if(K===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===bl&&(Z=!0);else if((vs&K)===K){G=G.next,K===bl&&(Z=!0);continue}else ie={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(T=I=ie,v=m):I=I.next=ie,ke.lanes|=K,fr|=K;ie=G.action,Na&&a(m,ie),m=G.hasEagerState?G.eagerState:a(m,ie)}else K={lane:ie,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(T=I=K,v=m):I=I.next=K,ke.lanes|=ie,fr|=ie;G=G.next}while(G!==null&&G!==s);if(I===null?v=m:I.next=T,!Fn(m,t.memoizedState)&&(Kt=!0,Z&&(a=El,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=I,o.lastRenderedState=m}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function zf(t){var s=Pt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);Fn(m,s.memoizedState)||(Kt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,o]}function H_(t,s,a){var o=ke,f=Pt(),m=$e;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Fn((ut||f).memoizedState,a);if(v&&(f.memoizedState=a,Kt=!0),f=f.queue,Ff(Q_.bind(null,o,f,t),[t]),f.getSnapshot!==s||v||Gt!==null&&Gt.memoizedState.tag&1){if(o.flags|=2048,Sl(9,{destroy:void 0},K_.bind(null,o,f,a,s),null),ft===null)throw Error(r(349));m||(vs&127)!==0||G_(o,s,a)}return a}function G_(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=ke.updateQueue,s===null?(s=Wu(),ke.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function K_(t,s,a,o){s.value=a,s.getSnapshot=o,$_(s)&&Y_(t)}function Q_(t,s,a){return a(function(){$_(s)&&Y_(t)})}function $_(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Fn(t,a)}catch{return!0}}function Y_(t){var s=ga(t,2);s!==null&&Pn(s,t,2)}function Bf(t){var s=Nn();if(typeof t=="function"){var a=t;if(t=a(),Na){Cn(!0);try{a()}finally{Cn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:t},s}function X_(t,s,a,o){return t.baseState=a,Uf(t,ut,typeof o=="function"?o:bs)}function vw(t,s,a,o,f){if(nh(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};X.T!==null?a(!0):m.isTransition=!1,o(m),a=s.pending,a===null?(m.next=s.pending=m,W_(s,m)):(m.next=a.next,s.pending=a.next=m)}}function W_(t,s){var a=s.action,o=s.payload,f=t.state;if(s.isTransition){var m=X.T,v={};X.T=v;try{var T=a(f,o),I=X.S;I!==null&&I(v,T),J_(t,s,T)}catch(G){qf(t,s,G)}finally{m!==null&&v.types!==null&&(m.types=v.types),X.T=m}}else try{m=a(f,o),J_(t,s,m)}catch(G){qf(t,s,G)}}function J_(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Z_(t,s,o)},function(o){return qf(t,s,o)}):Z_(t,s,a)}function Z_(t,s,a){s.status="fulfilled",s.value=a,ey(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,W_(t,a)))}function qf(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,ey(s),s=s.next;while(s!==o)}t.action=null}function ey(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function ty(t,s){return s}function ny(t,s){if($e){var a=ft.formState;if(a!==null){e:{var o=ke;if($e){if(bt){t:{for(var f=bt,m=di;f.nodeType!==8;){if(!m){f=null;break t}if(f=mi(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){bt=mi(f.nextSibling),o=f.data==="F!";break e}}sr(o)}o=!1}o&&(s=a[0])}}return a=Nn(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ty,lastRenderedState:s},a.queue=o,a=Ey.bind(null,ke,o),o.dispatch=a,o=Bf(!1),m=$f.bind(null,ke,!1,o.queue),o=Nn(),f={state:s,dispatch:null,action:t,pending:null},o.queue=f,a=vw.bind(null,ke,f,m,a),f.dispatch=a,o.memoizedState=t,[s,a,!1]}function iy(t){var s=Pt();return sy(s,ut,t)}function sy(t,s,a){if(s=Uf(t,s,ty)[0],t=Zu(bs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=Wo(s)}catch(v){throw v===xl?Fu:v}else o=s;s=Pt();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(ke.flags|=2048,Sl(9,{destroy:void 0},bw.bind(null,f,a),null)),[o,m,t]}function bw(t,s){t.action=s}function ry(t){var s=Pt(),a=ut;if(a!==null)return sy(s,a,t);Pt(),s=s.memoizedState,a=Pt();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function Sl(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=ke.updateQueue,s===null&&(s=Wu(),ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function ay(){return Pt().memoizedState}function eh(t,s,a,o){var f=Nn();ke.flags|=t,f.memoizedState=Sl(1|s,{destroy:void 0},a,o===void 0?null:o)}function th(t,s,a,o){var f=Pt();o=o===void 0?null:o;var m=f.memoizedState.inst;ut!==null&&o!==null&&Of(o,ut.memoizedState.deps)?f.memoizedState=Sl(s,m,a,o):(ke.flags|=t,f.memoizedState=Sl(1|s,m,a,o))}function ly(t,s){eh(8390656,8,t,s)}function Ff(t,s){th(2048,8,t,s)}function Ew(t){ke.flags|=4;var s=ke.updateQueue;if(s===null)s=Wu(),ke.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function oy(t){var s=Pt().memoizedState;return Ew({ref:s,nextImpl:t}),function(){if((it&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function cy(t,s){return th(4,2,t,s)}function uy(t,s){return th(4,4,t,s)}function hy(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function dy(t,s,a){a=a!=null?a.concat([t]):null,th(4,4,hy.bind(null,s,t),a)}function Hf(){}function fy(t,s){var a=Pt();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&Of(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function my(t,s){var a=Pt();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&Of(s,o[1]))return o[0];if(o=t(),Na){Cn(!0);try{t()}finally{Cn(!1)}}return a.memoizedState=[o,s],o}function Gf(t,s,a){return a===void 0||(vs&1073741824)!==0&&(qe&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=pv(),ke.lanes|=t,fr|=t,a)}function py(t,s,a,o){return Fn(a,s)?a:wl.current!==null?(t=Gf(t,a,o),Fn(t,s)||(Kt=!0),t):(vs&42)===0||(vs&1073741824)!==0&&(qe&261930)===0?(Kt=!0,t.memoizedState=a):(t=pv(),ke.lanes|=t,fr|=t,s)}function gy(t,s,a,o,f){var m=ce.p;ce.p=m!==0&&8>m?m:8;var v=X.T,T={};X.T=T,$f(t,!1,s,a);try{var I=f(),G=X.S;if(G!==null&&G(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Z=gw(I,o);Jo(t,s,Z,Yn(t))}else Jo(t,s,o,Yn(t))}catch(ie){Jo(t,s,{then:function(){},status:"rejected",reason:ie},Yn())}finally{ce.p=m,v!==null&&T.types!==null&&(v.types=T.types),X.T=v}}function xw(){}function Kf(t,s,a,o){if(t.tag!==5)throw Error(r(476));var f=_y(t).queue;gy(t,f,s,pe,a===null?xw:function(){return yy(t),a(o)})}function _y(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:pe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function yy(t){var s=_y(t);s.next===null&&(s=t.alternate.memoizedState),Jo(t,s.next.queue,{},Yn())}function Qf(){return mn(pc)}function vy(){return Pt().memoizedState}function by(){return Pt().memoizedState}function Tw(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Yn();t=lr(a);var o=or(s,t,a);o!==null&&(Pn(o,s,a),Qo(o,s,a)),s={cache:xf()},t.payload=s;return}s=s.return}}function ww(t,s,a){var o=Yn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},nh(t)?xy(s,a):(a=hf(t,s,a,o),a!==null&&(Pn(a,t,o),Ty(a,s,o)))}function Ey(t,s,a){var o=Yn();Jo(t,s,a,o)}function Jo(t,s,a,o){var f={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(nh(t))xy(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,T=m(v,a);if(f.hasEagerState=!0,f.eagerState=T,Fn(T,v))return Pu(t,s,f,0),ft===null&&Mu(),!1}catch{}if(a=hf(t,s,f,o),a!==null)return Pn(a,t,o),Ty(a,s,o),!0}return!1}function $f(t,s,a,o){if(o={lane:2,revertLane:Am(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},nh(t)){if(s)throw Error(r(479))}else s=hf(t,a,o,2),s!==null&&Pn(s,t,2)}function nh(t){var s=t.alternate;return t===ke||s!==null&&s===ke}function xy(t,s){Nl=Yu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Ty(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,ia(t,a)}}var Zo={readContext:mn,use:Ju,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};Zo.useEffectEvent=Ct;var wy={readContext:mn,use:Ju,useCallback:function(t,s){return Nn().memoizedState=[t,s===void 0?null:s],t},useContext:mn,useEffect:ly,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,eh(4194308,4,hy.bind(null,s,t),a)},useLayoutEffect:function(t,s){return eh(4194308,4,t,s)},useInsertionEffect:function(t,s){eh(4,2,t,s)},useMemo:function(t,s){var a=Nn();s=s===void 0?null:s;var o=t();if(Na){Cn(!0);try{t()}finally{Cn(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=Nn();if(a!==void 0){var f=a(s);if(Na){Cn(!0);try{a(s)}finally{Cn(!1)}}}else f=s;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=ww.bind(null,ke,t),[o.memoizedState,t]},useRef:function(t){var s=Nn();return t={current:t},s.memoizedState=t},useState:function(t){t=Bf(t);var s=t.queue,a=Ey.bind(null,ke,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Hf,useDeferredValue:function(t,s){var a=Nn();return Gf(a,t,s)},useTransition:function(){var t=Bf(!1);return t=gy.bind(null,ke,t.queue,!0,!1),Nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=ke,f=Nn();if($e){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ft===null)throw Error(r(349));(qe&127)!==0||G_(o,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,ly(Q_.bind(null,o,m,t),[t]),o.flags|=2048,Sl(9,{destroy:void 0},K_.bind(null,o,m,a,s),null),a},useId:function(){var t=Nn(),s=ft.identifierPrefix;if($e){var a=Xi,o=Yi;a=(o&~(1<<32-wt(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Xu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=_w++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Qf,useFormState:ny,useActionState:ny,useOptimistic:function(t){var s=Nn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=$f.bind(null,ke,!0,a),a.dispatch=s,[t,s]},useMemoCache:Lf,useCacheRefresh:function(){return Nn().memoizedState=Tw.bind(null,ke)},useEffectEvent:function(t){var s=Nn(),a={impl:t};return s.memoizedState=a,function(){if((it&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Yf={readContext:mn,use:Ju,useCallback:fy,useContext:mn,useEffect:Ff,useImperativeHandle:dy,useInsertionEffect:cy,useLayoutEffect:uy,useMemo:my,useReducer:Zu,useRef:ay,useState:function(){return Zu(bs)},useDebugValue:Hf,useDeferredValue:function(t,s){var a=Pt();return py(a,ut.memoizedState,t,s)},useTransition:function(){var t=Zu(bs)[0],s=Pt().memoizedState;return[typeof t=="boolean"?t:Wo(t),s]},useSyncExternalStore:H_,useId:vy,useHostTransitionStatus:Qf,useFormState:iy,useActionState:iy,useOptimistic:function(t,s){var a=Pt();return X_(a,ut,t,s)},useMemoCache:Lf,useCacheRefresh:by};Yf.useEffectEvent=oy;var Ny={readContext:mn,use:Ju,useCallback:fy,useContext:mn,useEffect:Ff,useImperativeHandle:dy,useInsertionEffect:cy,useLayoutEffect:uy,useMemo:my,useReducer:zf,useRef:ay,useState:function(){return zf(bs)},useDebugValue:Hf,useDeferredValue:function(t,s){var a=Pt();return ut===null?Gf(a,t,s):py(a,ut.memoizedState,t,s)},useTransition:function(){var t=zf(bs)[0],s=Pt().memoizedState;return[typeof t=="boolean"?t:Wo(t),s]},useSyncExternalStore:H_,useId:vy,useHostTransitionStatus:Qf,useFormState:ry,useActionState:ry,useOptimistic:function(t,s){var a=Pt();return ut!==null?X_(a,ut,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Lf,useCacheRefresh:by};Ny.useEffectEvent=oy;function Xf(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:x({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Wf={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=Yn(),f=lr(o);f.payload=s,a!=null&&(f.callback=a),s=or(t,f,o),s!==null&&(Pn(s,t,o),Qo(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=Yn(),f=lr(o);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=or(t,f,o),s!==null&&(Pn(s,t,o),Qo(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Yn(),o=lr(a);o.tag=2,s!=null&&(o.callback=s),s=or(t,o,a),s!==null&&(Pn(s,t,a),Qo(s,t,a))}};function Ay(t,s,a,o,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,v):s.prototype&&s.prototype.isPureReactComponent?!Uo(a,o)||!Uo(f,m):!0}function Sy(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&Wf.enqueueReplaceState(s,s.state,null)}function Aa(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=x({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Cy(t){ku(t)}function Ry(t){console.error(t)}function jy(t){ku(t)}function ih(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function Iy(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Jf(t,s,a){return a=lr(a),a.tag=3,a.payload={element:null},a.callback=function(){ih(t,s)},a}function Dy(t){return t=lr(t),t.tag=3,t}function Oy(t,s,a,o){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;t.payload=function(){return f(m)},t.callback=function(){Iy(s,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Iy(s,a,o),typeof f!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function Nw(t,s,a,o,f){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&vl(s,a,f,!0),a=Gn.current,a!==null){switch(a.tag){case 31:case 13:return fi===null?ph():a.alternate===null&&Rt===0&&(Rt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,o===Hu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Tm(t,o,f)),!1;case 22:return a.flags|=65536,o===Hu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Tm(t,o,f)),!1}throw Error(r(435,a.tag))}return Tm(t,o,f),ph(),!1}if($e)return s=Gn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,o!==_f&&(t=Error(r(422),{cause:o}),qo(ci(t,a)))):(o!==_f&&(s=Error(r(423),{cause:o}),qo(ci(s,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=ci(o,a),f=Jf(t.stateNode,o,f),Cf(t,f),Rt!==4&&(Rt=2)),!1;var m=Error(r(520),{cause:o});if(m=ci(m,a),lc===null?lc=[m]:lc.push(m),Rt!==4&&(Rt=2),s===null)return!0;o=ci(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Jf(a.stateNode,o,t),Cf(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(mr===null||!mr.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Dy(f),Oy(f,t,a,o),Cf(a,f),!1}a=a.return}while(a!==null);return!1}var Zf=Error(r(461)),Kt=!1;function pn(t,s,a,o){s.child=t===null?V_(s,null,a,o):wa(s,t.child,a,o)}function ky(t,s,a,o,f){a=a.render;var m=s.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return ba(s),o=kf(t,s,a,v,m,f),T=Mf(),t!==null&&!Kt?(Pf(t,s,f),Es(t,s,f)):($e&&T&&pf(s),s.flags|=1,pn(t,s,o,f),s.child)}function My(t,s,a,o,f){if(t===null){var m=a.type;return typeof m=="function"&&!df(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Py(t,s,m,o,f)):(t=Lu(a.type,null,o,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!lm(t,f)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Uo,a(v,o)&&t.ref===s.ref)return Es(t,s,f)}return s.flags|=1,t=ps(m,o),t.ref=s.ref,t.return=s,s.child=t}function Py(t,s,a,o,f){if(t!==null){var m=t.memoizedProps;if(Uo(m,o)&&t.ref===s.ref)if(Kt=!1,s.pendingProps=o=m,lm(t,f))(t.flags&131072)!==0&&(Kt=!0);else return s.lanes=t.lanes,Es(t,s,f)}return em(t,s,a,o,f)}function Vy(t,s,a,o){var f=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(o=s.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~m}else o=0,s.child=null;return Ly(t,s,m,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&qu(s,m!==null?m.cachePool:null),m!==null?z_(s,m):jf(),B_(s);else return o=s.lanes=536870912,Ly(t,s,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(qu(s,m.cachePool),z_(s,m),ur(),s.memoizedState=null):(t!==null&&qu(s,null),jf(),ur());return pn(t,s,f,a),s.child}function ec(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ly(t,s,a,o,f){var m=wf();return m=m===null?null:{parent:Ht._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&qu(s,null),jf(),B_(s),t!==null&&vl(t,s,o,!0),s.childLanes=f,null}function sh(t,s){return s=ah({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Uy(t,s,a){return wa(s,t.child,null,a),t=sh(s,s.pendingProps),t.flags|=2,Kn(s),s.memoizedState=null,t}function Aw(t,s,a){var o=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if($e){if(o.mode==="hidden")return t=sh(s,o),s.lanes=536870912,ec(null,t);if(Df(s),(t=bt)?(t=Wv(t,di),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:nr!==null?{id:Yi,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},a=x_(t),a.return=s,s.child=a,fn=s,bt=null)):t=null,t===null)throw sr(s);return s.lanes=536870912,null}return sh(s,o)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Df(s),f)if(s.flags&256)s.flags&=-257,s=Uy(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(Kt||vl(t,s,a,!1),f=(a&t.childLanes)!==0,Kt||f){if(o=ft,o!==null&&(v=Eo(o,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,ga(t,v),Pn(o,t,v),Zf;ph(),s=Uy(t,s,a)}else t=m.treeContext,bt=mi(v.nextSibling),fn=s,$e=!0,ir=null,di=!1,t!==null&&N_(s,t),s=sh(s,o),s.flags|=4096;return s}return t=ps(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function rh(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function em(t,s,a,o,f){return ba(s),a=kf(t,s,a,o,void 0,f),o=Mf(),t!==null&&!Kt?(Pf(t,s,f),Es(t,s,f)):($e&&o&&pf(s),s.flags|=1,pn(t,s,a,f),s.child)}function zy(t,s,a,o,f,m){return ba(s),s.updateQueue=null,a=F_(s,o,a,f),q_(t),o=Mf(),t!==null&&!Kt?(Pf(t,s,m),Es(t,s,m)):($e&&o&&pf(s),s.flags|=1,pn(t,s,a,m),s.child)}function By(t,s,a,o,f){if(ba(s),s.stateNode===null){var m=pl,v=a.contextType;typeof v=="object"&&v!==null&&(m=mn(v)),m=new a(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Wf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},Af(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?mn(v):pl,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Xf(s,a,v,o),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Wf.enqueueReplaceState(m,m.state,null),Yo(s,o,m,f),$o(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var T=s.memoizedProps,I=Aa(a,T);m.props=I;var G=m.context,Z=a.contextType;v=pl,typeof Z=="object"&&Z!==null&&(v=mn(Z));var ie=a.getDerivedStateFromProps;Z=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,Z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||G!==v)&&Sy(s,m,o,v),ar=!1;var K=s.memoizedState;m.state=K,Yo(s,o,m,f),$o(),G=s.memoizedState,T||K!==G||ar?(typeof ie=="function"&&(Xf(s,a,ie,o),G=s.memoizedState),(I=ar||Ay(s,a,I,o,K,G,v))?(Z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=G),m.props=o,m.state=G,m.context=v,o=I):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,Sf(t,s),v=s.memoizedProps,Z=Aa(a,v),m.props=Z,ie=s.pendingProps,K=m.context,G=a.contextType,I=pl,typeof G=="object"&&G!==null&&(I=mn(G)),T=a.getDerivedStateFromProps,(G=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ie||K!==I)&&Sy(s,m,o,I),ar=!1,K=s.memoizedState,m.state=K,Yo(s,o,m,f),$o();var $=s.memoizedState;v!==ie||K!==$||ar||t!==null&&t.dependencies!==null&&zu(t.dependencies)?(typeof T=="function"&&(Xf(s,a,T,o),$=s.memoizedState),(Z=ar||Ay(s,a,Z,o,K,$,I)||t!==null&&t.dependencies!==null&&zu(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,$,I),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,$,I)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=$),m.props=o,m.state=$,m.context=I,o=Z):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,rh(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=wa(s,t.child,null,f),s.child=wa(s,null,a,f)):pn(t,s,a,f),s.memoizedState=m.state,t=s.child):t=Es(t,s,f),t}function qy(t,s,a,o){return ya(),s.flags|=256,pn(t,s,a,o),s.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nm(t){return{baseLanes:t,cachePool:I_()}}function im(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=$n),t}function Fy(t,s,a){var o=s.pendingProps,f=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Mt.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if($e){if(f?cr(s):ur(),(t=bt)?(t=Wv(t,di),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:nr!==null?{id:Yi,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},a=x_(t),a.return=s,s.child=a,fn=s,bt=null)):t=null,t===null)throw sr(s);return Um(t)?s.lanes=32:s.lanes=536870912,null}var T=o.children;return o=o.fallback,f?(ur(),f=s.mode,T=ah({mode:"hidden",children:T},f),o=_a(o,f,a,null),T.return=s,o.return=s,T.sibling=o,s.child=T,o=s.child,o.memoizedState=nm(a),o.childLanes=im(t,v,a),s.memoizedState=tm,ec(null,o)):(cr(s),sm(s,T))}var I=t.memoizedState;if(I!==null&&(T=I.dehydrated,T!==null)){if(m)s.flags&256?(cr(s),s.flags&=-257,s=rm(t,s,a)):s.memoizedState!==null?(ur(),s.child=t.child,s.flags|=128,s=null):(ur(),T=o.fallback,f=s.mode,o=ah({mode:"visible",children:o.children},f),T=_a(T,f,a,null),T.flags|=2,o.return=s,T.return=s,o.sibling=T,s.child=o,wa(s,t.child,null,a),o=s.child,o.memoizedState=nm(a),o.childLanes=im(t,v,a),s.memoizedState=tm,s=ec(null,o));else if(cr(s),Um(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var G=v.dgst;v=G,o=Error(r(419)),o.stack="",o.digest=v,qo({value:o,source:null,stack:null}),s=rm(t,s,a)}else if(Kt||vl(t,s,a,!1),v=(a&t.childLanes)!==0,Kt||v){if(v=ft,v!==null&&(o=Eo(v,a),o!==0&&o!==I.retryLane))throw I.retryLane=o,ga(t,o),Pn(v,t,o),Zf;Lm(T)||ph(),s=rm(t,s,a)}else Lm(T)?(s.flags|=192,s.child=t.child,s=null):(t=I.treeContext,bt=mi(T.nextSibling),fn=s,$e=!0,ir=null,di=!1,t!==null&&N_(s,t),s=sm(s,o.children),s.flags|=4096);return s}return f?(ur(),T=o.fallback,f=s.mode,I=t.child,G=I.sibling,o=ps(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,G!==null?T=ps(G,T):(T=_a(T,f,a,null),T.flags|=2),T.return=s,o.return=s,o.sibling=T,s.child=o,ec(null,o),o=s.child,T=t.child.memoizedState,T===null?T=nm(a):(f=T.cachePool,f!==null?(I=Ht._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=I_(),T={baseLanes:T.baseLanes|a,cachePool:f}),o.memoizedState=T,o.childLanes=im(t,v,a),s.memoizedState=tm,ec(t.child,o)):(cr(s),a=t.child,t=a.sibling,a=ps(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function sm(t,s){return s=ah({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ah(t,s){return t=Hn(22,t,null,s),t.lanes=0,t}function rm(t,s,a){return wa(s,t.child,null,a),t=sm(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Hy(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),bf(t.return,s,a)}function am(t,s,a,o,f,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:f,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=f,v.treeForkCount=m)}function Gy(t,s,a){var o=s.pendingProps,f=o.revealOrder,m=o.tail;o=o.children;var v=Mt.current,T=(v&2)!==0;if(T?(v=v&1|2,s.flags|=128):v&=1,oe(Mt,v),pn(t,s,o,a),o=$e?Bo:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hy(t,a,s);else if(t.tag===19)Hy(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&$u(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),am(s,!1,f,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&$u(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}am(s,!0,a,null,m,o);break;case"together":am(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function Es(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),fr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(vl(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=ps(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=ps(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function lm(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&zu(t)))}function Sw(t,s,a){switch(s.tag){case 3:Qe(s,s.stateNode.containerInfo),rr(s,Ht,t.memoizedState.cache),ya();break;case 27:case 5:Jt(s);break;case 4:Qe(s,s.stateNode.containerInfo);break;case 10:rr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Df(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(cr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Fy(t,s,a):(cr(s),t=Es(t,s,a),t!==null?t.sibling:null);cr(s);break;case 19:var f=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(vl(t,s,a,!1),o=(a&s.childLanes)!==0),f){if(o)return Gy(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Mt,Mt.current),o)break;return null;case 22:return s.lanes=0,Vy(t,s,a,s.pendingProps);case 24:rr(s,Ht,t.memoizedState.cache)}return Es(t,s,a)}function Ky(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Kt=!0;else{if(!lm(t,a)&&(s.flags&128)===0)return Kt=!1,Sw(t,s,a);Kt=(t.flags&131072)!==0}else Kt=!1,$e&&(s.flags&1048576)!==0&&w_(s,Bo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=xa(s.elementType),s.type=t,typeof t=="function")df(t)?(o=Aa(t,o),s.tag=1,s=By(null,s,t,o,a)):(s.tag=0,s=em(null,s,t,o,a));else{if(t!=null){var f=t.$$typeof;if(f===re){s.tag=11,s=ky(null,s,t,o,a);break e}else if(f===S){s.tag=14,s=My(null,s,t,o,a);break e}}throw s=Le(t)||t,Error(r(306,s,""))}}return s;case 0:return em(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,f=Aa(o,s.pendingProps),By(t,s,o,f,a);case 3:e:{if(Qe(s,s.stateNode.containerInfo),t===null)throw Error(r(387));o=s.pendingProps;var m=s.memoizedState;f=m.element,Sf(t,s),Yo(s,o,null,a);var v=s.memoizedState;if(o=v.cache,rr(s,Ht,o),o!==m.cache&&Ef(s,[Ht],a,!0),$o(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=qy(t,s,o,a);break e}else if(o!==f){f=ci(Error(r(424)),s),qo(f),s=qy(t,s,o,a);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,bt=mi(t.firstChild),fn=s,$e=!0,ir=null,di=!0,a=V_(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ya(),o===f){s=Es(t,s,a);break e}pn(t,s,o,a)}s=s.child}return s;case 26:return rh(t,s),t===null?(a=i0(s.type,null,s.pendingProps,null))?s.memoizedState=a:$e||(a=s.type,t=s.pendingProps,o=xh(Y.current).createElement(a),o[Bt]=s,o[an]=t,gn(o,a,t),qt(o),s.stateNode=o):s.memoizedState=i0(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Jt(s),t===null&&$e&&(o=s.stateNode=e0(s.type,s.pendingProps,Y.current),fn=s,di=!0,f=bt,yr(s.type)?(zm=f,bt=mi(o.firstChild)):bt=f),pn(t,s,s.pendingProps.children,a),rh(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&$e&&((f=o=bt)&&(o=iN(o,s.type,s.pendingProps,di),o!==null?(s.stateNode=o,fn=s,bt=mi(o.firstChild),di=!1,f=!0):f=!1),f||sr(s)),Jt(s),f=s.type,m=s.pendingProps,v=t!==null?t.memoizedProps:null,o=m.children,Mm(f,m)?o=null:v!==null&&Mm(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=kf(t,s,yw,null,null,a),pc._currentValue=f),rh(t,s),pn(t,s,o,a),s.child;case 6:return t===null&&$e&&((t=a=bt)&&(a=sN(a,s.pendingProps,di),a!==null?(s.stateNode=a,fn=s,bt=null,t=!0):t=!1),t||sr(s)),null;case 13:return Fy(t,s,a);case 4:return Qe(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=wa(s,null,o,a):pn(t,s,o,a),s.child;case 11:return ky(t,s,s.type,s.pendingProps,a);case 7:return pn(t,s,s.pendingProps,a),s.child;case 8:return pn(t,s,s.pendingProps.children,a),s.child;case 12:return pn(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,rr(s,s.type,o.value),pn(t,s,o.children,a),s.child;case 9:return f=s.type._context,o=s.pendingProps.children,ba(s),f=mn(f),o=o(f),s.flags|=1,pn(t,s,o,a),s.child;case 14:return My(t,s,s.type,s.pendingProps,a);case 15:return Py(t,s,s.type,s.pendingProps,a);case 19:return Gy(t,s,a);case 31:return Aw(t,s,a);case 22:return Vy(t,s,a,s.pendingProps);case 24:return ba(s),o=mn(Ht),t===null?(f=wf(),f===null&&(f=ft,m=xf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:o,cache:f},Af(s),rr(s,Ht,f)):((t.lanes&a)!==0&&(Sf(t,s),Yo(s,null,null,a),$o()),f=t.memoizedState,m=s.memoizedState,f.parent!==o?(f={parent:o,cache:o},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),rr(s,Ht,o)):(o=m.cache,rr(s,Ht,o),o!==f.cache&&Ef(s,[Ht],a,!0))),pn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function xs(t){t.flags|=4}function om(t,s,a,o,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(vv())t.flags|=8192;else throw Ta=Hu,Nf}else t.flags&=-16777217}function Qy(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!o0(s))if(vv())t.flags|=8192;else throw Ta=Hu,Nf}function lh(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?xe():536870912,t.lanes|=s,Il|=s)}function tc(t,s){if(!$e)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Et(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function Cw(t,s,a){var o=s.pendingProps;switch(gf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return Et(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ys(Ht),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(yl(s)?xs(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,yf())),Et(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(xs(s),m!==null?(Et(s),Qy(s,m)):(Et(s),om(s,f,null,o,a))):m?m!==t.memoizedState?(xs(s),Et(s),Qy(s,m)):(Et(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&xs(s),Et(s),om(s,f,t,o,a)),null;case 27:if(W(s),a=Y.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&xs(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return Et(s),null}t=de.current,yl(s)?A_(s):(t=e0(f,o,a),s.stateNode=t,xs(s))}return Et(s),null;case 5:if(W(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&xs(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return Et(s),null}if(m=de.current,yl(s))A_(s);else{var v=xh(Y.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(f,{is:o.is}):v.createElement(f)}}m[Bt]=s,m[an]=o;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(gn(m,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&xs(s)}}return Et(s),om(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&xs(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(r(166));if(t=Y.current,yl(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,f=fn,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[Bt]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Fv(t.nodeValue,a)),t||sr(s,!0)}else t=xh(t).createTextNode(o),t[Bt]=s,s.stateNode=t}return Et(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=yl(s),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Bt]=s}else ya(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),t=!1}else a=yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Kn(s),s):(Kn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Et(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=yl(s),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Bt]=s}else ya(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),f=!1}else f=yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Kn(s),s):(Kn(s),null)}return Kn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),lh(s,s.updateQueue),Et(s),null);case 4:return Ue(),t===null&&jm(s.stateNode.containerInfo),Et(s),null;case 10:return ys(s.type),Et(s),null;case 19:if(J(Mt),o=s.memoizedState,o===null)return Et(s),null;if(f=(s.flags&128)!==0,m=o.rendering,m===null)if(f)tc(o,!1);else{if(Rt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=$u(t),m!==null){for(s.flags|=128,tc(o,!1),t=m.updateQueue,s.updateQueue=t,lh(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)E_(a,t),a=a.sibling;return oe(Mt,Mt.current&1|2),$e&&gs(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&sn()>dh&&(s.flags|=128,f=!0,tc(o,!1),s.lanes=4194304)}else{if(!f)if(t=$u(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,lh(s,t),tc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!$e)return Et(s),null}else 2*sn()-o.renderingStartTime>dh&&a!==536870912&&(s.flags|=128,f=!0,tc(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=sn(),t.sibling=null,a=Mt.current,oe(Mt,f?a&1|2:a&1),$e&&gs(s,o.treeForkCount),t):(Et(s),null);case 22:case 23:return Kn(s),If(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),a=s.updateQueue,a!==null&&lh(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&J(Ea),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ys(Ht),Et(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Rw(t,s){switch(gf(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ys(Ht),Ue(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return W(s),null;case 31:if(s.memoizedState!==null){if(Kn(s),s.alternate===null)throw Error(r(340));ya()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Kn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ya()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return J(Mt),null;case 4:return Ue(),null;case 10:return ys(s.type),null;case 22:case 23:return Kn(s),If(),t!==null&&J(Ea),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ys(Ht),null;case 25:return null;default:return null}}function $y(t,s){switch(gf(s),s.tag){case 3:ys(Ht),Ue();break;case 26:case 27:case 5:W(s);break;case 4:Ue();break;case 31:s.memoizedState!==null&&Kn(s);break;case 13:Kn(s);break;case 19:J(Mt);break;case 10:ys(s.type);break;case 22:case 23:Kn(s),If(),t!==null&&J(Ea);break;case 24:ys(Ht)}}function nc(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var f=o.next;a=f;do{if((a.tag&t)===t){o=void 0;var m=a.create,v=a.inst;o=m(),v.destroy=o}a=a.next}while(a!==f)}}catch(T){ot(s,s.return,T)}}function hr(t,s,a){try{var o=s.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&t)===t){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=s;var I=a,G=T;try{G()}catch(Z){ot(f,I,Z)}}}o=o.next}while(o!==m)}}catch(Z){ot(s,s.return,Z)}}function Yy(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{U_(s,a)}catch(o){ot(t,t.return,o)}}}function Xy(t,s,a){a.props=Aa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){ot(t,s,o)}}function ic(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(f){ot(t,s,f)}}function Wi(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(f){ot(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ot(t,s,f)}else a.current=null}function Wy(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(f){ot(t,t.return,f)}}function cm(t,s,a){try{var o=t.stateNode;Ww(o,t.type,a,s),o[an]=s}catch(f){ot(t,t.return,f)}}function Jy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&yr(t.type)||t.tag===4}function um(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&yr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hm(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ei));else if(o!==4&&(o===27&&yr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(hm(t,s,a),t=t.sibling;t!==null;)hm(t,s,a),t=t.sibling}function oh(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&yr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(oh(t,s,a),t=t.sibling;t!==null;)oh(t,s,a),t=t.sibling}function Zy(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);gn(s,o,a),s[Bt]=t,s[an]=a}catch(m){ot(t,t.return,m)}}var Ts=!1,Qt=!1,dm=!1,ev=typeof WeakSet=="function"?WeakSet:Set,on=null;function jw(t,s){if(t=t.containerInfo,Om=Rh,t=d_(t),rf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,T=-1,I=-1,G=0,Z=0,ie=t,K=null;t:for(;;){for(var $;ie!==a||f!==0&&ie.nodeType!==3||(T=v+f),ie!==m||o!==0&&ie.nodeType!==3||(I=v+o),ie.nodeType===3&&(v+=ie.nodeValue.length),($=ie.firstChild)!==null;)K=ie,ie=$;for(;;){if(ie===t)break t;if(K===a&&++G===f&&(T=v),K===m&&++Z===o&&(I=v),($=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=$}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(km={focusedElem:t,selectionRange:a},Rh=!1,on=s;on!==null;)if(s=on,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,on=t;else for(;on!==null;){switch(s=on,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var ge=Aa(a.type,f);t=o.getSnapshotBeforeUpdate(ge,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(we){ot(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Vm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,on=t;break}on=s.return}}function tv(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ns(t,a),o&4&&nc(5,a);break;case 1:if(Ns(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){ot(a,a.return,v)}else{var f=Aa(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){ot(a,a.return,v)}}o&64&&Yy(a),o&512&&ic(a,a.return);break;case 3:if(Ns(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{U_(t,s)}catch(v){ot(a,a.return,v)}}break;case 27:s===null&&o&4&&Zy(a);case 26:case 5:Ns(t,a),s===null&&o&4&&Wy(a),o&512&&ic(a,a.return);break;case 12:Ns(t,a);break;case 31:Ns(t,a),o&4&&sv(t,a);break;case 13:Ns(t,a),o&4&&rv(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Uw.bind(null,a),rN(t,a))));break;case 22:if(o=a.memoizedState!==null||Ts,!o){s=s!==null&&s.memoizedState!==null||Qt,f=Ts;var m=Qt;Ts=o,(Qt=s)&&!m?As(t,a,(a.subtreeFlags&8772)!==0):Ns(t,a),Ts=f,Qt=m}break;case 30:break;default:Ns(t,a)}}function nv(t){var s=t.alternate;s!==null&&(t.alternate=null,nv(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&tl(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Tt=null,Dn=!1;function ws(t,s,a){for(a=a.child;a!==null;)iv(t,s,a),a=a.sibling}function iv(t,s,a){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(At,a)}catch{}switch(a.tag){case 26:Qt||Wi(a,s),ws(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qt||Wi(a,s);var o=Tt,f=Dn;yr(a.type)&&(Tt=a.stateNode,Dn=!1),ws(t,s,a),dc(a.stateNode),Tt=o,Dn=f;break;case 5:Qt||Wi(a,s);case 6:if(o=Tt,f=Dn,Tt=null,ws(t,s,a),Tt=o,Dn=f,Tt!==null)if(Dn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(a.stateNode)}catch(m){ot(a,s,m)}else try{Tt.removeChild(a.stateNode)}catch(m){ot(a,s,m)}break;case 18:Tt!==null&&(Dn?(t=Tt,Yv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ul(t)):Yv(Tt,a.stateNode));break;case 4:o=Tt,f=Dn,Tt=a.stateNode.containerInfo,Dn=!0,ws(t,s,a),Tt=o,Dn=f;break;case 0:case 11:case 14:case 15:hr(2,a,s),Qt||hr(4,a,s),ws(t,s,a);break;case 1:Qt||(Wi(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Xy(a,s,o)),ws(t,s,a);break;case 21:ws(t,s,a);break;case 22:Qt=(o=Qt)||a.memoizedState!==null,ws(t,s,a),Qt=o;break;default:ws(t,s,a)}}function sv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ul(t)}catch(a){ot(s,s.return,a)}}}function rv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ul(t)}catch(a){ot(s,s.return,a)}}function Iw(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new ev),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new ev),s;default:throw Error(r(435,t.tag))}}function ch(t,s){var a=Iw(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var f=zw.bind(null,t,o);o.then(f,f)}})}function On(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var f=a[o],m=t,v=s,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(yr(T.type)){Tt=T.stateNode,Dn=!1;break e}break;case 5:Tt=T.stateNode,Dn=!1;break e;case 3:case 4:Tt=T.stateNode.containerInfo,Dn=!0;break e}T=T.return}if(Tt===null)throw Error(r(160));iv(m,v,f),Tt=null,Dn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)av(s,t),s=s.sibling}var Si=null;function av(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(s,t),kn(t),o&4&&(hr(3,t,t.return),nc(3,t),hr(5,t,t.return));break;case 1:On(s,t),kn(t),o&512&&(Qt||a===null||Wi(a,a.return)),o&64&&Ts&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var f=Si;if(On(s,t),kn(t),o&512&&(Qt||a===null||Wi(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Vi]||m[Bt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),gn(m,o,a),m[Bt]=t,qt(m),o=m;break e;case"link":var v=a0("link","href",f).get(o+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}m=f.createElement(o),gn(m,o,a),f.head.appendChild(m);break;case"meta":if(v=a0("meta","content",f).get(o+(a.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}m=f.createElement(o),gn(m,o,a),f.head.appendChild(m);break;default:throw Error(r(468,o))}m[Bt]=t,qt(m),o=m}t.stateNode=o}else l0(f,t.type,t.stateNode);else t.stateNode=r0(f,o,t.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?l0(f,t.type,t.stateNode):r0(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&cm(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(s,t),kn(t),o&512&&(Qt||a===null||Wi(a,a.return)),a!==null&&o&4&&cm(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(s,t),kn(t),o&512&&(Qt||a===null||Wi(a,a.return)),t.flags&32){f=t.stateNode;try{In(f,"")}catch(ge){ot(t,t.return,ge)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,cm(t,f,a!==null?a.memoizedProps:f)),o&1024&&(dm=!0);break;case 6:if(On(s,t),kn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ge){ot(t,t.return,ge)}}break;case 3:if(Nh=null,f=Si,Si=Th(s.containerInfo),On(s,t),Si=f,kn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ul(s.containerInfo)}catch(ge){ot(t,t.return,ge)}dm&&(dm=!1,lv(t));break;case 4:o=Si,Si=Th(t.stateNode.containerInfo),On(s,t),kn(t),Si=o;break;case 12:On(s,t),kn(t);break;case 31:On(s,t),kn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ch(t,o)));break;case 13:On(s,t),kn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hh=sn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ch(t,o)));break;case 22:f=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,G=Ts,Z=Qt;if(Ts=G||f,Qt=Z||I,On(s,t),Qt=Z,Ts=G,kn(t),o&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||I||Ts||Qt||Sa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){I=a=s;try{if(m=I.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=I.stateNode;var ie=I.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ge){ot(I,I.return,ge)}}}else if(s.tag===6){if(a===null){I=s;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(ge){ot(I,I.return,ge)}}}else if(s.tag===18){if(a===null){I=s;try{var $=I.stateNode;f?Xv($,!0):Xv(I.stateNode,!1)}catch(ge){ot(I,I.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,ch(t,a))));break;case 19:On(s,t),kn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ch(t,o)));break;case 30:break;case 21:break;default:On(s,t),kn(t)}}function kn(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(Jy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=um(t);oh(t,m,f);break;case 5:var v=a.stateNode;a.flags&32&&(In(v,""),a.flags&=-33);var T=um(t);oh(t,T,v);break;case 3:case 4:var I=a.stateNode.containerInfo,G=um(t);hm(t,G,I);break;default:throw Error(r(161))}}catch(Z){ot(t,t.return,Z)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function lv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;lv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ns(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)tv(t,s.alternate,s),s=s.sibling}function Sa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:hr(4,s,s.return),Sa(s);break;case 1:Wi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Xy(s,s.return,a),Sa(s);break;case 27:dc(s.stateNode);case 26:case 5:Wi(s,s.return),Sa(s);break;case 22:s.memoizedState===null&&Sa(s);break;case 30:Sa(s);break;default:Sa(s)}t=t.sibling}}function As(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,f=t,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:As(f,m,a),nc(4,m);break;case 1:if(As(f,m,a),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){ot(o,o.return,G)}if(o=m,f=o.updateQueue,f!==null){var T=o.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)L_(I[f],T)}catch(G){ot(o,o.return,G)}}a&&v&64&&Yy(m),ic(m,m.return);break;case 27:Zy(m);case 26:case 5:As(f,m,a),a&&o===null&&v&4&&Wy(m),ic(m,m.return);break;case 12:As(f,m,a);break;case 31:As(f,m,a),a&&v&4&&sv(f,m);break;case 13:As(f,m,a),a&&v&4&&rv(f,m);break;case 22:m.memoizedState===null&&As(f,m,a),ic(m,m.return);break;case 30:break;default:As(f,m,a)}s=s.sibling}}function fm(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Fo(a))}function mm(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Fo(t))}function Ci(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ov(t,s,a,o),s=s.sibling}function ov(t,s,a,o){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ci(t,s,a,o),f&2048&&nc(9,s);break;case 1:Ci(t,s,a,o);break;case 3:Ci(t,s,a,o),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Fo(t)));break;case 12:if(f&2048){Ci(t,s,a,o),t=s.stateNode;try{var m=s.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){ot(s,s.return,I)}}else Ci(t,s,a,o);break;case 31:Ci(t,s,a,o);break;case 13:Ci(t,s,a,o);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?Ci(t,s,a,o):sc(t,s):m._visibility&2?Ci(t,s,a,o):(m._visibility|=2,Cl(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),f&2048&&fm(v,s);break;case 24:Ci(t,s,a,o),f&2048&&mm(s.alternate,s);break;default:Ci(t,s,a,o)}}function Cl(t,s,a,o,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,v=s,T=a,I=o,G=v.flags;switch(v.tag){case 0:case 11:case 15:Cl(m,v,T,I,f),nc(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?Cl(m,v,T,I,f):sc(m,v):(Z._visibility|=2,Cl(m,v,T,I,f)),f&&G&2048&&fm(v.alternate,v);break;case 24:Cl(m,v,T,I,f),f&&G&2048&&mm(v.alternate,v);break;default:Cl(m,v,T,I,f)}s=s.sibling}}function sc(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,f=o.flags;switch(o.tag){case 22:sc(a,o),f&2048&&fm(o.alternate,o);break;case 24:sc(a,o),f&2048&&mm(o.alternate,o);break;default:sc(a,o)}s=s.sibling}}var rc=8192;function Rl(t,s,a){if(t.subtreeFlags&rc)for(t=t.child;t!==null;)cv(t,s,a),t=t.sibling}function cv(t,s,a){switch(t.tag){case 26:Rl(t,s,a),t.flags&rc&&t.memoizedState!==null&&_N(a,Si,t.memoizedState,t.memoizedProps);break;case 5:Rl(t,s,a);break;case 3:case 4:var o=Si;Si=Th(t.stateNode.containerInfo),Rl(t,s,a),Si=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=rc,rc=16777216,Rl(t,s,a),rc=o):Rl(t,s,a));break;default:Rl(t,s,a)}}function uv(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function ac(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];on=o,dv(o,t)}uv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hv(t),t=t.sibling}function hv(t){switch(t.tag){case 0:case 11:case 15:ac(t),t.flags&2048&&hr(9,t,t.return);break;case 3:ac(t);break;case 12:ac(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,uh(t)):ac(t);break;default:ac(t)}}function uh(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];on=o,dv(o,t)}uv(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:hr(8,s,s.return),uh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,uh(s));break;default:uh(s)}t=t.sibling}}function dv(t,s){for(;on!==null;){var a=on;switch(a.tag){case 0:case 11:case 15:hr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Fo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,on=o;else e:for(a=t;on!==null;){o=on;var f=o.sibling,m=o.return;if(nv(o),o===a){on=null;break e}if(f!==null){f.return=m,on=f;break e}on=m}}}var Dw={getCacheForType:function(t){var s=mn(Ht),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return mn(Ht).controller.signal}},Ow=typeof WeakMap=="function"?WeakMap:Map,it=0,ft=null,ze=null,qe=0,lt=0,Qn=null,dr=!1,jl=!1,pm=!1,Ss=0,Rt=0,fr=0,Ca=0,gm=0,$n=0,Il=0,lc=null,Mn=null,_m=!1,hh=0,fv=0,dh=1/0,fh=null,mr=null,en=0,pr=null,Dl=null,Cs=0,ym=0,vm=null,mv=null,oc=0,bm=null;function Yn(){return(it&2)!==0&&qe!==0?qe&-qe:X.T!==null?Am():mu()}function pv(){if($n===0)if((qe&536870912)===0||$e){var t=us;us<<=1,(us&3932160)===0&&(us=262144),$n=t}else $n=536870912;return t=Gn.current,t!==null&&(t.flags|=32),$n}function Pn(t,s,a){(t===ft&&(lt===2||lt===9)||t.cancelPendingCommit!==null)&&(Ol(t,0),gr(t,qe,$n,!1)),rn(t,a),((it&2)===0||t!==ft)&&(t===ft&&((it&2)===0&&(Ca|=a),Rt===4&&gr(t,qe,$n,!1)),Ji(t))}function gv(t,s,a){if((it&6)!==0)throw Error(r(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||zn(t,s),f=o?Pw(t,s):xm(t,s,!0),m=o;do{if(f===0){jl&&!o&&gr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!kw(a)){f=xm(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var T=t;f=lc;var I=T.current.memoizedState.isDehydrated;if(I&&(Ol(T,v).flags|=256),v=xm(T,v,!1),v!==2){if(pm&&!I){T.errorRecoveryDisabledLanes|=m,Ca|=m,f=4;break e}m=Mn,Mn=f,m!==null&&(Mn===null?Mn=m:Mn.push.apply(Mn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Ol(t,0),gr(t,s,0,!0);break}e:{switch(o=t,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:gr(o,s,$n,!dr);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=hh+300-sn(),10<f)){if(gr(o,s,$n,!dr),yn(o,0,!0)!==0)break e;Cs=s,o.timeoutHandle=Qv(_v.bind(null,o,a,Mn,fh,_m,s,$n,Ca,Il,dr,m,"Throttled",-0,0),f);break e}_v(o,a,Mn,fh,_m,s,$n,Ca,Il,dr,m,null,-0,0)}}break}while(!0);Ji(t)}function _v(t,s,a,o,f,m,v,T,I,G,Z,ie,K,$){if(t.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ei},cv(s,m,ie);var ge=(m&62914560)===m?hh-sn():(m&4194048)===m?fv-sn():0;if(ge=yN(ie,ge),ge!==null){Cs=m,t.cancelPendingCommit=ge(Nv.bind(null,t,s,m,a,o,f,v,T,I,Z,ie,null,K,$)),gr(t,m,v,!G);return}}Nv(t,s,m,a,o,f,v,T,I)}function kw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var f=a[o],m=f.getSnapshot;f=f.value;try{if(!Fn(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gr(t,s,a,o){s&=~gm,s&=~Ca,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var f=s;0<f;){var m=31-wt(f),v=1<<m;o[m]=-1,f&=~v}a!==0&&Rn(t,a,s)}function mh(){return(it&6)===0?(cc(0),!1):!0}function Em(){if(ze!==null){if(lt===0)var t=ze.return;else t=ze,_s=va=null,Vf(t),Tl=null,Go=0,t=ze;for(;t!==null;)$y(t.alternate,t),t=t.return;ze=null}}function Ol(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,eN(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Cs=0,Em(),ft=t,ze=a=ps(t.current,null),qe=s,lt=0,Qn=null,dr=!1,jl=zn(t,s),pm=!1,Il=$n=gm=Ca=fr=Rt=0,Mn=lc=null,_m=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var f=31-wt(o),m=1<<f;s|=t[f],o&=~m}return Ss=s,Mu(),a}function yv(t,s){ke=null,X.H=Zo,s===xl||s===Fu?(s=k_(),lt=3):s===Nf?(s=k_(),lt=4):lt=s===Zf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Qn=s,ze===null&&(Rt=1,ih(t,ci(s,t.current)))}function vv(){var t=Gn.current;return t===null?!0:(qe&4194048)===qe?fi===null:(qe&62914560)===qe||(qe&536870912)!==0?t===fi:!1}function bv(){var t=X.H;return X.H=Zo,t===null?Zo:t}function Ev(){var t=X.A;return X.A=Dw,t}function ph(){Rt=4,dr||(qe&4194048)!==qe&&Gn.current!==null||(jl=!0),(fr&134217727)===0&&(Ca&134217727)===0||ft===null||gr(ft,qe,$n,!1)}function xm(t,s,a){var o=it;it|=2;var f=bv(),m=Ev();(ft!==t||qe!==s)&&(fh=null,Ol(t,s)),s=!1;var v=Rt;e:do try{if(lt!==0&&ze!==null){var T=ze,I=Qn;switch(lt){case 8:Em(),v=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(s=!0);var G=lt;if(lt=0,Qn=null,kl(t,T,I,G),a&&jl){v=0;break e}break;default:G=lt,lt=0,Qn=null,kl(t,T,I,G)}}Mw(),v=Rt;break}catch(Z){yv(t,Z)}while(!0);return s&&t.shellSuspendCounter++,_s=va=null,it=o,X.H=f,X.A=m,ze===null&&(ft=null,qe=0,Mu()),v}function Mw(){for(;ze!==null;)xv(ze)}function Pw(t,s){var a=it;it|=2;var o=bv(),f=Ev();ft!==t||qe!==s?(fh=null,dh=sn()+500,Ol(t,s)):jl=zn(t,s);e:do try{if(lt!==0&&ze!==null){s=ze;var m=Qn;t:switch(lt){case 1:lt=0,Qn=null,kl(t,s,m,1);break;case 2:case 9:if(D_(m)){lt=0,Qn=null,Tv(s);break}s=function(){lt!==2&&lt!==9||ft!==t||(lt=7),Ji(t)},m.then(s,s);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:D_(m)?(lt=0,Qn=null,Tv(s)):(lt=0,Qn=null,kl(t,s,m,7));break;case 5:var v=null;switch(ze.tag){case 26:v=ze.memoizedState;case 5:case 27:var T=ze;if(v?o0(v):T.stateNode.complete){lt=0,Qn=null;var I=T.sibling;if(I!==null)ze=I;else{var G=T.return;G!==null?(ze=G,gh(G)):ze=null}break t}}lt=0,Qn=null,kl(t,s,m,5);break;case 6:lt=0,Qn=null,kl(t,s,m,6);break;case 8:Em(),Rt=6;break e;default:throw Error(r(462))}}Vw();break}catch(Z){yv(t,Z)}while(!0);return _s=va=null,X.H=o,X.A=f,it=a,ze!==null?0:(ft=null,qe=0,Mu(),Rt)}function Vw(){for(;ze!==null&&!Gs();)xv(ze)}function xv(t){var s=Ky(t.alternate,t,Ss);t.memoizedProps=t.pendingProps,s===null?gh(t):ze=s}function Tv(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=zy(a,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=zy(a,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:Vf(s);default:$y(a,s),s=ze=E_(s,Ss),s=Ky(a,s,Ss)}t.memoizedProps=t.pendingProps,s===null?gh(t):ze=s}function kl(t,s,a,o){_s=va=null,Vf(s),Tl=null,Go=0;var f=s.return;try{if(Nw(t,f,s,a,qe)){Rt=1,ih(t,ci(a,t.current)),ze=null;return}}catch(m){if(f!==null)throw ze=f,m;Rt=1,ih(t,ci(a,t.current)),ze=null;return}s.flags&32768?($e||o===1?t=!0:jl||(qe&536870912)!==0?t=!1:(dr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Gn.current,o!==null&&o.tag===13&&(o.flags|=16384))),wv(s,t)):gh(s)}function gh(t){var s=t;do{if((s.flags&32768)!==0){wv(s,dr);return}t=s.return;var a=Cw(s.alternate,s,Ss);if(a!==null){ze=a;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=t}while(s!==null);Rt===0&&(Rt=5)}function wv(t,s){do{var a=Rw(t.alternate,t);if(a!==null){a.flags&=32767,ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){ze=t;return}ze=t=a}while(t!==null);Rt=6,ze=null}function Nv(t,s,a,o,f,m,v,T,I){t.cancelPendingCommit=null;do _h();while(en!==0);if((it&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=uf,na(t,a,m,v,T,I),t===ft&&(ze=ft=null,qe=0),Dl=s,pr=t,Cs=a,ym=m,vm=f,mv=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Bw(Mi,function(){return jv(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null,f=ce.p,ce.p=2,v=it,it|=4;try{jw(t,s,a)}finally{it=v,ce.p=f,X.T=o}}en=1,Av(),Sv(),Cv()}}function Av(){if(en===1){en=0;var t=pr,s=Dl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var o=ce.p;ce.p=2;var f=it;it|=4;try{av(s,t);var m=km,v=d_(t.containerInfo),T=m.focusedElem,I=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&h_(T.ownerDocument.documentElement,T)){if(I!==null&&rf(T)){var G=I.start,Z=I.end;if(Z===void 0&&(Z=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(Z,T.value.length);else{var ie=T.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var $=K.getSelection(),ge=T.textContent.length,we=Math.min(I.start,ge),dt=I.end===void 0?we:Math.min(I.end,ge);!$.extend&&we>dt&&(v=dt,dt=we,we=v);var U=u_(T,we),P=u_(T,dt);if(U&&P&&($.rangeCount!==1||$.anchorNode!==U.node||$.anchorOffset!==U.offset||$.focusNode!==P.node||$.focusOffset!==P.offset)){var H=ie.createRange();H.setStart(U.node,U.offset),$.removeAllRanges(),we>dt?($.addRange(H),$.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),$.addRange(H))}}}}for(ie=[],$=T;$=$.parentNode;)$.nodeType===1&&ie.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var ne=ie[T];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Rh=!!Om,km=Om=null}finally{it=f,ce.p=o,X.T=a}}t.current=s,en=2}}function Sv(){if(en===2){en=0;var t=pr,s=Dl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var o=ce.p;ce.p=2;var f=it;it|=4;try{tv(t,s.alternate,s)}finally{it=f,ce.p=o,X.T=a}}en=3}}function Cv(){if(en===4||en===3){en=0,Oi();var t=pr,s=Dl,a=Cs,o=mv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?en=5:(en=0,Dl=pr=null,Rv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(mr=null),hs(a),s=s.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(At,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=X.T,f=ce.p,ce.p=2,X.T=null;try{for(var m=t.onRecoverableError,v=0;v<o.length;v++){var T=o[v];m(T.value,{componentStack:T.stack})}}finally{X.T=s,ce.p=f}}(Cs&3)!==0&&_h(),Ji(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===bm?oc++:(oc=0,bm=t):oc=0,cc(0)}}function Rv(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Fo(s)))}function _h(){return Av(),Sv(),Cv(),jv()}function jv(){if(en!==5)return!1;var t=pr,s=ym;ym=0;var a=hs(Cs),o=X.T,f=ce.p;try{ce.p=32>a?32:a,X.T=null,a=vm,vm=null;var m=pr,v=Cs;if(en=0,Dl=pr=null,Cs=0,(it&6)!==0)throw Error(r(331));var T=it;if(it|=4,hv(m.current),ov(m,m.current,v,a),it=T,cc(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(At,m)}catch{}return!0}finally{ce.p=f,X.T=o,Rv(t,s)}}function Iv(t,s,a){s=ci(a,s),s=Jf(t.stateNode,s,2),t=or(t,s,2),t!==null&&(rn(t,2),Ji(t))}function ot(t,s,a){if(t.tag===3)Iv(t,t,a);else for(;s!==null;){if(s.tag===3){Iv(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(mr===null||!mr.has(o))){t=ci(a,t),a=Dy(2),o=or(s,a,2),o!==null&&(Oy(a,o,s,t),rn(o,2),Ji(o));break}}s=s.return}}function Tm(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new Ow;var f=new Set;o.set(s,f)}else f=o.get(s),f===void 0&&(f=new Set,o.set(s,f));f.has(a)||(pm=!0,f.add(a),t=Lw.bind(null,t,s,a),s.then(t,t))}function Lw(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ft===t&&(qe&a)===a&&(Rt===4||Rt===3&&(qe&62914560)===qe&&300>sn()-hh?(it&2)===0&&Ol(t,0):gm|=a,Il===qe&&(Il=0)),Ji(t)}function Dv(t,s){s===0&&(s=xe()),t=ga(t,s),t!==null&&(rn(t,s),Ji(t))}function Uw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Dv(t,a)}function zw(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(s),Dv(t,a)}function Bw(t,s){return pt(t,s)}var yh=null,Ml=null,wm=!1,vh=!1,Nm=!1,_r=0;function Ji(t){t!==Ml&&t.next===null&&(Ml===null?yh=Ml=t:Ml=Ml.next=t),vh=!0,wm||(wm=!0,Fw())}function cc(t,s){if(!Nm&&vh){Nm=!0;do for(var a=!1,o=yh;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var v=o.suspendedLanes,T=o.pingedLanes;m=(1<<31-wt(42|t)+1)-1,m&=f&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Pv(o,m))}else m=qe,m=yn(o,o===ft?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||zn(o,m)||(a=!0,Pv(o,m));o=o.next}while(a);Nm=!1}}function qw(){Ov()}function Ov(){vh=wm=!1;var t=0;_r!==0&&Zw()&&(t=_r);for(var s=sn(),a=null,o=yh;o!==null;){var f=o.next,m=kv(o,s);m===0?(o.next=null,a===null?yh=f:a.next=f,f===null&&(Ml=a)):(a=o,(t!==0||(m&3)!==0)&&(vh=!0)),o=f}en!==0&&en!==5||cc(t),_r!==0&&(_r=0)}function kv(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-wt(m),T=1<<v,I=f[v];I===-1?((T&a)===0||(T&o)!==0)&&(f[v]=B(T,s)):I<=s&&(t.expiredLanes|=T),m&=~T}if(s=ft,a=qe,a=yn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(lt===2||lt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ti(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||zn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&ti(o),hs(a)){case 2:case 8:a=ea;break;case 32:a=Mi;break;case 268435456:a=Xa;break;default:a=Mi}return o=Mv.bind(null,t),a=pt(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&ti(o),t.callbackPriority=2,t.callbackNode=null,2}function Mv(t,s){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(_h()&&t.callbackNode!==a)return null;var o=qe;return o=yn(t,t===ft?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(gv(t,o,s),kv(t,sn()),t.callbackNode!=null&&t.callbackNode===a?Mv.bind(null,t):null)}function Pv(t,s){if(_h())return null;gv(t,s,!0)}function Fw(){tN(function(){(it&6)!==0?pt(yi,qw):Ov()})}function Am(){if(_r===0){var t=bl;t===0&&(t=ni,ni<<=1,(ni&261888)===0&&(ni=256)),_r=t}return _r}function Vv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:rl(""+t)}function Lv(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Hw(t,s,a,o,f){if(s==="submit"&&a&&a.stateNode===f){var m=Vv((f[an]||null).action),v=o.submitter;v&&(s=(s=v[an]||null)?Vv(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var T=new Gi("action","action",null,o,f);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(_r!==0){var I=v?Lv(f,v):new FormData(f);Kf(a,{pending:!0,data:I,method:f.method,action:m},null,I)}}else typeof m=="function"&&(T.preventDefault(),I=v?Lv(f,v):new FormData(f),Kf(a,{pending:!0,data:I,method:f.method,action:m},m,I))},currentTarget:f}]})}}for(var Sm=0;Sm<cf.length;Sm++){var Cm=cf[Sm],Gw=Cm.toLowerCase(),Kw=Cm[0].toUpperCase()+Cm.slice(1);Ai(Gw,"on"+Kw)}Ai(p_,"onAnimationEnd"),Ai(g_,"onAnimationIteration"),Ai(__,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(ow,"onTransitionRun"),Ai(cw,"onTransitionStart"),Ai(uw,"onTransitionCancel"),Ai(y_,"onTransitionEnd"),Bi("onMouseEnter",["mouseout","mouseover"]),Bi("onMouseLeave",["mouseout","mouseover"]),Bi("onPointerEnter",["pointerout","pointerover"]),Bi("onPointerLeave",["pointerout","pointerover"]),zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uc));function Uv(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],f=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var v=o.length-1;0<=v;v--){var T=o[v],I=T.instance,G=T.currentTarget;if(T=T.listener,I!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=G;try{m(f)}catch(Z){ku(Z)}f.currentTarget=null,m=I}else for(v=0;v<o.length;v++){if(T=o[v],I=T.instance,G=T.currentTarget,T=T.listener,I!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=G;try{m(f)}catch(Z){ku(Z)}f.currentTarget=null,m=I}}}}function Be(t,s){var a=s[el];a===void 0&&(a=s[el]=new Set);var o=t+"__bubble";a.has(o)||(zv(s,t,2,!1),a.add(o))}function Rm(t,s,a){var o=0;s&&(o|=4),zv(a,t,o,s)}var bh="_reactListening"+Math.random().toString(36).slice(2);function jm(t){if(!t[bh]){t[bh]=!0,xo.forEach(function(a){a!=="selectionchange"&&(Qw.has(a)||Rm(a,!1,t),Rm(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[bh]||(s[bh]=!0,Rm("selectionchange",!1,s))}}function zv(t,s,a,o){switch(p0(s)){case 2:var f=EN;break;case 8:f=xN;break;default:f=Gm}a=f.bind(null,s,a,t),f=void 0,!oa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function Im(t,s,a,o,f){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=o.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=Li(T),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){o=m=v;continue e}T=T.parentNode}}o=o.return}Js(function(){var G=m,Z=ri(a),ie=[];e:{var K=v_.get(t);if(K!==void 0){var $=Gi,ge=t;switch(t){case"keypress":if(ua(a)===0)break e;case"keydown":case"keyup":$=Iu;break;case"focusin":ge="focus",$=da;break;case"focusout":ge="blur",$=da;break;case"beforeblur":case"afterblur":$=da;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=y;break;case p_:case g_:case __:$=wu;break;case y_:$=N;break;case"scroll":case"scrollend":$=ko;break;case"wheel":$=Q;break;case"copy":case"cut":case"paste":$=Nu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ms;break;case"toggle":case"beforetoggle":$=Oe}var we=(s&4)!==0,dt=!we&&(t==="scroll"||t==="scrollend"),U=we?K!==null?K+"Capture":null:K;we=[];for(var P=G,H;P!==null;){var ne=P;if(H=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||H===null||U===null||(ne=xi(P,U),ne!=null&&we.push(hc(P,ne,H))),dt)break;P=P.return}0<we.length&&(K=new $(K,ge,null,a,Z),ie.push({event:K,listeners:we}))}}if((s&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",K&&a!==Io&&(ge=a.relatedTarget||a.fromElement)&&(Li(ge)||ge[Pi]))break e;if(($||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,$?(ge=a.relatedTarget||a.toElement,$=G,ge=ge?Li(ge):null,ge!==null&&(dt=u(ge),we=ge.tag,ge!==dt||we!==5&&we!==27&&we!==6)&&(ge=null)):($=null,ge=G),$!==ge)){if(we=Mo,ne="onMouseLeave",U="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(we=ms,ne="onPointerLeave",U="onPointerEnter",P="pointer"),dt=$==null?K:Bn($),H=ge==null?K:Bn(ge),K=new we(ne,P+"leave",$,a,Z),K.target=dt,K.relatedTarget=H,ne=null,Li(Z)===G&&(we=new we(U,P+"enter",ge,a,Z),we.target=H,we.relatedTarget=dt,ne=we),dt=ne,$&&ge)t:{for(we=$w,U=$,P=ge,H=0,ne=U;ne;ne=we(ne))H++;ne=0;for(var Ee=P;Ee;Ee=we(Ee))ne++;for(;0<H-ne;)U=we(U),H--;for(;0<ne-H;)P=we(P),ne--;for(;H--;){if(U===P||P!==null&&U===P.alternate){we=U;break t}U=we(U),P=we(P)}we=null}else we=null;$!==null&&Bv(ie,K,$,we,!1),ge!==null&&dt!==null&&Bv(ie,dt,ge,we,!0)}}e:{if(K=G?Bn(G):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var Je=s_;else if(n_(K))if(r_)Je=rw;else{Je=iw;var ye=nw}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&sl(G.elementType)&&(Je=s_):Je=sw;if(Je&&(Je=Je(t,G))){i_(ie,Je,a,Z);break e}ye&&ye(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Co(K,"number",K.value)}switch(ye=G?Bn(G):window,t){case"focusin":(n_(ye)||ye.contentEditable==="true")&&(dl=ye,af=G,zo=null);break;case"focusout":zo=af=dl=null;break;case"mousedown":lf=!0;break;case"contextmenu":case"mouseup":case"dragend":lf=!1,f_(ie,a,Z);break;case"selectionchange":if(lw)break;case"keydown":case"keyup":f_(ie,a,Z)}var Me;if(nt)e:{switch(t){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else hl?fa(t,a)&&(Fe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Fe="onCompositionStart");Fe&&($i&&a.locale!=="ko"&&(hl||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&hl&&(Me=Oo()):(Hi=Z,Do="value"in Hi?Hi.value:Hi.textContent,hl=!0)),ye=Eh(G,Fe),0<ye.length&&(Fe=new Qi(Fe,t,null,a,Z),ie.push({event:Fe,listeners:ye}),Me?Fe.data=Me:(Me=ul(a),Me!==null&&(Fe.data=Me)))),(Me=li?JT(t,a):ZT(t,a))&&(Fe=Eh(G,"onBeforeInput"),0<Fe.length&&(ye=new Qi("onBeforeInput","beforeinput",null,a,Z),ie.push({event:ye,listeners:Fe}),ye.data=Me)),Hw(ie,t,G,a,Z)}Uv(ie,s)})}function hc(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Eh(t,s){for(var a=s+"Capture",o=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=xi(t,a),f!=null&&o.unshift(hc(t,f,m)),f=xi(t,s),f!=null&&o.push(hc(t,f,m))),t.tag===3)return o;t=t.return}return[]}function $w(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Bv(t,s,a,o,f){for(var m=s._reactName,v=[];a!==null&&a!==o;){var T=a,I=T.alternate,G=T.stateNode;if(T=T.tag,I!==null&&I===o)break;T!==5&&T!==26&&T!==27||G===null||(I=G,f?(G=xi(a,m),G!=null&&v.unshift(hc(a,G,I))):f||(G=xi(a,m),G!=null&&v.push(hc(a,G,I)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var Yw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function qv(t){return(typeof t=="string"?t:""+t).replace(Yw,`
`).replace(Xw,"")}function Fv(t,s){return s=qv(s),qv(t)===s}function ht(t,s,a,o,f,m){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||In(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&In(t,""+o);break;case"className":qn(t,"class",o);break;case"tabIndex":qn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":qn(t,a,o);break;case"style":jo(t,o,m);break;case"data":if(s!=="object"){qn(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=rl(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&ht(t,s,"name",f.name,f,null),ht(t,s,"formEncType",f.formEncType,f,null),ht(t,s,"formMethod",f.formMethod,f,null),ht(t,s,"formTarget",f.formTarget,f,null)):(ht(t,s,"encType",f.encType,f,null),ht(t,s,"method",f.method,f,null),ht(t,s,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=rl(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Ei);break;case"onScroll":o!=null&&Be("scroll",t);break;case"onScrollEnd":o!=null&&Be("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=rl(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Be("beforetoggle",t),Be("toggle",t),nl(t,"popover",o);break;case"xlinkActuate":Ft(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ft(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ft(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ft(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ft(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ft(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":nl(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Eu.get(a)||a,nl(t,a,o))}}function Dm(t,s,a,o,f,m){switch(a){case"style":jo(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?In(t,o):(typeof o=="number"||typeof o=="bigint")&&In(t,""+o);break;case"onScroll":o!=null&&Be("scroll",t);break;case"onScrollEnd":o!=null&&Be("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!To.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=t[an]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,f);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):nl(t,a,o)}}}function gn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",t),Be("load",t);var o=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ht(t,s,m,v,a,null)}}f&&ht(t,s,"srcSet",a.srcSet,a,null),o&&ht(t,s,"src",a.src,a,null);return;case"input":Be("invalid",t);var T=m=v=f=null,I=null,G=null;for(o in a)if(a.hasOwnProperty(o)){var Z=a[o];if(Z!=null)switch(o){case"name":f=Z;break;case"type":v=Z;break;case"checked":I=Z;break;case"defaultChecked":G=Z;break;case"value":m=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:ht(t,s,o,Z,a,null)}}yu(t,m,T,I,G,v,f,!1);return;case"select":Be("invalid",t),o=v=m=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:ht(t,s,f,T,a,null)}s=m,a=v,t.multiple=!!o,s!=null?$s(t,!!o,s,!1):a!=null&&$s(t,!!o,a,!0);return;case"textarea":Be("invalid",t),m=f=o=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ht(t,s,v,T,a,null)}Ys(t,o,f,m);return;case"option":for(I in a)a.hasOwnProperty(I)&&(o=a[I],o!=null)&&(I==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":ht(t,s,I,o,a,null));return;case"dialog":Be("beforetoggle",t),Be("toggle",t),Be("cancel",t),Be("close",t);break;case"iframe":case"object":Be("load",t);break;case"video":case"audio":for(o=0;o<uc.length;o++)Be(uc[o],t);break;case"image":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"embed":case"source":case"link":Be("error",t),Be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(o=a[G],o!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ht(t,s,G,o,a,null)}return;default:if(sl(s)){for(Z in a)a.hasOwnProperty(Z)&&(o=a[Z],o!==void 0&&Dm(t,s,Z,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&ht(t,s,T,o,a,null))}function Ww(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,T=null,I=null,G=null,Z=null;for($ in a){var ie=a[$];if(a.hasOwnProperty($)&&ie!=null)switch($){case"checked":break;case"value":break;case"defaultValue":I=ie;default:o.hasOwnProperty($)||ht(t,s,$,null,o,ie)}}for(var K in o){var $=o[K];if(ie=a[K],o.hasOwnProperty(K)&&($!=null||ie!=null))switch(K){case"type":m=$;break;case"name":f=$;break;case"checked":G=$;break;case"defaultChecked":Z=$;break;case"value":v=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$!==ie&&ht(t,s,K,$,o,ie)}}il(t,v,T,I,G,Z,m,f);return;case"select":$=v=T=K=null;for(m in a)if(I=a[m],a.hasOwnProperty(m)&&I!=null)switch(m){case"value":break;case"multiple":$=I;default:o.hasOwnProperty(m)||ht(t,s,m,null,o,I)}for(f in o)if(m=o[f],I=a[f],o.hasOwnProperty(f)&&(m!=null||I!=null))switch(f){case"value":K=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==I&&ht(t,s,f,m,o,I)}s=T,a=v,o=$,K!=null?$s(t,!!a,K,!1):!!o!=!!a&&(s!=null?$s(t,!!a,s,!0):$s(t,!!a,a?[]:"",!1));return;case"textarea":$=K=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ht(t,s,T,null,o,f)}for(v in o)if(f=o[v],m=a[v],o.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":K=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&ht(t,s,v,f,o,m)}vu(t,K,$);return;case"option":for(var ge in a)K=a[ge],a.hasOwnProperty(ge)&&K!=null&&!o.hasOwnProperty(ge)&&(ge==="selected"?t.selected=!1:ht(t,s,ge,null,o,K));for(I in o)K=o[I],$=a[I],o.hasOwnProperty(I)&&K!==$&&(K!=null||$!=null)&&(I==="selected"?t.selected=K&&typeof K!="function"&&typeof K!="symbol":ht(t,s,I,K,o,$));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)K=a[we],a.hasOwnProperty(we)&&K!=null&&!o.hasOwnProperty(we)&&ht(t,s,we,null,o,K);for(G in o)if(K=o[G],$=a[G],o.hasOwnProperty(G)&&K!==$&&(K!=null||$!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:ht(t,s,G,K,o,$)}return;default:if(sl(s)){for(var dt in a)K=a[dt],a.hasOwnProperty(dt)&&K!==void 0&&!o.hasOwnProperty(dt)&&Dm(t,s,dt,void 0,o,K);for(Z in o)K=o[Z],$=a[Z],!o.hasOwnProperty(Z)||K===$||K===void 0&&$===void 0||Dm(t,s,Z,K,o,$);return}}for(var U in a)K=a[U],a.hasOwnProperty(U)&&K!=null&&!o.hasOwnProperty(U)&&ht(t,s,U,null,o,K);for(ie in o)K=o[ie],$=a[ie],!o.hasOwnProperty(ie)||K===$||K==null&&$==null||ht(t,s,ie,K,o,$)}function Hv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var f=a[o],m=f.transferSize,v=f.initiatorType,T=f.duration;if(m&&T&&Hv(v)){for(v=0,T=f.responseEnd,o+=1;o<a.length;o++){var I=a[o],G=I.startTime;if(G>T)break;var Z=I.transferSize,ie=I.initiatorType;Z&&Hv(ie)&&(I=I.responseEnd,v+=Z*(I<T?1:(T-G)/(I-G)))}if(--o,s+=8*(m+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Om=null,km=null;function xh(t){return t.nodeType===9?t:t.ownerDocument}function Gv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kv(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Mm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Pm=null;function Zw(){var t=window.event;return t&&t.type==="popstate"?t===Pm?!1:(Pm=t,!0):(Pm=null,!1)}var Qv=typeof setTimeout=="function"?setTimeout:void 0,eN=typeof clearTimeout=="function"?clearTimeout:void 0,$v=typeof Promise=="function"?Promise:void 0,tN=typeof queueMicrotask=="function"?queueMicrotask:typeof $v<"u"?function(t){return $v.resolve(null).then(t).catch(nN)}:Qv;function nN(t){setTimeout(function(){throw t})}function yr(t){return t==="head"}function Yv(t,s){var a=s,o=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(f),Ul(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")dc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,dc(a);for(var m=a.firstChild;m;){var v=m.nextSibling,T=m.nodeName;m[Vi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&dc(t.ownerDocument.body);a=f}while(a);Ul(s)}function Xv(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Vm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vm(a),tl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function iN(t,s,a,o){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Vi])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=mi(t.nextSibling),t===null)break}return null}function sN(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=mi(t.nextSibling),t===null))return null;return t}function Wv(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=mi(t.nextSibling),t===null))return null;return t}function Lm(t){return t.data==="$?"||t.data==="$~"}function Um(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function rN(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function mi(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var zm=null;function Jv(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return mi(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function Zv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function e0(t,s,a){switch(s=xh(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function dc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);tl(t)}var pi=new Map,t0=new Set;function Th(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Rs=ce.d;ce.d={f:aN,r:lN,D:oN,C:cN,L:uN,m:hN,X:fN,S:dN,M:mN};function aN(){var t=Rs.f(),s=mh();return t||s}function lN(t){var s=si(t);s!==null&&s.tag===5&&s.type==="form"?yy(s):Rs.r(t)}var Pl=typeof document>"u"?null:document;function n0(t,s,a){var o=Pl;if(o&&typeof s=="string"&&s){var f=jn(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),t0.has(f)||(t0.add(f),t={rel:t,crossOrigin:a,href:s},o.querySelector(f)===null&&(s=o.createElement("link"),gn(s,"link",t),qt(s),o.head.appendChild(s)))}}function oN(t){Rs.D(t),n0("dns-prefetch",t,null)}function cN(t,s){Rs.C(t,s),n0("preconnect",t,s)}function uN(t,s,a){Rs.L(t,s,a);var o=Pl;if(o&&t&&s){var f='link[rel="preload"][as="'+jn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+jn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+jn(a.imageSizes)+'"]')):f+='[href="'+jn(t)+'"]';var m=f;switch(s){case"style":m=Vl(t);break;case"script":m=Ll(t)}pi.has(m)||(t=x({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),pi.set(m,t),o.querySelector(f)!==null||s==="style"&&o.querySelector(fc(m))||s==="script"&&o.querySelector(mc(m))||(s=o.createElement("link"),gn(s,"link",t),qt(s),o.head.appendChild(s)))}}function hN(t,s){Rs.m(t,s);var a=Pl;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+jn(o)+'"][href="'+jn(t)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ll(t)}if(!pi.has(m)&&(t=x({rel:"modulepreload",href:t},s),pi.set(m,t),a.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(mc(m)))return}o=a.createElement("link"),gn(o,"link",t),qt(o),a.head.appendChild(o)}}}function dN(t,s,a){Rs.S(t,s,a);var o=Pl;if(o&&t){var f=Ui(o).hoistableStyles,m=Vl(t);s=s||"default";var v=f.get(m);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(fc(m)))T.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":s},a),(a=pi.get(m))&&Bm(t,a);var I=v=o.createElement("link");qt(I),gn(I,"link",t),I._p=new Promise(function(G,Z){I.onload=G,I.onerror=Z}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,wh(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(m,v)}}}function fN(t,s){Rs.X(t,s);var a=Pl;if(a&&t){var o=Ui(a).hoistableScripts,f=Ll(t),m=o.get(f);m||(m=a.querySelector(mc(f)),m||(t=x({src:t,async:!0},s),(s=pi.get(f))&&qm(t,s),m=a.createElement("script"),qt(m),gn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function mN(t,s){Rs.M(t,s);var a=Pl;if(a&&t){var o=Ui(a).hoistableScripts,f=Ll(t),m=o.get(f);m||(m=a.querySelector(mc(f)),m||(t=x({src:t,async:!0,type:"module"},s),(s=pi.get(f))&&qm(t,s),m=a.createElement("script"),qt(m),gn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function i0(t,s,a,o){var f=(f=Y.current)?Th(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Vl(a.href),a=Ui(f).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Vl(a.href);var m=Ui(f).hoistableStyles,v=m.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=f.querySelector(fc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),pi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},pi.set(t,a),m||pN(f,t,a,v.state))),s&&o===null)throw Error(r(528,""));return v}if(s&&o!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ll(a),a=Ui(f).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Vl(t){return'href="'+jn(t)+'"'}function fc(t){return'link[rel="stylesheet"]['+t+"]"}function s0(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function pN(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),gn(s,"link",a),qt(s),t.head.appendChild(s))}function Ll(t){return'[src="'+jn(t)+'"]'}function mc(t){return"script[async]"+t}function r0(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+jn(a.href)+'"]');if(o)return s.instance=o,qt(o),o;var f=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),qt(o),gn(o,"style",f),wh(o,a.precedence,t),s.instance=o;case"stylesheet":f=Vl(a.href);var m=t.querySelector(fc(f));if(m)return s.state.loading|=4,s.instance=m,qt(m),m;o=s0(a),(f=pi.get(f))&&Bm(o,f),m=(t.ownerDocument||t).createElement("link"),qt(m);var v=m;return v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),gn(m,"link",o),s.state.loading|=4,wh(m,a.precedence,t),s.instance=m;case"script":return m=Ll(a.src),(f=t.querySelector(mc(m)))?(s.instance=f,qt(f),f):(o=a,(f=pi.get(m))&&(o=x({},a),qm(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),qt(f),gn(f,"link",o),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,wh(o,a.precedence,t));return s.instance}function wh(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===s)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Bm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function qm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Nh=null;function a0(t,s,a){if(Nh===null){var o=new Map,f=Nh=new Map;f.set(a,o)}else f=Nh,o=f.get(a),o||(o=new Map,f.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Vi]||m[Bt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=t+v;var T=o.get(v);T?T.push(m):o.set(v,[m])}}return o}function l0(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function gN(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function o0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function _N(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Vl(o.href),m=s.querySelector(fc(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Ah.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,qt(m);return}m=s.ownerDocument||s,o=s0(o),(f=pi.get(f))&&Bm(o,f),m=m.createElement("link"),qt(m);var v=m;v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),gn(m,"link",o),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ah.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Fm=0;function yN(t,s){return t.stylesheets&&t.count===0&&Ch(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Ch(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Fm===0&&(Fm=62500*Jw());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ch(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Fm?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Ah(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ch(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Sh=null;function Ch(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Sh=new Map,s.forEach(vN,t),Sh=null,Ah.call(t))}function vN(t,s){if(!(s.state.loading&4)){var a=Sh.get(t);if(a)var o=a.get(null);else{a=new Map,Sh.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}f=s.instance,v=f.getAttribute("data-precedence"),m=a.get(v)||o,m===o&&a.set(null,f),a.set(v,f),this.count++,o=Ah.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var pc={$$typeof:ae,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function bN(t,s,a,o,f,m,v,T,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ye(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ye(0),this.hiddenUpdates=Ye(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function c0(t,s,a,o,f,m,v,T,I,G,Z,ie){return t=new bN(t,s,a,v,I,G,Z,ie,T),s=1,m===!0&&(s|=24),m=Hn(3,null,null,s),t.current=m,m.stateNode=t,s=xf(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:s},Af(m),t}function u0(t){return t?(t=pl,t):pl}function h0(t,s,a,o,f,m){f=u0(f),o.context===null?o.context=f:o.pendingContext=f,o=lr(s),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=or(t,o,s),a!==null&&(Pn(a,t,s),Qo(a,t,s))}function d0(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Hm(t,s){d0(t,s),(t=t.alternate)&&d0(t,s)}function f0(t){if(t.tag===13||t.tag===31){var s=ga(t,67108864);s!==null&&Pn(s,t,67108864),Hm(t,67108864)}}function m0(t){if(t.tag===13||t.tag===31){var s=Yn();s=sa(s);var a=ga(t,s);a!==null&&Pn(a,t,s),Hm(t,s)}}var Rh=!0;function EN(t,s,a,o){var f=X.T;X.T=null;var m=ce.p;try{ce.p=2,Gm(t,s,a,o)}finally{ce.p=m,X.T=f}}function xN(t,s,a,o){var f=X.T;X.T=null;var m=ce.p;try{ce.p=8,Gm(t,s,a,o)}finally{ce.p=m,X.T=f}}function Gm(t,s,a,o){if(Rh){var f=Km(o);if(f===null)Im(t,s,o,jh,a),g0(t,o);else if(wN(f,t,s,a,o))o.stopPropagation();else if(g0(t,o),s&4&&-1<TN.indexOf(t)){for(;f!==null;){var m=si(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=ii(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var I=1<<31-wt(v);T.entanglements[1]|=I,v&=~I}Ji(m),(it&6)===0&&(dh=sn()+500,cc(0))}}break;case 31:case 13:T=ga(m,2),T!==null&&Pn(T,m,2),mh(),Hm(m,2)}if(m=Km(o),m===null&&Im(t,s,o,jh,a),m===f)break;f=m}f!==null&&o.stopPropagation()}else Im(t,s,o,null,a)}}function Km(t){return t=ri(t),Qm(t)}var jh=null;function Qm(t){if(jh=null,t=Li(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return jh=t,null}function p0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ki()){case yi:return 2;case ea:return 8;case Mi:case Ya:return 32;case Xa:return 268435456;default:return 32}default:return 32}}var $m=!1,vr=null,br=null,Er=null,gc=new Map,_c=new Map,xr=[],TN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g0(t,s){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":gc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(s.pointerId)}}function yc(t,s,a,o,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},s!==null&&(s=si(s),s!==null&&f0(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function wN(t,s,a,o,f){switch(s){case"focusin":return vr=yc(vr,t,s,a,o,f),!0;case"dragenter":return br=yc(br,t,s,a,o,f),!0;case"mouseover":return Er=yc(Er,t,s,a,o,f),!0;case"pointerover":var m=f.pointerId;return gc.set(m,yc(gc.get(m)||null,t,s,a,o,f)),!0;case"gotpointercapture":return m=f.pointerId,_c.set(m,yc(_c.get(m)||null,t,s,a,o,f)),!0}return!1}function _0(t){var s=Li(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,vi(t.priority,function(){m0(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,vi(t.priority,function(){m0(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Km(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Io=o,a.target.dispatchEvent(o),Io=null}else return s=si(a),s!==null&&f0(s),t.blockedOn=a,!1;s.shift()}return!0}function y0(t,s,a){Ih(t)&&a.delete(s)}function NN(){$m=!1,vr!==null&&Ih(vr)&&(vr=null),br!==null&&Ih(br)&&(br=null),Er!==null&&Ih(Er)&&(Er=null),gc.forEach(y0),_c.forEach(y0)}function Dh(t,s){t.blockedOn===s&&(t.blockedOn=null,$m||($m=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,NN)))}var Oh=null;function v0(t){Oh!==t&&(Oh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Oh===t&&(Oh=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],f=t[s+2];if(typeof o!="function"){if(Qm(o||a)===null)continue;break}var m=si(a);m!==null&&(t.splice(s,3),s-=3,Kf(m,{pending:!0,data:f,method:a.method,action:o},o,f))}}))}function Ul(t){function s(I){return Dh(I,t)}vr!==null&&Dh(vr,t),br!==null&&Dh(br,t),Er!==null&&Dh(Er,t),gc.forEach(s),_c.forEach(s);for(var a=0;a<xr.length;a++){var o=xr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<xr.length&&(a=xr[0],a.blockedOn===null);)_0(a),a.blockedOn===null&&xr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var f=a[o],m=a[o+1],v=f[an]||null;if(typeof m=="function")v||v0(a);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[an]||null)T=v.formAction;else if(Qm(f)!==null)continue}else T=v.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),v0(a)}}}function b0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Ym(t){this._internalRoot=t}kh.prototype.render=Ym.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,o=Yn();h0(a,o,t,s,null,null)},kh.prototype.unmount=Ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;h0(t.current,2,null,t,null,null),mh(),s[Pi]=null}};function kh(t){this._internalRoot=t}kh.prototype.unstable_scheduleHydration=function(t){if(t){var s=mu();t={blockedOn:null,target:t,priority:s};for(var a=0;a<xr.length&&s!==0&&s<xr[a].priority;a++);xr.splice(a,0,t),a===0&&_0(t)}};var E0=e.version;if(E0!=="19.2.4")throw Error(r(527,E0,"19.2.4"));ce.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=_(s),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var AN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{At=Mh.inject(AN),rt=Mh}catch{}}return bc.createRoot=function(t,s){if(!l(t))throw Error(r(299));var a=!1,o="",f=Cy,m=Ry,v=jy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=c0(t,1,!1,null,null,a,o,null,f,m,v,b0),t[Pi]=s.current,jm(t),new Ym(s)},bc.hydrateRoot=function(t,s,a){if(!l(t))throw Error(r(299));var o=!1,f="",m=Cy,v=Ry,T=jy,I=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),s=c0(t,1,!0,s,a??null,o,f,I,m,v,T,b0),s.context=u0(null),a=s.current,o=Yn(),o=sa(o),f=lr(o),f.callback=null,or(a,f,o),a=o,s.current.lanes=a,rn(s,a),Ji(s),t[Pi]=s.current,jm(t),new kh(s)},bc.version="19.2.4",bc}var I0;function VN(){if(I0)return Jm.exports;I0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Jm.exports=PN(),Jm.exports}var LN=VN();const UN=ME(LN);VE();function Lc(){return Lc=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Lc.apply(this,arguments)}var Or;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Or||(Or={}));const D0="popstate";function zN(i){i===void 0&&(i={});function e(r,l){let{pathname:u,search:d,hash:p}=r.location;return Tp("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(r,l){return typeof l=="string"?l:rd(l)}return qN(e,n,null,i)}function Ut(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function eg(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BN(){return Math.random().toString(36).substr(2,8)}function O0(i,e){return{usr:i.state,key:i.key,idx:e}}function Tp(i,e,n,r){return n===void 0&&(n=null),Lc({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?uo(e):e,{state:n,key:e&&e.key||r||BN()})}function rd(i){let{pathname:e="/",search:n="",hash:r=""}=i;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substr(n),i=i.substr(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substr(r),i=i.substr(0,r)),i&&(e.pathname=i)}return e}function qN(i,e,n,r){r===void 0&&(r={});let{window:l=document.defaultView,v5Compat:u=!1}=r,d=l.history,p=Or.Pop,g=null,_=E();_==null&&(_=0,d.replaceState(Lc({},d.state,{idx:_}),""));function E(){return(d.state||{idx:null}).idx}function x(){p=Or.Pop;let q=E(),ee=q==null?null:q-_;_=q,g&&g({action:p,location:L.location,delta:ee})}function w(q,ee){p=Or.Push;let ue=Tp(L.location,q,ee);_=E()+1;let ae=O0(ue,_),re=L.createHref(ue);try{d.pushState(ae,"",re)}catch(ve){if(ve instanceof DOMException&&ve.name==="DataCloneError")throw ve;l.location.assign(re)}u&&g&&g({action:p,location:L.location,delta:1})}function j(q,ee){p=Or.Replace;let ue=Tp(L.location,q,ee);_=E();let ae=O0(ue,_),re=L.createHref(ue);d.replaceState(ae,"",re),u&&g&&g({action:p,location:L.location,delta:0})}function z(q){let ee=l.location.origin!=="null"?l.location.origin:l.location.href,ue=typeof q=="string"?q:rd(q);return ue=ue.replace(/ $/,"%20"),Ut(ee,"No window.location.(origin|href) available to create URL for href: "+ue),new URL(ue,ee)}let L={get action(){return p},get location(){return i(l,d)},listen(q){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(D0,x),g=q,()=>{l.removeEventListener(D0,x),g=null}},createHref(q){return e(l,q)},createURL:z,encodeLocation(q){let ee=z(q);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:w,replace:j,go(q){return d.go(q)}};return L}var k0;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(k0||(k0={}));function FN(i,e,n){return n===void 0&&(n="/"),HN(i,e,n)}function HN(i,e,n,r){let l=typeof e=="string"?uo(e):e,u=tg(l.pathname||"/",n);if(u==null)return null;let d=LE(i);GN(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let _=iA(u);p=eA(d[g],_)}return p}function LE(i,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let l=(u,d,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};g.relativePath.startsWith("/")&&(Ut(g.relativePath.startsWith(r),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(r.length));let _=Mr([r,g.relativePath]),E=n.concat(g);u.children&&u.children.length>0&&(Ut(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),LE(u.children,e,E,_)),!(u.path==null&&!u.index)&&e.push({path:_,score:JN(_,u.index),routesMeta:E})};return i.forEach((u,d)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))l(u,d);else for(let g of UE(u.path))l(u,d,g)}),e}function UE(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(r.length===0)return l?[u,""]:[u];let d=UE(r.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function GN(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:ZN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KN=/^:[\w-]+$/,QN=3,$N=2,YN=1,XN=10,WN=-2,M0=i=>i==="*";function JN(i,e){let n=i.split("/"),r=n.length;return n.some(M0)&&(r+=WN),e&&(r+=$N),n.filter(l=>!M0(l)).reduce((l,u)=>l+(KN.test(u)?QN:u===""?YN:XN),r)}function ZN(i,e){return i.length===e.length&&i.slice(0,-1).every((r,l)=>r===e[l])?i[i.length-1]-e[e.length-1]:0}function eA(i,e,n){let{routesMeta:r}=i,l={},u="/",d=[];for(let p=0;p<r.length;++p){let g=r[p],_=p===r.length-1,E=u==="/"?e:e.slice(u.length)||"/",x=tA({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},E),w=g.route;if(!x)return null;Object.assign(l,x.params),d.push({params:l,pathname:Mr([u,x.pathname]),pathnameBase:oA(Mr([u,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(u=Mr([u,x.pathnameBase]))}return d}function tA(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=nA(i.path,i.caseSensitive,i.end),l=e.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:r.reduce((_,E,x)=>{let{paramName:w,isOptional:j}=E;if(w==="*"){let L=p[x]||"";d=u.slice(0,u.length-L.length).replace(/(.)\/+$/,"$1")}const z=p[x];return j&&!z?_[w]=void 0:_[w]=(z||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:d,pattern:i}}function nA(i,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),eg(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let r=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function iA(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eg(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function tg(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}const sA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rA=i=>sA.test(i);function aA(i,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:l=""}=typeof i=="string"?uo(i):i,u;if(n)if(rA(n))u=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),eg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(d+" -> "+n))}n.startsWith("/")?u=P0(n.substring(1),"/"):u=P0(n,e)}else u=e;return{pathname:u,search:cA(r),hash:uA(l)}}function P0(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function np(i,e,n,r){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lA(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ng(i,e){let n=lA(i);return e?n.map((r,l)=>l===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ig(i,e,n,r){r===void 0&&(r=!1);let l;typeof i=="string"?l=uo(i):(l=Lc({},i),Ut(!l.pathname||!l.pathname.includes("?"),np("?","pathname","search",l)),Ut(!l.pathname||!l.pathname.includes("#"),np("#","pathname","hash",l)),Ut(!l.search||!l.search.includes("#"),np("#","search","hash",l)));let u=i===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=n;else{let x=e.length-1;if(!r&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),x-=1;l.pathname=w.join("/")}p=x>=0?e[x]:"/"}let g=aA(l,p),_=d&&d!=="/"&&d.endsWith("/"),E=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(_||E)&&(g.pathname+="/"),g}const Mr=i=>i.join("/").replace(/\/\/+/g,"/"),oA=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),cA=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,uA=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function hA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const zE=["post","put","patch","delete"];new Set(zE);const dA=["get",...zE];new Set(dA);function Uc(){return Uc=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Uc.apply(this,arguments)}const sg=M.createContext(null),fA=M.createContext(null),$r=M.createContext(null),Sd=M.createContext(null),zs=M.createContext({outlet:null,matches:[],isDataRoute:!1}),BE=M.createContext(null);function mA(i,e){let{relative:n}=e===void 0?{}:e;ho()||Ut(!1);let{basename:r,navigator:l}=M.useContext($r),{hash:u,pathname:d,search:p}=FE(i,{relative:n}),g=d;return r!=="/"&&(g=d==="/"?r:Mr([r,d])),l.createHref({pathname:g,search:p,hash:u})}function ho(){return M.useContext(Sd)!=null}function Yr(){return ho()||Ut(!1),M.useContext(Sd).location}function qE(i){M.useContext($r).static||M.useLayoutEffect(i)}function fo(){let{isDataRoute:i}=M.useContext(zs);return i?CA():pA()}function pA(){ho()||Ut(!1);let i=M.useContext(sg),{basename:e,future:n,navigator:r}=M.useContext($r),{matches:l}=M.useContext(zs),{pathname:u}=Yr(),d=JSON.stringify(ng(l,n.v7_relativeSplatPath)),p=M.useRef(!1);return qE(()=>{p.current=!0}),M.useCallback(function(_,E){if(E===void 0&&(E={}),!p.current)return;if(typeof _=="number"){r.go(_);return}let x=ig(_,JSON.parse(d),u,E.relative==="path");i==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Mr([e,x.pathname])),(E.replace?r.replace:r.push)(x,E.state,E)},[e,r,d,u,i])}function gA(){let{matches:i}=M.useContext(zs),e=i[i.length-1];return e?e.params:{}}function FE(i,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext($r),{matches:l}=M.useContext(zs),{pathname:u}=Yr(),d=JSON.stringify(ng(l,r.v7_relativeSplatPath));return M.useMemo(()=>ig(i,JSON.parse(d),u,n==="path"),[i,d,u,n])}function _A(i,e){return yA(i,e)}function yA(i,e,n,r){ho()||Ut(!1);let{navigator:l}=M.useContext($r),{matches:u}=M.useContext(zs),d=u[u.length-1],p=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let _=Yr(),E;if(e){var x;let q=typeof e=="string"?uo(e):e;g==="/"||(x=q.pathname)!=null&&x.startsWith(g)||Ut(!1),E=q}else E=_;let w=E.pathname||"/",j=w;if(g!=="/"){let q=g.replace(/^\//,"").split("/");j="/"+w.replace(/^\//,"").split("/").slice(q.length).join("/")}let z=FN(i,{pathname:j}),L=TA(z&&z.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:Mr([g,l.encodeLocation?l.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:Mr([g,l.encodeLocation?l.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,n,r);return e&&L?M.createElement(Sd.Provider,{value:{location:Uc({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Or.Pop}},L):L}function vA(){let i=SA(),e=hA(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:l},n):null,null)}const bA=M.createElement(vA,null);class EA extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(zs.Provider,{value:this.props.routeContext},M.createElement(BE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xA(i){let{routeContext:e,match:n,children:r}=i,l=M.useContext(sg);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(zs.Provider,{value:e},r)}function TA(i,e,n,r){var l;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),i==null){var u;if(!n)return null;if(n.errors)i=n.matches;else if((u=r)!=null&&u.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let d=i,p=(l=n)==null?void 0:l.errors;if(p!=null){let E=d.findIndex(x=>x.route.id&&p?.[x.route.id]!==void 0);E>=0||Ut(!1),d=d.slice(0,Math.min(d.length,E+1))}let g=!1,_=-1;if(n&&r&&r.v7_partialHydration)for(let E=0;E<d.length;E++){let x=d[E];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(_=E),x.route.id){let{loaderData:w,errors:j}=n,z=x.route.loader&&w[x.route.id]===void 0&&(!j||j[x.route.id]===void 0);if(x.route.lazy||z){g=!0,_>=0?d=d.slice(0,_+1):d=[d[0]];break}}}return d.reduceRight((E,x,w)=>{let j,z=!1,L=null,q=null;n&&(j=p&&x.route.id?p[x.route.id]:void 0,L=x.route.errorElement||bA,g&&(_<0&&w===0?(RA("route-fallback"),z=!0,q=null):_===w&&(z=!0,q=x.route.hydrateFallbackElement||null)));let ee=e.concat(d.slice(0,w+1)),ue=()=>{let ae;return j?ae=L:z?ae=q:x.route.Component?ae=M.createElement(x.route.Component,null):x.route.element?ae=x.route.element:ae=E,M.createElement(xA,{match:x,routeContext:{outlet:E,matches:ee,isDataRoute:n!=null},children:ae})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?M.createElement(EA,{location:n.location,revalidation:n.revalidation,component:L,error:j,children:ue(),routeContext:{outlet:null,matches:ee,isDataRoute:!0}}):ue()},null)}var HE=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(HE||{}),GE=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(GE||{});function wA(i){let e=M.useContext(sg);return e||Ut(!1),e}function NA(i){let e=M.useContext(fA);return e||Ut(!1),e}function AA(i){let e=M.useContext(zs);return e||Ut(!1),e}function KE(i){let e=AA(),n=e.matches[e.matches.length-1];return n.route.id||Ut(!1),n.route.id}function SA(){var i;let e=M.useContext(BE),n=NA(),r=KE();return e!==void 0?e:(i=n.errors)==null?void 0:i[r]}function CA(){let{router:i}=wA(HE.UseNavigateStable),e=KE(GE.UseNavigateStable),n=M.useRef(!1);return qE(()=>{n.current=!0}),M.useCallback(function(l,u){u===void 0&&(u={}),n.current&&(typeof l=="number"?i.navigate(l):i.navigate(l,Uc({fromRouteId:e},u)))},[i,e])}const V0={};function RA(i,e,n){V0[i]||(V0[i]=!0)}function jA(i,e){i?.v7_startTransition,i?.v7_relativeSplatPath}function IA(i){let{to:e,replace:n,state:r,relative:l}=i;ho()||Ut(!1);let{future:u,static:d}=M.useContext($r),{matches:p}=M.useContext(zs),{pathname:g}=Yr(),_=fo(),E=ig(e,ng(p,u.v7_relativeSplatPath),g,l==="path"),x=JSON.stringify(E);return M.useEffect(()=>_(JSON.parse(x),{replace:n,state:r,relative:l}),[_,x,l,n,r]),null}function Vn(i){Ut(!1)}function DA(i){let{basename:e="/",children:n=null,location:r,navigationType:l=Or.Pop,navigator:u,static:d=!1,future:p}=i;ho()&&Ut(!1);let g=e.replace(/^\/*/,"/"),_=M.useMemo(()=>({basename:g,navigator:u,static:d,future:Uc({v7_relativeSplatPath:!1},p)}),[g,p,u,d]);typeof r=="string"&&(r=uo(r));let{pathname:E="/",search:x="",hash:w="",state:j=null,key:z="default"}=r,L=M.useMemo(()=>{let q=tg(E,g);return q==null?null:{location:{pathname:q,search:x,hash:w,state:j,key:z},navigationType:l}},[g,E,x,w,j,z,l]);return L==null?null:M.createElement($r.Provider,{value:_},M.createElement(Sd.Provider,{children:n,value:L}))}function OA(i){let{children:e,location:n}=i;return _A(wp(e),n)}new Promise(()=>{});function wp(i,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(i,(r,l)=>{if(!M.isValidElement(r))return;let u=[...e,l];if(r.type===M.Fragment){n.push.apply(n,wp(r.props.children,u));return}r.type!==Vn&&Ut(!1),!r.props.index||!r.props.children||Ut(!1);let d={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=wp(r.props.children,u)),n.push(d)}),n}function Np(){return Np=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Np.apply(this,arguments)}function kA(i,e){if(i==null)return{};var n={},r=Object.keys(i),l,u;for(u=0;u<r.length;u++)l=r[u],!(e.indexOf(l)>=0)&&(n[l]=i[l]);return n}function MA(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function PA(i,e){return i.button===0&&(!e||e==="_self")&&!MA(i)}const VA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LA="6";try{window.__reactRouterVersion=LA}catch{}const UA="startTransition",L0=DN[UA];function zA(i){let{basename:e,children:n,future:r,window:l}=i,u=M.useRef();u.current==null&&(u.current=zN({window:l,v5Compat:!0}));let d=u.current,[p,g]=M.useState({action:d.action,location:d.location}),{v7_startTransition:_}=r||{},E=M.useCallback(x=>{_&&L0?L0(()=>g(x)):g(x)},[g,_]);return M.useLayoutEffect(()=>d.listen(E),[d,E]),M.useEffect(()=>jA(r),[r]),M.createElement(DA,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:d,future:r})}const BA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=M.forwardRef(function(e,n){let{onClick:r,relative:l,reloadDocument:u,replace:d,state:p,target:g,to:_,preventScrollReset:E,viewTransition:x}=e,w=kA(e,VA),{basename:j}=M.useContext($r),z,L=!1;if(typeof _=="string"&&qA.test(_)&&(z=_,BA))try{let ae=new URL(window.location.href),re=_.startsWith("//")?new URL(ae.protocol+_):new URL(_),ve=tg(re.pathname,j);re.origin===ae.origin&&ve!=null?_=ve+re.search+re.hash:L=!0}catch{}let q=mA(_,{relative:l}),ee=FA(_,{replace:d,state:p,target:g,preventScrollReset:E,relative:l,viewTransition:x});function ue(ae){r&&r(ae),ae.defaultPrevented||ee(ae)}return M.createElement("a",Np({},w,{href:z||q,onClick:L||u?r:ue,ref:n,target:g}))});var U0;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(U0||(U0={}));var z0;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(z0||(z0={}));function FA(i,e){let{target:n,replace:r,state:l,preventScrollReset:u,relative:d,viewTransition:p}=e===void 0?{}:e,g=fo(),_=Yr(),E=FE(i,{relative:d});return M.useCallback(x=>{if(PA(x,n)){x.preventDefault();let w=r!==void 0?r:rd(_)===rd(E);g(i,{replace:w,state:l,preventScrollReset:u,relative:d,viewTransition:p})}},[_,g,E,r,l,n,i,u,d,p])}const HA=()=>{};var B0={};const QE=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let l=i.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},GA=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const l=i[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=i[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=i[n++],d=i[n++],p=i[n++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],d=i[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},$E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<i.length;l+=3){const u=i[l],d=l+1<i.length,p=d?i[l+1]:0,g=l+2<i.length,_=g?i[l+2]:0,E=u>>2,x=(u&3)<<4|p>>4;let w=(p&15)<<2|_>>6,j=_&63;g||(j=64,d||(w=64)),r.push(n[E],n[x],n[w],n[j])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(QE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):GA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<i.length;){const u=n[i.charAt(l++)],p=l<i.length?n[i.charAt(l)]:0;++l;const _=l<i.length?n[i.charAt(l)]:64;++l;const x=l<i.length?n[i.charAt(l)]:64;if(++l,u==null||p==null||_==null||x==null)throw new KA;const w=u<<2|p>>4;if(r.push(w),_!==64){const j=p<<4&240|_>>2;if(r.push(j),x!==64){const z=_<<6&192|x;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class KA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QA=function(i){const e=QE(i);return $E.encodeByteArray(e,!0)},ad=function(i){return QA(i).replace(/\./g,"")},YE=function(i){try{return $E.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const YA=()=>$A().__FIREBASE_DEFAULTS__,XA=()=>{if(typeof process>"u"||typeof B0>"u")return;const i=B0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},WA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&YE(i[1]);return e&&JSON.parse(e)},Cd=()=>{try{return HA()||YA()||XA()||WA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},XE=i=>Cd()?.emulatorHosts?.[i],WE=i=>{const e=XE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JE=()=>Cd()?.config,ZE=i=>Cd()?.[`_${i}`];class JA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Xr(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rg(i){return(await fetch(i,{credentials:"include"})).ok}function e1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[ad(JSON.stringify(n)),ad(JSON.stringify(d)),""].join(".")}const jc={};function ZA(){const i={prod:[],emulator:[]};for(const e of Object.keys(jc))jc[e]?i.emulator.push(e):i.prod.push(e);return i}function eS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let q0=!1;function ag(i,e){if(typeof window>"u"||typeof document>"u"||!Xr(window.location.host)||jc[i]===e||jc[i]||q0)return;jc[i]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",u=ZA().prod.length>0;function d(){const w=document.getElementById(r);w&&w.remove()}function p(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,j){w.setAttribute("width","24"),w.setAttribute("id",j),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function _(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{q0=!0,d()},w}function E(w,j){w.setAttribute("id",j),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function x(){const w=eS(r),j=n("text"),z=document.getElementById(j)||document.createElement("span"),L=n("learnmore"),q=document.getElementById(L)||document.createElement("a"),ee=n("preprendIcon"),ue=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const ae=w.element;p(ae),E(q,L);const re=_();g(ue,ee),ae.append(ue,z,q,re),document.body.appendChild(ae)}u?(z.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function nS(){const i=Cd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function rS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aS(){const i=Tn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function lS(){return!nS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oS(){try{return typeof indexedDB=="object"}catch{return!1}}function cS(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const uS="FirebaseError";class cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uS,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xc.prototype.create)}}class Xc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?hS(u,r):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new cs(l,p,r)}}function hS(i,e){return i.replace(dS,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const dS=/\{\$([^}]+)}/g;function fS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ma(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=i[l],d=e[l];if(F0(u)&&F0(d)){if(!Ma(u,d))return!1}else if(u!==d)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function F0(i){return i!==null&&typeof i=="object"}function Wc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Nc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function mS(i,e){const n=new pS(i,e);return n.subscribe.bind(n)}class pS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=ip),l.error===void 0&&(l.error=ip),l.complete===void 0&&(l.complete=ip);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gS(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function ip(){}function yt(i){return i&&i._delegate?i._delegate:i}class zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ja="[DEFAULT]";class _S{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vS(e))try{this.getOrInitializeService({instanceIdentifier:ja})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ja){return this.instances.has(e)}getOptions(e=ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&d.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ja){return this.component?this.component.multipleInstances?e:ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yS(i){return i===ja?void 0:i}function vS(i){return i.instantiationMode==="EAGER"}class bS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _S(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var He;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(He||(He={}));const ES={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},xS=He.INFO,TS={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},wS=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),l=TS[e];if(l)console[l](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lg{constructor(e){this.name=e,this._logLevel=xS,this._logHandler=wS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ES[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const NS=(i,e)=>e.some(n=>i instanceof n);let H0,G0;function AS(){return H0||(H0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SS(){return G0||(G0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t1=new WeakMap,Ap=new WeakMap,n1=new WeakMap,sp=new WeakMap,og=new WeakMap;function CS(i){const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(Pr(i.result)),l()},d=()=>{r(i.error),l()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&t1.set(n,i)}).catch(()=>{}),og.set(e,i),e}function RS(i){if(Ap.has(i))return;const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{r(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Ap.set(i,e)}let Sp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Ap.get(i);if(e==="objectStoreNames")return i.objectStoreNames||n1.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function jS(i){Sp=i(Sp)}function IS(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(rp(this),e,...n);return n1.set(r,e.sort?e.sort():[e]),Pr(r)}:SS().includes(i)?function(...e){return i.apply(rp(this),e),Pr(t1.get(this))}:function(...e){return Pr(i.apply(rp(this),e))}}function DS(i){return typeof i=="function"?IS(i):(i instanceof IDBTransaction&&RS(i),NS(i,AS())?new Proxy(i,Sp):i)}function Pr(i){if(i instanceof IDBRequest)return CS(i);if(sp.has(i))return sp.get(i);const e=DS(i);return e!==i&&(sp.set(i,e),og.set(e,i)),e}const rp=i=>og.get(i);function OS(i,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const d=indexedDB.open(i,e),p=Pr(d);return r&&d.addEventListener("upgradeneeded",g=>{r(Pr(d.result),g.oldVersion,g.newVersion,Pr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const kS=["get","getKey","getAll","getAllKeys","count"],MS=["put","add","delete","clear"],ap=new Map;function K0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(ap.get(e))return ap.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=MS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||kS.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(p.shift())),(await Promise.all([_[n](...p),l&&g.done]))[0]};return ap.set(e,u),u}jS(i=>({...i,get:(e,n,r)=>K0(e,n)||i.get(e,n,r),has:(e,n)=>!!K0(e,n)||i.has(e,n)}));class PS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VS(i){return i.getComponent()?.type==="VERSION"}const Cp="@firebase/app",Q0="0.14.7";const Ps=new lg("@firebase/app"),LS="@firebase/app-compat",US="@firebase/analytics-compat",zS="@firebase/analytics",BS="@firebase/app-check-compat",qS="@firebase/app-check",FS="@firebase/auth",HS="@firebase/auth-compat",GS="@firebase/database",KS="@firebase/data-connect",QS="@firebase/database-compat",$S="@firebase/functions",YS="@firebase/functions-compat",XS="@firebase/installations",WS="@firebase/installations-compat",JS="@firebase/messaging",ZS="@firebase/messaging-compat",e2="@firebase/performance",t2="@firebase/performance-compat",n2="@firebase/remote-config",i2="@firebase/remote-config-compat",s2="@firebase/storage",r2="@firebase/storage-compat",a2="@firebase/firestore",l2="@firebase/ai",o2="@firebase/firestore-compat",c2="firebase",u2="12.8.0";const Rp="[DEFAULT]",h2={[Cp]:"fire-core",[LS]:"fire-core-compat",[zS]:"fire-analytics",[US]:"fire-analytics-compat",[qS]:"fire-app-check",[BS]:"fire-app-check-compat",[FS]:"fire-auth",[HS]:"fire-auth-compat",[GS]:"fire-rtdb",[KS]:"fire-data-connect",[QS]:"fire-rtdb-compat",[$S]:"fire-fn",[YS]:"fire-fn-compat",[XS]:"fire-iid",[WS]:"fire-iid-compat",[JS]:"fire-fcm",[ZS]:"fire-fcm-compat",[e2]:"fire-perf",[t2]:"fire-perf-compat",[n2]:"fire-rc",[i2]:"fire-rc-compat",[s2]:"fire-gcs",[r2]:"fire-gcs-compat",[a2]:"fire-fst",[o2]:"fire-fst-compat",[l2]:"fire-vertex","fire-js":"fire-js",[c2]:"fire-js-all"};const ld=new Map,d2=new Map,jp=new Map;function $0(i,e){try{i.container.addComponent(e)}catch(n){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Pa(i){const e=i.name;if(jp.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,i);for(const n of ld.values())$0(n,i);for(const n of d2.values())$0(n,i);return!0}function Rd(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Xn(i){return i==null?!1:i.settings!==void 0}const f2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new Xc("app","Firebase",f2);class m2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}const Ga=u2;function i1(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:Rp,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Vr.create("bad-app-name",{appName:String(l)});if(n||(n=JE()),!n)throw Vr.create("no-options");const u=ld.get(l);if(u){if(Ma(n,u.options)&&Ma(r,u.config))return u;throw Vr.create("duplicate-app",{appName:l})}const d=new bS(l);for(const g of jp.values())d.addComponent(g);const p=new m2(n,r,d);return ld.set(l,p),p}function cg(i=Rp){const e=ld.get(i);if(!e&&i===Rp&&JE())return i1();if(!e)throw Vr.create("no-app",{appName:i});return e}function ns(i,e,n){let r=h2[i]??i;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(d.join(" "));return}Pa(new zr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const p2="firebase-heartbeat-database",g2=1,zc="firebase-heartbeat-store";let lp=null;function s1(){return lp||(lp=OS(p2,g2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(zc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Vr.create("idb-open",{originalErrorMessage:i.message})})),lp}async function _2(i){try{const n=(await s1()).transaction(zc),r=await n.objectStore(zc).get(r1(i));return await n.done,r}catch(e){if(e instanceof cs)Ps.warn(e.message);else{const n=Vr.create("idb-get",{originalErrorMessage:e?.message});Ps.warn(n.message)}}}async function Y0(i,e){try{const r=(await s1()).transaction(zc,"readwrite");await r.objectStore(zc).put(e,r1(i)),await r.done}catch(n){if(n instanceof cs)Ps.warn(n.message);else{const r=Vr.create("idb-set",{originalErrorMessage:n?.message});Ps.warn(r.message)}}}function r1(i){return`${i.name}!${i.options.appId}`}const y2=1024,v2=30;class b2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new x2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=X0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>v2){const l=T2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ps.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=X0(),{heartbeatsToSend:n,unsentEntries:r}=E2(this._heartbeatsCache.heartbeats),l=ad(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ps.warn(e),""}}}function X0(){return new Date().toISOString().substring(0,10)}function E2(i,e=y2){const n=[];let r=i.slice();for(const l of i){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),W0(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),W0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class x2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oS()?cS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function W0(i){return ad(JSON.stringify({version:2,heartbeats:i})).length}function T2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}function w2(i){Pa(new zr("platform-logger",e=>new PS(e),"PRIVATE")),Pa(new zr("heartbeat",e=>new b2(e),"PRIVATE")),ns(Cp,Q0,i),ns(Cp,Q0,"esm2020"),ns("fire-js","")}w2("");function a1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N2=a1,l1=new Xc("auth","Firebase",a1());const od=new lg("@firebase/auth");function A2(i,...e){od.logLevel<=He.WARN&&od.warn(`Auth (${Ga}): ${i}`,...e)}function Xh(i,...e){od.logLevel<=He.ERROR&&od.error(`Auth (${Ga}): ${i}`,...e)}function Ii(i,...e){throw ug(i,...e)}function is(i,...e){return ug(i,...e)}function o1(i,e,n){const r={...N2(),[e]:n};return new Xc("auth","Firebase",r).create(e,{appName:i.name})}function Os(i){return o1(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ug(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return l1.create(i,...e)}function Ae(i,e,...n){if(!i)throw ug(e,...n)}function Is(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Xh(e),new Error(e)}function Vs(i,e){i||Is(e)}function Ip(){return typeof self<"u"&&self.location?.href||""}function S2(){return J0()==="http:"||J0()==="https:"}function J0(){return typeof self<"u"&&self.location?.protocol||null}function C2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S2()||sS()||"connection"in navigator)?navigator.onLine:!0}function R2(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vs(n>e,"Short delay should be less than long delay!"),this.isMobile=tS()||rS()}get(){return C2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hg(i,e){Vs(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class c1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const I2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D2=new Jc(3e4,6e4);function Wr(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Bs(i,e,n,r,l={}){return u1(i,l,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const p=Wc({key:i.config.apiKey,...d}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const _={method:e,headers:g,...u};return iS()||(_.referrerPolicy="no-referrer"),i.emulatorConfig&&Xr(i.emulatorConfig.host)&&(_.credentials="include"),c1.fetch()(await h1(i,i.config.apiHost,n,p),_)})}async function u1(i,e,n){i._canInitEmulator=!1;const r={...j2,...e};try{const l=new k2(i),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Ph(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,_]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ph(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Ph(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw Ph(i,"user-disabled",d);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw o1(i,E,_);Ii(i,E)}}catch(l){if(l instanceof cs)throw l;Ii(i,"network-request-failed",{message:String(l)})}}async function Zc(i,e,n,r,l={}){const u=await Bs(i,e,n,r,l);return"mfaPendingCredential"in u&&Ii(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function h1(i,e,n,r){const l=`${e}${n}?${r}`,u=i,d=u.config.emulator?hg(i.config,l):`${i.config.apiScheme}://${l}`;return I2.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function O2(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(is(this.auth,"network-request-failed")),D2.get())})}}function Ph(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=is(i,e,r);return l.customData._tokenResponse=n,l}function Z0(i){return i!==void 0&&i.enterprise!==void 0}class M2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return O2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function P2(i,e){return Bs(i,"GET","/v2/recaptchaConfig",Wr(i,e))}async function V2(i,e){return Bs(i,"POST","/v1/accounts:delete",e)}async function cd(i,e){return Bs(i,"POST","/v1/accounts:lookup",e)}function Ic(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function L2(i,e=!1){const n=yt(i),r=await n.getIdToken(e),l=dg(r);Ae(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:r,authTime:Ic(op(l.auth_time)),issuedAtTime:Ic(op(l.iat)),expirationTime:Ic(op(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function op(i){return Number(i)*1e3}function dg(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const l=YE(n);return l?JSON.parse(l):(Xh("Failed to decode base64 JWT payload"),null)}catch(l){return Xh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function eb(i){const e=dg(i);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function eo(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cs&&U2(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function U2({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class z2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Dp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ud(i){const e=i.auth,n=await i.getIdToken(),r=await eo(i,cd(e,{idToken:n}));Ae(r?.users.length,e,"internal-error");const l=r.users[0];i._notifyReloadListener(l);const u=l.providerUserInfo?.length?d1(l.providerUserInfo):[],d=q2(i.providerData,u),p=i.isAnonymous,g=!(i.email&&l.passwordHash)&&!d?.length,_=p?g:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Dp(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(i,E)}async function B2(i){const e=yt(i);await ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q2(i,e){return[...i.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function d1(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function F2(i,e){const n=await u1(i,{},async()=>{const r=Wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=i.config,d=await h1(i,l,"/v1/token",`key=${u}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&Xr(i.emulatorConfig.host)&&(g.credentials="include"),c1.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function H2(i,e){return Bs(i,"POST","/v2/accounts:revokeToken",Wr(i,e))}class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=eb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:u}=await F2(e,n);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:u}=n,d=new Yl;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),l&&(Ae(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(Ae(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return Is("not implemented")}}function wr(i,e){Ae(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ri{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new z2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Dp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await eo(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return L2(this,e)}reload(){return B2(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ud(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Os(this.auth));const e=await this.getIdToken();return await eo(this,V2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,_=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:x,emailVerified:w,isAnonymous:j,providerData:z,stsTokenManager:L}=n;Ae(x&&L,e,"internal-error");const q=Yl.fromJSON(this.name,L);Ae(typeof x=="string",e,"internal-error"),wr(r,e.name),wr(l,e.name),Ae(typeof w=="boolean",e,"internal-error"),Ae(typeof j=="boolean",e,"internal-error"),wr(u,e.name),wr(d,e.name),wr(p,e.name),wr(g,e.name),wr(_,e.name),wr(E,e.name);const ee=new Ri({uid:x,auth:e,email:l,emailVerified:w,displayName:r,isAnonymous:j,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:q,createdAt:_,lastLoginAt:E});return z&&Array.isArray(z)&&(ee.providerData=z.map(ue=>({...ue}))),g&&(ee._redirectEventId=g),ee}static async _fromIdTokenResponse(e,n,r=!1){const l=new Yl;l.updateFromServerResponse(n);const u=new Ri({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await ud(u),u}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];Ae(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?d1(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new Yl;p.updateFromIdToken(r);const g=new Ri({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Dp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,_),g}}const tb=new Map;function Ds(i){Vs(i instanceof Function,"Expected a class definition");let e=tb.get(i);return e?(Vs(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,tb.set(i,e),e)}class f1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}f1.type="NONE";const nb=f1;function Wh(i,e,n){return`firebase:${i}:${e}:${n}`}class Xl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=Wh(this.userKey,l.apiKey,u),this.fullPersistenceKey=Wh("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cd(this.auth,{idToken:e}).catch(()=>{});return n?Ri._fromGetAccountInfoResponse(this.auth,n,e):null}return Ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xl(Ds(nb),e,r);const l=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=l[0]||Ds(nb);const d=Wh(r,e.config.apiKey,e.name);let p=null;for(const _ of n)try{const E=await _._get(d);if(E){let x;if(typeof E=="string"){const w=await cd(e,{idToken:E}).catch(()=>{});if(!w)break;x=await Ri._fromGetAccountInfoResponse(e,w,E)}else x=Ri._fromJSON(e,E);_!==u&&(p=x),u=_;break}}catch{}const g=l.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Xl(u,e,r):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(d)}catch{}})),new Xl(u,e,r))}}function ib(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v1(e))return"Blackberry";if(b1(e))return"Webos";if(p1(e))return"Safari";if((e.includes("chrome/")||g1(e))&&!e.includes("edge/"))return"Chrome";if(y1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function m1(i=Tn()){return/firefox\//i.test(i)}function p1(i=Tn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g1(i=Tn()){return/crios\//i.test(i)}function _1(i=Tn()){return/iemobile/i.test(i)}function y1(i=Tn()){return/android/i.test(i)}function v1(i=Tn()){return/blackberry/i.test(i)}function b1(i=Tn()){return/webos/i.test(i)}function fg(i=Tn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function G2(i=Tn()){return fg(i)&&!!window.navigator?.standalone}function K2(){return aS()&&document.documentMode===10}function E1(i=Tn()){return fg(i)||y1(i)||b1(i)||v1(i)||/windows phone/i.test(i)||_1(i)}function x1(i,e=[]){let n;switch(i){case"Browser":n=ib(Tn());break;case"Worker":n=`${ib(Tn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ga}/${r}`}class Q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function $2(i,e={}){return Bs(i,"GET","/v2/passwordPolicy",Wr(i,e))}const Y2=6;class X2{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Y2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class W2{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sb(this),this.idTokenSubscription=new sb(this),this.beforeStateQueue=new Q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ds(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cd(this,{idToken:e}),r=await Ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ud(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=R2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Os(this));const n=e?yt(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $2(this),n=new X2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await H2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ds(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[Ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&A2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ka(i){return yt(i)}class sb{constructor(e){this.auth=e,this.observer=null,this.addObserver=mS(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function J2(i){jd=i}function T1(i){return jd.loadJS(i)}function Z2(){return jd.recaptchaEnterpriseScript}function eC(){return jd.gapiScript}function tC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class nC{constructor(){this.enterprise=new iC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class iC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const sC="recaptcha-enterprise",w1="NO_RECAPTCHA";class rC{constructor(e){this.type=sC,this.auth=Ka(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{P2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const _=new M2(g);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,d(_.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;Z0(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(_=>{d(_)}).catch(()=>{d(w1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nC().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{r(this.auth).then(p=>{if(!n&&Z0(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Z2();g.length!==0&&(g+=p),T1(g).then(()=>{l(p,u,d)}).catch(_=>{d(_)})}}).catch(p=>{d(p)})})}}async function rb(i,e,n,r=!1,l=!1){const u=new rC(i);let d;if(l)d=w1;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,_=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Op(i,e,n,r,l){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await rb(i,e,n,n==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await rb(i,e,n,n==="getOobCode");return r(i,d)}else return Promise.reject(u)})}function aC(i,e){const n=Rd(i,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Ma(u,e??{}))return l;Ii(l,"already-initialized")}return n.initialize({options:e})}function lC(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ds);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function oC(i,e,n){const r=Ka(i);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=N1(e),{host:d,port:p}=cC(e),g=p===null?"":`:${p}`,_={url:`${u}//${d}${g}/`},E=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(Ma(_,r.config.emulator)&&Ma(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,Xr(d)?(rg(`${u}//${d}${g}`),ag("Auth",!0)):uC()}function N1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function cC(i){const e=N1(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:ab(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:ab(d)}}}function ab(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function uC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,n){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}async function hC(i,e){return Bs(i,"POST","/v1/accounts:signUp",e)}async function dC(i,e){return Zc(i,"POST","/v1/accounts:signInWithPassword",Wr(i,e))}async function fC(i,e){return Zc(i,"POST","/v1/accounts:signInWithEmailLink",Wr(i,e))}async function mC(i,e){return Zc(i,"POST","/v1/accounts:signInWithEmailLink",Wr(i,e))}class Bc extends mg{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Bc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Op(e,n,"signInWithPassword",dC);case"emailLink":return fC(e,{email:this._email,oobCode:this._password});default:Ii(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Op(e,r,"signUpPassword",hC);case"emailLink":return mC(e,{idToken:n,email:this._email,oobCode:this._password});default:Ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Wl(i,e){return Zc(i,"POST","/v1/accounts:signInWithIdp",Wr(i,e))}const pC="http://localhost";class Va extends mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ii("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=n;if(!r||!l)return null;const d=new Va(r,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Wl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wl(e,n)}buildRequest(){const e={requestUri:pC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wc(n)}return e}}function gC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _C(i){const e=wc(Nc(i)).link,n=e?wc(Nc(e)).deep_link_id:null,r=wc(Nc(i)).deep_link_id;return(r?wc(Nc(r)).link:null)||r||n||e||i}class pg{constructor(e){const n=wc(Nc(e)),r=n.apiKey??null,l=n.oobCode??null,u=gC(n.mode??null);Ae(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_C(e);try{return new pg(n)}catch{return null}}}class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(e,n){return Bc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pg.parseLink(n);return Ae(r,"argument-error"),Bc._fromEmailAndCode(e,r.code,r.tenantId)}}mo.PROVIDER_ID="password";mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class A1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class eu extends A1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cr extends eu{constructor(){super("facebook.com")}static credential(e){return Va._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";class Rr extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Va._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";class jr extends eu{constructor(){super("github.com")}static credential(e){return Va._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.GITHUB_SIGN_IN_METHOD="github.com";jr.PROVIDER_ID="github.com";class Ir extends eu{constructor(){super("twitter.com")}static credential(e,n){return Va._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";async function yC(i,e){return Zc(i,"POST","/v1/accounts:signUp",Wr(i,e))}class La{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const u=await Ri._fromIdTokenResponse(e,r,l),d=lb(r);return new La({user:u,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=lb(r);return new La({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function lb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class hd extends cs{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new hd(e,n,r,l)}}function S1(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?hd._fromErrorAndOperation(i,u,e,r):u})}async function vC(i,e,n=!1){const r=await eo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return La._forOperation(i,"link",r)}async function bC(i,e,n=!1){const{auth:r}=i;if(Xn(r.app))return Promise.reject(Os(r));const l="reauthenticate";try{const u=await eo(i,S1(r,l,e,i),n);Ae(u.idToken,r,"internal-error");const d=dg(u.idToken);Ae(d,r,"internal-error");const{sub:p}=d;return Ae(i.uid===p,r,"user-mismatch"),La._forOperation(i,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ii(r,"user-mismatch"),u}}async function C1(i,e,n=!1){if(Xn(i.app))return Promise.reject(Os(i));const r="signIn",l=await S1(i,r,e),u=await La._fromIdTokenResponse(i,r,l);return n||await i._updateCurrentUser(u.user),u}async function EC(i,e){return C1(Ka(i),e)}async function R1(i){const e=Ka(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xC(i,e,n){if(Xn(i.app))return Promise.reject(Os(i));const r=Ka(i),d=await Op(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&R1(i),g}),p=await La._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(p.user),p}function TC(i,e,n){return Xn(i.app)?Promise.reject(Os(i)):EC(yt(i),mo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&R1(i),r})}async function wC(i,e){return Bs(i,"POST","/v1/accounts:update",e)}async function NC(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=yt(i),u={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},d=await eo(r,wC(r.auth,u));r.displayName=d.displayName||null,r.photoURL=d.photoUrl||null;const p=r.providerData.find(({providerId:g})=>g==="password");p&&(p.displayName=r.displayName,p.photoURL=r.photoURL),await r._updateTokensIfNecessary(d)}function AC(i,e,n,r){return yt(i).onIdTokenChanged(e,n,r)}function SC(i,e,n){return yt(i).beforeAuthStateChanged(e,n)}function CC(i,e,n,r){return yt(i).onAuthStateChanged(e,n,r)}function RC(i){return yt(i).signOut()}const dd="__sak";class j1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dd,"1"),this.storage.removeItem(dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const jC=1e3,IC=10;class I1 extends j1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);K2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,IC):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I1.type="LOCAL";const DC=I1;class D1 extends j1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}D1.type="SESSION";const O1=D1;function OC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new Id(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(d).map(async _=>_(n.origin,u)),g=await OC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Id.receivers=[];function gg(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}class kC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const _=gg("",20);l.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(x){const w=x;if(w.data.eventId===_)switch(w.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(w.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ss(){return window}function MC(i){ss().location.href=i}function k1(){return typeof ss().WorkerGlobalScope<"u"&&typeof ss().importScripts=="function"}async function PC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VC(){return navigator?.serviceWorker?.controller||null}function LC(){return k1()?self:null}const M1="firebaseLocalStorageDb",UC=1,fd="firebaseLocalStorage",P1="fbase_key";class tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dd(i,e){return i.transaction([fd],e?"readwrite":"readonly").objectStore(fd)}function zC(){const i=indexedDB.deleteDatabase(M1);return new tu(i).toPromise()}function kp(){const i=indexedDB.open(M1,UC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(fd,{keyPath:P1})}catch(l){n(l)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(fd)?e(r):(r.close(),await zC(),e(await kp()))})})}async function ob(i,e,n){const r=Dd(i,!0).put({[P1]:e,value:n});return new tu(r).toPromise()}async function BC(i,e){const n=Dd(i,!1).get(e),r=await new tu(n).toPromise();return r===void 0?null:r.value}function cb(i,e){const n=Dd(i,!0).delete(e);return new tu(n).toPromise()}const qC=800,FC=3;class V1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return k1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Id._getInstance(LC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await PC(),!this.activeServiceWorker)return;this.sender=new kC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kp();return await ob(e,dd,"1"),await cb(e,dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ob(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Dd(l,!1).getAll();return new tu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V1.type="LOCAL";const HC=V1;new Jc(3e4,6e4);function GC(i,e){return e?Ds(e):(Ae(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class _g extends mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KC(i){return C1(i.auth,new _g(i),i.bypassAuthState)}function QC(i){const{auth:e,user:n}=i;return Ae(n,e,"internal-error"),bC(n,new _g(i),i.bypassAuthState)}async function $C(i){const{auth:e,user:n}=i;return Ae(n,e,"internal-error"),vC(n,new _g(i),i.bypassAuthState)}class L1{constructor(e,n,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KC;case"linkViaPopup":case"linkViaRedirect":return $C;case"reauthViaPopup":case"reauthViaRedirect":return QC;default:Ii(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const YC=new Jc(2e3,1e4);class Ql extends L1{constructor(e,n,r,l,u){super(e,n,l,u),this.provider=r,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YC.get())};e()}}Ql.currentPopupAction=null;const XC="pendingRedirect",Jh=new Map;class WC extends L1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const r=await JC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JC(i,e){const n=tR(e),r=eR(i);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function ZC(i,e){Jh.set(i._key(),e)}function eR(i){return Ds(i._redirectPersistence)}function tR(i){return Wh(XC,i.config.apiKey,i.name)}async function nR(i,e,n=!1){if(Xn(i.app))return Promise.reject(Os(i));const r=Ka(i),l=GC(r,e),d=await new WC(r,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const iR=600*1e3;class sR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!U1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(is(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ub(e))}saveEventToCache(e){this.cachedEventUids.add(ub(e)),this.lastProcessedEventTime=Date.now()}}function ub(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function U1({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function rR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U1(i);default:return!1}}async function aR(i,e={}){return Bs(i,"GET","/v1/projects",e)}const lR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oR=/^https?/;async function cR(i){if(i.config.emulator)return;const{authorizedDomains:e}=await aR(i);for(const n of e)try{if(uR(n))return}catch{}Ii(i,"unauthorized-domain")}function uR(i){const e=Ip(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!oR.test(n))return!1;if(lR.test(i))return r===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const hR=new Jc(3e4,6e4);function hb(){const i=ss().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function dR(i){return new Promise((e,n)=>{function r(){hb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hb(),n(is(i,"network-request-failed"))},timeout:hR.get()})}if(ss().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ss().gapi?.load)r();else{const l=tC("iframefcb");return ss()[l]=()=>{gapi.load?r():n(is(i,"network-request-failed"))},T1(`${eC()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function fR(i){return Zh=Zh||dR(i),Zh}const mR=new Jc(5e3,15e3),pR="__/auth/iframe",gR="emulator/auth/iframe",_R={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vR(i){const e=i.config;Ae(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?hg(e,gR):`https://${i.config.authDomain}/${pR}`,r={apiKey:e.apiKey,appName:i.name,v:Ga},l=yR.get(i.config.apiHost);l&&(r.eid=l);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Wc(r).slice(1)}`}async function bR(i){const e=await fR(i),n=ss().gapi;return Ae(n,i,"internal-error"),e.open({where:document.body,url:vR(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_R,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const d=is(i,"network-request-failed"),p=ss().setTimeout(()=>{u(d)},mR.get());function g(){ss().clearTimeout(p),l(r)}r.ping(g).then(g,()=>{u(d)})}))}const ER={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xR=500,TR=600,wR="_blank",NR="http://localhost";class db{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AR(i,e,n,r=xR,l=TR){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...ER,width:r.toString(),height:l.toString(),top:u,left:d},_=Tn().toLowerCase();n&&(p=g1(_)?wR:n),m1(_)&&(e=e||NR,g.scrollbars="yes");const E=Object.entries(g).reduce((w,[j,z])=>`${w}${j}=${z},`,"");if(G2(_)&&p!=="_self")return SR(e||"",p),new db(null);const x=window.open(e||"",p,E);Ae(x,i,"popup-blocked");try{x.focus()}catch{}return new db(x)}function SR(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const CR="__/auth/handler",RR="emulator/auth/handler",jR=encodeURIComponent("fac");async function fb(i,e,n,r,l,u){Ae(i.config.authDomain,i,"auth-domain-config-required"),Ae(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:Ga,eventId:l};if(e instanceof A1){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",fS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,x]of Object.entries({}))d[E]=x}if(e instanceof eu){const E=e.getScopes().filter(x=>x!=="");E.length>0&&(d.scopes=E.join(","))}i.tenantId&&(d.tid=i.tenantId);const p=d;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const g=await i._getAppCheckToken(),_=g?`#${jR}=${encodeURIComponent(g)}`:"";return`${IR(i)}?${Wc(p).slice(1)}${_}`}function IR({config:i}){return i.emulator?hg(i,RR):`https://${i.authDomain}/${CR}`}const cp="webStorageSupport";class DR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O1,this._completeRedirectFn=nR,this._overrideRedirectResult=ZC}async _openPopup(e,n,r,l){Vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await fb(e,n,r,Ip(),l);return AR(e,u,gg())}async _openRedirect(e,n,r,l){await this._originValidation(e);const u=await fb(e,n,r,Ip(),l);return MC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Vs(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bR(e),r=new sR(e);return n.register("authEvent",l=>(Ae(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cp,{type:cp},l=>{const u=l?.[0]?.[cp];u!==void 0&&n(!!u),Ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return E1()||p1()||fg()}}const OR=DR;var mb="@firebase/auth",pb="1.12.0";class kR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function MR(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PR(i){Pa(new zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;Ae(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x1(i)},_=new W2(r,l,u,g);return lC(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pa(new zr("auth-internal",e=>{const n=Ka(e.getProvider("auth").getImmediate());return(r=>new kR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(mb,pb,MR(i)),ns(mb,pb,"esm2020")}const VR=300,LR=ZE("authIdTokenMaxAge")||VR;let gb=null;const UR=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LR)return;const l=n?.token;gb!==l&&(gb=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function zR(i=cg()){const e=Rd(i,"auth");if(e.isInitialized())return e.getImmediate();const n=aC(i,{popupRedirectResolver:OR,persistence:[HC,DC,O1]}),r=ZE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=UR(u.toString());SC(n,d,()=>d(n.currentUser)),AC(n,p=>d(p))}}const l=XE("auth");return l&&oC(n,`http://${l}`),n}function BR(){return document.getElementsByTagName("head")?.[0]??document}J2({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=l=>{const u=is("internal-error");u.customData=l,n(u)},r.type="text/javascript",r.charset="UTF-8",BR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PR("Browser");var _b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Lr,z1;(function(){var i;function e(S,A){function C(){}C.prototype=A.prototype,S.F=A.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(D,O,V){for(var R=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)R[Le-2]=arguments[Le];return A.prototype[O].apply(D,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(S,A,C){C||(C=0);const D=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)D[O]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(O=0;O<16;++O)D[O]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=S.g[0],C=S.g[1],O=S.g[2];let V=S.g[3],R;R=A+(V^C&(O^V))+D[0]+3614090360&4294967295,A=C+(R<<7&4294967295|R>>>25),R=V+(O^A&(C^O))+D[1]+3905402710&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(C^V&(A^C))+D[2]+606105819&4294967295,O=V+(R<<17&4294967295|R>>>15),R=C+(A^O&(V^A))+D[3]+3250441966&4294967295,C=O+(R<<22&4294967295|R>>>10),R=A+(V^C&(O^V))+D[4]+4118548399&4294967295,A=C+(R<<7&4294967295|R>>>25),R=V+(O^A&(C^O))+D[5]+1200080426&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(C^V&(A^C))+D[6]+2821735955&4294967295,O=V+(R<<17&4294967295|R>>>15),R=C+(A^O&(V^A))+D[7]+4249261313&4294967295,C=O+(R<<22&4294967295|R>>>10),R=A+(V^C&(O^V))+D[8]+1770035416&4294967295,A=C+(R<<7&4294967295|R>>>25),R=V+(O^A&(C^O))+D[9]+2336552879&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(C^V&(A^C))+D[10]+4294925233&4294967295,O=V+(R<<17&4294967295|R>>>15),R=C+(A^O&(V^A))+D[11]+2304563134&4294967295,C=O+(R<<22&4294967295|R>>>10),R=A+(V^C&(O^V))+D[12]+1804603682&4294967295,A=C+(R<<7&4294967295|R>>>25),R=V+(O^A&(C^O))+D[13]+4254626195&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(C^V&(A^C))+D[14]+2792965006&4294967295,O=V+(R<<17&4294967295|R>>>15),R=C+(A^O&(V^A))+D[15]+1236535329&4294967295,C=O+(R<<22&4294967295|R>>>10),R=A+(O^V&(C^O))+D[1]+4129170786&4294967295,A=C+(R<<5&4294967295|R>>>27),R=V+(C^O&(A^C))+D[6]+3225465664&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^C&(V^A))+D[11]+643717713&4294967295,O=V+(R<<14&4294967295|R>>>18),R=C+(V^A&(O^V))+D[0]+3921069994&4294967295,C=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(C^O))+D[5]+3593408605&4294967295,A=C+(R<<5&4294967295|R>>>27),R=V+(C^O&(A^C))+D[10]+38016083&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^C&(V^A))+D[15]+3634488961&4294967295,O=V+(R<<14&4294967295|R>>>18),R=C+(V^A&(O^V))+D[4]+3889429448&4294967295,C=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(C^O))+D[9]+568446438&4294967295,A=C+(R<<5&4294967295|R>>>27),R=V+(C^O&(A^C))+D[14]+3275163606&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^C&(V^A))+D[3]+4107603335&4294967295,O=V+(R<<14&4294967295|R>>>18),R=C+(V^A&(O^V))+D[8]+1163531501&4294967295,C=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(C^O))+D[13]+2850285829&4294967295,A=C+(R<<5&4294967295|R>>>27),R=V+(C^O&(A^C))+D[2]+4243563512&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^C&(V^A))+D[7]+1735328473&4294967295,O=V+(R<<14&4294967295|R>>>18),R=C+(V^A&(O^V))+D[12]+2368359562&4294967295,C=O+(R<<20&4294967295|R>>>12),R=A+(C^O^V)+D[5]+4294588738&4294967295,A=C+(R<<4&4294967295|R>>>28),R=V+(A^C^O)+D[8]+2272392833&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^C)+D[11]+1839030562&4294967295,O=V+(R<<16&4294967295|R>>>16),R=C+(O^V^A)+D[14]+4259657740&4294967295,C=O+(R<<23&4294967295|R>>>9),R=A+(C^O^V)+D[1]+2763975236&4294967295,A=C+(R<<4&4294967295|R>>>28),R=V+(A^C^O)+D[4]+1272893353&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^C)+D[7]+4139469664&4294967295,O=V+(R<<16&4294967295|R>>>16),R=C+(O^V^A)+D[10]+3200236656&4294967295,C=O+(R<<23&4294967295|R>>>9),R=A+(C^O^V)+D[13]+681279174&4294967295,A=C+(R<<4&4294967295|R>>>28),R=V+(A^C^O)+D[0]+3936430074&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^C)+D[3]+3572445317&4294967295,O=V+(R<<16&4294967295|R>>>16),R=C+(O^V^A)+D[6]+76029189&4294967295,C=O+(R<<23&4294967295|R>>>9),R=A+(C^O^V)+D[9]+3654602809&4294967295,A=C+(R<<4&4294967295|R>>>28),R=V+(A^C^O)+D[12]+3873151461&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^C)+D[15]+530742520&4294967295,O=V+(R<<16&4294967295|R>>>16),R=C+(O^V^A)+D[2]+3299628645&4294967295,C=O+(R<<23&4294967295|R>>>9),R=A+(O^(C|~V))+D[0]+4096336452&4294967295,A=C+(R<<6&4294967295|R>>>26),R=V+(C^(A|~O))+D[7]+1126891415&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~C))+D[14]+2878612391&4294967295,O=V+(R<<15&4294967295|R>>>17),R=C+(V^(O|~A))+D[5]+4237533241&4294967295,C=O+(R<<21&4294967295|R>>>11),R=A+(O^(C|~V))+D[12]+1700485571&4294967295,A=C+(R<<6&4294967295|R>>>26),R=V+(C^(A|~O))+D[3]+2399980690&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~C))+D[10]+4293915773&4294967295,O=V+(R<<15&4294967295|R>>>17),R=C+(V^(O|~A))+D[1]+2240044497&4294967295,C=O+(R<<21&4294967295|R>>>11),R=A+(O^(C|~V))+D[8]+1873313359&4294967295,A=C+(R<<6&4294967295|R>>>26),R=V+(C^(A|~O))+D[15]+4264355552&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~C))+D[6]+2734768916&4294967295,O=V+(R<<15&4294967295|R>>>17),R=C+(V^(O|~A))+D[13]+1309151649&4294967295,C=O+(R<<21&4294967295|R>>>11),R=A+(O^(C|~V))+D[4]+4149444226&4294967295,A=C+(R<<6&4294967295|R>>>26),R=V+(C^(A|~O))+D[11]+3174756917&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~C))+D[2]+718787259&4294967295,O=V+(R<<15&4294967295|R>>>17),R=C+(V^(O|~A))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+V&4294967295}r.prototype.v=function(S,A){A===void 0&&(A=S.length);const C=A-this.blockSize,D=this.C;let O=this.h,V=0;for(;V<A;){if(O==0)for(;V<=C;)l(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<A;)if(D[O++]=S.charCodeAt(V++),O==this.blockSize){l(this,D),O=0;break}}else for(;V<A;)if(D[O++]=S[V++],O==this.blockSize){l(this,D),O=0;break}}this.h=O,this.o+=A},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)S[A++]=this.g[C]>>>D&255;return S};function u(S,A){var C=p;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=A(S)}function d(S,A){this.h=A;const C=[];let D=!0;for(let O=S.length-1;O>=0;O--){const V=S[O]|0;D&&V==A||(C[O]=V,D=!1)}this.g=C}var p={};function g(S){return-128<=S&&S<128?u(S,function(A){return new d([A|0],A<0?-1:0)}):new d([S|0],S<0?-1:0)}function _(S){if(isNaN(S)||!isFinite(S))return x;if(S<0)return q(_(-S));const A=[];let C=1;for(let D=0;S>=C;D++)A[D]=S/C|0,C*=4294967296;return new d(A,0)}function E(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return q(E(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(A,8));let D=x;for(let V=0;V<S.length;V+=8){var O=Math.min(8,S.length-V);const R=parseInt(S.substring(V,V+O),A);O<8?(O=_(Math.pow(A,O)),D=D.j(O).add(_(R))):(D=D.j(C),D=D.add(_(R)))}return D}var x=g(0),w=g(1),j=g(16777216);i=d.prototype,i.m=function(){if(L(this))return-q(this).m();let S=0,A=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);S+=(D>=0?D:4294967296+D)*A,A*=4294967296}return S},i.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(z(this))return"0";if(L(this))return"-"+q(this).toString(S);const A=_(Math.pow(S,6));var C=this;let D="";for(;;){const O=re(C,A).g;C=ee(C,O.j(A));let V=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=O,z(C))return V+D;for(;V.length<6;)V="0"+V;D=V+D}},i.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function z(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function L(S){return S.h==-1}i.l=function(S){return S=ee(this,S),L(S)?-1:z(S)?0:1};function q(S){const A=S.g.length,C=[];for(let D=0;D<A;D++)C[D]=~S.g[D];return new d(C,~S.h).add(w)}i.abs=function(){return L(this)?q(this):this},i.add=function(S){const A=Math.max(this.g.length,S.g.length),C=[];let D=0;for(let O=0;O<=A;O++){let V=D+(this.i(O)&65535)+(S.i(O)&65535),R=(V>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);D=R>>>16,V&=65535,R&=65535,C[O]=R<<16|V}return new d(C,C[C.length-1]&-2147483648?-1:0)};function ee(S,A){return S.add(q(A))}i.j=function(S){if(z(this)||z(S))return x;if(L(this))return L(S)?q(this).j(q(S)):q(q(this).j(S));if(L(S))return q(this.j(q(S)));if(this.l(j)<0&&S.l(j)<0)return _(this.m()*S.m());const A=this.g.length+S.g.length,C=[];for(var D=0;D<2*A;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let O=0;O<S.g.length;O++){const V=this.i(D)>>>16,R=this.i(D)&65535,Le=S.i(O)>>>16,tt=S.i(O)&65535;C[2*D+2*O]+=R*tt,ue(C,2*D+2*O),C[2*D+2*O+1]+=V*tt,ue(C,2*D+2*O+1),C[2*D+2*O+1]+=R*Le,ue(C,2*D+2*O+1),C[2*D+2*O+2]+=V*Le,ue(C,2*D+2*O+2)}for(S=0;S<A;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=A;S<2*A;S++)C[S]=0;return new d(C,0)};function ue(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function ae(S,A){this.g=S,this.h=A}function re(S,A){if(z(A))throw Error("division by zero");if(z(S))return new ae(x,x);if(L(S))return A=re(q(S),A),new ae(q(A.g),q(A.h));if(L(A))return A=re(S,q(A)),new ae(q(A.g),A.h);if(S.g.length>30){if(L(S)||L(A))throw Error("slowDivide_ only works with positive integers.");for(var C=w,D=A;D.l(S)<=0;)C=ve(C),D=ve(D);var O=le(C,1),V=le(D,1);for(D=le(D,2),C=le(C,2);!z(D);){var R=V.add(D);R.l(S)<=0&&(O=O.add(C),V=R),D=le(D,1),C=le(C,1)}return A=ee(S,O.j(A)),new ae(O,A)}for(O=x;S.l(A)>=0;){for(C=Math.max(1,Math.floor(S.m()/A.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),V=_(C),R=V.j(A);L(R)||R.l(S)>0;)C-=D,V=_(C),R=V.j(A);z(V)&&(V=w),O=O.add(V),S=ee(S,R)}return new ae(O,S)}i.B=function(S){return re(this,S).h},i.and=function(S){const A=Math.max(this.g.length,S.g.length),C=[];for(let D=0;D<A;D++)C[D]=this.i(D)&S.i(D);return new d(C,this.h&S.h)},i.or=function(S){const A=Math.max(this.g.length,S.g.length),C=[];for(let D=0;D<A;D++)C[D]=this.i(D)|S.i(D);return new d(C,this.h|S.h)},i.xor=function(S){const A=Math.max(this.g.length,S.g.length),C=[];for(let D=0;D<A;D++)C[D]=this.i(D)^S.i(D);return new d(C,this.h^S.h)};function ve(S){const A=S.g.length+1,C=[];for(let D=0;D<A;D++)C[D]=S.i(D)<<1|S.i(D-1)>>>31;return new d(C,S.h)}function le(S,A){const C=A>>5;A%=32;const D=S.g.length-C,O=[];for(let V=0;V<D;V++)O[V]=A>0?S.i(V+C)>>>A|S.i(V+C+1)<<32-A:S.i(V+C);return new d(O,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,z1=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=E,Lr=d}).apply(typeof _b<"u"?_b:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var B1,Ac,q1,ed,Mp,F1,H1,G1;(function(){var i,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function l(h,y){if(y)e:{var b=r;h=h.split(".");for(var N=0;N<h.length-1;N++){var F=h[N];if(!(F in b))break e;b=b[F]}h=h[h.length-1],N=b[h],y=y(N),y!=N&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(y){var b=[],N;for(N in y)Object.prototype.hasOwnProperty.call(y,N)&&b.push([N,y[N]]);return b}});var u=u||{},d=this||self;function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,b){return h.call.apply(h.bind,arguments)}function _(h,y,b){return _=g,_.apply(null,arguments)}function E(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function x(h,y){function b(){}b.prototype=y.prototype,h.Z=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(N,F,Q){for(var he=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)he[Oe-2]=arguments[Oe];return y.prototype[F].apply(N,he)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function j(h){const y=h.length;if(y>0){const b=Array(y);for(let N=0;N<y;N++)b[N]=h[N];return b}return[]}function z(h,y){for(let N=1;N<arguments.length;N++){const F=arguments[N];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=h.length||0;const Q=F.length||0;h.length=b+Q;for(let he=0;he<Q;he++)h[b+he]=F[he]}else h.push(F)}}class L{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(h){d.setTimeout(()=>{throw h},0)}function ee(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ue{constructor(){this.h=this.g=null}add(y,b){const N=ae.get();N.set(y,b),this.h?this.h.next=N:this.g=N,this.h=N}}var ae=new L(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,le=!1,S=new ue,A=()=>{const h=Promise.resolve(void 0);ve=()=>{h.then(C)}};function C(){for(var h;h=ee();){try{h.h.call(h.g)}catch(b){q(b)}var y=ae;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}le=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};d.addEventListener("test",b,y),d.removeEventListener("test",b,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function Le(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}x(Le,O),Le.prototype.init=function(h,y){const b=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),X=0;function ce(h,y,b,N,F){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!N,this.ha=F,this.key=++X,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,y,b){for(const N in h)y.call(b,h[N],N,h)}function De(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function k(h){const y={};for(const b in h)y[b]=h[b];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let b,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(b in N)h[b]=N[b];for(let Q=0;Q<J.length;Q++)b=J[Q],Object.prototype.hasOwnProperty.call(N,b)&&(h[b]=N[b])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,y,b,N,F){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const he=Y(h,y,N,F);return he>-1?(y=h[he],b||(y.fa=!1)):(y=new ce(y,this.src,Q,!!N,F),y.fa=b,h.push(y)),y};function Te(h,y){const b=y.type;if(b in h.g){var N=h.g[b],F=Array.prototype.indexOf.call(N,y,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(N,F,1),Q&&(pe(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Y(h,y,b,N){for(let F=0;F<h.length;++F){const Q=h[F];if(!Q.da&&Q.listener==y&&Q.capture==!!b&&Q.ha==N)return F}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Qe={};function Ue(h,y,b,N,F){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)Ue(h,y[Q],b,N,F);return null}return b=_i(b),h&&h[tt]?h.J(y,b,p(N)?!!N.capture:!1,F):Jt(h,y,b,!1,N,F)}function Jt(h,y,b,N,F,Q){if(!y)throw Error("Invalid event type");const he=p(F)?!!F.capture:!!F;let Oe=nn(h);if(Oe||(h[_e]=Oe=new de(h)),b=Oe.add(y,b,N,he,Q),b.proxy)return b;if(N=W(),b.proxy=N,N.src=h,N.listener=b,h.addEventListener)V||(F=he),F===void 0&&(F=!1),h.addEventListener(y.toString(),N,F);else if(h.attachEvent)h.attachEvent(Ot(y.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function W(){function h(b){return y.call(h.src,h.listener,b)}const y=zt;return h}function vt(h,y,b,N,F){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)vt(h,y[Q],b,N,F);else N=p(N)?!!N.capture:!!N,b=_i(b),h&&h[tt]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],b=Y(y,b,N,F),b>-1&&(pe(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=nn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Y(y,b,N,F)),(b=h>-1?y[h]:null)&&Ve(b))}function Ve(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[tt])Te(y.i,h);else{var b=h.type,N=h.proxy;y.removeEventListener?y.removeEventListener(b,N,h.capture):y.detachEvent?y.detachEvent(Ot(b),N):y.addListener&&y.removeListener&&y.removeListener(N),(b=nn(y))?(Te(b,h),b.h==0&&(b.src=null,y[_e]=null)):pe(h)}}}function Ot(h){return h in Qe?Qe[h]:Qe[h]="on"+h}function zt(h,y){if(h.da)h=!0;else{y=new Le(y,this);const b=h.listener,N=h.ha||h.src;h.fa&&Ve(h),h=b.call(N,y)}return h}function nn(h){return h=h[_e],h instanceof de?h:null}var Zt="__closure_events_fn_"+(Math.random()*1e9>>>0);function _i(h){return typeof h=="function"?h:(h[Zt]||(h[Zt]=function(y){return h.handleEvent(y)}),h[Zt])}function mt(){D.call(this),this.i=new de(this),this.M=this,this.G=null}x(mt,D),mt.prototype[tt]=!0,mt.prototype.removeEventListener=function(h,y,b,N){vt(this,h,y,b,N)};function pt(h,y){var b,N=h.G;if(N)for(b=[];N;N=N.G)b.push(N);if(h=h.M,N=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var F=y;y=new O(N,h),oe(y,F)}F=!0;let Q,he;if(b)for(he=b.length-1;he>=0;he--)Q=y.g=b[he],F=ti(Q,N,!0,y)&&F;if(Q=y.g=h,F=ti(Q,N,!0,y)&&F,F=ti(Q,N,!1,y)&&F,b)for(he=0;he<b.length;he++)Q=y.g=b[he],F=ti(Q,N,!1,y)&&F}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const b=h.g[y];for(let N=0;N<b.length;N++)pe(b[N]);delete h.g[y],h.h--}}this.G=null},mt.prototype.J=function(h,y,b,N){return this.i.add(String(h),y,!1,b,N)},mt.prototype.K=function(h,y,b,N){return this.i.add(String(h),y,!0,b,N)};function ti(h,y,b,N){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let Q=0;Q<y.length;++Q){const he=y[Q];if(he&&!he.da&&he.capture==b){const Oe=he.listener,kt=he.ha||he.src;he.fa&&Te(h.i,he),F=Oe.call(kt,N)!==!1&&F}}return F&&!N.defaultPrevented}function Gs(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=_(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Oi(h){h.g=Gs(()=>{h.g=null,h.i&&(h.i=!1,Oi(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class sn extends D{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Oi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(h){D.call(this),this.h=h,this.g={}}x(ki,D);var yi=[];function ea(h){Pe(h.g,function(y,b){this.g.hasOwnProperty(b)&&Ve(y)},h),h.g={}}ki.prototype.N=function(){ki.Z.N.call(this),ea(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mi=d.JSON.stringify,Ya=d.JSON.parse,Xa=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Wa(){}function Ja(){}var At={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rt(){O.call(this,"d")}x(rt,O);function Cn(){O.call(this,"c")}x(Cn,O);var wt={},ta=null;function Ks(){return ta=ta||new mt}wt.Ia="serverreachability";function Za(h){O.call(this,wt.Ia,h)}x(Za,O);function ni(h){const y=Ks();pt(y,new Za(y))}wt.STAT_EVENT="statevent";function us(h,y){O.call(this,wt.STAT_EVENT,h),this.stat=y}x(us,O);function St(h){const y=Ks();pt(y,new us(y,h))}wt.Ja="timingevent";function ii(h,y){O.call(this,wt.Ja,h),this.size=y}x(ii,O);function yn(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function B(h,y,b,N,F,Q){h.info(function(){if(h.g)if(Q){var he="",Oe=Q.split("&");for(let nt=0;nt<Oe.length;nt++){var kt=Oe[nt].split("=");if(kt.length>1){const xt=kt[0];kt=kt[1];const li=xt.split("_");he=li.length>=2&&li[1]=="type"?he+(xt+"="+kt+"&"):he+(xt+"=redacted&")}}}else he=null;else he=Q;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+y+`
`+b+`
`+he})}function xe(h,y,b,N,F,Q,he){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+y+`
`+b+`
`+Q+" "+he})}function Ye(h,y,b,N){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+na(h,b)+(N?" "+N:"")})}function rn(h,y){h.info(function(){return"TIMEOUT: "+y})}zn.prototype.info=function(){};function na(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var b=Q[h];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let he=1;he<N.length;he++)N[he]=""}}}}return Mi(Q)}catch{return y}}var Rn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ia={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Eo;function sa(){}x(sa,Wa),sa.prototype.g=function(){return new XMLHttpRequest},Eo=new sa;function hs(h){return encodeURIComponent(String(h))}function mu(h){var y=1;h=h.split(":");const b=[];for(;y>0&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function vi(h,y,b,N){this.j=h,this.i=y,this.l=b,this.S=N||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bi}function bi(){this.i=null,this.g="",this.h=!1}var Bt={},an={};function Pi(h,y,b){h.M=1,h.A=ra(Ft(y)),h.u=b,h.R=!0,el(h,null)}function el(h,y){h.F=Date.now(),Vi(h),h.B=Ft(h.A);var b=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),sl(b.i,"t",N),h.C=0,b=h.j.L,h.h=new bi,h.g=Ru(h.j,b?y:null,!h.u),h.P>0&&(h.O=new sn(_(h.Y,h,h.g),h.P)),y=h.V,b=h.g,N=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(yi[0]=F.toString()),F=yi);for(let Q=0;Q<F.length;Q++){const he=Ue(b,F[Q],N||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ni(),B(h.i,h.v,h.B,h.l,h.S,h.u)}vi.prototype.ba=function(h){h=h.target;const y=this.O;y&&Ti(h)==3?y.j():this.Y(h)},vi.prototype.Y=function(h){try{if(h==this.g)e:{const Oe=Ti(this.g),kt=this.g.ya(),nt=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||Oe!=4||kt==7||(kt==8||nt<=0?ni(3):ni(2)),Li(this);var y=this.g.ca();this.X=y;var b=tf(this);if(this.o=y==200,xe(this.i,this.v,this.B,this.l,this.S,Oe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(N)){var Q=N;break t}}Q=null}if(h=Q)Ye(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ui(this,h);else{this.o=!1,this.m=3,St(12),Bn(this),si(this);break e}}if(this.R){h=!0;let xt;for(;!this.K&&this.C<b.length;)if(xt=gu(this,b),xt==an){Oe==4&&(this.m=4,St(14),h=!1),Ye(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Bt){this.m=4,St(15),Ye(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Ye(this.i,this.l,xt,null),Ui(this,xt);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||b.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)Ye(this.i,this.l,b,"[Invalid Chunked Response]"),Bn(this),si(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Po(he),he.P=!0,St(11))}}else Ye(this.i,this.l,b,null),Ui(this,b);Oe==4&&Bn(this),this.o&&!this.K&&(Oe==4?Nu(this.j,this):(this.o=!1,Vi(this)))}else fs(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Bn(this),si(this)}}}catch{}};function tf(h){if(!pu(h))return h.g.la();const y=dn(h.g);if(y==="")return"";let b="";const N=y.length,F=Ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Bn(h),si(h),"";h.h.i=new d.TextDecoder}for(let Q=0;Q<N;Q++)h.h.h=!0,b+=h.h.i.decode(y[Q],{stream:!(F&&Q==N-1)});return y.length=0,h.h.g+=b,h.C=0,h.h.g}function pu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function gu(h,y){var b=h.C,N=y.indexOf(`
`,b);return N==-1?an:(b=Number(y.substring(b,N)),isNaN(b)?Bt:(N+=1,N+b>y.length?an:(y=y.slice(N,N+b),h.C=N+b,y)))}vi.prototype.cancel=function(){this.K=!0,Bn(this)};function Vi(h){h.T=Date.now()+h.H,tl(h,h.H)}function tl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=yn(_(h.aa,h),y)}function Li(h){h.D&&(d.clearTimeout(h.D),h.D=null)}vi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(rn(this.i,this.B),this.M!=2&&(ni(),St(17)),Bn(this),this.m=2,si(this)):tl(this,this.T-h)};function si(h){h.j.I==0||h.K||Nu(h.j,h)}function Bn(h){Li(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,ea(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ui(h,y){try{var b=h.j;if(b.I!=0&&(b.g==h||Bi(b.h,h))){if(!h.L&&Bi(b.h,h)&&b.I==3){try{var N=b.Ba.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)cl(b),er(b);else break e;da(b),St(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=yn(_(b.Va,b),6e3));zi(b.h)<=1&&b.ta&&(b.ta=void 0)}else Qi(b,11)}else if((h.L||b.g==h)&&cl(b),!R(y))for(F=b.Ba.g.parse(y),y=0;y<F.length;y++){let nt=F[y];const xt=nt[0];if(!(xt<=b.K))if(b.K=xt,nt=nt[1],b.I==2)if(nt[0]=="c"){b.M=nt[1],b.ba=nt[2];const li=nt[3];li!=null&&(b.ka=li,b.j.info("VER="+b.ka));const $i=nt[4];$i!=null&&(b.za=$i,b.j.info("SVER="+b.za));const wi=nt[5];wi!=null&&typeof wi=="number"&&wi>0&&(N=1.5*wi,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const Ni=h.g;if(Ni){const fa=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var Q=N.h;Q.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(wo(Q,Q.h),Q.h=null))}if(N.G){const ul=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(N.wa=ul,at(N.J,N.G,ul))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var he=h;if(N.na=Cu(N,N.L?N.ba:null,N.W),he.L){No(N.h,he);var Oe=he,kt=N.O;kt&&(Oe.H=kt),Oe.D&&(Li(Oe),Vi(Oe)),N.g=he}else Tu(N);b.i.length>0&&Ki(b)}else nt[0]!="stop"&&nt[0]!="close"||Qi(b,7);else b.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Qi(b,7):ko(b):nt[0]!="noop"&&b.l&&b.l.qa(nt),b.A=0)}}ni(4)}catch{}}var qt=class{constructor(h,y){this.g=h,this.map=y}};function xo(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function To(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function zi(h){return h.h?1:h.g?h.g.size:0}function Bi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function wo(h,y){h.g?h.g.add(y):h.h=y}function No(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}xo.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ao(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.G);return y}return j(h.i)}var _u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nl(h,y){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const N=h[b].indexOf("=");let F,Q=null;N>=0?(F=h[b].substring(0,N),Q=h[b].substring(N+1)):F=h[b],y(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function qn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof qn?(this.l=h.l,ln(this,h.j),this.o=h.o,this.g=h.g,Qs(this,h.u),this.h=h.h,So(this,Eu(h.i)),this.m=h.m):h&&(y=String(h).match(_u))?(this.l=!1,ln(this,y[1]||"",!0),this.o=qi(y[2]||""),this.g=qi(y[3]||"",!0),Qs(this,y[4]),this.h=qi(y[5]||"",!0),So(this,y[6]||"",!0),this.m=qi(y[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}qn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(aa(y,il,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(aa(y,il,!0),"@"),h.push(hs(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(aa(b,b.charAt(0)=="/"?Co:yu,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",aa(b,vu)),h.join("")},qn.prototype.resolve=function(h){const y=Ft(this);let b=!!h.j;b?ln(y,h.j):b=!!h.o,b?y.o=h.o:b=!!h.g,b?y.g=h.g:b=h.u!=null;var N=h.h;if(b)Qs(y,h.u);else if(b=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=y.h.lastIndexOf("/");F!=-1&&(N=y.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let he=0;he<F.length;){const Oe=F[he++];Oe=="."?N&&he==F.length&&Q.push(""):Oe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),N&&he==F.length&&Q.push("")):(Q.push(Oe),N=!0)}N=Q.join("/")}else N=F}return b?y.h=N:b=h.i.toString()!=="",b?So(y,Eu(h.i)):b=!!h.m,b&&(y.m=h.m),y};function Ft(h){return new qn(h)}function ln(h,y,b){h.j=b?qi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Qs(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function So(h,y,b){y instanceof Ys?(h.i=y,rl(h.i,h.l)):(b||(y=aa(y,$s)),h.i=new Ys(y,h.l))}function at(h,y,b){h.i.set(y,b)}function ra(h){return at(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function qi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function aa(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,jn),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var il=/[#\/\?@]/g,yu=/[#\?:]/g,Co=/[#\?]/g,$s=/[#\?@]/g,vu=/#/g;function Ys(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function In(h){h.g||(h.g=new Map,h.h=0,h.i&&nl(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=Ys.prototype,i.add=function(h,y){In(this),this.i=null,h=Xs(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function bu(h,y){In(h),y=Xs(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ro(h,y){return In(h),y=Xs(h,y),h.g.has(y)}i.forEach=function(h,y){In(this),this.g.forEach(function(b,N){b.forEach(function(F){h.call(y,F,N,this)},this)},this)};function jo(h,y){In(h);let b=[];if(typeof y=="string")Ro(h,y)&&(b=b.concat(h.g.get(Xs(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)b=b.concat(h[y]);return b}i.set=function(h,y){return In(this),this.i=null,h=Xs(this,h),Ro(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=jo(this,h),h.length>0?String(h[0]):y):y};function sl(h,y,b){bu(h,y),b.length>0&&(h.i=null,h.g.set(Xs(h,y),j(b)),h.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let N=0;N<y.length;N++){var b=y[N];const F=hs(b);b=jo(this,b);for(let Q=0;Q<b.length;Q++){let he=F;b[Q]!==""&&(he+="="+hs(b[Q])),h.push(he)}}return this.i=h.join("&")};function Eu(h){const y=new Ys;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Xs(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function rl(h,y){y&&!h.j&&(In(h),h.i=null,h.g.forEach(function(b,N){const F=N.toLowerCase();N!=F&&(bu(this,N),sl(this,F,b))},h)),h.j=y}function Ei(h,y){const b=new zn;if(d.Image){const N=new Image;N.onload=E(ri,b,"TestLoadImage: loaded",!0,y,N),N.onerror=E(ri,b,"TestLoadImage: error",!1,y,N),N.onabort=E(ri,b,"TestLoadImage: abort",!1,y,N),N.ontimeout=E(ri,b,"TestLoadImage: timeout",!1,y,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else y(!1)}function Io(h,y){const b=new zn,N=new AbortController,F=setTimeout(()=>{N.abort(),ri(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:N.signal}).then(Q=>{clearTimeout(F),Q.ok?ri(b,"TestPingServer: ok",!0,y):ri(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),ri(b,"TestPingServer: error",!1,y)})}function ri(h,y,b,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(b)}catch{}}function Ws(){this.g=new Xa}function Fi(h){this.i=h.Sb||null,this.h=h.ab||!1}x(Fi,Wa),Fi.prototype.g=function(){return new la(this.i,this.h)};function la(h,y){mt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(la,mt),i=la.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,xi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;al(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function al(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Js(this):xi(this),this.readyState==3&&al(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Js(this))},i.Na=function(h){this.g&&(this.response=h,Js(this))},i.ga=function(){this.g&&Js(this)};function Js(h){h.readyState=4,h.l=null,h.j=null,h.B=null,xi(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function xi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ai(h){let y="";return Pe(h,function(b,N){y+=N,y+=":",y+=b,y+=`\r
`}),y}function oa(h,y,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=ai(b),typeof h=="string"?b!=null&&hs(b):at(h,y,b))}function ct(h){mt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(ct,mt);var Hi=/^https?$/i,Do=["POST","PUT"];i=ct.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Eo.g(),this.g.onreadystatechange=w(_(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){ca(this,Q);return}if(h=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)b.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Q of N.keys())b.set(Q,N.get(Q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Do,y,void 0)>=0)||N||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,he]of b)this.g.setRequestHeader(Q,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){ca(this,Q)}};function ca(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Oo(h),ds(h)}function Oo(h){h.A||(h.A=!0,pt(h,"complete"),pt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,pt(this,"complete"),pt(this,"abort"),ds(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),ct.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ua(this):this.Xa())},i.Xa=function(){ua(this)};function ua(h){if(h.h&&typeof u<"u"){if(h.v&&Ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(pt(h,"readystatechange"),Ti(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var N;if(N=Q===0){let he=String(h.D).match(_u)[1]||null;!he&&d.self&&d.self.location&&(he=d.self.location.protocol.slice(0,-1)),N=!Hi.test(he?he.toLowerCase():"")}b=N}if(b)pt(h,"complete"),pt(h,"success");else{h.o=6;try{var F=Ti(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",Oo(h)}}finally{ds(h)}}}}function ds(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,y||pt(h,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ti(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Ti(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ya(y)}};function dn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function fs(h){const y={};h=(h.g&&Ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(R(h[N]))continue;var b=mu(h[N]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=y[F]||[];y[F]=Q,Q.push(b)}De(y,function(N){return N.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gi(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function Zs(h){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gi("baseRetryDelayMs",5e3,h),this.Za=Gi("retryDelaySeedMs",1e4,h),this.Ta=Gi("forwardChannelMaxRetries",2,h),this.va=Gi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new xo(h&&h.concurrentRequestLimit),this.Ba=new Ws,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Zs.prototype,i.ka=8,i.I=1,i.connect=function(h,y,b,N){St(0),this.W=h,this.H=y||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=Cu(this,null,this.W),Ki(this)};function ko(h){if(ll(h),h.I==3){var y=h.V++,b=Ft(h.J);if(at(b,"SID",h.M),at(b,"RID",y),at(b,"TYPE","terminate"),ha(h,b),y=new vi(h,h.j,y),y.M=2,y.A=ra(Ft(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&d.Image&&(new Image().src=y.A,b=!0),b||(y.g=Ru(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Vi(y)}Su(h)}function er(h){h.g&&(Po(h),h.g.cancel(),h.g=null)}function ll(h){er(h),h.v&&(d.clearTimeout(h.v),h.v=null),cl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ki(h){if(!To(h.h)&&!h.m){h.m=!0;var y=h.Ea;ve||A(),le||(ve(),le=!0),S.add(y,h),h.D=0}}function ol(h,y){return zi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=yn(_(h.Ea,h,y),Au(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new vi(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=k(Q),oe(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=xu(this,F,y),b=Ft(this.J),at(b,"RID",h),at(b,"CVER",22),this.G&&at(b,"X-HTTP-Session-Id",this.G),ha(this,b),Q&&(this.R?y="headers="+hs(ai(Q))+"&"+y:this.u&&oa(b,this.u,Q)),wo(this.h,F),this.Ra&&at(b,"TYPE","init"),this.S?(at(b,"$req",y),at(b,"SID","null"),F.U=!0,Pi(F,b,null)):Pi(F,b,y),this.I=2}}else this.I==3&&(h?Mo(this,h):this.i.length==0||To(this.h)||Mo(this))};function Mo(h,y){var b;y?b=y.l:b=h.V++;const N=Ft(h.J);at(N,"SID",h.M),at(N,"RID",b),at(N,"AID",h.K),ha(h,N),h.u&&h.o&&oa(N,h.u,h.o),b=new vi(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),y&&(h.i=y.G.concat(h.i)),y=xu(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),wo(h.h,b),Pi(b,N,y)}function ha(h,y){h.H&&Pe(h.H,function(b,N){at(y,N,b)}),h.l&&Pe({},function(b,N){at(y,N,b)})}function xu(h,y,b){b=Math.min(h.i.length,b);const N=h.l?_(h.l.Ka,h.l,h):null;e:{var F=h.i;let Oe=-1;for(;;){const kt=["count="+b];Oe==-1?b>0?(Oe=F[0].g,kt.push("ofs="+Oe)):Oe=0:kt.push("ofs="+Oe);let nt=!0;for(let xt=0;xt<b;xt++){var Q=F[xt].g;const li=F[xt].map;if(Q-=Oe,Q<0)Oe=Math.max(0,F[xt].g-100),nt=!1;else try{Q="req"+Q+"_"||"";try{var he=li instanceof Map?li:Object.entries(li);for(const[$i,wi]of he){let Ni=wi;p(wi)&&(Ni=Mi(wi)),kt.push(Q+$i+"="+encodeURIComponent(Ni))}}catch($i){throw kt.push(Q+"type="+encodeURIComponent("_badmap")),$i}}catch{N&&N(li)}}if(nt){he=kt.join("&");break e}}he=void 0}return h=h.i.splice(0,b),y.G=h,he}function Tu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ve||A(),le||(ve(),le=!0),S.add(y,h),h.A=0}}function da(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=yn(_(h.Da,h),Au(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=yn(_(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),er(this),wu(this))};function Po(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function wu(h){h.g=new vi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ft(h.na);at(y,"RID","rpc"),at(y,"SID",h.M),at(y,"AID",h.K),at(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&at(y,"TO",h.ia),at(y,"TYPE","xmlhttp"),ha(h,y),h.u&&h.o&&oa(y,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=ra(Ft(y)),b.u=null,b.R=!0,el(b,h)}i.Va=function(){this.C!=null&&(this.C=null,er(this),da(this),St(19))};function cl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Nu(h,y){var b=null;if(h.g==y){cl(h),Po(h),h.g=null;var N=2}else if(Bi(h.h,y))b=y.G,No(h.h,y),N=1;else return;if(h.I!=0){if(y.o)if(N==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var F=h.D;N=Ks(),pt(N,new ii(N,b)),Ki(h)}else Tu(h);else if(F=y.m,F==3||F==0&&y.X>0||!(N==1&&ol(h,y)||N==2&&da(h)))switch(b&&b.length>0&&(y=h.h,y.i=y.i.concat(b)),F){case 1:Qi(h,5);break;case 4:Qi(h,10);break;case 3:Qi(h,6);break;default:Qi(h,2)}}}function Au(h,y){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*y}function Qi(h,y){if(h.j.info("Error code "+y),y==2){var b=_(h.bb,h),N=h.Ua;const F=!N;N=new qn(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ln(N,"https"),ra(N),F?Ei(N.toString(),b):Io(N.toString(),b)}else St(2);h.I=0,h.l&&h.l.pa(y),Su(h),ll(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Su(h){if(h.I=0,h.ja=[],h.l){const y=Ao(h.h);(y.length!=0||h.i.length!=0)&&(z(h.ja,y),z(h.ja,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.oa()}}function Cu(h,y,b){var N=b instanceof qn?Ft(b):new qn(b);if(N.g!="")y&&(N.g=y+"."+N.g),Qs(N,N.u);else{var F=d.location;N=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const Q=new qn(null);N&&ln(Q,N),y&&(Q.g=y),F&&Qs(Q,F),b&&(Q.h=b),N=Q}return b=h.G,y=h.wa,b&&y&&at(N,b,y),at(N,"VER",h.ka),ha(h,N),N}function Ru(h,y,b){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new ct(new Fi({ab:b})):new ct(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}i=ju.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function tr(){}tr.prototype.g=function(h,y){return new wn(h,y)};function wn(h,y){mt.call(this),this.g=new Zs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ms(this)}x(wn,mt),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){ko(this.g)},wn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=Mi(h),h=b);y.i.push(new qt(y.Ya++,h)),y.I==3&&Ki(y)},wn.prototype.N=function(){this.g.l=null,delete this.j,ko(this.g),delete this.g,wn.Z.N.call(this)};function Iu(h){rt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}x(Iu,rt);function Du(){Cn.call(this),this.status=1}x(Du,Cn);function ms(h){this.g=h}x(ms,ju),ms.prototype.ra=function(){pt(this.g,"a")},ms.prototype.qa=function(h){pt(this.g,new Iu(h))},ms.prototype.pa=function(h){pt(this.g,new Du)},ms.prototype.oa=function(){pt(this.g,"b")},tr.prototype.createWebChannel=tr.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,G1=function(){return new tr},H1=function(){return Ks()},F1=wt,Mp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Rn.NO_ERROR=0,Rn.TIMEOUT=8,Rn.HTTP_ERROR=6,ed=Rn,ia.COMPLETE="complete",q1=ia,Ja.EventType=At,At.OPEN="a",At.CLOSE="b",At.ERROR="c",At.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Ac=Ja,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,B1=ct}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});let En=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");let po="12.8.0";function qR(i){po=i}const Ua=new lg("@firebase/firestore");function Fl(){return Ua.logLevel}function me(i,...e){if(Ua.logLevel<=He.DEBUG){const n=e.map(yg);Ua.debug(`Firestore (${po}): ${i}`,...n)}}function Ls(i,...e){if(Ua.logLevel<=He.ERROR){const n=e.map(yg);Ua.error(`Firestore (${po}): ${i}`,...n)}}function za(i,...e){if(Ua.logLevel<=He.WARN){const n=e.map(yg);Ua.warn(`Firestore (${po}): ${i}`,...n)}}function yg(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Se(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,K1(i,r,n)}function K1(i,e,n){let r=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ls(r),new Error(r)}function st(i,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,i||K1(e,l,r)}function Ie(i,e){return i}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ks{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Q1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class FR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class HR{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let r=this.i;const l=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ks,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ks)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new Q1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class GR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class KR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new GR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const r=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $R(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}class Od{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=$R(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=e.charAt(l[u]%62))}return r}}function Ge(i,e){return i<e?-1:i>e?1:0}function Pp(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const l=i.charAt(r),u=e.charAt(r);if(l!==u)return up(l)===up(u)?Ge(l,u):up(l)?1:-1}return Ge(i.length,e.length)}const YR=55296,XR=57343;function up(i){const e=i.charCodeAt(0);return e>=YR&&e<=XR}function to(i,e,n){return i.length===e.length&&i.every(((r,l)=>n(r,e[l])))}const vb="__name__";class es{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const u=es.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Ge(e.length,n.length)}static compareSegments(e,n){const r=es.isNumericId(e),l=es.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?es.extractNumericId(e).compare(es.extractNumericId(n)):Pp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Lr.fromString(e.substring(4,e.length-2))}}class gt extends es{construct(e,n,r){return new gt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new gt(n)}static emptyPath(){return new gt([])}}const WR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends es{construct(e,n,r){return new un(e,n,r)}static isValidIdentifier(e){return WR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vb}static keyField(){return new un([vb])}static fromServerFormat(e){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(r+=p,l++):(u(),l++)}if(u(),d)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(gt.fromString(e))}static fromName(e){return new be(gt.fromString(e).popFirst(5))}static empty(){return new be(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new gt(e.slice()))}}function Y1(i,e,n){if(!n)throw new fe(te.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function X1(i,e,n,r){if(e===!0&&r===!0)throw new fe(te.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function bb(i){if(!be.isDocumentKey(i))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Eb(i){if(be.isDocumentKey(i))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function W1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function kd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Se(12329,{type:typeof i})}function ei(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kd(i);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function JR(i,e){if(e<=0)throw new fe(te.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function Xt(i,e){const n={typeString:i};return e&&(n.value=e),n}function nu(i,e){if(!W1(i))throw new fe(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const d=i[r];if(l&&typeof d!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new fe(te.INVALID_ARGUMENT,n);return!0}const xb=-62135596800,Tb=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Tb);return new _t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xb)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tb}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nu(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Xt("string",_t._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new _t(0,0))}static max(){return new Ce(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const qc=-1;function ZR(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,l=Ce.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new Br(l,be.empty(),e)}function ej(i){return new Br(i.readTime,i.key,qc)}class Br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Br(Ce.min(),be.empty(),qc)}static max(){return new Br(Ce.max(),be.empty(),qc)}}function tj(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(i.documentKey,e.documentKey),n!==0?n:Ge(i.largestBatchId,e.largestBatchId))}const nj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ij{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function go(i){if(i.code!==te.FAILED_PRECONDITION||i.message!==nj)throw i;me("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,r)=>{n(e)}))}static reject(e){return new se(((n,r)=>{r(e)}))}static waitFor(e){return new se(((n,r)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&n()}),(g=>r(g)))})),d=!0,u===l&&n()}))}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next((l=>l?se.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(e,n){return new se(((r,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const _=g;n(e[_]).next((E=>{d[_]=E,++p,p===u&&r(d)}),(E=>l(E)))}}))}static doWhile(e,n){return new se(((r,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):r()};u()}))}}function sj(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _o(i){return i.name==="IndexedDbTransactionError"}class Md{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Md.ce=-1;const vg=-1;function Pd(i){return i==null}function md(i){return i===0&&1/i==-1/0}function rj(i){return typeof i=="number"&&Number.isInteger(i)&&!md(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const J1="";function aj(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=wb(e)),e=lj(i.get(n),e);return wb(e)}function lj(i,e){let n=e;const r=i.length;for(let l=0;l<r;l++){const u=i.charAt(l);switch(u){case"\0":n+="";break;case J1:n+="";break;default:n+=u}}return n}function wb(i){return i+J1+""}function Nb(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Jr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Z1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Nt{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??_n.RED,this.left=l??_n.EMPTY,this.right=u??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,u){return new _n(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return _n.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,l,u){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ab(this.data.getIterator())}getIteratorFrom(e){return new Ab(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class Ab{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Jn{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new tn(un.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class ex extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new ex("Invalid base64 string: "+u):u}})(e);return new hn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const oj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(i){if(st(!!i,39018),typeof i=="string"){let e=0;const n=oj.exec(i);if(st(!!n,46558,{timestamp:i}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(i.seconds),nanos:Vt(i.nanos)}}function Vt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Fr(i){return typeof i=="string"?hn.fromBase64String(i):hn.fromUint8Array(i)}const tx="server_timestamp",nx="__type__",ix="__previous_value__",sx="__local_write_time__";function bg(i){return(i?.mapValue?.fields||{})[nx]?.stringValue===tx}function Vd(i){const e=i.mapValue.fields[ix];return bg(e)?Vd(e):e}function Fc(i){const e=qr(i.mapValue.fields[sx].timestampValue);return new _t(e.seconds,e.nanos)}class cj{constructor(e,n,r,l,u,d,p,g,_,E,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E,this.apiKey=x}}const pd="(default)";class no{constructor(e,n){this.projectId=e,this.database=n||pd}static empty(){return new no("","")}get isDefaultDatabase(){return this.database===pd}isEqual(e){return e instanceof no&&e.projectId===this.projectId&&e.database===this.database}}function uj(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new no(i.options.projectId,e)}const rx="__type__",hj="__max__",Uh={mapValue:{}},ax="__vector__",gd="value";function Hr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?bg(i)?4:fj(i)?9007199254740991:dj(i)?10:11:Se(28295,{value:i})}function os(i,e){if(i===e)return!0;const n=Hr(i);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Fc(i).isEqual(Fc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=qr(l.timestampValue),p=qr(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(l,u){return Fr(l.bytesValue).isEqual(Fr(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(l,u){return Vt(l.geoPointValue.latitude)===Vt(u.geoPointValue.latitude)&&Vt(l.geoPointValue.longitude)===Vt(u.geoPointValue.longitude)})(i,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Vt(l.integerValue)===Vt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=Vt(l.doubleValue),p=Vt(u.doubleValue);return d===p?md(d)===md(p):isNaN(d)&&isNaN(p)}return!1})(i,e);case 9:return to(i.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(Nb(d)!==Nb(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!os(d[g],p[g])))return!1;return!0})(i,e);default:return Se(52216,{left:i})}}function Hc(i,e){return(i.values||[]).find((n=>os(n,e)))!==void 0}function io(i,e){if(i===e)return 0;const n=Hr(i),r=Hr(e);if(n!==r)return Ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(i.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=Vt(u.integerValue||u.doubleValue),g=Vt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(i,e);case 3:return Sb(i.timestampValue,e.timestampValue);case 4:return Sb(Fc(i),Fc(e));case 5:return Pp(i.stringValue,e.stringValue);case 6:return(function(u,d){const p=Fr(u),g=Fr(d);return p.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let _=0;_<p.length&&_<g.length;_++){const E=Ge(p[_],g[_]);if(E!==0)return E}return Ge(p.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=Ge(Vt(u.latitude),Vt(d.latitude));return p!==0?p:Ge(Vt(u.longitude),Vt(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Cb(i.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},_=p[gd]?.arrayValue,E=g[gd]?.arrayValue,x=Ge(_?.values?.length||0,E?.values?.length||0);return x!==0?x:Cb(_,E)})(i.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Uh.mapValue&&d===Uh.mapValue)return 0;if(u===Uh.mapValue)return 1;if(d===Uh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),_=d.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let x=0;x<g.length&&x<E.length;++x){const w=Pp(g[x],E[x]);if(w!==0)return w;const j=io(p[g[x]],_[E[x]]);if(j!==0)return j}return Ge(g.length,E.length)})(i.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function Sb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ge(i,e);const n=qr(i),r=qr(e),l=Ge(n.seconds,r.seconds);return l!==0?l:Ge(n.nanos,r.nanos)}function Cb(i,e){const n=i.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=io(n[l],r[l]);if(u)return u}return Ge(n.length,r.length)}function so(i){return Vp(i)}function Vp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=qr(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Fr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return be.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=Vp(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const d of r)u?u=!1:l+=",",l+=`${d}:${Vp(n.fields[d])}`;return l+"}"})(i.mapValue):Se(61005,{value:i})}function td(i){switch(Hr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vd(i);return e?16+td(e):16;case 5:return 2*i.stringValue.length;case 6:return Fr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+td(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let l=0;return Jr(r.fields,((u,d)=>{l+=u.length+td(d)})),l})(i.mapValue);default:throw Se(13486,{value:i})}}function Rb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Lp(i){return!!i&&"integerValue"in i}function Eg(i){return!!i&&"arrayValue"in i}function jb(i){return!!i&&"nullValue"in i}function Ib(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function nd(i){return!!i&&"mapValue"in i}function dj(i){return(i?.mapValue?.fields||{})[rx]?.stringValue===ax}function Dc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Jr(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Dc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dc(i.arrayValue.values[n]);return e}return{...i}}function fj(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===hj}class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(n)}setAll(e){let n=un.emptyPath(),r={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,l),r={},l=[],n=p.popLast()}d?r[p.lastSegment()]=Dc(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(e){const n=this.field(e.popLast());nd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];nd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Jr(n,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new Un(Dc(this.value))}}function lx(i){const e=[];return Jr(i.fields,((n,r)=>{const l=new un([n]);if(nd(r)){const u=lx(r.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new Jn(e)}class xn{constructor(e,n,r,l,u,d,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new xn(e,0,Ce.min(),Ce.min(),Ce.min(),Un.empty(),0)}static newFoundDocument(e,n,r,l){return new xn(e,1,n,Ce.min(),r,l,0)}static newNoDocument(e,n){return new xn(e,2,n,Ce.min(),Ce.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,Ce.min(),Ce.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _d{constructor(e,n){this.position=e,this.inclusive=n}}function Db(i,e,n){let r=0;for(let l=0;l<i.position.length;l++){const u=e[l],d=i.position[l];if(u.field.isKeyField()?r=be.comparator(be.fromName(d.referenceValue),n.key):r=io(d,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ob(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!os(i.position[n],e.position[n]))return!1;return!0}class Gc{constructor(e,n="asc"){this.field=e,this.dir=n}}function mj(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ox{}class Yt extends ox{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gj(e,n,r):n==="array-contains"?new vj(e,r):n==="in"?new bj(e,r):n==="not-in"?new Ej(e,r):n==="array-contains-any"?new xj(e,r):new Yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _j(e,r):new yj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(io(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends ox{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Di(e,n)}matches(e){return cx(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cx(i){return i.op==="and"}function ux(i){return pj(i)&&cx(i)}function pj(i){for(const e of i.filters)if(e instanceof Di)return!1;return!0}function Up(i){if(i instanceof Yt)return i.field.canonicalString()+i.op.toString()+so(i.value);if(ux(i))return i.filters.map((e=>Up(e))).join(",");{const e=i.filters.map((n=>Up(n))).join(",");return`${i.op}(${e})`}}function hx(i,e){return i instanceof Yt?(function(r,l){return l instanceof Yt&&r.op===l.op&&r.field.isEqual(l.field)&&os(r.value,l.value)})(i,e):i instanceof Di?(function(r,l){return l instanceof Di&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,d,p)=>u&&hx(d,l.filters[p])),!0):!1})(i,e):void Se(19439)}function dx(i){return i instanceof Yt?(function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`})(i):i instanceof Di?(function(n){return n.op.toString()+" {"+n.getFilters().map(dx).join(" ,")+"}"})(i):"Filter"}class gj extends Yt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class _j extends Yt{constructor(e,n){super(e,"in",n),this.keys=fx("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yj extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=fx("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function fx(i,e){return(e.arrayValue?.values||[]).map((n=>be.fromName(n.referenceValue)))}class vj extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eg(n)&&Hc(n.arrayValue,this.value)}}class bj extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hc(this.value.arrayValue,n)}}class Ej extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hc(this.value.arrayValue,n)}}class xj extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Hc(this.value.arrayValue,r)))}}class Tj{constructor(e,n=null,r=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function kb(i,e=null,n=[],r=[],l=null,u=null,d=null){return new Tj(i,e,n,r,l,u,d)}function xg(i){const e=Ie(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Up(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Pd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>so(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>so(r))).join(",")),e.Te=n}return e.Te}function Tg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!mj(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!hx(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ob(i.startAt,e.startAt)&&Ob(i.endAt,e.endAt)}function zp(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class yo{constructor(e,n=null,r=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function wj(i,e,n,r,l,u,d,p){return new yo(i,e,n,r,l,u,d,p)}function wg(i){return new yo(i)}function Mb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Nj(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function mx(i){return i.collectionGroup!==null}function Oc(i){const e=Ie(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new tn(un.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(p=p.add(_.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Gc(u,r))})),n.has(un.keyField().canonicalString())||e.Ie.push(new Gc(un.keyField(),r))}return e.Ie}function rs(i){const e=Ie(i);return e.Ee||(e.Ee=Aj(e,Oc(i))),e.Ee}function Aj(i,e){if(i.limitType==="F")return kb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Gc(l.field,u)}));const n=i.endAt?new _d(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new _d(i.startAt.position,i.startAt.inclusive):null;return kb(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Bp(i,e){const n=i.filters.concat([e]);return new yo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Sj(i,e){const n=i.explicitOrderBy.concat([e]);return new yo(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function yd(i,e,n){return new yo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Ld(i,e){return Tg(rs(i),rs(e))&&i.limitType===e.limitType}function px(i){return`${xg(rs(i))}|lt:${i.limitType}`}function Hl(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>dx(l))).join(", ")}]`),Pd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>so(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>so(l))).join(",")),`Target(${r})`})(rs(i))}; limitType=${i.limitType})`}function Ud(i,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):be.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,l){for(const u of Oc(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(i,e)&&(function(r,l){return!(r.startAt&&!(function(d,p,g){const _=Db(d,p,g);return d.inclusive?_<=0:_<0})(r.startAt,Oc(r),l)||r.endAt&&!(function(d,p,g){const _=Db(d,p,g);return d.inclusive?_>=0:_>0})(r.endAt,Oc(r),l))})(i,e)}function Cj(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function gx(i){return(e,n)=>{let r=!1;for(const l of Oc(i)){const u=Rj(l,e,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function Rj(i,e,n){const r=i.field.isKeyField()?be.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),_=p.data.field(u);return g!==null&&_!==null?io(g,_):Se(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:i.dir})}}class Qa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,((n,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return Z1(this.inner)}size(){return this.innerSize}}const jj=new Nt(be.comparator);function Us(){return jj}const _x=new Nt(be.comparator);function Sc(...i){let e=_x;for(const n of i)e=e.insert(n.key,n);return e}function yx(i){let e=_x;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ia(){return kc()}function vx(){return kc()}function kc(){return new Qa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const Ij=new Nt(be.comparator),Dj=new tn(be.comparator);function Ke(...i){let e=Dj;for(const n of i)e=e.add(n);return e}const Oj=new tn(Ge);function kj(){return Oj}function Ng(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function bx(i){return{integerValue:""+i}}function Mj(i,e){return rj(e)?bx(e):Ng(i,e)}class zd{constructor(){this._=void 0}}function Pj(i,e,n){return i instanceof Kc?(function(l,u){const d={fields:{[nx]:{stringValue:tx},[sx]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&bg(u)&&(u=Vd(u)),u&&(d.fields[ix]=u),{mapValue:d}})(n,e):i instanceof Qc?xx(i,e):i instanceof $c?Tx(i,e):(function(l,u){const d=Ex(l,u),p=Pb(d)+Pb(l.Ae);return Lp(d)&&Lp(l.Ae)?bx(p):Ng(l.serializer,p)})(i,e)}function Vj(i,e,n){return i instanceof Qc?xx(i,e):i instanceof $c?Tx(i,e):n}function Ex(i,e){return i instanceof vd?(function(r){return Lp(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Kc extends zd{}class Qc extends zd{constructor(e){super(),this.elements=e}}function xx(i,e){const n=wx(e);for(const r of i.elements)n.some((l=>os(l,r)))||n.push(r);return{arrayValue:{values:n}}}class $c extends zd{constructor(e){super(),this.elements=e}}function Tx(i,e){let n=wx(e);for(const r of i.elements)n=n.filter((l=>!os(l,r)));return{arrayValue:{values:n}}}class vd extends zd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Pb(i){return Vt(i.integerValue||i.doubleValue)}function wx(i){return Eg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Lj{constructor(e,n){this.field=e,this.transform=n}}function Uj(i,e){return i.field.isEqual(e.field)&&(function(r,l){return r instanceof Qc&&l instanceof Qc||r instanceof $c&&l instanceof $c?to(r.elements,l.elements,os):r instanceof vd&&l instanceof vd?os(r.Ae,l.Ae):r instanceof Kc&&l instanceof Kc})(i.transform,e.transform)}class zj{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function id(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Bd{}function Nx(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new qd(i.key,Sn.none()):new iu(i.key,i.data,Sn.none());{const n=i.data,r=Un.empty();let l=new tn(un.comparator);for(let u of e.fields)if(!l.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?r.delete(u):r.set(u,d),l=l.add(u)}return new Zr(i.key,r,new Jn(l.toArray()),Sn.none())}}function Bj(i,e,n){i instanceof iu?(function(l,u,d){const p=l.value.clone(),g=Lb(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,n):i instanceof Zr?(function(l,u,d){if(!id(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=Lb(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(Ax(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Mc(i,e,n,r){return i instanceof iu?(function(u,d,p,g){if(!id(u.precondition,d))return p;const _=u.value.clone(),E=Ub(u.fieldTransforms,g,d);return _.setAll(E),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(i,e,n,r):i instanceof Zr?(function(u,d,p,g){if(!id(u.precondition,d))return p;const _=Ub(u.fieldTransforms,g,d),E=d.data;return E.setAll(Ax(u)),E.setAll(_),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(i,e,n,r):(function(u,d,p){return id(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(i,e,n)}function qj(i,e){let n=null;for(const r of i.fieldTransforms){const l=e.data.field(r.field),u=Ex(r.transform,l||null);u!=null&&(n===null&&(n=Un.empty()),n.set(r.field,u))}return n||null}function Vb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&to(r,l,((u,d)=>Uj(u,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class iu extends Bd{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zr extends Bd{constructor(e,n,r,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ax(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function Lb(i,e,n){const r=new Map;st(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let l=0;l<n.length;l++){const u=i[l],d=u.transform,p=e.data.field(u.field);r.set(u.field,Vj(d,p,n[l]))}return r}function Ub(i,e,n){const r=new Map;for(const l of i){const u=l.transform,d=n.data.field(l.field);r.set(l.field,Pj(u,d,e))}return r}class qd extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fj extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hj{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&Bj(u,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vx();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(l.key)?null:p;const g=Nx(d,p);g!==null&&r.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,((n,r)=>Vb(n,r)))&&to(this.baseMutations,e.baseMutations,((n,r)=>Vb(n,r)))}}class Ag{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){st(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return Ij})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,r[d].version);return new Ag(e,n,r,l)}}class Gj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Kj{constructor(e,n){this.count=e,this.unchangedNames=n}}var $t,Xe;function Qj(i){switch(i){case te.OK:return Se(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Se(15467,{code:i})}}function Sx(i){if(i===void 0)return Ls("GRPC error has no .code"),te.UNKNOWN;switch(i){case $t.OK:return te.OK;case $t.CANCELLED:return te.CANCELLED;case $t.UNKNOWN:return te.UNKNOWN;case $t.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case $t.INTERNAL:return te.INTERNAL;case $t.UNAVAILABLE:return te.UNAVAILABLE;case $t.UNAUTHENTICATED:return te.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case $t.NOT_FOUND:return te.NOT_FOUND;case $t.ALREADY_EXISTS:return te.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return te.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case $t.ABORTED:return te.ABORTED;case $t.OUT_OF_RANGE:return te.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return te.UNIMPLEMENTED;case $t.DATA_LOSS:return te.DATA_LOSS;default:return Se(39323,{code:i})}}(Xe=$t||($t={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function $j(){return new TextEncoder}const Yj=new Lr([4294967295,4294967295],0);function zb(i){const e=$j().encode(i),n=new z1;return n.update(e),new Uint8Array(n.digest())}function Bb(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Lr([n,r],0),new Lr([l,u],0)]}class Sg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cc(`Invalid padding: ${n}`);if(r<0)throw new Cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Lr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(Lr.fromNumber(r)));return l.compare(Yj)===1&&(l=new Lr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zb(e),[r,l]=Bb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,l,u);if(!this.we(d))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Sg(u,l,n);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=zb(e),[r,l]=Bb(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,l,u);this.be(d)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fd{constructor(e,n,r,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fd(Ce.min(),l,new Nt(Ge),Us(),Ke())}}class su{constructor(e,n,r,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new su(r,n,Ke(),Ke(),Ke())}}class sd{constructor(e,n,r,l){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=l}}class Cx{constructor(e,n){this.targetId=e,this.Ce=n}}class Rx{constructor(e,n,r=hn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class qb{constructor(){this.ve=0,this.Fe=Fb(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),n=Ke(),r=Ke();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:Se(38017,{changeType:u})}})),new su(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Fb()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Xj{constructor(e){this.Ge=e,this.ze=new Map,this.je=Us(),this.He=zh(),this.Je=zh(),this.Ze=new Nt(Ge)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(zp(u))if(r===0){const d=new be(u.path);this.et(n,d,xn.newNoDocument(d,Ce.min()))}else st(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let d,p;try{d=Fr(r).toUint8Array()}catch(g){if(g instanceof ex)return za("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Sg(d,l,u)}catch(g){return za(g instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&zp(p.target)){const g=new be(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,xn.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let r=Ke();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new Fd(e,n,this.Ze,this.je,r);return this.je=Us(),this.He=zh(),this.Je=zh(),this.Ze=new Nt(Ge),l}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new qb,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new tn(Ge),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new tn(Ge),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zh(){return new Nt(be.comparator)}function Fb(){return new Nt(be.comparator)}const Wj={asc:"ASCENDING",desc:"DESCENDING"},Jj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zj={and:"AND",or:"OR"};class eI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qp(i,e){return i.useProto3Json||Pd(e)?e:{value:e}}function bd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jx(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function tI(i,e){return bd(i,e.toTimestamp())}function as(i){return st(!!i,49232),Ce.fromTimestamp((function(n){const r=qr(n);return new _t(r.seconds,r.nanos)})(i))}function Cg(i,e){return Fp(i,e).canonicalString()}function Fp(i,e){const n=(function(l){return new gt(["projects",l.projectId,"databases",l.database])})(i).child("documents");return e===void 0?n:n.child(e)}function Ix(i){const e=gt.fromString(i);return st(Px(e),10190,{key:e.toString()}),e}function Hp(i,e){return Cg(i.databaseId,e.path)}function hp(i,e){const n=Ix(e);if(n.get(1)!==i.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new be(Ox(n))}function Dx(i,e){return Cg(i.databaseId,e)}function nI(i){const e=Ix(i);return e.length===4?gt.emptyPath():Ox(e)}function Gp(i){return new gt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ox(i){return st(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Hb(i,e,n){return{name:Hp(i,e),fields:n.value.mapValue.fields}}function iI(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Se(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(_,E){return _.useProto3Json?(st(E===void 0||typeof E=="string",58123),hn.fromBase64String(E||"")):(st(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),hn.fromUint8Array(E||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(_){const E=_.code===void 0?te.UNKNOWN:Sx(_.code);return new fe(E,_.message||"")})(d);n=new Rx(r,l,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=hp(i,r.document.name),u=as(r.document.updateTime),d=r.document.createTime?as(r.document.createTime):Ce.min(),p=new Un({mapValue:{fields:r.document.fields}}),g=xn.newFoundDocument(l,u,d,p),_=r.targetIds||[],E=r.removedTargetIds||[];n=new sd(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=hp(i,r.document),u=r.readTime?as(r.readTime):Ce.min(),d=xn.newNoDocument(l,u),p=r.removedTargetIds||[];n=new sd([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=hp(i,r.document),u=r.removedTargetIds||[];n=new sd([],u,l,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,d=new Kj(l,u),p=r.targetId;n=new Cx(p,d)}}return n}function sI(i,e){let n;if(e instanceof iu)n={update:Hb(i,e.key,e.value)};else if(e instanceof qd)n={delete:Hp(i,e.key)};else if(e instanceof Zr)n={update:Hb(i,e.key,e.data),updateMask:fI(e.fieldMask)};else{if(!(e instanceof Fj))return Se(16599,{dt:e.type});n={verify:Hp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,d){const p=d.transform;if(p instanceof Kc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Qc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof $c)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof vd)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Se(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:tI(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Se(27497)})(i,e.precondition)),n}function rI(i,e){return i&&i.length>0?(st(e!==void 0,14353),i.map((n=>(function(l,u){let d=l.updateTime?as(l.updateTime):as(u);return d.isEqual(Ce.min())&&(d=as(u)),new zj(d,l.transformResults||[])})(n,e)))):[]}function aI(i,e){return{documents:[Dx(i,e.path)]}}function lI(i,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Dx(i,l);const u=(function(_){if(_.length!==0)return Mx(Di.create(_,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(_){if(_.length!==0)return _.map((E=>(function(w){return{field:Gl(w.field),direction:uI(w.dir)}})(E)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=qp(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:l}}function oI(i){let e=nI(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){st(r===1,65062);const E=n.from[0];E.allDescendants?l=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(x){const w=kx(x);return w instanceof Di&&ux(w)?w.getFilters():[w]})(n.where));let d=[];n.orderBy&&(d=(function(x){return x.map((w=>(function(z){return new Gc(Kl(z.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(w)))})(n.orderBy));let p=null;n.limit&&(p=(function(x){let w;return w=typeof x=="object"?x.value:x,Pd(w)?null:w})(n.limit));let g=null;n.startAt&&(g=(function(x){const w=!!x.before,j=x.values||[];return new _d(j,w)})(n.startAt));let _=null;return n.endAt&&(_=(function(x){const w=!x.before,j=x.values||[];return new _d(j,w)})(n.endAt)),wj(e,l,d,u,p,"F",g,_)}function cI(i,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kx(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kl(n.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Kl(n.unaryFilter.field);return Yt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Kl(n.unaryFilter.field);return Yt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Kl(n.unaryFilter.field);return Yt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Yt.create(Kl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Di.create(n.compositeFilter.filters.map((r=>kx(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(i):Se(30097,{filter:i})}function uI(i){return Wj[i]}function hI(i){return Jj[i]}function dI(i){return Zj[i]}function Gl(i){return{fieldPath:i.canonicalString()}}function Kl(i){return un.fromServerFormat(i.fieldPath)}function Mx(i){return i instanceof Yt?(function(n){if(n.op==="=="){if(Ib(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(jb(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ib(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(jb(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:hI(n.op),value:n.value}}})(i):i instanceof Di?(function(n){const r=n.getFilters().map((l=>Mx(l)));return r.length===1?r[0]:{compositeFilter:{op:dI(n.op),filters:r}}})(i):Se(54877,{filter:i})}function fI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Px(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function Vx(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class kr{constructor(e,n,r,l,u=Ce.min(),d=Ce.min(),p=hn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mI{constructor(e){this.yt=e}}function pI(i){const e=oI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?yd(e,e.limit,"L"):e}class gI{constructor(){this.Sn=new _I}addToCollectionParentIndex(e,n){return this.Sn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Br.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class _I{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new tn(gt.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new tn(gt.comparator)).toArray()}}const Gb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lx=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(Lx,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class ro{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ro(0)}static ar(){return new ro(-1)}}const Kb="LruGarbageCollector",yI=1048576;function Qb([i,e],[n,r]){const l=Ge(i,n);return l===0?Ge(e,r):l}class vI{constructor(e){this.Pr=e,this.buffer=new tn(Qb),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Qb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(Kb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_o(n)?me(Kb,"Ignoring IndexedDB error during garbage collection: ",n):await go(n)}await this.Ar(3e5)}))}}class EI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Md.ce);const r=new vI(n);return this.Vr.forEachTarget(e,(l=>r.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>r.Er(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Gb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gb):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,l,u,d,p,g,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),l=this.params.maximumSequenceNumbersToCollect):l=x,d=Date.now(),this.nthSequenceNumber(e,l)))).next((x=>(r=x,p=Date.now(),this.removeTargets(e,r,n)))).next((x=>(u=x,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(_=Date.now(),Fl()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${x} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:x}))))}}function xI(i,e){return new EI(i,e)}class TI{constructor(){this.changes=new Qa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class NI{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&Mc(r.mutation,l,Jn.empty(),_t.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ke()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ke()){const l=Ia();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((u=>{let d=Sc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=Ia();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ke())))}populateOverlays(e,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,r,l){let u=Us();const d=kc(),p=(function(){return kc()})();return n.forEach(((g,_)=>{const E=r.get(_.key);l.has(_.key)&&(E===void 0||E.mutation instanceof Zr)?u=u.insert(_.key,_):E!==void 0?(d.set(_.key,E.mutation.getFieldMask()),Mc(E.mutation,_,E.mutation.getFieldMask(),_t.now())):d.set(_.key,Jn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((_,E)=>d.set(_,E))),n.forEach(((_,E)=>p.set(_,new wI(E,d.get(_)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=kc();let l=new Nt(((d,p)=>d-p)),u=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const _=n.get(g);if(_===null)return;let E=r.get(g)||Jn.empty();E=p.applyToLocalView(_,E),r.set(g,E);const x=(l.get(p.batchId)||Ke()).add(g);l=l.insert(p.batchId,x)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),_=g.key,E=g.value,x=vx();E.forEach((w=>{if(!u.has(w)){const j=Nx(n.get(w),r.get(w));j!==null&&x.set(w,j),u=u.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,x))}return se.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return Nj(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-u.size):se.resolve(Ia());let p=qc,g=u;return d.next((_=>se.forEach(_,((E,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),u.get(E)?se.resolve():this.remoteDocumentCache.getEntry(e,E).next((w=>{g=g.insert(E,w)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,g,_,Ke()))).next((E=>({batchId:p,changes:yx(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((r=>{let l=Sc();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const u=n.collectionGroup;let d=Sc();return this.indexManager.getCollectionParents(e,u).next((p=>se.forEach(p,(g=>{const _=(function(x,w){return new yo(w,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,r,l).next((E=>{E.forEach(((x,w)=>{d=d.insert(x,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,l)))).next((d=>{u.forEach(((g,_)=>{const E=_.getKey();d.get(E)===null&&(d=d.insert(E,xn.newInvalidDocument(E)))}));let p=Sc();return d.forEach(((g,_)=>{const E=u.get(g);E!==void 0&&Mc(E.mutation,_,Jn.empty(),_t.now()),Ud(n,_)&&(p=p.insert(g,_))})),p}))}}class AI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return se.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:as(l.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:pI(l.bundledQuery),readTime:as(l.readTime)}})(n)),se.resolve()}}class SI{constructor(){this.overlays=new Nt(be.comparator),this.Lr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ia();return se.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,u)=>{this.bt(e,n,u)})),se.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.Lr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const l=Ia(),u=n.length+1,d=new be(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>r&&l.set(g.getKey(),g)}return se.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let u=new Nt(((_,E)=>_-E));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let E=u.get(_.largestBatchId);E===null&&(E=Ia(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const p=Ia(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,E)=>p.set(_,E))),!(p.size()>=l)););return se.resolve(p)}bt(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(r.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Gj(n,r));let u=this.Lr.get(n);u===void 0&&(u=Ke(),this.Lr.set(n,u)),this.Lr.set(n,u.add(r.key))}}class CI{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}class Rg{constructor(){this.kr=new tn(cn.Kr),this.qr=new tn(cn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new cn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new cn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new be(new gt([])),r=new cn(n,e),l=new cn(n,e+1),u=[];return this.qr.forEachInRange([r,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new be(new gt([])),r=new cn(n,e),l=new cn(n,e+1);let u=Ke();return this.qr.forEachInRange([r,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new cn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class cn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return be.comparator(e.key,n.key)||Ge(e.Hr,n.Hr)}static Ur(e,n){return Ge(e.Hr,n.Hr)||be.comparator(e.key,n.key)}}class RI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new tn(cn.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Hj(u,n,r,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new cn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,n){return se.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.Xr(r),u=l<0?0:l;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?vg:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new cn(n,0),l=new cn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tn(Ge);return n.forEach((l=>{const u=new cn(l,0),d=new cn(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{r=r.add(p.Hr)}))})),se.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let u=r;be.isDocumentKey(u)||(u=u.child(""));const d=new cn(new be(u),0);let p=new tn(Ge);return this.Jr.forEachWhile((g=>{const _=g.key.path;return!!r.isPrefixOf(_)&&(_.length===l&&(p=p.add(g.Hr)),!0)}),d),se.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((r=>{const l=this.Zr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){st(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return se.forEach(n.mutations,(l=>{const u=new cn(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new cn(n,0),l=this.Jr.firstAfterOrEqual(r);return se.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class jI{constructor(e){this.ti=e,this.docs=(function(){return new Nt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,d=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let r=Us();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():xn.newInvalidDocument(l))})),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let u=Us();const d=n.path,p=new be(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||tj(ej(E),r)<=0||(l.has(E.key)||Ud(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,n,r,l){Se(9500)}ni(e,n){return se.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new II(this)}getSize(e){return se.resolve(this.size)}}class II extends TI{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(r)})),se.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class DI{constructor(e){this.persistence=e,this.ri=new Qa((n=>xg(n)),Tg),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new Rg,this.targetCount=0,this.oi=ro._r()}forEachTarget(e,n){return this.ri.forEach(((r,l)=>n(l))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),se.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ro(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.lr(n),se.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),se.waitFor(u).next((()=>l))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),se.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.si.containsKey(n))}}class Ux{constructor(e,n){this._i={},this.overlays={},this.ai=new Md(0),this.ui=!1,this.ui=!0,this.ci=new CI,this.referenceDelegate=e(this),this.li=new DI(this),this.indexManager=new gI,this.remoteDocumentCache=(function(l){return new jI(l)})((r=>this.referenceDelegate.hi(r))),this.serializer=new mI(n),this.Pi=new AI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new RI(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const l=new OI(this.ai.next());return this.referenceDelegate.Ti(),r(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return se.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class OI extends ij{constructor(e){super(),this.currentSequenceNumber=e}}class jg{constructor(e){this.persistence=e,this.Ri=new Rg,this.Ai=null}static Vi(e){return new jg(e)}get di(){if(this.Ai)return this.Ai;throw Se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(r=>{const l=be.fromPath(r);return this.mi(e,l).next((u=>{u||n.removeEntry(l,Ce.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ed{constructor(e,n){this.persistence=e,this.fi=new Qa((r=>aj(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=xI(this,n)}static Vi(e,n){return new Ed(e,n)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return se.forEach(this.fi,((r,l)=>this.wr(e,r,l).next((u=>u?se.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(r++,u.removeEntry(d,Ce.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),se.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=td(e.data.value)),n}wr(e,n,r){return se.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return se.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ig{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=l}static Es(e,n){let r=Ke(),l=Ke();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Ig(e,n.fromCache,r,l)}}class kI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class MI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return lS()?8:sj(Tn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,l,r).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new kI;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,r,l){return r.documentReadCount<this.Vs?(Fl()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(Fl()<=He.DEBUG&&me("QueryEngine","Query:",Hl(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.ds*l?(Fl()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(n))):se.resolve())}gs(e,n){if(Mb(n))return se.resolve(null);let r=rs(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=yd(n,null,"F"),r=rs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const d=Ke(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const _=this.bs(n,p);return this.Ss(n,_,d,g.readTime)?this.gs(e,yd(n,null,"F")):this.Ds(e,_,n,g)}))))})))))}ps(e,n,r,l){return Mb(n)||l.isEqual(Ce.min())?se.resolve(null):this.fs.getDocuments(e,r).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,r,l)?se.resolve(null):(Fl()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Hl(n)),this.Ds(e,d,n,ZR(l,qc)).next((p=>p)))}))}bs(e,n){let r=new tn(gx(e));return n.forEach(((l,u)=>{Ud(e,u)&&(r=r.add(u))})),r}Ss(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,r){return Fl()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.fs.getDocumentsMatchingQuery(e,n,Br.min(),r)}Ds(e,n,r,l){return this.fs.getDocumentsMatchingQuery(e,r,l).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Dg="LocalStore",PI=3e8;class VI{constructor(e,n,r,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new Nt(Ge),this.Fs=new Qa((u=>xg(u)),Tg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function LI(i,e,n,r){return new VI(i,e,n,r)}async function zx(i,e){const n=Ie(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const d=[],p=[];let g=Ke();for(const _ of l){d.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){p.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(r,g).next((_=>({Ns:_,removedBatchIds:d,addedBatchIds:p})))}))}))}function UI(i,e){const n=Ie(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,_,E){const x=_.batch,w=x.keys();let j=se.resolve();return w.forEach((z=>{j=j.next((()=>E.getEntry(g,z))).next((L=>{const q=_.docVersions.get(z);st(q!==null,48541),L.version.compareTo(q)<0&&(x.applyToRemoteDocument(L,_),L.isValidDocument()&&(L.setReadTime(_.commitVersion),E.addEntry(L)))}))})),j.next((()=>p.mutationQueue.removeMutationBatch(g,x)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=Ke();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(g=g.add(p.batch.mutations[_].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function Bx(i){const e=Ie(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function zI(i,e){const n=Ie(i),r=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((E,x)=>{const w=l.get(x);if(!w)return;p.push(n.li.removeMatchingKeys(u,E.removedDocuments,x).next((()=>n.li.addMatchingKeys(u,E.addedDocuments,x))));let j=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?j=j.withResumeToken(hn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,r)),l=l.insert(x,j),(function(L,q,ee){return L.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=PI?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(w,j,E)&&p.push(n.li.updateTargetData(u,j))}));let g=Us(),_=Ke();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),p.push(BI(u,d,e.documentUpdates).next((E=>{g=E.Bs,_=E.Ls}))),!r.isEqual(Ce.min())){const E=n.li.getLastRemoteSnapshotVersion(u).next((x=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(E)}return se.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,_))).next((()=>g))})).then((u=>(n.vs=l,u)))}function BI(i,e,n){let r=Ke(),l=Ke();return n.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let d=Us();return n.forEach(((p,g)=>{const _=u.get(p);g.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):me(Dg,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function qI(i,e){const n=Ie(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=vg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function FI(i,e){const n=Ie(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.li.getTargetData(r,e).next((u=>u?(l=u,se.resolve(l)):n.li.allocateTargetId(r).next((d=>(l=new kr(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.vs.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Kp(i,e,n){const r=Ie(i),l=r.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!_o(d))throw d;me(Dg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(l.target)}function $b(i,e,n){const r=Ie(i);let l=Ce.min(),u=Ke();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,E){const x=Ie(g),w=x.Fs.get(E);return w!==void 0?se.resolve(x.vs.get(w)):x.li.getTargetData(_,E)})(r,d,rs(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,n?l:Ce.min(),n?u:Ke()))).next((p=>(HI(r,Cj(e),p),{documents:p,ks:u})))))}function HI(i,e,n){let r=i.Ms.get(e)||Ce.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Ms.set(e,r)}class Yb{constructor(){this.activeTargetIds=kj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GI{constructor(){this.vo=new Yb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Yb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KI{Mo(e){}shutdown(){}}const Xb="ConnectivityMonitor";class Wb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(Xb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(Xb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Bh=null;function Qp(){return Bh===null?Bh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bh++,"0x"+Bh.toString(16)}const dp="RestConnection",QI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class $I{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${l}`,this.$o=this.databaseId.database===pd?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Wo(e,n,r,l,u){const d=Qp(),p=this.Qo(e,n.toUriEncodedString());me(dp,`Sending RPC '${e}' ${d}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:_}=new URL(p),E=Xr(_);return this.zo(e,p,g,r,E).then((x=>(me(dp,`Received RPC '${e}' ${d}: `,x),x)),(x=>{throw za(dp,`RPC '${e}' ${d} failed with error: `,x,"url: ",p,"request:",r),x}))}jo(e,n,r,l,u,d){return this.Wo(e,n,r,l,u)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const r=QI[e];let l=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class YI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const bn="WebChannelConnection",Ec=(i,e,n)=>{i.listen(e,(r=>{try{n(r)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Jl extends $I{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Jl.c_){const e=H1();Ec(e,F1.STAT_EVENT,(n=>{n.stat===Mp.PROXY?me(bn,"STAT_EVENT: detected buffering proxy"):n.stat===Mp.NOPROXY&&me(bn,"STAT_EVENT: detected no buffering proxy")})),Jl.c_=!0}}zo(e,n,r,l,u){const d=Qp();return new Promise(((p,g)=>{const _=new B1;_.setWithCredentials(!0),_.listenOnce(q1.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case ed.NO_ERROR:const x=_.getResponseJson();me(bn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(x)),p(x);break;case ed.TIMEOUT:me(bn,`RPC '${e}' ${d} timed out`),g(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case ed.HTTP_ERROR:const w=_.getStatus();if(me(bn,`RPC '${e}' ${d} failed with status:`,w,"response text:",_.getResponseText()),w>0){let j=_.getResponseJson();Array.isArray(j)&&(j=j[0]);const z=j?.error;if(z&&z.status&&z.message){const L=(function(ee){const ue=ee.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ue)>=0?ue:te.UNKNOWN})(z.status);g(new fe(L,z.message))}else g(new fe(te.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new fe(te.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{me(bn,`RPC '${e}' ${d} completed.`)}}));const E=JSON.stringify(l);me(bn,`RPC '${e}' ${d} sending request:`,l),_.send(n,"POST",E,r,15)}))}T_(e,n,r){const l=Qp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const _=u.join("");me(bn,`Creating RPC '${e}' stream ${l}: ${_}`,p);const E=d.createWebChannel(_,p);this.I_(E);let x=!1,w=!1;const j=new YI({Ho:z=>{w?me(bn,`Not sending because RPC '${e}' stream ${l} is closed:`,z):(x||(me(bn,`Opening RPC '${e}' stream ${l} transport.`),E.open(),x=!0),me(bn,`RPC '${e}' stream ${l} sending:`,z),E.send(z))},Jo:()=>E.close()});return Ec(E,Ac.EventType.OPEN,(()=>{w||(me(bn,`RPC '${e}' stream ${l} transport opened.`),j.i_())})),Ec(E,Ac.EventType.CLOSE,(()=>{w||(w=!0,me(bn,`RPC '${e}' stream ${l} transport closed`),j.o_(),this.E_(E))})),Ec(E,Ac.EventType.ERROR,(z=>{w||(w=!0,za(bn,`RPC '${e}' stream ${l} transport errored. Name:`,z.name,"Message:",z.message),j.o_(new fe(te.UNAVAILABLE,"The operation could not be completed")))})),Ec(E,Ac.EventType.MESSAGE,(z=>{if(!w){const L=z.data[0];st(!!L,16349);const q=L,ee=q?.error||q[0]?.error;if(ee){me(bn,`RPC '${e}' stream ${l} received error:`,ee);const ue=ee.status;let ae=(function(le){const S=$t[le];if(S!==void 0)return Sx(S)})(ue),re=ee.message;ae===void 0&&(ae=te.INTERNAL,re="Unknown error status: "+ue+" with message "+ee.message),w=!0,j.o_(new fe(ae,re)),E.close()}else me(bn,`RPC '${e}' stream ${l} received:`,L),j.__(L)}})),Jl.u_(),setTimeout((()=>{j.s_()}),0),j}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return G1()}}function XI(i){return new Jl(i)}function fp(){return typeof document<"u"?document:null}function Hd(i){return new eI(i,!0)}Jl.c_=!1;class qx{constructor(e,n,r=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&me("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Jb="PersistentStream";class Fx{constructor(e,n,r,l,u,d,p,g){this.Ci=e,this.b_=r,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Ls(n.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new fe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(Jb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(me(Jb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WI extends Fx{constructor(e,n,r,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iI(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ce.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ce.min():d.readTime?as(d.readTime):Ce.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Gp(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=zp(g)?{documents:aI(u,g)}:{query:lI(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=jx(u,d.resumeToken);const _=qp(u,d.expectedCount);_!==null&&(p.expectedCount=_)}else if(d.snapshotVersion.compareTo(Ce.min())>0){p.readTime=bd(u,d.snapshotVersion.toTimestamp());const _=qp(u,d.expectedCount);_!==null&&(p.expectedCount=_)}return p})(this.serializer,e);const r=cI(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Gp(this.serializer),n.removeTarget=e,this.K_(n)}}class JI extends Fx{constructor(e,n,r,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rI(e.writeResults,e.commitTime),r=as(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Gp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>sI(this.serializer,r)))};this.K_(n)}}class ZI{}class eD extends ZI{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Fp(n,r),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(te.UNKNOWN,u.toString())}))}jo(e,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Fp(n,r),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new fe(te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function tD(i,e,n,r){return new eD(i,e,n,r)}class nD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ls(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ba="RemoteStore";class iD{constructor(e,n,r,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{$a(this)&&(me(Ba,"Restarting streams for network reachability change."),await(async function(g){const _=Ie(g);_.Ea.add(4),await ru(_),_.Va.set("Unknown"),_.Ea.delete(4),await Gd(_)})(this))}))})),this.Va=new nD(r,l)}}async function Gd(i){if($a(i))for(const e of i.Ra)await e(!0)}async function ru(i){for(const e of i.Ra)await e(!1)}function Hx(i,e){const n=Ie(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Pg(n)?Mg(n):vo(n).O_()&&kg(n,e))}function Og(i,e){const n=Ie(i),r=vo(n);n.Ia.delete(e),r.O_()&&Gx(n,e),n.Ia.size===0&&(r.O_()?r.L_():$a(n)&&n.Va.set("Unknown"))}function kg(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vo(i).Z_(e)}function Gx(i,e){i.da.$e(e),vo(i).X_(e)}function Mg(i){i.da=new Xj({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),vo(i).start(),i.Va.ua()}function Pg(i){return $a(i)&&!vo(i).x_()&&i.Ia.size>0}function $a(i){return Ie(i).Ea.size===0}function Kx(i){i.da=void 0}async function sD(i){i.Va.set("Online")}async function rD(i){i.Ia.forEach(((e,n)=>{kg(i,e)}))}async function aD(i,e){Kx(i),Pg(i)?(i.Va.ha(e),Mg(i)):i.Va.set("Unknown")}async function lD(i,e,n){if(i.Va.set("Online"),e instanceof Rx&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(i,e)}catch(r){me(Ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xd(i,r)}else if(e instanceof sd?i.da.Xe(e):e instanceof Cx?i.da.st(e):i.da.tt(e),!n.isEqual(Ce.min()))try{const r=await Bx(i.localStore);n.compareTo(r)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(_);E&&u.Ia.set(_,E.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,_)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(hn.EMPTY_BYTE_STRING,E.snapshotVersion)),Gx(u,g);const x=new kr(E.target,g,_,E.sequenceNumber);kg(u,x)})),u.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(r){me(Ba,"Failed to raise snapshot:",r),await xd(i,r)}}async function xd(i,e,n){if(!_o(e))throw e;i.Ea.add(1),await ru(i),i.Va.set("Offline"),n||(n=()=>Bx(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(Ba,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Gd(i)}))}function Qx(i,e){return e().catch((n=>xd(i,n,e)))}async function Kd(i){const e=Ie(i),n=Gr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vg;for(;oD(e);)try{const l=await qI(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,cD(e,l)}catch(l){await xd(e,l)}$x(e)&&Yx(e)}function oD(i){return $a(i)&&i.Ta.length<10}function cD(i,e){i.Ta.push(e);const n=Gr(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function $x(i){return $a(i)&&!Gr(i).x_()&&i.Ta.length>0}function Yx(i){Gr(i).start()}async function uD(i){Gr(i).ra()}async function hD(i){const e=Gr(i);for(const n of i.Ta)e.ea(n.mutations)}async function dD(i,e,n){const r=i.Ta.shift(),l=Ag.from(r,e,n);await Qx(i,(()=>i.remoteSyncer.applySuccessfulWrite(l))),await Kd(i)}async function fD(i,e){e&&Gr(i).Y_&&await(async function(r,l){if((function(d){return Qj(d)&&d!==te.ABORTED})(l.code)){const u=r.Ta.shift();Gr(r).B_(),await Qx(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Kd(r)}})(i,e),$x(i)&&Yx(i)}async function Zb(i,e){const n=Ie(i);n.asyncQueue.verifyOperationInProgress(),me(Ba,"RemoteStore received new credentials");const r=$a(n);n.Ea.add(3),await ru(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gd(n)}async function mD(i,e){const n=Ie(i);e?(n.Ea.delete(2),await Gd(n)):e||(n.Ea.add(2),await ru(n),n.Va.set("Unknown"))}function vo(i){return i.ma||(i.ma=(function(n,r,l){const u=Ie(n);return u.sa(),new WI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Zo:sD.bind(null,i),Yo:rD.bind(null,i),t_:aD.bind(null,i),J_:lD.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Pg(i)?Mg(i):i.Va.set("Unknown")):(await i.ma.stop(),Kx(i))}))),i.ma}function Gr(i){return i.fa||(i.fa=(function(n,r,l){const u=Ie(n);return u.sa(),new JI(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:uD.bind(null,i),t_:fD.bind(null,i),ta:hD.bind(null,i),na:dD.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Kd(i)):(await i.fa.stop(),i.Ta.length>0&&(me(Ba,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Vg{constructor(e,n,r,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,u){const d=Date.now()+r,p=new Vg(e,n,d,l,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lg(i,e){if(Ls("AsyncQueue",`${e}: ${i}`),_o(i))return new fe(te.UNAVAILABLE,`${e}: ${i}`);throw i}class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Sc(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class eE{constructor(){this.ga=new Nt(be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ao{constructor(e,n,r,l,u,d,p,g,_){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,r,l,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new ao(e,n,Zl.emptySet(n),d,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}class pD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class gD{constructor(){this.queries=tE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Ie(n),u=l.queries;l.queries=tE(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(r)}))})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function tE(){return new Qa((i=>px(i)),Ld)}async function Xx(i,e){const n=Ie(i);let r=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(r=2):(u=new pD,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=Lg(d,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Ug(n)}async function Wx(i,e){const n=Ie(i),r=e.query;let l=3;const u=n.queries.get(r);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _D(i,e){const n=Ie(i);let r=!1;for(const l of e){const u=l.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(r=!0);d.wa=l}}r&&Ug(n)}function yD(i,e,n){const r=Ie(i),l=r.queries.get(e);if(l)for(const u of l.ba)u.onError(n);r.queries.delete(e)}function Ug(i){i.Ca.forEach((e=>{e.next()}))}var $p,nE;(nE=$p||($p={})).Ma="default",nE.Cache="cache";class Jx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$p.Cache}}class Zx{constructor(e){this.key=e}}class eT{constructor(e){this.key=e}}class vD{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ke(),this.mutatedKeys=Ke(),this.eu=gx(e),this.tu=new Zl(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new eE,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((E,x)=>{const w=l.get(E),j=Ud(this.query,x)?x:null,z=!!w&&this.mutatedKeys.has(w.key),L=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let q=!1;w&&j?w.data.isEqual(j.data)?z!==L&&(r.track({type:3,doc:j}),q=!0):this.su(w,j)||(r.track({type:2,doc:j}),q=!0,(g&&this.eu(j,g)>0||_&&this.eu(j,_)<0)&&(p=!0)):!w&&j?(r.track({type:0,doc:j}),q=!0):w&&!j&&(r.track({type:1,doc:w}),q=!0,(g||_)&&(p=!0)),q&&(j?(d=d.add(j),u=L?u.add(E):u.delete(E)):(d=d.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:d,iu:r,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((E,x)=>(function(j,z){const L=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:q})}};return L(j)-L(z)})(E.type,x.type)||this.eu(E.doc,x.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,_=g!==this.Xa;return this.Xa=g,d.length!==0||_?{snapshot:new ao(this.query,e.tu,u,d,e.mutatedKeys,g===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ke(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new eT(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new Zx(r))})),n}cu(e){this.Za=e.ks,this.Ya=Ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const zg="SyncEngine";class bD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ED{constructor(e){this.key=e,this.hu=!1}}class xD{constructor(e,n,r,l,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Qa((p=>px(p)),Ld),this.Iu=new Map,this.Eu=new Set,this.Ru=new Nt(be.comparator),this.Au=new Map,this.Vu=new Rg,this.du={},this.mu=new Map,this.fu=ro.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TD(i,e,n=!0){const r=aT(i);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await tT(r,e,n,!0),l}async function wD(i,e){const n=aT(i);await tT(n,e,!0,!1)}async function tT(i,e,n,r){const l=await FI(i.localStore,rs(e)),u=l.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await ND(i,e,u,d==="current",l.resumeToken)),i.isPrimaryClient&&n&&Hx(i.remoteStore,l),p}async function ND(i,e,n,r,l){i.pu=(x,w,j)=>(async function(L,q,ee,ue){let ae=q.view.ru(ee);ae.Ss&&(ae=await $b(L.localStore,q.query,!1).then((({documents:S})=>q.view.ru(S,ae))));const re=ue&&ue.targetChanges.get(q.targetId),ve=ue&&ue.targetMismatches.get(q.targetId)!=null,le=q.view.applyChanges(ae,L.isPrimaryClient,re,ve);return sE(L,q.targetId,le.au),le.snapshot})(i,x,w,j);const u=await $b(i.localStore,e,!0),d=new vD(e,u.ks),p=d.ru(u.documents),g=su.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",l),_=d.applyChanges(p,i.isPrimaryClient,g);sE(i,n,_.au);const E=new bD(e,n,d);return i.Tu.set(e,E),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),_.snapshot}async function AD(i,e,n){const r=Ie(i),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((d=>!Ld(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Kp(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Og(r.remoteStore,l.targetId),Yp(r,l.targetId)})).catch(go)):(Yp(r,l.targetId),await Kp(r.localStore,l.targetId,!0))}async function SD(i,e){const n=Ie(i),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Og(n.remoteStore,r.targetId))}async function CD(i,e,n){const r=MD(i);try{const l=await(function(d,p){const g=Ie(d),_=_t.now(),E=p.reduce(((j,z)=>j.add(z.key)),Ke());let x,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let z=Us(),L=Ke();return g.xs.getEntries(j,E).next((q=>{z=q,z.forEach(((ee,ue)=>{ue.isValidDocument()||(L=L.add(ee))}))})).next((()=>g.localDocuments.getOverlayedDocuments(j,z))).next((q=>{x=q;const ee=[];for(const ue of p){const ae=qj(ue,x.get(ue.key).overlayedDocument);ae!=null&&ee.push(new Zr(ue.key,ae,lx(ae.value.mapValue),Sn.exists(!0)))}return g.mutationQueue.addMutationBatch(j,_,ee,p)})).next((q=>{w=q;const ee=q.applyToLocalDocumentSet(x,L);return g.documentOverlayCache.saveOverlays(j,q.batchId,ee)}))})).then((()=>({batchId:w.batchId,changes:yx(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let _=d.du[d.currentUser.toKey()];_||(_=new Nt(Ge)),_=_.insert(p,g),d.du[d.currentUser.toKey()]=_})(r,l.batchId,n),await au(r,l.changes),await Kd(r.remoteStore)}catch(l){const u=Lg(l,"Failed to persist write");n.reject(u)}}async function nT(i,e){const n=Ie(i);try{const r=await zI(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=n.Au.get(u);d&&(st(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?st(d.hu,14607):l.removedDocuments.size>0&&(st(d.hu,42227),d.hu=!1))})),await au(n,r,e)}catch(r){await go(r)}}function iE(i,e,n){const r=Ie(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Ie(d);g.onlineState=p;let _=!1;g.queries.forEach(((E,x)=>{for(const w of x.ba)w.va(p)&&(_=!0)})),_&&Ug(g)})(r.eventManager,e),l.length&&r.Pu.J_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RD(i,e,n){const r=Ie(i);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),u=l&&l.key;if(u){let d=new Nt(be.comparator);d=d.insert(u,xn.newNoDocument(u,Ce.min()));const p=Ke().add(u),g=new Fd(Ce.min(),new Map,new Nt(Ge),d,p);await nT(r,g),r.Ru=r.Ru.remove(u),r.Au.delete(e),Bg(r)}else await Kp(r.localStore,e,!1).then((()=>Yp(r,e,n))).catch(go)}async function jD(i,e){const n=Ie(i),r=e.batch.batchId;try{const l=await UI(n.localStore,e);sT(n,r,null),iT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await au(n,l)}catch(l){await go(l)}}async function ID(i,e,n){const r=Ie(i);try{const l=await(function(d,p){const g=Ie(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return g.mutationQueue.lookupMutationBatch(_,p).next((x=>(st(x!==null,37113),E=x.keys(),g.mutationQueue.removeMutationBatch(_,x)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>g.localDocuments.getDocuments(_,E)))}))})(r.localStore,e);sT(r,e,n),iT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await au(r,l)}catch(l){await go(l)}}function iT(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function sT(i,e,n){const r=Ie(i);let l=r.du[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),r.du[r.currentUser.toKey()]=l}}function Yp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||rT(i,r)}))}function rT(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(Og(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),Bg(i))}function sE(i,e,n){for(const r of n)r instanceof Zx?(i.Vu.addReference(r.key,e),DD(i,r)):r instanceof eT?(me(zg,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||rT(i,r.key)):Se(19791,{wu:r})}function DD(i,e){const n=e.key,r=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(r)||(me(zg,"New document in limbo: "+n),i.Eu.add(r),Bg(i))}function Bg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new be(gt.fromString(e)),r=i.fu.next();i.Au.set(r,new ED(n)),i.Ru=i.Ru.insert(n,r),Hx(i.remoteStore,new kr(rs(wg(n.path)),r,"TargetPurposeLimboResolution",Md.ce))}}async function au(i,e,n){const r=Ie(i),l=[],u=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{d.push(r.pu(g,e,n).then((_=>{if((_||n)&&r.isPrimaryClient){const E=_?!_.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(_){l.push(_);const E=Ig.Es(g.targetId,_);u.push(E)}})))})),await Promise.all(d),r.Pu.J_(l),await(async function(g,_){const E=Ie(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>se.forEach(_,(w=>se.forEach(w.Ts,(j=>E.persistence.referenceDelegate.addReference(x,w.targetId,j))).next((()=>se.forEach(w.Is,(j=>E.persistence.referenceDelegate.removeReference(x,w.targetId,j)))))))))}catch(x){if(!_o(x))throw x;me(Dg,"Failed to update sequence numbers: "+x)}for(const x of _){const w=x.targetId;if(!x.fromCache){const j=E.vs.get(w),z=j.snapshotVersion,L=j.withLastLimboFreeSnapshotVersion(z);E.vs=E.vs.insert(w,L)}}})(r.localStore,u))}async function OD(i,e){const n=Ie(i);if(!n.currentUser.isEqual(e)){me(zg,"User change. New user:",e.toKey());const r=await zx(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new fe(te.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await au(n,r.Ns)}}function kD(i,e){const n=Ie(i),r=n.Au.get(e);if(r&&r.hu)return Ke().add(r.key);{let l=Ke();const u=n.Iu.get(e);if(!u)return l;for(const d of u){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function aT(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=nT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RD.bind(null,e),e.Pu.J_=_D.bind(null,e.eventManager),e.Pu.yu=yD.bind(null,e.eventManager),e}function MD(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ID.bind(null,e),e}class Td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return LI(this.persistence,new MI,e.initialUser,this.serializer)}Cu(e){return new Ux(jg.Vi,this.serializer)}Du(e){return new GI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Td.provider={build:()=>new Td};class PD extends Td{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){st(this.persistence.referenceDelegate instanceof Ed,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new Ux((r=>Ed.Vi(r,n)),this.serializer)}}class Xp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OD.bind(null,this.syncEngine),await mD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gD})()}createDatastore(e){const n=Hd(e.databaseInfo.databaseId),r=XI(e.databaseInfo);return tD(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,u,d,p){return new iD(r,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>iE(this.syncEngine,n,0)),(function(){return Wb.v()?new Wb:new KI})())}createSyncEngine(e,n){return(function(l,u,d,p,g,_,E){const x=new xD(l,u,d,p,g,_);return E&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ie(n);me(Ba,"RemoteStore shutting down."),r.Ea.add(5),await ru(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xp.provider={build:()=>new Xp};class lT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Kr="FirestoreClient";class VD{constructor(e,n,r,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=l,this.user=En.UNAUTHENTICATED,this.clientId=Od.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async d=>{me(Kr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(me(Kr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Lg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function mp(i,e){i.asyncQueue.verifyOperationInProgress(),me(Kr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async l=>{r.isEqual(l)||(await zx(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function rE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await LD(i);me(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>Zb(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,l)=>Zb(e.remoteStore,l))),i._onlineComponents=e}async function LD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(Kr,"Using user provided OfflineComponentProvider");try{await mp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===te.FAILED_PRECONDITION||l.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;za("Error using user provided cache. Falling back to memory cache: "+n),await mp(i,new Td)}}else me(Kr,"Using default OfflineComponentProvider"),await mp(i,new PD(void 0));return i._offlineComponents}async function oT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(Kr,"Using user provided OnlineComponentProvider"),await rE(i,i._uninitializedComponentsProvider._online)):(me(Kr,"Using default OnlineComponentProvider"),await rE(i,new Xp))),i._onlineComponents}function UD(i){return oT(i).then((e=>e.syncEngine))}async function cT(i){const e=await oT(i),n=e.eventManager;return n.onListen=TD.bind(null,e.syncEngine),n.onUnlisten=AD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SD.bind(null,e.syncEngine),n}function zD(i,e,n={}){const r=new ks;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,_){const E=new lT({next:w=>{E.Nu(),d.enqueueAndForget((()=>Wx(u,x)));const j=w.docs.has(p);!j&&w.fromCache?_.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&w.fromCache&&g&&g.source==="server"?_.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(w)},error:w=>_.reject(w)}),x=new Jx(wg(p.path),E,{includeMetadataChanges:!0,Ka:!0});return Xx(u,x)})(await cT(i),i.asyncQueue,e,n,r))),r.promise}function BD(i,e,n={}){const r=new ks;return i.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,_){const E=new lT({next:w=>{E.Nu(),d.enqueueAndForget((()=>Wx(u,x))),w.fromCache&&g.source==="server"?_.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(w)},error:w=>_.reject(w)}),x=new Jx(p,E,{includeMetadataChanges:!0,Ka:!0});return Xx(u,x)})(await cT(i),i.asyncQueue,e,n,r))),r.promise}function qD(i,e){const n=new ks;return i.asyncQueue.enqueueAndForget((async()=>CD(await UD(i),e,n))),n.promise}function uT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const FD="ComponentProvider",aE=new Map;function HD(i,e,n,r,l){return new cj(i,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,uT(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,r)}const hT="firestore.googleapis.com",lE=!0;class oE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hT,this.ssl=lE}else this.host=e.host,this.ssl=e.ssl??lE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yI)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qd{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $1;switch(r.type){case"firstParty":return new KR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=aE.get(n);r&&(me(FD,"Removing Datastore"),aE.delete(n),r.terminate())})(this),Promise.resolve()}}function dT(i,e,n,r={}){i=ei(i,Qd);const l=Xr(e),u=i._getSettings(),d={...u,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;l&&(rg(`https://${p}`),ag("Firestore",!0)),u.host!==hT&&u.host!==p&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:r};if(!Ma(g,d)&&(i._setSettings(g),r.mockUserToken)){let _,E;if(typeof r.mockUserToken=="string")_=r.mockUserToken,E=En.MOCK_USER;else{_=e1(r.mockUserToken,i._app?.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new En(x)}i._authCredentials=new FR(new Q1(_,E))}}class qs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nu(n,jt._jsonSchema))return new jt(e,r||null,new be(gt.fromString(n.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Xt("string",jt._jsonSchemaVersion),referencePath:Xt("string")};class Ms extends qs{constructor(e,n,r){super(e,n,wg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new be(e))}withConverter(e){return new Ms(this.firestore,e,this._path)}}function ls(i,e,...n){if(i=yt(i),Y1("collection","path",e),i instanceof Qd){const r=gt.fromString(e,...n);return Eb(r),new Ms(i,null,r)}{if(!(i instanceof jt||i instanceof Ms))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(gt.fromString(e,...n));return Eb(r),new Ms(i.firestore,null,r)}}function Lt(i,e,...n){if(i=yt(i),arguments.length===1&&(e=Od.newId()),Y1("doc","path",e),i instanceof Qd){const r=gt.fromString(e,...n);return bb(r),new jt(i,null,new be(r))}{if(!(i instanceof jt||i instanceof Ms))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(gt.fromString(e,...n));return bb(r),new jt(i.firestore,i instanceof Ms?i.converter:null,new be(r))}}const cE="AsyncQueue";class uE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qx(this,"async_queue_retry"),this._c=()=>{const r=fp();r&&me(cE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!_o(e))throw e;me(cE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ls("INTERNAL UNHANDLED ERROR: ",hE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Vg.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Se(47125,{Pc:hE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function hE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Fs extends Qd{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new uE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uE(e),this._firestoreClient=void 0,await e}}}function fT(i,e){const n=typeof i=="object"?i:cg(),r=typeof i=="string"?i:pd,l=Rd(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=WE("firestore");u&&dT(l,...u)}return l}function lu(i){if(i._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||GD(i),i._firestoreClient}function GD(i){const e=i._freezeSettings(),n=HD(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new VD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(i._componentsProvider))}class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(hn.fromBase64String(e))}catch(n){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wn(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nu(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Xt("string",Wn._jsonSchemaVersion),bytes:Xt("string")};class ou{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cu{constructor(e){this._methodName=e}}class ji{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(nu(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:Xt("string",ji._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};class gi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nu(e,gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new gi(e.vectorValues);throw new fe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:Xt("string",gi._jsonSchemaVersion),vectorValues:Xt("object")};const KD=/^__.*__$/;class QD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new iu(e,this.data,n,this.fieldTransforms)}}class mT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{dataSource:i})}}class qg{constructor(e,n,r,l,u,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new qg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(pT(this.dataSource)&&KD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class $D{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hd(e)}createContext(e,n,r,l=!1){return new qg({dataSource:e,methodName:n,targetDoc:r,path:un.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uu(i){const e=i._freezeSettings(),n=Hd(i._databaseId);return new $D(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Fg(i,e,n,r,l,u={}){const d=i.createContext(u.merge||u.mergeFields?2:0,e,n,l);Gg("Data must be an object, but it was:",d,r);const p=yT(r,d);let g,_;if(u.merge)g=new Jn(d.fieldMask),_=d.fieldTransforms;else if(u.mergeFields){const E=[];for(const x of u.mergeFields){const w=qa(e,x,n);if(!d.contains(w))throw new fe(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ET(E,w)||E.push(w)}g=new Jn(E),_=d.fieldTransforms.filter((x=>g.covers(x.field)))}else g=null,_=d.fieldTransforms;return new QD(new Un(p),g,_)}class $d extends cu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}class Hg extends cu{_toFieldTransform(e){return new Lj(e.path,new Kc)}isEqual(e){return e instanceof Hg}}function gT(i,e,n,r){const l=i.createContext(1,e,n);Gg("Data must be an object, but it was:",l,r);const u=[],d=Un.empty();Jr(r,((g,_)=>{const E=bT(e,g,n);_=yt(_);const x=l.childContextForFieldPath(E);if(_ instanceof $d)u.push(E);else{const w=hu(_,x);w!=null&&(u.push(E),d.set(E,w))}}));const p=new Jn(u);return new mT(d,p,l.fieldTransforms)}function _T(i,e,n,r,l,u){const d=i.createContext(1,e,n),p=[qa(e,r,n)],g=[l];if(u.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)p.push(qa(e,u[w])),g.push(u[w+1]);const _=[],E=Un.empty();for(let w=p.length-1;w>=0;--w)if(!ET(_,p[w])){const j=p[w];let z=g[w];z=yt(z);const L=d.childContextForFieldPath(j);if(z instanceof $d)_.push(j);else{const q=hu(z,L);q!=null&&(_.push(j),E.set(j,q))}}const x=new Jn(_);return new mT(E,x,d.fieldTransforms)}function YD(i,e,n,r=!1){return hu(n,i.createContext(r?4:3,e))}function hu(i,e){if(vT(i=yt(i)))return Gg("Unsupported field value:",e,i),yT(i,e);if(i instanceof cu)return(function(r,l){if(!pT(l.dataSource))throw l.createError(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,l){const u=[];let d=0;for(const p of r){let g=hu(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(i,e)}return(function(r,l){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mj(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=_t.fromDate(r);return{timestampValue:bd(l.serializer,u)}}if(r instanceof _t){const u=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bd(l.serializer,u)}}if(r instanceof ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wn)return{bytesValue:jx(l.serializer,r._byteString)};if(r instanceof jt){const u=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Cg(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof gi)return(function(d,p){const g=d instanceof gi?d.toArray():d;return{mapValue:{fields:{[rx]:{stringValue:ax},[gd]:{arrayValue:{values:g.map((E=>{if(typeof E!="number")throw p.createError("VectorValues must only contain numeric values.");return Ng(p.serializer,E)}))}}}}}})(r,l);if(Vx(r))return r._toProto(l.serializer);throw l.createError(`Unsupported field value: ${kd(r)}`)})(i,e)}function yT(i,e){const n={};return Z1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(i,((r,l)=>{const u=hu(l,e.childContextForField(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function vT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof _t||i instanceof ji||i instanceof Wn||i instanceof jt||i instanceof cu||i instanceof gi||Vx(i))}function Gg(i,e,n){if(!vT(n)||!W1(n)){const r=kd(n);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function qa(i,e,n){if((e=yt(e))instanceof ou)return e._internalPath;if(typeof e=="string")return bT(i,e);throw wd("Field path arguments must be of type string or ",i,!1,void 0,n)}const XD=new RegExp("[~\\*/\\[\\]]");function bT(i,e,n){if(e.search(XD)>=0)throw wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ou(...e.split("."))._internalPath}catch{throw wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function wd(i,e,n,r,l){const u=r&&!r.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${r}`),d&&(g+=` in document ${l}`),g+=")"),new fe(te.INVALID_ARGUMENT,p+i+g)}function ET(i,e){return i.some((n=>n.isEqual(e)))}class xT{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jr(e,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(e){const n=e.fields?.[gd].arrayValue?.values?.map((r=>Vt(r.doubleValue)));return new gi(n)}convertGeoPoint(e){return new ji(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const n=qr(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gt.fromString(e);st(Px(r),9688,{name:e});const l=new no(r.get(1),r.get(3)),u=new be(r.popFirst(5));return l.isEqual(n)||Ls(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class TT extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function Wt(){return new Hg("serverTimestamp")}const dE="@firebase/firestore",fE="4.10.0";class wT{constructor(e,n,r,l,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(qa("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WD extends wT{data(){return super.data()}}function JD(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class Yd extends Kg{}function lo(i,e,...n){let r=[];e instanceof Kg&&r.push(e),r=r.concat(n),(function(u){const d=u.filter((g=>g instanceof Xd)).length,p=u.filter((g=>g instanceof du)).length;if(d>1||d>0&&p>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)i=l._apply(i);return i}class du extends Yd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new du(e,n,r)}_apply(e){const n=this._parse(e);return AT(e._query,n),new qs(e.firestore,e.converter,Bp(e._query,n))}_parse(e){const n=uu(e.firestore);return(function(u,d,p,g,_,E,x){let w;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){pE(x,E);const z=[];for(const L of x)z.push(mE(g,u,L));w={arrayValue:{values:z}}}else w=mE(g,u,x)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||pE(x,E),w=YD(p,d,x,E==="in"||E==="not-in");return Yt.create(_,E,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function js(i,e,n){const r=e,l=qa("where",i);return du._create(l,r,n)}class Xd extends Kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xd(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Di.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)AT(d,g),d=Bp(d,g)})(e._query,n),new qs(e.firestore,e.converter,Bp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wd extends Yd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wd(e,n)}_apply(e){const n=(function(l,u,d){if(l.startAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new fe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gc(u,d)})(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,Sj(e._query,n))}}function oo(i,e="asc"){const n=e,r=qa("orderBy",i);return Wd._create(r,n)}class Jd extends Yd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jd(e,n,r)}_apply(e){return new qs(e.firestore,e.converter,yd(e._query,this._limit,this._limitType))}}function NT(i){return JR("limit",i),Jd._create("limit",i,"F")}function mE(i,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mx(e)&&n.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gt.fromString(n));if(!be.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rb(i,new be(r))}if(n instanceof jt)return Rb(i,n._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(n)}.`)}function pE(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AT(i,e){const n=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Qg(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class $l{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ur extends wT{constructor(e,n,r,l,u,d){super(e,n,r,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ur._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ur._jsonSchema={type:Xt("string",Ur._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Pc extends Ur{data(e={}){return super.data(e)}}class Oa{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new $l(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Pc(this._firestore,this._userDataWriter,r.key,r,new $l(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Pc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new $l(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Pc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new $l(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,E=-1;return p.type!==0&&(_=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),E=d.indexOf(p.doc.key)),{type:ZD(p.type),doc:g,oldIndex:_,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Od.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:i})}}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:Xt("string",Oa._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class ST{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uu(e)}set(e,n,r){this._verifyNotCommitted();const l=pp(e,this._firestore),u=Qg(l.converter,n,r),d=Fg(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(d.toMutation(l._key,Sn.none())),this}update(e,n,r,...l){this._verifyNotCommitted();const u=pp(e,this._firestore);let d;return d=typeof(n=yt(n))=="string"||n instanceof ou?_T(this._dataReader,"WriteBatch.update",u._key,n,r,l):gT(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(d.toMutation(u._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=pp(e,this._firestore);return this._mutations=this._mutations.concat(new qd(n._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pp(i,e){if((i=yt(i)).firestore!==e)throw new fe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function Fa(i){i=ei(i,jt);const e=ei(i.firestore,Fs),n=lu(e);return zD(n,i._key).then((r=>e4(e,i,r)))}function co(i){i=ei(i,qs);const e=ei(i.firestore,Fs),n=lu(e),r=new TT(e);return JD(i._query),BD(n,i._query).then((l=>new Oa(e,r,i,l)))}function CT(i,e,n){i=ei(i,jt);const r=ei(i.firestore,Fs),l=Qg(i.converter,e,n),u=uu(r);return bo(r,[Fg(u,"setDoc",i._key,l,i.converter!==null,n).toMutation(i._key,Sn.none())])}function Qr(i,e,n,...r){i=ei(i,jt);const l=ei(i.firestore,Fs),u=uu(l);let d;return d=typeof(e=yt(e))=="string"||e instanceof ou?_T(u,"updateDoc",i._key,e,n,r):gT(u,"updateDoc",i._key,e),bo(l,[d.toMutation(i._key,Sn.exists(!0))])}function Zd(i){return bo(ei(i.firestore,Fs),[new qd(i._key,Sn.none())])}function fu(i,e){const n=ei(i.firestore,Fs),r=Lt(i),l=Qg(i.converter,e),u=uu(i.firestore);return bo(n,[Fg(u,"addDoc",r._key,l,i.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then((()=>r))}function bo(i,e){const n=lu(i);return qD(n,e)}function e4(i,e,n){const r=n.docs.get(e._key),l=new TT(i);return new Ur(i,l,e._key,r,new $l(n.hasPendingWrites,n.fromCache),e.converter)}function Yc(i){return i=ei(i,Fs),lu(i),new ST(i,(e=>bo(i,e)))}(function(e,n=!0){qR(Ga),Pa(new zr("firestore",((r,{instanceIdentifier:l,options:u})=>{const d=r.getProvider("app").getImmediate(),p=new Fs(new HR(r.getProvider("auth-internal")),new QR(d,r.getProvider("app-check-internal")),uj(d,l),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ns(dE,fE,e),ns(dE,fE,"esm2020")})();const RT=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xT,Bytes:Wn,CollectionReference:Ms,DocumentReference:jt,DocumentSnapshot:Ur,FieldPath:ou,FieldValue:cu,Firestore:Fs,FirestoreError:fe,GeoPoint:ji,Query:qs,QueryCompositeFilterConstraint:Xd,QueryConstraint:Yd,QueryDocumentSnapshot:Pc,QueryFieldFilterConstraint:du,QueryLimitConstraint:Jd,QueryOrderByConstraint:Wd,QuerySnapshot:Oa,SnapshotMetadata:$l,Timestamp:_t,VectorValue:gi,WriteBatch:ST,_AutoId:Od,_ByteString:hn,_DatabaseId:no,_DocumentKey:be,_EmptyAuthCredentialsProvider:$1,_FieldPath:un,_cast:ei,_logWarn:za,_validateIsNotUsedTogether:X1,addDoc:fu,collection:ls,connectFirestoreEmulator:dT,deleteDoc:Zd,doc:Lt,ensureFirestoreConfigured:lu,executeWrite:bo,getDoc:Fa,getDocs:co,getFirestore:fT,limit:NT,orderBy:oo,query:lo,serverTimestamp:Wt,setDoc:CT,updateDoc:Qr,where:js,writeBatch:Yc},Symbol.toStringTag,{value:"Module"}));var t4="firebase",n4="12.8.0";ns(t4,n4,"app");const jT="firebasestorage.googleapis.com",IT="storageBucket",i4=120*1e3,s4=600*1e3;class Dt extends cs{constructor(e,n,r=0){super(gp(e),`Firebase Storage: ${n} (${gp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var It;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(It||(It={}));function gp(i){return"storage/"+i}function $g(){const i="An unknown error occurred, please check the error payload for server response.";return new Dt(It.UNKNOWN,i)}function r4(i){return new Dt(It.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function a4(i){return new Dt(It.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function l4(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dt(It.UNAUTHENTICATED,i)}function o4(){return new Dt(It.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function c4(i){return new Dt(It.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function u4(){return new Dt(It.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function h4(){return new Dt(It.CANCELED,"User canceled the upload/download.")}function d4(i){return new Dt(It.INVALID_URL,"Invalid URL '"+i+"'.")}function f4(i){return new Dt(It.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function m4(){return new Dt(It.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IT+"' property when initializing the app?")}function p4(){return new Dt(It.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g4(){return new Dt(It.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _4(i){return new Dt(It.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wp(i){return new Dt(It.INVALID_ARGUMENT,i)}function DT(){return new Dt(It.APP_DELETED,"The Firebase app was deleted.")}function y4(i){return new Dt(It.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vc(i,e){return new Dt(It.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function xc(i){throw new Dt(It.INTERNAL_ERROR,"Internal error: "+i)}class Zn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zn.makeFromUrl(e,n)}catch{return new Zn(e,"")}if(r.path==="")return r;throw f4(e)}static makeFromUrl(e,n){let r=null;const l="([A-Za-z0-9.\\-_]+)";function u(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function _(re){re.path_=decodeURIComponent(re.path)}const E="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",j=new RegExp(`^https?://${x}/${E}/b/${l}/o${w}`,"i"),z={bucket:1,path:3},L=n===jT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,q="([^?#]*)",ee=new RegExp(`^https?://${L}/${l}/${q}`,"i"),ae=[{regex:p,indices:g,postModify:u},{regex:j,indices:z,postModify:_},{regex:ee,indices:{bucket:1,path:2},postModify:_}];for(let re=0;re<ae.length;re++){const ve=ae[re],le=ve.regex.exec(e);if(le){const S=le[ve.indices.bucket];let A=le[ve.indices.path];A||(A=""),r=new Zn(S,A),ve.postModify(r);break}}if(r==null)throw d4(e);return r}}class v4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function b4(i,e,n){let r=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let _=!1;function E(...q){_||(_=!0,e.apply(null,q))}function x(q){l=setTimeout(()=>{l=null,i(j,g())},q)}function w(){u&&clearTimeout(u)}function j(q,...ee){if(_){w();return}if(q){w(),E.call(null,q,...ee);return}if(g()||d){w(),E.call(null,q,...ee);return}r<64&&(r*=2);let ae;p===1?(p=2,ae=0):ae=(r+Math.random())*1e3,x(ae)}let z=!1;function L(q){z||(z=!0,w(),!_&&(l!==null?(q||(p=2),clearTimeout(l),x(0)):q||(p=1)))}return x(0),u=setTimeout(()=>{d=!0,L(!0)},n),L}function E4(i){i(!1)}function x4(i){return i!==void 0}function T4(i){return typeof i=="object"&&!Array.isArray(i)}function Yg(i){return typeof i=="string"||i instanceof String}function gE(i){return Xg()&&i instanceof Blob}function Xg(){return typeof Blob<"u"}function _E(i,e,n,r){if(r<e)throw Wp(`Invalid value for '${i}'. Expected ${e} or greater.`);if(r>n)throw Wp(`Invalid value for '${i}'. Expected ${n} or less.`)}function ef(i,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${i}`}function OT(i){const e=encodeURIComponent;let n="?";for(const r in i)if(i.hasOwnProperty(r)){const l=e(r)+"="+e(i[r]);n=n+l+"&"}return n=n.slice(0,-1),n}var ka;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(ka||(ka={}));function w4(i,e){const n=i>=500&&i<600,l=[408,429].indexOf(i)!==-1,u=e.indexOf(i)!==-1;return n||l||u}class N4{constructor(e,n,r,l,u,d,p,g,_,E,x,w=!0,j=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=x,this.retry=w,this.isUsingEmulator=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,L)=>{this.resolve_=z,this.reject_=L,this.start_()})}start_(){const e=(r,l)=>{if(l){r(!1,new qh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,_=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===ka.NO_ERROR,g=u.getStatus();if(!p||w4(g,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===ka.ABORT;r(!1,new qh(!1,null,E));return}const _=this.successCodes_.indexOf(g)!==-1;r(!0,new qh(_,u))})},n=(r,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());x4(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=$g();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?DT():h4();d(g)}else{const g=u4();d(g)}};this.canceled_?n(!1,new qh(!1,null,!0)):this.backoffId_=b4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function A4(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function S4(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function C4(i,e){e&&(i["X-Firebase-GMPID"]=e)}function R4(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function j4(i,e,n,r,l,u,d=!0,p=!1){const g=OT(i.urlParams),_=i.url+g,E=Object.assign({},i.headers);return C4(E,e),A4(E,n),S4(E,u),R4(E,r),new N4(_,i.method,E,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,l,d,p)}function I4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function D4(...i){const e=I4();if(e!==void 0){const n=new e;for(let r=0;r<i.length;r++)n.append(i[r]);return n.getBlob()}else{if(Xg())return new Blob(i);throw new Dt(It.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function O4(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}function k4(i){if(typeof atob>"u")throw _4("base-64");return atob(i)}const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _p{constructor(e,n){this.data=e,this.contentType=n||null}}function M4(i,e){switch(i){case ts.RAW:return new _p(kT(e));case ts.BASE64:case ts.BASE64URL:return new _p(MT(i,e));case ts.DATA_URL:return new _p(V4(e),L4(e))}throw $g()}function kT(i){const e=[];for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<i.length-1&&(i.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=r,d=i.charCodeAt(++n);r=65536|(u&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function P4(i){let e;try{e=decodeURIComponent(i)}catch{throw Vc(ts.DATA_URL,"Malformed data URL.")}return kT(e)}function MT(i,e){switch(i){case ts.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw Vc(i,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw Vc(i,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=k4(e)}catch(l){throw l.message.includes("polyfill")?l:Vc(i,"Invalid character found")}const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r}class PT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Vc(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=U4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function V4(i){const e=new PT(i);return e.base64?MT(ts.BASE64,e.rest):P4(e.rest)}function L4(i){return new PT(i).contentType}function U4(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}class Dr{constructor(e,n){let r=0,l="";gE(e)?(this.data_=e,r=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(gE(this.data_)){const r=this.data_,l=O4(r,e,n);return l===null?null:new Dr(l)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Dr(r,!0)}}static getBlob(...e){if(Xg()){const n=e.map(r=>r instanceof Dr?r.data_:r);return new Dr(D4.apply(null,n))}else{const n=e.map(d=>Yg(d)?M4(ts.RAW,d).data:d.data_);let r=0;n.forEach(d=>{r+=d.byteLength});const l=new Uint8Array(r);let u=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new Dr(l,!0)}}uploadData(){return this.data_}}function VT(i){let e;try{e=JSON.parse(i)}catch{return null}return T4(e)?e:null}function z4(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function B4(i,e){const n=e.split("/").filter(r=>r.length>0).join("/");return i.length===0?n:i+"/"+n}function LT(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}function q4(i,e){return e}class An{constructor(e,n,r,l){this.server=e,this.local=n||e,this.writable=!!r,this.xform=l||q4}}let Fh=null;function F4(i){return!Yg(i)||i.length<2?i:LT(i)}function UT(){if(Fh)return Fh;const i=[];i.push(new An("bucket")),i.push(new An("generation")),i.push(new An("metageneration")),i.push(new An("name","fullPath",!0));function e(u,d){return F4(d)}const n=new An("name");n.xform=e,i.push(n);function r(u,d){return d!==void 0?Number(d):d}const l=new An("size");return l.xform=r,i.push(l),i.push(new An("timeCreated")),i.push(new An("updated")),i.push(new An("md5Hash",null,!0)),i.push(new An("cacheControl",null,!0)),i.push(new An("contentDisposition",null,!0)),i.push(new An("contentEncoding",null,!0)),i.push(new An("contentLanguage",null,!0)),i.push(new An("contentType",null,!0)),i.push(new An("metadata","customMetadata",!0)),Fh=i,Fh}function H4(i,e){function n(){const r=i.bucket,l=i.fullPath,u=new Zn(r,l);return e._makeStorageReference(u)}Object.defineProperty(i,"ref",{get:n})}function G4(i,e,n){const r={};r.type="file";const l=n.length;for(let u=0;u<l;u++){const d=n[u];r[d.local]=d.xform(r,e[d.server])}return H4(r,i),r}function zT(i,e,n){const r=VT(e);return r===null?null:G4(i,r,n)}function K4(i,e,n,r){const l=VT(e);if(l===null||!Yg(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(_=>{const E=i.bucket,x=i.fullPath,w="/b/"+d(E)+"/o/"+d(x),j=ef(w,n,r),z=OT({alt:"media",token:_});return j+z})[0]}function Q4(i,e){const n={},r=e.length;for(let l=0;l<r;l++){const u=e[l];u.writable&&(n[u.server]=i[u.local])}return JSON.stringify(n)}class Wg{constructor(e,n,r,l){this.url=e,this.method=n,this.handler=r,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function BT(i){if(!i)throw $g()}function $4(i,e){function n(r,l){const u=zT(i,l,e);return BT(u!==null),u}return n}function Y4(i,e){function n(r,l){const u=zT(i,l,e);return BT(u!==null),K4(u,l,i.host,i._protocol)}return n}function qT(i){function e(n,r){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=o4():l=l4():n.getStatus()===402?l=a4(i.bucket):n.getStatus()===403?l=c4(i.path):l=r,l.status=n.getStatus(),l.serverResponse=r.serverResponse,l}return e}function FT(i){const e=qT(i);function n(r,l){let u=e(r,l);return r.getStatus()===404&&(u=r4(i.path)),u.serverResponse=l.serverResponse,u}return n}function X4(i,e,n){const r=e.fullServerUrl(),l=ef(r,i.host,i._protocol),u="GET",d=i.maxOperationRetryTime,p=new Wg(l,u,Y4(i,n),d);return p.errorHandler=FT(e),p}function W4(i,e){const n=e.fullServerUrl(),r=ef(n,i.host,i._protocol),l="DELETE",u=i.maxOperationRetryTime;function d(g,_){}const p=new Wg(r,l,d,u);return p.successCodes=[200,204],p.errorHandler=FT(e),p}function J4(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function Z4(i,e,n){const r=Object.assign({},n);return r.fullPath=i.path,r.size=e.size(),r.contentType||(r.contentType=J4(null,e)),r}function eO(i,e,n,r,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let ae="";for(let re=0;re<2;re++)ae=ae+Math.random().toString().slice(2);return ae}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const _=Z4(e,r,l),E=Q4(_,n),x="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+g+`\r
Content-Type: `+_.contentType+`\r
\r
`,w=`\r
--`+g+"--",j=Dr.getBlob(x,r,w);if(j===null)throw p4();const z={name:_.fullPath},L=ef(u,i.host,i._protocol),q="POST",ee=i.maxUploadRetryTime,ue=new Wg(L,q,$4(i,n),ee);return ue.urlParams=z,ue.headers=d,ue.body=j.uploadData(),ue.errorHandler=qT(e),ue}class tO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ka.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ka.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ka.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,l,u){if(this.sent_)throw xc("cannot .send() more than once");if(Xr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nO extends tO{initXhr(){this.xhr_.responseType="text"}}function Jg(){return new nO}class Ha{constructor(e,n){this._service=e,n instanceof Zn?this._location=n:this._location=Zn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ha(e,n)}get root(){const e=new Zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LT(this._location.path)}get storage(){return this._service}get parent(){const e=z4(this._location.path);if(e===null)return null;const n=new Zn(this._location.bucket,e);return new Ha(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw y4(e)}}function iO(i,e,n){i._throwIfRoot("uploadBytes");const r=eO(i.storage,i._location,UT(),new Dr(e,!0),n);return i.storage.makeRequestWithTokens(r,Jg).then(l=>({metadata:l,ref:i}))}function sO(i){i._throwIfRoot("getDownloadURL");const e=X4(i.storage,i._location,UT());return i.storage.makeRequestWithTokens(e,Jg).then(n=>{if(n===null)throw g4();return n})}function rO(i){i._throwIfRoot("deleteObject");const e=W4(i.storage,i._location);return i.storage.makeRequestWithTokens(e,Jg)}function aO(i,e){const n=B4(i._location.path,e),r=new Zn(i._location.bucket,n);return new Ha(i.storage,r)}function lO(i){return/^[A-Za-z]+:\/\//.test(i)}function oO(i,e){return new Ha(i,e)}function HT(i,e){if(i instanceof Zg){const n=i;if(n._bucket==null)throw m4();const r=new Ha(n,n._bucket);return e!=null?HT(r,e):r}else return e!==void 0?aO(i,e):i}function cO(i,e){if(e&&lO(e)){if(i instanceof Zg)return oO(i,e);throw Wp("To use ref(service, url), the first argument must be a Storage instance.")}else return HT(i,e)}function yE(i,e){const n=e?.[IT];return n==null?null:Zn.makeFromBucketSpec(n,i)}function uO(i,e,n,r={}){i.host=`${e}:${n}`;const l=Xr(e);l&&(rg(`https://${i.host}/b`),ag("Storage",!0)),i._isUsingEmulator=!0,i._protocol=l?"https":"http";const{mockUserToken:u}=r;u&&(i._overrideAuthToken=typeof u=="string"?u:e1(u,i.app.options.projectId))}class Zg{constructor(e,n,r,l,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=jT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i4,this._maxUploadRetryTime=s4,this._requests=new Set,l!=null?this._bucket=Zn.makeFromBucketSpec(l,this._host):this._bucket=yE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zn.makeFromBucketSpec(this._url,e):this._bucket=yE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_E("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_E("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ha(this,e)}_makeRequest(e,n,r,l,u=!0){if(this._deleted)return new v4(DT());{const d=j4(e,this._appId,r,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,l).getPromise()}}const vE="@firebase/storage",bE="0.14.0";const GT="storage";function hO(i,e,n){return i=yt(i),iO(i,e,n)}function dO(i){return i=yt(i),sO(i)}function fO(i){return i=yt(i),rO(i)}function EE(i,e){return i=yt(i),cO(i,e)}function mO(i=cg(),e){i=yt(i);const r=Rd(i,GT).getImmediate({identifier:e}),l=WE("storage");return l&&pO(r,...l),r}function pO(i,e,n,r={}){uO(i,e,n,r)}function gO(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),l=i.getProvider("app-check-internal");return new Zg(n,r,l,e,Ga)}function _O(){Pa(new zr(GT,gO,"PUBLIC").setMultipleInstances(!0)),ns(vE,bE,""),ns(vE,bE,"esm2020")}_O();const yO={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},e_=i1(yO),Rc=zR(e_),We=fT(e_),Jp=mO(e_),KT=Object.freeze(Object.defineProperty({__proto__:null,auth:Rc,db:We,storage:Jp},Symbol.toStringTag,{value:"Module"})),xE={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},TE=i=>xE[i]||xE.default,QT=M.createContext(null),vO=({children:i})=>{const[e,n]=M.useState(null),[r,l]=M.useState(!0),u=async w=>{try{const j=await Fa(Lt(We,"users",w));if(j.exists()){const z=j.data();return{uid:w,email:z.email,displayName:z.displayName,role:z.role,isPremium:z.isPremium||!1,subscriptionEnd:z.subscriptionEnd?.toDate()||null,photoURL:z.photoURL,createdAt:z.createdAt?.toDate()||new Date,lastLogin:z.lastLogin?.toDate()}}return null}catch(j){return console.error("Erreur lors de la rcupration des donnes utilisateur:",j),null}},d=async(w,j)=>{const z=Lt(We,"users",w.uid);(await Fa(z)).exists()?await Qr(z,{lastLogin:Wt()}):await CT(z,{email:w.email,displayName:w.displayName||j?.displayName||"",role:j?.role||"eleve",isPremium:!1,photoURL:w.photoURL,createdAt:Wt(),lastLogin:Wt()})},p=async(w,j)=>{try{const z=await TC(Rc,w,j);await d(z.user)}catch(z){throw new Error(TE(z.code))}},g=async w=>{try{if(w.password!==w.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const j=await xC(Rc,w.email,w.password);await NC(j.user,{displayName:w.displayName}),await d(j.user,{displayName:w.displayName,role:w.role})}catch(j){throw j.message?j:new Error(TE(j.code))}},_=async()=>{try{await RC(Rc),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},E=async w=>{if(!e)throw new Error("Aucun utilisateur connect.");try{const j=Lt(We,"users",e.uid);await Qr(j,{...w,updatedAt:Wt()}),n(z=>z?{...z,...w}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};M.useEffect(()=>{const w=CC(Rc,async j=>{if(j){const z=await u(j.uid);n(z)}else n(null);l(!1)});return()=>w()},[]);const x={currentUser:e,loading:r,login:p,register:g,logout:_,updateProfile:E};return c.jsx(QT.Provider,{value:x,children:r?c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Chargement..."})]}):i})},Hs=()=>{const i=M.useContext(QT);if(!i)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return i},bO=({children:i,allowedRoles:e,requirePremium:n=!1})=>{const{currentUser:r,loading:l}=Hs();return l?c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Vrification des autorisations..."})]}):r?e&&!e.includes(r.role)?c.jsxs("div",{className:"error-container",children:[c.jsx("h2",{children:"Accs non autoris"}),c.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),c.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!r.isPremium?c.jsxs("div",{className:"error-container premium-required",children:[c.jsx("h2",{children:"Contenu Premium"}),c.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),c.jsxs("div",{className:"premium-cta",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",c.jsx("strong",{children:"20 000 FCFA/an"})]}),c.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):c.jsx(c.Fragment,{children:i}):c.jsxs("div",{className:"error-container",children:[c.jsx("h2",{children:"Accs refus"}),c.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),c.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},zl=({children:i})=>c.jsx(bO,{allowedRoles:["admin"],children:i});const EO=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xO=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),wE=i=>{const e=xO(i);return e.charAt(0).toUpperCase()+e.slice(1)},$T=(...i)=>i.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),TO=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var wO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const NO=M.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:d,...p},g)=>M.createElement("svg",{ref:g,...wO,width:e,height:e,stroke:i,strokeWidth:r?Number(n)*24/Number(e):n,className:$T("lucide",l),...!u&&!TO(p)&&{"aria-hidden":"true"},...p},[...d.map(([_,E])=>M.createElement(_,E)),...Array.isArray(u)?u:[u]]));const et=(i,e)=>{const n=M.forwardRef(({className:r,...l},u)=>M.createElement(NO,{ref:u,iconNode:e,className:$T(`lucide-${EO(wE(i))}`,`lucide-${i}`,r),...l}));return n.displayName=wE(i),n};const AO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Bl=et("arrow-right",AO);const SO=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],CO=et("award",SO);const RO=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],t_=et("book-open",RO);const jO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],IO=et("chevron-down",jO);const DO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zi=et("circle-check-big",DO);const OO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kO=et("circle-question-mark",OO);const MO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],PO=et("clock",MO);const VO=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Hh=et("crown",VO);const LO=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],UO=et("facebook",LO);const zO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],BO=et("file-text",zO);const qO=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Nd=et("graduation-cap",qO);const FO=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],HO=et("heart",FO);const GO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],KO=et("house",GO);const QO=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],$O=et("instagram",QO);const YO=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],NE=et("layout-dashboard",YO);const XO=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],WO=et("linkedin",XO);const JO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],AE=et("log-out",JO);const ZO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ek=et("mail",ZO);const tk=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],nk=et("map-pin",tk);const ik=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],sk=et("menu",ik);const rk=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ak=et("phone",rk);const lk=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ok=et("play",lk);const ck=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uk=et("settings",ck);const hk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],YT=et("shield",hk);const dk=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Gh=et("star",dk);const fk=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],mk=et("trophy",fk);const pk=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],gk=et("twitter",pk);const _k=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yk=et("user",_k);const vk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bk=et("users",vk);const Ek=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xk=et("x",Ek);const Tk=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],wk=et("youtube",Tk);const Nk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ak=et("zap",Nk),Sk=()=>{const{currentUser:i,logout:e,loading:n}=Hs(),r=fo(),l=Yr(),[u,d]=M.useState(!1),[p,g]=M.useState(!1),[_,E]=M.useState(!1),x=M.useRef(null),w=[{path:"/",label:"Accueil",icon:c.jsx(KO,{size:18})},{path:"/disciplines",label:"Disciplines",icon:c.jsx(t_,{size:18})},{path:"/quiz",label:"Quiz",icon:c.jsx(Nd,{size:18}),requireAuth:!0,requirePremium:!0},{path:"/dashboard",label:"Tableau de bord",icon:c.jsx(NE,{size:18}),requireAuth:!0}];M.useEffect(()=>{const re=ve=>{x.current&&!x.current.contains(ve.target)&&g(!1)};return document.addEventListener("mousedown",re),()=>document.removeEventListener("mousedown",re)},[]),M.useEffect(()=>{d(!1),g(!1)},[l.pathname]),M.useEffect(()=>(u?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[u]);const j=async()=>{try{E(!0),await e(),g(!1),r("/")}catch(re){console.error("Erreur lors de la dconnexion:",re)}finally{E(!1)}},z=()=>{d(!u)},L=()=>{g(!p)},q=re=>!(re.requireAuth&&!i||re.requirePremium&&i&&!i.isPremium||re.requireRole&&i&&!re.requireRole.includes(i.role)),ee=re=>re==="/"?l.pathname==="/":l.pathname.startsWith(re),ue=re=>({admin:"Administrateur",prof:"Professeur",eleve:"lve"})[re]||re,ae=()=>i?i.displayName?i.displayName.split(" ").map(ve=>ve[0]).join("").toUpperCase().slice(0,2):i.email[0].toUpperCase():"?";return c.jsxs("header",{className:"header",children:[c.jsxs("div",{className:"header__container",children:[c.jsxs(je,{to:"/",className:"header__logo",children:[c.jsx(Nd,{className:"header__logo-icon",size:32}),c.jsxs("div",{className:"header__logo-text",children:[c.jsx("span",{className:"header__logo-name",children:"PedaClic"}),c.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),c.jsx("nav",{className:"header__nav header__nav--desktop",children:c.jsx("ul",{className:"header__nav-list",children:w.map(re=>q(re)&&c.jsx("li",{className:"header__nav-item",children:c.jsxs(je,{to:re.path,className:`header__nav-link ${ee(re.path)?"header__nav-link--active":""}`,children:[re.icon,c.jsx("span",{children:re.label}),re.requirePremium&&c.jsx(Hh,{size:14,className:"header__premium-badge"})]})},re.path))})}),c.jsxs("div",{className:"header__actions",children:[n?c.jsx("div",{className:"header__loading",children:c.jsx("div",{className:"header__spinner"})}):i?c.jsxs("div",{className:"header__user",ref:x,children:[i.isPremium&&c.jsxs("span",{className:"header__premium-tag",children:[c.jsx(Hh,{size:14}),"Premium"]}),c.jsxs("button",{className:"header__user-button",onClick:L,"aria-expanded":p,"aria-haspopup":"true",children:[c.jsx("div",{className:"header__avatar",children:i.photoURL?c.jsx("img",{src:i.photoURL,alt:i.displayName||"Avatar",className:"header__avatar-img"}):c.jsx("span",{className:"header__avatar-initials",children:ae()})}),c.jsx("span",{className:"header__user-name",children:i.displayName||i.email.split("@")[0]}),c.jsx(IO,{size:16,className:`header__chevron ${p?"header__chevron--open":""}`})]}),p&&c.jsxs("div",{className:"header__dropdown",children:[c.jsxs("div",{className:"header__dropdown-header",children:[c.jsx("p",{className:"header__dropdown-email",children:i.email}),c.jsx("span",{className:`header__dropdown-role header__dropdown-role--${i.role}`,children:ue(i.role)})]}),c.jsx("div",{className:"header__dropdown-divider"}),c.jsxs("nav",{className:"header__dropdown-nav",children:[c.jsxs(je,{to:"/dashboard",className:"header__dropdown-link",children:[c.jsx(NE,{size:18}),c.jsx("span",{children:"Tableau de bord"})]}),c.jsxs(je,{to:"/profil",className:"header__dropdown-link",children:[c.jsx(yk,{size:18}),c.jsx("span",{children:"Mon profil"})]}),i.role==="admin"&&c.jsxs(je,{to:"/admin",className:"header__dropdown-link",children:[c.jsx(uk,{size:18}),c.jsx("span",{children:"Administration"})]}),!i.isPremium&&c.jsxs(je,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[c.jsx(Hh,{size:18}),c.jsx("span",{children:"Passer Premium"})]})]}),c.jsx("div",{className:"header__dropdown-divider"}),c.jsxs("button",{className:"header__dropdown-logout",onClick:j,disabled:_,children:[c.jsx(AE,{size:18}),c.jsx("span",{children:_?"Dconnexion...":"Se dconnecter"})]})]})]}):c.jsxs("div",{className:"header__auth-buttons",children:[c.jsx(je,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),c.jsx(je,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),c.jsx("button",{className:"header__mobile-toggle",onClick:z,"aria-label":u?"Fermer le menu":"Ouvrir le menu","aria-expanded":u,children:u?c.jsx(xk,{size:24}):c.jsx(sk,{size:24})})]})]}),c.jsxs("div",{className:`header__mobile-menu ${u?"header__mobile-menu--open":""}`,children:[c.jsx("div",{className:"header__mobile-overlay",onClick:()=>d(!1)}),c.jsxs("div",{className:"header__mobile-content",children:[c.jsx("nav",{className:"header__mobile-nav",children:c.jsx("ul",{className:"header__mobile-list",children:w.map(re=>q(re)&&c.jsx("li",{className:"header__mobile-item",children:c.jsxs(je,{to:re.path,className:`header__mobile-link ${ee(re.path)?"header__mobile-link--active":""}`,children:[re.icon,c.jsx("span",{children:re.label}),re.requirePremium&&c.jsx(Hh,{size:14,className:"header__premium-badge"})]})},re.path))})}),!i&&c.jsxs("div",{className:"header__mobile-auth",children:[c.jsx(je,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),c.jsx(je,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),i&&c.jsxs("div",{className:"header__mobile-user",children:[c.jsxs("div",{className:"header__mobile-user-info",children:[c.jsx("div",{className:"header__avatar header__avatar--large",children:i.photoURL?c.jsx("img",{src:i.photoURL,alt:i.displayName||"Avatar",className:"header__avatar-img"}):c.jsx("span",{className:"header__avatar-initials",children:ae()})}),c.jsxs("div",{className:"header__mobile-user-details",children:[c.jsx("p",{className:"header__mobile-user-name",children:i.displayName||i.email.split("@")[0]}),c.jsx("p",{className:"header__mobile-user-email",children:i.email})]})]}),c.jsxs("button",{className:"header__mobile-logout",onClick:j,disabled:_,children:[c.jsx(AE,{size:18}),c.jsx("span",{children:_?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},Ck=()=>{const i=new Date().getFullYear(),e=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],n=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],r=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:c.jsx(UO,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:c.jsx(gk,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:c.jsx($O,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:c.jsx(WO,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:c.jsx(wk,{size:20})}];return c.jsxs("footer",{className:"footer",children:[c.jsx("div",{className:"footer__main",children:c.jsxs("div",{className:"footer__container",children:[c.jsxs("div",{className:"footer__column footer__column--about",children:[c.jsxs(je,{to:"/",className:"footer__logo",children:[c.jsx(Nd,{className:"footer__logo-icon",size:36}),c.jsxs("div",{className:"footer__logo-text",children:[c.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),c.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),c.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),c.jsxs("div",{className:"footer__stats",children:[c.jsxs("div",{className:"footer__stat",children:[c.jsx(t_,{size:18}),c.jsx("span",{children:"500+ cours"})]}),c.jsxs("div",{className:"footer__stat",children:[c.jsx(bk,{size:18}),c.jsx("span",{children:"10 000+ lves"})]})]})]}),c.jsxs("div",{className:"footer__column",children:[c.jsxs("h3",{className:"footer__title",children:[c.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),c.jsx("nav",{className:"footer__nav",children:c.jsx("ul",{className:"footer__list",children:e.map((l,u)=>c.jsx("li",{className:"footer__item",children:c.jsx(je,{to:l.path,className:"footer__link",children:l.label})},u))})})]}),c.jsxs("div",{className:"footer__column",children:[c.jsxs("h3",{className:"footer__title",children:[c.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),c.jsx("nav",{className:"footer__nav",children:c.jsx("ul",{className:"footer__list",children:n.map((l,u)=>c.jsx("li",{className:"footer__item",children:c.jsx(je,{to:l.path,className:"footer__link",children:l.label})},u))})})]}),c.jsxs("div",{className:"footer__column",children:[c.jsxs("h3",{className:"footer__title",children:[c.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),c.jsxs("div",{className:"footer__contact",children:[c.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[c.jsx(ek,{size:16,className:"footer__contact-icon"}),c.jsx("span",{children:"contact@pedaclic.sn"})]}),c.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[c.jsx(ak,{size:16,className:"footer__contact-icon"}),c.jsx("span",{children:"+221 77 000 00 00"})]}),c.jsxs("div",{className:"footer__contact-item",children:[c.jsx(nk,{size:16,className:"footer__contact-icon"}),c.jsx("span",{children:"Dakar, Sngal"})]})]}),c.jsxs("div",{className:"footer__social",children:[c.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),c.jsx("div",{className:"footer__social-links",children:r.map((l,u)=>c.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:l.name,children:l.icon},u))})]})]})]})}),c.jsx("div",{className:"footer__bottom",children:c.jsxs("div",{className:"footer__container footer__bottom-content",children:[c.jsxs("p",{className:"footer__copyright",children:[" ",i," PedaClic. Tous droits rservs."]}),c.jsxs("p",{className:"footer__made-with",children:["Fait avec ",c.jsx(HO,{size:14,className:"footer__heart"})," au Sngal "]}),c.jsxs("nav",{className:"footer__legal",children:[c.jsxs(je,{to:"/mentions-legales",className:"footer__legal-link",children:[c.jsx(BO,{size:14})," Mentions lgales"]}),c.jsxs(je,{to:"/confidentialite",className:"footer__legal-link",children:[c.jsx(YT,{size:14})," Confidentialit"]}),c.jsxs(je,{to:"/aide",className:"footer__legal-link",children:[c.jsx(kO,{size:14})," Aide"]})]})]})})]})},Kh=({children:i,hideHeader:e=!1,hideFooter:n=!1,className:r=""})=>c.jsxs("div",{className:"layout",children:[!e&&c.jsx(Sk,{}),c.jsx("main",{className:`layout__main ${e?"":"layout__main--with-header"} ${r}`,children:i}),!n&&c.jsx(Ck,{})]}),Rk=()=>{const{currentUser:i}=Hs();return c.jsxs("div",{className:"home-page",children:[c.jsxs("section",{className:"home-page__hero",children:[c.jsxs("div",{className:"home-page__hero-content",children:[c.jsxs("div",{className:"home-page__hero-badge",children:[c.jsx(Gh,{size:14}),c.jsx("span",{children:"Plateforme N1 au Sngal"})]}),c.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",c.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),c.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),c.jsx("div",{className:"home-page__hero-cta",children:i?c.jsxs(je,{to:"/dashboard",className:"home-page__btn home-page__btn--primary",children:["Accder  mon espace",c.jsx(Bl,{size:20})]}):c.jsxs(c.Fragment,{children:[c.jsxs(je,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",c.jsx(Bl,{size:20})]}),c.jsxs(je,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[c.jsx(ok,{size:18}),"Dcouvrir les cours"]})]})}),c.jsxs("div",{className:"home-page__hero-stats",children:[c.jsxs("div",{className:"home-page__hero-stat",children:[c.jsx("strong",{children:"10 000+"}),c.jsx("span",{children:"lves inscrits"})]}),c.jsxs("div",{className:"home-page__hero-stat",children:[c.jsx("strong",{children:"500+"}),c.jsx("span",{children:"Cours disponibles"})]}),c.jsxs("div",{className:"home-page__hero-stat",children:[c.jsx("strong",{children:"95%"}),c.jsx("span",{children:"Taux de russite"})]})]})]}),c.jsx("div",{className:"home-page__hero-image",children:c.jsxs("div",{className:"home-page__hero-illustration",children:[c.jsx(Nd,{size:120}),c.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),c.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),c.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),c.jsx("section",{className:"home-page__levels",children:c.jsxs("div",{className:"home-page__container",children:[c.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),c.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),c.jsxs("div",{className:"home-page__levels-grid",children:[c.jsxs(je,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[c.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),c.jsx("h3",{children:"Collge"}),c.jsx("p",{children:"6me  3me"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx(Zi,{size:16})," Prparation au BFEM"]}),c.jsxs("li",{children:[c.jsx(Zi,{size:16})," 9 matires disponibles"]}),c.jsxs("li",{children:[c.jsx(Zi,{size:16})," Exercices corrigs"]})]}),c.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",c.jsx(Bl,{size:16})]})]}),c.jsxs(je,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[c.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),c.jsx("h3",{children:"Lyce"}),c.jsx("p",{children:"2nde  Terminale"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx(Zi,{size:16})," Prparation au BAC"]}),c.jsxs("li",{children:[c.jsx(Zi,{size:16})," 12 matires disponibles"]}),c.jsxs("li",{children:[c.jsx(Zi,{size:16})," Annales d'examens"]})]}),c.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",c.jsx(Bl,{size:16})]})]})]})]})}),c.jsx("section",{className:"home-page__features",children:c.jsxs("div",{className:"home-page__container",children:[c.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),c.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),c.jsxs("div",{className:"home-page__features-grid",children:[c.jsxs("div",{className:"home-page__feature-card",children:[c.jsx("div",{className:"home-page__feature-icon",children:c.jsx(t_,{size:28})}),c.jsx("h3",{children:"Cours complets"}),c.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),c.jsxs("div",{className:"home-page__feature-card",children:[c.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:c.jsx(Ak,{size:28})}),c.jsx("h3",{children:"Quiz interactifs"}),c.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),c.jsxs("div",{className:"home-page__feature-card",children:[c.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:c.jsx(mk,{size:28})}),c.jsx("h3",{children:"Suivi de progression"}),c.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),c.jsxs("div",{className:"home-page__feature-card",children:[c.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:c.jsx(YT,{size:28})}),c.jsx("h3",{children:"Contenu vrifi"}),c.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),c.jsxs("div",{className:"home-page__feature-card",children:[c.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:c.jsx(PO,{size:28})}),c.jsx("h3",{children:"Accessible 24/7"}),c.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),c.jsxs("div",{className:"home-page__feature-card",children:[c.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:c.jsx(CO,{size:28})}),c.jsx("h3",{children:"Certificats"}),c.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),c.jsx("section",{className:"home-page__premium",children:c.jsx("div",{className:"home-page__container",children:c.jsxs("div",{className:"home-page__premium-content",children:[c.jsxs("div",{className:"home-page__premium-text",children:[c.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),c.jsx("h2",{children:"Passez  la vitesse suprieure"}),c.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",c.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),c.jsxs("ul",{className:"home-page__premium-features",children:[c.jsxs("li",{children:[c.jsx(Zi,{size:18})," Quiz illimits dans toutes les matires"]}),c.jsxs("li",{children:[c.jsx(Zi,{size:18})," Corrections dtailles des exercices"]}),c.jsxs("li",{children:[c.jsx(Zi,{size:18})," Annales des examens (BFEM, BAC)"]}),c.jsxs("li",{children:[c.jsx(Zi,{size:18})," Support prioritaire"]})]}),c.jsxs(je,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",c.jsx(Bl,{size:20})]})]}),c.jsx("div",{className:"home-page__premium-pricing",children:c.jsxs("div",{className:"home-page__pricing-card",children:[c.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),c.jsx("h3",{children:"Abonnement Annuel"}),c.jsxs("div",{className:"home-page__pricing-price",children:[c.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),c.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),c.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),c.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),c.jsx(je,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),c.jsx("section",{className:"home-page__testimonials",children:c.jsxs("div",{className:"home-page__container",children:[c.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),c.jsxs("div",{className:"home-page__testimonials-grid",children:[c.jsxs("div",{className:"home-page__testimonial-card",children:[c.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>c.jsx(Gh,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),c.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),c.jsxs("div",{className:"home-page__testimonial-author",children:[c.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),c.jsxs("div",{children:[c.jsx("strong",{children:"Fatou Adara"}),c.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),c.jsxs("div",{className:"home-page__testimonial-card",children:[c.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>c.jsx(Gh,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),c.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),c.jsxs("div",{className:"home-page__testimonial-author",children:[c.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),c.jsxs("div",{children:[c.jsx("strong",{children:"Moussa Diallo"}),c.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),c.jsxs("div",{className:"home-page__testimonial-card",children:[c.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>c.jsx(Gh,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),c.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),c.jsxs("div",{className:"home-page__testimonial-author",children:[c.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),c.jsxs("div",{children:[c.jsx("strong",{children:"Aminata Ndiaye"}),c.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),c.jsx("section",{className:"home-page__final-cta",children:c.jsxs("div",{className:"home-page__container",children:[c.jsx("h2",{children:"Prt  russir ?"}),c.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!i&&c.jsxs(je,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",c.jsx(Bl,{size:24})]})]})})]})},jk=()=>{const{login:i}=Hs(),e=fo(),r=Yr().state?.from||"/",[l,u]=M.useState({email:"",password:""}),[d,p]=M.useState(!1),[g,_]=M.useState(""),[E,x]=M.useState(!1),w=L=>{const{name:q,value:ee}=L.target;u(ue=>({...ue,[q]:ee})),g&&_("")},j=()=>l.email.trim()?l.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)?!0:(_("Veuillez entrer une adresse email valide."),!1):(_("Veuillez entrer votre mot de passe."),!1):(_("Veuillez entrer votre adresse email."),!1),z=async L=>{if(L.preventDefault(),!!j()){p(!0),_("");try{await i(l.email,l.password),e(r,{replace:!0})}catch(q){q instanceof Error?_(q.message):_("Une erreur est survenue lors de la connexion.")}finally{p(!1)}}};return c.jsx("div",{className:"auth-page",children:c.jsxs("div",{className:"auth-container",children:[c.jsxs("div",{className:"auth-card",children:[c.jsxs("div",{className:"auth-header",children:[c.jsxs(je,{to:"/",className:"auth-logo",children:[c.jsx("div",{className:"auth-logo__icon",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),c.jsx("span",{children:"PedaClic"})]}),c.jsx("h1",{className:"auth-title",children:"Connexion"}),c.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),g&&c.jsxs("div",{className:"auth-error",children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M12 8v4M12 16h.01"})]}),c.jsx("span",{children:g})]}),c.jsxs("form",{onSubmit:z,className:"auth-form",children:[c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),c.jsxs("div",{className:"auth-input-wrapper",children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),c.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:w,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:d})]})]}),c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),c.jsxs("div",{className:"auth-input-wrapper",children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[c.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),c.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),c.jsx("input",{type:E?"text":"password",id:"password",name:"password",value:l.password,onChange:w,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:d}),c.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>x(!E),"aria-label":E?"Masquer le mot de passe":"Afficher le mot de passe",children:E?c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),c.jsx("div",{className:"auth-forgot",children:c.jsx(je,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),c.jsx("button",{type:"submit",className:"auth-button",disabled:d,children:d?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),c.jsx("div",{className:"auth-divider",children:c.jsx("span",{children:"ou"})}),c.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",c.jsx(je,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),c.jsxs("div",{className:"auth-welcome",children:[c.jsx("h2",{children:"Bienvenue sur PedaClic !"}),c.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),c.jsxs("ul",{className:"auth-features",children:[c.jsxs("li",{children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),c.jsxs("li",{children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),c.jsxs("li",{children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),c.jsxs("li",{children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},Ik=()=>{const{register:i}=Hs(),e=fo(),[n,r]=M.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[l,u]=M.useState(!1),[d,p]=M.useState(""),[g,_]=M.useState(!1),[E,x]=M.useState(!1),[w,j]=M.useState(!1),z=ee=>{const{name:ue,value:ae}=ee.target;r(re=>({...re,[ue]:ae})),d&&p("")},L=()=>n.displayName.trim()?n.displayName.trim().length<2?(p("Le nom doit contenir au moins 2 caractres."),!1):n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.password?n.password.length<6?(p("Le mot de passe doit contenir au moins 6 caractres."),!1):n.password!==n.confirmPassword?(p("Les mots de passe ne correspondent pas."),!1):w?!0:(p("Veuillez accepter les conditions d'utilisation."),!1):(p("Veuillez entrer un mot de passe."),!1):(p("Veuillez entrer une adresse email valide."),!1):(p("Veuillez entrer votre adresse email."),!1):(p("Veuillez entrer votre nom complet."),!1),q=async ee=>{if(ee.preventDefault(),!!L()){u(!0),p("");try{await i(n),e("/disciplines",{replace:!0})}catch(ue){ue instanceof Error?p(ue.message):p("Une erreur est survenue lors de l'inscription.")}finally{u(!1)}}};return c.jsx("div",{className:"auth-page",children:c.jsxs("div",{className:"auth-container",children:[c.jsxs("div",{className:"auth-card auth-card--register",children:[c.jsxs("div",{className:"auth-header",children:[c.jsxs(je,{to:"/",className:"auth-logo",children:[c.jsx("div",{className:"auth-logo__icon",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),c.jsx("span",{children:"PedaClic"})]}),c.jsx("h1",{className:"auth-title",children:"Crer un compte"}),c.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),d&&c.jsxs("div",{className:"auth-error",children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("path",{d:"M12 8v4M12 16h.01"})]}),c.jsx("span",{children:d})]}),c.jsxs("form",{onSubmit:q,className:"auth-form",children:[c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),c.jsxs("div",{className:"auth-input-wrapper",children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),c.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:z,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:l})]})]}),c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),c.jsxs("div",{className:"auth-input-wrapper",children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:z,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:l})]})]}),c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{className:"auth-label",children:"Je suis :"}),c.jsxs("div",{className:"auth-role-selector",children:[c.jsxs("label",{className:`auth-role-option ${n.role==="eleve"?"auth-role-option--selected":""}`,children:[c.jsx("input",{type:"radio",name:"role",value:"eleve",checked:n.role==="eleve",onChange:z,className:"auth-role-input",disabled:l}),c.jsxs("div",{className:"auth-role-content",children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),c.jsx("span",{children:"lve"})]})]}),c.jsxs("label",{className:`auth-role-option ${n.role==="prof"?"auth-role-option--selected":""}`,children:[c.jsx("input",{type:"radio",name:"role",value:"prof",checked:n.role==="prof",onChange:z,className:"auth-role-input",disabled:l}),c.jsxs("div",{className:"auth-role-content",children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),c.jsx("span",{children:"Professeur"})]})]})]})]}),c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),c.jsxs("div",{className:"auth-input-wrapper",children:[c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[c.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),c.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),c.jsx("input",{type:g?"text":"password",id:"password",name:"password",value:n.password,onChange:z,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:l}),c.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>_(!g),"aria-label":g?"Masquer":"Afficher",children:g?c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),c.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),c.jsxs("div",{className:"auth-field",children:[c.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),c.jsxs("div",{className:"auth-input-wrapper",children:[c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),c.jsx("input",{type:E?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:z,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:l}),c.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>x(!E),"aria-label":E?"Masquer":"Afficher",children:E?c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):c.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),c.jsx("div",{className:"auth-checkbox-field",children:c.jsxs("label",{className:"auth-checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:ee=>j(ee.target.checked),className:"auth-checkbox",disabled:l}),c.jsx("span",{className:"auth-checkbox-custom"}),c.jsxs("span",{children:["J'accepte les"," ",c.jsx(je,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",c.jsx(je,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),c.jsx("button",{type:"submit",className:"auth-button",disabled:l,children:l?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),c.jsx("div",{className:"auth-divider",children:c.jsx("span",{children:"ou"})}),c.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",c.jsx(je,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),c.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[c.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),c.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),c.jsxs("div",{className:"auth-stats",children:[c.jsxs("div",{className:"auth-stat",children:[c.jsx("span",{className:"auth-stat-number",children:"10 000+"}),c.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),c.jsxs("div",{className:"auth-stat",children:[c.jsx("span",{className:"auth-stat-number",children:"500+"}),c.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),c.jsxs("div",{className:"auth-stat",children:[c.jsx("span",{className:"auth-stat-number",children:"95%"}),c.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),c.jsxs("div",{className:"auth-testimonial",children:[c.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),c.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},Dk=()=>{const[i,e]=M.useState([]),[n,r]=M.useState([]),[l,u]=M.useState(!0),[d,p]=M.useState(null),[g,_]=M.useState("tous"),[E,x]=M.useState("");M.useEffect(()=>{(async()=>{try{u(!0);const z=lo(ls(We,"disciplines"),oo("ordre","asc")),q=(await co(z)).docs.map(ee=>({id:ee.id,...ee.data()}));e(q),r(q),p(null)}catch(z){console.error("Erreur chargement disciplines:",z),p("Impossible de charger les disciplines. Veuillez ressayer.")}finally{u(!1)}})()},[]),M.useEffect(()=>{let j=i;if(g!=="tous"&&(j=j.filter(z=>z.niveau===g)),E.trim()){const z=E.toLowerCase();j=j.filter(L=>L.nom.toLowerCase().includes(z)||L.description.toLowerCase().includes(z)||L.classe.toLowerCase().includes(z))}r(j)},[i,g,E]);const w={tous:i.length,college:i.filter(j=>j.niveau==="college").length,lycee:i.filter(j=>j.niveau==="lycee").length};return l?c.jsx("div",{style:Ne.container,children:c.jsxs("div",{style:Ne.loadingContainer,children:[c.jsx("div",{style:Ne.spinner}),c.jsx("p",{style:Ne.loadingText,children:"Chargement des disciplines..."})]})}):d?c.jsx("div",{style:Ne.container,children:c.jsxs("div",{style:Ne.errorContainer,children:[c.jsx("span",{style:Ne.errorIcon,children:""}),c.jsx("h2",{style:Ne.errorTitle,children:"Erreur"}),c.jsx("p",{style:Ne.errorText,children:d}),c.jsx("button",{onClick:()=>window.location.reload(),style:Ne.retryButton,children:" Ressayer"})]})}):c.jsxs("div",{style:Ne.container,children:[c.jsx("header",{style:Ne.header,children:c.jsxs("div",{style:Ne.headerContent,children:[c.jsx(je,{to:"/",style:Ne.backLink,children:" Accueil"}),c.jsx("h1",{style:Ne.title,children:" Nos Disciplines"}),c.jsx("p",{style:Ne.subtitle,children:"Dcouvrez toutes les matires disponibles sur PedaClic, de la 6me  la Terminale."})]})}),c.jsx("div",{style:Ne.filtersSection,children:c.jsxs("div",{style:Ne.filtersContainer,children:[c.jsxs("div",{style:Ne.searchBox,children:[c.jsx("span",{style:Ne.searchIcon,children:""}),c.jsx("input",{type:"text",placeholder:"Rechercher une discipline...",value:E,onChange:j=>x(j.target.value),style:Ne.searchInput}),E&&c.jsx("button",{onClick:()=>x(""),style:Ne.clearSearch,children:""})]}),c.jsxs("div",{style:Ne.niveauFilters,children:[c.jsxs("button",{onClick:()=>_("tous"),style:{...Ne.filterButton,...g==="tous"?Ne.filterButtonActive:{}},children:[" Tous (",w.tous,")"]}),c.jsxs("button",{onClick:()=>_("college"),style:{...Ne.filterButton,...g==="college"?Ne.filterButtonActive:{}},children:[" Collge (",w.college,")"]}),c.jsxs("button",{onClick:()=>_("lycee"),style:{...Ne.filterButton,...g==="lycee"?Ne.filterButtonActive:{}},children:[" Lyce (",w.lycee,")"]})]})]})}),c.jsx("main",{style:Ne.main,children:n.length===0?c.jsxs("div",{style:Ne.emptyState,children:[c.jsx("span",{style:Ne.emptyIcon,children:""}),c.jsx("h3",{style:Ne.emptyTitle,children:"Aucune discipline trouve"}),c.jsx("p",{style:Ne.emptyText,children:"Essayez de modifier vos critres de recherche."}),c.jsx("button",{onClick:()=>{_("tous"),x("")},style:Ne.resetButton,children:"Rinitialiser les filtres"})]}):c.jsx("div",{style:Ne.grid,children:n.map(j=>c.jsx(Ok,{discipline:j},j.id))})}),c.jsxs("footer",{style:Ne.footer,children:[c.jsx("p",{children:" PedaClic - L'cole en un clic"}),c.jsxs("p",{style:Ne.footerSubtext,children:[i.length," disciplines disponibles  6me  Terminale"]})]})]})},Ok=({discipline:i})=>{const e=i.niveau==="college"?"Collge":"Lyce",n=i.niveau==="college"?"":"";return c.jsxs(je,{to:`/disciplines/${i.id}`,style:Ne.card,className:"discipline-card",children:[c.jsx("div",{style:{...Ne.cardIcon,backgroundColor:i.couleur||"#2563eb"},children:c.jsx("span",{style:Ne.cardEmoji,children:i.icone||""})}),c.jsxs("div",{style:Ne.cardContent,children:[c.jsx("h3",{style:Ne.cardTitle,children:i.nom}),c.jsxs("div",{style:Ne.cardMeta,children:[c.jsxs("span",{style:Ne.cardBadge,children:[n," ",e]}),c.jsxs("span",{style:Ne.cardBadge,children:[" ",i.classe]}),c.jsxs("span",{style:Ne.cardBadge,children:[" Coef. ",i.coefficient]})]}),c.jsx("p",{style:Ne.cardDescription,children:i.description})]}),c.jsx("div",{style:Ne.cardArrow,children:""})]})},Ne={container:{minHeight:"100vh",backgroundColor:"#f3f4f6",fontFamily:"system-ui, -apple-system, sans-serif"},header:{background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",color:"white",padding:"2rem 1rem 3rem"},headerContent:{maxWidth:"1200px",margin:"0 auto"},backLink:{color:"rgba(255,255,255,0.8)",textDecoration:"none",fontSize:"0.9rem",display:"inline-block",marginBottom:"1rem"},title:{fontSize:"2.5rem",fontWeight:"700",margin:"0 0 0.5rem 0"},subtitle:{fontSize:"1.1rem",opacity:.9,margin:0,maxWidth:"600px"},filtersSection:{backgroundColor:"white",borderBottom:"1px solid #e5e7eb",padding:"1rem",position:"sticky",top:0,zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},filtersContainer:{maxWidth:"1200px",margin:"0 auto",display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center",justifyContent:"space-between"},searchBox:{display:"flex",alignItems:"center",backgroundColor:"#f3f4f6",borderRadius:"8px",padding:"0.5rem 1rem",flex:"1",maxWidth:"400px",minWidth:"200px"},searchIcon:{marginRight:"0.5rem",fontSize:"1rem"},searchInput:{border:"none",background:"transparent",flex:1,fontSize:"1rem",outline:"none"},clearSearch:{background:"none",border:"none",cursor:"pointer",color:"#6b7280",fontSize:"1rem",padding:"0 0.25rem"},niveauFilters:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},filterButton:{padding:"0.5rem 1rem",borderRadius:"20px",border:"1px solid #e5e7eb",backgroundColor:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s",color:"#374151"},filterButtonActive:{backgroundColor:"#2563eb",borderColor:"#2563eb",color:"white"},main:{maxWidth:"1200px",margin:"0 auto",padding:"2rem 1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},card:{display:"flex",alignItems:"flex-start",gap:"1rem",backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",textDecoration:"none",color:"inherit",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s ease",border:"1px solid #e5e7eb"},cardIcon:{width:"60px",height:"60px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},cardEmoji:{fontSize:"1.75rem"},cardContent:{flex:1,minWidth:0},cardTitle:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",margin:"0 0 0.5rem 0"},cardMeta:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.75rem"},cardBadge:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",backgroundColor:"#f3f4f6",borderRadius:"4px",color:"#6b7280"},cardDescription:{fontSize:"0.9rem",color:"#6b7280",margin:0,lineHeight:"1.5",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},cardArrow:{color:"#9ca3af",fontSize:"1.25rem",alignSelf:"center",transition:"transform 0.2s"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh"},spinner:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 1s linear infinite"},loadingText:{marginTop:"1rem",color:"#6b7280"},errorContainer:{textAlign:"center",padding:"4rem 2rem"},errorIcon:{fontSize:"4rem"},errorTitle:{color:"#dc2626",margin:"1rem 0 0.5rem"},errorText:{color:"#6b7280",marginBottom:"1.5rem"},retryButton:{padding:"0.75rem 1.5rem",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},emptyState:{textAlign:"center",padding:"4rem 2rem",backgroundColor:"white",borderRadius:"12px"},emptyIcon:{fontSize:"4rem"},emptyTitle:{color:"#1f2937",margin:"1rem 0 0.5rem"},emptyText:{color:"#6b7280",marginBottom:"1.5rem"},resetButton:{padding:"0.75rem 1.5rem",backgroundColor:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},footer:{textAlign:"center",padding:"2rem",backgroundColor:"#1f2937",color:"white",marginTop:"2rem"},footerSubtext:{fontSize:"0.85rem",opacity:.7,marginTop:"0.5rem"}},kk=()=>c.jsx("style",{children:`
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .discipline-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15) !important;
      border-color: #2563eb !important;
    }
    
    .discipline-card:hover .card-arrow {
      transform: translateX(4px);
    }
  `}),Mk=()=>c.jsxs(c.Fragment,{children:[c.jsx(kk,{}),c.jsx(Dk,{})]}),XT={cours:{icon:"",label:"Cours",color:"#2563eb",bgColor:"#dbeafe"},exercice:{icon:"",label:"Exercice",color:"#059669",bgColor:"#d1fae5"},video:{icon:"",label:"Vido",color:"#dc2626",bgColor:"#fee2e2"},document:{icon:"",label:"Document",color:"#7c3aed",bgColor:"#ede9fe"},quiz:{icon:"",label:"Quiz",color:"#ea580c",bgColor:"#ffedd5"}},Pk=i=>{if(!i||i<=0)return null;if(i<60)return`${i} min`;const e=Math.floor(i/60),n=i%60;return n>0?`${e}h${n.toString().padStart(2,"0")}`:`${e}h`},SE=(i,e)=>i.length<=e?i:i.slice(0,e).trim()+"...",Vk=({resource:i,compact:e=!1,onClick:n,className:r=""})=>{const l=XT[i.type],u=Pk(i.dureeEstimee),d=p=>{n&&(p.preventDefault(),n(i))};return e?c.jsxs(je,{to:`/resources/${i.id}`,className:`resource-card resource-card--compact ${r}`,onClick:d,"aria-label":`${l.label}: ${i.titre}`,children:[c.jsx("span",{className:"resource-card__icon",style:{backgroundColor:l.bgColor},title:l.label,children:l.icon}),c.jsx("span",{className:"resource-card__title",children:SE(i.titre,50)}),c.jsx("span",{className:`resource-card__badge ${i.isPremium?"resource-card__badge--premium":"resource-card__badge--free"}`,children:i.isPremium?"":""})]}):c.jsxs(je,{to:`/resources/${i.id}`,className:`resource-card ${r}`,onClick:d,"aria-label":`${l.label}: ${i.titre}`,children:[c.jsxs("div",{className:"resource-card__header",children:[c.jsx("div",{className:"resource-card__type-icon",style:{backgroundColor:l.bgColor},children:l.icon}),c.jsx("span",{className:"resource-card__type-badge",style:{color:l.color,backgroundColor:l.bgColor},children:l.label}),c.jsx("div",{className:"resource-card__spacer"}),c.jsx("span",{className:`resource-card__status ${i.isPremium?"resource-card__status--premium":"resource-card__status--free"}`,children:i.isPremium?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"resource-card__status-icon",children:""}),c.jsx("span",{children:"Premium"})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"resource-card__status-icon",children:""}),c.jsx("span",{children:"Gratuit"})]})})]}),c.jsxs("div",{className:"resource-card__content",children:[c.jsx("h4",{className:"resource-card__title",children:i.titre}),i.description&&c.jsx("p",{className:"resource-card__description",children:SE(i.description,120)})]}),c.jsxs("div",{className:"resource-card__footer",children:[u&&c.jsxs("span",{className:"resource-card__meta",children:[c.jsx("span",{className:"resource-card__meta-icon",children:""}),u]}),i.tags&&i.tags.length>0&&c.jsxs("div",{className:"resource-card__tags",children:[i.tags.slice(0,3).map((p,g)=>c.jsx("span",{className:"resource-card__tag",children:p},g)),i.tags.length>3&&c.jsxs("span",{className:"resource-card__tag resource-card__tag--more",children:["+",i.tags.length-3]})]}),i.fichierURL&&c.jsx("span",{className:"resource-card__file-indicator",title:"Fichier attach",children:""}),c.jsx("span",{className:"resource-card__arrow",children:""})]})]})},Lk=i=>{const e={total:i.length,premium:0,gratuit:0,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return i.forEach(n=>{n.isPremium?e.premium++:e.gratuit++,e.parType.hasOwnProperty(n.type)&&e.parType[n.type]++}),e},Uk=i=>{const e={cours:1,exercice:2,video:3,document:4,quiz:5};return[...i].sort((n,r)=>n.ordre!==r.ordre?n.ordre-r.ordre:e[n.type]-e[r.type])},zk=({chapterName:i,chapterNumber:e,resources:n,isExpanded:r,onToggle:l,className:u=""})=>{const d=M.useMemo(()=>Lk(n),[n]),p=M.useMemo(()=>Uk(n),[n]),g=M.useMemo(()=>["cours","exercice","video","document","quiz"].filter(x=>d.parType[x]>0).map(x=>({type:x,count:d.parType[x],config:XT[x]})),[d]),_=d.premium>0;return c.jsxs("div",{className:`chapter-card ${r?"chapter-card--expanded":""} ${u}`,children:[c.jsxs("button",{type:"button",className:"chapter-card__header",onClick:l,"aria-expanded":r,"aria-controls":`chapter-content-${e}`,children:[c.jsx("div",{className:"chapter-card__number",children:c.jsx("span",{children:e})}),c.jsxs("div",{className:"chapter-card__info",children:[c.jsx("h3",{className:"chapter-card__title",children:i}),c.jsx("div",{className:"chapter-card__type-summary",children:g.map(({type:E,count:x,config:w})=>c.jsxs("span",{className:"chapter-card__type-count",title:`${x} ${w.label.toLowerCase()}${x>1?"s":""}`,children:[c.jsx("span",{className:"chapter-card__type-icon",children:w.icon}),c.jsx("span",{children:x})]},E))})]}),c.jsxs("div",{className:"chapter-card__badges",children:[c.jsxs("span",{className:"chapter-card__count-badge",children:[d.total," ressource",d.total>1?"s":""]}),_&&c.jsxs("span",{className:"chapter-card__premium-badge",title:`${d.premium} contenu(s) premium`,children:[" ",d.premium]})]}),c.jsx("div",{className:`chapter-card__chevron ${r?"chapter-card__chevron--open":""}`,children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M5 7.5L10 12.5L15 7.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c.jsxs("div",{id:`chapter-content-${e}`,className:`chapter-card__content ${r?"chapter-card__content--visible":""}`,"aria-hidden":!r,children:[c.jsxs("div",{className:"chapter-card__progress",children:[c.jsx("div",{className:"chapter-card__progress-bar",children:c.jsx("div",{className:"chapter-card__progress-fill",style:{width:"0%"}})}),c.jsxs("span",{className:"chapter-card__progress-text",children:["0/",d.total," termin",d.total>1?"s":""]})]}),c.jsx("div",{className:"chapter-card__resources",children:p.length>0?p.map(E=>c.jsx(Vk,{resource:E,className:"chapter-card__resource"},E.id)):c.jsxs("div",{className:"chapter-card__empty",children:[c.jsx("span",{className:"chapter-card__empty-icon",children:""}),c.jsx("p",{children:"Aucune ressource dans ce chapitre"})]})}),c.jsxs("div",{className:"chapter-card__stats",children:[c.jsxs("div",{className:"chapter-card__stat",children:[c.jsx("span",{className:"chapter-card__stat-value",children:d.total}),c.jsx("span",{className:"chapter-card__stat-label",children:"Total"})]}),c.jsxs("div",{className:"chapter-card__stat",children:[c.jsx("span",{className:"chapter-card__stat-value chapter-card__stat-value--premium",children:d.premium}),c.jsx("span",{className:"chapter-card__stat-label",children:"Premium"})]}),c.jsxs("div",{className:"chapter-card__stat",children:[c.jsx("span",{className:"chapter-card__stat-value chapter-card__stat-value--free",children:d.gratuit}),c.jsx("span",{className:"chapter-card__stat-label",children:"Gratuit"})]})]})]})]})},yp=()=>c.jsx("div",{className:"chapter-card chapter-card--skeleton",children:c.jsxs("div",{className:"chapter-card__header",children:[c.jsx("div",{className:"skeleton skeleton--number"}),c.jsxs("div",{className:"chapter-card__info",children:[c.jsx("div",{className:"skeleton skeleton--title",style:{width:"60%"}}),c.jsx("div",{className:"skeleton skeleton--meta",style:{width:"40%"}})]}),c.jsx("div",{className:"skeleton skeleton--badge",style:{width:"100px"}}),c.jsx("div",{className:"skeleton skeleton--chevron"})]})}),Bk="modulepreload",qk=function(i){return"/"+i},CE={},Ad=function(e,n,r){let l=Promise.resolve();if(n&&n.length>0){let _=function(E){return Promise.all(E.map(x=>Promise.resolve(x).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var d=_;document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");l=_(n.map(E=>{if(E=qk(E),E in CE)return;CE[E]=!0;const x=E.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${w}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":Bk,x||(j.as="script"),j.crossOrigin="",j.href=E,g&&j.setAttribute("nonce",g),document.head.appendChild(j),x)return new Promise((z,L)=>{j.addEventListener("load",z),j.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${E}`)))})}))}function u(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return l.then(p=>{for(const g of p||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})},Ra="ressources",Fk="ressources",RE=i=>{const e=i.data();return{id:i.id,disciplineId:e.disciplineId,titre:e.titre,type:e.type,contenu:e.contenu,description:e.description,isPremium:e.isPremium||!1,ordre:e.ordre||0,chapitre:e.chapitre,fichierURL:e.fichierURL,dureeEstimee:e.dureeEstimee,tags:e.tags||[],auteurId:e.auteurId,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},Hk=i=>{const e=Date.now(),n=i.split(".").pop();return`${i.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${e}.${n}`},Ar={async getAll(i,e){try{const n=[oo("ordre","asc")];i?.disciplineId&&n.unshift(js("disciplineId","==",i.disciplineId)),i?.chapitreId&&n.unshift(js("chapitre","==",i.chapitreId)),i?.type&&n.unshift(js("type","==",i.type)),i?.isPremium!==void 0&&n.unshift(js("isPremium","==",i.isPremium)),i?.auteurId&&n.unshift(js("auteurId","==",i.auteurId)),e&&n.push(NT(e));const r=lo(ls(We,Ra),...n);return(await co(r)).docs.map(RE)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(i){try{const e=Lt(We,Ra,i),n=await Fa(e);return n.exists()?RE(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la ressource:",e),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(i){return this.getAll({disciplineId:i})},async getByChapitre(i){return this.getAll({chapitreId:i})},async getByType(i){return this.getAll({type:i})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(i,e){try{return(await fu(ls(We,Ra),{...i,auteurId:e,createdAt:Wt(),updatedAt:Wt()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(i,e){try{const n=Lt(We,Ra,i);await Qr(n,{...e,updatedAt:Wt()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(i){try{const e=await this.getById(i);e?.fichierURL&&await this.deleteFile(e.fichierURL);const n=Lt(We,Ra,i);await Zd(n)}catch(e){throw console.error("Erreur lors de la suppression de la ressource:",e),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(i){try{const e=await this.getByDiscipline(i),n=Yc(We);for(const r of e){r.fichierURL&&await this.deleteFile(r.fichierURL);const l=Lt(We,Ra,r.id);n.delete(l)}await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des ressources:",e),new Error("Impossible de supprimer les ressources")}},async uploadFile(i,e){try{const n=Hk(i.name),r=`${Fk}/${e}/${n}`,l=EE(Jp,r);return await hO(l,i),await dO(l)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(i){try{const e=EE(Jp,i);await fO(e)}catch(e){console.warn("Fichier non trouv ou dj supprim:",e)}},async reorder(i,e){try{const n=Yc(We);e.forEach((r,l)=>{const u=Lt(We,Ra,r);n.update(u,{ordre:l+1,updatedAt:Wt()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(i,e){await this.update(i,{isPremium:e})},async countByType(i){return(await this.getByType(i)).length},async getStats(){try{const i=await this.getAll(),e={total:i.length,premium:i.filter(n=>n.isPremium).length,gratuit:i.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return i.forEach(n=>{e.parType[n.type]!==void 0&&e.parType[n.type]++}),e}catch(i){throw console.error("Erreur lors du calcul des statistiques:",i),new Error("Impossible de calculer les statistiques")}}},Gk=async i=>{const{collection:e,query:n,where:r,getDocs:l,orderBy:u}=await Ad(async()=>{const{collection:_,query:E,where:x,getDocs:w,orderBy:j}=await Promise.resolve().then(()=>RT);return{collection:_,query:E,where:x,getDocs:w,orderBy:j}},void 0),{db:d}=await Ad(async()=>{const{db:_}=await Promise.resolve().then(()=>KT);return{db:_}},void 0),p=n(e(d,"ressources"),r("chapitreId","==",i),u("ordre","asc"));return(await l(p)).docs.map(_=>({id:_.id,..._.data()}))},Kk=async i=>{const{collection:e,query:n,where:r,getDocs:l}=await Ad(async()=>{const{collection:g,query:_,where:E,getDocs:x}=await Promise.resolve().then(()=>RT);return{collection:g,query:_,where:E,getDocs:x}},void 0),{db:u}=await Ad(async()=>{const{db:g}=await Promise.resolve().then(()=>KT);return{db:g}},void 0),d=n(e(u,"ressources"),r("disciplineId","==",i));return(await l(d)).size},jE=[{value:"all",label:"Tous",icon:""},{value:"cours",label:"Cours",icon:""},{value:"exercice",label:"Exercices",icon:""},{value:"video",label:"Vidos",icon:""},{value:"document",label:"Documents",icon:""},{value:"quiz",label:"Quiz",icon:""}],Qk={college:"Collge",lycee:"Lyce"},$k={"6eme":"6me","5eme":"5me","4eme":"4me","3eme":"3me","2nde":"Seconde","1ere":"Premire",Terminale:"Terminale"},Yk=()=>{const{id:i}=gA(),[e,n]=M.useState(null),[r,l]=M.useState(new Map),[u,d]=M.useState(null),[p,g]=M.useState(new Set),[_,E]=M.useState("all"),[x,w]=M.useState(!0),[j,z]=M.useState(null);M.useEffect(()=>{(async()=>{if(!i){z("ID de discipline manquant"),w(!1);return}w(!0),z(null);try{const S=Lt(We,"disciplines",i),A=await Fa(S);if(!A.exists()){z("Discipline non trouve"),w(!1);return}const C=A.data(),D={id:A.id,nom:C.nom,niveau:C.niveau,classe:C.classe,ordre:C.ordre||0,coefficient:C.coefficient,couleur:C.couleur,icone:C.icone,description:C.description,createdAt:C.createdAt?.toDate()||new Date,updatedAt:C.updatedAt?.toDate()};n(D);const O=await Gk(i);if(O.success&&O.data){l(O.data);const R=Array.from(O.data.keys())[0];R&&g(new Set([R]))}const V=await Kk(i);V.success&&V.data&&d(V.data)}catch(S){console.error("Erreur chargement discipline:",S),z("Erreur lors du chargement des donnes")}finally{w(!1)}})()},[i]);const L=M.useMemo(()=>{if(_==="all")return r;const le=new Map;return r.forEach((S,A)=>{const C=S.filter(D=>D.type===_);C.length>0&&le.set(A,C)}),le},[r,_]),q=M.useMemo(()=>{const le={all:0};return r.forEach(S=>{le.all+=S.length,S.forEach(A=>{le[A.type]=(le[A.type]||0)+1})}),le},[r]),ee=M.useCallback(le=>{g(S=>{const A=new Set(S);return A.has(le)?A.delete(le):A.add(le),A})},[]),ue=M.useCallback(()=>{const le=new Set(L.keys());g(le)},[L]),ae=M.useCallback(()=>{g(new Set)},[]);if(x)return c.jsxs("div",{className:"discipline-detail",children:[c.jsx("div",{className:"discipline-detail__header discipline-detail__header--skeleton",children:c.jsxs("div",{className:"container",children:[c.jsx("div",{className:"skeleton skeleton--title",style:{width:"200px",height:"40px"}}),c.jsx("div",{className:"skeleton skeleton--text",style:{width:"300px",marginTop:"16px"}})]})}),c.jsx("div",{className:"discipline-detail__filters",children:c.jsx("div",{className:"container",children:c.jsx("div",{className:"discipline-detail__filter-bar",children:[1,2,3,4,5].map(le=>c.jsx("div",{className:"skeleton skeleton--button",style:{width:"100px",height:"40px"}},le))})})}),c.jsx("div",{className:"discipline-detail__content",children:c.jsxs("div",{className:"container",children:[c.jsx(yp,{}),c.jsx(yp,{}),c.jsx(yp,{})]})})]});if(j||!e)return c.jsx("div",{className:"discipline-detail",children:c.jsx("div",{className:"discipline-detail__error",children:c.jsx("div",{className:"container",children:c.jsxs("div",{className:"error-box",children:[c.jsx("span",{className:"error-box__icon",children:""}),c.jsx("h2",{className:"error-box__title",children:j||"Discipline non trouve"}),c.jsx("p",{className:"error-box__message",children:"La discipline demande n'existe pas ou a t supprime."}),c.jsx(je,{to:"/disciplines",className:"error-box__link",children:" Retour aux disciplines"})]})})})});const re=Array.from(L.entries()),ve=Array.from(r.keys()).length;return c.jsxs("div",{className:"discipline-detail",children:[c.jsx("header",{className:"discipline-detail__header",children:c.jsxs("div",{className:"container",children:[c.jsxs("nav",{className:"discipline-detail__breadcrumb","aria-label":"Fil d'ariane",children:[c.jsx(je,{to:"/",children:"Accueil"}),c.jsx("span",{className:"discipline-detail__breadcrumb-separator",children:"/"}),c.jsx(je,{to:"/disciplines",children:"Disciplines"}),c.jsx("span",{className:"discipline-detail__breadcrumb-separator",children:"/"}),c.jsx("span",{className:"discipline-detail__breadcrumb-current",children:e.nom})]}),c.jsxs("div",{className:"discipline-detail__title-section",children:[e.icone&&c.jsx("span",{className:"discipline-detail__icon",children:e.icone}),c.jsxs("div",{className:"discipline-detail__title-info",children:[c.jsx("h1",{className:"discipline-detail__title",children:e.nom}),c.jsxs("div",{className:"discipline-detail__meta",children:[c.jsx("span",{className:"discipline-detail__niveau",children:Qk[e.niveau]||e.niveau}),c.jsx("span",{className:"discipline-detail__separator",children:""}),c.jsx("span",{className:"discipline-detail__classe",children:$k[e.classe]||e.classe}),e.coefficient&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"discipline-detail__separator",children:""}),c.jsxs("span",{className:"discipline-detail__coefficient",children:["Coef. ",e.coefficient]})]})]})]})]}),u&&c.jsxs("div",{className:"discipline-detail__stats",children:[c.jsxs("div",{className:"discipline-detail__stat",children:[c.jsx("span",{className:"discipline-detail__stat-value",children:ve}),c.jsxs("span",{className:"discipline-detail__stat-label",children:["Chapitre",ve>1?"s":""]})]}),c.jsxs("div",{className:"discipline-detail__stat",children:[c.jsx("span",{className:"discipline-detail__stat-value",children:u.total}),c.jsxs("span",{className:"discipline-detail__stat-label",children:["Ressource",u.total>1?"s":""]})]}),c.jsxs("div",{className:"discipline-detail__stat discipline-detail__stat--free",children:[c.jsx("span",{className:"discipline-detail__stat-value",children:u.gratuit}),c.jsxs("span",{className:"discipline-detail__stat-label",children:["Gratuit",u.gratuit>1?"s":""]})]}),c.jsxs("div",{className:"discipline-detail__stat discipline-detail__stat--premium",children:[c.jsx("span",{className:"discipline-detail__stat-value",children:u.premium}),c.jsx("span",{className:"discipline-detail__stat-label",children:"Premium"})]})]}),e.description&&c.jsx("p",{className:"discipline-detail__description",children:e.description})]})}),c.jsx("section",{className:"discipline-detail__filters",children:c.jsx("div",{className:"container",children:c.jsxs("div",{className:"discipline-detail__filter-bar",children:[c.jsx("div",{className:"discipline-detail__type-filters",children:jE.map(le=>{const S=q[le.value]||0,A=_===le.value,C=le.value!=="all"&&S===0;return c.jsxs("button",{type:"button",className:`discipline-detail__filter-btn ${A?"discipline-detail__filter-btn--active":""}`,onClick:()=>E(le.value),disabled:C,"aria-pressed":A,children:[c.jsx("span",{className:"discipline-detail__filter-icon",children:le.icon}),c.jsx("span",{className:"discipline-detail__filter-label",children:le.label}),c.jsx("span",{className:"discipline-detail__filter-count",children:S})]},le.value)})}),c.jsxs("div",{className:"discipline-detail__chapter-actions",children:[c.jsxs("button",{type:"button",className:"discipline-detail__expand-btn",onClick:ue,title:"Tout dplier",children:[c.jsx("span",{children:""})," Tout dplier"]}),c.jsxs("button",{type:"button",className:"discipline-detail__collapse-btn",onClick:ae,title:"Tout replier",children:[c.jsx("span",{children:""})," Tout replier"]})]})]})})}),c.jsx("main",{className:"discipline-detail__content",children:c.jsx("div",{className:"container",children:re.length>0?c.jsx("div",{className:"discipline-detail__chapters",children:re.map(([le,S],A)=>c.jsx(zk,{chapterName:le,chapterNumber:A+1,resources:S,isExpanded:p.has(le),onToggle:()=>ee(le)},le))}):c.jsxs("div",{className:"discipline-detail__empty",children:[c.jsx("span",{className:"discipline-detail__empty-icon",children:""}),c.jsx("h3",{className:"discipline-detail__empty-title",children:_==="all"?"Aucune ressource disponible":`Aucun(e) ${jE.find(le=>le.value===_)?.label.toLowerCase()} disponible`}),c.jsx("p",{className:"discipline-detail__empty-message",children:_==="all"?"Cette discipline ne contient pas encore de ressources pdagogiques.":"Essayez de changer de filtre ou revenez plus tard."}),_!=="all"&&c.jsx("button",{type:"button",className:"discipline-detail__reset-filter",onClick:()=>E("all"),children:"Afficher toutes les ressources"})]})})}),u&&u.premium>0&&c.jsx("aside",{className:"discipline-detail__premium-banner",children:c.jsx("div",{className:"container",children:c.jsxs("div",{className:"premium-banner",children:[c.jsxs("div",{className:"premium-banner__content",children:[c.jsx("span",{className:"premium-banner__icon",children:""}),c.jsxs("div",{className:"premium-banner__text",children:[c.jsxs("strong",{children:[u.premium," ressource",u.premium>1?"s":""," Premium"]}),c.jsx("span",{children:"Accdez  tout le contenu pour seulement 2 000 FCFA/mois"})]})]}),c.jsx(je,{to:"/premium",className:"premium-banner__cta",children:"Devenir Premium"})]})})})]})},vp=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],Xk=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],Wk=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],Jk=()=>{const{currentUser:i}=Hs(),e=Yr(),n=fo(),[r,l]=M.useState("annuel"),[u,d]=M.useState(!1),[p,g]=M.useState(null),[_,E]=M.useState(null);e.state?.from;const x=()=>!i||!i.isPremium?!1:i.subscriptionEnd?(i.subscriptionEnd instanceof Date?i.subscriptionEnd:new Date(i.subscriptionEnd))>new Date:!0,w=async()=>{if(!i){n("/connexion",{state:{from:"/premium"}});return}if(x()){g("Vous tes dj abonn Premium !");return}try{d(!0),g(null);const L=vp.find(re=>re.id===r);if(!L)throw new Error("Plan invalide");const q=await fu(ls(We,"transactions"),{userId:i.uid,userEmail:i.email,planType:r,montant:L.prix,devise:"XOF",statut:"pending",dateTransaction:Wt(),createdAt:Wt()}),ee={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${L.nom}`,item_price:L.prix,currency:"XOF",ref_command:q.id,success_url:`${window.location.origin}/premium/success?ref=${q.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${q.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:i.uid,planType:r,transactionId:q.id}),env:"test"},ae=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:ee.apiKey,API_SECRET:ee.apiSecret},body:JSON.stringify({item_name:ee.item_name,item_price:ee.item_price,currency:ee.currency,ref_command:ee.ref_command,command_name:`Abonnement Premium ${L.nom} - ${i.email}`,env:ee.env,ipn_url:ee.ipn_url,success_url:ee.success_url,cancel_url:ee.cancel_url,custom_field:ee.custom_field})})).json();if(ae.success===1&&ae.redirect_url)window.location.href=ae.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const re=new Date,ve=new Date(re);r==="mensuel"?ve.setMonth(ve.getMonth()+1):ve.setFullYear(ve.getFullYear()+1),await Qr(Lt(We,"users",i.uid),{isPremium:!0,subscriptionEnd:ve,subscriptionPlan:r,updatedAt:Wt()}),await Qr(Lt(We,"transactions",q.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:ve,updatedAt:Wt()}),n("/premium/success",{state:{plan:L.nom,montant:L.prix,expiration:ve.toLocaleDateString("fr-FR")}})}}catch(L){console.error("Erreur paiement:",L),g("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{d(!1)}},j=L=>{E(_===L?null:L)},z=L=>L.toLocaleString("fr-FR")+" FCFA";if(x()){const L=i?.subscriptionEnd instanceof Date?i.subscriptionEnd:new Date(i?.subscriptionEnd||Date.now());return c.jsx("div",{className:"premium-page",children:c.jsx("div",{className:"container",children:c.jsxs("div",{className:"premium-already",children:[c.jsx("span",{className:"premium-already__icon",children:""}),c.jsx("h1",{children:"Vous tes dj Premium !"}),c.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",c.jsx("strong",{children:L.toLocaleDateString("fr-FR")})]}),c.jsxs("div",{className:"premium-already__actions",children:[c.jsx(je,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),c.jsx(je,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return c.jsxs("div",{className:"premium-page",children:[c.jsx("section",{className:"premium-hero",children:c.jsxs("div",{className:"container",children:[c.jsx("span",{className:"premium-hero__badge",children:" Premium"}),c.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",c.jsx("span",{children:"PedaClic"})]}),c.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),c.jsx("section",{className:"premium-pricing",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),c.jsx("div",{className:"pricing-cards",children:vp.map(L=>c.jsxs("div",{className:`pricing-card ${r===L.id?"pricing-card--selected":""} ${L.popular?"pricing-card--popular":""}`,onClick:()=>l(L.id),children:[L.popular&&c.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),c.jsxs("div",{className:"pricing-card__header",children:[c.jsx("h3",{className:"pricing-card__name",children:L.nom}),c.jsx("p",{className:"pricing-card__duration",children:L.duree})]}),c.jsxs("div",{className:"pricing-card__price",children:[L.prixOriginal&&c.jsx("span",{className:"pricing-card__original",children:z(L.prixOriginal)}),c.jsx("span",{className:"pricing-card__amount",children:z(L.prix)}),L.id==="mensuel"&&c.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),L.economie&&c.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",L.economie]}),c.jsx("div",{className:"pricing-card__radio",children:c.jsx("span",{className:`radio-dot ${r===L.id?"radio-dot--active":""}`})})]},L.id))}),c.jsxs("div",{className:"pricing-cta",children:[p&&c.jsxs("div",{className:"pricing-error",children:[c.jsx("span",{children:""})," ",p]}),i?c.jsx("button",{className:"btn btn--premium btn--lg",onClick:w,disabled:u,children:u?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):c.jsxs(c.Fragment,{children:["Payer ",z(vp.find(L=>L.id===r)?.prix||0)]})}):c.jsxs("div",{className:"pricing-login",children:[c.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),c.jsx(je,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),c.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",c.jsx(je,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),c.jsxs("div",{className:"payment-methods",children:[c.jsx("p",{children:"Paiement scuris par"}),c.jsxs("div",{className:"payment-methods__logos",children:[c.jsx("span",{className:"payment-logo",children:" Orange Money"}),c.jsx("span",{className:"payment-logo",children:" Wave"}),c.jsx("span",{className:"payment-logo",children:" Free Money"}),c.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),c.jsx("section",{className:"premium-features",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),c.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),c.jsx("div",{className:"features-grid",children:Xk.map((L,q)=>c.jsxs("div",{className:"feature-card",children:[c.jsx("span",{className:"feature-card__icon",children:L.icone}),c.jsx("h3",{className:"feature-card__title",children:L.titre}),c.jsx("p",{className:"feature-card__description",children:L.description})]},q))})]})}),c.jsx("section",{className:"premium-comparison",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),c.jsxs("div",{className:"comparison-table",children:[c.jsxs("div",{className:"comparison-header",children:[c.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),c.jsx("div",{className:"comparison-free",children:"Gratuit"}),c.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((L,q)=>c.jsxs("div",{className:"comparison-row",children:[c.jsx("div",{className:"comparison-feature",children:L.feature}),c.jsx("div",{className:"comparison-free",children:L.free?c.jsx("span",{className:"check",children:""}):c.jsx("span",{className:"cross",children:""})}),c.jsx("div",{className:"comparison-premium",children:c.jsx("span",{className:"check check--premium",children:""})})]},q))]})]})}),c.jsx("section",{className:"premium-testimonials",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),c.jsxs("div",{className:"testimonials-grid",children:[c.jsxs("div",{className:"testimonial-card",children:[c.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),c.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),c.jsxs("div",{className:"testimonial-card__author",children:[c.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),c.jsxs("div",{children:[c.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),c.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),c.jsxs("div",{className:"testimonial-card",children:[c.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),c.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),c.jsxs("div",{className:"testimonial-card__author",children:[c.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),c.jsxs("div",{children:[c.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),c.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),c.jsxs("div",{className:"testimonial-card",children:[c.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),c.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),c.jsxs("div",{className:"testimonial-card__author",children:[c.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),c.jsxs("div",{children:[c.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),c.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),c.jsx("section",{className:"premium-faq",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{className:"section-title",children:"Questions frquentes"}),c.jsx("div",{className:"faq-list",children:Wk.map((L,q)=>c.jsxs("div",{className:`faq-item ${_===q?"faq-item--open":""}`,children:[c.jsxs("button",{className:"faq-item__question",onClick:()=>j(q),"aria-expanded":_===q,children:[c.jsx("span",{children:L.question}),c.jsx("span",{className:"faq-item__icon",children:_===q?"":"+"})]}),_===q&&c.jsx("div",{className:"faq-item__answer",children:c.jsx("p",{children:L.reponse})})]},q))})]})}),c.jsx("section",{className:"premium-cta-final",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"Prt  russir vos examens ?"}),c.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),c.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},Zk=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],ql=({children:i,currentPage:e="dashboard"})=>{const{currentUser:n,logout:r}=Hs(),[l,u]=M.useState(!0),[d,p]=M.useState(!1),g=async()=>{try{p(!0),await r(),window.location.href="/connexion"}catch(x){console.error("Erreur lors de la dconnexion:",x),p(!1)}},_=()=>n?.displayName?n.displayName.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"AD",E=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}};return c.jsxs("div",{className:"admin-layout",children:[c.jsxs("aside",{className:`admin-sidebar ${l?"":"admin-sidebar--collapsed"}`,children:[c.jsx("header",{className:"admin-sidebar__header",children:c.jsxs("a",{href:"/",className:"admin-sidebar__logo",children:[c.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),c.jsx("span",{children:"PedaClic"})]})}),c.jsx("nav",{className:"admin-sidebar__nav",children:Zk.map((x,w)=>c.jsxs("div",{className:"admin-nav__section",children:[c.jsx("h3",{className:"admin-nav__title",children:x.title}),c.jsx("ul",{className:"admin-nav__list",children:x.items.map(j=>c.jsx("li",{className:"admin-nav__item",children:c.jsxs("a",{href:j.href,className:`admin-nav__link ${e===j.id?"admin-nav__link--active":""}`,children:[c.jsx("span",{className:"admin-nav__icon",children:j.icon}),c.jsx("span",{className:"admin-nav__label",children:j.label})]})},j.id))})]},w))}),c.jsx("footer",{className:"admin-sidebar__footer",children:c.jsxs("div",{className:"admin-user",children:[c.jsx("div",{className:"admin-user__avatar",children:_()}),c.jsxs("div",{className:"admin-user__info",children:[c.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),c.jsx("div",{className:"admin-user__role",children:E()})]}),c.jsx("button",{onClick:g,disabled:d,className:"admin-logout-btn",title:"Se dconnecter",children:d?"...":""})]})})]}),c.jsxs("main",{className:"admin-content",children:[c.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>u(!l),"aria-label":"Toggle sidebar",children:""}),i]}),c.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Tc="disciplines",IE=i=>{const e=i.data();return{id:i.id,nom:e.nom,niveau:e.niveau,classe:e.classe,ordre:e.ordre,coefficient:e.coefficient,couleur:e.couleur,icone:e.icone,description:e.description,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},Da={async getAll(i){try{const e=[oo("ordre","asc")];i?.niveau&&e.unshift(js("niveau","==",i.niveau)),i?.classe&&e.unshift(js("classe","==",i.classe));const n=lo(ls(We,Tc),...e);return(await co(n)).docs.map(IE)}catch(e){throw console.error("Erreur lors de la rcupration des disciplines:",e),new Error("Impossible de rcuprer les disciplines")}},async getById(i){try{const e=Lt(We,Tc,i),n=await Fa(e);return n.exists()?IE(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la discipline:",e),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(i){return this.getAll({niveau:i})},async getByClasse(i){return this.getAll({classe:i})},async create(i){try{return(await fu(ls(We,Tc),{...i,createdAt:Wt(),updatedAt:Wt()})).id}catch(e){throw console.error("Erreur lors de la cration de la discipline:",e),new Error("Impossible de crer la discipline")}},async update(i,e){try{const n=Lt(We,Tc,i);await Qr(n,{...e,updatedAt:Wt()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(i){try{const e=Lt(We,Tc,i);await Zd(e)}catch(e){throw console.error("Erreur lors de la suppression de la discipline:",e),new Error("Impossible de supprimer la discipline")}},async exists(i){return await this.getById(i)!==null},async countByNiveau(i){return(await this.getByNiveau(i)).length}},Nr="chapitres",bp=i=>{const e=i.data();return{id:i.id,disciplineId:e.disciplineId,numero:e.numero,titre:e.titre,description:e.description,objectifs:e.objectifs||[],dureeEstimee:e.dureeEstimee,isPremium:e.isPremium||!1,actif:e.actif!==!1,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},Sr={async getByDiscipline(i){try{const e=lo(ls(We,Nr),js("disciplineId","==",i),oo("numero","asc"));return(await co(e)).docs.map(bp)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const i=lo(ls(We,Nr),oo("numero","asc"));return(await co(i)).docs.map(bp)}catch(i){throw console.error("Erreur lors de la rcupration des chapitres:",i),new Error("Impossible de rcuprer les chapitres")}},async getById(i){try{const e=Lt(We,Nr,i),n=await Fa(e);return n.exists()?bp(n):null}catch(e){throw console.error("Erreur lors de la rcupration du chapitre:",e),new Error("Impossible de rcuprer le chapitre")}},async create(i){try{return(await fu(ls(We,Nr),{...i,actif:i.actif!==!1,createdAt:Wt(),updatedAt:Wt()})).id}catch(e){throw console.error("Erreur lors de la cration du chapitre:",e),new Error("Impossible de crer le chapitre")}},async update(i,e){try{const n=Lt(We,Nr,i);await Qr(n,{...e,updatedAt:Wt()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(i){try{const e=Lt(We,Nr,i);await Zd(e)}catch(e){throw console.error("Erreur lors de la suppression du chapitre:",e),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(i){try{const e=await this.getByDiscipline(i),n=Yc(We);e.forEach(r=>{const l=Lt(We,Nr,r.id);n.delete(l)}),await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des chapitres:",e),new Error("Impossible de supprimer les chapitres")}},async reorder(i,e){try{const n=Yc(We);e.forEach((r,l)=>{const u=Lt(We,Nr,r);n.update(u,{numero:l+1,updatedAt:Wt()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(i,e){await this.update(i,{actif:e})},async countByDiscipline(i){return(await this.getByDiscipline(i)).length},async getNextNumero(i){return await this.countByDiscipline(i)+1}},e3=()=>{const{currentUser:i}=Hs(),[e,n]=M.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[r,l]=M.useState(!0),[u,d]=M.useState(null);return M.useEffect(()=>{(async()=>{try{l(!0),d(null);const[g,_,E]=await Promise.all([Da.getAll(),Sr.getAll(),Ar.getStats()]);n({totalDisciplines:g.length,totalChapitres:_.length,totalRessources:E.total,ressourcesPremium:E.premium,ressourcesGratuites:E.gratuit,ressourcesParType:E.parType})}catch(g){console.error("Erreur lors du chargement des statistiques:",g),d("Impossible de charger les statistiques")}finally{l(!1)}})()},[]),c.jsxs("div",{className:"admin-dashboard",children:[c.jsx("header",{className:"admin-page-header",children:c.jsxs("div",{className:"admin-page-header__info",children:[c.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),c.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",i?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),u&&c.jsxs("div",{className:"alert alert--error",children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:u})})]}),r?c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Chargement des statistiques..."})]}):c.jsxs(c.Fragment,{children:[c.jsxs("section",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),c.jsxs("div",{className:"stat-card__content",children:[c.jsx("div",{className:"stat-card__value",children:e.totalDisciplines}),c.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),c.jsxs("div",{className:"stat-card__content",children:[c.jsx("div",{className:"stat-card__value",children:e.totalChapitres}),c.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),c.jsxs("div",{className:"stat-card__content",children:[c.jsx("div",{className:"stat-card__value",children:e.totalRessources}),c.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),c.jsxs("div",{className:"stat-card__content",children:[c.jsx("div",{className:"stat-card__value",children:e.ressourcesPremium}),c.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]})]}),c.jsxs("section",{className:"content-card",children:[c.jsx("div",{className:"content-card__header",children:c.jsx("h2",{children:"Rpartition des ressources par type"})}),c.jsx("div",{className:"content-card__body",children:c.jsxs("div",{className:"resource-type-grid",children:[c.jsxs("div",{className:"resource-type-item",children:[c.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),c.jsxs("div",{className:"resource-type-info",children:[c.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.cours}),c.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),c.jsxs("div",{className:"resource-type-item",children:[c.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),c.jsxs("div",{className:"resource-type-info",children:[c.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.exercice}),c.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),c.jsxs("div",{className:"resource-type-item",children:[c.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),c.jsxs("div",{className:"resource-type-info",children:[c.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.video}),c.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),c.jsxs("div",{className:"resource-type-item",children:[c.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),c.jsxs("div",{className:"resource-type-info",children:[c.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.document}),c.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),c.jsxs("div",{className:"resource-type-item",children:[c.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),c.jsxs("div",{className:"resource-type-info",children:[c.jsx("span",{className:"resource-type-value",children:e.ressourcesParType.quiz}),c.jsx("span",{className:"resource-type-label",children:"Quiz"})]})]})]})})]}),c.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[c.jsx("div",{className:"content-card__header",children:c.jsx("h2",{children:"Actions rapides"})}),c.jsx("div",{className:"content-card__body",children:c.jsxs("div",{className:"quick-actions-grid",children:[c.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[c.jsx("div",{className:"quick-action-icon",children:""}),c.jsxs("div",{className:"quick-action-content",children:[c.jsx("h3",{children:"Grer les disciplines"}),c.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),c.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[c.jsx("div",{className:"quick-action-icon",children:""}),c.jsxs("div",{className:"quick-action-content",children:[c.jsx("h3",{children:"Grer les chapitres"}),c.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),c.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[c.jsx("div",{className:"quick-action-icon",children:""}),c.jsxs("div",{className:"quick-action-content",children:[c.jsx("h3",{children:"Grer les ressources"}),c.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),c.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[c.jsx("div",{className:"quick-action-icon",children:""}),c.jsxs("div",{className:"quick-action-content",children:[c.jsx("h3",{children:"Grer les utilisateurs"}),c.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),c.jsx("style",{children:`
        /* Grille des types de ressources */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* Actions rapides */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},DE=[{value:"college",label:"Collge"},{value:"lycee",label:"Lyce"}],Qh={college:[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],lycee:[{value:"2nde",label:"Seconde"},{value:"1ere",label:"Premire"},{value:"Terminale",label:"Terminale"}]},t3=[{value:"#2563eb",label:"Bleu"},{value:"#059669",label:"Vert"},{value:"#dc2626",label:"Rouge"},{value:"#7c3aed",label:"Violet"},{value:"#ea580c",label:"Orange"},{value:"#0891b2",label:"Cyan"},{value:"#be185d",label:"Rose"},{value:"#4b5563",label:"Gris"}],Ep={nom:"",niveau:"college",classe:"6eme",ordre:1,coefficient:1,couleur:"#2563eb",icone:"",description:""},n3=()=>{const[i,e]=M.useState([]),[n,r]=M.useState([]),[l,u]=M.useState(!0),[d,p]=M.useState(!1),[g,_]=M.useState(null),[E,x]=M.useState(null),[w,j]=M.useState(null),[z,L]=M.useState(!1),[q,ee]=M.useState(!1),[ue,ae]=M.useState(null),[re,ve]=M.useState(null),[le,S]=M.useState(Ep),[A,C]=M.useState({}),[D,O]=M.useState(""),[V,R]=M.useState(""),[Le,tt]=M.useState(""),X=M.useCallback(async()=>{try{u(!0),x(null);const Y=await Da.getAll();e(Y),r(Y)}catch(Y){console.error("Erreur lors du chargement:",Y),x("Impossible de charger les disciplines. Veuillez ressayer.")}finally{u(!1)}},[]);M.useEffect(()=>{X()},[X]),M.useEffect(()=>{let Y=[...i];if(D&&(Y=Y.filter(_e=>_e.niveau===D)),V&&(Y=Y.filter(_e=>_e.classe===V)),Le){const _e=Le.toLowerCase();Y=Y.filter(Qe=>Qe.nom.toLowerCase().includes(_e)||Qe.description?.toLowerCase().includes(_e))}r(Y)},[i,D,V,Le]);const ce=()=>{const Y={};return le.nom.trim()?le.nom.length<2&&(Y.nom="Le nom doit contenir au moins 2 caractres"):Y.nom="Le nom de la discipline est requis",le.niveau||(Y.niveau="Veuillez slectionner un niveau"),le.classe||(Y.classe="Veuillez slectionner une classe"),le.ordre<1&&(Y.ordre="L'ordre doit tre suprieur  0"),C(Y),Object.keys(Y).length===0},pe=()=>{ae(null),S(Ep),C({}),L(!0)},Pe=Y=>{ae(Y),S({nom:Y.nom,niveau:Y.niveau,classe:Y.classe,ordre:Y.ordre,coefficient:Y.coefficient,couleur:Y.couleur,icone:Y.icone,description:Y.description}),C({}),L(!0)},De=Y=>{ve(Y),ee(!0)},k=()=>{L(!1),ee(!1),ae(null),ve(null),S(Ep),C({})},J=Y=>{const{name:_e,value:Qe,type:Ue}=Y.target;if(_e==="niveau"){const Jt=Qe;S(W=>({...W,niveau:Jt,classe:Qh[Jt][0].value}))}else S(Jt=>({...Jt,[_e]:Ue==="number"?Number(Qe):Qe}));A[_e]&&C(Jt=>({...Jt,[_e]:void 0}))},oe=async Y=>{if(Y.preventDefault(),!!ce())try{p(!0),x(null),ue?(await Da.update(ue.id,le),j("Discipline modifie avec succs !")):(await Da.create(le),j("Discipline cre avec succs !")),k(),await X(),setTimeout(()=>j(null),3e3)}catch(_e){console.error("Erreur lors de la sauvegarde:",_e),x("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{p(!1)}},de=async()=>{if(re)try{_(re.id),await Da.delete(re.id),j("Discipline supprime avec succs !"),k(),await X(),setTimeout(()=>j(null),3e3)}catch(Y){console.error("Erreur lors de la suppression:",Y),x("Erreur lors de la suppression. Veuillez ressayer.")}finally{_(null)}},Te=Y=>{for(const _e of Object.values(Qh)){const Qe=_e.find(Ue=>Ue.value===Y);if(Qe)return Qe.label}return Y};return c.jsxs("div",{className:"discipline-manager",children:[c.jsxs("header",{className:"admin-page-header",children:[c.jsxs("div",{className:"admin-page-header__info",children:[c.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Disciplines"}),c.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les matires enseignes sur PedaClic"})]}),c.jsx("div",{className:"admin-page-header__actions",children:c.jsxs("button",{onClick:pe,className:"btn btn--primary",children:[c.jsx("span",{children:""}),"Nouvelle discipline"]})})]}),E&&c.jsxs("div",{className:"alert alert--error",children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:E})}),c.jsx("button",{onClick:()=>x(null),className:"alert__close",children:""})]}),w&&c.jsxs("div",{className:"alert alert--success",children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:w})})]}),c.jsxs("div",{className:"admin-table-container",children:[c.jsxs("div",{className:"admin-table-header",children:[c.jsxs("h2",{className:"admin-table-title",children:["Liste des disciplines (",n.length,")"]}),c.jsxs("div",{className:"admin-table-actions",children:[c.jsxs("div",{className:"search-input",children:[c.jsx("span",{className:"search-input__icon",children:""}),c.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:Le,onChange:Y=>tt(Y.target.value)})]}),c.jsxs("select",{className:"form-select",value:D,onChange:Y=>O(Y.target.value),style:{width:"auto"},children:[c.jsx("option",{value:"",children:"Tous les niveaux"}),DE.map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))]}),c.jsxs("select",{className:"form-select",value:V,onChange:Y=>R(Y.target.value),style:{width:"auto"},disabled:!D,children:[c.jsx("option",{value:"",children:"Toutes les classes"}),D&&Qh[D].map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]})]}),l?c.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Chargement des disciplines..."})]}):n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state__icon",children:""}),c.jsx("h3",{className:"empty-state__title",children:"Aucune discipline trouve"}),c.jsx("p",{className:"empty-state__message",children:Le||D||V?"Aucune discipline ne correspond aux critres de recherche.":"Commencez par crer votre premire discipline."}),!Le&&!D&&!V&&c.jsx("button",{onClick:pe,className:"btn btn--primary",children:"Crer une discipline"})]}):c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Discipline"}),c.jsx("th",{children:"Niveau"}),c.jsx("th",{children:"Classe"}),c.jsx("th",{children:"Coefficient"}),c.jsx("th",{children:"Ordre"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:n.map(Y=>c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{className:"table-cell-icon",children:[c.jsx("div",{className:"table-icon",style:{backgroundColor:`${Y.couleur}20`,color:Y.couleur},children:Y.icone||""}),c.jsxs("div",{children:[c.jsx("strong",{children:Y.nom}),Y.description&&c.jsx("div",{className:"text-muted text-sm",children:Y.description})]})]})}),c.jsx("td",{children:c.jsx("span",{className:`badge badge--${Y.niveau==="college"?"primary":"secondary"}`,children:Y.niveau==="college"?"Collge":"Lyce"})}),c.jsx("td",{children:Te(Y.classe)}),c.jsx("td",{children:Y.coefficient||"-"}),c.jsx("td",{children:Y.ordre}),c.jsx("td",{children:c.jsxs("div",{className:"table-actions",children:[c.jsx("button",{onClick:()=>Pe(Y),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),c.jsx("button",{onClick:()=>De(Y),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:g===Y.id,children:g===Y.id?"":""})]})})]},Y.id))})]})]}),z&&c.jsx("div",{className:"modal-overlay",onClick:k,children:c.jsxs("div",{className:"modal modal--lg",onClick:Y=>Y.stopPropagation(),children:[c.jsxs("div",{className:"modal__header",children:[c.jsx("h2",{className:"modal__title",children:ue?"Modifier la discipline":"Nouvelle discipline"}),c.jsx("button",{onClick:k,className:"modal__close",children:""})]}),c.jsxs("form",{onSubmit:oe,children:[c.jsxs("div",{className:"modal__body",children:[c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",style:{flex:2},children:[c.jsx("label",{className:"form-label form-label--required",children:"Nom de la discipline"}),c.jsx("input",{type:"text",name:"nom",className:`form-input ${A.nom?"form-input--error":""}`,placeholder:"Ex: Mathmatiques, Franais, SVT...",value:le.nom,onChange:J}),A.nom&&c.jsx("span",{className:"form-error",children:A.nom})]}),c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label",children:"Icne"}),c.jsx("input",{type:"text",name:"icone",className:"form-input",placeholder:"",value:le.icone||"",onChange:J,maxLength:4}),c.jsx("span",{className:"form-helper",children:"Emoji uniquement"})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label form-label--required",children:"Niveau"}),c.jsx("select",{name:"niveau",className:`form-select ${A.niveau?"form-select--error":""}`,value:le.niveau,onChange:J,children:DE.map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))}),A.niveau&&c.jsx("span",{className:"form-error",children:A.niveau})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label form-label--required",children:"Classe"}),c.jsx("select",{name:"classe",className:`form-select ${A.classe?"form-select--error":""}`,value:le.classe,onChange:J,children:Qh[le.niveau].map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))}),A.classe&&c.jsx("span",{className:"form-error",children:A.classe})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Coefficient"}),c.jsx("input",{type:"number",name:"coefficient",className:"form-input",min:"1",max:"10",value:le.coefficient||1,onChange:J}),c.jsx("span",{className:"form-helper",children:"Pour les calculs de moyennes"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label form-label--required",children:"Ordre d'affichage"}),c.jsx("input",{type:"number",name:"ordre",className:`form-input ${A.ordre?"form-input--error":""}`,min:"1",value:le.ordre,onChange:J}),A.ordre&&c.jsx("span",{className:"form-error",children:A.ordre})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Couleur"}),c.jsx("div",{className:"color-picker",children:t3.map(Y=>c.jsx("button",{type:"button",className:`color-option ${le.couleur===Y.value?"color-option--active":""}`,style:{backgroundColor:Y.value},onClick:()=>S(_e=>({..._e,couleur:Y.value})),title:Y.label,children:le.couleur===Y.value&&""},Y.value))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Description (optionnel)"}),c.jsx("textarea",{name:"description",className:"form-textarea",placeholder:"Description courte de la discipline...",rows:3,value:le.description||"",onChange:J})]})]}),c.jsxs("div",{className:"modal__footer",children:[c.jsx("button",{type:"button",onClick:k,className:"btn btn--outline",disabled:d,children:"Annuler"}),c.jsx("button",{type:"submit",className:"btn btn--primary",disabled:d,children:d?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"spinner-small"}),"Enregistrement..."]}):ue?"Mettre  jour":"Crer la discipline"})]})]})]})}),q&&re&&c.jsx("div",{className:"modal-overlay",onClick:k,children:c.jsxs("div",{className:"modal",onClick:Y=>Y.stopPropagation(),children:[c.jsxs("div",{className:"modal__header",children:[c.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),c.jsx("button",{onClick:k,className:"modal__close",children:""})]}),c.jsxs("div",{className:"modal__body",children:[c.jsxs("p",{children:["tes-vous sr de vouloir supprimer la discipline",c.jsxs("strong",{children:[" ",re.nom]})," ?"]}),c.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:"Cette action est irrversible. Tous les chapitres et ressources associs devront tre supprims manuellement."})})]})]}),c.jsxs("div",{className:"modal__footer",children:[c.jsx("button",{onClick:k,className:"btn btn--outline",disabled:g!==null,children:"Annuler"}),c.jsx("button",{onClick:de,className:"btn btn--danger",disabled:g!==null,children:g?"Suppression...":"Supprimer"})]})]})}),c.jsx("style",{children:`
        /* Ligne de formulaire */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Slecteur de couleur */
        .color-picker {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .color-option {
          width: 36px;
          height: 36px;
          border: 2px solid transparent;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          transition: all var(--transition-base);
        }

        .color-option:hover {
          transform: scale(1.1);
        }

        .color-option--active {
          border-color: var(--color-text);
          box-shadow: 0 0 0 2px white, 0 0 0 4px var(--color-text);
        }

        /* Fermer l'alerte */
        .alert__close {
          background: none;
          border: none;
          cursor: pointer;
          font-size: var(--text-lg);
          opacity: 0.7;
          transition: opacity var(--transition-base);
        }

        .alert__close:hover {
          opacity: 1;
        }

        /* Spinner petit pour les boutons */
        .spinner-small {
          width: 16px;
          height: 16px;
          border: 2px solid rgba(255, 255, 255, 0.3);
          border-top-color: white;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }

        /* Ajustement du form-select */
        .form-select {
          min-width: 150px;
        }
      `})]})},OE={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},i3=()=>{const[i,e]=M.useState([]),[n,r]=M.useState([]),[l,u]=M.useState(""),[d,p]=M.useState(!0),[g,_]=M.useState(!1),[E,x]=M.useState(!1),[w,j]=M.useState(null),[z,L]=M.useState(null),[q,ee]=M.useState(null),[ue,ae]=M.useState(!1),[re,ve]=M.useState(!1),[le,S]=M.useState(null),[A,C]=M.useState(null),[D,O]=M.useState({...OE,disciplineId:""}),[V,R]=M.useState({}),[Le,tt]=M.useState(""),X=M.useCallback(async()=>{try{p(!0);const W=await Da.getAll();e(W),W.length>0&&!l&&u(W[0].id)}catch(W){console.error("Erreur lors du chargement des disciplines:",W),L("Impossible de charger les disciplines.")}finally{p(!1)}},[l]),ce=M.useCallback(async()=>{if(!l){r([]);return}try{_(!0);const W=await Sr.getByDiscipline(l);r(W)}catch(W){console.error("Erreur lors du chargement des chapitres:",W),L("Impossible de charger les chapitres.")}finally{_(!1)}},[l]);M.useEffect(()=>{X()},[X]),M.useEffect(()=>{ce()},[ce]);const pe=()=>{const W={};return D.disciplineId||(W.disciplineId="Veuillez slectionner une discipline"),D.titre.trim()?D.titre.length<3&&(W.titre="Le titre doit contenir au moins 3 caractres"):W.titre="Le titre du chapitre est requis",D.numero<1&&(W.numero="Le numro doit tre suprieur  0"),R(W),Object.keys(W).length===0},Pe=W=>{u(W),L(null)},De=async()=>{const W=await Sr.getNextNumero(l);S(null),O({...OE,disciplineId:l,numero:W}),R({}),tt(""),ae(!0)},k=W=>{S(W),O({disciplineId:W.disciplineId,numero:W.numero,titre:W.titre,description:W.description,objectifs:W.objectifs||[],dureeEstimee:W.dureeEstimee,isPremium:W.isPremium,actif:W.actif}),R({}),tt(""),ae(!0)},J=W=>{C(W),ve(!0)},oe=()=>{ae(!1),ve(!1),S(null),C(null),R({}),tt("")},de=W=>{const{name:vt,value:Ve,type:Ot}=W.target,zt=W.target.checked;O(nn=>({...nn,[vt]:Ot==="checkbox"?zt:Ot==="number"?Number(Ve):Ve})),V[vt]&&R(nn=>({...nn,[vt]:void 0}))},Te=()=>{Le.trim()&&(O(W=>({...W,objectifs:[...W.objectifs||[],Le.trim()]})),tt(""))},Y=W=>{O(vt=>({...vt,objectifs:(vt.objectifs||[]).filter((Ve,Ot)=>Ot!==W)}))},_e=async W=>{if(W.preventDefault(),!!pe())try{x(!0),L(null),le?(await Sr.update(le.id,D),ee("Chapitre modifi avec succs !")):(await Sr.create(D),ee("Chapitre cr avec succs !")),oe(),await ce(),setTimeout(()=>ee(null),3e3)}catch(vt){console.error("Erreur lors de la sauvegarde:",vt),L("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{x(!1)}},Qe=async()=>{if(A)try{j(A.id),await Sr.delete(A.id),ee("Chapitre supprim avec succs !"),oe(),await ce(),setTimeout(()=>ee(null),3e3)}catch(W){console.error("Erreur lors de la suppression:",W),L("Erreur lors de la suppression. Veuillez ressayer.")}finally{j(null)}},Ue=async W=>{try{await Sr.toggleActive(W.id,!W.actif),await ce(),ee(W.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>ee(null),2e3)}catch{L("Erreur lors de la mise  jour")}},Jt=W=>{const vt=i.find(Ve=>Ve.id===W);return vt?vt.nom:"Non trouve"};return c.jsxs("div",{className:"chapitre-manager",children:[c.jsxs("header",{className:"admin-page-header",children:[c.jsxs("div",{className:"admin-page-header__info",children:[c.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),c.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),c.jsx("div",{className:"admin-page-header__actions",children:c.jsxs("button",{onClick:De,className:"btn btn--primary",disabled:!l||d,children:[c.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),z&&c.jsxs("div",{className:"alert alert--error",children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:z})}),c.jsx("button",{onClick:()=>L(null),className:"alert__close",children:""})]}),q&&c.jsxs("div",{className:"alert alert--success",children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:q})})]}),c.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:c.jsx("div",{className:"content-card__body",children:c.jsxs("div",{className:"discipline-selector",children:[c.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),d?c.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):i.length===0?c.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",c.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):c.jsx("div",{className:"discipline-tabs",children:i.map(W=>c.jsxs("button",{className:`discipline-tab ${l===W.id?"discipline-tab--active":""}`,onClick:()=>Pe(W.id),style:{"--discipline-color":W.couleur||"#2563eb"},children:[c.jsx("span",{className:"discipline-tab__icon",children:W.icone||""}),c.jsx("span",{className:"discipline-tab__name",children:W.nom}),c.jsx("span",{className:"discipline-tab__class",children:W.classe})]},W.id))})]})})}),c.jsxs("div",{className:"admin-table-container",children:[c.jsx("div",{className:"admin-table-header",children:c.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",l&&`- ${Jt(l)}`,n.length>0&&` (${n.length})`]})}),g?c.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Chargement des chapitres..."})]}):l?n.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state__icon",children:""}),c.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),c.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),c.jsx("button",{onClick:De,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):c.jsx("div",{className:"chapitres-list",children:n.map(W=>c.jsxs("div",{className:`chapitre-card ${W.actif?"":"chapitre-card--inactive"}`,children:[c.jsx("div",{className:"chapitre-card__number",children:W.numero}),c.jsxs("div",{className:"chapitre-card__content",children:[c.jsxs("h3",{className:"chapitre-card__title",children:[W.titre,W.isPremium&&c.jsx("span",{className:"badge badge--premium",children:"Premium"}),!W.actif&&c.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),W.description&&c.jsx("p",{className:"chapitre-card__description",children:W.description}),c.jsxs("div",{className:"chapitre-card__meta",children:[W.dureeEstimee&&c.jsxs("span",{children:[" ",W.dureeEstimee,"h estime"]}),W.objectifs&&W.objectifs.length>0&&c.jsxs("span",{children:[" ",W.objectifs.length," objectif(s)"]})]})]}),c.jsxs("div",{className:"chapitre-card__actions",children:[c.jsx("button",{onClick:()=>Ue(W),className:`table-action-btn ${W.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:W.actif?"Dsactiver":"Activer",children:W.actif?"":""}),c.jsx("button",{onClick:()=>k(W),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),c.jsx("button",{onClick:()=>J(W),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:w===W.id,children:w===W.id?"":""})]})]},W.id))}):c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state__icon",children:""}),c.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),c.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),ue&&c.jsx("div",{className:"modal-overlay",onClick:oe,children:c.jsxs("div",{className:"modal modal--lg",onClick:W=>W.stopPropagation(),children:[c.jsxs("div",{className:"modal__header",children:[c.jsx("h2",{className:"modal__title",children:le?"Modifier le chapitre":"Nouveau chapitre"}),c.jsx("button",{onClick:oe,className:"modal__close",children:""})]}),c.jsxs("form",{onSubmit:_e,children:[c.jsxs("div",{className:"modal__body",children:[!le&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),c.jsxs("select",{name:"disciplineId",className:`form-select ${V.disciplineId?"form-select--error":""}`,value:D.disciplineId,onChange:de,children:[c.jsx("option",{value:"",children:"Slectionner une discipline"}),i.map(W=>c.jsxs("option",{value:W.id,children:[W.icone," ",W.nom," (",W.classe,")"]},W.id))]}),V.disciplineId&&c.jsx("span",{className:"form-error",children:V.disciplineId})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[c.jsx("label",{className:"form-label form-label--required",children:"N"}),c.jsx("input",{type:"number",name:"numero",className:`form-input ${V.numero?"form-input--error":""}`,min:"1",value:D.numero,onChange:de}),V.numero&&c.jsx("span",{className:"form-error",children:V.numero})]}),c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),c.jsx("input",{type:"text",name:"titre",className:`form-input ${V.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:D.titre,onChange:de}),V.titre&&c.jsx("span",{className:"form-error",children:V.titre})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Description"}),c.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:D.description||"",onChange:de})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),c.jsxs("div",{className:"objectifs-input",children:[c.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:Le,onChange:W=>tt(W.target.value),onKeyPress:W=>W.key==="Enter"&&(W.preventDefault(),Te())}),c.jsx("button",{type:"button",onClick:Te,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),D.objectifs&&D.objectifs.length>0&&c.jsx("ul",{className:"objectifs-list",children:D.objectifs.map((W,vt)=>c.jsxs("li",{className:"objectif-item",children:[c.jsxs("span",{children:[" ",W]}),c.jsx("button",{type:"button",onClick:()=>Y(vt),className:"objectif-remove",children:""})]},vt))})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),c.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:D.dureeEstimee||"",onChange:de})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Options"}),c.jsxs("div",{className:"form-options",children:[c.jsxs("label",{className:"form-checkbox",children:[c.jsx("input",{type:"checkbox",name:"isPremium",checked:D.isPremium,onChange:de}),c.jsx("span",{children:"Contenu Premium "})]}),c.jsxs("label",{className:"form-checkbox",children:[c.jsx("input",{type:"checkbox",name:"actif",checked:D.actif!==!1,onChange:de}),c.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),c.jsxs("div",{className:"modal__footer",children:[c.jsx("button",{type:"button",onClick:oe,className:"btn btn--outline",disabled:E,children:"Annuler"}),c.jsx("button",{type:"submit",className:"btn btn--primary",disabled:E,children:E?"Enregistrement...":le?"Mettre  jour":"Crer le chapitre"})]})]})]})}),re&&A&&c.jsx("div",{className:"modal-overlay",onClick:oe,children:c.jsxs("div",{className:"modal",onClick:W=>W.stopPropagation(),children:[c.jsxs("div",{className:"modal__header",children:[c.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),c.jsx("button",{onClick:oe,className:"modal__close",children:""})]}),c.jsxs("div",{className:"modal__body",children:[c.jsxs("p",{children:["Supprimer le chapitre ",c.jsxs("strong",{children:[A.numero,". ",A.titre]})," ?"]}),c.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),c.jsxs("div",{className:"modal__footer",children:[c.jsx("button",{onClick:oe,className:"btn btn--outline",children:"Annuler"}),c.jsx("button",{onClick:Qe,className:"btn btn--danger",disabled:w!==null,children:w?"Suppression...":"Supprimer"})]})]})}),c.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},$h=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],Yh={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},xp=50,kE={titre:"",type:"cours",description:"",contenu:"",chapitreId:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},s3=()=>{const{currentUser:i}=Hs(),[e,n]=M.useState([]),[r,l]=M.useState([]),[u,d]=M.useState([]),[p,g]=M.useState([]),[_,E]=M.useState(""),[x,w]=M.useState(""),[j,z]=M.useState(""),[L,q]=M.useState(""),[ee,ue]=M.useState(""),[ae,re]=M.useState(!0),[ve,le]=M.useState(!1),[S,A]=M.useState(!1),[C,D]=M.useState(!1),[O,V]=M.useState(null),[R,Le]=M.useState(!1),[tt,X]=M.useState(0),[ce,pe]=M.useState(null),[Pe,De]=M.useState(null),[k,J]=M.useState(!1),[oe,de]=M.useState(!1),[Te,Y]=M.useState(!1),[_e,Qe]=M.useState(null),[Ue,Jt]=M.useState(null),[W,vt]=M.useState(null),[Ve,Ot]=M.useState({...kE,disciplineId:""}),[zt,nn]=M.useState({}),[Zt,_i]=M.useState(null),[mt,pt]=M.useState(null),ti=M.useRef(null),[Gs,Oi]=M.useState(""),sn=M.useCallback(async()=>{try{re(!0);const B=await Da.getAll();n(B),B.length>0&&!_&&E(B[0].id)}catch(B){console.error("Erreur lors du chargement des disciplines:",B),pe("Impossible de charger les disciplines.")}finally{re(!1)}},[_]),ki=M.useCallback(async()=>{if(!_){l([]);return}try{le(!0);const B=await Sr.getByDiscipline(_);l(B)}catch(B){console.error("Erreur lors du chargement des chapitres:",B)}finally{le(!1)}},[_]),yi=M.useCallback(async()=>{if(!_){d([]),g([]);return}try{A(!0);const B=await Ar.getByDiscipline(_);d(B),g(B)}catch(B){console.error("Erreur lors du chargement des ressources:",B),pe("Impossible de charger les ressources.")}finally{A(!1)}},[_]);M.useEffect(()=>{sn()},[sn]),M.useEffect(()=>{ki()},[ki]),M.useEffect(()=>{yi()},[yi]),M.useEffect(()=>{let B=[...u];if(x&&(B=B.filter(xe=>xe.chapitreId===x)),j&&(B=B.filter(xe=>xe.type===j)),L==="premium"?B=B.filter(xe=>xe.isPremium):L==="free"&&(B=B.filter(xe=>!xe.isPremium)),ee){const xe=ee.toLowerCase();B=B.filter(Ye=>Ye.titre.toLowerCase().includes(xe)||Ye.description?.toLowerCase().includes(xe)||Ye.tags?.some(rn=>rn.toLowerCase().includes(xe)))}g(B)},[u,x,j,L,ee]);const ea=()=>{const B={};if(Ve.disciplineId||(B.disciplineId="Veuillez slectionner une discipline"),Ve.titre.trim()?Ve.titre.length<3&&(B.titre="Le titre doit contenir au moins 3 caractres"):B.titre="Le titre est requis",Ve.type||(B.type="Veuillez slectionner un type de ressource"),Zt){const xe="."+Zt.name.split(".").pop()?.toLowerCase(),Ye=Yh[Ve.type];Ye.includes(xe)||(B.fichier=`Extension non autorise. Extensions acceptes : ${Ye.join(", ")}`),Zt.size/(1024*1024)>xp&&(B.fichier=`Le fichier est trop volumineux (max ${xp} Mo)`)}return nn(B),Object.keys(B).length===0},Mi=B=>{E(B),w(""),pe(null)},Ya=()=>{Qe(null),Ot({...kE,disciplineId:_}),nn({}),_i(null),pt(null),Oi(""),J(!0)},Xa=B=>{Qe(B),Ot({disciplineId:B.disciplineId,titre:B.titre,type:B.type,description:B.description,contenu:B.contenu,chapitreId:B.chapitreId||"",ordre:B.ordre,isPremium:B.isPremium,actif:B.actif,tags:B.tags||[],duree:B.duree,urlExterne:B.urlExterne||""}),nn({}),_i(null),pt(B.fichierUrl||null),Oi(""),J(!0)},Wa=B=>{vt(B),Y(!0)},Ja=B=>{Jt(B),de(!0)},At=()=>{J(!1),de(!1),Y(!1),Qe(null),Jt(null),vt(null),nn({}),_i(null),pt(null),Oi("")},rt=B=>{const{name:xe,value:Ye,type:rn}=B.target,na=B.target.checked;Ot(Rn=>({...Rn,[xe]:rn==="checkbox"?na:rn==="number"?Number(Ye):Ye})),zt[xe]&&nn(Rn=>({...Rn,[xe]:void 0}))},Cn=B=>{const xe=B.target.files?.[0];if(xe)if(_i(xe),nn(Ye=>({...Ye,fichier:void 0})),xe.type.startsWith("image/")||xe.type.startsWith("video/")){const Ye=new FileReader;Ye.onloadend=()=>{pt(Ye.result)},Ye.readAsDataURL(xe)}else pt(null)},wt=()=>{_i(null),pt(null),ti.current&&(ti.current.value="")},ta=()=>{Gs.trim()&&!Ve.tags?.includes(Gs.trim())&&(Ot(B=>({...B,tags:[...B.tags||[],Gs.trim()]})),Oi(""))},Ks=B=>{Ot(xe=>({...xe,tags:(xe.tags||[]).filter((Ye,rn)=>rn!==B)}))},Za=async B=>{if(B.preventDefault(),!!ea())try{D(!0),pe(null);let xe=_e?.fichierUrl,Ye=_e?.fichierNom;if(Zt){Le(!0);const na=_e?.id||`temp_${Date.now()}`,Rn=await Ar.uploadFile(Zt,na,ia=>X(ia));xe=Rn.url,Ye=Rn.nom,Le(!1)}const rn={...Ve,fichierUrl:xe,fichierNom:Ye,auteurId:i?.uid};_e?(await Ar.update(_e.id,rn),De("Ressource modifie avec succs !")):(await Ar.create(rn),De("Ressource cre avec succs !")),At(),await yi(),setTimeout(()=>De(null),3e3)}catch(xe){console.error("Erreur lors de la sauvegarde:",xe),pe("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{D(!1),Le(!1),X(0)}},ni=async()=>{if(Ue)try{V(Ue.id),Ue.fichierUrl&&await Ar.deleteFile(Ue.fichierUrl),await Ar.delete(Ue.id),De("Ressource supprime avec succs !"),At(),await yi(),setTimeout(()=>De(null),3e3)}catch(B){console.error("Erreur lors de la suppression:",B),pe("Erreur lors de la suppression. Veuillez ressayer.")}finally{V(null)}},us=async B=>{try{await Ar.togglePremium(B.id,!B.isPremium),await yi(),De(B.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>De(null),2e3)}catch{pe("Erreur lors de la mise  jour")}},St=B=>{const xe=e.find(Ye=>Ye.id===B);return xe?xe.nom:"Non trouve"},ii=B=>{const xe=r.find(Ye=>Ye.id===B);return xe?`${xe.numero}. ${xe.titre}`:""},yn=B=>$h.find(xe=>xe.value===B)||$h[0],zn=B=>B<1024?B+" o":B<1024*1024?(B/1024).toFixed(1)+" Ko":(B/(1024*1024)).toFixed(1)+" Mo";return c.jsxs("div",{className:"resource-manager",children:[c.jsxs("header",{className:"admin-page-header",children:[c.jsxs("div",{className:"admin-page-header__info",children:[c.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),c.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),c.jsx("div",{className:"admin-page-header__actions",children:c.jsxs("button",{onClick:Ya,className:"btn btn--primary",disabled:!_||ae,children:[c.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),ce&&c.jsxs("div",{className:"alert alert--error",children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:ce})}),c.jsx("button",{onClick:()=>pe(null),className:"alert__close",children:""})]}),Pe&&c.jsxs("div",{className:"alert alert--success",children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:Pe})})]}),c.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:c.jsx("div",{className:"content-card__body",children:c.jsxs("div",{className:"discipline-selector",children:[c.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),ae?c.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?c.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",c.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):c.jsx("div",{className:"discipline-tabs",children:e.map(B=>c.jsxs("button",{className:`discipline-tab ${_===B.id?"discipline-tab--active":""}`,onClick:()=>Mi(B.id),style:{"--discipline-color":B.couleur||"#2563eb"},children:[c.jsx("span",{className:"discipline-tab__icon",children:B.icone||""}),c.jsx("span",{className:"discipline-tab__name",children:B.nom}),c.jsx("span",{className:"discipline-tab__class",children:B.classe})]},B.id))})]})})}),c.jsxs("div",{className:"admin-table-container",children:[c.jsxs("div",{className:"admin-table-header",children:[c.jsxs("h2",{className:"admin-table-title",children:["Ressources ",_&&`- ${St(_)}`,p.length>0&&` (${p.length})`]}),c.jsxs("div",{className:"admin-table-actions",children:[c.jsxs("div",{className:"search-input",children:[c.jsx("span",{className:"search-input__icon",children:""}),c.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:ee,onChange:B=>ue(B.target.value)})]}),c.jsxs("select",{className:"form-select form-select--sm",value:x,onChange:B=>w(B.target.value),disabled:ve||r.length===0,children:[c.jsx("option",{value:"",children:"Tous les chapitres"}),r.map(B=>c.jsxs("option",{value:B.id,children:[B.numero,". ",B.titre]},B.id))]}),c.jsxs("select",{className:"form-select form-select--sm",value:j,onChange:B=>z(B.target.value),children:[c.jsx("option",{value:"",children:"Tous les types"}),$h.map(B=>c.jsxs("option",{value:B.value,children:[B.icon," ",B.label]},B.value))]}),c.jsxs("select",{className:"form-select form-select--sm",value:L,onChange:B=>q(B.target.value),children:[c.jsx("option",{value:"",children:"Tous"}),c.jsx("option",{value:"premium",children:" Premium"}),c.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),S?c.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Chargement des ressources..."})]}):_?p.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state__icon",children:""}),c.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),c.jsx("p",{className:"empty-state__message",children:ee||j||L||x?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!ee&&!j&&!L&&!x&&c.jsx("button",{onClick:Ya,className:"btn btn--primary",children:"Crer la premire ressource"})]}):c.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:p.map(B=>{const xe=yn(B.type);return c.jsxs("div",{className:"resource-item",children:[c.jsx("div",{className:`resource-item__icon resource-item__icon--${B.type}`,style:{backgroundColor:`${xe.color}15`,color:xe.color},children:xe.icon}),c.jsxs("div",{className:"resource-item__content",children:[c.jsxs("div",{className:"resource-item__title",children:[B.titre,B.isPremium&&c.jsx("span",{className:"badge badge--premium",children:"Premium"}),!B.actif&&c.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),c.jsxs("div",{className:"resource-item__meta",children:[c.jsx("span",{children:xe.label}),B.chapitreId&&c.jsxs("span",{children:[" ",ii(B.chapitreId)]}),B.duree&&c.jsxs("span",{children:[" ",B.duree," min"]}),B.fichierNom&&c.jsxs("span",{children:[" ",B.fichierNom]}),B.tags&&B.tags.length>0&&c.jsxs("span",{children:[" ",B.tags.join(", ")]})]})]}),c.jsxs("div",{className:"resource-item__actions",children:[c.jsx("button",{onClick:()=>us(B),className:`table-action-btn ${B.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:B.isPremium?"Passer en gratuit":"Passer en Premium",children:B.isPremium?"":""}),(B.fichierUrl||B.urlExterne)&&c.jsx("button",{onClick:()=>Wa(B),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),c.jsx("button",{onClick:()=>Xa(B),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),c.jsx("button",{onClick:()=>Ja(B),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:O===B.id,children:O===B.id?"":""})]})]},B.id)})}):c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state__icon",children:""}),c.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),c.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),k&&c.jsx("div",{className:"modal-overlay",onClick:At,children:c.jsxs("div",{className:"modal modal--xl",onClick:B=>B.stopPropagation(),children:[c.jsxs("div",{className:"modal__header",children:[c.jsx("h2",{className:"modal__title",children:_e?"Modifier la ressource":"Nouvelle ressource"}),c.jsx("button",{onClick:At,className:"modal__close",children:""})]}),c.jsxs("form",{onSubmit:Za,children:[c.jsxs("div",{className:"modal__body",children:[!_e&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),c.jsxs("select",{name:"disciplineId",className:`form-select ${zt.disciplineId?"form-select--error":""}`,value:Ve.disciplineId,onChange:rt,children:[c.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(B=>c.jsxs("option",{value:B.id,children:[B.icone," ",B.nom," (",B.classe,")"]},B.id))]}),zt.disciplineId&&c.jsx("span",{className:"form-error",children:zt.disciplineId})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",style:{flex:2},children:[c.jsx("label",{className:"form-label form-label--required",children:"Titre"}),c.jsx("input",{type:"text",name:"titre",className:`form-input ${zt.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:Ve.titre,onChange:rt}),zt.titre&&c.jsx("span",{className:"form-error",children:zt.titre})]}),c.jsxs("div",{className:"form-group",style:{flex:1},children:[c.jsx("label",{className:"form-label form-label--required",children:"Type"}),c.jsx("select",{name:"type",className:`form-select ${zt.type?"form-select--error":""}`,value:Ve.type,onChange:rt,children:$h.map(B=>c.jsxs("option",{value:B.value,children:[B.icon," ",B.label]},B.value))}),zt.type&&c.jsx("span",{className:"form-error",children:zt.type})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),c.jsxs("select",{name:"chapitreId",className:"form-select",value:Ve.chapitreId||"",onChange:rt,disabled:ve,children:[c.jsx("option",{value:"",children:"Aucun chapitre"}),r.map(B=>c.jsxs("option",{value:B.id,children:[B.numero,". ",B.titre]},B.id))]})]}),c.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[c.jsx("label",{className:"form-label",children:"Ordre"}),c.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:Ve.ordre,onChange:rt})]}),c.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[c.jsx("label",{className:"form-label",children:"Dure (min)"}),c.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:Ve.duree||"",onChange:rt})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Description"}),c.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:Ve.description||"",onChange:rt})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label",children:["Fichier",c.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",Yh[Ve.type].join(", ")," - max ",xp," Mo)"]})]}),c.jsxs("div",{className:"file-upload",children:[c.jsx("input",{ref:ti,type:"file",accept:Yh[Ve.type].join(","),onChange:Cn,className:"file-upload__input",id:"file-input"}),!Zt&&!mt?c.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[c.jsx("div",{className:"file-upload__icon",children:""}),c.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),c.jsx("p",{className:"file-upload__hint",children:Yh[Ve.type].join(", ")})]}):c.jsxs("div",{className:"file-upload__preview",children:[Zt?.type.startsWith("image/")&&mt&&c.jsx("img",{src:mt,alt:"Aperu",className:"file-preview__image"}),Zt?.type.startsWith("video/")&&mt&&c.jsx("video",{src:mt,controls:!0,className:"file-preview__video"}),!Zt?.type.startsWith("image/")&&!Zt?.type.startsWith("video/")&&c.jsx("div",{className:"file-preview__document",children:c.jsx("span",{className:"file-preview__icon",children:yn(Ve.type).icon})}),c.jsxs("div",{className:"file-preview__info",children:[c.jsx("p",{className:"file-preview__name",children:Zt?.name||_e?.fichierNom}),Zt&&c.jsx("p",{className:"file-preview__size",children:zn(Zt.size)})]}),c.jsx("button",{type:"button",onClick:wt,className:"file-preview__remove",children:""})]})]}),zt.fichier&&c.jsx("span",{className:"form-error",children:zt.fichier}),R&&c.jsxs("div",{className:"upload-progress",children:[c.jsx("div",{className:"upload-progress__bar",style:{width:`${tt}%`}}),c.jsxs("span",{className:"upload-progress__text",children:[tt,"%"]})]})]}),Ve.type==="video"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),c.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:Ve.urlExterne||"",onChange:rt}),c.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),Ve.type==="cours"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contenu du cours"}),c.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:Ve.contenu||"",onChange:rt}),c.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Tags"}),c.jsxs("div",{className:"tags-input",children:[c.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:Gs,onChange:B=>Oi(B.target.value),onKeyPress:B=>B.key==="Enter"&&(B.preventDefault(),ta())}),c.jsx("button",{type:"button",onClick:ta,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),Ve.tags&&Ve.tags.length>0&&c.jsx("div",{className:"tags-list",children:Ve.tags.map((B,xe)=>c.jsxs("span",{className:"tag",children:[B,c.jsx("button",{type:"button",onClick:()=>Ks(xe),className:"tag__remove",children:""})]},xe))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Options"}),c.jsxs("div",{className:"form-options",children:[c.jsxs("label",{className:"form-checkbox",children:[c.jsx("input",{type:"checkbox",name:"isPremium",checked:Ve.isPremium,onChange:rt}),c.jsx("span",{children:"Contenu Premium "})]}),c.jsxs("label",{className:"form-checkbox",children:[c.jsx("input",{type:"checkbox",name:"actif",checked:Ve.actif!==!1,onChange:rt}),c.jsx("span",{children:"Ressource active"})]})]})]})]}),c.jsxs("div",{className:"modal__footer",children:[c.jsx("button",{type:"button",onClick:At,className:"btn btn--outline",disabled:C||R,children:"Annuler"}),c.jsx("button",{type:"submit",className:"btn btn--primary",disabled:C||R,children:C||R?R?`Upload ${tt}%...`:"Enregistrement...":_e?"Mettre  jour":"Crer la ressource"})]})]})]})}),Te&&W&&c.jsx("div",{className:"modal-overlay",onClick:At,children:c.jsxs("div",{className:"modal modal--xl",onClick:B=>B.stopPropagation(),children:[c.jsxs("div",{className:"modal__header",children:[c.jsxs("h2",{className:"modal__title",children:[yn(W.type).icon," ",W.titre]}),c.jsx("button",{onClick:At,className:"modal__close",children:""})]}),c.jsxs("div",{className:"modal__body",children:[W.type==="video"&&W.urlExterne?c.jsx("div",{className:"preview-video",children:c.jsx("iframe",{src:W.urlExterne.replace("watch?v=","embed/"),title:W.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):W.fichierUrl?c.jsx("div",{className:"preview-file",children:W.fichierUrl.match(/\.(jpg|jpeg|png|gif|webp)$/i)?c.jsx("img",{src:W.fichierUrl,alt:W.titre}):W.fichierUrl.match(/\.(mp4|webm)$/i)?c.jsx("video",{src:W.fichierUrl,controls:!0}):W.fichierUrl.match(/\.pdf$/i)?c.jsx("iframe",{src:W.fichierUrl,title:W.titre}):c.jsxs("div",{className:"preview-download",children:[c.jsx("span",{className:"preview-download__icon",children:yn(W.type).icon}),c.jsx("p",{children:W.fichierNom}),c.jsx("a",{href:W.fichierUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):W.contenu?c.jsx("div",{className:"preview-content",children:c.jsx("p",{children:W.contenu})}):c.jsx("div",{className:"preview-empty",children:c.jsx("p",{children:"Aucun contenu  prvisualiser"})}),c.jsxs("div",{className:"preview-info",children:[W.description&&c.jsx("p",{className:"preview-description",children:W.description}),c.jsxs("div",{className:"preview-meta",children:[c.jsxs("span",{children:["Type : ",yn(W.type).label]}),W.duree&&c.jsxs("span",{children:["Dure : ",W.duree," min"]}),W.isPremium&&c.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),oe&&Ue&&c.jsx("div",{className:"modal-overlay",onClick:At,children:c.jsxs("div",{className:"modal",onClick:B=>B.stopPropagation(),children:[c.jsxs("div",{className:"modal__header",children:[c.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),c.jsx("button",{onClick:At,className:"modal__close",children:""})]}),c.jsxs("div",{className:"modal__body",children:[c.jsxs("p",{children:["Supprimer la ressource ",c.jsx("strong",{children:Ue.titre})," ?"]}),Ue.fichierUrl&&c.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[c.jsx("span",{className:"alert__icon",children:""}),c.jsx("div",{className:"alert__content",children:c.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),c.jsxs("div",{className:"modal__footer",children:[c.jsx("button",{onClick:At,className:"btn btn--outline",children:"Annuler"}),c.jsx("button",{onClick:ni,className:"btn btn--danger",disabled:O!==null,children:O?"Suppression...":"Supprimer"})]})]})}),c.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},r3=()=>c.jsx(vO,{children:c.jsxs(OA,{children:[c.jsx(Vn,{path:"/",element:c.jsx(Kh,{children:c.jsx(Rk,{})})}),c.jsx(Vn,{path:"/disciplines",element:c.jsx(Kh,{children:c.jsx(Mk,{})})}),c.jsx(Vn,{path:"/disciplines/:id",element:c.jsx(Kh,{children:c.jsx(Yk,{})})}),c.jsx(Vn,{path:"/premium",element:c.jsx(Kh,{children:c.jsx(Jk,{})})}),c.jsx(Vn,{path:"/connexion",element:c.jsx(jk,{})}),c.jsx(Vn,{path:"/inscription",element:c.jsx(Ik,{})}),c.jsx(Vn,{path:"/admin",element:c.jsx(zl,{children:c.jsx(ql,{currentPage:"dashboard",children:c.jsx(e3,{})})})}),c.jsx(Vn,{path:"/admin/disciplines",element:c.jsx(zl,{children:c.jsx(ql,{currentPage:"disciplines",children:c.jsx(n3,{})})})}),c.jsx(Vn,{path:"/admin/chapitres",element:c.jsx(zl,{children:c.jsx(ql,{currentPage:"chapitres",children:c.jsx(i3,{})})})}),c.jsx(Vn,{path:"/admin/ressources",element:c.jsx(zl,{children:c.jsx(ql,{currentPage:"ressources",children:c.jsx(s3,{})})})}),c.jsx(Vn,{path:"/admin/quiz",element:c.jsx(zl,{children:c.jsx(ql,{currentPage:"quiz",children:c.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:c.jsx("h2",{children:" Quiz - Bientt disponible"})})})})}),c.jsx(Vn,{path:"/admin/utilisateurs",element:c.jsx(zl,{children:c.jsx(ql,{currentPage:"utilisateurs",children:c.jsx("div",{style:{padding:"3rem",textAlign:"center"},children:c.jsx("h2",{children:" Utilisateurs - Bientt disponible"})})})})}),c.jsx(Vn,{path:"*",element:c.jsx(IA,{to:"/",replace:!0})})]})}),WT=document.getElementById("root");if(!WT)throw new Error("L'lment #root n'existe pas");const a3=UN.createRoot(WT);a3.render(c.jsx(PE.StrictMode,{children:c.jsx(zA,{children:c.jsx(r3,{})})}));
//# sourceMappingURL=index-Ca7AhSQI.js.map
