function mV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ea(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nx={exports:{}},zf={};var kC;function pV(){if(kC)return zf;kC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var u in i)u!=="key"&&(a[u]=i[u])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:a}}return zf.Fragment=e,zf.jsx=n,zf.jsxs=n,zf}var DC;function gV(){return DC||(DC=1,Nx.exports=pV()),Nx.exports}var o=gV(),Sx={exports:{}},Xe={};var MC;function vV(){if(MC)return Xe;MC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=y&&F[y]||F["@@iterator"],typeof F=="function"?F:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function A(F,re,ye){this.props=F,this.context=re,this.refs=N,this.updater=ye||E}A.prototype.isReactComponent={},A.prototype.setState=function(F,re){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,re,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function k(){}k.prototype=A.prototype;function O(F,re,ye){this.props=F,this.context=re,this.refs=N,this.updater=ye||E}var C=O.prototype=new k;C.constructor=O,j(C,A.prototype),C.isPureReactComponent=!0;var V=Array.isArray;function $(){}var D={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function R(F,re,ye){var Ee=ye.ref;return{$$typeof:t,type:F,key:re,ref:Ee!==void 0?Ee:null,props:ye}}function q(F,re){return R(F.type,re,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function M(F){var re={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ye){return re[ye]})}var U=/\/+/g;function ge(F,re){return typeof F=="object"&&F!==null&&F.key!=null?M(""+F.key):re.toString(36)}function Z(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then($,$):(F.status="pending",F.then(function(re){F.status==="pending"&&(F.status="fulfilled",F.value=re)},function(re){F.status==="pending"&&(F.status="rejected",F.reason=re)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function H(F,re,ye,Ee,J){var ne=typeof F;(ne==="undefined"||ne==="boolean")&&(F=null);var pe=!1;if(F===null)pe=!0;else switch(ne){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(F.$$typeof){case t:case e:pe=!0;break;case p:return pe=F._init,H(pe(F._payload),re,ye,Ee,J)}}if(pe)return J=J(F),pe=Ee===""?"."+ge(F,0):Ee,V(J)?(ye="",pe!=null&&(ye=pe.replace(U,"$&/")+"/"),H(J,re,ye,"",function(X){return X})):J!=null&&(L(J)&&(J=q(J,ye+(J.key==null||F&&F.key===J.key?"":(""+J.key).replace(U,"$&/")+"/")+pe)),re.push(J)),1;pe=0;var De=Ee===""?".":Ee+":";if(V(F))for(var se=0;se<F.length;se++)Ee=F[se],ne=De+ge(Ee,se),pe+=H(Ee,re,ye,ne,J);else if(se=x(F),typeof se=="function")for(F=se.call(F),se=0;!(Ee=F.next()).done;)Ee=Ee.value,ne=De+ge(Ee,se++),pe+=H(Ee,re,ye,ne,J);else if(ne==="object"){if(typeof F.then=="function")return H(Z(F),re,ye,Ee,J);throw re=String(F),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return pe}function ce(F,re,ye){if(F==null)return F;var Ee=[],J=0;return H(F,Ee,"","",function(ne){return re.call(ye,ne,J++)}),Ee}function Y(F){if(F._status===-1){var re=F._result;re=re(),re.then(function(ye){(F._status===0||F._status===-1)&&(F._status=1,F._result=ye)},function(ye){(F._status===0||F._status===-1)&&(F._status=2,F._result=ye)}),F._status===-1&&(F._status=0,F._result=re)}if(F._status===1)return F._result.default;throw F._result}var we=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Q={map:ce,forEach:function(F,re,ye){ce(F,function(){re.apply(this,arguments)},ye)},count:function(F){var re=0;return ce(F,function(){re++}),re},toArray:function(F){return ce(F,function(re){return re})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Xe.Activity=g,Xe.Children=Q,Xe.Component=A,Xe.Fragment=n,Xe.Profiler=i,Xe.PureComponent=O,Xe.StrictMode=r,Xe.Suspense=f,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},Xe.cache=function(F){return function(){return F.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(F,re,ye){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Ee=j({},F.props),J=F.key;if(re!=null)for(ne in re.key!==void 0&&(J=""+re.key),re)!P.call(re,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&re.ref===void 0||(Ee[ne]=re[ne]);var ne=arguments.length-2;if(ne===1)Ee.children=ye;else if(1<ne){for(var pe=Array(ne),De=0;De<ne;De++)pe[De]=arguments[De+2];Ee.children=pe}return R(F.type,J,Ee)},Xe.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Xe.createElement=function(F,re,ye){var Ee,J={},ne=null;if(re!=null)for(Ee in re.key!==void 0&&(ne=""+re.key),re)P.call(re,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(J[Ee]=re[Ee]);var pe=arguments.length-2;if(pe===1)J.children=ye;else if(1<pe){for(var De=Array(pe),se=0;se<pe;se++)De[se]=arguments[se+2];J.children=De}if(F&&F.defaultProps)for(Ee in pe=F.defaultProps,pe)J[Ee]===void 0&&(J[Ee]=pe[Ee]);return R(F,ne,J)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(F){return{$$typeof:u,render:F}},Xe.isValidElement=L,Xe.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:Y}},Xe.memo=function(F,re){return{$$typeof:h,type:F,compare:re===void 0?null:re}},Xe.startTransition=function(F){var re=D.T,ye={};D.T=ye;try{var Ee=F(),J=D.S;J!==null&&J(ye,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then($,we)}catch(ne){we(ne)}finally{re!==null&&ye.types!==null&&(re.types=ye.types),D.T=re}},Xe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Xe.use=function(F){return D.H.use(F)},Xe.useActionState=function(F,re,ye){return D.H.useActionState(F,re,ye)},Xe.useCallback=function(F,re){return D.H.useCallback(F,re)},Xe.useContext=function(F){return D.H.useContext(F)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(F,re){return D.H.useDeferredValue(F,re)},Xe.useEffect=function(F,re){return D.H.useEffect(F,re)},Xe.useEffectEvent=function(F){return D.H.useEffectEvent(F)},Xe.useId=function(){return D.H.useId()},Xe.useImperativeHandle=function(F,re,ye){return D.H.useImperativeHandle(F,re,ye)},Xe.useInsertionEffect=function(F,re){return D.H.useInsertionEffect(F,re)},Xe.useLayoutEffect=function(F,re){return D.H.useLayoutEffect(F,re)},Xe.useMemo=function(F,re){return D.H.useMemo(F,re)},Xe.useOptimistic=function(F,re){return D.H.useOptimistic(F,re)},Xe.useReducer=function(F,re,ye){return D.H.useReducer(F,re,ye)},Xe.useRef=function(F){return D.H.useRef(F)},Xe.useState=function(F){return D.H.useState(F)},Xe.useSyncExternalStore=function(F,re,ye){return D.H.useSyncExternalStore(F,re,ye)},Xe.useTransition=function(){return D.H.useTransition()},Xe.version="19.2.4",Xe}var zC;function yd(){return zC||(zC=1,Sx.exports=vV()),Sx.exports}var w=yd();const JD=ea(w),ZD=mV({__proto__:null,default:JD},[w]);var Ax={exports:{}},Lf={},Tx={exports:{}},Cx={};var LC;function yV(){return LC||(LC=1,(function(t){function e(H,ce){var Y=H.length;H.push(ce);e:for(;0<Y;){var we=Y-1>>>1,Q=H[we];if(0<i(Q,ce))H[we]=ce,H[Y]=Q,Y=we;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ce=H[0],Y=H.pop();if(Y!==ce){H[0]=Y;e:for(var we=0,Q=H.length,F=Q>>>1;we<F;){var re=2*(we+1)-1,ye=H[re],Ee=re+1,J=H[Ee];if(0>i(ye,Y))Ee<Q&&0>i(J,ye)?(H[we]=J,H[Ee]=Y,we=Ee):(H[we]=ye,H[re]=Y,we=re);else if(Ee<Q&&0>i(J,Y))H[we]=J,H[Ee]=Y,we=Ee;else break e}}return ce}function i(H,ce){var Y=H.sortIndex-ce.sortIndex;return Y!==0?Y:H.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],h=[],p=1,g=null,y=3,x=!1,E=!1,j=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function C(H){for(var ce=n(h);ce!==null;){if(ce.callback===null)r(h);else if(ce.startTime<=H)r(h),ce.sortIndex=ce.expirationTime,e(f,ce);else break;ce=n(h)}}function V(H){if(j=!1,C(H),!E)if(n(f)!==null)E=!0,$||($=!0,M());else{var ce=n(h);ce!==null&&Z(V,ce.startTime-H)}}var $=!1,D=-1,P=5,R=-1;function q(){return N?!0:!(t.unstable_now()-R<P)}function L(){if(N=!1,$){var H=t.unstable_now();R=H;var ce=!0;try{e:{E=!1,j&&(j=!1,k(D),D=-1),x=!0;var Y=y;try{t:{for(C(H),g=n(f);g!==null&&!(g.expirationTime>H&&q());){var we=g.callback;if(typeof we=="function"){g.callback=null,y=g.priorityLevel;var Q=we(g.expirationTime<=H);if(H=t.unstable_now(),typeof Q=="function"){g.callback=Q,C(H),ce=!0;break t}g===n(f)&&r(f),C(H)}else r(f);g=n(f)}if(g!==null)ce=!0;else{var F=n(h);F!==null&&Z(V,F.startTime-H),ce=!1}}break e}finally{g=null,y=Y,x=!1}ce=void 0}}finally{ce?M():$=!1}}}var M;if(typeof O=="function")M=function(){O(L)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ge=U.port2;U.port1.onmessage=L,M=function(){ge.postMessage(null)}}else M=function(){A(L,0)};function Z(H,ce){D=A(function(){H(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var ce=3;break;default:ce=y}var Y=y;y=ce;try{return H()}finally{y=Y}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(H,ce){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Y=y;y=H;try{return ce()}finally{y=Y}},t.unstable_scheduleCallback=function(H,ce,Y){var we=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?we+Y:we):Y=we,H){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Y+Q,H={id:p++,callback:ce,priorityLevel:H,startTime:Y,expirationTime:Q,sortIndex:-1},Y>we?(H.sortIndex=Y,e(h,H),n(f)===null&&H===n(h)&&(j?(k(D),D=-1):j=!0,Z(V,Y-we))):(H.sortIndex=Q,e(f,H),E||x||(E=!0,$||($=!0,M()))),H},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(H){var ce=y;return function(){var Y=y;y=ce;try{return H.apply(this,arguments)}finally{y=Y}}}})(Cx)),Cx}var qC;function bV(){return qC||(qC=1,Tx.exports=yV()),Tx.exports}var Ox={exports:{}},vr={};var UC;function xV(){if(UC)return vr;UC=1;var t=yd();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vr.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,p)},vr.flushSync=function(f){var h=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=h,r.p=p,r.d.f()}},vr.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},vr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},vr.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},vr.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},vr.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},vr.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},vr.requestFormReset=function(f){r.d.r(f)},vr.unstable_batchedUpdates=function(f,h){return f(h)},vr.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},vr.useFormStatus=function(){return c.H.useHostTransitionStatus()},vr.version="19.2.4",vr}var VC;function eM(){if(VC)return Ox.exports;VC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ox.exports=xV(),Ox.exports}var BC;function _V(){if(BC)return Lf;BC=1;var t=bV(),e=yd(),n=eM();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function c(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(r(188))}function h(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var d=s,m=l;;){var b=d.return;if(b===null)break;var _=b.alternate;if(_===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===d)return f(b),s;if(_===m)return f(b),l;_=_.sibling}throw Error(r(188))}if(d.return!==m.return)d=b,m=_;else{for(var T=!1,z=b.child;z;){if(z===d){T=!0,d=b,m=_;break}if(z===m){T=!0,m=b,d=_;break}z=z.sibling}if(!T){for(z=_.child;z;){if(z===d){T=!0,d=_,m=b;break}if(z===m){T=!0,m=_,d=b;break}z=z.sibling}if(!T)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:l}function p(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=p(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),O=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function M(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var U=Symbol.for("react.client.reference");function ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===U?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case A:return"Profiler";case N:return"StrictMode";case V:return"Suspense";case $:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case O:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case C:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return l=s.displayName||null,l!==null?l:ge(s.type)||"Memo";case P:l=s._payload,s=s._init;try{return ge(s(l))}catch{}}return null}var Z=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},we=[],Q=-1;function F(s){return{current:s}}function re(s){0>Q||(s.current=we[Q],we[Q]=null,Q--)}function ye(s,l){Q++,we[Q]=s.current,s.current=l}var Ee=F(null),J=F(null),ne=F(null),pe=F(null);function De(s,l){switch(ye(ne,l),ye(J,s),ye(Ee,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?rC(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=rC(l),s=iC(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(Ee),ye(Ee,s)}function se(){re(Ee),re(J),re(ne)}function X(s){s.memoizedState!==null&&ye(pe,s);var l=Ee.current,d=iC(l,s.type);l!==d&&(ye(J,s),ye(Ee,d))}function K(s){J.current===s&&(re(Ee),re(J)),pe.current===s&&(re(pe),Rf._currentValue=Y)}var fe,Te;function ze(s){if(fe===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);fe=l&&l[1]||"",Te=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+s+Te}var ot=!1;function ht(s,l){if(!s||ot)return"";ot=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(he){var le=he}Reflect.construct(s,[],_e)}else{try{_e.call()}catch(he){le=he}s.call(_e.prototype)}}else{try{throw Error()}catch(he){le=he}(_e=s())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(he){if(he&&le&&typeof he.stack=="string")return[he.stack,le.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),T=_[0],z=_[1];if(T&&z){var G=T.split(`
`),oe=z.split(`
`);for(b=m=0;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;for(;b<oe.length&&!oe[b].includes("DetermineComponentFrameRoot");)b++;if(m===G.length||b===oe.length)for(m=G.length-1,b=oe.length-1;1<=m&&0<=b&&G[m]!==oe[b];)b--;for(;1<=m&&0<=b;m--,b--)if(G[m]!==oe[b]){if(m!==1||b!==1)do if(m--,b--,0>b||G[m]!==oe[b]){var ve=`
`+G[m].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=m&&0<=b);break}}}finally{ot=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?ze(d):""}function gt(s,l){switch(s.tag){case 26:case 27:case 5:return ze(s.type);case 16:return ze("Lazy");case 13:return s.child!==l&&l!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return ht(s.type,!1);case 11:return ht(s.type.render,!1);case 1:return ht(s.type,!0);case 31:return ze("Activity");default:return""}}function pr(s){try{var l="",d=null;do l+=gt(s,d),d=s,s=s.return;while(s);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Rt=Object.prototype.hasOwnProperty,kt=t.unstable_scheduleCallback,Lr=t.unstable_cancelCallback,me=t.unstable_shouldYield,Re=t.unstable_requestPaint,Be=t.unstable_now,Ke=t.unstable_getCurrentPriorityLevel,Vt=t.unstable_ImmediatePriority,zn=t.unstable_UserBlockingPriority,qr=t.unstable_NormalPriority,so=t.unstable_LowPriority,Ur=t.unstable_IdlePriority,Hi=t.log,Gc=t.unstable_setDisableYieldValue,on=null,At=null;function Vr(s){if(typeof Hi=="function"&&Gc(s),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(on,s)}catch{}}var en=Math.clz32?Math.clz32:Kc,Sl=Math.log,ao=Math.LN2;function Kc(s){return s>>>=0,s===0?32:31-(Sl(s)/ao|0)|0}var bi=256,na=262144,ln=4194304;function xi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function gr(s,l,d){var m=s.pendingLanes;if(m===0)return 0;var b=0,_=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var z=m&134217727;return z!==0?(m=z&~_,m!==0?b=xi(m):(T&=z,T!==0?b=xi(T):d||(d=z&~s,d!==0&&(b=xi(d))))):(z=m&~_,z!==0?b=xi(z):T!==0?b=xi(T):d||(d=m&~s,d!==0&&(b=xi(d)))),b===0?0:l!==0&&l!==b&&(l&_)===0&&(_=b&-b,d=l&-l,_>=d||_===32&&(d&4194048)!==0)?l:b}function ti(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function te(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(){var s=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),s}function vt(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Fn(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Al(s,l,d,m,b,_){var T=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var z=s.entanglements,G=s.expirationTimes,oe=s.hiddenUpdates;for(d=T&~d;0<d;){var ve=31-en(d),_e=1<<ve;z[ve]=0,G[ve]=-1;var le=oe[ve];if(le!==null)for(oe[ve]=null,ve=0;ve<le.length;ve++){var he=le[ve];he!==null&&(he.lane&=-536870913)}d&=~_e}m!==0&&_i(s,m,0),_!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=_&~(T&~l))}function _i(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var m=31-en(l);s.entangledLanes|=l,s.entanglements[m]=s.entanglements[m]|1073741824|d&261930}function zd(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var m=31-en(d),b=1<<m;b&l|s[m]&l&&(s[m]|=l),d&=~b}}function Ld(s,l){var d=l&-l;return d=(d&42)!==0?1:Tl(d),(d&(s.suspendedLanes|l))!==0?0:d}function Tl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ra(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Cm(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:AC(s.type))}function Gi(s,l){var d=ce.p;try{return ce.p=s,l()}finally{ce.p=d}}var Ki=Math.random().toString(36).slice(2),En="__reactFiber$"+Ki,Hn="__reactProps$"+Ki,ps="__reactContainer$"+Ki,Qc="__reactEvents$"+Ki,I0="__reactListeners$"+Ki,Om="__reactHandles$"+Ki,Im="__reactResources$"+Ki,gs="__reactMarker$"+Ki;function Wc(s){delete s[En],delete s[Hn],delete s[Qc],delete s[I0],delete s[Om]}function vs(s){var l=s[En];if(l)return l;for(var d=s.parentNode;d;){if(l=d[ps]||d[En]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=dC(s);s!==null;){if(d=s[En])return d;s=dC(s)}return l}s=d,d=s.parentNode}return null}function wi(s){if(s=s[En]||s[ps]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function ni(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function ys(s){var l=s[Im];return l||(l=s[Im]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Nn(s){s[gs]=!0}var qd=new Set,Ud={};function bs(s,l){xs(s,l),xs(s+"Capture",l)}function xs(s,l){for(Ud[s]=l,s=0;s<l.length;s++)qd.add(l[s])}var Vd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bd={},$d={};function Pm(s){return Rt.call($d,s)?!0:Rt.call(Bd,s)?!1:Vd.test(s)?$d[s]=!0:(Bd[s]=!0,!1)}function Yc(s,l,d){if(Pm(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function ri(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function Sn(s,l,d,m){if(m===null)s.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+m)}}function Gn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function oo(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Fd(s,l,d){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,_=m.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(T){d=""+T,_.call(this,T)}}),Object.defineProperty(s,l,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Tt(s){if(!s._valueTracker){var l=oo(s)?"checked":"value";s._valueTracker=Fd(s,l,""+s[l])}}function Cl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return s&&(m=oo(s)?s.checked?"true":"false":s.value),s=m,s!==d?(l.setValue(s),!0):!1}function _s(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ol=/[\n"\\]/g;function Br(s){return s.replace(Ol,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Xc(s,l,d,m,b,_,T,z){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),l!=null?T==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Gn(l)):s.value!==""+Gn(l)&&(s.value=""+Gn(l)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),l!=null?Hd(s,T,Gn(l)):d!=null?Hd(s,T,Gn(d)):m!=null&&s.removeAttribute("value"),b==null&&_!=null&&(s.defaultChecked=!!_),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?s.name=""+Gn(z):s.removeAttribute("name")}function Rm(s,l,d,m,b,_,T,z){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),l!=null||d!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){Tt(s);return}d=d!=null?""+Gn(d):"",l=l!=null?""+Gn(l):d,z||l===s.value||(s.value=l),s.defaultValue=l}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=z?s.checked:!!m,s.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Tt(s)}function Hd(s,l,d){l==="number"&&_s(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function lo(s,l,d,m){if(s=s.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<s.length;d++)b=l.hasOwnProperty("$"+s[d].value),s[d].selected!==b&&(s[d].selected=b),b&&m&&(s[d].defaultSelected=!0)}else{for(d=""+Gn(d),l=null,b=0;b<s.length;b++){if(s[b].value===d){s[b].selected=!0,m&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function km(s,l,d){if(l!=null&&(l=""+Gn(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+Gn(d):""}function co(s,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(Z(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=Gn(l),s.defaultValue=d,m=s.textContent,m===d&&m!==""&&m!==null&&(s.value=m),Tt(s)}function $r(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var Dm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gd(s,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":m?s.setProperty(l,d):typeof d!="number"||d===0||Dm.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function Kd(s,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var b in l)m=l[b],l.hasOwnProperty(b)&&d[b]!==m&&Gd(s,b,m)}else for(var _ in l)l.hasOwnProperty(_)&&Gd(s,_,l[_])}function Jc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zc(s){return uo.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Qi(){}var Qd=null;function ji(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fo=null,ws=null;function Il(s){var l=wi(s);if(l&&(s=l.stateNode)){var d=s[Hn]||null;e:switch(s=l.stateNode,l.type){case"input":if(Xc(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Br(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==s&&m.form===s.form){var b=m[Hn]||null;if(!b)throw Error(r(90));Xc(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===s.form&&Cl(m)}break e;case"textarea":km(s,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&lo(s,!!d.multiple,l,!1)}}}var eu=!1;function ho(s,l,d){if(eu)return s(l,d);eu=!0;try{var m=s(l);return m}finally{if(eu=!1,(fo!==null||ws!==null)&&(Cp(),fo&&(l=fo,s=ws,ws=fo=null,Il(l),s)))for(l=0;l<s.length;l++)Il(s[l])}}function Wi(s,l){var d=s.stateNode;if(d===null)return null;var m=d[Hn]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pl=!1;if(Ei)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Pl=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Pl=!1}var js=null,Wd=null,Rl=null;function Yd(){if(Rl)return Rl;var s,l=Wd,d=l.length,m,b="value"in js?js.value:js.textContent,_=b.length;for(s=0;s<d&&l[s]===b[s];s++);var T=d-s;for(m=1;m<=T&&l[d-m]===b[_-m];m++);return Rl=b.slice(s,1<m?1-m:void 0)}function kl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ia(){return!0}function Yi(){return!1}function rr(s){function l(d,m,b,_,T){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var z in s)s.hasOwnProperty(z)&&(d=s[z],this[z]=d?d(_):_[z]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ia:Yi,this.isPropagationStopped=Yi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ia)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ia)},persist:function(){},isPersistent:ia}),l}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Es=rr(sa),mo=g({},sa,{view:0,detail:0}),Xd=rr(mo),po,tu,Ns,nu=g({},mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:go,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ns&&(Ns&&s.type==="mousemove"?(po=s.screenX-Ns.screenX,tu=s.screenY-Ns.screenY):tu=po=0,Ns=s),po)},movementY:function(s){return"movementY"in s?s.movementY:tu}}),Jd=rr(nu),Dl=g({},nu,{dataTransfer:0}),zm=rr(Dl),Lm=g({},mo,{relatedTarget:0}),Ml=rr(Lm),Zd=g({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),qm=rr(Zd),ru=g({},sa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Um=rr(ru),Vm=g({},sa,{data:0}),Ss=rr(Vm),Bm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hm(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Fm[s])?!!l[s]:!1}function go(){return Hm}var Nr=g({},mo,{key:function(s){if(s.key){var l=Bm[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=kl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$m[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:go,charCode:function(s){return s.type==="keypress"?kl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?kl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Gm=rr(Nr),Km=g({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=rr(Km),v=g({},mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:go}),S=rr(v),I=g({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),B=rr(I),ie=g({},nu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),de=rr(ie),Se=g({},sa,{newState:0,oldState:0}),Ze=rr(Se),yn=[9,13,27,32],wt=Ei&&"CompositionEvent"in window,Yt=null;Ei&&"documentMode"in document&&(Yt=document.documentMode);var Ni=Ei&&"TextEvent"in window&&!Yt,As=Ei&&(!wt||Yt&&8<Yt&&11>=Yt),Xi=" ",Ji=!1;function zl(s,l){switch(s){case"keyup":return yn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var su=!1;function LU(s,l){switch(s){case"compositionend":return iu(l);case"keypress":return l.which!==32?null:(Ji=!0,Xi);case"textInput":return s=l.data,s===Xi&&Ji?null:s;default:return null}}function qU(s,l){if(su)return s==="compositionend"||!wt&&zl(s,l)?(s=Yd(),Rl=Wd=js=null,su=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return As&&l.locale!=="ko"?null:l.data;default:return null}}var UU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!UU[s.type]:l==="textarea"}function pS(s,l,d,m){fo?ws?ws.push(m):ws=[m]:fo=m,l=Mp(l,"onChange"),0<l.length&&(d=new Es("onChange","change",null,d,m),s.push({event:d,listeners:l}))}var ef=null,tf=null;function VU(s){XT(s,0)}function Qm(s){var l=ni(s);if(Cl(l))return s}function gS(s,l){if(s==="change")return l}var vS=!1;if(Ei){var P0;if(Ei){var R0="oninput"in document;if(!R0){var yS=document.createElement("div");yS.setAttribute("oninput","return;"),R0=typeof yS.oninput=="function"}P0=R0}else P0=!1;vS=P0&&(!document.documentMode||9<document.documentMode)}function bS(){ef&&(ef.detachEvent("onpropertychange",xS),tf=ef=null)}function xS(s){if(s.propertyName==="value"&&Qm(tf)){var l=[];pS(l,tf,s,ji(s)),ho(VU,l)}}function BU(s,l,d){s==="focusin"?(bS(),ef=l,tf=d,ef.attachEvent("onpropertychange",xS)):s==="focusout"&&bS()}function $U(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qm(tf)}function FU(s,l){if(s==="click")return Qm(l)}function HU(s,l){if(s==="input"||s==="change")return Qm(l)}function GU(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ii=typeof Object.is=="function"?Object.is:GU;function nf(s,l){if(ii(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!Rt.call(l,b)||!ii(s[b],l[b]))return!1}return!0}function _S(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function wS(s,l){var d=_S(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=l&&m>=l)return{node:d,offset:l-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=_S(d)}}function jS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?jS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function ES(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=_s(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=_s(s.document)}return l}function k0(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var KU=Ei&&"documentMode"in document&&11>=document.documentMode,au=null,D0=null,rf=null,M0=!1;function NS(s,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;M0||au==null||au!==_s(m)||(m=au,"selectionStart"in m&&k0(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),rf&&nf(rf,m)||(rf=m,m=Mp(D0,"onSelect"),0<m.length&&(l=new Es("onSelect","select",null,l,d),s.push({event:l,listeners:m}),l.target=au)))}function Ll(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var ou={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionrun:Ll("Transition","TransitionRun"),transitionstart:Ll("Transition","TransitionStart"),transitioncancel:Ll("Transition","TransitionCancel"),transitionend:Ll("Transition","TransitionEnd")},z0={},SS={};Ei&&(SS=document.createElement("div").style,"AnimationEvent"in window||(delete ou.animationend.animation,delete ou.animationiteration.animation,delete ou.animationstart.animation),"TransitionEvent"in window||delete ou.transitionend.transition);function ql(s){if(z0[s])return z0[s];if(!ou[s])return s;var l=ou[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in SS)return z0[s]=l[d];return s}var AS=ql("animationend"),TS=ql("animationiteration"),CS=ql("animationstart"),QU=ql("transitionrun"),WU=ql("transitionstart"),YU=ql("transitioncancel"),OS=ql("transitionend"),IS=new Map,L0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");L0.push("scrollEnd");function Zi(s,l){IS.set(s,l),bs(l,[s])}var Wm=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Si=[],lu=0,q0=0;function Ym(){for(var s=lu,l=q0=lu=0;l<s;){var d=Si[l];Si[l++]=null;var m=Si[l];Si[l++]=null;var b=Si[l];Si[l++]=null;var _=Si[l];if(Si[l++]=null,m!==null&&b!==null){var T=m.pending;T===null?b.next=b:(b.next=T.next,T.next=b),m.pending=b}_!==0&&PS(d,b,_)}}function Xm(s,l,d,m){Si[lu++]=s,Si[lu++]=l,Si[lu++]=d,Si[lu++]=m,q0|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function U0(s,l,d,m){return Xm(s,l,d,m),Jm(s)}function Ul(s,l){return Xm(s,null,null,l),Jm(s)}function PS(s,l,d){s.lanes|=d;var m=s.alternate;m!==null&&(m.lanes|=d);for(var b=!1,_=s.return;_!==null;)_.childLanes|=d,m=_.alternate,m!==null&&(m.childLanes|=d),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(b=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,b&&l!==null&&(b=31-en(d),s=_.hiddenUpdates,m=s[b],m===null?s[b]=[l]:m.push(l),l.lane=d|536870912),_):null}function Jm(s){if(50<Sf)throw Sf=0,Wb=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var cu={};function XU(s,l,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(s,l,d,m){return new XU(s,l,d,m)}function V0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function oa(s,l){var d=s.alternate;return d===null?(d=si(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function RS(s,l){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Zm(s,l,d,m,b,_){var T=0;if(m=s,typeof s=="function")V0(s)&&(T=1);else if(typeof s=="string")T=nV(s,d,Ee.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=si(31,d,l,b),s.elementType=R,s.lanes=_,s;case j:return Vl(d.children,b,_,l);case N:T=8,b|=24;break;case A:return s=si(12,d,l,b|2),s.elementType=A,s.lanes=_,s;case V:return s=si(13,d,l,b),s.elementType=V,s.lanes=_,s;case $:return s=si(19,d,l,b),s.elementType=$,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:T=10;break e;case k:T=9;break e;case C:T=11;break e;case D:T=14;break e;case P:T=16,m=null;break e}T=29,d=Error(r(130,s===null?"null":typeof s,"")),m=null}return l=si(T,d,l,b),l.elementType=s,l.type=m,l.lanes=_,l}function Vl(s,l,d,m){return s=si(7,s,m,l),s.lanes=d,s}function B0(s,l,d){return s=si(6,s,null,l),s.lanes=d,s}function kS(s){var l=si(18,null,null,0);return l.stateNode=s,l}function $0(s,l,d){return l=si(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var DS=new WeakMap;function Ai(s,l){if(typeof s=="object"&&s!==null){var d=DS.get(s);return d!==void 0?d:(l={value:s,source:l,stack:pr(l)},DS.set(s,l),l)}return{value:s,source:l,stack:pr(l)}}var uu=[],du=0,ep=null,sf=0,Ti=[],Ci=0,vo=null,Ts=1,Cs="";function la(s,l){uu[du++]=sf,uu[du++]=ep,ep=s,sf=l}function MS(s,l,d){Ti[Ci++]=Ts,Ti[Ci++]=Cs,Ti[Ci++]=vo,vo=s;var m=Ts;s=Cs;var b=32-en(m)-1;m&=~(1<<b),d+=1;var _=32-en(l)+b;if(30<_){var T=b-b%5;_=(m&(1<<T)-1).toString(32),m>>=T,b-=T,Ts=1<<32-en(l)+b|d<<b|m,Cs=_+s}else Ts=1<<_|d<<b|m,Cs=s}function F0(s){s.return!==null&&(la(s,1),MS(s,1,0))}function H0(s){for(;s===ep;)ep=uu[--du],uu[du]=null,sf=uu[--du],uu[du]=null;for(;s===vo;)vo=Ti[--Ci],Ti[Ci]=null,Cs=Ti[--Ci],Ti[Ci]=null,Ts=Ti[--Ci],Ti[Ci]=null}function zS(s,l){Ti[Ci++]=Ts,Ti[Ci++]=Cs,Ti[Ci++]=vo,Ts=l.id,Cs=l.overflow,vo=s}var ir=null,Kt=null,mt=!1,yo=null,Oi=!1,G0=Error(r(519));function bo(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw af(Ai(l,s)),G0}function LS(s){var l=s.stateNode,d=s.type,m=s.memoizedProps;switch(l[En]=s,l[Hn]=m,d){case"dialog":at("cancel",l),at("close",l);break;case"iframe":case"object":case"embed":at("load",l);break;case"video":case"audio":for(d=0;d<Tf.length;d++)at(Tf[d],l);break;case"source":at("error",l);break;case"img":case"image":case"link":at("error",l),at("load",l);break;case"details":at("toggle",l);break;case"input":at("invalid",l),Rm(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":at("invalid",l);break;case"textarea":at("invalid",l),co(l,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||tC(l.textContent,d)?(m.popover!=null&&(at("beforetoggle",l),at("toggle",l)),m.onScroll!=null&&at("scroll",l),m.onScrollEnd!=null&&at("scrollend",l),m.onClick!=null&&(l.onclick=Qi),l=!0):l=!1,l||bo(s,!0)}function qS(s){for(ir=s.return;ir;)switch(ir.tag){case 5:case 31:case 13:Oi=!1;return;case 27:case 3:Oi=!0;return;default:ir=ir.return}}function fu(s){if(s!==ir)return!1;if(!mt)return qS(s),mt=!0,!1;var l=s.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||ux(s.type,s.memoizedProps)),d=!d),d&&Kt&&bo(s),qS(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Kt=uC(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Kt=uC(s)}else l===27?(l=Kt,Ro(s.type)?(s=px,px=null,Kt=s):Kt=l):Kt=ir?Pi(s.stateNode.nextSibling):null;return!0}function Bl(){Kt=ir=null,mt=!1}function K0(){var s=yo;return s!==null&&(Kr===null?Kr=s:Kr.push.apply(Kr,s),yo=null),s}function af(s){yo===null?yo=[s]:yo.push(s)}var Q0=F(null),$l=null,ca=null;function xo(s,l,d){ye(Q0,l._currentValue),l._currentValue=d}function ua(s){s._currentValue=Q0.current,re(Q0)}function W0(s,l,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===d)break;s=s.return}}function Y0(s,l,d,m){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var _=b.dependencies;if(_!==null){var T=b.child;_=_.firstContext;e:for(;_!==null;){var z=_;_=b;for(var G=0;G<l.length;G++)if(z.context===l[G]){_.lanes|=d,z=_.alternate,z!==null&&(z.lanes|=d),W0(_.return,d,s),m||(T=null);break e}_=z.next}}else if(b.tag===18){if(T=b.return,T===null)throw Error(r(341));T.lanes|=d,_=T.alternate,_!==null&&(_.lanes|=d),W0(T,d,s),T=null}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===s){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}}function hu(s,l,d,m){s=null;for(var b=l,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var T=b.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var z=b.type;ii(b.pendingProps.value,T.value)||(s!==null?s.push(z):s=[z])}}else if(b===pe.current){if(T=b.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(Rf):s=[Rf])}b=b.return}s!==null&&Y0(l,s,d,m),l.flags|=262144}function tp(s){for(s=s.firstContext;s!==null;){if(!ii(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Fl(s){$l=s,ca=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function sr(s){return US($l,s)}function np(s,l){return $l===null&&Fl(s),US(s,l)}function US(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},ca===null){if(s===null)throw Error(r(308));ca=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ca=ca.next=l;return d}var JU=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,m){s.push(m)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},ZU=t.unstable_scheduleCallback,e9=t.unstable_NormalPriority,An={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function X0(){return{controller:new JU,data:new Map,refCount:0}}function of(s){s.refCount--,s.refCount===0&&ZU(e9,function(){s.controller.abort()})}var lf=null,J0=0,mu=0,pu=null;function t9(s,l){if(lf===null){var d=lf=[];J0=0,mu=tx(),pu={status:"pending",value:void 0,then:function(m){d.push(m)}}}return J0++,l.then(VS,VS),l}function VS(){if(--J0===0&&lf!==null){pu!==null&&(pu.status="fulfilled");var s=lf;lf=null,mu=0,pu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function n9(s,l){var d=[],m={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return s.then(function(){m.status="fulfilled",m.value=l;for(var b=0;b<d.length;b++)(0,d[b])(l)},function(b){for(m.status="rejected",m.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),m}var BS=H.S;H.S=function(s,l){NT=Be(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&t9(s,l),BS!==null&&BS(s,l)};var Hl=F(null);function Z0(){var s=Hl.current;return s!==null?s:Bt.pooledCache}function rp(s,l){l===null?ye(Hl,Hl.current):ye(Hl,l.pool)}function $S(){var s=Z0();return s===null?null:{parent:An._currentValue,pool:s}}var gu=Error(r(460)),eb=Error(r(474)),ip=Error(r(542)),sp={then:function(){}};function FS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function HS(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(Qi,Qi),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,KS(s),s;default:if(typeof l.status=="string")l.then(Qi,Qi);else{if(s=Bt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(m){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=m}},function(m){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,KS(s),s}throw Kl=l,gu}}function Gl(s){try{var l=s._init;return l(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Kl=d,gu):d}}var Kl=null;function GS(){if(Kl===null)throw Error(r(459));var s=Kl;return Kl=null,s}function KS(s){if(s===gu||s===ip)throw Error(r(483))}var vu=null,cf=0;function ap(s){var l=cf;return cf+=1,vu===null&&(vu=[]),HS(vu,s,l)}function uf(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function op(s,l){throw l.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function QS(s){function l(ee,W){if(s){var ae=ee.deletions;ae===null?(ee.deletions=[W],ee.flags|=16):ae.push(W)}}function d(ee,W){if(!s)return null;for(;W!==null;)l(ee,W),W=W.sibling;return null}function m(ee){for(var W=new Map;ee!==null;)ee.key!==null?W.set(ee.key,ee):W.set(ee.index,ee),ee=ee.sibling;return W}function b(ee,W){return ee=oa(ee,W),ee.index=0,ee.sibling=null,ee}function _(ee,W,ae){return ee.index=ae,s?(ae=ee.alternate,ae!==null?(ae=ae.index,ae<W?(ee.flags|=67108866,W):ae):(ee.flags|=67108866,W)):(ee.flags|=1048576,W)}function T(ee){return s&&ee.alternate===null&&(ee.flags|=67108866),ee}function z(ee,W,ae,xe){return W===null||W.tag!==6?(W=B0(ae,ee.mode,xe),W.return=ee,W):(W=b(W,ae),W.return=ee,W)}function G(ee,W,ae,xe){var qe=ae.type;return qe===j?ve(ee,W,ae.props.children,xe,ae.key):W!==null&&(W.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&Gl(qe)===W.type)?(W=b(W,ae.props),uf(W,ae),W.return=ee,W):(W=Zm(ae.type,ae.key,ae.props,null,ee.mode,xe),uf(W,ae),W.return=ee,W)}function oe(ee,W,ae,xe){return W===null||W.tag!==4||W.stateNode.containerInfo!==ae.containerInfo||W.stateNode.implementation!==ae.implementation?(W=$0(ae,ee.mode,xe),W.return=ee,W):(W=b(W,ae.children||[]),W.return=ee,W)}function ve(ee,W,ae,xe,qe){return W===null||W.tag!==7?(W=Vl(ae,ee.mode,xe,qe),W.return=ee,W):(W=b(W,ae),W.return=ee,W)}function _e(ee,W,ae){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=B0(""+W,ee.mode,ae),W.return=ee,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return ae=Zm(W.type,W.key,W.props,null,ee.mode,ae),uf(ae,W),ae.return=ee,ae;case E:return W=$0(W,ee.mode,ae),W.return=ee,W;case P:return W=Gl(W),_e(ee,W,ae)}if(Z(W)||M(W))return W=Vl(W,ee.mode,ae,null),W.return=ee,W;if(typeof W.then=="function")return _e(ee,ap(W),ae);if(W.$$typeof===O)return _e(ee,np(ee,W),ae);op(ee,W)}return null}function le(ee,W,ae,xe){var qe=W!==null?W.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return qe!==null?null:z(ee,W,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case x:return ae.key===qe?G(ee,W,ae,xe):null;case E:return ae.key===qe?oe(ee,W,ae,xe):null;case P:return ae=Gl(ae),le(ee,W,ae,xe)}if(Z(ae)||M(ae))return qe!==null?null:ve(ee,W,ae,xe,null);if(typeof ae.then=="function")return le(ee,W,ap(ae),xe);if(ae.$$typeof===O)return le(ee,W,np(ee,ae),xe);op(ee,ae)}return null}function he(ee,W,ae,xe,qe){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ee=ee.get(ae)||null,z(W,ee,""+xe,qe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case x:return ee=ee.get(xe.key===null?ae:xe.key)||null,G(W,ee,xe,qe);case E:return ee=ee.get(xe.key===null?ae:xe.key)||null,oe(W,ee,xe,qe);case P:return xe=Gl(xe),he(ee,W,ae,xe,qe)}if(Z(xe)||M(xe))return ee=ee.get(ae)||null,ve(W,ee,xe,qe,null);if(typeof xe.then=="function")return he(ee,W,ae,ap(xe),qe);if(xe.$$typeof===O)return he(ee,W,ae,np(W,xe),qe);op(W,xe)}return null}function Ie(ee,W,ae,xe){for(var qe=null,bt=null,ke=W,tt=W=0,ct=null;ke!==null&&tt<ae.length;tt++){ke.index>tt?(ct=ke,ke=null):ct=ke.sibling;var xt=le(ee,ke,ae[tt],xe);if(xt===null){ke===null&&(ke=ct);break}s&&ke&&xt.alternate===null&&l(ee,ke),W=_(xt,W,tt),bt===null?qe=xt:bt.sibling=xt,bt=xt,ke=ct}if(tt===ae.length)return d(ee,ke),mt&&la(ee,tt),qe;if(ke===null){for(;tt<ae.length;tt++)ke=_e(ee,ae[tt],xe),ke!==null&&(W=_(ke,W,tt),bt===null?qe=ke:bt.sibling=ke,bt=ke);return mt&&la(ee,tt),qe}for(ke=m(ke);tt<ae.length;tt++)ct=he(ke,ee,tt,ae[tt],xe),ct!==null&&(s&&ct.alternate!==null&&ke.delete(ct.key===null?tt:ct.key),W=_(ct,W,tt),bt===null?qe=ct:bt.sibling=ct,bt=ct);return s&&ke.forEach(function(Lo){return l(ee,Lo)}),mt&&la(ee,tt),qe}function Fe(ee,W,ae,xe){if(ae==null)throw Error(r(151));for(var qe=null,bt=null,ke=W,tt=W=0,ct=null,xt=ae.next();ke!==null&&!xt.done;tt++,xt=ae.next()){ke.index>tt?(ct=ke,ke=null):ct=ke.sibling;var Lo=le(ee,ke,xt.value,xe);if(Lo===null){ke===null&&(ke=ct);break}s&&ke&&Lo.alternate===null&&l(ee,ke),W=_(Lo,W,tt),bt===null?qe=Lo:bt.sibling=Lo,bt=Lo,ke=ct}if(xt.done)return d(ee,ke),mt&&la(ee,tt),qe;if(ke===null){for(;!xt.done;tt++,xt=ae.next())xt=_e(ee,xt.value,xe),xt!==null&&(W=_(xt,W,tt),bt===null?qe=xt:bt.sibling=xt,bt=xt);return mt&&la(ee,tt),qe}for(ke=m(ke);!xt.done;tt++,xt=ae.next())xt=he(ke,ee,tt,xt.value,xe),xt!==null&&(s&&xt.alternate!==null&&ke.delete(xt.key===null?tt:xt.key),W=_(xt,W,tt),bt===null?qe=xt:bt.sibling=xt,bt=xt);return s&&ke.forEach(function(hV){return l(ee,hV)}),mt&&la(ee,tt),qe}function Lt(ee,W,ae,xe){if(typeof ae=="object"&&ae!==null&&ae.type===j&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case x:e:{for(var qe=ae.key;W!==null;){if(W.key===qe){if(qe=ae.type,qe===j){if(W.tag===7){d(ee,W.sibling),xe=b(W,ae.props.children),xe.return=ee,ee=xe;break e}}else if(W.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&Gl(qe)===W.type){d(ee,W.sibling),xe=b(W,ae.props),uf(xe,ae),xe.return=ee,ee=xe;break e}d(ee,W);break}else l(ee,W);W=W.sibling}ae.type===j?(xe=Vl(ae.props.children,ee.mode,xe,ae.key),xe.return=ee,ee=xe):(xe=Zm(ae.type,ae.key,ae.props,null,ee.mode,xe),uf(xe,ae),xe.return=ee,ee=xe)}return T(ee);case E:e:{for(qe=ae.key;W!==null;){if(W.key===qe)if(W.tag===4&&W.stateNode.containerInfo===ae.containerInfo&&W.stateNode.implementation===ae.implementation){d(ee,W.sibling),xe=b(W,ae.children||[]),xe.return=ee,ee=xe;break e}else{d(ee,W);break}else l(ee,W);W=W.sibling}xe=$0(ae,ee.mode,xe),xe.return=ee,ee=xe}return T(ee);case P:return ae=Gl(ae),Lt(ee,W,ae,xe)}if(Z(ae))return Ie(ee,W,ae,xe);if(M(ae)){if(qe=M(ae),typeof qe!="function")throw Error(r(150));return ae=qe.call(ae),Fe(ee,W,ae,xe)}if(typeof ae.then=="function")return Lt(ee,W,ap(ae),xe);if(ae.$$typeof===O)return Lt(ee,W,np(ee,ae),xe);op(ee,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,W!==null&&W.tag===6?(d(ee,W.sibling),xe=b(W,ae),xe.return=ee,ee=xe):(d(ee,W),xe=B0(ae,ee.mode,xe),xe.return=ee,ee=xe),T(ee)):d(ee,W)}return function(ee,W,ae,xe){try{cf=0;var qe=Lt(ee,W,ae,xe);return vu=null,qe}catch(ke){if(ke===gu||ke===ip)throw ke;var bt=si(29,ke,null,ee.mode);return bt.lanes=xe,bt.return=ee,bt}}}var Ql=QS(!0),WS=QS(!1),_o=!1;function tb(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nb(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function wo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function jo(s,l,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(jt&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,l=Jm(s),PS(s,null,d),l}return Xm(s,m,l,d),Jm(s)}function df(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,zd(s,d)}}function rb(s,l){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};_===null?b=_=T:_=_.next=T,d=d.next}while(d!==null);_===null?b=_=l:_=_.next=l}else b=_=l;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var ib=!1;function ff(){if(ib){var s=pu;if(s!==null)throw s}}function hf(s,l,d,m){ib=!1;var b=s.updateQueue;_o=!1;var _=b.firstBaseUpdate,T=b.lastBaseUpdate,z=b.shared.pending;if(z!==null){b.shared.pending=null;var G=z,oe=G.next;G.next=null,T===null?_=oe:T.next=oe,T=G;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,z=ve.lastBaseUpdate,z!==T&&(z===null?ve.firstBaseUpdate=oe:z.next=oe,ve.lastBaseUpdate=G))}if(_!==null){var _e=b.baseState;T=0,ve=oe=G=null,z=_;do{var le=z.lane&-536870913,he=le!==z.lane;if(he?(lt&le)===le:(m&le)===le){le!==0&&le===mu&&(ib=!0),ve!==null&&(ve=ve.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var Ie=s,Fe=z;le=l;var Lt=d;switch(Fe.tag){case 1:if(Ie=Fe.payload,typeof Ie=="function"){_e=Ie.call(Lt,_e,le);break e}_e=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Fe.payload,le=typeof Ie=="function"?Ie.call(Lt,_e,le):Ie,le==null)break e;_e=g({},_e,le);break e;case 2:_o=!0}}le=z.callback,le!==null&&(s.flags|=64,he&&(s.flags|=8192),he=b.callbacks,he===null?b.callbacks=[le]:he.push(le))}else he={lane:le,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ve===null?(oe=ve=he,G=_e):ve=ve.next=he,T|=le;if(z=z.next,z===null){if(z=b.shared.pending,z===null)break;he=z,z=he.next,he.next=null,b.lastBaseUpdate=he,b.shared.pending=null}}while(!0);ve===null&&(G=_e),b.baseState=G,b.firstBaseUpdate=oe,b.lastBaseUpdate=ve,_===null&&(b.shared.lanes=0),To|=T,s.lanes=T,s.memoizedState=_e}}function YS(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function XS(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)YS(d[s],l)}var yu=F(null),lp=F(0);function JS(s,l){s=ba,ye(lp,s),ye(yu,l),ba=s|l.baseLanes}function sb(){ye(lp,ba),ye(yu,yu.current)}function ab(){ba=lp.current,re(yu),re(lp)}var ai=F(null),Ii=null;function Eo(s){var l=s.alternate;ye(bn,bn.current&1),ye(ai,s),Ii===null&&(l===null||yu.current!==null||l.memoizedState!==null)&&(Ii=s)}function ob(s){ye(bn,bn.current),ye(ai,s),Ii===null&&(Ii=s)}function ZS(s){s.tag===22?(ye(bn,bn.current),ye(ai,s),Ii===null&&(Ii=s)):No()}function No(){ye(bn,bn.current),ye(ai,ai.current)}function oi(s){re(ai),Ii===s&&(Ii=null),re(bn)}var bn=F(0);function cp(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||hx(d)||mx(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var da=0,et=null,Mt=null,Tn=null,up=!1,bu=!1,Wl=!1,dp=0,mf=0,xu=null,r9=0;function cn(){throw Error(r(321))}function lb(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!ii(s[d],l[d]))return!1;return!0}function cb(s,l,d,m,b,_){return da=_,et=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?MA:Eb,Wl=!1,_=d(m,b),Wl=!1,bu&&(_=tA(l,d,m,b)),eA(s),_}function eA(s){H.H=vf;var l=Mt!==null&&Mt.next!==null;if(da=0,Tn=Mt=et=null,up=!1,mf=0,xu=null,l)throw Error(r(300));s===null||Cn||(s=s.dependencies,s!==null&&tp(s)&&(Cn=!0))}function tA(s,l,d,m){et=s;var b=0;do{if(bu&&(xu=null),mf=0,bu=!1,25<=b)throw Error(r(301));if(b+=1,Tn=Mt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=zA,_=l(d,m)}while(bu);return _}function i9(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?pf(l):l,s=s.useState()[0],(Mt!==null?Mt.memoizedState:null)!==s&&(et.flags|=1024),l}function ub(){var s=dp!==0;return dp=0,s}function db(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function fb(s){if(up){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}up=!1}da=0,Tn=Mt=et=null,bu=!1,mf=dp=0,xu=null}function Sr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?et.memoizedState=Tn=s:Tn=Tn.next=s,Tn}function xn(){if(Mt===null){var s=et.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var l=Tn===null?et.memoizedState:Tn.next;if(l!==null)Tn=l,Mt=s;else{if(s===null)throw et.alternate===null?Error(r(467)):Error(r(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Tn===null?et.memoizedState=Tn=s:Tn=Tn.next=s}return Tn}function fp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pf(s){var l=mf;return mf+=1,xu===null&&(xu=[]),s=HS(xu,s,l),l=et,(Tn===null?l.memoizedState:Tn.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?MA:Eb),s}function hp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return pf(s);if(s.$$typeof===O)return sr(s)}throw Error(r(438,String(s)))}function hb(s){var l=null,d=et.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=et.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=fp(),et.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),m=0;m<s;m++)d[m]=q;return l.index++,d}function fa(s,l){return typeof l=="function"?l(s):l}function mp(s){var l=xn();return mb(l,Mt,s)}function mb(s,l,d){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var b=s.baseQueue,_=m.pending;if(_!==null){if(b!==null){var T=b.next;b.next=_.next,_.next=T}l.baseQueue=b=_,m.pending=null}if(_=s.baseState,b===null)s.memoizedState=_;else{l=b.next;var z=T=null,G=null,oe=l,ve=!1;do{var _e=oe.lane&-536870913;if(_e!==oe.lane?(lt&_e)===_e:(da&_e)===_e){var le=oe.revertLane;if(le===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),_e===mu&&(ve=!0);else if((da&le)===le){oe=oe.next,le===mu&&(ve=!0);continue}else _e={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},G===null?(z=G=_e,T=_):G=G.next=_e,et.lanes|=le,To|=le;_e=oe.action,Wl&&d(_,_e),_=oe.hasEagerState?oe.eagerState:d(_,_e)}else le={lane:_e,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},G===null?(z=G=le,T=_):G=G.next=le,et.lanes|=_e,To|=_e;oe=oe.next}while(oe!==null&&oe!==l);if(G===null?T=_:G.next=z,!ii(_,s.memoizedState)&&(Cn=!0,ve&&(d=pu,d!==null)))throw d;s.memoizedState=_,s.baseState=T,s.baseQueue=G,m.lastRenderedState=_}return b===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function pb(s){var l=xn(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var m=d.dispatch,b=d.pending,_=l.memoizedState;if(b!==null){d.pending=null;var T=b=b.next;do _=s(_,T.action),T=T.next;while(T!==b);ii(_,l.memoizedState)||(Cn=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),d.lastRenderedState=_}return[_,m]}function nA(s,l,d){var m=et,b=xn(),_=mt;if(_){if(d===void 0)throw Error(r(407));d=d()}else d=l();var T=!ii((Mt||b).memoizedState,d);if(T&&(b.memoizedState=d,Cn=!0),b=b.queue,yb(sA.bind(null,m,b,s),[s]),b.getSnapshot!==l||T||Tn!==null&&Tn.memoizedState.tag&1){if(m.flags|=2048,_u(9,{destroy:void 0},iA.bind(null,m,b,d,l),null),Bt===null)throw Error(r(349));_||(da&127)!==0||rA(m,l,d)}return d}function rA(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=et.updateQueue,l===null?(l=fp(),et.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function iA(s,l,d,m){l.value=d,l.getSnapshot=m,aA(l)&&oA(s)}function sA(s,l,d){return d(function(){aA(l)&&oA(s)})}function aA(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!ii(s,d)}catch{return!0}}function oA(s){var l=Ul(s,2);l!==null&&Qr(l,s,2)}function gb(s){var l=Sr();if(typeof s=="function"){var d=s;if(s=d(),Wl){Vr(!0);try{d()}finally{Vr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:s},l}function lA(s,l,d,m){return s.baseState=d,mb(s,Mt,typeof m=="function"?m:fa)}function s9(s,l,d,m,b){if(vp(s))throw Error(r(485));if(s=l.action,s!==null){var _={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};H.T!==null?d(!0):_.isTransition=!1,m(_),d=l.pending,d===null?(_.next=l.pending=_,cA(l,_)):(_.next=d.next,l.pending=d.next=_)}}function cA(s,l){var d=l.action,m=l.payload,b=s.state;if(l.isTransition){var _=H.T,T={};H.T=T;try{var z=d(b,m),G=H.S;G!==null&&G(T,z),uA(s,l,z)}catch(oe){vb(s,l,oe)}finally{_!==null&&T.types!==null&&(_.types=T.types),H.T=_}}else try{_=d(b,m),uA(s,l,_)}catch(oe){vb(s,l,oe)}}function uA(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){dA(s,l,m)},function(m){return vb(s,l,m)}):dA(s,l,d)}function dA(s,l,d){l.status="fulfilled",l.value=d,fA(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,cA(s,d)))}function vb(s,l,d){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,fA(l),l=l.next;while(l!==m)}s.action=null}function fA(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function hA(s,l){return l}function mA(s,l){if(mt){var d=Bt.formState;if(d!==null){e:{var m=et;if(mt){if(Kt){t:{for(var b=Kt,_=Oi;b.nodeType!==8;){if(!_){b=null;break t}if(b=Pi(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){Kt=Pi(b.nextSibling),m=b.data==="F!";break e}}bo(m)}m=!1}m&&(l=d[0])}}return d=Sr(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hA,lastRenderedState:l},d.queue=m,d=RA.bind(null,et,m),m.dispatch=d,m=gb(!1),_=jb.bind(null,et,!1,m.queue),m=Sr(),b={state:l,dispatch:null,action:s,pending:null},m.queue=b,d=s9.bind(null,et,b,_,d),b.dispatch=d,m.memoizedState=s,[l,d,!1]}function pA(s){var l=xn();return gA(l,Mt,s)}function gA(s,l,d){if(l=mb(s,l,hA)[0],s=mp(fa)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=pf(l)}catch(T){throw T===gu?ip:T}else m=l;l=xn();var b=l.queue,_=b.dispatch;return d!==l.memoizedState&&(et.flags|=2048,_u(9,{destroy:void 0},a9.bind(null,b,d),null)),[m,_,s]}function a9(s,l){s.action=l}function vA(s){var l=xn(),d=Mt;if(d!==null)return gA(l,d,s);xn(),l=l.memoizedState,d=xn();var m=d.queue.dispatch;return d.memoizedState=s,[l,m,!1]}function _u(s,l,d,m){return s={tag:s,create:d,deps:m,inst:l,next:null},l=et.updateQueue,l===null&&(l=fp(),et.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,l.lastEffect=s),s}function yA(){return xn().memoizedState}function pp(s,l,d,m){var b=Sr();et.flags|=s,b.memoizedState=_u(1|l,{destroy:void 0},d,m===void 0?null:m)}function gp(s,l,d,m){var b=xn();m=m===void 0?null:m;var _=b.memoizedState.inst;Mt!==null&&m!==null&&lb(m,Mt.memoizedState.deps)?b.memoizedState=_u(l,_,d,m):(et.flags|=s,b.memoizedState=_u(1|l,_,d,m))}function bA(s,l){pp(8390656,8,s,l)}function yb(s,l){gp(2048,8,s,l)}function o9(s){et.flags|=4;var l=et.updateQueue;if(l===null)l=fp(),et.updateQueue=l,l.events=[s];else{var d=l.events;d===null?l.events=[s]:d.push(s)}}function xA(s){var l=xn().memoizedState;return o9({ref:l,nextImpl:s}),function(){if((jt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function _A(s,l){return gp(4,2,s,l)}function wA(s,l){return gp(4,4,s,l)}function jA(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function EA(s,l,d){d=d!=null?d.concat([s]):null,gp(4,4,jA.bind(null,l,s),d)}function bb(){}function NA(s,l){var d=xn();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&lb(l,m[1])?m[0]:(d.memoizedState=[s,l],s)}function SA(s,l){var d=xn();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&lb(l,m[1]))return m[0];if(m=s(),Wl){Vr(!0);try{s()}finally{Vr(!1)}}return d.memoizedState=[m,l],m}function xb(s,l,d){return d===void 0||(da&1073741824)!==0&&(lt&261930)===0?s.memoizedState=l:(s.memoizedState=d,s=AT(),et.lanes|=s,To|=s,d)}function AA(s,l,d,m){return ii(d,l)?d:yu.current!==null?(s=xb(s,d,m),ii(s,l)||(Cn=!0),s):(da&42)===0||(da&1073741824)!==0&&(lt&261930)===0?(Cn=!0,s.memoizedState=d):(s=AT(),et.lanes|=s,To|=s,l)}function TA(s,l,d,m,b){var _=ce.p;ce.p=_!==0&&8>_?_:8;var T=H.T,z={};H.T=z,jb(s,!1,l,d);try{var G=b(),oe=H.S;if(oe!==null&&oe(z,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ve=n9(G,m);gf(s,l,ve,ui(s))}else gf(s,l,m,ui(s))}catch(_e){gf(s,l,{then:function(){},status:"rejected",reason:_e},ui())}finally{ce.p=_,T!==null&&z.types!==null&&(T.types=z.types),H.T=T}}function l9(){}function _b(s,l,d,m){if(s.tag!==5)throw Error(r(476));var b=CA(s).queue;TA(s,b,l,Y,d===null?l9:function(){return OA(s),d(m)})}function CA(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:Y},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function OA(s){var l=CA(s);l.next===null&&(l=s.alternate.memoizedState),gf(s,l.next.queue,{},ui())}function wb(){return sr(Rf)}function IA(){return xn().memoizedState}function PA(){return xn().memoizedState}function c9(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=ui();s=wo(d);var m=jo(l,s,d);m!==null&&(Qr(m,l,d),df(m,l,d)),l={cache:X0()},s.payload=l;return}l=l.return}}function u9(s,l,d){var m=ui();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},vp(s)?kA(l,d):(d=U0(s,l,d,m),d!==null&&(Qr(d,s,m),DA(d,l,m)))}function RA(s,l,d){var m=ui();gf(s,l,d,m)}function gf(s,l,d,m){var b={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(vp(s))kA(l,b);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var T=l.lastRenderedState,z=_(T,d);if(b.hasEagerState=!0,b.eagerState=z,ii(z,T))return Xm(s,l,b,0),Bt===null&&Ym(),!1}catch{}if(d=U0(s,l,b,m),d!==null)return Qr(d,s,m),DA(d,l,m),!0}return!1}function jb(s,l,d,m){if(m={lane:2,revertLane:tx(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},vp(s)){if(l)throw Error(r(479))}else l=U0(s,d,m,2),l!==null&&Qr(l,s,2)}function vp(s){var l=s.alternate;return s===et||l!==null&&l===et}function kA(s,l){bu=up=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function DA(s,l,d){if((d&4194048)!==0){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,zd(s,d)}}var vf={readContext:sr,use:hp,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};vf.useEffectEvent=cn;var MA={readContext:sr,use:hp,useCallback:function(s,l){return Sr().memoizedState=[s,l===void 0?null:l],s},useContext:sr,useEffect:bA,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,pp(4194308,4,jA.bind(null,l,s),d)},useLayoutEffect:function(s,l){return pp(4194308,4,s,l)},useInsertionEffect:function(s,l){pp(4,2,s,l)},useMemo:function(s,l){var d=Sr();l=l===void 0?null:l;var m=s();if(Wl){Vr(!0);try{s()}finally{Vr(!1)}}return d.memoizedState=[m,l],m},useReducer:function(s,l,d){var m=Sr();if(d!==void 0){var b=d(l);if(Wl){Vr(!0);try{d(l)}finally{Vr(!1)}}}else b=l;return m.memoizedState=m.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},m.queue=s,s=s.dispatch=u9.bind(null,et,s),[m.memoizedState,s]},useRef:function(s){var l=Sr();return s={current:s},l.memoizedState=s},useState:function(s){s=gb(s);var l=s.queue,d=RA.bind(null,et,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:bb,useDeferredValue:function(s,l){var d=Sr();return xb(d,s,l)},useTransition:function(){var s=gb(!1);return s=TA.bind(null,et,s.queue,!0,!1),Sr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var m=et,b=Sr();if(mt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Bt===null)throw Error(r(349));(lt&127)!==0||rA(m,l,d)}b.memoizedState=d;var _={value:d,getSnapshot:l};return b.queue=_,bA(sA.bind(null,m,_,s),[s]),m.flags|=2048,_u(9,{destroy:void 0},iA.bind(null,m,_,d,l),null),d},useId:function(){var s=Sr(),l=Bt.identifierPrefix;if(mt){var d=Cs,m=Ts;d=(m&~(1<<32-en(m)-1)).toString(32)+d,l="_"+l+"R_"+d,d=dp++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=r9++,l="_"+l+"r_"+d.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:wb,useFormState:mA,useActionState:mA,useOptimistic:function(s){var l=Sr();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=jb.bind(null,et,!0,d),d.dispatch=l,[s,l]},useMemoCache:hb,useCacheRefresh:function(){return Sr().memoizedState=c9.bind(null,et)},useEffectEvent:function(s){var l=Sr(),d={impl:s};return l.memoizedState=d,function(){if((jt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},Eb={readContext:sr,use:hp,useCallback:NA,useContext:sr,useEffect:yb,useImperativeHandle:EA,useInsertionEffect:_A,useLayoutEffect:wA,useMemo:SA,useReducer:mp,useRef:yA,useState:function(){return mp(fa)},useDebugValue:bb,useDeferredValue:function(s,l){var d=xn();return AA(d,Mt.memoizedState,s,l)},useTransition:function(){var s=mp(fa)[0],l=xn().memoizedState;return[typeof s=="boolean"?s:pf(s),l]},useSyncExternalStore:nA,useId:IA,useHostTransitionStatus:wb,useFormState:pA,useActionState:pA,useOptimistic:function(s,l){var d=xn();return lA(d,Mt,s,l)},useMemoCache:hb,useCacheRefresh:PA};Eb.useEffectEvent=xA;var zA={readContext:sr,use:hp,useCallback:NA,useContext:sr,useEffect:yb,useImperativeHandle:EA,useInsertionEffect:_A,useLayoutEffect:wA,useMemo:SA,useReducer:pb,useRef:yA,useState:function(){return pb(fa)},useDebugValue:bb,useDeferredValue:function(s,l){var d=xn();return Mt===null?xb(d,s,l):AA(d,Mt.memoizedState,s,l)},useTransition:function(){var s=pb(fa)[0],l=xn().memoizedState;return[typeof s=="boolean"?s:pf(s),l]},useSyncExternalStore:nA,useId:IA,useHostTransitionStatus:wb,useFormState:vA,useActionState:vA,useOptimistic:function(s,l){var d=xn();return Mt!==null?lA(d,Mt,s,l):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:hb,useCacheRefresh:PA};zA.useEffectEvent=xA;function Nb(s,l,d,m){l=s.memoizedState,d=d(m,l),d=d==null?l:g({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Sb={enqueueSetState:function(s,l,d){s=s._reactInternals;var m=ui(),b=wo(m);b.payload=l,d!=null&&(b.callback=d),l=jo(s,b,m),l!==null&&(Qr(l,s,m),df(l,s,m))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var m=ui(),b=wo(m);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=jo(s,b,m),l!==null&&(Qr(l,s,m),df(l,s,m))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=ui(),m=wo(d);m.tag=2,l!=null&&(m.callback=l),l=jo(s,m,d),l!==null&&(Qr(l,s,d),df(l,s,d))}};function LA(s,l,d,m,b,_,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,_,T):l.prototype&&l.prototype.isPureReactComponent?!nf(d,m)||!nf(b,_):!0}function qA(s,l,d,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==s&&Sb.enqueueReplaceState(l,l.state,null)}function Yl(s,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(s=s.defaultProps){d===l&&(d=g({},d));for(var b in s)d[b]===void 0&&(d[b]=s[b])}return d}function UA(s){Wm(s)}function VA(s){console.error(s)}function BA(s){Wm(s)}function yp(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function $A(s,l,d){try{var m=s.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Ab(s,l,d){return d=wo(d),d.tag=3,d.payload={element:null},d.callback=function(){yp(s,l)},d}function FA(s){return s=wo(s),s.tag=3,s}function HA(s,l,d,m){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var _=m.value;s.payload=function(){return b(_)},s.callback=function(){$A(l,d,m)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){$A(l,d,m),typeof b!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var z=m.stack;this.componentDidCatch(m.value,{componentStack:z!==null?z:""})})}function d9(s,l,d,m,b){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&hu(l,d,b,!0),d=ai.current,d!==null){switch(d.tag){case 31:case 13:return Ii===null?Op():d.alternate===null&&un===0&&(un=3),d.flags&=-257,d.flags|=65536,d.lanes=b,m===sp?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),Jb(s,m,b)),!1;case 22:return d.flags|=65536,m===sp?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),Jb(s,m,b)),!1}throw Error(r(435,d.tag))}return Jb(s,m,b),Op(),!1}if(mt)return l=ai.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,m!==G0&&(s=Error(r(422),{cause:m}),af(Ai(s,d)))):(m!==G0&&(l=Error(r(423),{cause:m}),af(Ai(l,d))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,m=Ai(m,d),b=Ab(s.stateNode,m,b),rb(s,b),un!==4&&(un=2)),!1;var _=Error(r(520),{cause:m});if(_=Ai(_,d),Nf===null?Nf=[_]:Nf.push(_),un!==4&&(un=2),l===null)return!0;m=Ai(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=b&-b,d.lanes|=s,s=Ab(d.stateNode,m,s),rb(d,s),!1;case 1:if(l=d.type,_=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Co===null||!Co.has(_))))return d.flags|=65536,b&=-b,d.lanes|=b,b=FA(b),HA(b,s,d,m),rb(d,b),!1}d=d.return}while(d!==null);return!1}var Tb=Error(r(461)),Cn=!1;function ar(s,l,d,m){l.child=s===null?WS(l,null,d,m):Ql(l,s.child,d,m)}function GA(s,l,d,m,b){d=d.render;var _=l.ref;if("ref"in m){var T={};for(var z in m)z!=="ref"&&(T[z]=m[z])}else T=m;return Fl(l),m=cb(s,l,d,T,_,b),z=ub(),s!==null&&!Cn?(db(s,l,b),ha(s,l,b)):(mt&&z&&F0(l),l.flags|=1,ar(s,l,m,b),l.child)}function KA(s,l,d,m,b){if(s===null){var _=d.type;return typeof _=="function"&&!V0(_)&&_.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=_,QA(s,l,_,m,b)):(s=Zm(d.type,null,m,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(_=s.child,!Mb(s,b)){var T=_.memoizedProps;if(d=d.compare,d=d!==null?d:nf,d(T,m)&&s.ref===l.ref)return ha(s,l,b)}return l.flags|=1,s=oa(_,m),s.ref=l.ref,s.return=l,l.child=s}function QA(s,l,d,m,b){if(s!==null){var _=s.memoizedProps;if(nf(_,m)&&s.ref===l.ref)if(Cn=!1,l.pendingProps=m=_,Mb(s,b))(s.flags&131072)!==0&&(Cn=!0);else return l.lanes=s.lanes,ha(s,l,b)}return Cb(s,l,d,m,b)}function WA(s,l,d,m){var b=m.children,_=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|d:d,s!==null){for(m=l.child=s.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~_}else m=0,l.child=null;return YA(s,l,_,d,m)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&rp(l,_!==null?_.cachePool:null),_!==null?JS(l,_):sb(),ZS(l);else return m=l.lanes=536870912,YA(s,l,_!==null?_.baseLanes|d:d,d,m)}else _!==null?(rp(l,_.cachePool),JS(l,_),No(),l.memoizedState=null):(s!==null&&rp(l,null),sb(),No());return ar(s,l,b,d),l.child}function yf(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function YA(s,l,d,m,b){var _=Z0();return _=_===null?null:{parent:An._currentValue,pool:_},l.memoizedState={baseLanes:d,cachePool:_},s!==null&&rp(l,null),sb(),ZS(l),s!==null&&hu(s,l,m,!0),l.childLanes=b,null}function bp(s,l){return l=_p({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function XA(s,l,d){return Ql(l,s.child,null,d),s=bp(l,l.pendingProps),s.flags|=2,oi(l),l.memoizedState=null,s}function f9(s,l,d){var m=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(mt){if(m.mode==="hidden")return s=bp(l,m),l.lanes=536870912,yf(null,s);if(ob(l),(s=Kt)?(s=cC(s,Oi),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:vo!==null?{id:Ts,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},d=kS(s),d.return=l,l.child=d,ir=l,Kt=null)):s=null,s===null)throw bo(l);return l.lanes=536870912,null}return bp(l,m)}var _=s.memoizedState;if(_!==null){var T=_.dehydrated;if(ob(l),b)if(l.flags&256)l.flags&=-257,l=XA(s,l,d);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Cn||hu(s,l,d,!1),b=(d&s.childLanes)!==0,Cn||b){if(m=Bt,m!==null&&(T=Ld(m,d),T!==0&&T!==_.retryLane))throw _.retryLane=T,Ul(s,T),Qr(m,s,T),Tb;Op(),l=XA(s,l,d)}else s=_.treeContext,Kt=Pi(T.nextSibling),ir=l,mt=!0,yo=null,Oi=!1,s!==null&&zS(l,s),l=bp(l,m),l.flags|=4096;return l}return s=oa(s.child,{mode:m.mode,children:m.children}),s.ref=l.ref,l.child=s,s.return=l,s}function xp(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(s===null||s.ref!==d)&&(l.flags|=4194816)}}function Cb(s,l,d,m,b){return Fl(l),d=cb(s,l,d,m,void 0,b),m=ub(),s!==null&&!Cn?(db(s,l,b),ha(s,l,b)):(mt&&m&&F0(l),l.flags|=1,ar(s,l,d,b),l.child)}function JA(s,l,d,m,b,_){return Fl(l),l.updateQueue=null,d=tA(l,m,d,b),eA(s),m=ub(),s!==null&&!Cn?(db(s,l,_),ha(s,l,_)):(mt&&m&&F0(l),l.flags|=1,ar(s,l,d,_),l.child)}function ZA(s,l,d,m,b){if(Fl(l),l.stateNode===null){var _=cu,T=d.contextType;typeof T=="object"&&T!==null&&(_=sr(T)),_=new d(m,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Sb,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=m,_.state=l.memoizedState,_.refs={},tb(l),T=d.contextType,_.context=typeof T=="object"&&T!==null?sr(T):cu,_.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(Nb(l,d,T,m),_.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&Sb.enqueueReplaceState(_,_.state,null),hf(l,m,_,b),ff(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(s===null){_=l.stateNode;var z=l.memoizedProps,G=Yl(d,z);_.props=G;var oe=_.context,ve=d.contextType;T=cu,typeof ve=="object"&&ve!==null&&(T=sr(ve));var _e=d.getDerivedStateFromProps;ve=typeof _e=="function"||typeof _.getSnapshotBeforeUpdate=="function",z=l.pendingProps!==z,ve||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(z||oe!==T)&&qA(l,_,m,T),_o=!1;var le=l.memoizedState;_.state=le,hf(l,m,_,b),ff(),oe=l.memoizedState,z||le!==oe||_o?(typeof _e=="function"&&(Nb(l,d,_e,m),oe=l.memoizedState),(G=_o||LA(l,d,G,m,le,oe,T))?(ve||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=oe),_.props=m,_.state=oe,_.context=T,m=G):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{_=l.stateNode,nb(s,l),T=l.memoizedProps,ve=Yl(d,T),_.props=ve,_e=l.pendingProps,le=_.context,oe=d.contextType,G=cu,typeof oe=="object"&&oe!==null&&(G=sr(oe)),z=d.getDerivedStateFromProps,(oe=typeof z=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==_e||le!==G)&&qA(l,_,m,G),_o=!1,le=l.memoizedState,_.state=le,hf(l,m,_,b),ff();var he=l.memoizedState;T!==_e||le!==he||_o||s!==null&&s.dependencies!==null&&tp(s.dependencies)?(typeof z=="function"&&(Nb(l,d,z,m),he=l.memoizedState),(ve=_o||LA(l,d,ve,m,le,he,G)||s!==null&&s.dependencies!==null&&tp(s.dependencies))?(oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,he,G),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,he,G)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===s.memoizedProps&&le===s.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&le===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=he),_.props=m,_.state=he,_.context=G,m=ve):(typeof _.componentDidUpdate!="function"||T===s.memoizedProps&&le===s.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&le===s.memoizedState||(l.flags|=1024),m=!1)}return _=m,xp(s,l),m=(l.flags&128)!==0,_||m?(_=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,s!==null&&m?(l.child=Ql(l,s.child,null,b),l.child=Ql(l,null,d,b)):ar(s,l,d,b),l.memoizedState=_.state,s=l.child):s=ha(s,l,b),s}function eT(s,l,d,m){return Bl(),l.flags|=256,ar(s,l,d,m),l.child}var Ob={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ib(s){return{baseLanes:s,cachePool:$S()}}function Pb(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=ci),s}function tT(s,l,d){var m=l.pendingProps,b=!1,_=(l.flags&128)!==0,T;if((T=_)||(T=s!==null&&s.memoizedState===null?!1:(bn.current&2)!==0),T&&(b=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,s===null){if(mt){if(b?Eo(l):No(),(s=Kt)?(s=cC(s,Oi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:vo!==null?{id:Ts,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},d=kS(s),d.return=l,l.child=d,ir=l,Kt=null)):s=null,s===null)throw bo(l);return mx(s)?l.lanes=32:l.lanes=536870912,null}var z=m.children;return m=m.fallback,b?(No(),b=l.mode,z=_p({mode:"hidden",children:z},b),m=Vl(m,b,d,null),z.return=l,m.return=l,z.sibling=m,l.child=z,m=l.child,m.memoizedState=Ib(d),m.childLanes=Pb(s,T,d),l.memoizedState=Ob,yf(null,m)):(Eo(l),Rb(l,z))}var G=s.memoizedState;if(G!==null&&(z=G.dehydrated,z!==null)){if(_)l.flags&256?(Eo(l),l.flags&=-257,l=kb(s,l,d)):l.memoizedState!==null?(No(),l.child=s.child,l.flags|=128,l=null):(No(),z=m.fallback,b=l.mode,m=_p({mode:"visible",children:m.children},b),z=Vl(z,b,d,null),z.flags|=2,m.return=l,z.return=l,m.sibling=z,l.child=m,Ql(l,s.child,null,d),m=l.child,m.memoizedState=Ib(d),m.childLanes=Pb(s,T,d),l.memoizedState=Ob,l=yf(null,m));else if(Eo(l),mx(z)){if(T=z.nextSibling&&z.nextSibling.dataset,T)var oe=T.dgst;T=oe,m=Error(r(419)),m.stack="",m.digest=T,af({value:m,source:null,stack:null}),l=kb(s,l,d)}else if(Cn||hu(s,l,d,!1),T=(d&s.childLanes)!==0,Cn||T){if(T=Bt,T!==null&&(m=Ld(T,d),m!==0&&m!==G.retryLane))throw G.retryLane=m,Ul(s,m),Qr(T,s,m),Tb;hx(z)||Op(),l=kb(s,l,d)}else hx(z)?(l.flags|=192,l.child=s.child,l=null):(s=G.treeContext,Kt=Pi(z.nextSibling),ir=l,mt=!0,yo=null,Oi=!1,s!==null&&zS(l,s),l=Rb(l,m.children),l.flags|=4096);return l}return b?(No(),z=m.fallback,b=l.mode,G=s.child,oe=G.sibling,m=oa(G,{mode:"hidden",children:m.children}),m.subtreeFlags=G.subtreeFlags&65011712,oe!==null?z=oa(oe,z):(z=Vl(z,b,d,null),z.flags|=2),z.return=l,m.return=l,m.sibling=z,l.child=m,yf(null,m),m=l.child,z=s.child.memoizedState,z===null?z=Ib(d):(b=z.cachePool,b!==null?(G=An._currentValue,b=b.parent!==G?{parent:G,pool:G}:b):b=$S(),z={baseLanes:z.baseLanes|d,cachePool:b}),m.memoizedState=z,m.childLanes=Pb(s,T,d),l.memoizedState=Ob,yf(s.child,m)):(Eo(l),d=s.child,s=d.sibling,d=oa(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,s!==null&&(T=l.deletions,T===null?(l.deletions=[s],l.flags|=16):T.push(s)),l.child=d,l.memoizedState=null,d)}function Rb(s,l){return l=_p({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function _p(s,l){return s=si(22,s,null,l),s.lanes=0,s}function kb(s,l,d){return Ql(l,s.child,null,d),s=Rb(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function nT(s,l,d){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),W0(s.return,l,d)}function Db(s,l,d,m,b,_){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b,treeForkCount:_}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=b,T.treeForkCount=_)}function rT(s,l,d){var m=l.pendingProps,b=m.revealOrder,_=m.tail;m=m.children;var T=bn.current,z=(T&2)!==0;if(z?(T=T&1|2,l.flags|=128):T&=1,ye(bn,T),ar(s,l,m,d),m=mt?sf:0,!z&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&nT(s,d,l);else if(s.tag===19)nT(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(d=l.child,b=null;d!==null;)s=d.alternate,s!==null&&cp(s)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),Db(l,!1,b,d,_,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&cp(s)===null){l.child=b;break}s=b.sibling,b.sibling=d,d=b,b=s}Db(l,!0,d,null,_,m);break;case"together":Db(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function ha(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),To|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(hu(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,d=oa(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=oa(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function Mb(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&tp(s)))}function h9(s,l,d){switch(l.tag){case 3:De(l,l.stateNode.containerInfo),xo(l,An,s.memoizedState.cache),Bl();break;case 27:case 5:X(l);break;case 4:De(l,l.stateNode.containerInfo);break;case 10:xo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,ob(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Eo(l),l.flags|=128,null):(d&l.child.childLanes)!==0?tT(s,l,d):(Eo(l),s=ha(s,l,d),s!==null?s.sibling:null);Eo(l);break;case 19:var b=(s.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(hu(s,l,d,!1),m=(d&l.childLanes)!==0),b){if(m)return rT(s,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ye(bn,bn.current),m)break;return null;case 22:return l.lanes=0,WA(s,l,d,l.pendingProps);case 24:xo(l,An,s.memoizedState.cache)}return ha(s,l,d)}function iT(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)Cn=!0;else{if(!Mb(s,d)&&(l.flags&128)===0)return Cn=!1,h9(s,l,d);Cn=(s.flags&131072)!==0}else Cn=!1,mt&&(l.flags&1048576)!==0&&MS(l,sf,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(s=Gl(l.elementType),l.type=s,typeof s=="function")V0(s)?(m=Yl(s,m),l.tag=1,l=ZA(null,l,s,m,d)):(l.tag=0,l=Cb(null,l,s,m,d));else{if(s!=null){var b=s.$$typeof;if(b===C){l.tag=11,l=GA(null,l,s,m,d);break e}else if(b===D){l.tag=14,l=KA(null,l,s,m,d);break e}}throw l=ge(s)||s,Error(r(306,l,""))}}return l;case 0:return Cb(s,l,l.type,l.pendingProps,d);case 1:return m=l.type,b=Yl(m,l.pendingProps),ZA(s,l,m,b,d);case 3:e:{if(De(l,l.stateNode.containerInfo),s===null)throw Error(r(387));m=l.pendingProps;var _=l.memoizedState;b=_.element,nb(s,l),hf(l,m,null,d);var T=l.memoizedState;if(m=T.cache,xo(l,An,m),m!==_.cache&&Y0(l,[An],d,!0),ff(),m=T.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=eT(s,l,m,d);break e}else if(m!==b){b=Ai(Error(r(424)),l),af(b),l=eT(s,l,m,d);break e}else for(s=l.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Kt=Pi(s.firstChild),ir=l,mt=!0,yo=null,Oi=!0,d=WS(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Bl(),m===b){l=ha(s,l,d);break e}ar(s,l,m,d)}l=l.child}return l;case 26:return xp(s,l),s===null?(d=pC(l.type,null,l.pendingProps,null))?l.memoizedState=d:mt||(d=l.type,s=l.pendingProps,m=zp(ne.current).createElement(d),m[En]=l,m[Hn]=s,or(m,d,s),Nn(m),l.stateNode=m):l.memoizedState=pC(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return X(l),s===null&&mt&&(m=l.stateNode=fC(l.type,l.pendingProps,ne.current),ir=l,Oi=!0,b=Kt,Ro(l.type)?(px=b,Kt=Pi(m.firstChild)):Kt=b),ar(s,l,l.pendingProps.children,d),xp(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&mt&&((b=m=Kt)&&(m=$9(m,l.type,l.pendingProps,Oi),m!==null?(l.stateNode=m,ir=l,Kt=Pi(m.firstChild),Oi=!1,b=!0):b=!1),b||bo(l)),X(l),b=l.type,_=l.pendingProps,T=s!==null?s.memoizedProps:null,m=_.children,ux(b,_)?m=null:T!==null&&ux(b,T)&&(l.flags|=32),l.memoizedState!==null&&(b=cb(s,l,i9,null,null,d),Rf._currentValue=b),xp(s,l),ar(s,l,m,d),l.child;case 6:return s===null&&mt&&((s=d=Kt)&&(d=F9(d,l.pendingProps,Oi),d!==null?(l.stateNode=d,ir=l,Kt=null,s=!0):s=!1),s||bo(l)),null;case 13:return tT(s,l,d);case 4:return De(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=Ql(l,null,m,d):ar(s,l,m,d),l.child;case 11:return GA(s,l,l.type,l.pendingProps,d);case 7:return ar(s,l,l.pendingProps,d),l.child;case 8:return ar(s,l,l.pendingProps.children,d),l.child;case 12:return ar(s,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,xo(l,l.type,m.value),ar(s,l,m.children,d),l.child;case 9:return b=l.type._context,m=l.pendingProps.children,Fl(l),b=sr(b),m=m(b),l.flags|=1,ar(s,l,m,d),l.child;case 14:return KA(s,l,l.type,l.pendingProps,d);case 15:return QA(s,l,l.type,l.pendingProps,d);case 19:return rT(s,l,d);case 31:return f9(s,l,d);case 22:return WA(s,l,d,l.pendingProps);case 24:return Fl(l),m=sr(An),s===null?(b=Z0(),b===null&&(b=Bt,_=X0(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=d),b=_),l.memoizedState={parent:m,cache:b},tb(l),xo(l,An,b)):((s.lanes&d)!==0&&(nb(s,l),hf(l,null,null,d),ff()),b=s.memoizedState,_=l.memoizedState,b.parent!==m?(b={parent:m,cache:m},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),xo(l,An,m)):(m=_.cache,xo(l,An,m),m!==b.cache&&Y0(l,[An],d,!0))),ar(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ma(s){s.flags|=4}function zb(s,l,d,m,b){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if(IT())s.flags|=8192;else throw Kl=sp,eb}else s.flags&=-16777217}function sT(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!xC(l))if(IT())s.flags|=8192;else throw Kl=sp,eb}function wp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Ve():536870912,s.lanes|=l,Nu|=l)}function bf(s,l){if(!mt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Qt(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(l)for(var b=s.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=m,s.childLanes=d,l}function m9(s,l,d){var m=l.pendingProps;switch(H0(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(l),null;case 1:return Qt(l),null;case 3:return d=l.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),ua(An),se(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(fu(l)?ma(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,K0())),Qt(l),null;case 26:var b=l.type,_=l.memoizedState;return s===null?(ma(l),_!==null?(Qt(l),sT(l,_)):(Qt(l),zb(l,b,null,m,d))):_?_!==s.memoizedState?(ma(l),Qt(l),sT(l,_)):(Qt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==m&&ma(l),Qt(l),zb(l,b,s,m,d)),null;case 27:if(K(l),d=ne.current,b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&ma(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Qt(l),null}s=Ee.current,fu(l)?LS(l):(s=fC(b,m,d),l.stateNode=s,ma(l))}return Qt(l),null;case 5:if(K(l),b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&ma(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Qt(l),null}if(_=Ee.current,fu(l))LS(l);else{var T=zp(ne.current);switch(_){case 1:_=T.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=T.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=T.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?T.createElement(b,{is:m.is}):T.createElement(b)}}_[En]=l,_[Hn]=m;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)_.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=_;e:switch(or(_,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ma(l)}}return Qt(l),zb(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,d),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==m&&ma(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(s=ne.current,fu(l)){if(s=l.stateNode,d=l.memoizedProps,m=null,b=ir,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}s[En]=l,s=!!(s.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||tC(s.nodeValue,d)),s||bo(l,!0)}else s=zp(s).createTextNode(m),s[En]=l,l.stateNode=s}return Qt(l),null;case 31:if(d=l.memoizedState,s===null||s.memoizedState!==null){if(m=fu(l),d!==null){if(s===null){if(!m)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[En]=l}else Bl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qt(l),s=!1}else d=K0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return l.flags&256?(oi(l),l):(oi(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Qt(l),null;case 13:if(m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=fu(l),m!==null&&m.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[En]=l}else Bl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qt(l),b=!1}else b=K0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(oi(l),l):(oi(l),null)}return oi(l),(l.flags&128)!==0?(l.lanes=d,l):(d=m!==null,s=s!==null&&s.memoizedState!==null,d&&(m=l.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==b&&(m.flags|=2048)),d!==s&&d&&(l.child.flags|=8192),wp(l,l.updateQueue),Qt(l),null);case 4:return se(),s===null&&sx(l.stateNode.containerInfo),Qt(l),null;case 10:return ua(l.type),Qt(l),null;case 19:if(re(bn),m=l.memoizedState,m===null)return Qt(l),null;if(b=(l.flags&128)!==0,_=m.rendering,_===null)if(b)bf(m,!1);else{if(un!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(_=cp(s),_!==null){for(l.flags|=128,bf(m,!1),s=_.updateQueue,l.updateQueue=s,wp(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)RS(d,s),d=d.sibling;return ye(bn,bn.current&1|2),mt&&la(l,m.treeForkCount),l.child}s=s.sibling}m.tail!==null&&Be()>Ap&&(l.flags|=128,b=!0,bf(m,!1),l.lanes=4194304)}else{if(!b)if(s=cp(_),s!==null){if(l.flags|=128,b=!0,s=s.updateQueue,l.updateQueue=s,wp(l,s),bf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!mt)return Qt(l),null}else 2*Be()-m.renderingStartTime>Ap&&d!==536870912&&(l.flags|=128,b=!0,bf(m,!1),l.lanes=4194304);m.isBackwards?(_.sibling=l.child,l.child=_):(s=m.last,s!==null?s.sibling=_:l.child=_,m.last=_)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Be(),s.sibling=null,d=bn.current,ye(bn,b?d&1|2:d&1),mt&&la(l,m.treeForkCount),s):(Qt(l),null);case 22:case 23:return oi(l),ab(),m=l.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(Qt(l),l.subtreeFlags&6&&(l.flags|=8192)):Qt(l),d=l.updateQueue,d!==null&&wp(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),s!==null&&re(Hl),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ua(An),Qt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function p9(s,l){switch(H0(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ua(An),se(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return K(l),null;case 31:if(l.memoizedState!==null){if(oi(l),l.alternate===null)throw Error(r(340));Bl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(oi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Bl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return re(bn),null;case 4:return se(),null;case 10:return ua(l.type),null;case 22:case 23:return oi(l),ab(),s!==null&&re(Hl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ua(An),null;case 25:return null;default:return null}}function aT(s,l){switch(H0(l),l.tag){case 3:ua(An),se();break;case 26:case 27:case 5:K(l);break;case 4:se();break;case 31:l.memoizedState!==null&&oi(l);break;case 13:oi(l);break;case 19:re(bn);break;case 10:ua(l.type);break;case 22:case 23:oi(l),ab(),s!==null&&re(Hl);break;case 24:ua(An)}}function xf(s,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&s)===s){m=void 0;var _=d.create,T=d.inst;m=_(),T.destroy=m}d=d.next}while(d!==b)}}catch(z){Ot(l,l.return,z)}}function So(s,l,d){try{var m=l.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var _=b.next;m=_;do{if((m.tag&s)===s){var T=m.inst,z=T.destroy;if(z!==void 0){T.destroy=void 0,b=l;var G=d,oe=z;try{oe()}catch(ve){Ot(b,G,ve)}}}m=m.next}while(m!==_)}}catch(ve){Ot(l,l.return,ve)}}function oT(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{XS(l,d)}catch(m){Ot(s,s.return,m)}}}function lT(s,l,d){d.props=Yl(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(m){Ot(s,l,m)}}function _f(s,l){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof d=="function"?s.refCleanup=d(m):d.current=m}}catch(b){Ot(s,l,b)}}function Os(s,l){var d=s.ref,m=s.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(b){Ot(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){Ot(s,l,b)}else d.current=null}function cT(s){var l=s.type,d=s.memoizedProps,m=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(b){Ot(s,s.return,b)}}function Lb(s,l,d){try{var m=s.stateNode;z9(m,s.type,d,l),m[Hn]=l}catch(b){Ot(s,s.return,b)}}function uT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ro(s.type)||s.tag===4}function qb(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||uT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ro(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ub(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(s),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Qi));else if(m!==4&&(m===27&&Ro(s.type)&&(d=s.stateNode,l=null),s=s.child,s!==null))for(Ub(s,l,d),s=s.sibling;s!==null;)Ub(s,l,d),s=s.sibling}function jp(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(m!==4&&(m===27&&Ro(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(jp(s,l,d),s=s.sibling;s!==null;)jp(s,l,d),s=s.sibling}function dT(s){var l=s.stateNode,d=s.memoizedProps;try{for(var m=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);or(l,m,d),l[En]=s,l[Hn]=d}catch(_){Ot(s,s.return,_)}}var pa=!1,On=!1,Vb=!1,fT=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function g9(s,l){if(s=s.containerInfo,lx=Fp,s=ES(s),k0(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var T=0,z=-1,G=-1,oe=0,ve=0,_e=s,le=null;t:for(;;){for(var he;_e!==d||b!==0&&_e.nodeType!==3||(z=T+b),_e!==_||m!==0&&_e.nodeType!==3||(G=T+m),_e.nodeType===3&&(T+=_e.nodeValue.length),(he=_e.firstChild)!==null;)le=_e,_e=he;for(;;){if(_e===s)break t;if(le===d&&++oe===b&&(z=T),le===_&&++ve===m&&(G=T),(he=_e.nextSibling)!==null)break;_e=le,le=_e.parentNode}_e=he}d=z===-1||G===-1?null:{start:z,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(cx={focusedElem:s,selectionRange:d},Fp=!1,Kn=l;Kn!==null;)if(l=Kn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Kn=s;else for(;Kn!==null;){switch(l=Kn,_=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)b=s[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,d=l,b=_.memoizedProps,_=_.memoizedState,m=d.stateNode;try{var Ie=Yl(d.type,b);s=m.getSnapshotBeforeUpdate(Ie,_),m.__reactInternalSnapshotBeforeUpdate=s}catch(Fe){Ot(d,d.return,Fe)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)fx(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":fx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Kn=s;break}Kn=l.return}}function hT(s,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:va(s,d),m&4&&xf(5,d);break;case 1:if(va(s,d),m&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(T){Ot(d,d.return,T)}else{var b=Yl(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Ot(d,d.return,T)}}m&64&&oT(d),m&512&&_f(d,d.return);break;case 3:if(va(s,d),m&64&&(s=d.updateQueue,s!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{XS(s,l)}catch(T){Ot(d,d.return,T)}}break;case 27:l===null&&m&4&&dT(d);case 26:case 5:va(s,d),l===null&&m&4&&cT(d),m&512&&_f(d,d.return);break;case 12:va(s,d);break;case 31:va(s,d),m&4&&gT(s,d);break;case 13:va(s,d),m&4&&vT(s,d),m&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=N9.bind(null,d),H9(s,d))));break;case 22:if(m=d.memoizedState!==null||pa,!m){l=l!==null&&l.memoizedState!==null||On,b=pa;var _=On;pa=m,(On=l)&&!_?ya(s,d,(d.subtreeFlags&8772)!==0):va(s,d),pa=b,On=_}break;case 30:break;default:va(s,d)}}function mT(s){var l=s.alternate;l!==null&&(s.alternate=null,mT(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Wc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xt=null,Fr=!1;function ga(s,l,d){for(d=d.child;d!==null;)pT(s,l,d),d=d.sibling}function pT(s,l,d){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(on,d)}catch{}switch(d.tag){case 26:On||Os(d,l),ga(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:On||Os(d,l);var m=Xt,b=Fr;Ro(d.type)&&(Xt=d.stateNode,Fr=!1),ga(s,l,d),Of(d.stateNode),Xt=m,Fr=b;break;case 5:On||Os(d,l);case 6:if(m=Xt,b=Fr,Xt=null,ga(s,l,d),Xt=m,Fr=b,Xt!==null)if(Fr)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(d.stateNode)}catch(_){Ot(d,l,_)}else try{Xt.removeChild(d.stateNode)}catch(_){Ot(d,l,_)}break;case 18:Xt!==null&&(Fr?(s=Xt,oC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),Ru(s)):oC(Xt,d.stateNode));break;case 4:m=Xt,b=Fr,Xt=d.stateNode.containerInfo,Fr=!0,ga(s,l,d),Xt=m,Fr=b;break;case 0:case 11:case 14:case 15:So(2,d,l),On||So(4,d,l),ga(s,l,d);break;case 1:On||(Os(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&lT(d,l,m)),ga(s,l,d);break;case 21:ga(s,l,d);break;case 22:On=(m=On)||d.memoizedState!==null,ga(s,l,d),On=m;break;default:ga(s,l,d)}}function gT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ru(s)}catch(d){Ot(l,l.return,d)}}}function vT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ru(s)}catch(d){Ot(l,l.return,d)}}function v9(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new fT),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new fT),l;default:throw Error(r(435,s.tag))}}function Ep(s,l){var d=v9(s);l.forEach(function(m){if(!d.has(m)){d.add(m);var b=S9.bind(null,s,m);m.then(b,b)}})}function Hr(s,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m],_=s,T=l,z=T;e:for(;z!==null;){switch(z.tag){case 27:if(Ro(z.type)){Xt=z.stateNode,Fr=!1;break e}break;case 5:Xt=z.stateNode,Fr=!1;break e;case 3:case 4:Xt=z.stateNode.containerInfo,Fr=!0;break e}z=z.return}if(Xt===null)throw Error(r(160));pT(_,T,b),Xt=null,Fr=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)yT(l,s),l=l.sibling}var es=null;function yT(s,l){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Hr(l,s),Gr(s),m&4&&(So(3,s,s.return),xf(3,s),So(5,s,s.return));break;case 1:Hr(l,s),Gr(s),m&512&&(On||d===null||Os(d,d.return)),m&64&&pa&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var b=es;if(Hr(l,s),Gr(s),m&512&&(On||d===null||Os(d,d.return)),m&4){var _=d!==null?d.memoizedState:null;if(m=s.memoizedState,d===null)if(m===null)if(s.stateNode===null){e:{m=s.type,d=s.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":_=b.getElementsByTagName("title")[0],(!_||_[gs]||_[En]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(m),b.head.insertBefore(_,b.querySelector("head > title"))),or(_,m,d),_[En]=s,Nn(_),m=_;break e;case"link":var T=yC("link","href",b).get(m+(d.href||""));if(T){for(var z=0;z<T.length;z++)if(_=T[z],_.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&_.getAttribute("rel")===(d.rel==null?null:d.rel)&&_.getAttribute("title")===(d.title==null?null:d.title)&&_.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(z,1);break t}}_=b.createElement(m),or(_,m,d),b.head.appendChild(_);break;case"meta":if(T=yC("meta","content",b).get(m+(d.content||""))){for(z=0;z<T.length;z++)if(_=T[z],_.getAttribute("content")===(d.content==null?null:""+d.content)&&_.getAttribute("name")===(d.name==null?null:d.name)&&_.getAttribute("property")===(d.property==null?null:d.property)&&_.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&_.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(z,1);break t}}_=b.createElement(m),or(_,m,d),b.head.appendChild(_);break;default:throw Error(r(468,m))}_[En]=s,Nn(_),m=_}s.stateNode=m}else bC(b,s.type,s.stateNode);else s.stateNode=vC(b,m,s.memoizedProps);else _!==m?(_===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):_.count--,m===null?bC(b,s.type,s.stateNode):vC(b,m,s.memoizedProps)):m===null&&s.stateNode!==null&&Lb(s,s.memoizedProps,d.memoizedProps)}break;case 27:Hr(l,s),Gr(s),m&512&&(On||d===null||Os(d,d.return)),d!==null&&m&4&&Lb(s,s.memoizedProps,d.memoizedProps);break;case 5:if(Hr(l,s),Gr(s),m&512&&(On||d===null||Os(d,d.return)),s.flags&32){b=s.stateNode;try{$r(b,"")}catch(Ie){Ot(s,s.return,Ie)}}m&4&&s.stateNode!=null&&(b=s.memoizedProps,Lb(s,b,d!==null?d.memoizedProps:b)),m&1024&&(Vb=!0);break;case 6:if(Hr(l,s),Gr(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,d=s.stateNode;try{d.nodeValue=m}catch(Ie){Ot(s,s.return,Ie)}}break;case 3:if(Up=null,b=es,es=Lp(l.containerInfo),Hr(l,s),es=b,Gr(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Ru(l.containerInfo)}catch(Ie){Ot(s,s.return,Ie)}Vb&&(Vb=!1,bT(s));break;case 4:m=es,es=Lp(s.stateNode.containerInfo),Hr(l,s),Gr(s),es=m;break;case 12:Hr(l,s),Gr(s);break;case 31:Hr(l,s),Gr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Ep(s,m)));break;case 13:Hr(l,s),Gr(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Sp=Be()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Ep(s,m)));break;case 22:b=s.memoizedState!==null;var G=d!==null&&d.memoizedState!==null,oe=pa,ve=On;if(pa=oe||b,On=ve||G,Hr(l,s),On=ve,pa=oe,Gr(s),m&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(d===null||G||pa||On||Xl(s)),d=null,l=s;;){if(l.tag===5||l.tag===26){if(d===null){G=d=l;try{if(_=G.stateNode,b)T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{z=G.stateNode;var _e=G.memoizedProps.style,le=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;z.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(Ie){Ot(G,G.return,Ie)}}}else if(l.tag===6){if(d===null){G=l;try{G.stateNode.nodeValue=b?"":G.memoizedProps}catch(Ie){Ot(G,G.return,Ie)}}}else if(l.tag===18){if(d===null){G=l;try{var he=G.stateNode;b?lC(he,!0):lC(G.stateNode,!1)}catch(Ie){Ot(G,G.return,Ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=s.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Ep(s,d))));break;case 19:Hr(l,s),Gr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Ep(s,m)));break;case 30:break;case 21:break;default:Hr(l,s),Gr(s)}}function Gr(s){var l=s.flags;if(l&2){try{for(var d,m=s.return;m!==null;){if(uT(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var b=d.stateNode,_=qb(s);jp(s,_,b);break;case 5:var T=d.stateNode;d.flags&32&&($r(T,""),d.flags&=-33);var z=qb(s);jp(s,z,T);break;case 3:case 4:var G=d.stateNode.containerInfo,oe=qb(s);Ub(s,oe,G);break;default:throw Error(r(161))}}catch(ve){Ot(s,s.return,ve)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function bT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;bT(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function va(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)hT(s,l.alternate,l),l=l.sibling}function Xl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:So(4,l,l.return),Xl(l);break;case 1:Os(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&lT(l,l.return,d),Xl(l);break;case 27:Of(l.stateNode);case 26:case 5:Os(l,l.return),Xl(l);break;case 22:l.memoizedState===null&&Xl(l);break;case 30:Xl(l);break;default:Xl(l)}s=s.sibling}}function ya(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,b=s,_=l,T=_.flags;switch(_.tag){case 0:case 11:case 15:ya(b,_,d),xf(4,_);break;case 1:if(ya(b,_,d),m=_,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(oe){Ot(m,m.return,oe)}if(m=_,b=m.updateQueue,b!==null){var z=m.stateNode;try{var G=b.shared.hiddenCallbacks;if(G!==null)for(b.shared.hiddenCallbacks=null,b=0;b<G.length;b++)YS(G[b],z)}catch(oe){Ot(m,m.return,oe)}}d&&T&64&&oT(_),_f(_,_.return);break;case 27:dT(_);case 26:case 5:ya(b,_,d),d&&m===null&&T&4&&cT(_),_f(_,_.return);break;case 12:ya(b,_,d);break;case 31:ya(b,_,d),d&&T&4&&gT(b,_);break;case 13:ya(b,_,d),d&&T&4&&vT(b,_);break;case 22:_.memoizedState===null&&ya(b,_,d),_f(_,_.return);break;case 30:break;default:ya(b,_,d)}l=l.sibling}}function Bb(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&of(d))}function $b(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&of(s))}function ts(s,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)xT(s,l,d,m),l=l.sibling}function xT(s,l,d,m){var b=l.flags;switch(l.tag){case 0:case 11:case 15:ts(s,l,d,m),b&2048&&xf(9,l);break;case 1:ts(s,l,d,m);break;case 3:ts(s,l,d,m),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&of(s)));break;case 12:if(b&2048){ts(s,l,d,m),s=l.stateNode;try{var _=l.memoizedProps,T=_.id,z=_.onPostCommit;typeof z=="function"&&z(T,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){Ot(l,l.return,G)}}else ts(s,l,d,m);break;case 31:ts(s,l,d,m);break;case 13:ts(s,l,d,m);break;case 23:break;case 22:_=l.stateNode,T=l.alternate,l.memoizedState!==null?_._visibility&2?ts(s,l,d,m):wf(s,l):_._visibility&2?ts(s,l,d,m):(_._visibility|=2,wu(s,l,d,m,(l.subtreeFlags&10256)!==0||!1)),b&2048&&Bb(T,l);break;case 24:ts(s,l,d,m),b&2048&&$b(l.alternate,l);break;default:ts(s,l,d,m)}}function wu(s,l,d,m,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=s,T=l,z=d,G=m,oe=T.flags;switch(T.tag){case 0:case 11:case 15:wu(_,T,z,G,b),xf(8,T);break;case 23:break;case 22:var ve=T.stateNode;T.memoizedState!==null?ve._visibility&2?wu(_,T,z,G,b):wf(_,T):(ve._visibility|=2,wu(_,T,z,G,b)),b&&oe&2048&&Bb(T.alternate,T);break;case 24:wu(_,T,z,G,b),b&&oe&2048&&$b(T.alternate,T);break;default:wu(_,T,z,G,b)}l=l.sibling}}function wf(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,m=l,b=m.flags;switch(m.tag){case 22:wf(d,m),b&2048&&Bb(m.alternate,m);break;case 24:wf(d,m),b&2048&&$b(m.alternate,m);break;default:wf(d,m)}l=l.sibling}}var jf=8192;function ju(s,l,d){if(s.subtreeFlags&jf)for(s=s.child;s!==null;)_T(s,l,d),s=s.sibling}function _T(s,l,d){switch(s.tag){case 26:ju(s,l,d),s.flags&jf&&s.memoizedState!==null&&rV(d,es,s.memoizedState,s.memoizedProps);break;case 5:ju(s,l,d);break;case 3:case 4:var m=es;es=Lp(s.stateNode.containerInfo),ju(s,l,d),es=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=jf,jf=16777216,ju(s,l,d),jf=m):ju(s,l,d));break;default:ju(s,l,d)}}function wT(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Ef(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Kn=m,ET(m,s)}wT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)jT(s),s=s.sibling}function jT(s){switch(s.tag){case 0:case 11:case 15:Ef(s),s.flags&2048&&So(9,s,s.return);break;case 3:Ef(s);break;case 12:Ef(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Np(s)):Ef(s);break;default:Ef(s)}}function Np(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Kn=m,ET(m,s)}wT(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:So(8,l,l.return),Np(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Np(l));break;default:Np(l)}s=s.sibling}}function ET(s,l){for(;Kn!==null;){var d=Kn;switch(d.tag){case 0:case 11:case 15:So(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:of(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Kn=m;else e:for(d=s;Kn!==null;){m=Kn;var b=m.sibling,_=m.return;if(mT(m),m===d){Kn=null;break e}if(b!==null){b.return=_,Kn=b;break e}Kn=_}}}var y9={getCacheForType:function(s){var l=sr(An),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d},cacheSignal:function(){return sr(An).controller.signal}},b9=typeof WeakMap=="function"?WeakMap:Map,jt=0,Bt=null,st=null,lt=0,Ct=0,li=null,Ao=!1,Eu=!1,Fb=!1,ba=0,un=0,To=0,Jl=0,Hb=0,ci=0,Nu=0,Nf=null,Kr=null,Gb=!1,Sp=0,NT=0,Ap=1/0,Tp=null,Co=null,Ln=0,Oo=null,Su=null,xa=0,Kb=0,Qb=null,ST=null,Sf=0,Wb=null;function ui(){return(jt&2)!==0&&lt!==0?lt&-lt:H.T!==null?tx():Cm()}function AT(){if(ci===0)if((lt&536870912)===0||mt){var s=na;na<<=1,(na&3932160)===0&&(na=262144),ci=s}else ci=536870912;return s=ai.current,s!==null&&(s.flags|=32),ci}function Qr(s,l,d){(s===Bt&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)&&(Au(s,0),Io(s,lt,ci,!1)),Fn(s,d),((jt&2)===0||s!==Bt)&&(s===Bt&&((jt&2)===0&&(Jl|=d),un===4&&Io(s,lt,ci,!1)),Is(s))}function TT(s,l,d){if((jt&6)!==0)throw Error(r(327));var m=!d&&(l&127)===0&&(l&s.expiredLanes)===0||ti(s,l),b=m?w9(s,l):Xb(s,l,!0),_=m;do{if(b===0){Eu&&!m&&Io(s,l,0,!1);break}else{if(d=s.current.alternate,_&&!x9(d)){b=Xb(s,l,!1),_=!1;continue}if(b===2){if(_=l,s.errorRecoveryDisabledLanes&_)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var z=s;b=Nf;var G=z.current.memoizedState.isDehydrated;if(G&&(Au(z,T).flags|=256),T=Xb(z,T,!1),T!==2){if(Fb&&!G){z.errorRecoveryDisabledLanes|=_,Jl|=_,b=4;break e}_=Kr,Kr=b,_!==null&&(Kr===null?Kr=_:Kr.push.apply(Kr,_))}b=T}if(_=!1,b!==2)continue}}if(b===1){Au(s,0),Io(s,l,0,!0);break}e:{switch(m=s,_=b,_){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Io(m,l,ci,!Ao);break e;case 2:Kr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=Sp+300-Be(),10<b)){if(Io(m,l,ci,!Ao),gr(m,0,!0)!==0)break e;xa=l,m.timeoutHandle=sC(CT.bind(null,m,d,Kr,Tp,Gb,l,ci,Jl,Nu,Ao,_,"Throttled",-0,0),b);break e}CT(m,d,Kr,Tp,Gb,l,ci,Jl,Nu,Ao,_,null,-0,0)}}break}while(!0);Is(s)}function CT(s,l,d,m,b,_,T,z,G,oe,ve,_e,le,he){if(s.timeoutHandle=-1,_e=l.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},_T(l,_,_e);var Ie=(_&62914560)===_?Sp-Be():(_&4194048)===_?NT-Be():0;if(Ie=iV(_e,Ie),Ie!==null){xa=_,s.cancelPendingCommit=Ie(zT.bind(null,s,l,_,d,m,b,T,z,G,ve,_e,null,le,he)),Io(s,_,T,!oe);return}}zT(s,l,_,d,m,b,T,z,G)}function x9(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var b=d[m],_=b.getSnapshot;b=b.value;try{if(!ii(_(),b))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Io(s,l,d,m){l&=~Hb,l&=~Jl,s.suspendedLanes|=l,s.pingedLanes&=~l,m&&(s.warmLanes|=l),m=s.expirationTimes;for(var b=l;0<b;){var _=31-en(b),T=1<<_;m[_]=-1,b&=~T}d!==0&&_i(s,d,l)}function Cp(){return(jt&6)===0?(Af(0),!1):!0}function Yb(){if(st!==null){if(Ct===0)var s=st.return;else s=st,ca=$l=null,fb(s),vu=null,cf=0,s=st;for(;s!==null;)aT(s.alternate,s),s=s.return;st=null}}function Au(s,l){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,U9(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),xa=0,Yb(),Bt=s,st=d=oa(s.current,null),lt=l,Ct=0,li=null,Ao=!1,Eu=ti(s,l),Fb=!1,Nu=ci=Hb=Jl=To=un=0,Kr=Nf=null,Gb=!1,(l&8)!==0&&(l|=l&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=l;0<m;){var b=31-en(m),_=1<<b;l|=s[b],m&=~_}return ba=l,Ym(),d}function OT(s,l){et=null,H.H=vf,l===gu||l===ip?(l=GS(),Ct=3):l===eb?(l=GS(),Ct=4):Ct=l===Tb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,li=l,st===null&&(un=1,yp(s,Ai(l,s.current)))}function IT(){var s=ai.current;return s===null?!0:(lt&4194048)===lt?Ii===null:(lt&62914560)===lt||(lt&536870912)!==0?s===Ii:!1}function PT(){var s=H.H;return H.H=vf,s===null?vf:s}function RT(){var s=H.A;return H.A=y9,s}function Op(){un=4,Ao||(lt&4194048)!==lt&&ai.current!==null||(Eu=!0),(To&134217727)===0&&(Jl&134217727)===0||Bt===null||Io(Bt,lt,ci,!1)}function Xb(s,l,d){var m=jt;jt|=2;var b=PT(),_=RT();(Bt!==s||lt!==l)&&(Tp=null,Au(s,l)),l=!1;var T=un;e:do try{if(Ct!==0&&st!==null){var z=st,G=li;switch(Ct){case 8:Yb(),T=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(l=!0);var oe=Ct;if(Ct=0,li=null,Tu(s,z,G,oe),d&&Eu){T=0;break e}break;default:oe=Ct,Ct=0,li=null,Tu(s,z,G,oe)}}_9(),T=un;break}catch(ve){OT(s,ve)}while(!0);return l&&s.shellSuspendCounter++,ca=$l=null,jt=m,H.H=b,H.A=_,st===null&&(Bt=null,lt=0,Ym()),T}function _9(){for(;st!==null;)kT(st)}function w9(s,l){var d=jt;jt|=2;var m=PT(),b=RT();Bt!==s||lt!==l?(Tp=null,Ap=Be()+500,Au(s,l)):Eu=ti(s,l);e:do try{if(Ct!==0&&st!==null){l=st;var _=li;t:switch(Ct){case 1:Ct=0,li=null,Tu(s,l,_,1);break;case 2:case 9:if(FS(_)){Ct=0,li=null,DT(l);break}l=function(){Ct!==2&&Ct!==9||Bt!==s||(Ct=7),Is(s)},_.then(l,l);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:FS(_)?(Ct=0,li=null,DT(l)):(Ct=0,li=null,Tu(s,l,_,7));break;case 5:var T=null;switch(st.tag){case 26:T=st.memoizedState;case 5:case 27:var z=st;if(T?xC(T):z.stateNode.complete){Ct=0,li=null;var G=z.sibling;if(G!==null)st=G;else{var oe=z.return;oe!==null?(st=oe,Ip(oe)):st=null}break t}}Ct=0,li=null,Tu(s,l,_,5);break;case 6:Ct=0,li=null,Tu(s,l,_,6);break;case 8:Yb(),un=6;break e;default:throw Error(r(462))}}j9();break}catch(ve){OT(s,ve)}while(!0);return ca=$l=null,H.H=m,H.A=b,jt=d,st!==null?0:(Bt=null,lt=0,Ym(),un)}function j9(){for(;st!==null&&!me();)kT(st)}function kT(s){var l=iT(s.alternate,s,ba);s.memoizedProps=s.pendingProps,l===null?Ip(s):st=l}function DT(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=JA(d,l,l.pendingProps,l.type,void 0,lt);break;case 11:l=JA(d,l,l.pendingProps,l.type.render,l.ref,lt);break;case 5:fb(l);default:aT(d,l),l=st=RS(l,ba),l=iT(d,l,ba)}s.memoizedProps=s.pendingProps,l===null?Ip(s):st=l}function Tu(s,l,d,m){ca=$l=null,fb(l),vu=null,cf=0;var b=l.return;try{if(d9(s,b,l,d,lt)){un=1,yp(s,Ai(d,s.current)),st=null;return}}catch(_){if(b!==null)throw st=b,_;un=1,yp(s,Ai(d,s.current)),st=null;return}l.flags&32768?(mt||m===1?s=!0:Eu||(lt&536870912)!==0?s=!1:(Ao=s=!0,(m===2||m===9||m===3||m===6)&&(m=ai.current,m!==null&&m.tag===13&&(m.flags|=16384))),MT(l,s)):Ip(l)}function Ip(s){var l=s;do{if((l.flags&32768)!==0){MT(l,Ao);return}s=l.return;var d=m9(l.alternate,l,ba);if(d!==null){st=d;return}if(l=l.sibling,l!==null){st=l;return}st=l=s}while(l!==null);un===0&&(un=5)}function MT(s,l){do{var d=p9(s.alternate,s);if(d!==null){d.flags&=32767,st=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){st=s;return}st=s=d}while(s!==null);un=6,st=null}function zT(s,l,d,m,b,_,T,z,G){s.cancelPendingCommit=null;do Pp();while(Ln!==0);if((jt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(_=l.lanes|l.childLanes,_|=q0,Al(s,d,_,T,z,G),s===Bt&&(st=Bt=null,lt=0),Su=l,Oo=s,xa=d,Kb=_,Qb=b,ST=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,A9(qr,function(){return BT(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=H.T,H.T=null,b=ce.p,ce.p=2,T=jt,jt|=4;try{g9(s,l,d)}finally{jt=T,ce.p=b,H.T=m}}Ln=1,LT(),qT(),UT()}}function LT(){if(Ln===1){Ln=0;var s=Oo,l=Su,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=H.T,H.T=null;var m=ce.p;ce.p=2;var b=jt;jt|=4;try{yT(l,s);var _=cx,T=ES(s.containerInfo),z=_.focusedElem,G=_.selectionRange;if(T!==z&&z&&z.ownerDocument&&jS(z.ownerDocument.documentElement,z)){if(G!==null&&k0(z)){var oe=G.start,ve=G.end;if(ve===void 0&&(ve=oe),"selectionStart"in z)z.selectionStart=oe,z.selectionEnd=Math.min(ve,z.value.length);else{var _e=z.ownerDocument||document,le=_e&&_e.defaultView||window;if(le.getSelection){var he=le.getSelection(),Ie=z.textContent.length,Fe=Math.min(G.start,Ie),Lt=G.end===void 0?Fe:Math.min(G.end,Ie);!he.extend&&Fe>Lt&&(T=Lt,Lt=Fe,Fe=T);var ee=wS(z,Fe),W=wS(z,Lt);if(ee&&W&&(he.rangeCount!==1||he.anchorNode!==ee.node||he.anchorOffset!==ee.offset||he.focusNode!==W.node||he.focusOffset!==W.offset)){var ae=_e.createRange();ae.setStart(ee.node,ee.offset),he.removeAllRanges(),Fe>Lt?(he.addRange(ae),he.extend(W.node,W.offset)):(ae.setEnd(W.node,W.offset),he.addRange(ae))}}}}for(_e=[],he=z;he=he.parentNode;)he.nodeType===1&&_e.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<_e.length;z++){var xe=_e[z];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Fp=!!lx,cx=lx=null}finally{jt=b,ce.p=m,H.T=d}}s.current=l,Ln=2}}function qT(){if(Ln===2){Ln=0;var s=Oo,l=Su,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=H.T,H.T=null;var m=ce.p;ce.p=2;var b=jt;jt|=4;try{hT(s,l.alternate,l)}finally{jt=b,ce.p=m,H.T=d}}Ln=3}}function UT(){if(Ln===4||Ln===3){Ln=0,Re();var s=Oo,l=Su,d=xa,m=ST;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ln=5:(Ln=0,Su=Oo=null,VT(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(Co=null),ra(d),l=l.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(on,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=H.T,b=ce.p,ce.p=2,H.T=null;try{for(var _=s.onRecoverableError,T=0;T<m.length;T++){var z=m[T];_(z.value,{componentStack:z.stack})}}finally{H.T=l,ce.p=b}}(xa&3)!==0&&Pp(),Is(s),b=s.pendingLanes,(d&261930)!==0&&(b&42)!==0?s===Wb?Sf++:(Sf=0,Wb=s):Sf=0,Af(0)}}function VT(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,of(l)))}function Pp(){return LT(),qT(),UT(),BT()}function BT(){if(Ln!==5)return!1;var s=Oo,l=Kb;Kb=0;var d=ra(xa),m=H.T,b=ce.p;try{ce.p=32>d?32:d,H.T=null,d=Qb,Qb=null;var _=Oo,T=xa;if(Ln=0,Su=Oo=null,xa=0,(jt&6)!==0)throw Error(r(331));var z=jt;if(jt|=4,jT(_.current),xT(_,_.current,T,d),jt=z,Af(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(on,_)}catch{}return!0}finally{ce.p=b,H.T=m,VT(s,l)}}function $T(s,l,d){l=Ai(d,l),l=Ab(s.stateNode,l,2),s=jo(s,l,2),s!==null&&(Fn(s,2),Is(s))}function Ot(s,l,d){if(s.tag===3)$T(s,s,d);else for(;l!==null;){if(l.tag===3){$T(l,s,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Co===null||!Co.has(m))){s=Ai(d,s),d=FA(2),m=jo(l,d,2),m!==null&&(HA(d,m,l,s),Fn(m,2),Is(m));break}}l=l.return}}function Jb(s,l,d){var m=s.pingCache;if(m===null){m=s.pingCache=new b9;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(d)||(Fb=!0,b.add(d),s=E9.bind(null,s,l,d),l.then(s,s))}function E9(s,l,d){var m=s.pingCache;m!==null&&m.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,Bt===s&&(lt&d)===d&&(un===4||un===3&&(lt&62914560)===lt&&300>Be()-Sp?(jt&2)===0&&Au(s,0):Hb|=d,Nu===lt&&(Nu=0)),Is(s)}function FT(s,l){l===0&&(l=Ve()),s=Ul(s,l),s!==null&&(Fn(s,l),Is(s))}function N9(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),FT(s,d)}function S9(s,l){var d=0;switch(s.tag){case 31:case 13:var m=s.stateNode,b=s.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),FT(s,d)}function A9(s,l){return kt(s,l)}var Rp=null,Cu=null,Zb=!1,kp=!1,ex=!1,Po=0;function Is(s){s!==Cu&&s.next===null&&(Cu===null?Rp=Cu=s:Cu=Cu.next=s),kp=!0,Zb||(Zb=!0,C9())}function Af(s,l){if(!ex&&kp){ex=!0;do for(var d=!1,m=Rp;m!==null;){if(s!==0){var b=m.pendingLanes;if(b===0)var _=0;else{var T=m.suspendedLanes,z=m.pingedLanes;_=(1<<31-en(42|s)+1)-1,_&=b&~(T&~z),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(d=!0,QT(m,_))}else _=lt,_=gr(m,m===Bt?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||ti(m,_)||(d=!0,QT(m,_));m=m.next}while(d);ex=!1}}function T9(){HT()}function HT(){kp=Zb=!1;var s=0;Po!==0&&q9()&&(s=Po);for(var l=Be(),d=null,m=Rp;m!==null;){var b=m.next,_=GT(m,l);_===0?(m.next=null,d===null?Rp=b:d.next=b,b===null&&(Cu=d)):(d=m,(s!==0||(_&3)!==0)&&(kp=!0)),m=b}Ln!==0&&Ln!==5||Af(s),Po!==0&&(Po=0)}function GT(s,l){for(var d=s.suspendedLanes,m=s.pingedLanes,b=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var T=31-en(_),z=1<<T,G=b[T];G===-1?((z&d)===0||(z&m)!==0)&&(b[T]=te(z,l)):G<=l&&(s.expiredLanes|=z),_&=~z}if(l=Bt,d=lt,d=gr(s,s===l?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,d===0||s===l&&(Ct===2||Ct===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Lr(m),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||ti(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(m!==null&&Lr(m),ra(d)){case 2:case 8:d=zn;break;case 32:d=qr;break;case 268435456:d=Ur;break;default:d=qr}return m=KT.bind(null,s),d=kt(d,m),s.callbackPriority=l,s.callbackNode=d,l}return m!==null&&m!==null&&Lr(m),s.callbackPriority=2,s.callbackNode=null,2}function KT(s,l){if(Ln!==0&&Ln!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Pp()&&s.callbackNode!==d)return null;var m=lt;return m=gr(s,s===Bt?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(TT(s,m,l),GT(s,Be()),s.callbackNode!=null&&s.callbackNode===d?KT.bind(null,s):null)}function QT(s,l){if(Pp())return null;TT(s,l,!0)}function C9(){V9(function(){(jt&6)!==0?kt(Vt,T9):HT()})}function tx(){if(Po===0){var s=mu;s===0&&(s=bi,bi<<=1,(bi&261888)===0&&(bi=256)),Po=s}return Po}function WT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Zc(""+s)}function YT(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function O9(s,l,d,m,b){if(l==="submit"&&d&&d.stateNode===b){var _=WT((b[Hn]||null).action),T=m.submitter;T&&(l=(l=T[Hn]||null)?WT(l.formAction):T.getAttribute("formAction"),l!==null&&(_=l,T=null));var z=new Es("action","action",null,m,b);s.push({event:z,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Po!==0){var G=T?YT(b,T):new FormData(b);_b(d,{pending:!0,data:G,method:b.method,action:_},null,G)}}else typeof _=="function"&&(z.preventDefault(),G=T?YT(b,T):new FormData(b),_b(d,{pending:!0,data:G,method:b.method,action:_},_,G))},currentTarget:b}]})}}for(var nx=0;nx<L0.length;nx++){var rx=L0[nx],I9=rx.toLowerCase(),P9=rx[0].toUpperCase()+rx.slice(1);Zi(I9,"on"+P9)}Zi(AS,"onAnimationEnd"),Zi(TS,"onAnimationIteration"),Zi(CS,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(QU,"onTransitionRun"),Zi(WU,"onTransitionStart"),Zi(YU,"onTransitionCancel"),Zi(OS,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tf));function XT(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],b=m.event;m=m.listeners;e:{var _=void 0;if(l)for(var T=m.length-1;0<=T;T--){var z=m[T],G=z.instance,oe=z.currentTarget;if(z=z.listener,G!==_&&b.isPropagationStopped())break e;_=z,b.currentTarget=oe;try{_(b)}catch(ve){Wm(ve)}b.currentTarget=null,_=G}else for(T=0;T<m.length;T++){if(z=m[T],G=z.instance,oe=z.currentTarget,z=z.listener,G!==_&&b.isPropagationStopped())break e;_=z,b.currentTarget=oe;try{_(b)}catch(ve){Wm(ve)}b.currentTarget=null,_=G}}}}function at(s,l){var d=l[Qc];d===void 0&&(d=l[Qc]=new Set);var m=s+"__bubble";d.has(m)||(JT(l,s,2,!1),d.add(m))}function ix(s,l,d){var m=0;l&&(m|=4),JT(d,s,m,l)}var Dp="_reactListening"+Math.random().toString(36).slice(2);function sx(s){if(!s[Dp]){s[Dp]=!0,qd.forEach(function(d){d!=="selectionchange"&&(R9.has(d)||ix(d,!1,s),ix(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Dp]||(l[Dp]=!0,ix("selectionchange",!1,l))}}function JT(s,l,d,m){switch(AC(l)){case 2:var b=oV;break;case 8:b=lV;break;default:b=xx}d=b.bind(null,l,d,s),b=void 0,!Pl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?s.addEventListener(l,d,{capture:!0,passive:b}):s.addEventListener(l,d,!0):b!==void 0?s.addEventListener(l,d,{passive:b}):s.addEventListener(l,d,!1)}function ax(s,l,d,m,b){var _=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var z=m.stateNode.containerInfo;if(z===b)break;if(T===4)for(T=m.return;T!==null;){var G=T.tag;if((G===3||G===4)&&T.stateNode.containerInfo===b)return;T=T.return}for(;z!==null;){if(T=vs(z),T===null)return;if(G=T.tag,G===5||G===6||G===26||G===27){m=_=T;continue e}z=z.parentNode}}m=m.return}ho(function(){var oe=_,ve=ji(d),_e=[];e:{var le=IS.get(s);if(le!==void 0){var he=Es,Ie=s;switch(s){case"keypress":if(kl(d)===0)break e;case"keydown":case"keyup":he=Gm;break;case"focusin":Ie="focus",he=Ml;break;case"focusout":Ie="blur",he=Ml;break;case"beforeblur":case"afterblur":he=Ml;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=S;break;case AS:case TS:case CS:he=qm;break;case OS:he=B;break;case"scroll":case"scrollend":he=Xd;break;case"wheel":he=de;break;case"copy":case"cut":case"paste":he=Um;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=aa;break;case"toggle":case"beforetoggle":he=Ze}var Fe=(l&4)!==0,Lt=!Fe&&(s==="scroll"||s==="scrollend"),ee=Fe?le!==null?le+"Capture":null:le;Fe=[];for(var W=oe,ae;W!==null;){var xe=W;if(ae=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ae===null||ee===null||(xe=Wi(W,ee),xe!=null&&Fe.push(Cf(W,xe,ae))),Lt)break;W=W.return}0<Fe.length&&(le=new he(le,Ie,null,d,ve),_e.push({event:le,listeners:Fe}))}}if((l&7)===0){e:{if(le=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",le&&d!==Qd&&(Ie=d.relatedTarget||d.fromElement)&&(vs(Ie)||Ie[ps]))break e;if((he||le)&&(le=ve.window===ve?ve:(le=ve.ownerDocument)?le.defaultView||le.parentWindow:window,he?(Ie=d.relatedTarget||d.toElement,he=oe,Ie=Ie?vs(Ie):null,Ie!==null&&(Lt=a(Ie),Fe=Ie.tag,Ie!==Lt||Fe!==5&&Fe!==27&&Fe!==6)&&(Ie=null)):(he=null,Ie=oe),he!==Ie)){if(Fe=Jd,xe="onMouseLeave",ee="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(Fe=aa,xe="onPointerLeave",ee="onPointerEnter",W="pointer"),Lt=he==null?le:ni(he),ae=Ie==null?le:ni(Ie),le=new Fe(xe,W+"leave",he,d,ve),le.target=Lt,le.relatedTarget=ae,xe=null,vs(ve)===oe&&(Fe=new Fe(ee,W+"enter",Ie,d,ve),Fe.target=ae,Fe.relatedTarget=Lt,xe=Fe),Lt=xe,he&&Ie)t:{for(Fe=k9,ee=he,W=Ie,ae=0,xe=ee;xe;xe=Fe(xe))ae++;xe=0;for(var qe=W;qe;qe=Fe(qe))xe++;for(;0<ae-xe;)ee=Fe(ee),ae--;for(;0<xe-ae;)W=Fe(W),xe--;for(;ae--;){if(ee===W||W!==null&&ee===W.alternate){Fe=ee;break t}ee=Fe(ee),W=Fe(W)}Fe=null}else Fe=null;he!==null&&ZT(_e,le,he,Fe,!1),Ie!==null&&Lt!==null&&ZT(_e,Lt,Ie,Fe,!0)}}e:{if(le=oe?ni(oe):window,he=le.nodeName&&le.nodeName.toLowerCase(),he==="select"||he==="input"&&le.type==="file")var bt=gS;else if(mS(le))if(vS)bt=HU;else{bt=$U;var ke=BU}else he=le.nodeName,!he||he.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&Jc(oe.elementType)&&(bt=gS):bt=FU;if(bt&&(bt=bt(s,oe))){pS(_e,bt,d,ve);break e}ke&&ke(s,le,oe),s==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&Hd(le,"number",le.value)}switch(ke=oe?ni(oe):window,s){case"focusin":(mS(ke)||ke.contentEditable==="true")&&(au=ke,D0=oe,rf=null);break;case"focusout":rf=D0=au=null;break;case"mousedown":M0=!0;break;case"contextmenu":case"mouseup":case"dragend":M0=!1,NS(_e,d,ve);break;case"selectionchange":if(KU)break;case"keydown":case"keyup":NS(_e,d,ve)}var tt;if(wt)e:{switch(s){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else su?zl(s,d)&&(ct="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(ct="onCompositionStart");ct&&(As&&d.locale!=="ko"&&(su||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&su&&(tt=Yd()):(js=ve,Wd="value"in js?js.value:js.textContent,su=!0)),ke=Mp(oe,ct),0<ke.length&&(ct=new Ss(ct,s,null,d,ve),_e.push({event:ct,listeners:ke}),tt?ct.data=tt:(tt=iu(d),tt!==null&&(ct.data=tt)))),(tt=Ni?LU(s,d):qU(s,d))&&(ct=Mp(oe,"onBeforeInput"),0<ct.length&&(ke=new Ss("onBeforeInput","beforeinput",null,d,ve),_e.push({event:ke,listeners:ct}),ke.data=tt)),O9(_e,s,oe,d,ve)}XT(_e,l)})}function Cf(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Mp(s,l){for(var d=l+"Capture",m=[];s!==null;){var b=s,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=Wi(s,d),b!=null&&m.unshift(Cf(s,b,_)),b=Wi(s,l),b!=null&&m.push(Cf(s,b,_))),s.tag===3)return m;s=s.return}return[]}function k9(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ZT(s,l,d,m,b){for(var _=l._reactName,T=[];d!==null&&d!==m;){var z=d,G=z.alternate,oe=z.stateNode;if(z=z.tag,G!==null&&G===m)break;z!==5&&z!==26&&z!==27||oe===null||(G=oe,b?(oe=Wi(d,_),oe!=null&&T.unshift(Cf(d,oe,G))):b||(oe=Wi(d,_),oe!=null&&T.push(Cf(d,oe,G)))),d=d.return}T.length!==0&&s.push({event:l,listeners:T})}var D9=/\r\n?/g,M9=/\u0000|\uFFFD/g;function eC(s){return(typeof s=="string"?s:""+s).replace(D9,`
`).replace(M9,"")}function tC(s,l){return l=eC(l),eC(s)===l}function zt(s,l,d,m,b,_){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||$r(s,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&$r(s,""+m);break;case"className":ri(s,"class",m);break;case"tabIndex":ri(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(s,d,m);break;case"style":Kd(s,m,_);break;case"data":if(l!=="object"){ri(s,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=Zc(""+m),s.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(d==="formAction"?(l!=="input"&&zt(s,l,"name",b.name,b,null),zt(s,l,"formEncType",b.formEncType,b,null),zt(s,l,"formMethod",b.formMethod,b,null),zt(s,l,"formTarget",b.formTarget,b,null)):(zt(s,l,"encType",b.encType,b,null),zt(s,l,"method",b.method,b,null),zt(s,l,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(d);break}m=Zc(""+m),s.setAttribute(d,m);break;case"onClick":m!=null&&(s.onclick=Qi);break;case"onScroll":m!=null&&at("scroll",s);break;case"onScrollEnd":m!=null&&at("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}d=Zc(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""+m):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":m===!0?s.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(d,m):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(d,m):s.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(d):s.setAttribute(d,m);break;case"popover":at("beforetoggle",s),at("toggle",s),Yc(s,"popover",m);break;case"xlinkActuate":Sn(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Sn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Sn(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Sn(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Sn(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Sn(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Yc(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Mm.get(d)||d,Yc(s,d,m))}}function ox(s,l,d,m,b,_){switch(d){case"style":Kd(s,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"children":typeof m=="string"?$r(s,m):(typeof m=="number"||typeof m=="bigint")&&$r(s,""+m);break;case"onScroll":m!=null&&at("scroll",s);break;case"onScrollEnd":m!=null&&at("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ud.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),l=d.slice(2,b?d.length-7:void 0),_=s[Hn]||null,_=_!=null?_[d]:null,typeof _=="function"&&s.removeEventListener(l,_,b),typeof m=="function")){typeof _!="function"&&_!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,m,b);break e}d in s?s[d]=m:m===!0?s.setAttribute(d,""):Yc(s,d,m)}}}function or(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",s),at("load",s);var m=!1,b=!1,_;for(_ in d)if(d.hasOwnProperty(_)){var T=d[_];if(T!=null)switch(_){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:zt(s,l,_,T,d,null)}}b&&zt(s,l,"srcSet",d.srcSet,d,null),m&&zt(s,l,"src",d.src,d,null);return;case"input":at("invalid",s);var z=_=T=b=null,G=null,oe=null;for(m in d)if(d.hasOwnProperty(m)){var ve=d[m];if(ve!=null)switch(m){case"name":b=ve;break;case"type":T=ve;break;case"checked":G=ve;break;case"defaultChecked":oe=ve;break;case"value":_=ve;break;case"defaultValue":z=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,l));break;default:zt(s,l,m,ve,d,null)}}Rm(s,_,z,G,oe,T,b,!1);return;case"select":at("invalid",s),m=T=_=null;for(b in d)if(d.hasOwnProperty(b)&&(z=d[b],z!=null))switch(b){case"value":_=z;break;case"defaultValue":T=z;break;case"multiple":m=z;default:zt(s,l,b,z,d,null)}l=_,d=T,s.multiple=!!m,l!=null?lo(s,!!m,l,!1):d!=null&&lo(s,!!m,d,!0);return;case"textarea":at("invalid",s),_=b=m=null;for(T in d)if(d.hasOwnProperty(T)&&(z=d[T],z!=null))switch(T){case"value":m=z;break;case"defaultValue":b=z;break;case"children":_=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:zt(s,l,T,z,d,null)}co(s,m,b,_);return;case"option":for(G in d)d.hasOwnProperty(G)&&(m=d[G],m!=null)&&(G==="selected"?s.selected=m&&typeof m!="function"&&typeof m!="symbol":zt(s,l,G,m,d,null));return;case"dialog":at("beforetoggle",s),at("toggle",s),at("cancel",s),at("close",s);break;case"iframe":case"object":at("load",s);break;case"video":case"audio":for(m=0;m<Tf.length;m++)at(Tf[m],s);break;case"image":at("error",s),at("load",s);break;case"details":at("toggle",s);break;case"embed":case"source":case"link":at("error",s),at("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in d)if(d.hasOwnProperty(oe)&&(m=d[oe],m!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:zt(s,l,oe,m,d,null)}return;default:if(Jc(l)){for(ve in d)d.hasOwnProperty(ve)&&(m=d[ve],m!==void 0&&ox(s,l,ve,m,d,void 0));return}}for(z in d)d.hasOwnProperty(z)&&(m=d[z],m!=null&&zt(s,l,z,m,d,null))}function z9(s,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,T=null,z=null,G=null,oe=null,ve=null;for(he in d){var _e=d[he];if(d.hasOwnProperty(he)&&_e!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":G=_e;default:m.hasOwnProperty(he)||zt(s,l,he,null,m,_e)}}for(var le in m){var he=m[le];if(_e=d[le],m.hasOwnProperty(le)&&(he!=null||_e!=null))switch(le){case"type":_=he;break;case"name":b=he;break;case"checked":oe=he;break;case"defaultChecked":ve=he;break;case"value":T=he;break;case"defaultValue":z=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,l));break;default:he!==_e&&zt(s,l,le,he,m,_e)}}Xc(s,T,z,G,oe,ve,_,b);return;case"select":he=T=z=le=null;for(_ in d)if(G=d[_],d.hasOwnProperty(_)&&G!=null)switch(_){case"value":break;case"multiple":he=G;default:m.hasOwnProperty(_)||zt(s,l,_,null,m,G)}for(b in m)if(_=m[b],G=d[b],m.hasOwnProperty(b)&&(_!=null||G!=null))switch(b){case"value":le=_;break;case"defaultValue":z=_;break;case"multiple":T=_;default:_!==G&&zt(s,l,b,_,m,G)}l=z,d=T,m=he,le!=null?lo(s,!!d,le,!1):!!m!=!!d&&(l!=null?lo(s,!!d,l,!0):lo(s,!!d,d?[]:"",!1));return;case"textarea":he=le=null;for(z in d)if(b=d[z],d.hasOwnProperty(z)&&b!=null&&!m.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:zt(s,l,z,null,m,b)}for(T in m)if(b=m[T],_=d[T],m.hasOwnProperty(T)&&(b!=null||_!=null))switch(T){case"value":le=b;break;case"defaultValue":he=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==_&&zt(s,l,T,b,m,_)}km(s,le,he);return;case"option":for(var Ie in d)le=d[Ie],d.hasOwnProperty(Ie)&&le!=null&&!m.hasOwnProperty(Ie)&&(Ie==="selected"?s.selected=!1:zt(s,l,Ie,null,m,le));for(G in m)le=m[G],he=d[G],m.hasOwnProperty(G)&&le!==he&&(le!=null||he!=null)&&(G==="selected"?s.selected=le&&typeof le!="function"&&typeof le!="symbol":zt(s,l,G,le,m,he));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in d)le=d[Fe],d.hasOwnProperty(Fe)&&le!=null&&!m.hasOwnProperty(Fe)&&zt(s,l,Fe,null,m,le);for(oe in m)if(le=m[oe],he=d[oe],m.hasOwnProperty(oe)&&le!==he&&(le!=null||he!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:zt(s,l,oe,le,m,he)}return;default:if(Jc(l)){for(var Lt in d)le=d[Lt],d.hasOwnProperty(Lt)&&le!==void 0&&!m.hasOwnProperty(Lt)&&ox(s,l,Lt,void 0,m,le);for(ve in m)le=m[ve],he=d[ve],!m.hasOwnProperty(ve)||le===he||le===void 0&&he===void 0||ox(s,l,ve,le,m,he);return}}for(var ee in d)le=d[ee],d.hasOwnProperty(ee)&&le!=null&&!m.hasOwnProperty(ee)&&zt(s,l,ee,null,m,le);for(_e in m)le=m[_e],he=d[_e],!m.hasOwnProperty(_e)||le===he||le==null&&he==null||zt(s,l,_e,le,m,he)}function nC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L9(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var b=d[m],_=b.transferSize,T=b.initiatorType,z=b.duration;if(_&&z&&nC(T)){for(T=0,z=b.responseEnd,m+=1;m<d.length;m++){var G=d[m],oe=G.startTime;if(oe>z)break;var ve=G.transferSize,_e=G.initiatorType;ve&&nC(_e)&&(G=G.responseEnd,T+=ve*(G<z?1:(z-oe)/(G-oe)))}if(--m,l+=8*(_+T)/(b.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var lx=null,cx=null;function zp(s){return s.nodeType===9?s:s.ownerDocument}function rC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iC(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function ux(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var dx=null;function q9(){var s=window.event;return s&&s.type==="popstate"?s===dx?!1:(dx=s,!0):(dx=null,!1)}var sC=typeof setTimeout=="function"?setTimeout:void 0,U9=typeof clearTimeout=="function"?clearTimeout:void 0,aC=typeof Promise=="function"?Promise:void 0,V9=typeof queueMicrotask=="function"?queueMicrotask:typeof aC<"u"?function(s){return aC.resolve(null).then(s).catch(B9)}:sC;function B9(s){setTimeout(function(){throw s})}function Ro(s){return s==="head"}function oC(s,l){var d=l,m=0;do{var b=d.nextSibling;if(s.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(m===0){s.removeChild(b),Ru(l);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")Of(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,Of(d);for(var _=d.firstChild;_;){var T=_.nextSibling,z=_.nodeName;_[gs]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&_.rel.toLowerCase()==="stylesheet"||d.removeChild(_),_=T}}else d==="body"&&Of(s.ownerDocument.body);d=b}while(d);Ru(l)}function lC(s,l){var d=s;s=0;do{var m=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=m}while(d)}function fx(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":fx(d),Wc(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function $9(s,l,d,m){for(;s.nodeType===1;){var b=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[gs])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Pi(s.nextSibling),s===null)break}return null}function F9(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Pi(s.nextSibling),s===null))return null;return s}function cC(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Pi(s.nextSibling),s===null))return null;return s}function hx(s){return s.data==="$?"||s.data==="$~"}function mx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function H9(s,l){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||d.readyState!=="loading")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function Pi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var px=null;function uC(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(l===0)return Pi(s.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}s=s.nextSibling}return null}function dC(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return s;l--}else d!=="/$"&&d!=="/&"||l++}s=s.previousSibling}return null}function fC(s,l,d){switch(l=zp(d),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Of(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Wc(s)}var Ri=new Map,hC=new Set;function Lp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _a=ce.d;ce.d={f:G9,r:K9,D:Q9,C:W9,L:Y9,m:X9,X:Z9,S:J9,M:eV};function G9(){var s=_a.f(),l=Cp();return s||l}function K9(s){var l=wi(s);l!==null&&l.tag===5&&l.type==="form"?OA(l):_a.r(s)}var Ou=typeof document>"u"?null:document;function mC(s,l,d){var m=Ou;if(m&&typeof l=="string"&&l){var b=Br(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),hC.has(b)||(hC.add(b),s={rel:s,crossOrigin:d,href:l},m.querySelector(b)===null&&(l=m.createElement("link"),or(l,"link",s),Nn(l),m.head.appendChild(l)))}}function Q9(s){_a.D(s),mC("dns-prefetch",s,null)}function W9(s,l){_a.C(s,l),mC("preconnect",s,l)}function Y9(s,l,d){_a.L(s,l,d);var m=Ou;if(m&&s&&l){var b='link[rel="preload"][as="'+Br(l)+'"]';l==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+Br(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+Br(d.imageSizes)+'"]')):b+='[href="'+Br(s)+'"]';var _=b;switch(l){case"style":_=Iu(s);break;case"script":_=Pu(s)}Ri.has(_)||(s=g({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),Ri.set(_,s),m.querySelector(b)!==null||l==="style"&&m.querySelector(If(_))||l==="script"&&m.querySelector(Pf(_))||(l=m.createElement("link"),or(l,"link",s),Nn(l),m.head.appendChild(l)))}}function X9(s,l){_a.m(s,l);var d=Ou;if(d&&s){var m=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Br(m)+'"][href="'+Br(s)+'"]',_=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Pu(s)}if(!Ri.has(_)&&(s=g({rel:"modulepreload",href:s},l),Ri.set(_,s),d.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Pf(_)))return}m=d.createElement("link"),or(m,"link",s),Nn(m),d.head.appendChild(m)}}}function J9(s,l,d){_a.S(s,l,d);var m=Ou;if(m&&s){var b=ys(m).hoistableStyles,_=Iu(s);l=l||"default";var T=b.get(_);if(!T){var z={loading:0,preload:null};if(T=m.querySelector(If(_)))z.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},d),(d=Ri.get(_))&&gx(s,d);var G=T=m.createElement("link");Nn(G),or(G,"link",s),G._p=new Promise(function(oe,ve){G.onload=oe,G.onerror=ve}),G.addEventListener("load",function(){z.loading|=1}),G.addEventListener("error",function(){z.loading|=2}),z.loading|=4,qp(T,l,m)}T={type:"stylesheet",instance:T,count:1,state:z},b.set(_,T)}}}function Z9(s,l){_a.X(s,l);var d=Ou;if(d&&s){var m=ys(d).hoistableScripts,b=Pu(s),_=m.get(b);_||(_=d.querySelector(Pf(b)),_||(s=g({src:s,async:!0},l),(l=Ri.get(b))&&vx(s,l),_=d.createElement("script"),Nn(_),or(_,"link",s),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(b,_))}}function eV(s,l){_a.M(s,l);var d=Ou;if(d&&s){var m=ys(d).hoistableScripts,b=Pu(s),_=m.get(b);_||(_=d.querySelector(Pf(b)),_||(s=g({src:s,async:!0,type:"module"},l),(l=Ri.get(b))&&vx(s,l),_=d.createElement("script"),Nn(_),or(_,"link",s),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(b,_))}}function pC(s,l,d,m){var b=(b=ne.current)?Lp(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Iu(d.href),d=ys(b).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Iu(d.href);var _=ys(b).hoistableStyles,T=_.get(s);if(T||(b=b.ownerDocument||b,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,T),(_=b.querySelector(If(s)))&&!_._p&&(T.instance=_,T.state.loading=5),Ri.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ri.set(s,d),_||tV(b,s,d,T.state))),l&&m===null)throw Error(r(528,""));return T}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Pu(d),d=ys(b).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Iu(s){return'href="'+Br(s)+'"'}function If(s){return'link[rel="stylesheet"]['+s+"]"}function gC(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function tV(s,l,d,m){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=s.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),or(l,"link",d),Nn(l),s.head.appendChild(l))}function Pu(s){return'[src="'+Br(s)+'"]'}function Pf(s){return"script[async]"+s}function vC(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=s.querySelector('style[data-href~="'+Br(d.href)+'"]');if(m)return l.instance=m,Nn(m),m;var b=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),Nn(m),or(m,"style",b),qp(m,d.precedence,s),l.instance=m;case"stylesheet":b=Iu(d.href);var _=s.querySelector(If(b));if(_)return l.state.loading|=4,l.instance=_,Nn(_),_;m=gC(d),(b=Ri.get(b))&&gx(m,b),_=(s.ownerDocument||s).createElement("link"),Nn(_);var T=_;return T._p=new Promise(function(z,G){T.onload=z,T.onerror=G}),or(_,"link",m),l.state.loading|=4,qp(_,d.precedence,s),l.instance=_;case"script":return _=Pu(d.src),(b=s.querySelector(Pf(_)))?(l.instance=b,Nn(b),b):(m=d,(b=Ri.get(_))&&(m=g({},d),vx(m,b)),s=s.ownerDocument||s,b=s.createElement("script"),Nn(b),or(b,"link",m),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,qp(m,d.precedence,s));return l.instance}function qp(s,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,_=b,T=0;T<m.length;T++){var z=m[T];if(z.dataset.precedence===l)_=z;else if(_!==b)break}_?_.parentNode.insertBefore(s,_.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function gx(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function vx(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Up=null;function yC(s,l,d){if(Up===null){var m=new Map,b=Up=new Map;b.set(d,m)}else b=Up,m=b.get(d),m||(m=new Map,b.set(d,m));if(m.has(s))return m;for(m.set(s,null),d=d.getElementsByTagName(s),b=0;b<d.length;b++){var _=d[b];if(!(_[gs]||_[En]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(l)||"";T=s+T;var z=m.get(T);z?z.push(_):m.set(T,[_])}}return m}function bC(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function nV(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(s=l.disabled,typeof l.precedence=="string"&&s==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function xC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function rV(s,l,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=Iu(m.href),_=l.querySelector(If(b));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Vp.bind(s),l.then(s,s)),d.state.loading|=4,d.instance=_,Nn(_);return}_=l.ownerDocument||l,m=gC(m),(b=Ri.get(b))&&gx(m,b),_=_.createElement("link"),Nn(_);var T=_;T._p=new Promise(function(z,G){T.onload=z,T.onerror=G}),or(_,"link",m),d.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=Vp.bind(s),l.addEventListener("load",d),l.addEventListener("error",d))}}var yx=0;function iV(s,l){return s.stylesheets&&s.count===0&&$p(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var m=setTimeout(function(){if(s.stylesheets&&$p(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+l);0<s.imgBytes&&yx===0&&(yx=62500*L9());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&$p(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>yx?50:800)+l);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function Vp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$p(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Bp=null;function $p(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Bp=new Map,l.forEach(sV,s),Bp=null,Vp.call(s))}function sV(s,l){if(!(l.state.loading&4)){var d=Bp.get(s);if(d)var m=d.get(null);else{d=new Map,Bp.set(s,d);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var T=b[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),m=T)}m&&d.set(null,m)}b=l.instance,T=b.getAttribute("data-precedence"),_=d.get(T)||m,_===m&&d.set(null,b),d.set(T,b),this.count++,m=Vp.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),_?_.parentNode.insertBefore(b,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var Rf={$$typeof:O,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function aV(s,l,d,m,b,_,T,z,G){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.hiddenUpdates=vt(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function _C(s,l,d,m,b,_,T,z,G,oe,ve,_e){return s=new aV(s,l,d,T,G,oe,ve,_e,z),l=1,_===!0&&(l|=24),_=si(3,null,null,l),s.current=_,_.stateNode=s,l=X0(),l.refCount++,s.pooledCache=l,l.refCount++,_.memoizedState={element:m,isDehydrated:d,cache:l},tb(_),s}function wC(s){return s?(s=cu,s):cu}function jC(s,l,d,m,b,_){b=wC(b),m.context===null?m.context=b:m.pendingContext=b,m=wo(l),m.payload={element:d},_=_===void 0?null:_,_!==null&&(m.callback=_),d=jo(s,m,l),d!==null&&(Qr(d,s,l),df(d,s,l))}function EC(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function bx(s,l){EC(s,l),(s=s.alternate)&&EC(s,l)}function NC(s){if(s.tag===13||s.tag===31){var l=Ul(s,67108864);l!==null&&Qr(l,s,67108864),bx(s,67108864)}}function SC(s){if(s.tag===13||s.tag===31){var l=ui();l=Tl(l);var d=Ul(s,l);d!==null&&Qr(d,s,l),bx(s,l)}}var Fp=!0;function oV(s,l,d,m){var b=H.T;H.T=null;var _=ce.p;try{ce.p=2,xx(s,l,d,m)}finally{ce.p=_,H.T=b}}function lV(s,l,d,m){var b=H.T;H.T=null;var _=ce.p;try{ce.p=8,xx(s,l,d,m)}finally{ce.p=_,H.T=b}}function xx(s,l,d,m){if(Fp){var b=_x(m);if(b===null)ax(s,l,m,Hp,d),TC(s,m);else if(uV(b,s,l,d,m))m.stopPropagation();else if(TC(s,m),l&4&&-1<cV.indexOf(s)){for(;b!==null;){var _=wi(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=xi(_.pendingLanes);if(T!==0){var z=_;for(z.pendingLanes|=2,z.entangledLanes|=2;T;){var G=1<<31-en(T);z.entanglements[1]|=G,T&=~G}Is(_),(jt&6)===0&&(Ap=Be()+500,Af(0))}}break;case 31:case 13:z=Ul(_,2),z!==null&&Qr(z,_,2),Cp(),bx(_,2)}if(_=_x(m),_===null&&ax(s,l,m,Hp,d),_===b)break;b=_}b!==null&&m.stopPropagation()}else ax(s,l,m,null,d)}}function _x(s){return s=ji(s),wx(s)}var Hp=null;function wx(s){if(Hp=null,s=vs(s),s!==null){var l=a(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=c(l),s!==null)return s;s=null}else if(d===31){if(s=u(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Hp=s,null}function AC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case Vt:return 2;case zn:return 8;case qr:case so:return 32;case Ur:return 268435456;default:return 32}default:return 32}}var jx=!1,ko=null,Do=null,Mo=null,kf=new Map,Df=new Map,zo=[],cV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TC(s,l){switch(s){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Mo=null;break;case"pointerover":case"pointerout":kf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Df.delete(l.pointerId)}}function Mf(s,l,d,m,b,_){return s===null||s.nativeEvent!==_?(s={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:_,targetContainers:[b]},l!==null&&(l=wi(l),l!==null&&NC(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function uV(s,l,d,m,b){switch(l){case"focusin":return ko=Mf(ko,s,l,d,m,b),!0;case"dragenter":return Do=Mf(Do,s,l,d,m,b),!0;case"mouseover":return Mo=Mf(Mo,s,l,d,m,b),!0;case"pointerover":var _=b.pointerId;return kf.set(_,Mf(kf.get(_)||null,s,l,d,m,b)),!0;case"gotpointercapture":return _=b.pointerId,Df.set(_,Mf(Df.get(_)||null,s,l,d,m,b)),!0}return!1}function CC(s){var l=vs(s.target);if(l!==null){var d=a(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){s.blockedOn=l,Gi(s.priority,function(){SC(d)});return}}else if(l===31){if(l=u(d),l!==null){s.blockedOn=l,Gi(s.priority,function(){SC(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Gp(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=_x(s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);Qd=m,d.target.dispatchEvent(m),Qd=null}else return l=wi(d),l!==null&&NC(l),s.blockedOn=d,!1;l.shift()}return!0}function OC(s,l,d){Gp(s)&&d.delete(l)}function dV(){jx=!1,ko!==null&&Gp(ko)&&(ko=null),Do!==null&&Gp(Do)&&(Do=null),Mo!==null&&Gp(Mo)&&(Mo=null),kf.forEach(OC),Df.forEach(OC)}function Kp(s,l){s.blockedOn===l&&(s.blockedOn=null,jx||(jx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dV)))}var Qp=null;function IC(s){Qp!==s&&(Qp=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Qp===s&&(Qp=null);for(var l=0;l<s.length;l+=3){var d=s[l],m=s[l+1],b=s[l+2];if(typeof m!="function"){if(wx(m||d)===null)continue;break}var _=wi(d);_!==null&&(s.splice(l,3),l-=3,_b(_,{pending:!0,data:b,method:d.method,action:m},m,b))}}))}function Ru(s){function l(G){return Kp(G,s)}ko!==null&&Kp(ko,s),Do!==null&&Kp(Do,s),Mo!==null&&Kp(Mo,s),kf.forEach(l),Df.forEach(l);for(var d=0;d<zo.length;d++){var m=zo[d];m.blockedOn===s&&(m.blockedOn=null)}for(;0<zo.length&&(d=zo[0],d.blockedOn===null);)CC(d),d.blockedOn===null&&zo.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var b=d[m],_=d[m+1],T=b[Hn]||null;if(typeof _=="function")T||IC(d);else if(T){var z=null;if(_&&_.hasAttribute("formAction")){if(b=_,T=_[Hn]||null)z=T.formAction;else if(wx(b)!==null)continue}else z=T.action;typeof z=="function"?d[m+1]=z:(d.splice(m,3),m-=3),IC(d)}}}function PC(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(T){return b=T})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function Ex(s){this._internalRoot=s}Wp.prototype.render=Ex.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=ui();jC(d,m,s,l,null,null)},Wp.prototype.unmount=Ex.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;jC(s.current,2,null,s,null,null),Cp(),l[ps]=null}};function Wp(s){this._internalRoot=s}Wp.prototype.unstable_scheduleHydration=function(s){if(s){var l=Cm();s={blockedOn:null,target:s,priority:l};for(var d=0;d<zo.length&&l!==0&&l<zo[d].priority;d++);zo.splice(d,0,s),d===0&&CC(s)}};var RC=e.version;if(RC!=="19.2.4")throw Error(r(527,RC,"19.2.4"));ce.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(l),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var fV={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yp.isDisabled&&Yp.supportsFiber)try{on=Yp.inject(fV),At=Yp}catch{}}return Lf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var d=!1,m="",b=UA,_=VA,T=BA;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=_C(s,1,!1,null,null,d,m,null,b,_,T,PC),s[ps]=l.current,sx(s),new Ex(l)},Lf.hydrateRoot=function(s,l,d){if(!i(s))throw Error(r(299));var m=!1,b="",_=UA,T=VA,z=BA,G=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(z=d.onRecoverableError),d.formState!==void 0&&(G=d.formState)),l=_C(s,1,!0,l,d??null,m,b,G,_,T,z,PC),l.context=wC(null),d=l.current,m=ui(),m=Tl(m),b=wo(m),b.callback=null,jo(d,b,m),d=m,l.current.lanes=d,Fn(l,d),Is(l),s[ps]=l.current,sx(s),new Wp(l)},Lf.version="19.2.4",Lf}var $C;function wV(){if($C)return Ax.exports;$C=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ax.exports=_V(),Ax.exports}var jV=wV();const EV=ea(jV);var tM=eM();function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yh.apply(this,arguments)}var Yo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yo||(Yo={}));const FC="popstate";function NV(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:c,hash:u}=r.location;return M1("",{pathname:a,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Hg(i)}return AV(e,n,null,t)}function wn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SV(){return Math.random().toString(36).substr(2,8)}function HC(t,e){return{usr:t.state,key:t.key,idx:e}}function M1(t,e,n,r){return n===void 0&&(n=null),yh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bd(e):e,{state:n,key:e&&e.key||r||SV()})}function Hg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function AV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,u=Yo.Pop,f=null,h=p();h==null&&(h=0,c.replaceState(yh({},c.state,{idx:h}),""));function p(){return(c.state||{idx:null}).idx}function g(){u=Yo.Pop;let N=p(),A=N==null?null:N-h;h=N,f&&f({action:u,location:j.location,delta:A})}function y(N,A){u=Yo.Push;let k=M1(j.location,N,A);h=p()+1;let O=HC(k,h),C=j.createHref(k);try{c.pushState(O,"",C)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(C)}a&&f&&f({action:u,location:j.location,delta:1})}function x(N,A){u=Yo.Replace;let k=M1(j.location,N,A);h=p();let O=HC(k,h),C=j.createHref(k);c.replaceState(O,"",C),a&&f&&f({action:u,location:j.location,delta:0})}function E(N){let A=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof N=="string"?N:Hg(N);return k=k.replace(/ $/,"%20"),wn(A,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,A)}let j={get action(){return u},get location(){return t(i,c)},listen(N){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(FC,g),f=N,()=>{i.removeEventListener(FC,g),f=null}},createHref(N){return e(i,N)},createURL:E,encodeLocation(N){let A=E(N);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:x,go(N){return c.go(N)}};return j}var GC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(GC||(GC={}));function TV(t,e,n){return n===void 0&&(n="/"),CV(t,e,n)}function CV(t,e,n,r){let i=typeof e=="string"?bd(e):e,a=yj(i.pathname||"/",n);if(a==null)return null;let c=nM(t);OV(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=BV(a);u=qV(c[f],h)}return u}function nM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,c,u)=>{let f={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(wn(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let h=Zo([r,f.relativePath]),p=n.concat(f);a.children&&a.children.length>0&&(wn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),nM(a.children,e,p,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:zV(h,a.index),routesMeta:p})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,c);else for(let f of rM(a.path))i(a,c,f)}),e}function rM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=rM(r.join("/")),u=[];return u.push(...c.map(f=>f===""?a:[a,f].join("/"))),i&&u.push(...c),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function OV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IV=/^:[\w-]+$/,PV=3,RV=2,kV=1,DV=10,MV=-2,KC=t=>t==="*";function zV(t,e){let n=t.split("/"),r=n.length;return n.some(KC)&&(r+=MV),e&&(r+=RV),n.filter(i=>!KC(i)).reduce((i,a)=>i+(IV.test(a)?PV:a===""?kV:DV),r)}function LV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function qV(t,e,n){let{routesMeta:r}=t,i={},a="/",c=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=UV({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),y=f.route;if(!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:Zo([a,g.pathname]),pathnameBase:KV(Zo([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=Zo([a,g.pathnameBase]))}return c}function UV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,p,g)=>{let{paramName:y,isOptional:x}=p;if(y==="*"){let j=u[g]||"";c=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const E=u[g];return x&&!E?h[y]=void 0:h[y]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:c,pattern:t}}function VV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function BV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yj(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const $V=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FV=t=>$V.test(t);function HV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?bd(t):t,a;if(n)if(FV(n))a=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),vj(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?a=QC(n.substring(1),"/"):a=QC(n,e)}else a=e;return{pathname:a,search:QV(r),hash:WV(i)}}function QC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ix(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bj(t,e){let n=GV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xj(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=bd(t):(i=yh({},t),wn(!i.pathname||!i.pathname.includes("?"),Ix("?","pathname","search",i)),wn(!i.pathname||!i.pathname.includes("#"),Ix("#","pathname","hash",i)),wn(!i.search||!i.search.includes("#"),Ix("#","search","hash",i)));let a=t===""||i.pathname==="",c=a?"/":i.pathname,u;if(c==null)u=n;else{let g=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}u=g>=0?e[g]:"/"}let f=HV(i,u),h=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}const Zo=t=>t.join("/").replace(/\/\/+/g,"/"),KV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const iM=["post","put","patch","delete"];new Set(iM);const XV=["get",...iM];new Set(XV);function bh(){return bh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bh.apply(this,arguments)}const _j=w.createContext(null),JV=w.createContext(null),vl=w.createContext(null),uy=w.createContext(null),Qa=w.createContext({outlet:null,matches:[],isDataRoute:!1}),sM=w.createContext(null);function ZV(t,e){let{relative:n}=e===void 0?{}:e;xd()||wn(!1);let{basename:r,navigator:i}=w.useContext(vl),{hash:a,pathname:c,search:u}=oM(t,{relative:n}),f=c;return r!=="/"&&(f=c==="/"?r:Zo([r,c])),i.createHref({pathname:f,search:u,hash:a})}function xd(){return w.useContext(uy)!=null}function yl(){return xd()||wn(!1),w.useContext(uy).location}function aM(t){w.useContext(vl).static||w.useLayoutEffect(t)}function Dr(){let{isDataRoute:t}=w.useContext(Qa);return t?f8():e8()}function e8(){xd()||wn(!1);let t=w.useContext(_j),{basename:e,future:n,navigator:r}=w.useContext(vl),{matches:i}=w.useContext(Qa),{pathname:a}=yl(),c=JSON.stringify(bj(i,n.v7_relativeSplatPath)),u=w.useRef(!1);return aM(()=>{u.current=!0}),w.useCallback(function(h,p){if(p===void 0&&(p={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=xj(h,JSON.parse(c),a,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Zo([e,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[e,r,c,a,t])}function dy(){let{matches:t}=w.useContext(Qa),e=t[t.length-1];return e?e.params:{}}function oM(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(vl),{matches:i}=w.useContext(Qa),{pathname:a}=yl(),c=JSON.stringify(bj(i,r.v7_relativeSplatPath));return w.useMemo(()=>xj(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function t8(t,e){return n8(t,e)}function n8(t,e,n,r){xd()||wn(!1);let{navigator:i}=w.useContext(vl),{matches:a}=w.useContext(Qa),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let h=yl(),p;if(e){var g;let N=typeof e=="string"?bd(e):e;f==="/"||(g=N.pathname)!=null&&g.startsWith(f)||wn(!1),p=N}else p=h;let y=p.pathname||"/",x=y;if(f!=="/"){let N=f.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let E=TV(t,{pathname:x}),j=o8(E&&E.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Zo([f,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Zo([f,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return e&&j?w.createElement(uy.Provider,{value:{location:bh({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Yo.Pop}},j):j}function r8(){let t=d8(),e=YV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,null)}const i8=w.createElement(r8,null);class s8 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(Qa.Provider,{value:this.props.routeContext},w.createElement(sM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a8(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(_j);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Qa.Provider,{value:e},r)}function o8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);p>=0||wn(!1),c=c.slice(0,Math.min(c.length,p+1))}let f=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<c.length;p++){let g=c[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:y,errors:x}=n,E=g.route.loader&&y[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||E){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((p,g,y)=>{let x,E=!1,j=null,N=null;n&&(x=u&&g.route.id?u[g.route.id]:void 0,j=g.route.errorElement||i8,f&&(h<0&&y===0?(h8("route-fallback"),E=!0,N=null):h===y&&(E=!0,N=g.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,y+1)),k=()=>{let O;return x?O=j:E?O=N:g.route.Component?O=w.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=p,w.createElement(a8,{match:g,routeContext:{outlet:p,matches:A,isDataRoute:n!=null},children:O})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?w.createElement(s8,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:k(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):k()},null)}var lM=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(lM||{}),cM=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(cM||{});function l8(t){let e=w.useContext(_j);return e||wn(!1),e}function c8(t){let e=w.useContext(JV);return e||wn(!1),e}function u8(t){let e=w.useContext(Qa);return e||wn(!1),e}function uM(t){let e=u8(),n=e.matches[e.matches.length-1];return n.route.id||wn(!1),n.route.id}function d8(){var t;let e=w.useContext(sM),n=c8(),r=uM();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function f8(){let{router:t}=l8(lM.UseNavigateStable),e=uM(cM.UseNavigateStable),n=w.useRef(!1);return aM(()=>{n.current=!0}),w.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bh({fromRouteId:e},a)))},[t,e])}const WC={};function h8(t,e,n){WC[t]||(WC[t]=!0)}function m8(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function p8(t){let{to:e,replace:n,state:r,relative:i}=t;xd()||wn(!1);let{future:a,static:c}=w.useContext(vl),{matches:u}=w.useContext(Qa),{pathname:f}=yl(),h=Dr(),p=xj(e,bj(u,a.v7_relativeSplatPath),f,i==="path"),g=JSON.stringify(p);return w.useEffect(()=>h(JSON.parse(g),{replace:n,state:r,relative:i}),[h,g,i,n,r]),null}function tn(t){wn(!1)}function g8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Yo.Pop,navigator:a,static:c=!1,future:u}=t;xd()&&wn(!1);let f=e.replace(/^\/*/,"/"),h=w.useMemo(()=>({basename:f,navigator:a,static:c,future:bh({v7_relativeSplatPath:!1},u)}),[f,u,a,c]);typeof r=="string"&&(r=bd(r));let{pathname:p="/",search:g="",hash:y="",state:x=null,key:E="default"}=r,j=w.useMemo(()=>{let N=yj(p,f);return N==null?null:{location:{pathname:N,search:g,hash:y,state:x,key:E},navigationType:i}},[f,p,g,y,x,E,i]);return j==null?null:w.createElement(vl.Provider,{value:h},w.createElement(uy.Provider,{children:n,value:j}))}function v8(t){let{children:e,location:n}=t;return t8(z1(e),n)}new Promise(()=>{});function z1(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,i)=>{if(!w.isValidElement(r))return;let a=[...e,i];if(r.type===w.Fragment){n.push.apply(n,z1(r.props.children,a));return}r.type!==tn&&wn(!1),!r.props.index||!r.props.children||wn(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=z1(r.props.children,a)),n.push(c)}),n}function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L1.apply(this,arguments)}function y8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function b8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function x8(t,e){return t.button===0&&(!e||e==="_self")&&!b8(t)}const _8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],w8="6";try{window.__reactRouterVersion=w8}catch{}const j8="startTransition",YC=ZD[j8];function E8(t){let{basename:e,children:n,future:r,window:i}=t,a=w.useRef();a.current==null&&(a.current=NV({window:i,v5Compat:!0}));let c=a.current,[u,f]=w.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},p=w.useCallback(g=>{h&&YC?YC(()=>f(g)):f(g)},[f,h]);return w.useLayoutEffect(()=>c.listen(p),[c,p]),w.useEffect(()=>m8(r),[r]),w.createElement(g8,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const N8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=w.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:c,state:u,target:f,to:h,preventScrollReset:p,viewTransition:g}=e,y=y8(e,_8),{basename:x}=w.useContext(vl),E,j=!1;if(typeof h=="string"&&S8.test(h)&&(E=h,N8))try{let O=new URL(window.location.href),C=h.startsWith("//")?new URL(O.protocol+h):new URL(h),V=yj(C.pathname,x);C.origin===O.origin&&V!=null?h=V+C.search+C.hash:j=!0}catch{}let N=ZV(h,{relative:i}),A=A8(h,{replace:c,state:u,target:f,preventScrollReset:p,relative:i,viewTransition:g});function k(O){r&&r(O),O.defaultPrevented||A(O)}return w.createElement("a",L1({},y,{href:E||N,onClick:j||a?r:k,ref:n,target:f}))});var XC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(XC||(XC={}));var JC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(JC||(JC={}));function A8(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:c,viewTransition:u}=e===void 0?{}:e,f=Dr(),h=yl(),p=oM(t,{relative:c});return w.useCallback(g=>{if(x8(g,n)){g.preventDefault();let y=r!==void 0?r:Hg(h)===Hg(p);f(t,{replace:y,state:i,preventScrollReset:a,relative:c,viewTransition:u})}},[h,f,p,r,i,n,t,a,c,u])}const T8=()=>{};var ZC={};const dM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},C8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],c=t[n++],u=t[n++],f=((i&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},fM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],c=i+1<t.length,u=c?t[i+1]:0,f=i+2<t.length,h=f?t[i+2]:0,p=a>>2,g=(a&3)<<4|u>>4;let y=(u&15)<<2|h>>6,x=h&63;f||(x=64,c||(y=64)),r.push(n[p],n[g],n[y],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||u==null||h==null||g==null)throw new O8;const y=a<<2|u>>4;if(r.push(y),h!==64){const x=u<<4&240|h>>2;if(r.push(x),g!==64){const E=h<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class O8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I8=function(t){const e=dM(t);return fM.encodeByteArray(e,!0)},Gg=function(t){return I8(t).replace(/\./g,"")},hM=function(t){try{return fM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function P8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const R8=()=>P8().__FIREBASE_DEFAULTS__,k8=()=>{if(typeof process>"u"||typeof ZC>"u")return;const t=ZC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},D8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hM(t[1]);return e&&JSON.parse(e)},fy=()=>{try{return T8()||R8()||k8()||D8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mM=t=>fy()?.emulatorHosts?.[t],pM=t=>{const e=mM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gM=()=>fy()?.config,vM=t=>fy()?.[`_${t}`];class M8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function bl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wj(t){return(await fetch(t,{credentials:"include"})).ok}function yM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Gg(JSON.stringify(n)),Gg(JSON.stringify(c)),""].join(".")}const ch={};function z8(){const t={prod:[],emulator:[]};for(const e of Object.keys(ch))ch[e]?t.emulator.push(e):t.prod.push(e);return t}function L8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let e2=!1;function jj(t,e){if(typeof window>"u"||typeof document>"u"||!bl(window.location.host)||ch[t]===e||ch[t]||e2)return;ch[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=z8().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function f(y,x){y.setAttribute("width","24"),y.setAttribute("id",x),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{e2=!0,c()},y}function p(y,x){y.setAttribute("id",x),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=L8(r),x=n("text"),E=document.getElementById(x)||document.createElement("span"),j=n("learnmore"),N=document.getElementById(j)||document.createElement("a"),A=n("preprendIcon"),k=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const O=y.element;u(O),p(N,j);const C=h();f(k,A),O.append(k,E,N,C),document.body.appendChild(O)}a?(E.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function jr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jr())}function U8(){const t=fy()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F8(){const t=jr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function H8(){return!U8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G8(){try{return typeof indexedDB=="object"}catch{return!1}}function K8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const Q8="FirebaseError";class ta extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Q8,Object.setPrototypeOf(this,ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qh.prototype.create)}}class Qh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?W8(a,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new ta(i,u,r)}}function W8(t,e){return t.replace(Y8,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Y8=/\{\$([^}]+)}/g;function X8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],c=e[i];if(t2(a)&&t2(c)){if(!bc(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function t2(t){return t!==null&&typeof t=="object"}function Wh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Zf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function J8(t,e){const n=new Z8(t,e);return n.subscribe.bind(n)}class Z8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Px),i.error===void 0&&(i.error=Px),i.complete===void 0&&(i.complete=Px);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Px(){}function Ft(t){return t&&t._delegate?t._delegate:t}class al{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tc="[DEFAULT]";let tB=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new M8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rB(e))try{this.getOrInitializeService({instanceIdentifier:tc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tc){return this.instances.has(e)}getOptions(e=tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tc){return this.component?this.component.multipleInstances?e:tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nB(t){return t===tc?void 0:t}function rB(t){return t.instantiationMode==="EAGER"}class iB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const sB={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},aB=ut.INFO,oB={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},lB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=oB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ej{constructor(e){this.name=e,this._logLevel=aB,this._logHandler=lB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const cB=(t,e)=>e.some(n=>t instanceof n);let n2,r2;function uB(){return n2||(n2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dB(){return r2||(r2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bM=new WeakMap,q1=new WeakMap,xM=new WeakMap,Rx=new WeakMap,Nj=new WeakMap;function fB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(el(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&bM.set(n,t)}).catch(()=>{}),Nj.set(e,t),e}function hB(t){if(q1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});q1.set(t,e)}let U1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return q1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return el(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mB(t){U1=t(U1)}function pB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kx(this),e,...n);return xM.set(r,e.sort?e.sort():[e]),el(r)}:dB().includes(t)?function(...e){return t.apply(kx(this),e),el(bM.get(this))}:function(...e){return el(t.apply(kx(this),e))}}function gB(t){return typeof t=="function"?pB(t):(t instanceof IDBTransaction&&hB(t),cB(t,uB())?new Proxy(t,U1):t)}function el(t){if(t instanceof IDBRequest)return fB(t);if(Rx.has(t))return Rx.get(t);const e=gB(t);return e!==t&&(Rx.set(t,e),Nj.set(e,t)),e}const kx=t=>Nj.get(t);function vB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(t,e),u=el(c);return r&&c.addEventListener("upgradeneeded",f=>{r(el(c.result),f.oldVersion,f.newVersion,el(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),u.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const yB=["get","getKey","getAll","getAllKeys","count"],bB=["put","add","delete","clear"],Dx=new Map;function i2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dx.get(e))return Dx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=bB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yB.includes(n)))return;const a=async function(c,...u){const f=this.transaction(c,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),i&&f.done]))[0]};return Dx.set(e,a),a}mB(t=>({...t,get:(e,n,r)=>i2(e,n)||t.get(e,n,r),has:(e,n)=>!!i2(e,n)||t.has(e,n)}));class xB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_B(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _B(t){return t.getComponent()?.type==="VERSION"}const V1="@firebase/app",s2="0.14.7";const Ma=new Ej("@firebase/app"),wB="@firebase/app-compat",jB="@firebase/analytics-compat",EB="@firebase/analytics",NB="@firebase/app-check-compat",SB="@firebase/app-check",AB="@firebase/auth",TB="@firebase/auth-compat",CB="@firebase/database",OB="@firebase/data-connect",IB="@firebase/database-compat",PB="@firebase/functions",RB="@firebase/functions-compat",kB="@firebase/installations",DB="@firebase/installations-compat",MB="@firebase/messaging",zB="@firebase/messaging-compat",LB="@firebase/performance",qB="@firebase/performance-compat",UB="@firebase/remote-config",VB="@firebase/remote-config-compat",BB="@firebase/storage",$B="@firebase/storage-compat",FB="@firebase/firestore",HB="@firebase/ai",GB="@firebase/firestore-compat",KB="firebase",QB="12.8.0";const B1="[DEFAULT]",WB={[V1]:"fire-core",[wB]:"fire-core-compat",[EB]:"fire-analytics",[jB]:"fire-analytics-compat",[SB]:"fire-app-check",[NB]:"fire-app-check-compat",[AB]:"fire-auth",[TB]:"fire-auth-compat",[CB]:"fire-rtdb",[OB]:"fire-data-connect",[IB]:"fire-rtdb-compat",[PB]:"fire-fn",[RB]:"fire-fn-compat",[kB]:"fire-iid",[DB]:"fire-iid-compat",[MB]:"fire-fcm",[zB]:"fire-fcm-compat",[LB]:"fire-perf",[qB]:"fire-perf-compat",[UB]:"fire-rc",[VB]:"fire-rc-compat",[BB]:"fire-gcs",[$B]:"fire-gcs-compat",[FB]:"fire-fst",[GB]:"fire-fst-compat",[HB]:"fire-vertex","fire-js":"fire-js",[KB]:"fire-js-all"};const Kg=new Map,YB=new Map,$1=new Map;function a2(t,e){try{t.container.addComponent(e)}catch(n){Ma.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xc(t){const e=t.name;if($1.has(e))return Ma.debug(`There were multiple attempts to register component ${e}.`),!1;$1.set(e,t);for(const n of Kg.values())a2(n,t);for(const n of YB.values())a2(n,t);return!0}function hy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function di(t){return t==null?!1:t.settings!==void 0}const XB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tl=new Qh("app","Firebase",XB);class JB{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new al("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tl.create("app-deleted",{appName:this._name})}}const Mc=QB;function _M(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:B1,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw tl.create("bad-app-name",{appName:String(i)});if(n||(n=gM()),!n)throw tl.create("no-options");const a=Kg.get(i);if(a){if(bc(n,a.options)&&bc(r,a.config))return a;throw tl.create("duplicate-app",{appName:i})}const c=new iB(i);for(const f of $1.values())c.addComponent(f);const u=new JB(n,r,c);return Kg.set(i,u),u}function Sj(t=B1){const e=Kg.get(t);if(!e&&t===B1&&gM())return _M();if(!e)throw tl.create("no-app",{appName:t});return e}function Vs(t,e,n){let r=WB[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ma.warn(c.join(" "));return}xc(new al(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const ZB="firebase-heartbeat-database",e7=1,xh="firebase-heartbeat-store";let Mx=null;function wM(){return Mx||(Mx=vB(ZB,e7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xh)}catch(n){console.warn(n)}}}}).catch(t=>{throw tl.create("idb-open",{originalErrorMessage:t.message})})),Mx}async function t7(t){try{const n=(await wM()).transaction(xh),r=await n.objectStore(xh).get(jM(t));return await n.done,r}catch(e){if(e instanceof ta)Ma.warn(e.message);else{const n=tl.create("idb-get",{originalErrorMessage:e?.message});Ma.warn(n.message)}}}async function o2(t,e){try{const r=(await wM()).transaction(xh,"readwrite");await r.objectStore(xh).put(e,jM(t)),await r.done}catch(n){if(n instanceof ta)Ma.warn(n.message);else{const r=tl.create("idb-set",{originalErrorMessage:n?.message});Ma.warn(r.message)}}}function jM(t){return`${t.name}!${t.options.appId}`}const n7=1024,r7=30;class i7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=l2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>r7){const i=o7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ma.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=l2(),{heartbeatsToSend:n,unsentEntries:r}=s7(this._heartbeatsCache.heartbeats),i=Gg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ma.warn(e),""}}}function l2(){return new Date().toISOString().substring(0,10)}function s7(t,e=n7){const n=[];let r=t.slice();for(const i of t){const a=n.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),c2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),c2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G8()?K8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await t7(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return o2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return o2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function c2(t){return Gg(JSON.stringify({version:2,heartbeats:t})).length}function o7(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function l7(t){xc(new al("platform-logger",e=>new xB(e),"PRIVATE")),xc(new al("heartbeat",e=>new i7(e),"PRIVATE")),Vs(V1,s2,t),Vs(V1,s2,"esm2020"),Vs("fire-js","")}l7("");function EM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c7=EM,NM=new Qh("auth","Firebase",EM());const Qg=new Ej("@firebase/auth");function u7(t,...e){Qg.logLevel<=ut.WARN&&Qg.warn(`Auth (${Mc}): ${t}`,...e)}function Ag(t,...e){Qg.logLevel<=ut.ERROR&&Qg.error(`Auth (${Mc}): ${t}`,...e)}function cs(t,...e){throw Aj(t,...e)}function Bs(t,...e){return Aj(t,...e)}function SM(t,e,n){const r={...c7(),[e]:n};return new Qh("auth","Firebase",r).create(e,{appName:t.name})}function Pa(t){return SM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Aj(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NM.create(t,...e)}function He(t,e,...n){if(!t)throw Aj(e,...n)}function Aa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ag(e),new Error(e)}function za(t,e){t||Aa(e)}function F1(){return typeof self<"u"&&self.location?.href||""}function d7(){return u2()==="http:"||u2()==="https:"}function u2(){return typeof self<"u"&&self.location?.protocol||null}function f7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d7()||B8()||"connection"in navigator)?navigator.onLine:!0}function h7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Yh{constructor(e,n){this.shortDelay=e,this.longDelay=n,za(n>e,"Short delay should be less than long delay!"),this.isMobile=q8()||$8()}get(){return f7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tj(t,e){za(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class AM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const m7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const p7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g7=new Yh(3e4,6e4);function xl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wa(t,e,n,r,i={}){return TM(t,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=Wh({key:t.config.apiKey,...c}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:f,...a};return V8()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&bl(t.emulatorConfig.host)&&(h.credentials="include"),AM.fetch()(await CM(t,t.config.apiHost,n,u),h)})}async function TM(t,e,n){t._canInitEmulator=!1;const r={...m7,...e};try{const i=new y7(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Xp(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xp(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Xp(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw Xp(t,"user-disabled",c);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw SM(t,p,h);cs(t,p)}}catch(i){if(i instanceof ta)throw i;cs(t,"network-request-failed",{message:String(i)})}}async function Xh(t,e,n,r,i={}){const a=await Wa(t,e,n,r,i);return"mfaPendingCredential"in a&&cs(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function CM(t,e,n,r){const i=`${e}${n}?${r}`,a=t,c=a.config.emulator?Tj(t.config,i):`${t.config.apiScheme}://${i}`;return p7.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function v7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class y7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bs(this.auth,"network-request-failed")),g7.get())})}}function Xp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Bs(t,e,r);return i.customData._tokenResponse=n,i}function d2(t){return t!==void 0&&t.enterprise!==void 0}class b7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return v7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x7(t,e){return Wa(t,"GET","/v2/recaptchaConfig",xl(t,e))}async function _7(t,e){return Wa(t,"POST","/v1/accounts:delete",e)}async function Wg(t,e){return Wa(t,"POST","/v1/accounts:lookup",e)}function uh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function w7(t,e=!1){const n=Ft(t),r=await n.getIdToken(e),i=Cj(r);He(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:uh(zx(i.auth_time)),issuedAtTime:uh(zx(i.iat)),expirationTime:uh(zx(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function zx(t){return Number(t)*1e3}function Cj(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ag("JWT malformed, contained fewer than 3 sections"),null;try{const i=hM(n);return i?JSON.parse(i):(Ag("Failed to decode base64 JWT payload"),null)}catch(i){return Ag("Caught error parsing JWT payload as JSON",i?.toString()),null}}function f2(t){const e=Cj(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function td(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ta&&j7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function j7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class E7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class H1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uh(this.lastLoginAt),this.creationTime=uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yg(t){const e=t.auth,n=await t.getIdToken(),r=await td(t,Wg(e,{idToken:n}));He(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?OM(i.providerUserInfo):[],c=S7(t.providerData,a),u=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!c?.length,h=u?f:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new H1(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function N7(t){const e=Ft(t);await Yg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function OM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function A7(t,e){const n=await TM(t,{},async()=>{const r=Wh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,c=await CM(t,i,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:r};return t.emulatorConfig&&bl(t.emulatorConfig.host)&&(f.credentials="include"),AM.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function T7(t,e){return Wa(t,"POST","/v2/accounts:revokeToken",xl(t,e))}class Ku{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):f2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=f2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await A7(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,c=new Ku;return r&&(He(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(He(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ku,this.toJSON())}_performRefresh(){return Aa("not implemented")}}function qo(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ss{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new E7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new H1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await td(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return w7(this,e)}reload(){return N7(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(Pa(this.auth));const e=await this.getIdToken();return await td(this,_7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,c=n.photoURL??void 0,u=n.tenantId??void 0,f=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:x,providerData:E,stsTokenManager:j}=n;He(g&&j,e,"internal-error");const N=Ku.fromJSON(this.name,j);He(typeof g=="string",e,"internal-error"),qo(r,e.name),qo(i,e.name),He(typeof y=="boolean",e,"internal-error"),He(typeof x=="boolean",e,"internal-error"),qo(a,e.name),qo(c,e.name),qo(u,e.name),qo(f,e.name),qo(h,e.name),qo(p,e.name);const A=new ss({uid:g,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:x,photoURL:c,phoneNumber:a,tenantId:u,stsTokenManager:N,createdAt:h,lastLoginAt:p});return E&&Array.isArray(E)&&(A.providerData=E.map(k=>({...k}))),f&&(A._redirectEventId=f),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ku;i.updateFromServerResponse(n);const a=new ss({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yg(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];He(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?OM(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!a?.length,u=new Ku;u.updateFromIdToken(r);const f=new ss({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new H1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,h),f}}const h2=new Map;function Ta(t){za(t instanceof Function,"Expected a class definition");let e=h2.get(t);return e?(za(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,h2.set(t,e),e)}class IM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IM.type="NONE";const m2=IM;function Tg(t,e,n){return`firebase:${t}:${e}:${n}`}class Qu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Tg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Tg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wg(this.auth,{idToken:e}).catch(()=>{});return n?ss._fromGetAccountInfoResponse(this.auth,n,e):null}return ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qu(Ta(m2),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Ta(m2);const c=Tg(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(c);if(p){let g;if(typeof p=="string"){const y=await Wg(e,{idToken:p}).catch(()=>{});if(!y)break;g=await ss._fromGetAccountInfoResponse(e,y,p)}else g=ss._fromJSON(e,p);h!==a&&(u=g),a=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Qu(a,e,r):(a=f[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(c)}catch{}})),new Qu(a,e,r))}}function p2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zM(e))return"Blackberry";if(LM(e))return"Webos";if(RM(e))return"Safari";if((e.includes("chrome/")||kM(e))&&!e.includes("edge/"))return"Chrome";if(MM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function PM(t=jr()){return/firefox\//i.test(t)}function RM(t=jr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kM(t=jr()){return/crios\//i.test(t)}function DM(t=jr()){return/iemobile/i.test(t)}function MM(t=jr()){return/android/i.test(t)}function zM(t=jr()){return/blackberry/i.test(t)}function LM(t=jr()){return/webos/i.test(t)}function Oj(t=jr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function C7(t=jr()){return Oj(t)&&!!window.navigator?.standalone}function O7(){return F8()&&document.documentMode===10}function qM(t=jr()){return Oj(t)||MM(t)||LM(t)||zM(t)||/windows phone/i.test(t)||DM(t)}function UM(t,e=[]){let n;switch(t){case"Browser":n=p2(jr());break;case"Worker":n=`${p2(jr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mc}/${r}`}class I7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const f=e(a);c(f)}catch(f){u(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function P7(t,e={}){return Wa(t,"GET","/v2/passwordPolicy",xl(t,e))}const R7=6;class k7{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??R7,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class D7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g2(this),this.idTokenSubscription=new g2(this),this.beforeStateQueue=new I7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ta(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wg(this,{idToken:e}),r=await ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(di(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=h7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(Pa(this));const n=e?Ft(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(Pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(Pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P7(this),n=new k7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await T7(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ta(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await Qu.create(this,[Ta(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&u7(`Error while retrieving App Check token: ${e.error}`),e?.token}}function zc(t){return Ft(t)}class g2{constructor(e){this.auth=e,this.observer=null,this.addObserver=J8(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let my={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M7(t){my=t}function VM(t){return my.loadJS(t)}function z7(){return my.recaptchaEnterpriseScript}function L7(){return my.gapiScript}function q7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class U7{constructor(){this.enterprise=new V7}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class V7{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const B7="recaptcha-enterprise",BM="NO_RECAPTCHA";class $7{constructor(e){this.type=B7,this.auth=zc(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{x7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new b7(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}}).catch(f=>{u(f)})})}function i(a,c,u){const f=window.grecaptcha;d2(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{c(h)}).catch(()=>{c(BM)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new U7().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&d2(window.grecaptcha))i(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=z7();f.length!==0&&(f+=u),VM(f).then(()=>{i(u,a,c)}).catch(h=>{c(h)})}}).catch(u=>{c(u)})})}}async function v2(t,e,n,r=!1,i=!1){const a=new $7(t);let c;if(i)c=BM;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function G1(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await v2(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await v2(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)})}function F7(t,e){const n=hy(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(bc(a,e??{}))return i;cs(i,"already-initialized")}return n.initialize({options:e})}function H7(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ta);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function G7(t,e,n){const r=zc(t);He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=$M(e),{host:c,port:u}=K7(e),f=u===null?"":`:${u}`,h={url:`${a}//${c}${f}/`},p=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){He(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),He(bc(h,r.config.emulator)&&bc(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,bl(c)?(wj(`${a}//${c}${f}`),jj("Auth",!0)):Q7()}function $M(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function K7(t){const e=$M(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:y2(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:y2(c)}}}function y2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Ij{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,n){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}async function W7(t,e){return Wa(t,"POST","/v1/accounts:signUp",e)}async function Y7(t,e){return Xh(t,"POST","/v1/accounts:signInWithPassword",xl(t,e))}async function X7(t,e){return Xh(t,"POST","/v1/accounts:signInWithEmailLink",xl(t,e))}async function J7(t,e){return Xh(t,"POST","/v1/accounts:signInWithEmailLink",xl(t,e))}class _h extends Ij{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new _h(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _h(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G1(e,n,"signInWithPassword",Y7);case"emailLink":return X7(e,{email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G1(e,r,"signUpPassword",W7);case"emailLink":return J7(e,{idToken:n,email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Wu(t,e){return Xh(t,"POST","/v1/accounts:signInWithIdp",xl(t,e))}const Z7="http://localhost";class _c extends Ij{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _c(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const c=new _c(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Wu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wu(e,n)}buildRequest(){const e={requestUri:Z7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wh(n)}return e}}function e$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function t$(t){const e=Jf(Zf(t)).link,n=e?Jf(Zf(e)).deep_link_id:null,r=Jf(Zf(t)).deep_link_id;return(r?Jf(Zf(r)).link:null)||r||n||e||t}class Pj{constructor(e){const n=Jf(Zf(e)),r=n.apiKey??null,i=n.oobCode??null,a=e$(n.mode??null);He(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=t$(e);try{return new Pj(n)}catch{return null}}}class _d{constructor(){this.providerId=_d.PROVIDER_ID}static credential(e,n){return _h._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pj.parseLink(n);return He(r,"argument-error"),_h._fromEmailAndCode(e,r.code,r.tenantId)}}_d.PROVIDER_ID="password";_d.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_d.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class FM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Jh extends FM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fo extends Jh{constructor(){super("facebook.com")}static credential(e){return _c._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fo.PROVIDER_ID="facebook.com";class Ho extends Jh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _c._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ho.credential(n,r)}catch{return null}}}Ho.GOOGLE_SIGN_IN_METHOD="google.com";Ho.PROVIDER_ID="google.com";class Go extends Jh{constructor(){super("github.com")}static credential(e){return _c._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Go.credential(e.oauthAccessToken)}catch{return null}}}Go.GITHUB_SIGN_IN_METHOD="github.com";Go.PROVIDER_ID="github.com";class Ko extends Jh{constructor(){super("twitter.com")}static credential(e,n){return _c._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ko.credential(n,r)}catch{return null}}}Ko.TWITTER_SIGN_IN_METHOD="twitter.com";Ko.PROVIDER_ID="twitter.com";async function n$(t,e){return Xh(t,"POST","/v1/accounts:signUp",xl(t,e))}class wc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ss._fromIdTokenResponse(e,r,i),c=b2(r);return new wc({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=b2(r);return new wc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function b2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Xg extends ta{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Xg(e,n,r,i)}}function HM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Xg._fromErrorAndOperation(t,a,e,r):a})}async function r$(t,e,n=!1){const r=await td(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wc._forOperation(t,"link",r)}async function i$(t,e,n=!1){const{auth:r}=t;if(di(r.app))return Promise.reject(Pa(r));const i="reauthenticate";try{const a=await td(t,HM(r,i,e,t),n);He(a.idToken,r,"internal-error");const c=Cj(a.idToken);He(c,r,"internal-error");const{sub:u}=c;return He(t.uid===u,r,"user-mismatch"),wc._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&cs(r,"user-mismatch"),a}}async function GM(t,e,n=!1){if(di(t.app))return Promise.reject(Pa(t));const r="signIn",i=await HM(t,r,e),a=await wc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function s$(t,e){return GM(zc(t),e)}async function KM(t){const e=zc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function a$(t,e,n){if(di(t.app))return Promise.reject(Pa(t));const r=zc(t),c=await G1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",n$).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&KM(t),f}),u=await wc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function o$(t,e,n){return di(t.app)?Promise.reject(Pa(t)):s$(Ft(t),_d.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KM(t),r})}async function l$(t,e){return Wa(t,"POST","/v1/accounts:update",e)}async function c$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ft(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await td(r,l$(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:f})=>f==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function u$(t,e,n,r){return Ft(t).onIdTokenChanged(e,n,r)}function d$(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function f$(t,e,n,r){return Ft(t).onAuthStateChanged(e,n,r)}function h$(t){return Ft(t).signOut()}const Jg="__sak";class QM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jg,"1"),this.storage.removeItem(Jg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const m$=1e3,p$=10;class WM extends QM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);O7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,p$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},m$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WM.type="LOCAL";const g$=WM;class YM extends QM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YM.type="SESSION";const XM=YM;function v$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class py{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new py(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,c=this.handlersMap[i];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async h=>h(n.origin,a)),f=await v$(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}py.receivers=[];function Rj(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class y${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((u,f)=>{const h=Rj("",20);i.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(y.data.response);break;default:clearTimeout(p),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function $s(){return window}function b$(t){$s().location.href=t}function JM(){return typeof $s().WorkerGlobalScope<"u"&&typeof $s().importScripts=="function"}async function x$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _$(){return navigator?.serviceWorker?.controller||null}function w$(){return JM()?self:null}const ZM="firebaseLocalStorageDb",j$=1,Zg="firebaseLocalStorage",ez="fbase_key";class Zh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gy(t,e){return t.transaction([Zg],e?"readwrite":"readonly").objectStore(Zg)}function E$(){const t=indexedDB.deleteDatabase(ZM);return new Zh(t).toPromise()}function K1(){const t=indexedDB.open(ZM,j$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zg,{keyPath:ez})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zg)?e(r):(r.close(),await E$(),e(await K1()))})})}async function x2(t,e,n){const r=gy(t,!0).put({[ez]:e,value:n});return new Zh(r).toPromise()}async function N$(t,e){const n=gy(t,!1).get(e),r=await new Zh(n).toPromise();return r===void 0?null:r.value}function _2(t,e){const n=gy(t,!0).delete(e);return new Zh(n).toPromise()}const S$=800,A$=3;class tz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await K1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>A$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=py._getInstance(w$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await x$(),!this.activeServiceWorker)return;this.sender=new y$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await K1();return await x2(e,Jg,"1"),await _2(e,Jg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>x2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>N$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=gy(i,!1).getAll();return new Zh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tz.type="LOCAL";const T$=tz;new Yh(3e4,6e4);function C$(t,e){return e?Ta(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class kj extends Ij{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function O$(t){return GM(t.auth,new kj(t),t.bypassAuthState)}function I$(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),i$(n,new kj(t),t.bypassAuthState)}async function P$(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),r$(n,new kj(t),t.bypassAuthState)}class nz{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O$;case"linkViaPopup":case"linkViaRedirect":return P$;case"reauthViaPopup":case"reauthViaRedirect":return I$;default:cs(this.auth,"internal-error")}}resolve(e){za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const R$=new Yh(2e3,1e4);class Fu extends nz{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Fu.currentPopupAction&&Fu.currentPopupAction.cancel(),Fu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){za(this.filter.length===1,"Popup operations only handle one event");const e=Rj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R$.get())};e()}}Fu.currentPopupAction=null;const k$="pendingRedirect",Cg=new Map;class D$ extends nz{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cg.get(this.auth._key());if(!e){try{const r=await M$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cg.set(this.auth._key(),e)}return this.bypassAuthState||Cg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M$(t,e){const n=q$(e),r=L$(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function z$(t,e){Cg.set(t._key(),e)}function L$(t){return Ta(t._redirectPersistence)}function q$(t){return Tg(k$,t.config.apiKey,t.name)}async function U$(t,e,n=!1){if(di(t.app))return Promise.reject(Pa(t));const r=zc(t),i=C$(r,e),c=await new D$(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const V$=600*1e3;class B${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!rz(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Bs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V$&&this.cachedEventUids.clear(),this.cachedEventUids.has(w2(e))}saveEventToCache(e){this.cachedEventUids.add(w2(e)),this.lastProcessedEventTime=Date.now()}}function w2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rz({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function $$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rz(t);default:return!1}}async function F$(t,e={}){return Wa(t,"GET","/v1/projects",e)}const H$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G$=/^https?/;async function K$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await F$(t);for(const n of e)try{if(Q$(n))return}catch{}cs(t,"unauthorized-domain")}function Q$(t){const e=F1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!G$.test(n))return!1;if(H$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const W$=new Yh(3e4,6e4);function j2(){const t=$s().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Y$(t){return new Promise((e,n)=>{function r(){j2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j2(),n(Bs(t,"network-request-failed"))},timeout:W$.get()})}if($s().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($s().gapi?.load)r();else{const i=q7("iframefcb");return $s()[i]=()=>{gapi.load?r():n(Bs(t,"network-request-failed"))},VM(`${L7()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Og=null,e})}let Og=null;function X$(t){return Og=Og||Y$(t),Og}const J$=new Yh(5e3,15e3),Z$="__/auth/iframe",eF="emulator/auth/iframe",tF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rF(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tj(e,eF):`https://${t.config.authDomain}/${Z$}`,r={apiKey:e.apiKey,appName:t.name,v:Mc},i=nF.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Wh(r).slice(1)}`}async function iF(t){const e=await X$(t),n=$s().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:rF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tF,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=Bs(t,"network-request-failed"),u=$s().setTimeout(()=>{a(c)},J$.get());function f(){$s().clearTimeout(u),i(r)}r.ping(f).then(f,()=>{a(c)})}))}const sF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aF=500,oF=600,lF="_blank",cF="http://localhost";class E2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uF(t,e,n,r=aF,i=oF){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const f={...sF,width:r.toString(),height:i.toString(),top:a,left:c},h=jr().toLowerCase();n&&(u=kM(h)?lF:n),PM(h)&&(e=e||cF,f.scrollbars="yes");const p=Object.entries(f).reduce((y,[x,E])=>`${y}${x}=${E},`,"");if(C7(h)&&u!=="_self")return dF(e||"",u),new E2(null);const g=window.open(e||"",u,p);He(g,t,"popup-blocked");try{g.focus()}catch{}return new E2(g)}function dF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const fF="__/auth/handler",hF="emulator/auth/handler",mF=encodeURIComponent("fac");async function N2(t,e,n,r,i,a){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mc,eventId:i};if(e instanceof FM){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",X8(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))c[p]=g}if(e instanceof Jh){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await t._getAppCheckToken(),h=f?`#${mF}=${encodeURIComponent(f)}`:"";return`${pF(t)}?${Wh(u).slice(1)}${h}`}function pF({config:t}){return t.emulator?Tj(t,hF):`https://${t.authDomain}/${fF}`}const Lx="webStorageSupport";class gF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XM,this._completeRedirectFn=U$,this._overrideRedirectResult=z$}async _openPopup(e,n,r,i){za(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await N2(e,n,r,F1(),i);return uF(e,a,Rj())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await N2(e,n,r,F1(),i);return b$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(za(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iF(e),r=new B$(e);return n.register("authEvent",i=>(He(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lx,{type:Lx},i=>{const a=i?.[0]?.[Lx];a!==void 0&&n(!!a),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=K$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qM()||RM()||Oj()}}const vF=gF;var S2="@firebase/auth",A2="1.12.0";class yF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xF(t){xc(new al("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;He(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UM(t)},h=new D7(r,i,a,f);return H7(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xc(new al("auth-internal",e=>{const n=zc(e.getProvider("auth").getImmediate());return(r=>new yF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(S2,A2,bF(t)),Vs(S2,A2,"esm2020")}const _F=300,wF=vM("authIdTokenMaxAge")||_F;let T2=null;const jF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wF)return;const i=n?.token;T2!==i&&(T2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function EF(t=Sj()){const e=hy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=F7(t,{popupRedirectResolver:vF,persistence:[T$,g$,XM]}),r=vM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=jF(a.toString());d$(n,c,()=>c(n.currentUser)),u$(n,u=>c(u))}}const i=mM("auth");return i&&G7(n,`http://${i}`),n}function NF(){return document.getElementsByTagName("head")?.[0]??document}M7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Bs("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",NF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xF("Browser");var C2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var nl,iz;(function(){var t;function e(D,P){function R(){}R.prototype=P.prototype,D.F=P.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(q,L,M){for(var U=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)U[ge-2]=arguments[ge];return P.prototype[L].apply(q,U)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,P,R){R||(R=0);const q=Array(16);if(typeof P=="string")for(var L=0;L<16;++L)q[L]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(L=0;L<16;++L)q[L]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=D.g[0],R=D.g[1],L=D.g[2];let M=D.g[3],U;U=P+(M^R&(L^M))+q[0]+3614090360&4294967295,P=R+(U<<7&4294967295|U>>>25),U=M+(L^P&(R^L))+q[1]+3905402710&4294967295,M=P+(U<<12&4294967295|U>>>20),U=L+(R^M&(P^R))+q[2]+606105819&4294967295,L=M+(U<<17&4294967295|U>>>15),U=R+(P^L&(M^P))+q[3]+3250441966&4294967295,R=L+(U<<22&4294967295|U>>>10),U=P+(M^R&(L^M))+q[4]+4118548399&4294967295,P=R+(U<<7&4294967295|U>>>25),U=M+(L^P&(R^L))+q[5]+1200080426&4294967295,M=P+(U<<12&4294967295|U>>>20),U=L+(R^M&(P^R))+q[6]+2821735955&4294967295,L=M+(U<<17&4294967295|U>>>15),U=R+(P^L&(M^P))+q[7]+4249261313&4294967295,R=L+(U<<22&4294967295|U>>>10),U=P+(M^R&(L^M))+q[8]+1770035416&4294967295,P=R+(U<<7&4294967295|U>>>25),U=M+(L^P&(R^L))+q[9]+2336552879&4294967295,M=P+(U<<12&4294967295|U>>>20),U=L+(R^M&(P^R))+q[10]+4294925233&4294967295,L=M+(U<<17&4294967295|U>>>15),U=R+(P^L&(M^P))+q[11]+2304563134&4294967295,R=L+(U<<22&4294967295|U>>>10),U=P+(M^R&(L^M))+q[12]+1804603682&4294967295,P=R+(U<<7&4294967295|U>>>25),U=M+(L^P&(R^L))+q[13]+4254626195&4294967295,M=P+(U<<12&4294967295|U>>>20),U=L+(R^M&(P^R))+q[14]+2792965006&4294967295,L=M+(U<<17&4294967295|U>>>15),U=R+(P^L&(M^P))+q[15]+1236535329&4294967295,R=L+(U<<22&4294967295|U>>>10),U=P+(L^M&(R^L))+q[1]+4129170786&4294967295,P=R+(U<<5&4294967295|U>>>27),U=M+(R^L&(P^R))+q[6]+3225465664&4294967295,M=P+(U<<9&4294967295|U>>>23),U=L+(P^R&(M^P))+q[11]+643717713&4294967295,L=M+(U<<14&4294967295|U>>>18),U=R+(M^P&(L^M))+q[0]+3921069994&4294967295,R=L+(U<<20&4294967295|U>>>12),U=P+(L^M&(R^L))+q[5]+3593408605&4294967295,P=R+(U<<5&4294967295|U>>>27),U=M+(R^L&(P^R))+q[10]+38016083&4294967295,M=P+(U<<9&4294967295|U>>>23),U=L+(P^R&(M^P))+q[15]+3634488961&4294967295,L=M+(U<<14&4294967295|U>>>18),U=R+(M^P&(L^M))+q[4]+3889429448&4294967295,R=L+(U<<20&4294967295|U>>>12),U=P+(L^M&(R^L))+q[9]+568446438&4294967295,P=R+(U<<5&4294967295|U>>>27),U=M+(R^L&(P^R))+q[14]+3275163606&4294967295,M=P+(U<<9&4294967295|U>>>23),U=L+(P^R&(M^P))+q[3]+4107603335&4294967295,L=M+(U<<14&4294967295|U>>>18),U=R+(M^P&(L^M))+q[8]+1163531501&4294967295,R=L+(U<<20&4294967295|U>>>12),U=P+(L^M&(R^L))+q[13]+2850285829&4294967295,P=R+(U<<5&4294967295|U>>>27),U=M+(R^L&(P^R))+q[2]+4243563512&4294967295,M=P+(U<<9&4294967295|U>>>23),U=L+(P^R&(M^P))+q[7]+1735328473&4294967295,L=M+(U<<14&4294967295|U>>>18),U=R+(M^P&(L^M))+q[12]+2368359562&4294967295,R=L+(U<<20&4294967295|U>>>12),U=P+(R^L^M)+q[5]+4294588738&4294967295,P=R+(U<<4&4294967295|U>>>28),U=M+(P^R^L)+q[8]+2272392833&4294967295,M=P+(U<<11&4294967295|U>>>21),U=L+(M^P^R)+q[11]+1839030562&4294967295,L=M+(U<<16&4294967295|U>>>16),U=R+(L^M^P)+q[14]+4259657740&4294967295,R=L+(U<<23&4294967295|U>>>9),U=P+(R^L^M)+q[1]+2763975236&4294967295,P=R+(U<<4&4294967295|U>>>28),U=M+(P^R^L)+q[4]+1272893353&4294967295,M=P+(U<<11&4294967295|U>>>21),U=L+(M^P^R)+q[7]+4139469664&4294967295,L=M+(U<<16&4294967295|U>>>16),U=R+(L^M^P)+q[10]+3200236656&4294967295,R=L+(U<<23&4294967295|U>>>9),U=P+(R^L^M)+q[13]+681279174&4294967295,P=R+(U<<4&4294967295|U>>>28),U=M+(P^R^L)+q[0]+3936430074&4294967295,M=P+(U<<11&4294967295|U>>>21),U=L+(M^P^R)+q[3]+3572445317&4294967295,L=M+(U<<16&4294967295|U>>>16),U=R+(L^M^P)+q[6]+76029189&4294967295,R=L+(U<<23&4294967295|U>>>9),U=P+(R^L^M)+q[9]+3654602809&4294967295,P=R+(U<<4&4294967295|U>>>28),U=M+(P^R^L)+q[12]+3873151461&4294967295,M=P+(U<<11&4294967295|U>>>21),U=L+(M^P^R)+q[15]+530742520&4294967295,L=M+(U<<16&4294967295|U>>>16),U=R+(L^M^P)+q[2]+3299628645&4294967295,R=L+(U<<23&4294967295|U>>>9),U=P+(L^(R|~M))+q[0]+4096336452&4294967295,P=R+(U<<6&4294967295|U>>>26),U=M+(R^(P|~L))+q[7]+1126891415&4294967295,M=P+(U<<10&4294967295|U>>>22),U=L+(P^(M|~R))+q[14]+2878612391&4294967295,L=M+(U<<15&4294967295|U>>>17),U=R+(M^(L|~P))+q[5]+4237533241&4294967295,R=L+(U<<21&4294967295|U>>>11),U=P+(L^(R|~M))+q[12]+1700485571&4294967295,P=R+(U<<6&4294967295|U>>>26),U=M+(R^(P|~L))+q[3]+2399980690&4294967295,M=P+(U<<10&4294967295|U>>>22),U=L+(P^(M|~R))+q[10]+4293915773&4294967295,L=M+(U<<15&4294967295|U>>>17),U=R+(M^(L|~P))+q[1]+2240044497&4294967295,R=L+(U<<21&4294967295|U>>>11),U=P+(L^(R|~M))+q[8]+1873313359&4294967295,P=R+(U<<6&4294967295|U>>>26),U=M+(R^(P|~L))+q[15]+4264355552&4294967295,M=P+(U<<10&4294967295|U>>>22),U=L+(P^(M|~R))+q[6]+2734768916&4294967295,L=M+(U<<15&4294967295|U>>>17),U=R+(M^(L|~P))+q[13]+1309151649&4294967295,R=L+(U<<21&4294967295|U>>>11),U=P+(L^(R|~M))+q[4]+4149444226&4294967295,P=R+(U<<6&4294967295|U>>>26),U=M+(R^(P|~L))+q[11]+3174756917&4294967295,M=P+(U<<10&4294967295|U>>>22),U=L+(P^(M|~R))+q[2]+718787259&4294967295,L=M+(U<<15&4294967295|U>>>17),U=R+(M^(L|~P))+q[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(L+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+M&4294967295}r.prototype.v=function(D,P){P===void 0&&(P=D.length);const R=P-this.blockSize,q=this.C;let L=this.h,M=0;for(;M<P;){if(L==0)for(;M<=R;)i(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<P;)if(q[L++]=D.charCodeAt(M++),L==this.blockSize){i(this,q),L=0;break}}else for(;M<P;)if(q[L++]=D[M++],L==this.blockSize){i(this,q),L=0;break}}this.h=L,this.o+=P},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;P=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=P&255,P/=256;for(this.v(D),D=Array(16),P=0,R=0;R<4;++R)for(let q=0;q<32;q+=8)D[P++]=this.g[R]>>>q&255;return D};function a(D,P){var R=u;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=P(D)}function c(D,P){this.h=P;const R=[];let q=!0;for(let L=D.length-1;L>=0;L--){const M=D[L]|0;q&&M==P||(R[L]=M,q=!1)}this.g=R}var u={};function f(D){return-128<=D&&D<128?a(D,function(P){return new c([P|0],P<0?-1:0)}):new c([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return N(h(-D));const P=[];let R=1;for(let q=0;D>=R;q++)P[q]=D/R|0,R*=4294967296;return new c(P,0)}function p(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return N(p(D.substring(1),P));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(P,8));let q=g;for(let M=0;M<D.length;M+=8){var L=Math.min(8,D.length-M);const U=parseInt(D.substring(M,M+L),P);L<8?(L=h(Math.pow(P,L)),q=q.j(L).add(h(U))):(q=q.j(R),q=q.add(h(U)))}return q}var g=f(0),y=f(1),x=f(16777216);t=c.prototype,t.m=function(){if(j(this))return-N(this).m();let D=0,P=1;for(let R=0;R<this.g.length;R++){const q=this.i(R);D+=(q>=0?q:4294967296+q)*P,P*=4294967296}return D},t.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(j(this))return"-"+N(this).toString(D);const P=h(Math.pow(D,6));var R=this;let q="";for(;;){const L=C(R,P).g;R=A(R,L.j(P));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=L,E(R))return M+q;for(;M.length<6;)M="0"+M;q=M+q}},t.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(let P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function j(D){return D.h==-1}t.l=function(D){return D=A(this,D),j(D)?-1:E(D)?0:1};function N(D){const P=D.g.length,R=[];for(let q=0;q<P;q++)R[q]=~D.g[q];return new c(R,~D.h).add(y)}t.abs=function(){return j(this)?N(this):this},t.add=function(D){const P=Math.max(this.g.length,D.g.length),R=[];let q=0;for(let L=0;L<=P;L++){let M=q+(this.i(L)&65535)+(D.i(L)&65535),U=(M>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);q=U>>>16,M&=65535,U&=65535,R[L]=U<<16|M}return new c(R,R[R.length-1]&-2147483648?-1:0)};function A(D,P){return D.add(N(P))}t.j=function(D){if(E(this)||E(D))return g;if(j(this))return j(D)?N(this).j(N(D)):N(N(this).j(D));if(j(D))return N(this.j(N(D)));if(this.l(x)<0&&D.l(x)<0)return h(this.m()*D.m());const P=this.g.length+D.g.length,R=[];for(var q=0;q<2*P;q++)R[q]=0;for(q=0;q<this.g.length;q++)for(let L=0;L<D.g.length;L++){const M=this.i(q)>>>16,U=this.i(q)&65535,ge=D.i(L)>>>16,Z=D.i(L)&65535;R[2*q+2*L]+=U*Z,k(R,2*q+2*L),R[2*q+2*L+1]+=M*Z,k(R,2*q+2*L+1),R[2*q+2*L+1]+=U*ge,k(R,2*q+2*L+1),R[2*q+2*L+2]+=M*ge,k(R,2*q+2*L+2)}for(D=0;D<P;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=P;D<2*P;D++)R[D]=0;return new c(R,0)};function k(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function O(D,P){this.g=D,this.h=P}function C(D,P){if(E(P))throw Error("division by zero");if(E(D))return new O(g,g);if(j(D))return P=C(N(D),P),new O(N(P.g),N(P.h));if(j(P))return P=C(D,N(P)),new O(N(P.g),P.h);if(D.g.length>30){if(j(D)||j(P))throw Error("slowDivide_ only works with positive integers.");for(var R=y,q=P;q.l(D)<=0;)R=V(R),q=V(q);var L=$(R,1),M=$(q,1);for(q=$(q,2),R=$(R,2);!E(q);){var U=M.add(q);U.l(D)<=0&&(L=L.add(R),M=U),q=$(q,1),R=$(R,1)}return P=A(D,L.j(P)),new O(L,P)}for(L=g;D.l(P)>=0;){for(R=Math.max(1,Math.floor(D.m()/P.m())),q=Math.ceil(Math.log(R)/Math.LN2),q=q<=48?1:Math.pow(2,q-48),M=h(R),U=M.j(P);j(U)||U.l(D)>0;)R-=q,M=h(R),U=M.j(P);E(M)&&(M=y),L=L.add(M),D=A(D,U)}return new O(L,D)}t.B=function(D){return C(this,D).h},t.and=function(D){const P=Math.max(this.g.length,D.g.length),R=[];for(let q=0;q<P;q++)R[q]=this.i(q)&D.i(q);return new c(R,this.h&D.h)},t.or=function(D){const P=Math.max(this.g.length,D.g.length),R=[];for(let q=0;q<P;q++)R[q]=this.i(q)|D.i(q);return new c(R,this.h|D.h)},t.xor=function(D){const P=Math.max(this.g.length,D.g.length),R=[];for(let q=0;q<P;q++)R[q]=this.i(q)^D.i(q);return new c(R,this.h^D.h)};function V(D){const P=D.g.length+1,R=[];for(let q=0;q<P;q++)R[q]=D.i(q)<<1|D.i(q-1)>>>31;return new c(R,D.h)}function $(D,P){const R=P>>5;P%=32;const q=D.g.length-R,L=[];for(let M=0;M<q;M++)L[M]=P>0?D.i(M+R)>>>P|D.i(M+R+1)<<32-P:D.i(M+R);return new c(L,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,iz=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=p,nl=c}).apply(typeof C2<"u"?C2:typeof self<"u"?self:typeof window<"u"?window:{});var Jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var sz,eh,az,Ig,Q1,oz,lz,cz;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jp=="object"&&Jp];for(var S=0;S<v.length;++S){var I=v[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(v,S){if(S)e:{var I=r;v=v.split(".");for(var B=0;B<v.length-1;B++){var ie=v[B];if(!(ie in I))break e;I=I[ie]}v=v[v.length-1],B=I[v],S=S(B),S!=B&&S!=null&&e(I,v,{configurable:!0,writable:!0,value:S})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(S){var I=[],B;for(B in S)Object.prototype.hasOwnProperty.call(S,B)&&I.push([B,S[B]]);return I}});var a=a||{},c=this||self;function u(v){var S=typeof v;return S=="object"&&v!=null||S=="function"}function f(v,S,I){return v.call.apply(v.bind,arguments)}function h(v,S,I){return h=f,h.apply(null,arguments)}function p(v,S){var I=Array.prototype.slice.call(arguments,1);return function(){var B=I.slice();return B.push.apply(B,arguments),v.apply(this,B)}}function g(v,S){function I(){}I.prototype=S.prototype,v.Z=S.prototype,v.prototype=new I,v.prototype.constructor=v,v.Ob=function(B,ie,de){for(var Se=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)Se[Ze-2]=arguments[Ze];return S.prototype[ie].apply(B,Se)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function x(v){const S=v.length;if(S>0){const I=Array(S);for(let B=0;B<S;B++)I[B]=v[B];return I}return[]}function E(v,S){for(let B=1;B<arguments.length;B++){const ie=arguments[B];var I=typeof ie;if(I=I!="object"?I:ie?Array.isArray(ie)?"array":I:"null",I=="array"||I=="object"&&typeof ie.length=="number"){I=v.length||0;const de=ie.length||0;v.length=I+de;for(let Se=0;Se<de;Se++)v[I+Se]=ie[Se]}else v.push(ie)}}class j{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function N(v){c.setTimeout(()=>{throw v},0)}function A(){var v=D;let S=null;return v.g&&(S=v.g,v.g=v.g.next,v.g||(v.h=null),S.next=null),S}class k{constructor(){this.h=this.g=null}add(S,I){const B=O.get();B.set(S,I),this.h?this.h.next=B:this.g=B,this.h=B}}var O=new j(()=>new C,v=>v.reset());class C{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let V,$=!1,D=new k,P=()=>{const v=Promise.resolve(void 0);V=()=>{v.then(R)}};function R(){for(var v;v=A();){try{v.h.call(v.g)}catch(I){N(I)}var S=O;S.j(v),S.h<100&&(S.h++,v.next=S.g,S.g=v)}$=!1}function q(){this.u=this.u,this.C=this.C}q.prototype.u=!1,q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},q.prototype[Symbol.dispose]=function(){this.dispose()},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(v,S){this.type=v,this.g=this.target=S,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,S=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const I=()=>{};c.addEventListener("test",I,S),c.removeEventListener("test",I,S)}catch{}return v})();function U(v){return/^[\s\xa0]*$/.test(v)}function ge(v,S){L.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,S)}g(ge,L),ge.prototype.init=function(v,S){const I=this.type=v.type,B=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=S,S=v.relatedTarget,S||(I=="mouseover"?S=v.fromElement:I=="mouseout"&&(S=v.toElement)),this.relatedTarget=S,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),H=0;function ce(v,S,I,B,ie){this.listener=v,this.proxy=null,this.src=S,this.type=I,this.capture=!!B,this.ha=ie,this.key=++H,this.da=this.fa=!1}function Y(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function we(v,S,I){for(const B in v)S.call(I,v[B],B,v)}function Q(v,S){for(const I in v)S.call(void 0,v[I],I,v)}function F(v){const S={};for(const I in v)S[I]=v[I];return S}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(v,S){let I,B;for(let ie=1;ie<arguments.length;ie++){B=arguments[ie];for(I in B)v[I]=B[I];for(let de=0;de<re.length;de++)I=re[de],Object.prototype.hasOwnProperty.call(B,I)&&(v[I]=B[I])}}function Ee(v){this.src=v,this.g={},this.h=0}Ee.prototype.add=function(v,S,I,B,ie){const de=v.toString();v=this.g[de],v||(v=this.g[de]=[],this.h++);const Se=ne(v,S,B,ie);return Se>-1?(S=v[Se],I||(S.fa=!1)):(S=new ce(S,this.src,de,!!B,ie),S.fa=I,v.push(S)),S};function J(v,S){const I=S.type;if(I in v.g){var B=v.g[I],ie=Array.prototype.indexOf.call(B,S,void 0),de;(de=ie>=0)&&Array.prototype.splice.call(B,ie,1),de&&(Y(S),v.g[I].length==0&&(delete v.g[I],v.h--))}}function ne(v,S,I,B){for(let ie=0;ie<v.length;++ie){const de=v[ie];if(!de.da&&de.listener==S&&de.capture==!!I&&de.ha==B)return ie}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),De={};function se(v,S,I,B,ie){if(Array.isArray(S)){for(let de=0;de<S.length;de++)se(v,S[de],I,B,ie);return null}return I=pr(I),v&&v[Z]?v.J(S,I,u(B)?!!B.capture:!1,ie):X(v,S,I,!1,B,ie)}function X(v,S,I,B,ie,de){if(!S)throw Error("Invalid event type");const Se=u(ie)?!!ie.capture:!!ie;let Ze=ht(v);if(Ze||(v[pe]=Ze=new Ee(v)),I=Ze.add(S,I,B,Se,de),I.proxy)return I;if(B=K(),I.proxy=B,B.src=v,B.listener=I,v.addEventListener)M||(ie=Se),ie===void 0&&(ie=!1),v.addEventListener(S.toString(),B,ie);else if(v.attachEvent)v.attachEvent(ze(S.toString()),B);else if(v.addListener&&v.removeListener)v.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return I}function K(){function v(I){return S.call(v.src,v.listener,I)}const S=ot;return v}function fe(v,S,I,B,ie){if(Array.isArray(S))for(var de=0;de<S.length;de++)fe(v,S[de],I,B,ie);else B=u(B)?!!B.capture:!!B,I=pr(I),v&&v[Z]?(v=v.i,de=String(S).toString(),de in v.g&&(S=v.g[de],I=ne(S,I,B,ie),I>-1&&(Y(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete v.g[de],v.h--)))):v&&(v=ht(v))&&(S=v.g[S.toString()],v=-1,S&&(v=ne(S,I,B,ie)),(I=v>-1?S[v]:null)&&Te(I))}function Te(v){if(typeof v!="number"&&v&&!v.da){var S=v.src;if(S&&S[Z])J(S.i,v);else{var I=v.type,B=v.proxy;S.removeEventListener?S.removeEventListener(I,B,v.capture):S.detachEvent?S.detachEvent(ze(I),B):S.addListener&&S.removeListener&&S.removeListener(B),(I=ht(S))?(J(I,v),I.h==0&&(I.src=null,S[pe]=null)):Y(v)}}}function ze(v){return v in De?De[v]:De[v]="on"+v}function ot(v,S){if(v.da)v=!0;else{S=new ge(S,this);const I=v.listener,B=v.ha||v.src;v.fa&&Te(v),v=I.call(B,S)}return v}function ht(v){return v=v[pe],v instanceof Ee?v:null}var gt="__closure_events_fn_"+(Math.random()*1e9>>>0);function pr(v){return typeof v=="function"?v:(v[gt]||(v[gt]=function(S){return v.handleEvent(S)}),v[gt])}function Rt(){q.call(this),this.i=new Ee(this),this.M=this,this.G=null}g(Rt,q),Rt.prototype[Z]=!0,Rt.prototype.removeEventListener=function(v,S,I,B){fe(this,v,S,I,B)};function kt(v,S){var I,B=v.G;if(B)for(I=[];B;B=B.G)I.push(B);if(v=v.M,B=S.type||S,typeof S=="string")S=new L(S,v);else if(S instanceof L)S.target=S.target||v;else{var ie=S;S=new L(B,v),ye(S,ie)}ie=!0;let de,Se;if(I)for(Se=I.length-1;Se>=0;Se--)de=S.g=I[Se],ie=Lr(de,B,!0,S)&&ie;if(de=S.g=v,ie=Lr(de,B,!0,S)&&ie,ie=Lr(de,B,!1,S)&&ie,I)for(Se=0;Se<I.length;Se++)de=S.g=I[Se],ie=Lr(de,B,!1,S)&&ie}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var v=this.i;for(const S in v.g){const I=v.g[S];for(let B=0;B<I.length;B++)Y(I[B]);delete v.g[S],v.h--}}this.G=null},Rt.prototype.J=function(v,S,I,B){return this.i.add(String(v),S,!1,I,B)},Rt.prototype.K=function(v,S,I,B){return this.i.add(String(v),S,!0,I,B)};function Lr(v,S,I,B){if(S=v.i.g[String(S)],!S)return!0;S=S.concat();let ie=!0;for(let de=0;de<S.length;++de){const Se=S[de];if(Se&&!Se.da&&Se.capture==I){const Ze=Se.listener,yn=Se.ha||Se.src;Se.fa&&J(v.i,Se),ie=Ze.call(yn,B)!==!1&&ie}}return ie&&!B.defaultPrevented}function me(v,S){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(v,S||0)}function Re(v){v.g=me(()=>{v.g=null,v.i&&(v.i=!1,Re(v))},v.l);const S=v.h;v.h=null,v.m.apply(null,S)}class Be extends q{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(v){q.call(this),this.h=v,this.g={}}g(Ke,q);var Vt=[];function zn(v){we(v.g,function(S,I){this.g.hasOwnProperty(I)&&Te(S)},v),v.g={}}Ke.prototype.N=function(){Ke.Z.N.call(this),zn(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=c.JSON.stringify,so=c.JSON.parse,Ur=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Hi(){}function Gc(){}var on={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function At(){L.call(this,"d")}g(At,L);function Vr(){L.call(this,"c")}g(Vr,L);var en={},Sl=null;function ao(){return Sl=Sl||new Rt}en.Ia="serverreachability";function Kc(v){L.call(this,en.Ia,v)}g(Kc,L);function bi(v){const S=ao();kt(S,new Kc(S))}en.STAT_EVENT="statevent";function na(v,S){L.call(this,en.STAT_EVENT,v),this.stat=S}g(na,L);function ln(v){const S=ao();kt(S,new na(S,v))}en.Ja="timingevent";function xi(v,S){L.call(this,en.Ja,v),this.size=S}g(xi,L);function gr(v,S){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},S)}function ti(){this.g=!0}ti.prototype.ua=function(){this.g=!1};function te(v,S,I,B,ie,de){v.info(function(){if(v.g)if(de){var Se="",Ze=de.split("&");for(let wt=0;wt<Ze.length;wt++){var yn=Ze[wt].split("=");if(yn.length>1){const Yt=yn[0];yn=yn[1];const Ni=Yt.split("_");Se=Ni.length>=2&&Ni[1]=="type"?Se+(Yt+"="+yn+"&"):Se+(Yt+"=redacted&")}}}else Se=null;else Se=de;return"XMLHTTP REQ ("+B+") [attempt "+ie+"]: "+S+`
`+I+`
`+Se})}function Ve(v,S,I,B,ie,de,Se){v.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ie+"]: "+S+`
`+I+`
`+de+" "+Se})}function vt(v,S,I,B){v.info(function(){return"XMLHTTP TEXT ("+S+"): "+Al(v,I)+(B?" "+B:"")})}function Fn(v,S){v.info(function(){return"TIMEOUT: "+S})}ti.prototype.info=function(){};function Al(v,S){if(!v.g)return S;if(!S)return null;try{const de=JSON.parse(S);if(de){for(v=0;v<de.length;v++)if(Array.isArray(de[v])){var I=de[v];if(!(I.length<2)){var B=I[1];if(Array.isArray(B)&&!(B.length<1)){var ie=B[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Se=1;Se<B.length;Se++)B[Se]=""}}}}return qr(de)}catch{return S}}var _i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ld;function Tl(){}g(Tl,Hi),Tl.prototype.g=function(){return new XMLHttpRequest},Ld=new Tl;function ra(v){return encodeURIComponent(String(v))}function Cm(v){var S=1;v=v.split(":");const I=[];for(;S>0&&v.length;)I.push(v.shift()),S--;return v.length&&I.push(v.join(":")),I}function Gi(v,S,I,B){this.j=v,this.i=S,this.l=I,this.S=B||1,this.V=new Ke(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ki}function Ki(){this.i=null,this.g="",this.h=!1}var En={},Hn={};function ps(v,S,I){v.M=1,v.A=Cl(Sn(S)),v.u=I,v.R=!0,Qc(v,null)}function Qc(v,S){v.F=Date.now(),gs(v),v.B=Sn(v.A);var I=v.B,B=v.S;Array.isArray(B)||(B=[String(B)]),Jc(I.i,"t",B),v.C=0,I=v.j.L,v.h=new Ki,v.g=Fm(v.j,I?S:null,!v.u),v.P>0&&(v.O=new Be(h(v.Y,v,v.g),v.P)),S=v.V,I=v.g,B=v.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(Vt[0]=ie.toString()),ie=Vt);for(let de=0;de<ie.length;de++){const Se=se(I,ie[de],B||S.handleEvent,!1,S.h||S);if(!Se)break;S.g[Se.key]=Se}S=v.J?F(v.J):{},v.u?(v.v||(v.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,S)):(v.v="GET",v.g.ea(v.B,v.v,null,S)),bi(),te(v.i,v.v,v.B,v.l,v.S,v.u)}Gi.prototype.ba=function(v){v=v.target;const S=this.O;S&&Yi(v)==3?S.j():this.Y(v)},Gi.prototype.Y=function(v){try{if(v==this.g)e:{const Ze=Yi(this.g),yn=this.g.ya(),wt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||rr(this.g)))){this.K||Ze!=4||yn==7||(yn==8||wt<=0?bi(3):bi(2)),vs(this);var S=this.g.ca();this.X=S;var I=I0(this);if(this.o=S==200,Ve(this.i,this.v,this.B,this.l,this.S,Ze,S),this.o){if(this.U&&!this.L){t:{if(this.g){var B,ie=this.g;if((B=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(B)){var de=B;break t}}de=null}if(v=de)vt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ys(this,v);else{this.o=!1,this.m=3,ln(12),ni(this),wi(this);break e}}if(this.R){v=!0;let Yt;for(;!this.K&&this.C<I.length;)if(Yt=Im(this,I),Yt==Hn){Ze==4&&(this.m=4,ln(14),v=!1),vt(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==En){this.m=4,ln(15),vt(this.i,this.l,I,"[Invalid Chunk]"),v=!1;break}else vt(this.i,this.l,Yt,null),ys(this,Yt);if(Om(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||I.length!=0||this.h.h||(this.m=1,ln(16),v=!1),this.o=this.o&&v,!v)vt(this.i,this.l,I,"[Invalid Chunked Response]"),ni(this),wi(this);else if(I.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Zd(Se),Se.P=!0,ln(11))}}else vt(this.i,this.l,I,null),ys(this,I);Ze==4&&ni(this),this.o&&!this.K&&(Ze==4?Um(this.j,this):(this.o=!1,gs(this)))}else sa(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,ln(12)):(this.m=0,ln(13)),ni(this),wi(this)}}}catch{}};function I0(v){if(!Om(v))return v.g.la();const S=rr(v.g);if(S==="")return"";let I="";const B=S.length,ie=Yi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return ni(v),wi(v),"";v.h.i=new c.TextDecoder}for(let de=0;de<B;de++)v.h.h=!0,I+=v.h.i.decode(S[de],{stream:!(ie&&de==B-1)});return S.length=0,v.h.g+=I,v.C=0,v.h.g}function Om(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Im(v,S){var I=v.C,B=S.indexOf(`
`,I);return B==-1?Hn:(I=Number(S.substring(I,B)),isNaN(I)?En:(B+=1,B+I>S.length?Hn:(S=S.slice(B,B+I),v.C=B+I,S)))}Gi.prototype.cancel=function(){this.K=!0,ni(this)};function gs(v){v.T=Date.now()+v.H,Wc(v,v.H)}function Wc(v,S){if(v.D!=null)throw Error("WatchDog timer not null");v.D=gr(h(v.aa,v),S)}function vs(v){v.D&&(c.clearTimeout(v.D),v.D=null)}Gi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(Fn(this.i,this.B),this.M!=2&&(bi(),ln(17)),ni(this),this.m=2,wi(this)):Wc(this,this.T-v)};function wi(v){v.j.I==0||v.K||Um(v.j,v)}function ni(v){vs(v);var S=v.O;S&&typeof S.dispose=="function"&&S.dispose(),v.O=null,zn(v.V),v.g&&(S=v.g,v.g=null,S.abort(),S.dispose())}function ys(v,S){try{var I=v.j;if(I.I!=0&&(I.g==v||xs(I.h,v))){if(!v.L&&xs(I.h,v)&&I.I==3){try{var B=I.Ba.g.parse(S)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ie=B;if(ie[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<v.F)ru(I),po(I);else break e;Ml(I),ln(18)}}else I.xa=ie[1],0<I.xa-I.K&&ie[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=gr(h(I.Va,I),6e3));bs(I.h)<=1&&I.ta&&(I.ta=void 0)}else Ss(I,11)}else if((v.L||I.g==v)&&ru(I),!U(S))for(ie=I.Ba.g.parse(S),S=0;S<ie.length;S++){let wt=ie[S];const Yt=wt[0];if(!(Yt<=I.K))if(I.K=Yt,wt=wt[1],I.I==2)if(wt[0]=="c"){I.M=wt[1],I.ba=wt[2];const Ni=wt[3];Ni!=null&&(I.ka=Ni,I.j.info("VER="+I.ka));const As=wt[4];As!=null&&(I.za=As,I.j.info("SVER="+I.za));const Xi=wt[5];Xi!=null&&typeof Xi=="number"&&Xi>0&&(B=1.5*Xi,I.O=B,I.j.info("backChannelRequestTimeoutMs_="+B)),B=I;const Ji=v.g;if(Ji){const zl=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var de=B.h;de.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(Vd(de,de.h),de.h=null))}if(B.G){const iu=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(B.wa=iu,Tt(B.J,B.G,iu))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-v.F,I.j.info("Handshake RTT: "+I.T+"ms")),B=I;var Se=v;if(B.na=$m(B,B.L?B.ba:null,B.W),Se.L){Bd(B.h,Se);var Ze=Se,yn=B.O;yn&&(Ze.H=yn),Ze.D&&(vs(Ze),gs(Ze)),B.g=Se}else Lm(B);I.i.length>0&&Ns(I)}else wt[0]!="stop"&&wt[0]!="close"||Ss(I,7);else I.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Ss(I,7):Xd(I):wt[0]!="noop"&&I.l&&I.l.qa(wt),I.A=0)}}bi(4)}catch{}}var Nn=class{constructor(v,S){this.g=v,this.map=S}};function qd(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ud(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function bs(v){return v.h?1:v.g?v.g.size:0}function xs(v,S){return v.h?v.h==S:v.g?v.g.has(S):!1}function Vd(v,S){v.g?v.g.add(S):v.h=S}function Bd(v,S){v.h&&v.h==S?v.h=null:v.g&&v.g.has(S)&&v.g.delete(S)}qd.prototype.cancel=function(){if(this.i=$d(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function $d(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let S=v.i;for(const I of v.g.values())S=S.concat(I.G);return S}return x(v.i)}var Pm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yc(v,S){if(v){v=v.split("&");for(let I=0;I<v.length;I++){const B=v[I].indexOf("=");let ie,de=null;B>=0?(ie=v[I].substring(0,B),de=v[I].substring(B+1)):ie=v[I],S(ie,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function ri(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;v instanceof ri?(this.l=v.l,Gn(this,v.j),this.o=v.o,this.g=v.g,oo(this,v.u),this.h=v.h,Fd(this,Mm(v.i)),this.m=v.m):v&&(S=String(v).match(Pm))?(this.l=!1,Gn(this,S[1]||"",!0),this.o=_s(S[2]||""),this.g=_s(S[3]||"",!0),oo(this,S[4]),this.h=_s(S[5]||"",!0),Fd(this,S[6]||"",!0),this.m=_s(S[7]||"")):(this.l=!1,this.i=new co(null,this.l))}ri.prototype.toString=function(){const v=[];var S=this.j;S&&v.push(Ol(S,Xc,!0),":");var I=this.g;return(I||S=="file")&&(v.push("//"),(S=this.o)&&v.push(Ol(S,Xc,!0),"@"),v.push(ra(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&v.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&v.push("/"),v.push(Ol(I,I.charAt(0)=="/"?Hd:Rm,!0))),(I=this.i.toString())&&v.push("?",I),(I=this.m)&&v.push("#",Ol(I,km)),v.join("")},ri.prototype.resolve=function(v){const S=Sn(this);let I=!!v.j;I?Gn(S,v.j):I=!!v.o,I?S.o=v.o:I=!!v.g,I?S.g=v.g:I=v.u!=null;var B=v.h;if(I)oo(S,v.u);else if(I=!!v.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var ie=S.h.lastIndexOf("/");ie!=-1&&(B=S.h.slice(0,ie+1)+B)}if(ie=B,ie==".."||ie==".")B="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){B=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const de=[];for(let Se=0;Se<ie.length;){const Ze=ie[Se++];Ze=="."?B&&Se==ie.length&&de.push(""):Ze==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),B&&Se==ie.length&&de.push("")):(de.push(Ze),B=!0)}B=de.join("/")}else B=ie}return I?S.h=B:I=v.i.toString()!=="",I?Fd(S,Mm(v.i)):I=!!v.m,I&&(S.m=v.m),S};function Sn(v){return new ri(v)}function Gn(v,S,I){v.j=I?_s(S,!0):S,v.j&&(v.j=v.j.replace(/:$/,""))}function oo(v,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);v.u=S}else v.u=null}function Fd(v,S,I){S instanceof co?(v.i=S,Zc(v.i,v.l)):(I||(S=Ol(S,lo)),v.i=new co(S,v.l))}function Tt(v,S,I){v.i.set(S,I)}function Cl(v){return Tt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function _s(v,S){return v?S?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Ol(v,S,I){return typeof v=="string"?(v=encodeURI(v).replace(S,Br),I&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Br(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Xc=/[#\/\?@]/g,Rm=/[#\?:]/g,Hd=/[#\?]/g,lo=/[#\?@]/g,km=/#/g;function co(v,S){this.h=this.g=null,this.i=v||null,this.j=!!S}function $r(v){v.g||(v.g=new Map,v.h=0,v.i&&Yc(v.i,function(S,I){v.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}t=co.prototype,t.add=function(v,S){$r(this),this.i=null,v=uo(this,v);let I=this.g.get(v);return I||this.g.set(v,I=[]),I.push(S),this.h+=1,this};function Dm(v,S){$r(v),S=uo(v,S),v.g.has(S)&&(v.i=null,v.h-=v.g.get(S).length,v.g.delete(S))}function Gd(v,S){return $r(v),S=uo(v,S),v.g.has(S)}t.forEach=function(v,S){$r(this),this.g.forEach(function(I,B){I.forEach(function(ie){v.call(S,ie,B,this)},this)},this)};function Kd(v,S){$r(v);let I=[];if(typeof S=="string")Gd(v,S)&&(I=I.concat(v.g.get(uo(v,S))));else for(v=Array.from(v.g.values()),S=0;S<v.length;S++)I=I.concat(v[S]);return I}t.set=function(v,S){return $r(this),this.i=null,v=uo(this,v),Gd(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[S]),this.h+=1,this},t.get=function(v,S){return v?(v=Kd(this,v),v.length>0?String(v[0]):S):S};function Jc(v,S,I){Dm(v,S),I.length>0&&(v.i=null,v.g.set(uo(v,S),x(I)),v.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],S=Array.from(this.g.keys());for(let B=0;B<S.length;B++){var I=S[B];const ie=ra(I);I=Kd(this,I);for(let de=0;de<I.length;de++){let Se=ie;I[de]!==""&&(Se+="="+ra(I[de])),v.push(Se)}}return this.i=v.join("&")};function Mm(v){const S=new co;return S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),S}function uo(v,S){return S=String(S),v.j&&(S=S.toLowerCase()),S}function Zc(v,S){S&&!v.j&&($r(v),v.i=null,v.g.forEach(function(I,B){const ie=B.toLowerCase();B!=ie&&(Dm(this,B),Jc(this,ie,I))},v)),v.j=S}function Qi(v,S){const I=new ti;if(c.Image){const B=new Image;B.onload=p(ji,I,"TestLoadImage: loaded",!0,S,B),B.onerror=p(ji,I,"TestLoadImage: error",!1,S,B),B.onabort=p(ji,I,"TestLoadImage: abort",!1,S,B),B.ontimeout=p(ji,I,"TestLoadImage: timeout",!1,S,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=v}else S(!1)}function Qd(v,S){const I=new ti,B=new AbortController,ie=setTimeout(()=>{B.abort(),ji(I,"TestPingServer: timeout",!1,S)},1e4);fetch(v,{signal:B.signal}).then(de=>{clearTimeout(ie),de.ok?ji(I,"TestPingServer: ok",!0,S):ji(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ie),ji(I,"TestPingServer: error",!1,S)})}function ji(v,S,I,B,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),B(I)}catch{}}function fo(){this.g=new Ur}function ws(v){this.i=v.Sb||null,this.h=v.ab||!1}g(ws,Hi),ws.prototype.g=function(){return new Il(this.i,this.h)};function Il(v,S){Rt.call(this),this.H=v,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Il,Rt),t=Il.prototype,t.open=function(v,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=S,this.readyState=1,Wi(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(S.body=v),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ho(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eu(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function eu(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var S=v.value?v.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!v.done}))&&(this.response=this.responseText+=S)}v.done?ho(this):Wi(this),this.readyState==3&&eu(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,ho(this))},t.Na=function(v){this.g&&(this.response=v,ho(this))},t.ga=function(){this.g&&ho(this)};function ho(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Wi(v)}t.setRequestHeader=function(v,S){this.A.append(v,S)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,v.push(I[0]+": "+I[1]),I=S.next();return v.join(`\r
`)};function Wi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ei(v){let S="";return we(v,function(I,B){S+=B,S+=":",S+=I,S+=`\r
`}),S}function Pl(v,S,I){e:{for(B in I){var B=!1;break e}B=!0}B||(I=Ei(I),typeof v=="string"?I!=null&&ra(I):Tt(v,S,I))}function Dt(v){Rt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Dt,Rt);var js=/^https?$/i,Wd=["POST","PUT"];t=Dt.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,S,I,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);S=S?S.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ld.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(v),!0),this.B=!1}catch(de){Rl(this,de);return}if(v=I||"",I=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ie in B)I.set(ie,B[ie]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const de of B.keys())I.set(de,B.get(de));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(I.keys()).find(de=>de.toLowerCase()=="content-type"),ie=c.FormData&&v instanceof c.FormData,!(Array.prototype.indexOf.call(Wd,S,void 0)>=0)||B||ie||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Se]of I)this.g.setRequestHeader(de,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(de){Rl(this,de)}};function Rl(v,S){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=S,v.o=5,Yd(v),ia(v)}function Yd(v){v.A||(v.A=!0,kt(v,"complete"),kt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,kt(this,"complete"),kt(this,"abort"),ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ia(this,!0)),Dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?kl(this):this.Xa())},t.Xa=function(){kl(this)};function kl(v){if(v.h&&typeof a<"u"){if(v.v&&Yi(v)==4)setTimeout(v.Ca.bind(v),0);else if(kt(v,"readystatechange"),Yi(v)==4){v.h=!1;try{const de=v.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var B;if(B=de===0){let Se=String(v.D).match(Pm)[1]||null;!Se&&c.self&&c.self.location&&(Se=c.self.location.protocol.slice(0,-1)),B=!js.test(Se?Se.toLowerCase():"")}I=B}if(I)kt(v,"complete"),kt(v,"success");else{v.o=6;try{var ie=Yi(v)>2?v.g.statusText:""}catch{ie=""}v.l=ie+" ["+v.ca()+"]",Yd(v)}}finally{ia(v)}}}}function ia(v,S){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const I=v.g;v.g=null,S||kt(v,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yi(v){return v.g?v.g.readyState:0}t.ca=function(){try{return Yi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var S=this.g.responseText;return v&&S.indexOf(v)==0&&(S=S.substring(v.length)),so(S)}};function rr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function sa(v){const S={};v=(v.g&&Yi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<v.length;B++){if(U(v[B]))continue;var I=Cm(v[B]);const ie=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const de=S[ie]||[];S[ie]=de,de.push(I)}Q(S,function(B){return B.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(v,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[v]||S}function mo(v){this.za=0,this.i=[],this.j=new ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Es("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Es("baseRetryDelayMs",5e3,v),this.Za=Es("retryDelaySeedMs",1e4,v),this.Ta=Es("forwardChannelMaxRetries",2,v),this.va=Es("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new qd(v&&v.concurrentRequestLimit),this.Ba=new fo,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=mo.prototype,t.ka=8,t.I=1,t.connect=function(v,S,I,B){ln(0),this.W=v,this.H=S||{},I&&B!==void 0&&(this.H.OSID=I,this.H.OAID=B),this.F=this.X,this.J=$m(this,null,this.W),Ns(this)};function Xd(v){if(tu(v),v.I==3){var S=v.V++,I=Sn(v.J);if(Tt(I,"SID",v.M),Tt(I,"RID",S),Tt(I,"TYPE","terminate"),Dl(v,I),S=new Gi(v,v.j,S),S.M=2,S.A=Cl(Sn(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=S.A,I=!0),I||(S.g=Fm(S.j,null),S.g.ea(S.A)),S.F=Date.now(),gs(S)}Bm(v)}function po(v){v.g&&(Zd(v),v.g.cancel(),v.g=null)}function tu(v){po(v),v.v&&(c.clearTimeout(v.v),v.v=null),ru(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&c.clearTimeout(v.m),v.m=null)}function Ns(v){if(!Ud(v.h)&&!v.m){v.m=!0;var S=v.Ea;V||P(),$||(V(),$=!0),D.add(S,v),v.D=0}}function nu(v,S){return bs(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=S.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=gr(h(v.Ea,v,S),Vm(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const ie=new Gi(this,this.j,v);let de=this.o;if(this.U&&(de?(de=F(de),ye(de,this.U)):de=this.U),this.u!==null||this.R||(ie.J=de,de=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var B=this.i[I];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(S+=B,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=zm(this,ie,S),I=Sn(this.J),Tt(I,"RID",v),Tt(I,"CVER",22),this.G&&Tt(I,"X-HTTP-Session-Id",this.G),Dl(this,I),de&&(this.R?S="headers="+ra(Ei(de))+"&"+S:this.u&&Pl(I,this.u,de)),Vd(this.h,ie),this.Ra&&Tt(I,"TYPE","init"),this.S?(Tt(I,"$req",S),Tt(I,"SID","null"),ie.U=!0,ps(ie,I,null)):ps(ie,I,S),this.I=2}}else this.I==3&&(v?Jd(this,v):this.i.length==0||Ud(this.h)||Jd(this))};function Jd(v,S){var I;S?I=S.l:I=v.V++;const B=Sn(v.J);Tt(B,"SID",v.M),Tt(B,"RID",I),Tt(B,"AID",v.K),Dl(v,B),v.u&&v.o&&Pl(B,v.u,v.o),I=new Gi(v,v.j,I,v.D+1),v.u===null&&(I.J=v.o),S&&(v.i=S.G.concat(v.i)),S=zm(v,I,1e3),I.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Vd(v.h,I),ps(I,B,S)}function Dl(v,S){v.H&&we(v.H,function(I,B){Tt(S,B,I)}),v.l&&we({},function(I,B){Tt(S,B,I)})}function zm(v,S,I){I=Math.min(v.i.length,I);const B=v.l?h(v.l.Ka,v.l,v):null;e:{var ie=v.i;let Ze=-1;for(;;){const yn=["count="+I];Ze==-1?I>0?(Ze=ie[0].g,yn.push("ofs="+Ze)):Ze=0:yn.push("ofs="+Ze);let wt=!0;for(let Yt=0;Yt<I;Yt++){var de=ie[Yt].g;const Ni=ie[Yt].map;if(de-=Ze,de<0)Ze=Math.max(0,ie[Yt].g-100),wt=!1;else try{de="req"+de+"_"||"";try{var Se=Ni instanceof Map?Ni:Object.entries(Ni);for(const[As,Xi]of Se){let Ji=Xi;u(Xi)&&(Ji=qr(Xi)),yn.push(de+As+"="+encodeURIComponent(Ji))}}catch(As){throw yn.push(de+"type="+encodeURIComponent("_badmap")),As}}catch{B&&B(Ni)}}if(wt){Se=yn.join("&");break e}}Se=void 0}return v=v.i.splice(0,I),S.G=v,Se}function Lm(v){if(!v.g&&!v.v){v.Y=1;var S=v.Da;V||P(),$||(V(),$=!0),D.add(S,v),v.A=0}}function Ml(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=gr(h(v.Da,v),Vm(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,qm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=gr(h(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ln(10),po(this),qm(this))};function Zd(v){v.B!=null&&(c.clearTimeout(v.B),v.B=null)}function qm(v){v.g=new Gi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var S=Sn(v.na);Tt(S,"RID","rpc"),Tt(S,"SID",v.M),Tt(S,"AID",v.K),Tt(S,"CI",v.F?"0":"1"),!v.F&&v.ia&&Tt(S,"TO",v.ia),Tt(S,"TYPE","xmlhttp"),Dl(v,S),v.u&&v.o&&Pl(S,v.u,v.o),v.O&&(v.g.H=v.O);var I=v.g;v=v.ba,I.M=1,I.A=Cl(Sn(S)),I.u=null,I.R=!0,Qc(I,v)}t.Va=function(){this.C!=null&&(this.C=null,po(this),Ml(this),ln(19))};function ru(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function Um(v,S){var I=null;if(v.g==S){ru(v),Zd(v),v.g=null;var B=2}else if(xs(v.h,S))I=S.G,Bd(v.h,S),B=1;else return;if(v.I!=0){if(S.o)if(B==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var ie=v.D;B=ao(),kt(B,new xi(B,I)),Ns(v)}else Lm(v);else if(ie=S.m,ie==3||ie==0&&S.X>0||!(B==1&&nu(v,S)||B==2&&Ml(v)))switch(I&&I.length>0&&(S=v.h,S.i=S.i.concat(I)),ie){case 1:Ss(v,5);break;case 4:Ss(v,10);break;case 3:Ss(v,6);break;default:Ss(v,2)}}}function Vm(v,S){let I=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(I*=2),I*S}function Ss(v,S){if(v.j.info("Error code "+S),S==2){var I=h(v.bb,v),B=v.Ua;const ie=!B;B=new ri(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gn(B,"https"),Cl(B),ie?Qi(B.toString(),I):Qd(B.toString(),I)}else ln(2);v.I=0,v.l&&v.l.pa(S),Bm(v),tu(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function Bm(v){if(v.I=0,v.ja=[],v.l){const S=$d(v.h);(S.length!=0||v.i.length!=0)&&(E(v.ja,S),E(v.ja,v.i),v.h.i.length=0,x(v.i),v.i.length=0),v.l.oa()}}function $m(v,S,I){var B=I instanceof ri?Sn(I):new ri(I);if(B.g!="")S&&(B.g=S+"."+B.g),oo(B,B.u);else{var ie=c.location;B=ie.protocol,S=S?S+"."+ie.hostname:ie.hostname,ie=+ie.port;const de=new ri(null);B&&Gn(de,B),S&&(de.g=S),ie&&oo(de,ie),I&&(de.h=I),B=de}return I=v.G,S=v.wa,I&&S&&Tt(B,I,S),Tt(B,"VER",v.ka),Dl(v,B),B}function Fm(v,S,I){if(S&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=v.Aa&&!v.ma?new Dt(new ws({ab:I})):new Dt(v.ma),S.Fa(v.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hm(){}t=Hm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function go(){}go.prototype.g=function(v,S){return new Nr(v,S)};function Nr(v,S){Rt.call(this),this.g=new mo(S),this.l=v,this.h=S&&S.messageUrlParams||null,v=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(v?v["X-WebChannel-Content-Type"]=S.messageContentType:v={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(v?v["X-WebChannel-Client-Profile"]=S.sa:v={"X-WebChannel-Client-Profile":S.sa}),this.g.U=v,(v=S&&S.Qb)&&!U(v)&&(this.g.u=v),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!U(S)&&(this.g.G=S,v=this.h,v!==null&&S in v&&(v=this.h,S in v&&delete v[S])),this.j=new aa(this)}g(Nr,Rt),Nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nr.prototype.close=function(){Xd(this.g)},Nr.prototype.o=function(v){var S=this.g;if(typeof v=="string"){var I={};I.__data__=v,v=I}else this.v&&(I={},I.__data__=qr(v),v=I);S.i.push(new Nn(S.Ya++,v)),S.I==3&&Ns(S)},Nr.prototype.N=function(){this.g.l=null,delete this.j,Xd(this.g),delete this.g,Nr.Z.N.call(this)};function Gm(v){At.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var S=v.__sm__;if(S){e:{for(const I in S){v=I;break e}v=void 0}(this.i=v)&&(v=this.i,S=S!==null&&v in S?S[v]:void 0),this.data=S}else this.data=v}g(Gm,At);function Km(){Vr.call(this),this.status=1}g(Km,Vr);function aa(v){this.g=v}g(aa,Hm),aa.prototype.ra=function(){kt(this.g,"a")},aa.prototype.qa=function(v){kt(this.g,new Gm(v))},aa.prototype.pa=function(v){kt(this.g,new Km)},aa.prototype.oa=function(){kt(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,Nr.prototype.send=Nr.prototype.o,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,cz=function(){return new go},lz=function(){return ao()},oz=en,Q1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,Ig=_i,zd.COMPLETE="complete",az=zd,Gc.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,eh=Gc,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,sz=Dt}).apply(typeof Jp<"u"?Jp:typeof self<"u"?self:typeof window<"u"?window:{});let xr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");let wd="12.8.0";function SF(t){wd=t}const jc=new Ej("@firebase/firestore");function Lu(){return jc.logLevel}function Ce(t,...e){if(jc.logLevel<=ut.DEBUG){const n=e.map(Dj);jc.debug(`Firestore (${wd}): ${t}`,...n)}}function La(t,...e){if(jc.logLevel<=ut.ERROR){const n=e.map(Dj);jc.error(`Firestore (${wd}): ${t}`,...n)}}function nd(t,...e){if(jc.logLevel<=ut.WARN){const n=e.map(Dj);jc.warn(`Firestore (${wd}): ${t}`,...n)}}function Dj(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,uz(t,r,n)}function uz(t,e,n){let r=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw La(r),new Error(r)}function St(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||uz(e,i,r)}function Je(t,e){return t}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends ta{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ra{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class dz{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xr.UNAUTHENTICATED)))}shutdown(){}}class TF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class CF{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){St(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new Ra;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ra,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},u=f=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ra)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string",31837,{l:r}),new dz(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new xr(e)}}class OF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class IF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new OF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,di(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){St(this.o===void 0,3512);const r=a=>{a.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new O2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(St(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new O2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function RF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Mj{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=RF(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function dt(t,e){return t<e?-1:t>e?1:0}function W1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return qx(i)===qx(a)?dt(i,a):qx(i)?1:-1}return dt(t.length,e.length)}const kF=55296,DF=57343;function qx(t){const e=t.charCodeAt(0);return e>=kF&&e<=DF}function rd(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const I2="__name__";class Ms{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Ms.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return dt(e.length,n.length)}static compareSegments(e,n){const r=Ms.isNumericId(e),i=Ms.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):W1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nl.fromString(e.substring(4,e.length-2))}}class Gt extends Ms{construct(e,n,r){return new Gt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Gt(n)}static emptyPath(){return new Gt([])}}const MF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends Ms{construct(e,n,r){return new dr(e,n,r)}static isValidIdentifier(e){return MF.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===I2}static keyField(){return new dr([I2])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ae(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Ae(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ae(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(a(),i++)}if(a(),c)throw new Ae(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(n)}static emptyPath(){return new dr([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Gt.fromString(e))}static fromName(e){return new Ue(Gt.fromString(e).popFirst(5))}static empty(){return new Ue(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Gt(e.slice()))}}function fz(t,e,n){if(!n)throw new Ae(be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zF(t,e,n,r){if(e===!0&&r===!0)throw new Ae(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function P2(t){if(!Ue.isDocumentKey(t))throw new Ae(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function R2(t){if(Ue.isDocumentKey(t))throw new Ae(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hz(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ge(12329,{type:typeof t})}function Or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vy(t);throw new Ae(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LF(t,e){if(e<=0)throw new Ae(be.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function kn(t,e){const n={typeString:t};return e&&(n.value=e),n}function em(t,e){if(!hz(t))throw new Ae(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ae(be.INVALID_ARGUMENT,n);return!0}const k2=-62135596800,D2=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*D2);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<k2)throw new Ae(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/D2}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(em(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:kn("string",Ye._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Ye(0,0))}static max(){return new We(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wh=-1;function qF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=We.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new ol(i,Ue.empty(),e)}function UF(t){return new ol(t.readTime,t.key,wh)}class ol{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ol(We.min(),Ue.empty(),wh)}static max(){return new ol(We.max(),Ue.empty(),wh)}}function VF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ue.comparator(t.documentKey,e.documentKey),n!==0?n:dt(t.largestBatchId,e.largestBatchId))}const BF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $F{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jd(t){if(t.code!==be.FAILED_PRECONDITION||t.message!==BF)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new je(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof je?n:je.resolve(n)}catch(n){return je.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):je.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):je.reject(n)}static resolve(e){return new je(((n,r)=>{n(e)}))}static reject(e){return new je(((n,r)=>{r(e)}))}static waitFor(e){return new je(((n,r)=>{let i=0,a=0,c=!1;e.forEach((u=>{++i,u.next((()=>{++a,c&&a===i&&n()}),(f=>r(f)))})),c=!0,a===i&&n()}))}static or(e){let n=je.resolve(!1);for(const r of e)n=n.next((i=>i?je.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new je(((r,i)=>{const a=e.length,c=new Array(a);let u=0;for(let f=0;f<a;f++){const h=f;n(e[h]).next((p=>{c[h]=p,++u,u===a&&r(c)}),(p=>i(p)))}}))}static doWhile(e,n){return new je(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function FF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ed(t){return t.name==="IndexedDbTransactionError"}class yy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yy.ce=-1;const zj=-1;function by(t){return t==null}function ev(t){return t===0&&1/t==-1/0}function HF(t){return typeof t=="number"&&Number.isInteger(t)&&!ev(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const mz="";function GF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=M2(e)),e=KF(t.get(n),e);return M2(e)}function KF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case mz:n+="";break;default:n+=a}}return n}function M2(t){return t+mz+""}function z2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _l(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class rn{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new rn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zp(this.root,e,this.comparator,!0)}}class Zp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=a??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new ur(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Un{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new L2(this.data.getIterator())}getIteratorFrom(e){return new L2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Un(this.comparator);return n.data=e,n}}class L2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hi{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Un(dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rd(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class gz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gz("Invalid base64 string: "+a):a}})(e);return new hr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new hr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hr.EMPTY_BYTE_STRING=new hr("");const QF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ll(t){if(St(!!t,39018),typeof t=="string"){let e=0;const n=QF.exec(t);if(St(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(t.seconds),nanos:_n(t.nanos)}}function _n(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cl(t){return typeof t=="string"?hr.fromBase64String(t):hr.fromUint8Array(t)}const vz="server_timestamp",yz="__type__",bz="__previous_value__",xz="__local_write_time__";function Lj(t){return(t?.mapValue?.fields||{})[yz]?.stringValue===vz}function xy(t){const e=t.mapValue.fields[bz];return Lj(e)?xy(e):e}function jh(t){const e=ll(t.mapValue.fields[xz].timestampValue);return new Ye(e.seconds,e.nanos)}class WF{constructor(e,n,r,i,a,c,u,f,h,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p,this.apiKey=g}}const tv="(default)";class Eh{constructor(e,n){this.projectId=e,this.database=n||tv}static empty(){return new Eh("","")}get isDefaultDatabase(){return this.database===tv}isEqual(e){return e instanceof Eh&&e.projectId===this.projectId&&e.database===this.database}}function YF(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ae(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(t.options.projectId,e)}const _z="__type__",XF="__max__",eg={mapValue:{}},wz="__vector__",nv="value";function ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lj(t)?4:ZF(t)?9007199254740991:JF(t)?10:11:Ge(28295,{value:t})}function Qs(t,e){if(t===e)return!0;const n=ul(t);if(n!==ul(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jh(t).isEqual(jh(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=ll(i.timestampValue),u=ll(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return cl(i.bytesValue).isEqual(cl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return _n(i.geoPointValue.latitude)===_n(a.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return _n(i.integerValue)===_n(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=_n(i.doubleValue),u=_n(a.doubleValue);return c===u?ev(c)===ev(u):isNaN(c)&&isNaN(u)}return!1})(t,e);case 9:return rd(t.arrayValue.values||[],e.arrayValue.values||[],Qs);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},u=a.mapValue.fields||{};if(z2(c)!==z2(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!Qs(c[f],u[f])))return!1;return!0})(t,e);default:return Ge(52216,{left:t})}}function Nh(t,e){return(t.values||[]).find((n=>Qs(n,e)))!==void 0}function id(t,e){if(t===e)return 0;const n=ul(t),r=ul(e);if(n!==r)return dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(t.booleanValue,e.booleanValue);case 2:return(function(a,c){const u=_n(a.integerValue||a.doubleValue),f=_n(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(t,e);case 3:return q2(t.timestampValue,e.timestampValue);case 4:return q2(jh(t),jh(e));case 5:return W1(t.stringValue,e.stringValue);case 6:return(function(a,c){const u=cl(a),f=cl(c);return u.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(a,c){const u=a.split("/"),f=c.split("/");for(let h=0;h<u.length&&h<f.length;h++){const p=dt(u[h],f[h]);if(p!==0)return p}return dt(u.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,c){const u=dt(_n(a.latitude),_n(c.latitude));return u!==0?u:dt(_n(a.longitude),_n(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return U2(t.arrayValue,e.arrayValue);case 10:return(function(a,c){const u=a.fields||{},f=c.fields||{},h=u[nv]?.arrayValue,p=f[nv]?.arrayValue,g=dt(h?.values?.length||0,p?.values?.length||0);return g!==0?g:U2(h,p)})(t.mapValue,e.mapValue);case 11:return(function(a,c){if(a===eg.mapValue&&c===eg.mapValue)return 0;if(a===eg.mapValue)return 1;if(c===eg.mapValue)return-1;const u=a.fields||{},f=Object.keys(u),h=c.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let g=0;g<f.length&&g<p.length;++g){const y=W1(f[g],p[g]);if(y!==0)return y;const x=id(u[f[g]],h[p[g]]);if(x!==0)return x}return dt(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Ge(23264,{he:n})}}function q2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return dt(t,e);const n=ll(t),r=ll(e),i=dt(n.seconds,r.seconds);return i!==0?i:dt(n.nanos,r.nanos)}function U2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=id(n[i],r[i]);if(a)return a}return dt(n.length,r.length)}function sd(t){return Y1(t)}function Y1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ll(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return cl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ue.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Y1(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Y1(n.fields[c])}`;return i+"}"})(t.mapValue):Ge(61005,{value:t})}function Pg(t){switch(ul(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xy(t);return e?16+Pg(e):16;case 5:return 2*t.stringValue.length;case 6:return cl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Pg(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return _l(r.fields,((a,c)=>{i+=a.length+Pg(c)})),i})(t.mapValue);default:throw Ge(13486,{value:t})}}function V2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function X1(t){return!!t&&"integerValue"in t}function qj(t){return!!t&&"arrayValue"in t}function B2(t){return!!t&&"nullValue"in t}function $2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rg(t){return!!t&&"mapValue"in t}function JF(t){return(t?.mapValue?.fields||{})[_z]?.stringValue===wz}function dh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _l(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=dh(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dh(t.arrayValue.values[n]);return e}return{...t}}function ZF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XF}class Yr{constructor(e){this.value=e}static empty(){return new Yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dh(n)}setAll(e){let n=dr.emptyPath(),r={},i=[];e.forEach(((c,u)=>{if(!n.isImmediateParentOf(u)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=u.popLast()}c?r[u.lastSegment()]=dh(c):i.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Rg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Rg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_l(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Yr(dh(this.value))}}function jz(t){const e=[];return _l(t.fields,((n,r)=>{const i=new dr([n]);if(Rg(r)){const a=jz(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new hi(e)}class _r{constructor(e,n,r,i,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new _r(e,0,We.min(),We.min(),We.min(),Yr.empty(),0)}static newFoundDocument(e,n,r,i){return new _r(e,1,n,We.min(),r,i,0)}static newNoDocument(e,n){return new _r(e,2,n,We.min(),We.min(),Yr.empty(),0)}static newUnknownDocument(e,n){return new _r(e,3,n,We.min(),We.min(),Yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rv{constructor(e,n){this.position=e,this.inclusive=n}}function F2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],c=t.position[i];if(a.field.isKeyField()?r=Ue.comparator(Ue.fromName(c.referenceValue),n.key):r=id(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function H2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qs(t.position[n],e.position[n]))return!1;return!0}class Sh{constructor(e,n="asc"){this.field=e,this.dir=n}}function eH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Ez{}class Rn extends Ez{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nH(e,n,r):n==="array-contains"?new sH(e,r):n==="in"?new aH(e,r):n==="not-in"?new oH(e,r):n==="array-contains-any"?new lH(e,r):new Rn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rH(e,r):new iH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(id(n,this.value)):n!==null&&ul(this.value)===ul(n)&&this.matchesComparison(id(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends Ez{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new us(e,n)}matches(e){return Nz(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nz(t){return t.op==="and"}function Sz(t){return tH(t)&&Nz(t)}function tH(t){for(const e of t.filters)if(e instanceof us)return!1;return!0}function J1(t){if(t instanceof Rn)return t.field.canonicalString()+t.op.toString()+sd(t.value);if(Sz(t))return t.filters.map((e=>J1(e))).join(",");{const e=t.filters.map((n=>J1(n))).join(",");return`${t.op}(${e})`}}function Az(t,e){return t instanceof Rn?(function(r,i){return i instanceof Rn&&r.op===i.op&&r.field.isEqual(i.field)&&Qs(r.value,i.value)})(t,e):t instanceof us?(function(r,i){return i instanceof us&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,u)=>a&&Az(c,i.filters[u])),!0):!1})(t,e):void Ge(19439)}function Tz(t){return t instanceof Rn?(function(n){return`${n.field.canonicalString()} ${n.op} ${sd(n.value)}`})(t):t instanceof us?(function(n){return n.op.toString()+" {"+n.getFilters().map(Tz).join(" ,")+"}"})(t):"Filter"}class nH extends Rn{constructor(e,n,r){super(e,n,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const n=Ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class rH extends Rn{constructor(e,n){super(e,"in",n),this.keys=Cz("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class iH extends Rn{constructor(e,n){super(e,"not-in",n),this.keys=Cz("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Cz(t,e){return(e.arrayValue?.values||[]).map((n=>Ue.fromName(n.referenceValue)))}class sH extends Rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qj(n)&&Nh(n.arrayValue,this.value)}}class aH extends Rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nh(this.value.arrayValue,n)}}class oH extends Rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nh(this.value.arrayValue,n)}}class lH extends Rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qj(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Nh(this.value.arrayValue,r)))}}class cH{constructor(e,n=null,r=[],i=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=u,this.Te=null}}function G2(t,e=null,n=[],r=[],i=null,a=null,c=null){return new cH(t,e,n,r,i,a,c)}function Uj(t){const e=Je(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>J1(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),by(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>sd(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>sd(r))).join(",")),e.Te=n}return e.Te}function Vj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Az(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!H2(t.startAt,e.startAt)&&H2(t.endAt,e.endAt)}function Z1(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Nd{constructor(e,n=null,r=[],i=[],a=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function uH(t,e,n,r,i,a,c,u){return new Nd(t,e,n,r,i,a,c,u)}function _y(t){return new Nd(t)}function K2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dH(t){return Ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Oz(t){return t.collectionGroup!==null}function fh(t){const e=Je(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Un(dr.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Sh(a,r))})),n.has(dr.keyField().canonicalString())||e.Ie.push(new Sh(dr.keyField(),r))}return e.Ie}function Fs(t){const e=Je(t);return e.Ee||(e.Ee=fH(e,fh(t))),e.Ee}function fH(t,e){if(t.limitType==="F")return G2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Sh(i.field,a)}));const n=t.endAt?new rv(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rv(t.startAt.position,t.startAt.inclusive):null;return G2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ew(t,e){const n=t.filters.concat([e]);return new Nd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hH(t,e){const n=t.explicitOrderBy.concat([e]);return new Nd(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function iv(t,e,n){return new Nd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wy(t,e){return Vj(Fs(t),Fs(e))&&t.limitType===e.limitType}function Iz(t){return`${Uj(Fs(t))}|lt:${t.limitType}`}function qu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Tz(i))).join(", ")}]`),by(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>sd(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>sd(i))).join(",")),`Target(${r})`})(Fs(t))}; limitType=${t.limitType})`}function jy(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ue.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of fh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(c,u,f){const h=F2(c,u,f);return c.inclusive?h<=0:h<0})(r.startAt,fh(r),i)||r.endAt&&!(function(c,u,f){const h=F2(c,u,f);return c.inclusive?h>=0:h>0})(r.endAt,fh(r),i))})(t,e)}function mH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pz(t){return(e,n)=>{let r=!1;for(const i of fh(t)){const a=pH(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function pH(t,e,n){const r=t.field.isKeyField()?Ue.comparator(e.key,n.key):(function(a,c,u){const f=c.data.field(a),h=u.data.field(a);return f!==null&&h!==null?id(f,h):Ge(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ge(19790,{direction:t.dir})}}class Lc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return pz(this.inner)}size(){return this.innerSize}}const gH=new rn(Ue.comparator);function qa(){return gH}const Rz=new rn(Ue.comparator);function th(...t){let e=Rz;for(const n of t)e=e.insert(n.key,n);return e}function kz(t){let e=Rz;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ac(){return hh()}function Dz(){return hh()}function hh(){return new Lc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const vH=new rn(Ue.comparator),yH=new Un(Ue.comparator);function ft(...t){let e=yH;for(const n of t)e=e.add(n);return e}const bH=new Un(dt);function xH(){return bH}function Bj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ev(e)?"-0":e}}function Mz(t){return{integerValue:""+t}}function zz(t,e){return HF(e)?Mz(e):Bj(t,e)}class Ey{constructor(){this._=void 0}}function _H(t,e,n){return t instanceof Ah?(function(i,a){const c={fields:{[yz]:{stringValue:vz},[xz]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Lj(a)&&(a=xy(a)),a&&(c.fields[bz]=a),{mapValue:c}})(n,e):t instanceof Th?qz(t,e):t instanceof Ch?Uz(t,e):(function(i,a){const c=Lz(i,a),u=Q2(c)+Q2(i.Ae);return X1(c)&&X1(i.Ae)?Mz(u):Bj(i.serializer,u)})(t,e)}function wH(t,e,n){return t instanceof Th?qz(t,e):t instanceof Ch?Uz(t,e):n}function Lz(t,e){return t instanceof Oh?(function(r){return X1(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Ah extends Ey{}class Th extends Ey{constructor(e){super(),this.elements=e}}function qz(t,e){const n=Vz(e);for(const r of t.elements)n.some((i=>Qs(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Ch extends Ey{constructor(e){super(),this.elements=e}}function Uz(t,e){let n=Vz(e);for(const r of t.elements)n=n.filter((i=>!Qs(i,r)));return{arrayValue:{values:n}}}class Oh extends Ey{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Q2(t){return _n(t.integerValue||t.doubleValue)}function Vz(t){return qj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Bz{constructor(e,n){this.field=e,this.transform=n}}function jH(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Th&&i instanceof Th||r instanceof Ch&&i instanceof Ch?rd(r.elements,i.elements,Qs):r instanceof Oh&&i instanceof Oh?Qs(r.Ae,i.Ae):r instanceof Ah&&i instanceof Ah})(t.transform,e.transform)}class EH{constructor(e,n){this.version=e,this.transformResults=n}}class Ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ny{}function $z(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sy(t.key,Ir.none()):new tm(t.key,t.data,Ir.none());{const n=t.data,r=Yr.empty();let i=new Un(dr.comparator);for(let a of e.fields)if(!i.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new wl(t.key,r,new hi(i.toArray()),Ir.none())}}function NH(t,e,n){t instanceof tm?(function(i,a,c){const u=i.value.clone(),f=Y2(i.fieldTransforms,a,c.transformResults);u.setAll(f),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(t,e,n):t instanceof wl?(function(i,a,c){if(!kg(i.precondition,a))return void a.convertToUnknownDocument(c.version);const u=Y2(i.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(Fz(i)),f.setAll(u),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(t,e,n):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function mh(t,e,n,r){return t instanceof tm?(function(a,c,u,f){if(!kg(a.precondition,c))return u;const h=a.value.clone(),p=X2(a.fieldTransforms,f,c);return h.setAll(p),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof wl?(function(a,c,u,f){if(!kg(a.precondition,c))return u;const h=X2(a.fieldTransforms,f,c),p=c.data;return p.setAll(Fz(a)),p.setAll(h),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,c,u){return kg(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(t,e,n)}function SH(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=Lz(r.transform,i||null);a!=null&&(n===null&&(n=Yr.empty()),n.set(r.field,a))}return n||null}function W2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rd(r,i,((a,c)=>jH(a,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tm extends Ny{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wl extends Ny{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Fz(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Y2(t,e,n){const r=new Map;St(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],c=a.transform,u=e.data.field(a.field);r.set(a.field,wH(c,u,n[i]))}return r}function X2(t,e,n){const r=new Map;for(const i of t){const a=i.transform,c=n.data.field(i.field);r.set(i.field,_H(a,c,e))}return r}class Sy extends Ny{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AH extends Ny{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class TH{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&NH(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Dz();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(i.key)?null:u;const f=$z(c,u);f!==null&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(We.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ft())}isEqual(e){return this.batchId===e.batchId&&rd(this.mutations,e.mutations,((n,r)=>W2(n,r)))&&rd(this.baseMutations,e.baseMutations,((n,r)=>W2(n,r)))}}class $j{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){St(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return vH})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new $j(e,n,r,i)}}class CH{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class OH{constructor(e,n){this.count=e,this.unchangedNames=n}}var In,yt;function IH(t){switch(t){case be.OK:return Ge(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return Ge(15467,{code:t})}}function Hz(t){if(t===void 0)return La("GRPC error has no .code"),be.UNKNOWN;switch(t){case In.OK:return be.OK;case In.CANCELLED:return be.CANCELLED;case In.UNKNOWN:return be.UNKNOWN;case In.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case In.INTERNAL:return be.INTERNAL;case In.UNAVAILABLE:return be.UNAVAILABLE;case In.UNAUTHENTICATED:return be.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case In.NOT_FOUND:return be.NOT_FOUND;case In.ALREADY_EXISTS:return be.ALREADY_EXISTS;case In.PERMISSION_DENIED:return be.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case In.ABORTED:return be.ABORTED;case In.OUT_OF_RANGE:return be.OUT_OF_RANGE;case In.UNIMPLEMENTED:return be.UNIMPLEMENTED;case In.DATA_LOSS:return be.DATA_LOSS;default:return Ge(39323,{code:t})}}(yt=In||(In={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function PH(){return new TextEncoder}const RH=new nl([4294967295,4294967295],0);function J2(t){const e=PH().encode(t),n=new iz;return n.update(e),new Uint8Array(n.digest())}function Z2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new nl([n,r],0),new nl([i,a],0)]}class Fj{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nh(`Invalid padding: ${n}`);if(r<0)throw new nh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(nl.fromNumber(r)));return i.compare(RH)===1&&(i=new nl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=J2(e),[r,i]=Z2(n);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Fj(a,i,n);return r.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const n=J2(e),[r,i]=Z2(n);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.be(c)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ay{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,nm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ay(We.min(),i,new rn(dt),qa(),ft())}}class nm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nm(r,n,ft(),ft(),ft())}}class Dg{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Gz{constructor(e,n){this.targetId=e,this.Ce=n}}class Kz{constructor(e,n,r=hr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class eO{constructor(){this.ve=0,this.Fe=tO(),this.Me=hr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),n=ft(),r=ft();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ge(38017,{changeType:a})}})),new nm(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=tO()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class kH{constructor(e){this.Ge=e,this.ze=new Map,this.je=qa(),this.He=tg(),this.Je=tg(),this.Ze=new rn(dt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Z1(a))if(r===0){const c=new Ue(a.path);this.et(n,c,_r.newNoDocument(c,We.min()))}else St(r===1,20013,{expectedCount:r});else{const c=this._t(n);if(c!==r){const u=this.ut(e),f=u?this.ct(u,e,c):1;if(f!==0){this.it(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let c,u;try{c=cl(r).toUint8Array()}catch(f){if(f instanceof gz)return nd("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new Fj(c,i,a)}catch(f){return nd(f instanceof nh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,c)=>{const u=this.ot(c);if(u){if(a.current&&Z1(u.target)){const f=new Ue(u.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,_r.newNoDocument(f,e))}a.Be&&(n.set(c,a.ke()),a.Ke())}}));let r=ft();this.Je.forEach(((a,c)=>{let u=!0;c.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new Ay(e,n,this.Ze,this.je,r);return this.je=qa(),this.He=tg(),this.Je=tg(),this.Ze=new rn(dt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new eO,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Un(dt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Un(dt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ce("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eO),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function tg(){return new rn(Ue.comparator)}function tO(){return new rn(Ue.comparator)}const DH={asc:"ASCENDING",desc:"DESCENDING"},MH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zH={and:"AND",or:"OR"};class LH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tw(t,e){return t.useProto3Json||by(e)?e:{value:e}}function sv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qH(t,e){return sv(t,e.toTimestamp())}function Hs(t){return St(!!t,49232),We.fromTimestamp((function(n){const r=ll(n);return new Ye(r.seconds,r.nanos)})(t))}function Hj(t,e){return nw(t,e).canonicalString()}function nw(t,e){const n=(function(i){return new Gt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Wz(t){const e=Gt.fromString(t);return St(e4(e),10190,{key:e.toString()}),e}function rw(t,e){return Hj(t.databaseId,e.path)}function Ux(t,e){const n=Wz(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ue(Xz(n))}function Yz(t,e){return Hj(t.databaseId,e)}function UH(t){const e=Wz(t);return e.length===4?Gt.emptyPath():Xz(e)}function iw(t){return new Gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xz(t){return St(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function nO(t,e,n){return{name:rw(t,e),fields:n.value.mapValue.fields}}function VH(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ge(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(St(p===void 0||typeof p=="string",58123),hr.fromBase64String(p||"")):(St(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),hr.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(h){const p=h.code===void 0?be.UNKNOWN:Hz(h.code);return new Ae(p,h.message||"")})(c);n=new Kz(r,i,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ux(t,r.document.name),a=Hs(r.document.updateTime),c=r.document.createTime?Hs(r.document.createTime):We.min(),u=new Yr({mapValue:{fields:r.document.fields}}),f=_r.newFoundDocument(i,a,c,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Dg(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ux(t,r.document),a=r.readTime?Hs(r.readTime):We.min(),c=_r.newNoDocument(i,a),u=r.removedTargetIds||[];n=new Dg([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ux(t,r.document),a=r.removedTargetIds||[];n=new Dg([],a,i,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new OH(i,a),u=r.targetId;n=new Gz(u,c)}}return n}function BH(t,e){let n;if(e instanceof tm)n={update:nO(t,e.key,e.value)};else if(e instanceof Sy)n={delete:rw(t,e.key)};else if(e instanceof wl)n={update:nO(t,e.key,e.data),updateMask:XH(e.fieldMask)};else{if(!(e instanceof AH))return Ge(16599,{dt:e.type});n={verify:rw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const u=c.transform;if(u instanceof Ah)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Th)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ch)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Oh)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ge(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:qH(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ge(27497)})(t,e.precondition)),n}function $H(t,e){return t&&t.length>0?(St(e!==void 0,14353),t.map((n=>(function(i,a){let c=i.updateTime?Hs(i.updateTime):Hs(a);return c.isEqual(We.min())&&(c=Hs(a)),new EH(c,i.transformResults||[])})(n,e)))):[]}function FH(t,e){return{documents:[Yz(t,e.path)]}}function HH(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Yz(t,i);const a=(function(h){if(h.length!==0)return Zz(us.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const c=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:Uu(y.field),direction:QH(y.dir)}})(p)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=tw(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:i}}function GH(t){let e=UH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){St(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=(function(g){const y=Jz(g);return y instanceof us&&Sz(y)?y.getFilters():[y]})(n.where));let c=[];n.orderBy&&(c=(function(g){return g.map((y=>(function(E){return new Sh(Vu(E.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(y)))})(n.orderBy));let u=null;n.limit&&(u=(function(g){let y;return y=typeof g=="object"?g.value:g,by(y)?null:y})(n.limit));let f=null;n.startAt&&(f=(function(g){const y=!!g.before,x=g.values||[];return new rv(x,y)})(n.startAt));let h=null;return n.endAt&&(h=(function(g){const y=!g.before,x=g.values||[];return new rv(x,y)})(n.endAt)),uH(e,i,c,a,u,"F",f,h)}function KH(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Jz(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vu(n.unaryFilter.field);return Rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vu(n.unaryFilter.field);return Rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Vu(n.unaryFilter.field);return Rn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vu(n.unaryFilter.field);return Rn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Rn.create(Vu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return us.create(n.compositeFilter.filters.map((r=>Jz(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(n.compositeFilter.op))})(t):Ge(30097,{filter:t})}function QH(t){return DH[t]}function WH(t){return MH[t]}function YH(t){return zH[t]}function Uu(t){return{fieldPath:t.canonicalString()}}function Vu(t){return dr.fromServerFormat(t.fieldPath)}function Zz(t){return t instanceof Rn?(function(n){if(n.op==="=="){if($2(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NAN"}};if(B2(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($2(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NOT_NAN"}};if(B2(n.value))return{unaryFilter:{field:Uu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(n.field),op:WH(n.op),value:n.value}}})(t):t instanceof us?(function(n){const r=n.getFilters().map((i=>Zz(i)));return r.length===1?r[0]:{compositeFilter:{op:YH(n.op),filters:r}}})(t):Ge(54877,{filter:t})}function XH(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function e4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function t4(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class Xo{constructor(e,n,r,i,a=We.min(),c=We.min(),u=hr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new Xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JH{constructor(e){this.yt=e}}function ZH(t){const e=GH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?iv(e,e.limit,"L"):e}class eG{constructor(){this.Sn=new tG}addToCollectionParentIndex(e,n){return this.Sn.add(n),je.resolve()}getCollectionParents(e,n){return je.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return je.resolve()}deleteFieldIndex(e,n){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,n){return je.resolve()}getDocumentsMatchingTarget(e,n){return je.resolve(null)}getIndexType(e,n){return je.resolve(0)}getFieldIndexes(e,n){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,n){return je.resolve(ol.min())}getMinOffsetFromCollectionGroup(e,n){return je.resolve(ol.min())}updateCollectionGroup(e,n,r){return je.resolve()}updateIndexEntries(e,n){return je.resolve()}}class tG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Un(Gt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Un(Gt.comparator)).toArray()}}const rO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n4=41943040;class Wr{static withCacheSize(e){return new Wr(e,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Wr.DEFAULT_COLLECTION_PERCENTILE=10,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wr.DEFAULT=new Wr(n4,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wr.DISABLED=new Wr(-1,0,0);class ad{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ad(0)}static ar(){return new ad(-1)}}const iO="LruGarbageCollector",nG=1048576;function sO([t,e],[n,r]){const i=dt(t,n);return i===0?dt(e,r):i}class rG{constructor(e){this.Pr=e,this.buffer=new Un(sO),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sO(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class iG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ce(iO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ed(n)?Ce(iO,"Ignoring IndexedDB error during garbage collection: ",n):await jd(n)}await this.Ar(3e5)}))}}class sG{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return je.resolve(yy.ce);const r=new rG(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(rO)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rO):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,c,u,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,c=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),Lu()<=ut.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${a} targets in `+(f-u)+`ms
	Removed ${g} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function aG(t,e){return new sG(t,e)}class oG{constructor(){this.changes=new Lc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?je.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class cG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&mh(r.mutation,i,hi.empty(),Ye.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ft()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ft()){const i=ac();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let c=th();return a.forEach(((u,f)=>{c=c.insert(u,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const r=ac();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ft())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,u)=>{n.set(c,u)}))}))}computeViews(e,n,r,i){let a=qa();const c=hh(),u=(function(){return hh()})();return n.forEach(((f,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof wl)?a=a.insert(h.key,h):p!==void 0?(c.set(h.key,p.mutation.getFieldMask()),mh(p.mutation,h,p.mutation.getFieldMask(),Ye.now())):c.set(h.key,hi.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,p)=>c.set(h,p))),n.forEach(((h,p)=>u.set(h,new lG(p,c.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=hh();let i=new rn(((c,u)=>c-u)),a=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const u of c)u.keys().forEach((f=>{const h=n.get(f);if(h===null)return;let p=r.get(f)||hi.empty();p=u.applyToLocalView(h,p),r.set(f,p);const g=(i.get(u.batchId)||ft()).add(f);i=i.insert(u.batchId,g)}))})).next((()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),h=f.key,p=f.value,g=Dz();p.forEach((y=>{if(!a.has(y)){const x=$z(n.get(y),r.get(y));x!==null&&g.set(y,x),a=a.add(y)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,g))}return je.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return dH(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Oz(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):je.resolve(ac());let u=wh,f=a;return c.next((h=>je.forEach(h,((p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),a.get(p)?je.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{f=f.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,ft()))).next((p=>({batchId:u,changes:kz(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ue(n)).next((r=>{let i=th();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let c=th();return this.indexManager.getCollectionParents(e,a).next((u=>je.forEach(u,(f=>{const h=(function(g,y){return new Nd(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,y)=>{c=c.insert(g,y)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((c=>{a.forEach(((f,h)=>{const p=h.getKey();c.get(p)===null&&(c=c.insert(p,_r.newInvalidDocument(p)))}));let u=th();return c.forEach(((f,h)=>{const p=a.get(f);p!==void 0&&mh(p.mutation,h,hi.empty(),Ye.now()),jy(n,h)&&(u=u.insert(f,h))})),u}))}}class uG{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return je.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Hs(i.createTime)}})(n)),je.resolve()}getNamedQuery(e,n){return je.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:ZH(i.bundledQuery),readTime:Hs(i.readTime)}})(n)),je.resolve()}}class dG{constructor(){this.overlays=new rn(Ue.comparator),this.Lr=new Map}getOverlay(e,n){return je.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ac();return je.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),je.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),je.resolve()}getOverlaysForCollection(e,n,r){const i=ac(),a=n.length+1,c=new Ue(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return je.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new rn(((h,p)=>h-p));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=ac(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=ac(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,p)=>u.set(h,p))),!(u.size()>=i)););return je.resolve(u)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new CH(n,r));let a=this.Lr.get(n);a===void 0&&(a=ft(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class fG{constructor(){this.sessionToken=hr.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,je.resolve()}}class Gj{constructor(){this.kr=new Un(Yn.Kr),this.qr=new Un(Yn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Yn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Yn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Ue(new Gt([])),r=new Yn(n,e),i=new Yn(n,e+1),a=[];return this.qr.forEachInRange([r,i],(c=>{this.Wr(c),a.push(c.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ue(new Gt([])),r=new Yn(n,e),i=new Yn(n,e+1);let a=ft();return this.qr.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const n=new Yn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ue.comparator(e.key,n.key)||dt(e.Hr,n.Hr)}static Ur(e,n){return dt(e.Hr,n.Hr)||Ue.comparator(e.key,n.key)}}class hG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Un(Yn.Kr)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new TH(a,n,r,i);this.mutationQueue.push(c);for(const u of i)this.Jr=this.Jr.add(new Yn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return je.resolve(c)}lookupMutationBatch(e,n){return je.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return je.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?zj:this.Yn-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yn(n,0),i=new Yn(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(c=>{const u=this.Zr(c.Hr);a.push(u)})),je.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Un(dt);return n.forEach((i=>{const a=new Yn(i,0),c=new Yn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,c],(u=>{r=r.add(u.Hr)}))})),je.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Ue.isDocumentKey(a)||(a=a.child(""));const c=new Yn(new Ue(a),0);let u=new Un(dt);return this.Jr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(f.Hr)),!0)}),c),je.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){St(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return je.forEach(n.mutations,(i=>{const a=new Yn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Yn(n,0),i=this.Jr.firstAfterOrEqual(r);return je.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class mG{constructor(e){this.ti=e,this.docs=(function(){return new rn(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,c=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return je.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(n))}getEntries(e,n){let r=qa();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():_r.newInvalidDocument(i))})),je.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=qa();const c=n.path,u=new Ue(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||VF(UF(p),r)<=0||(i.has(p.key)||jy(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return je.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Ge(9500)}ni(e,n){return je.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new pG(this)}getSize(e){return je.resolve(this.size)}}class pG extends oG{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),je.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class gG{constructor(e){this.persistence=e,this.ri=new Lc((n=>Uj(n)),Vj),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.ii=0,this.si=new Gj,this.targetCount=0,this.oi=ad._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),je.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ad(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,je.resolve()}updateTargetData(e,n){return this.lr(n),je.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ri.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),je.waitFor(a).next((()=>i))}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return je.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),je.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),je.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),je.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return je.resolve(r)}containsKey(e,n){return je.resolve(this.si.containsKey(n))}}class r4{constructor(e,n){this._i={},this.overlays={},this.ai=new yy(0),this.ui=!1,this.ui=!0,this.ci=new fG,this.referenceDelegate=e(this),this.li=new gG(this),this.indexManager=new eG,this.remoteDocumentCache=(function(i){return new mG(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new JH(n),this.Pi=new uG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new hG(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ce("MemoryPersistence","Starting transaction:",e);const i=new vG(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return je.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class vG extends $F{constructor(e){super(),this.currentSequenceNumber=e}}class Kj{constructor(e){this.persistence=e,this.Ri=new Gj,this.Ai=null}static Vi(e){return new Kj(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),je.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),je.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),je.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.di,(r=>{const i=Ue.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,We.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return je.or([()=>je.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class av{constructor(e,n){this.persistence=e,this.fi=new Lc((r=>GF(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=aG(this,n)}static Vi(e,n){return new av(e,n)}Ti(){}Ii(e){return je.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return je.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?je.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(c=>this.wr(e,c,n).next((u=>{u||(r++,a.removeEntry(c,We.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),je.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),je.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),je.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pg(e.data.value)),n}wr(e,n,r){return je.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return je.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Qj{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ft(),i=ft();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Qj(e,n.fromCache,r,i)}}class yG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bG{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return H8()?8:FF(jr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new yG;return this.ys(e,n,c).next((u=>{if(a.result=u,this.As)return this.ws(e,n,c,u.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Lu()<=ut.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",qu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),je.resolve()):(Lu()<=ut.DEBUG&&Ce("QueryEngine","Query:",qu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Lu()<=ut.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",qu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fs(n))):je.resolve())}gs(e,n){if(K2(n))return je.resolve(null);let r=Fs(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=iv(n,null,"F"),r=Fs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=ft(...a);return this.fs.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.bs(n,u);return this.Ss(n,h,c,f.readTime)?this.gs(e,iv(n,null,"F")):this.Ds(e,h,n,f)}))))})))))}ps(e,n,r,i){return K2(n)||i.isEqual(We.min())?je.resolve(null):this.fs.getDocuments(e,r).next((a=>{const c=this.bs(n,a);return this.Ss(n,c,r,i)?je.resolve(null):(Lu()<=ut.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qu(n)),this.Ds(e,c,n,qF(i,wh)).next((u=>u)))}))}bs(e,n){let r=new Un(Pz(e));return n.forEach(((i,a)=>{jy(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return Lu()<=ut.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",qu(n)),this.fs.getDocumentsMatchingQuery(e,n,ol.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((c=>{a=a.insert(c.key,c)})),a)))}}const Wj="LocalStore",xG=3e8;class _G{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new rn(dt),this.Fs=new Lc((a=>Uj(a)),Vj),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cG(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function wG(t,e,n,r){return new _G(t,e,n,r)}async function i4(t,e){const n=Je(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],u=[];let f=ft();for(const h of i){c.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of a){u.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(r,f).next((h=>({Ns:h,removedBatchIds:c,addedBatchIds:u})))}))}))}function jG(t,e){const n=Je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(u,f,h,p){const g=h.batch,y=g.keys();let x=je.resolve();return y.forEach((E=>{x=x.next((()=>p.getEntry(f,E))).next((j=>{const N=h.docVersions.get(E);St(N!==null,48541),j.version.compareTo(N)<0&&(g.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),p.addEntry(j)))}))})),x.next((()=>u.mutationQueue.removeMutationBatch(f,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let f=ft();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(f=f.add(u.batch.mutations[h].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function s4(t){const e=Je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function EG(t,e){const n=Je(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const u=[];e.targetChanges.forEach(((p,g)=>{const y=i.get(g);if(!y)return;u.push(n.li.removeMatchingKeys(a,p.removedDocuments,g).next((()=>n.li.addMatchingKeys(a,p.addedDocuments,g))));let x=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(hr.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),i=i.insert(g,x),(function(j,N,A){return j.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=xG?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(y,x,p)&&u.push(n.li.updateTargetData(a,x))}));let f=qa(),h=ft();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))})),u.push(NG(a,c,e.documentUpdates).next((p=>{f=p.Bs,h=p.Ls}))),!r.isEqual(We.min())){const p=n.li.getLastRemoteSnapshotVersion(a).next((g=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(p)}return je.waitFor(u).next((()=>c.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(n.vs=i,a)))}function NG(t,e,n){let r=ft(),i=ft();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let c=qa();return n.forEach(((u,f)=>{const h=a.get(u);f.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),f.isNoDocument()&&f.version.isEqual(We.min())?(e.removeEntry(u,f.readTime),c=c.insert(u,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),c=c.insert(u,f)):Ce(Wj,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",f.version)})),{Bs:c,Ls:i}}))}function SG(t,e){const n=Je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=zj),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function AG(t,e){const n=Je(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,je.resolve(i)):n.li.allocateTargetId(r).next((c=>(i=new Xo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function sw(t,e,n){const r=Je(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Ed(c))throw c;Ce(Wj,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function aO(t,e,n){const r=Je(t);let i=We.min(),a=ft();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,h,p){const g=Je(f),y=g.Fs.get(p);return y!==void 0?je.resolve(g.vs.get(y)):g.li.getTargetData(h,p)})(r,c,Fs(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,u.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:We.min(),n?a:ft()))).next((u=>(TG(r,mH(e),u),{documents:u,ks:a})))))}function TG(t,e,n){let r=t.Ms.get(e)||We.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}class oO{constructor(){this.activeTargetIds=xH()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CG{constructor(){this.vo=new oO,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new oO,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OG{Mo(e){}shutdown(){}}const lO="ConnectivityMonitor";class cO{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ce(lO,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ce(lO,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ng=null;function aw(){return ng===null?ng=(function(){return 268435456+Math.round(2147483648*Math.random())})():ng++,"0x"+ng.toString(16)}const Vx="RestConnection",IG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class PG{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===tv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const c=aw(),u=this.Qo(e,n.toUriEncodedString());Ce(Vx,`Sending RPC '${e}' ${c}:`,u,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,i,a);const{host:h}=new URL(u),p=bl(h);return this.zo(e,u,f,r,p).then((g=>(Ce(Vx,`Received RPC '${e}' ${c}: `,g),g)),(g=>{throw nd(Vx,`RPC '${e}' ${c} failed with error: `,g,"url: ",u,"request:",r),g}))}jo(e,n,r,i,a,c){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=IG[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class RG{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const yr="WebChannelConnection",qf=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Yu extends PG{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Yu.c_){const e=lz();qf(e,oz.STAT_EVENT,(n=>{n.stat===Q1.PROXY?Ce(yr,"STAT_EVENT: detected buffering proxy"):n.stat===Q1.NOPROXY&&Ce(yr,"STAT_EVENT: detected no buffering proxy")})),Yu.c_=!0}}zo(e,n,r,i,a){const c=aw();return new Promise(((u,f)=>{const h=new sz;h.setWithCredentials(!0),h.listenOnce(az.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ig.NO_ERROR:const g=h.getResponseJson();Ce(yr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(g)),u(g);break;case Ig.TIMEOUT:Ce(yr,`RPC '${e}' ${c} timed out`),f(new Ae(be.DEADLINE_EXCEEDED,"Request time out"));break;case Ig.HTTP_ERROR:const y=h.getStatus();if(Ce(yr,`RPC '${e}' ${c} failed with status:`,y,"response text:",h.getResponseText()),y>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x?.error;if(E&&E.status&&E.message){const j=(function(A){const k=A.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(k)>=0?k:be.UNKNOWN})(E.status);f(new Ae(j,E.message))}else f(new Ae(be.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Ae(be.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Ce(yr,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(i);Ce(yr,`RPC '${e}' ${c} sending request:`,i),h.send(n,"POST",p,r,15)}))}T_(e,n,r){const i=aw(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Ce(yr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=c.createWebChannel(h,u);this.I_(p);let g=!1,y=!1;const x=new RG({Ho:E=>{y?Ce(yr,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(Ce(yr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Ce(yr,`RPC '${e}' stream ${i} sending:`,E),p.send(E))},Jo:()=>p.close()});return qf(p,eh.EventType.OPEN,(()=>{y||(Ce(yr,`RPC '${e}' stream ${i} transport opened.`),x.i_())})),qf(p,eh.EventType.CLOSE,(()=>{y||(y=!0,Ce(yr,`RPC '${e}' stream ${i} transport closed`),x.o_(),this.E_(p))})),qf(p,eh.EventType.ERROR,(E=>{y||(y=!0,nd(yr,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),x.o_(new Ae(be.UNAVAILABLE,"The operation could not be completed")))})),qf(p,eh.EventType.MESSAGE,(E=>{if(!y){const j=E.data[0];St(!!j,16349);const N=j,A=N?.error||N[0]?.error;if(A){Ce(yr,`RPC '${e}' stream ${i} received error:`,A);const k=A.status;let O=(function($){const D=In[$];if(D!==void 0)return Hz(D)})(k),C=A.message;O===void 0&&(O=be.INTERNAL,C="Unknown error status: "+k+" with message "+A.message),y=!0,x.o_(new Ae(O,C)),p.close()}else Ce(yr,`RPC '${e}' stream ${i} received:`,j),x.__(j)}})),Yu.u_(),setTimeout((()=>{x.s_()}),0),x}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return cz()}}function kG(t){return new Yu(t)}function Bx(){return typeof document<"u"?document:null}function Ty(t){return new LH(t,!0)}Yu.c_=!1;class a4{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const uO="PersistentStream";class o4{constructor(e,n,r,i,a,c,u,f){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a4(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(La(n.toString()),La("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ae(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ce(uO,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ce(uO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DG extends o4{constructor(e,n,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=VH(this.serializer,e),r=(function(a){if(!("targetChange"in a))return We.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?We.min():c.readTime?Hs(c.readTime):We.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=iw(this.serializer),n.addTarget=(function(a,c){let u;const f=c.target;if(u=Z1(f)?{documents:FH(a,f)}:{query:HH(a,f).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=Qz(a,c.resumeToken);const h=tw(a,c.expectedCount);h!==null&&(u.expectedCount=h)}else if(c.snapshotVersion.compareTo(We.min())>0){u.readTime=sv(a,c.snapshotVersion.toTimestamp());const h=tw(a,c.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=KH(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=iw(this.serializer),n.removeTarget=e,this.K_(n)}}class MG extends o4{constructor(e,n,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$H(e.writeResults,e.commitTime),r=Hs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=iw(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>BH(this.serializer,r)))};this.K_(n)}}class zG{}class LG extends zG{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ae(be.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Wo(e,nw(n,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(be.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.jo(e,nw(n,r),i,c,u,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(be.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function qG(t,e,n,r){return new LG(t,e,n,r)}class UG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(La(n),this.aa=!1):Ce("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ec="RemoteStore";class VG{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{qc(this)&&(Ce(Ec,"Restarting streams for network reachability change."),await(async function(f){const h=Je(f);h.Ea.add(4),await rm(h),h.Va.set("Unknown"),h.Ea.delete(4),await Cy(h)})(this))}))})),this.Va=new UG(r,i)}}async function Cy(t){if(qc(t))for(const e of t.Ra)await e(!0)}async function rm(t){for(const e of t.Ra)await e(!1)}function l4(t,e){const n=Je(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Zj(n)?Jj(n):Sd(n).O_()&&Xj(n,e))}function Yj(t,e){const n=Je(t),r=Sd(n);n.Ia.delete(e),r.O_()&&c4(n,e),n.Ia.size===0&&(r.O_()?r.L_():qc(n)&&n.Va.set("Unknown"))}function Xj(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sd(t).Z_(e)}function c4(t,e){t.da.$e(e),Sd(t).X_(e)}function Jj(t){t.da=new kH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sd(t).start(),t.Va.ua()}function Zj(t){return qc(t)&&!Sd(t).x_()&&t.Ia.size>0}function qc(t){return Je(t).Ea.size===0}function u4(t){t.da=void 0}async function BG(t){t.Va.set("Online")}async function $G(t){t.Ia.forEach(((e,n)=>{Xj(t,e)}))}async function FG(t,e){u4(t),Zj(t)?(t.Va.ha(e),Jj(t)):t.Va.set("Unknown")}async function HG(t,e,n){if(t.Va.set("Online"),e instanceof Kz&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const u of a.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ia.delete(u),i.da.removeTarget(u))})(t,e)}catch(r){Ce(Ec,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ov(t,r)}else if(e instanceof Dg?t.da.Xe(e):e instanceof Gz?t.da.st(e):t.da.tt(e),!n.isEqual(We.min()))try{const r=await s4(t.localStore);n.compareTo(r)>=0&&await(function(a,c){const u=a.da.Tt(c);return u.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(f.resumeToken,c))}})),u.targetMismatches.forEach(((f,h)=>{const p=a.Ia.get(f);if(!p)return;a.Ia.set(f,p.withResumeToken(hr.EMPTY_BYTE_STRING,p.snapshotVersion)),c4(a,f);const g=new Xo(p.target,f,h,p.sequenceNumber);Xj(a,g)})),a.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){Ce(Ec,"Failed to raise snapshot:",r),await ov(t,r)}}async function ov(t,e,n){if(!Ed(e))throw e;t.Ea.add(1),await rm(t),t.Va.set("Offline"),n||(n=()=>s4(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ce(Ec,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cy(t)}))}function d4(t,e){return e().catch((n=>ov(t,n,e)))}async function Oy(t){const e=Je(t),n=dl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zj;for(;GG(e);)try{const i=await SG(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,KG(e,i)}catch(i){await ov(e,i)}f4(e)&&h4(e)}function GG(t){return qc(t)&&t.Ta.length<10}function KG(t,e){t.Ta.push(e);const n=dl(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function f4(t){return qc(t)&&!dl(t).x_()&&t.Ta.length>0}function h4(t){dl(t).start()}async function QG(t){dl(t).ra()}async function WG(t){const e=dl(t);for(const n of t.Ta)e.ea(n.mutations)}async function YG(t,e,n){const r=t.Ta.shift(),i=$j.from(r,e,n);await d4(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Oy(t)}async function XG(t,e){e&&dl(t).Y_&&await(async function(r,i){if((function(c){return IH(c)&&c!==be.ABORTED})(i.code)){const a=r.Ta.shift();dl(r).B_(),await d4(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Oy(r)}})(t,e),f4(t)&&h4(t)}async function dO(t,e){const n=Je(t);n.asyncQueue.verifyOperationInProgress(),Ce(Ec,"RemoteStore received new credentials");const r=qc(n);n.Ea.add(3),await rm(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cy(n)}async function JG(t,e){const n=Je(t);e?(n.Ea.delete(2),await Cy(n)):e||(n.Ea.add(2),await rm(n),n.Va.set("Unknown"))}function Sd(t){return t.ma||(t.ma=(function(n,r,i){const a=Je(n);return a.sa(),new DG(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:BG.bind(null,t),Yo:$G.bind(null,t),t_:FG.bind(null,t),J_:HG.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Zj(t)?Jj(t):t.Va.set("Unknown")):(await t.ma.stop(),u4(t))}))),t.ma}function dl(t){return t.fa||(t.fa=(function(n,r,i){const a=Je(n);return a.sa(),new MG(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:QG.bind(null,t),t_:XG.bind(null,t),ta:WG.bind(null,t),na:YG.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Oy(t)):(await t.fa.stop(),t.Ta.length>0&&(Ce(Ec,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class eE{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const c=Date.now()+r,u=new eE(e,n,c,i,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tE(t,e){if(La("AsyncQueue",`${e}: ${t}`),Ed(t))return new Ae(be.UNAVAILABLE,`${e}: ${t}`);throw t}class Xu{static emptySet(e){return new Xu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ue.comparator(n.key,r.key):(n,r)=>Ue.comparator(n.key,r.key),this.keyedMap=th(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class fO{constructor(){this.ga=new rn(Ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class od{constructor(e,n,r,i,a,c,u,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const c=[];return n.forEach((u=>{c.push({type:0,doc:u})})),new od(e,n,Xu.emptySet(n),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class ZG{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class eK{constructor(){this.queries=hO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Je(n),a=i.queries;i.queries=hO(),a.forEach(((c,u)=>{for(const f of u.ba)f.onError(r)}))})(this,new Ae(be.ABORTED,"Firestore shutting down"))}}function hO(){return new Lc((t=>Iz(t)),wy)}async function nE(t,e){const n=Je(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new ZG,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const u=tE(c,`Initialization of query '${qu(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&iE(n)}async function rE(t,e){const n=Je(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const c=a.ba.indexOf(e);c>=0&&(a.ba.splice(c,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tK(t,e){const n=Je(t);let r=!1;for(const i of e){const a=i.query,c=n.queries.get(a);if(c){for(const u of c.ba)u.Fa(i)&&(r=!0);c.wa=i}}r&&iE(n)}function nK(t,e,n){const r=Je(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function iE(t){t.Ca.forEach((e=>{e.next()}))}var ow,mO;(mO=ow||(ow={})).Ma="default",mO.Cache="cache";class sE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new od(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ow.Cache}}class m4{constructor(e){this.key=e}}class p4{constructor(e){this.key=e}}class rK{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ft(),this.mutatedKeys=ft(),this.eu=Pz(e),this.tu=new Xu(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new fO,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,c=i,u=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const y=i.get(p),x=jy(this.query,g)?g:null,E=!!y&&this.mutatedKeys.has(y.key),j=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let N=!1;y&&x?y.data.isEqual(x.data)?E!==j&&(r.track({type:3,doc:x}),N=!0):this.su(y,x)||(r.track({type:2,doc:x}),N=!0,(f&&this.eu(x,f)>0||h&&this.eu(x,h)<0)&&(u=!0)):!y&&x?(r.track({type:0,doc:x}),N=!0):y&&!x&&(r.track({type:1,doc:y}),N=!0,(f||h)&&(u=!0)),N&&(x?(c=c.add(x),a=j?a.add(p):a.delete(p)):(c=c.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Ss:u,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,g)=>(function(x,E){const j=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:N})}};return j(x)-j(E)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],f=this.Ya.size===0&&this.current&&!i?1:0,h=f!==this.Xa;return this.Xa=f,c.length!==0||h?{snapshot:new od(this.query,e.tu,a,c,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fO,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ft(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new p4(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new m4(r))})),n}cu(e){this.Za=e.ks,this.Ya=ft();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return od.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const aE="SyncEngine";class iK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sK{constructor(e){this.key=e,this.hu=!1}}class aK{constructor(e,n,r,i,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Lc((u=>Iz(u)),wy),this.Iu=new Map,this.Eu=new Set,this.Ru=new rn(Ue.comparator),this.Au=new Map,this.Vu=new Gj,this.du={},this.mu=new Map,this.fu=ad.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oK(t,e,n=!0){const r=_4(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await g4(r,e,n,!0),i}async function lK(t,e){const n=_4(t);await g4(n,e,!0,!1)}async function g4(t,e,n,r){const i=await AG(t.localStore,Fs(e)),a=i.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await cK(t,e,a,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&l4(t.remoteStore,i),u}async function cK(t,e,n,r,i){t.pu=(g,y,x)=>(async function(j,N,A,k){let O=N.view.ru(A);O.Ss&&(O=await aO(j.localStore,N.query,!1).then((({documents:D})=>N.view.ru(D,O))));const C=k&&k.targetChanges.get(N.targetId),V=k&&k.targetMismatches.get(N.targetId)!=null,$=N.view.applyChanges(O,j.isPrimaryClient,C,V);return gO(j,N.targetId,$.au),$.snapshot})(t,g,y,x);const a=await aO(t.localStore,e,!0),c=new rK(e,a.ks),u=c.ru(a.documents),f=nm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=c.applyChanges(u,t.isPrimaryClient,f);gO(t,n,h.au);const p=new iK(e,n,c);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function uK(t,e,n){const r=Je(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!wy(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await sw(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yj(r.remoteStore,i.targetId),lw(r,i.targetId)})).catch(jd)):(lw(r,i.targetId),await sw(r.localStore,i.targetId,!0))}async function dK(t,e){const n=Je(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yj(n.remoteStore,r.targetId))}async function fK(t,e,n){const r=bK(t);try{const i=await(function(c,u){const f=Je(c),h=Ye.now(),p=u.reduce(((x,E)=>x.add(E.key)),ft());let g,y;return f.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let E=qa(),j=ft();return f.xs.getEntries(x,p).next((N=>{E=N,E.forEach(((A,k)=>{k.isValidDocument()||(j=j.add(A))}))})).next((()=>f.localDocuments.getOverlayedDocuments(x,E))).next((N=>{g=N;const A=[];for(const k of u){const O=SH(k,g.get(k.key).overlayedDocument);O!=null&&A.push(new wl(k.key,O,jz(O.value.mapValue),Ir.exists(!0)))}return f.mutationQueue.addMutationBatch(x,h,A,u)})).next((N=>{y=N;const A=N.applyToLocalDocumentSet(g,j);return f.documentOverlayCache.saveOverlays(x,N.batchId,A)}))})).then((()=>({batchId:y.batchId,changes:kz(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,u,f){let h=c.du[c.currentUser.toKey()];h||(h=new rn(dt)),h=h.insert(u,f),c.du[c.currentUser.toKey()]=h})(r,i.batchId,n),await im(r,i.changes),await Oy(r.remoteStore)}catch(i){const a=tE(i,"Failed to persist write");n.reject(a)}}async function v4(t,e){const n=Je(t);try{const r=await EG(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=n.Au.get(a);c&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?St(c.hu,14607):i.removedDocuments.size>0&&(St(c.hu,42227),c.hu=!1))})),await im(n,r,e)}catch(r){await jd(r)}}function pO(t,e,n){const r=Je(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(c,u){const f=Je(c);f.onlineState=u;let h=!1;f.queries.forEach(((p,g)=>{for(const y of g.ba)y.va(u)&&(h=!0)})),h&&iE(f)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hK(t,e,n){const r=Je(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new rn(Ue.comparator);c=c.insert(a,_r.newNoDocument(a,We.min()));const u=ft().add(a),f=new Ay(We.min(),new Map,new rn(dt),c,u);await v4(r,f),r.Ru=r.Ru.remove(a),r.Au.delete(e),oE(r)}else await sw(r.localStore,e,!1).then((()=>lw(r,e,n))).catch(jd)}async function mK(t,e){const n=Je(t),r=e.batch.batchId;try{const i=await jG(n.localStore,e);b4(n,r,null),y4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await im(n,i)}catch(i){await jd(i)}}async function pK(t,e,n){const r=Je(t);try{const i=await(function(c,u){const f=Je(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return f.mutationQueue.lookupMutationBatch(h,u).next((g=>(St(g!==null,37113),p=g.keys(),f.mutationQueue.removeMutationBatch(h,g)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>f.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);b4(r,e,n),y4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await im(r,i)}catch(i){await jd(i)}}function y4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function b4(t,e,n){const r=Je(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function lw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||x4(t,r)}))}function x4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Yj(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),oE(t))}function gO(t,e,n){for(const r of n)r instanceof m4?(t.Vu.addReference(r.key,e),gK(t,r)):r instanceof p4?(Ce(aE,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||x4(t,r.key)):Ge(19791,{wu:r})}function gK(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ce(aE,"New document in limbo: "+n),t.Eu.add(r),oE(t))}function oE(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ue(Gt.fromString(e)),r=t.fu.next();t.Au.set(r,new sK(n)),t.Ru=t.Ru.insert(n,r),l4(t.remoteStore,new Xo(Fs(_y(n.path)),r,"TargetPurposeLimboResolution",yy.ce))}}async function im(t,e,n){const r=Je(t),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,f)=>{c.push(r.pu(f,e,n).then((h=>{if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:n?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Qj.Es(f.targetId,h);a.push(p)}})))})),await Promise.all(c),r.Pu.J_(i),await(async function(f,h){const p=Je(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>je.forEach(h,(y=>je.forEach(y.Ts,(x=>p.persistence.referenceDelegate.addReference(g,y.targetId,x))).next((()=>je.forEach(y.Is,(x=>p.persistence.referenceDelegate.removeReference(g,y.targetId,x)))))))))}catch(g){if(!Ed(g))throw g;Ce(Wj,"Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const x=p.vs.get(y),E=x.snapshotVersion,j=x.withLastLimboFreeSnapshotVersion(E);p.vs=p.vs.insert(y,j)}}})(r.localStore,a))}async function vK(t,e){const n=Je(t);if(!n.currentUser.isEqual(e)){Ce(aE,"User change. New user:",e.toKey());const r=await i4(n.localStore,e);n.currentUser=e,(function(a,c){a.mu.forEach((u=>{u.forEach((f=>{f.reject(new Ae(be.CANCELLED,c))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await im(n,r.Ns)}}function yK(t,e){const n=Je(t),r=n.Au.get(e);if(r&&r.hu)return ft().add(r.key);{let i=ft();const a=n.Iu.get(e);if(!a)return i;for(const c of a){const u=n.Tu.get(c);i=i.unionWith(u.view.nu)}return i}}function _4(t){const e=Je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=v4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hK.bind(null,e),e.Pu.J_=tK.bind(null,e.eventManager),e.Pu.yu=nK.bind(null,e.eventManager),e}function bK(t){const e=Je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pK.bind(null,e),e}class lv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ty(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return wG(this.persistence,new bG,e.initialUser,this.serializer)}Cu(e){return new r4(Kj.Vi,this.serializer)}Du(e){return new CG}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lv.provider={build:()=>new lv};class xK extends lv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){St(this.persistence.referenceDelegate instanceof av,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new iG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wr.withCacheSize(this.cacheSizeBytes):Wr.DEFAULT;return new r4((r=>av.Vi(r,n)),this.serializer)}}class cw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vK.bind(null,this.syncEngine),await JG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eK})()}createDatastore(e){const n=Ty(e.databaseInfo.databaseId),r=kG(e.databaseInfo);return qG(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,c,u){return new VG(r,i,a,c,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>pO(this.syncEngine,n,0)),(function(){return cO.v()?new cO:new OG})())}createSyncEngine(e,n){return(function(i,a,c,u,f,h,p){const g=new aK(i,a,c,u,f,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Je(n);Ce(Ec,"RemoteStore shutting down."),r.Ea.add(5),await rm(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cw.provider={build:()=>new cw};class lE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):La("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const fl="FirestoreClient";class _K{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=xr.UNAUTHENTICATED,this.clientId=Mj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{Ce(fl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Ce(fl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function $x(t,e){t.asyncQueue.verifyOperationInProgress(),Ce(fl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await i4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function vO(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wK(t);Ce(fl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>dO(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>dO(e.remoteStore,i))),t._onlineComponents=e}async function wK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ce(fl,"Using user provided OfflineComponentProvider");try{await $x(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;nd("Error using user provided cache. Falling back to memory cache: "+n),await $x(t,new lv)}}else Ce(fl,"Using default OfflineComponentProvider"),await $x(t,new xK(void 0));return t._offlineComponents}async function w4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ce(fl,"Using user provided OnlineComponentProvider"),await vO(t,t._uninitializedComponentsProvider._online)):(Ce(fl,"Using default OnlineComponentProvider"),await vO(t,new cw))),t._onlineComponents}function jK(t){return w4(t).then((e=>e.syncEngine))}async function cv(t){const e=await w4(t),n=e.eventManager;return n.onListen=oK.bind(null,e.syncEngine),n.onUnlisten=uK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dK.bind(null,e.syncEngine),n}function EK(t,e,n,r){const i=new lE(r),a=new sE(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>nE(await cv(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>rE(await cv(t),a)))}}function NK(t,e,n={}){const r=new Ra;return t.asyncQueue.enqueueAndForget((async()=>(function(a,c,u,f,h){const p=new lE({next:y=>{p.Nu(),c.enqueueAndForget((()=>rE(a,g)));const x=y.docs.has(u);!x&&y.fromCache?h.reject(new Ae(be.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&f&&f.source==="server"?h.reject(new Ae(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new sE(_y(u.path),p,{includeMetadataChanges:!0,Ka:!0});return nE(a,g)})(await cv(t),t.asyncQueue,e,n,r))),r.promise}function SK(t,e,n={}){const r=new Ra;return t.asyncQueue.enqueueAndForget((async()=>(function(a,c,u,f,h){const p=new lE({next:y=>{p.Nu(),c.enqueueAndForget((()=>rE(a,g))),y.fromCache&&f.source==="server"?h.reject(new Ae(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new sE(u,p,{includeMetadataChanges:!0,Ka:!0});return nE(a,g)})(await cv(t),t.asyncQueue,e,n,r))),r.promise}function AK(t,e){const n=new Ra;return t.asyncQueue.enqueueAndForget((async()=>fK(await jK(t),e,n))),n.promise}function j4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const TK="ComponentProvider",yO=new Map;function CK(t,e,n,r,i){return new WF(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,j4(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const E4="firestore.googleapis.com",bO=!0;class xO{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E4,this.ssl=bO}else this.host=e.host,this.ssl=e.ssl??bO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=n4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nG)throw new Ae(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j4(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ae(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ae(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ae(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new AF;switch(r.type){case"firstParty":return new IF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=yO.get(n);r&&(Ce(TK,"Removing Datastore"),yO.delete(n),r.terminate())})(this),Promise.resolve()}}function OK(t,e,n,r={}){t=Or(t,Iy);const i=bl(e),a=t._getSettings(),c={...a,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(wj(`https://${u}`),jj("Firestore",!0)),a.host!==E4&&a.host!==u&&nd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:u,ssl:i,emulatorOptions:r};if(!bc(f,c)&&(t._setSettings(f),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=xr.MOCK_USER;else{h=yM(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ae(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new xr(g)}t._authCredentials=new TF(new dz(h,p))}}class Ya{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ya(this.firestore,e,this._query)}}class pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(em(n,pn._jsonSchema))return new pn(e,r||null,new Ue(Gt.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:kn("string",pn._jsonSchemaVersion),referencePath:kn("string")};class rl extends Ya{constructor(e,n,r){super(e,n,_y(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ue(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function rt(t,e,...n){if(t=Ft(t),fz("collection","path",e),t instanceof Iy){const r=Gt.fromString(e,...n);return R2(r),new rl(t,null,r)}{if(!(t instanceof pn||t instanceof rl))throw new Ae(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Gt.fromString(e,...n));return R2(r),new rl(t.firestore,null,r)}}function Qe(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=Mj.newId()),fz("doc","path",e),t instanceof Iy){const r=Gt.fromString(e,...n);return P2(r),new pn(t,null,new Ue(r))}{if(!(t instanceof pn||t instanceof rl))throw new Ae(be.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Gt.fromString(e,...n));return P2(r),new pn(t.firestore,t instanceof rl?t.converter:null,new Ue(r))}}const _O="AsyncQueue";class wO{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a4(this,"async_queue_retry"),this._c=()=>{const r=Bx();r&&Ce(_O,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ra;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ed(e))throw e;Ce(_O,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,La("INTERNAL UNHANDLED ERROR: ",jO(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=eE.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ge(47125,{Pc:jO(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function jO(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ws extends Iy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new wO,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wO(e),this._firestoreClient=void 0,await e}}}function IK(t,e){const n=typeof t=="object"?t:Sj(),r=typeof t=="string"?t:tv,i=hy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=pM("firestore");a&&OK(i,...a)}return i}function sm(t){if(t._terminated)throw new Ae(be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PK(t),t._firestoreClient}function PK(t){const e=t._freezeSettings(),n=CK(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new _K(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(hr.fromBase64String(e))}catch(n){throw new Ae(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(em(e,zi._jsonSchema))return zi.fromBase64String(e.bytes)}}zi._jsonSchemaVersion="firestore/bytes/1.0",zi._jsonSchema={type:kn("string",zi._jsonSchemaVersion),bytes:kn("string")};class Py{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class am{constructor(e){this._methodName=e}}class Gs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gs._jsonSchemaVersion}}static fromJSON(e){if(em(e,Gs._jsonSchema))return new Gs(e.latitude,e.longitude)}}Gs._jsonSchemaVersion="firestore/geoPoint/1.0",Gs._jsonSchema={type:kn("string",Gs._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};class as{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:as._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(em(e,as._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new as(e.vectorValues);throw new Ae(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}as._jsonSchemaVersion="firestore/vectorValue/1.0",as._jsonSchema={type:kn("string",as._jsonSchemaVersion),vectorValues:kn("object")};const RK=/^__.*__$/;class kK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wl(e,this.data,this.fieldMask,n,this.fieldTransforms):new tm(e,this.data,n,this.fieldTransforms)}}class N4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function S4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:t})}}class cE{constructor(e,n,r,i,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new cE({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uv(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(S4(this.dataSource)&&RK.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class DK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ty(e)}createContext(e,n,r,i=!1){return new cE({dataSource:e,methodName:n,targetDoc:r,path:dr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function om(t){const e=t._freezeSettings(),n=Ty(t._databaseId);return new DK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uE(t,e,n,r,i,a={}){const c=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);hE("Data must be an object, but it was:",c,r);const u=C4(r,c);let f,h;if(a.merge)f=new hi(c.fieldMask),h=c.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const y=Nc(e,g,n);if(!c.contains(y))throw new Ae(be.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);P4(p,y)||p.push(y)}f=new hi(p),h=c.fieldTransforms.filter((g=>f.covers(g.field)))}else f=null,h=c.fieldTransforms;return new kK(new Yr(u),f,h)}class Ry extends am{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ry}}class dE extends am{_toFieldTransform(e){return new Bz(e.path,new Ah)}isEqual(e){return e instanceof dE}}class fE extends am{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Oh(e.serializer,zz(e.serializer,this.Vc));return new Bz(e.path,n)}isEqual(e){return e instanceof fE&&this.Vc===e.Vc}}function A4(t,e,n,r){const i=t.createContext(1,e,n);hE("Data must be an object, but it was:",i,r);const a=[],c=Yr.empty();_l(r,((f,h)=>{const p=I4(e,f,n);h=Ft(h);const g=i.childContextForFieldPath(p);if(h instanceof Ry)a.push(p);else{const y=lm(h,g);y!=null&&(a.push(p),c.set(p,y))}}));const u=new hi(a);return new N4(c,u,i.fieldTransforms)}function T4(t,e,n,r,i,a){const c=t.createContext(1,e,n),u=[Nc(e,r,n)],f=[i];if(a.length%2!=0)throw new Ae(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)u.push(Nc(e,a[y])),f.push(a[y+1]);const h=[],p=Yr.empty();for(let y=u.length-1;y>=0;--y)if(!P4(h,u[y])){const x=u[y];let E=f[y];E=Ft(E);const j=c.childContextForFieldPath(x);if(E instanceof Ry)h.push(x);else{const N=lm(E,j);N!=null&&(h.push(x),p.set(x,N))}}const g=new hi(h);return new N4(p,g,c.fieldTransforms)}function MK(t,e,n,r=!1){return lm(n,t.createContext(r?4:3,e))}function lm(t,e){if(O4(t=Ft(t)))return hE("Unsupported field value:",e,t),C4(t,e);if(t instanceof am)return(function(r,i){if(!S4(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const u of r){let f=lm(u,i.childContextForArray(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ye.fromDate(r);return{timestampValue:sv(i.serializer,a)}}if(r instanceof Ye){const a=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sv(i.serializer,a)}}if(r instanceof Gs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:Qz(i.serializer,r._byteString)};if(r instanceof pn){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Hj(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof as)return(function(c,u){const f=c instanceof as?c.toArray():c;return{mapValue:{fields:{[_z]:{stringValue:wz},[nv]:{arrayValue:{values:f.map((p=>{if(typeof p!="number")throw u.createError("VectorValues must only contain numeric values.");return Bj(u.serializer,p)}))}}}}}})(r,i);if(t4(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${vy(r)}`)})(t,e)}function C4(t,e){const n={};return pz(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(t,((r,i)=>{const a=lm(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function O4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Gs||t instanceof zi||t instanceof pn||t instanceof am||t instanceof as||t4(t))}function hE(t,e,n){if(!O4(n)||!hz(n)){const r=vy(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Nc(t,e,n){if((e=Ft(e))instanceof Py)return e._internalPath;if(typeof e=="string")return I4(t,e);throw uv("Field path arguments must be of type string or ",t,!1,void 0,n)}const zK=new RegExp("[~\\*/\\[\\]]");function I4(t,e,n){if(e.search(zK)>=0)throw uv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Py(...e.split("."))._internalPath}catch{throw uv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uv(t,e,n,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new Ae(be.INVALID_ARGUMENT,u+t+f)}function P4(t,e){return t.some((n=>n.isEqual(e)))}class LK{convertValue(e,n="none"){switch(ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _l(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[nv].arrayValue?.values?.map((r=>_n(r.doubleValue)));return new as(n)}convertGeoPoint(e){return new Gs(_n(e.latitude),_n(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jh(e));default:return null}}convertTimestamp(e){const n=ll(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Gt.fromString(e);St(e4(r),9688,{name:e});const i=new Eh(r.get(1),r.get(3)),a=new Ue(r.popFirst(5));return i.isEqual(n)||La(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class mE extends LK{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function nn(){return new dE("serverTimestamp")}function R4(t){return new fE("increment",t)}const EO="@firebase/firestore",NO="4.10.0";function SO(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class k4{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Nc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qK extends k4{data(){return super.data()}}function D4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pE{}class gE extends pE{}function Et(t,e,...n){let r=[];e instanceof pE&&r.push(e),r=r.concat(n),(function(a){const c=a.filter((f=>f instanceof vE)).length,u=a.filter((f=>f instanceof ky)).length;if(c>1||c>0&&u>0)throw new Ae(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class ky extends gE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ky(e,n,r)}_apply(e){const n=this._parse(e);return M4(e._query,n),new Ya(e.firestore,e.converter,ew(e._query,n))}_parse(e){const n=om(e.firestore);return(function(a,c,u,f,h,p,g){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ae(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){TO(g,p);const E=[];for(const j of g)E.push(AO(f,a,j));y={arrayValue:{values:E}}}else y=AO(f,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||TO(g,p),y=MK(u,c,g,p==="in"||p==="not-in");return Rn.create(h,p,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function it(t,e,n){const r=e,i=Nc("where",t);return ky._create(i,r,n)}class vE extends pE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vE(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:us.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let c=i;const u=a.getFlattenedFilters();for(const f of u)M4(c,f),c=ew(c,f)})(e._query,n),new Ya(e.firestore,e.converter,ew(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yE extends gE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yE(e,n)}_apply(e){const n=(function(i,a,c){if(i.startAt!==null)throw new Ae(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ae(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sh(a,c)})(e._query,this._field,this._direction);return new Ya(e.firestore,e.converter,hH(e._query,n))}}function mr(t,e="asc"){const n=e,r=Nc("orderBy",t);return yE._create(r,n)}class bE extends gE{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new bE(e,n,r)}_apply(e){return new Ya(e.firestore,e.converter,iv(e._query,this._limit,this._limitType))}}function hl(t){return LF("limit",t),bE._create("limit",t,"F")}function AO(t,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new Ae(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Oz(e)&&n.indexOf("/")!==-1)throw new Ae(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Gt.fromString(n));if(!Ue.isDocumentKey(r))throw new Ae(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return V2(t,new Ue(r))}if(n instanceof pn)return V2(t,n._key);throw new Ae(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vy(n)}.`)}function TO(t,e){if(!Array.isArray(t)||t.length===0)throw new Ae(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M4(t,e){const n=(function(i,a){for(const c of i)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ae(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function xE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class rh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dc extends k4{constructor(e,n,r,i,a,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=dc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}dc._jsonSchemaVersion="firestore/documentSnapshot/1.0",dc._jsonSchema={type:kn("string",dc._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class Mg extends dc{data(e={}){return super.data(e)}}class fc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new rh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Mg(this._firestore,this._userDataWriter,r.key,r,new rh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((u=>{const f=new Mg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new rh(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const f=new Mg(i._firestore,i._userDataWriter,u.doc.key,u.doc,new rh(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return u.type!==0&&(h=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:UK(u.type),doc:f,oldIndex:h,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mj.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:t})}}fc._jsonSchemaVersion="firestore/querySnapshot/1.0",fc._jsonSchema={type:kn("string",fc._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class VK{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=om(e)}set(e,n,r){this._verifyNotCommitted();const i=Fx(e,this._firestore),a=xE(i.converter,n,r),c=uE(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(c.toMutation(i._key,Ir.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Fx(e,this._firestore);let c;return c=typeof(n=Ft(n))=="string"||n instanceof Py?T4(this._dataReader,"WriteBatch.update",a._key,n,r,i):A4(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fx(e,this._firestore);return this._mutations=this._mutations.concat(new Sy(n._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fx(t,e){if((t=Ft(t)).firestore!==e)throw new Ae(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Pr(t){t=Or(t,pn);const e=Or(t.firestore,Ws),n=sm(e);return NK(n,t._key).then((r=>L4(e,t,r)))}function Nt(t){t=Or(t,Ya);const e=Or(t.firestore,Ws),n=sm(e),r=new mE(e);return D4(t._query),SK(n,t._query).then((i=>new fc(e,r,t,i)))}function _E(t,e,n){t=Or(t,pn);const r=Or(t.firestore,Ws),i=xE(t.converter,e,n),a=om(r);return cm(r,[uE(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ir.none())])}function sn(t,e,n,...r){t=Or(t,pn);const i=Or(t.firestore,Ws),a=om(i);let c;return c=typeof(e=Ft(e))=="string"||e instanceof Py?T4(a,"updateDoc",t._key,e,n,r):A4(a,"updateDoc",t._key,e),cm(i,[c.toMutation(t._key,Ir.exists(!0))])}function Ad(t){return cm(Or(t.firestore,Ws),[new Sy(t._key,Ir.none())])}function Bi(t,e){const n=Or(t.firestore,Ws),r=Qe(t),i=xE(t.converter,e),a=om(t.firestore);return cm(n,[uE(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ir.exists(!1))]).then((()=>r))}function z4(t,...e){t=Ft(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||SO(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(SO(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let a,c,u;if(t instanceof pn)c=Or(t.firestore,Ws),u=_y(t._key.path),a={next:h=>{e[r]&&e[r](L4(c,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Or(t,Ya);c=Or(h.firestore,Ws),u=h._query;const p=new mE(c);a={next:g=>{e[r]&&e[r](new fc(c,p,h,g))},error:e[r+1],complete:e[r+2]},D4(t._query)}const f=sm(c);return EK(f,u,i,a)}function cm(t,e){const n=sm(t);return AK(n,e)}function L4(t,e,n){const r=n.docs.get(e._key),i=new mE(t);return new dc(t,i,e._key,r,new rh(n.hasPendingWrites,n.fromCache),e.converter)}function Ih(t){return t=Or(t,Ws),sm(t),new VK(t,(e=>cm(t,e)))}(function(e,n=!0){SF(Mc),xc(new al("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new Ws(new CF(r.getProvider("auth-internal")),new PF(c,r.getProvider("app-check-internal")),YF(c,i),c);return a={useFetchStreams:n,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),Vs(EO,NO,e),Vs(EO,NO,"esm2020")})();var BK="firebase",$K="12.8.0";Vs(BK,$K,"app");const q4="firebasestorage.googleapis.com",U4="storageBucket",FK=120*1e3,HK=600*1e3;class vn extends ta{constructor(e,n,r=0){super(Hx(e),`Firebase Storage: ${n} (${Hx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gn||(gn={}));function Hx(t){return"storage/"+t}function wE(){const t="An unknown error occurred, please check the error payload for server response.";return new vn(gn.UNKNOWN,t)}function GK(t){return new vn(gn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function KK(t){return new vn(gn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function QK(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vn(gn.UNAUTHENTICATED,t)}function WK(){return new vn(gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YK(t){return new vn(gn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function XK(){return new vn(gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JK(){return new vn(gn.CANCELED,"User canceled the upload/download.")}function ZK(t){return new vn(gn.INVALID_URL,"Invalid URL '"+t+"'.")}function eQ(t){return new vn(gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function tQ(){return new vn(gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+U4+"' property when initializing the app?")}function nQ(){return new vn(gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rQ(){return new vn(gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function iQ(t){return new vn(gn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function uw(t){return new vn(gn.INVALID_ARGUMENT,t)}function V4(){return new vn(gn.APP_DELETED,"The Firebase app was deleted.")}function sQ(t){return new vn(gn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ph(t,e){return new vn(gn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uf(t){throw new vn(gn.INTERNAL_ERROR,"Internal error: "+t)}class mi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=mi.makeFromUrl(e,n)}catch{return new mi(e,"")}if(r.path==="")return r;throw eQ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function h(C){C.path_=decodeURIComponent(C.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",x=new RegExp(`^https?://${g}/${p}/b/${i}/o${y}`,"i"),E={bucket:1,path:3},j=n===q4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",A=new RegExp(`^https?://${j}/${i}/${N}`,"i"),O=[{regex:u,indices:f,postModify:a},{regex:x,indices:E,postModify:h},{regex:A,indices:{bucket:1,path:2},postModify:h}];for(let C=0;C<O.length;C++){const V=O[C],$=V.regex.exec(e);if($){const D=$[V.indices.bucket];let P=$[V.indices.path];P||(P=""),r=new mi(D,P),V.postModify(r);break}}if(r==null)throw ZK(e);return r}}class aQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function oQ(t,e,n){let r=1,i=null,a=null,c=!1,u=0;function f(){return u===2}let h=!1;function p(...N){h||(h=!0,e.apply(null,N))}function g(N){i=setTimeout(()=>{i=null,t(x,f())},N)}function y(){a&&clearTimeout(a)}function x(N,...A){if(h){y();return}if(N){y(),p.call(null,N,...A);return}if(f()||c){y(),p.call(null,N,...A);return}r<64&&(r*=2);let O;u===1?(u=2,O=0):O=(r+Math.random())*1e3,g(O)}let E=!1;function j(N){E||(E=!0,y(),!h&&(i!==null?(N||(u=2),clearTimeout(i),g(0)):N||(u=1)))}return g(0),a=setTimeout(()=>{c=!0,j(!0)},n),j}function lQ(t){t(!1)}function cQ(t){return t!==void 0}function uQ(t){return typeof t=="object"&&!Array.isArray(t)}function jE(t){return typeof t=="string"||t instanceof String}function CO(t){return EE()&&t instanceof Blob}function EE(){return typeof Blob<"u"}function OO(t,e,n,r){if(r<e)throw uw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw uw(`Invalid value for '${t}'. Expected ${n} or less.`)}function Dy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function B4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var hc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hc||(hc={}));function dQ(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}class fQ{constructor(e,n,r,i,a,c,u,f,h,p,g,y=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=f,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,j)=>{this.resolve_=E,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new rg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const f=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,h)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===hc.NO_ERROR,f=a.getStatus();if(!u||dQ(f,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===hc.ABORT;r(!1,new rg(!1,null,p));return}const h=this.successCodes_.indexOf(f)!==-1;r(!0,new rg(h,a))})},n=(r,i)=>{const a=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(u,u.getResponse());cQ(f)?a(f):a()}catch(f){c(f)}else if(u!==null){const f=wE();f.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,f)):c(f)}else if(i.canceled){const f=this.appDelete_?V4():JK();c(f)}else{const f=XK();c(f)}};this.canceled_?n(!1,new rg(!1,null,!0)):this.backoffId_=oQ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function hQ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function mQ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pQ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gQ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function vQ(t,e,n,r,i,a,c=!0,u=!1){const f=B4(t.urlParams),h=t.url+f,p=Object.assign({},t.headers);return pQ(p,e),hQ(p,n),mQ(p,a),gQ(p,r),new fQ(h,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,u)}function yQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function bQ(...t){const e=yQ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(EE())return new Blob(t);throw new vn(gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xQ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function _Q(t){if(typeof atob>"u")throw iQ("base-64");return atob(t)}const Ls={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gx{constructor(e,n){this.data=e,this.contentType=n||null}}function wQ(t,e){switch(t){case Ls.RAW:return new Gx($4(e));case Ls.BASE64:case Ls.BASE64URL:return new Gx(F4(t,e));case Ls.DATA_URL:return new Gx(EQ(e),NQ(e))}throw wE()}function $4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,c=t.charCodeAt(++n);r=65536|(a&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function jQ(t){let e;try{e=decodeURIComponent(t)}catch{throw ph(Ls.DATA_URL,"Malformed data URL.")}return $4(e)}function F4(t,e){switch(t){case Ls.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw ph(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ls.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw ph(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_Q(e)}catch(i){throw i.message.includes("polyfill")?i:ph(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class H4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ph(Ls.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=SQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function EQ(t){const e=new H4(t);return e.base64?F4(Ls.BASE64,e.rest):jQ(e.rest)}function NQ(t){return new H4(t).contentType}function SQ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Qo{constructor(e,n){let r=0,i="";CO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(CO(this.data_)){const r=this.data_,i=xQ(r,e,n);return i===null?null:new Qo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Qo(r,!0)}}static getBlob(...e){if(EE()){const n=e.map(r=>r instanceof Qo?r.data_:r);return new Qo(bQ.apply(null,n))}else{const n=e.map(c=>jE(c)?wQ(Ls.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(c=>{for(let u=0;u<c.length;u++)i[a++]=c[u]}),new Qo(i,!0)}}uploadData(){return this.data_}}function G4(t){let e;try{e=JSON.parse(t)}catch{return null}return uQ(e)?e:null}function AQ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function TQ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function K4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function CQ(t,e){return e}class Ar{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||CQ}}let ig=null;function OQ(t){return!jE(t)||t.length<2?t:K4(t)}function Q4(){if(ig)return ig;const t=[];t.push(new Ar("bucket")),t.push(new Ar("generation")),t.push(new Ar("metageneration")),t.push(new Ar("name","fullPath",!0));function e(a,c){return OQ(c)}const n=new Ar("name");n.xform=e,t.push(n);function r(a,c){return c!==void 0?Number(c):c}const i=new Ar("size");return i.xform=r,t.push(i),t.push(new Ar("timeCreated")),t.push(new Ar("updated")),t.push(new Ar("md5Hash",null,!0)),t.push(new Ar("cacheControl",null,!0)),t.push(new Ar("contentDisposition",null,!0)),t.push(new Ar("contentEncoding",null,!0)),t.push(new Ar("contentLanguage",null,!0)),t.push(new Ar("contentType",null,!0)),t.push(new Ar("metadata","customMetadata",!0)),ig=t,ig}function IQ(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new mi(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function PQ(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const c=n[a];r[c.local]=c.xform(r,e[c.server])}return IQ(r,t),r}function W4(t,e,n){const r=G4(e);return r===null?null:PQ(t,r,n)}function RQ(t,e,n,r){const i=G4(e);if(i===null||!jE(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(h=>{const p=t.bucket,g=t.fullPath,y="/b/"+c(p)+"/o/"+c(g),x=Dy(y,n,r),E=B4({alt:"media",token:h});return x+E})[0]}function kQ(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class NE{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Y4(t){if(!t)throw wE()}function DQ(t,e){function n(r,i){const a=W4(t,i,e);return Y4(a!==null),a}return n}function MQ(t,e){function n(r,i){const a=W4(t,i,e);return Y4(a!==null),RQ(a,i,t.host,t._protocol)}return n}function X4(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=WK():i=QK():n.getStatus()===402?i=KK(t.bucket):n.getStatus()===403?i=YK(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function J4(t){const e=X4(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=GK(t.path)),a.serverResponse=i.serverResponse,a}return n}function zQ(t,e,n){const r=e.fullServerUrl(),i=Dy(r,t.host,t._protocol),a="GET",c=t.maxOperationRetryTime,u=new NE(i,a,MQ(t,n),c);return u.errorHandler=J4(e),u}function LQ(t,e){const n=e.fullServerUrl(),r=Dy(n,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function c(f,h){}const u=new NE(r,i,c,a);return u.successCodes=[200,204],u.errorHandler=J4(e),u}function qQ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function UQ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=qQ(null,e)),r}function VQ(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let O="";for(let C=0;C<2;C++)O=O+Math.random().toString().slice(2);return O}const f=u();c["Content-Type"]="multipart/related; boundary="+f;const h=UQ(e,r,i),p=kQ(h,n),g="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+f+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+f+"--",x=Qo.getBlob(g,r,y);if(x===null)throw nQ();const E={name:h.fullPath},j=Dy(a,t.host,t._protocol),N="POST",A=t.maxUploadRetryTime,k=new NE(j,N,DQ(t,n),A);return k.urlParams=E,k.headers=c,k.body=x.uploadData(),k.errorHandler=X4(e),k}class BQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw Uf("cannot .send() more than once");if(bl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $Q extends BQ{initXhr(){this.xhr_.responseType="text"}}function SE(){return new $Q}class Sc{constructor(e,n){this._service=e,n instanceof mi?this._location=n:this._location=mi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sc(e,n)}get root(){const e=new mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K4(this._location.path)}get storage(){return this._service}get parent(){const e=AQ(this._location.path);if(e===null)return null;const n=new mi(this._location.bucket,e);return new Sc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw sQ(e)}}function FQ(t,e,n){t._throwIfRoot("uploadBytes");const r=VQ(t.storage,t._location,Q4(),new Qo(e,!0),n);return t.storage.makeRequestWithTokens(r,SE).then(i=>({metadata:i,ref:t}))}function HQ(t){t._throwIfRoot("getDownloadURL");const e=zQ(t.storage,t._location,Q4());return t.storage.makeRequestWithTokens(e,SE).then(n=>{if(n===null)throw rQ();return n})}function GQ(t){t._throwIfRoot("deleteObject");const e=LQ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,SE)}function KQ(t,e){const n=TQ(t._location.path,e),r=new mi(t._location.bucket,n);return new Sc(t.storage,r)}function QQ(t){return/^[A-Za-z]+:\/\//.test(t)}function WQ(t,e){return new Sc(t,e)}function Z4(t,e){if(t instanceof AE){const n=t;if(n._bucket==null)throw tQ();const r=new Sc(n,n._bucket);return e!=null?Z4(r,e):r}else return e!==void 0?KQ(t,e):t}function YQ(t,e){if(e&&QQ(e)){if(t instanceof AE)return WQ(t,e);throw uw("To use ref(service, url), the first argument must be a Storage instance.")}else return Z4(t,e)}function IO(t,e){const n=e?.[U4];return n==null?null:mi.makeFromBucketSpec(n,t)}function XQ(t,e,n,r={}){t.host=`${e}:${n}`;const i=bl(e);i&&(wj(`https://${t.host}/b`),jj("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:yM(a,t.app.options.projectId))}class AE{constructor(e,n,r,i,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=q4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FK,this._maxUploadRetryTime=HK,this._requests=new Set,i!=null?this._bucket=mi.makeFromBucketSpec(i,this._host):this._bucket=IO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mi.makeFromBucketSpec(this._url,e):this._bucket=IO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sc(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new aQ(V4());{const c=vQ(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const PO="@firebase/storage",RO="0.14.0";const eL="storage";function JQ(t,e,n){return t=Ft(t),FQ(t,e,n)}function ZQ(t){return t=Ft(t),HQ(t)}function eW(t){return t=Ft(t),GQ(t)}function kO(t,e){return t=Ft(t),YQ(t,e)}function tW(t=Sj(),e){t=Ft(t);const r=hy(t,eL).getImmediate({identifier:e}),i=pM("storage");return i&&nW(r,...i),r}function nW(t,e,n,r={}){XQ(t,e,n,r)}function rW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new AE(n,r,i,e,Mc)}function iW(){xc(new al(eL,rW,"PUBLIC").setMultipleInstances(!0)),Vs(PO,RO,""),Vs(PO,RO,"esm2020")}iW();const sW={apiKey:"AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",authDomain:"pedaclic.firebaseapp.com",projectId:"pedaclic",storageBucket:"pedaclic.firebasestorage.app",messagingSenderId:"863649621890",appId:"1:863649621890:web:6ab56a8c8db111e3a9119b"},TE=_M(sW),sg=EF(TE),Ne=IK(TE),DO=tW(TE),MO={"auth/email-already-in-use":"Cette adresse email est dj utilise.","auth/invalid-email":"Adresse email invalide.","auth/operation-not-allowed":"Opration non autorise.","auth/weak-password":"Le mot de passe doit contenir au moins 6 caractres.","auth/user-disabled":"Ce compte a t dsactiv.","auth/user-not-found":"Aucun compte associ  cette adresse email.","auth/wrong-password":"Mot de passe incorrect.","auth/too-many-requests":"Trop de tentatives. Veuillez ressayer plus tard.","auth/network-request-failed":"Erreur de connexion. Vrifiez votre connexion internet.",default:"Une erreur est survenue. Veuillez ressayer."},zO=t=>MO[t]||MO.default,tL=w.createContext(null),aW=({children:t})=>{const[e,n]=w.useState(null),[r,i]=w.useState(!0),a=async y=>{try{const x=await Pr(Qe(Ne,"users",y));if(x.exists()){const E=x.data();return{uid:y,email:E.email,displayName:E.displayName,role:E.role,isPremium:E.isPremium||!1,subscriptionEnd:E.subscriptionEnd?.toDate()||null,photoURL:E.photoURL,createdAt:E.createdAt?.toDate()||new Date,lastLogin:E.lastLogin?.toDate()}}return null}catch(x){return console.error("Erreur lors de la rcupration des donnes utilisateur:",x),null}},c=async(y,x)=>{const E=Qe(Ne,"users",y.uid);(await Pr(E)).exists()?await sn(E,{lastLogin:nn()}):await _E(E,{email:y.email,displayName:y.displayName||x?.displayName||"",role:x?.role||"eleve",isPremium:!1,photoURL:y.photoURL,createdAt:nn(),lastLogin:nn()})},u=async(y,x)=>{try{const E=await o$(sg,y,x);await c(E.user)}catch(E){throw new Error(zO(E.code))}},f=async y=>{try{if(y.password!==y.confirmPassword)throw new Error("Les mots de passe ne correspondent pas.");const x=await a$(sg,y.email,y.password);await c$(x.user,{displayName:y.displayName}),await c(x.user,{displayName:y.displayName,role:y.role})}catch(x){throw x.message?x:new Error(zO(x.code))}},h=async()=>{try{await h$(sg),n(null)}catch{throw new Error("Erreur lors de la dconnexion.")}},p=async y=>{if(!e)throw new Error("Aucun utilisateur connect.");try{const x=Qe(Ne,"users",e.uid);await sn(x,{...y,updatedAt:nn()}),n(E=>E?{...E,...y}:null)}catch{throw new Error("Erreur lors de la mise  jour du profil.")}};w.useEffect(()=>{const y=f$(sg,async x=>{if(x){const E=await a(x.uid);n(E)}else n(null);i(!1)});return()=>y()},[]);const g={currentUser:e,loading:r,login:u,register:f,logout:h,updateProfile:p};return o.jsx(tL.Provider,{value:g,children:r?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement..."})]}):t})},Vn=()=>{const t=w.useContext(tL);if(!t)throw new Error("useAuth doit tre utilis  l'intrieur d'un AuthProvider");return t},CE=({children:t,allowedRoles:e,requirePremium:n=!1})=>{const{currentUser:r,loading:i}=Vn();return i?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Vrification des autorisations..."})]}):r?e&&!e.includes(r.role)?o.jsxs("div",{className:"error-container",children:[o.jsx("h2",{children:"Accs non autoris"}),o.jsx("p",{children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),o.jsx("a",{href:"/",className:"btn btn-primary",children:"Retour  l'accueil"})]}):n&&!r.isPremium?o.jsxs("div",{className:"error-container premium-required",children:[o.jsx("h2",{children:"Contenu Premium"}),o.jsx("p",{children:"Cette ressource est rserve aux abonns Premium."}),o.jsxs("div",{className:"premium-cta",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"2 000 FCFA/mois"})," ou ",o.jsx("strong",{children:"20 000 FCFA/an"})]}),o.jsx("a",{href:"/premium",className:"btn btn-premium",children:"Devenir Premium"})]})]}):o.jsx(o.Fragment,{children:t}):o.jsxs("div",{className:"error-container",children:[o.jsx("h2",{children:"Accs refus"}),o.jsx("p",{children:"Vous devez tre connect pour accder  cette page."}),o.jsx("a",{href:"/connexion",className:"btn btn-primary",children:"Se connecter"})]})},wa=({children:t})=>o.jsx(CE,{allowedRoles:["admin"],children:t}),oW=({children:t})=>o.jsx(CE,{allowedRoles:["admin","prof"],children:t});const lW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),LO=t=>{const e=cW(t);return e.charAt(0).toUpperCase()+e.slice(1)},nL=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),uW=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var dW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fW=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...u},f)=>w.createElement("svg",{ref:f,...dW,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nL("lucide",i),...!a&&!uW(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,p])=>w.createElement(h,p)),...Array.isArray(a)?a:[a]]));const Me=(t,e)=>{const n=w.forwardRef(({className:r,...i},a)=>w.createElement(fW,{ref:a,iconNode:e,className:nL(`lucide-${lW(LO(t))}`,`lucide-${t}`,r),...i}));return n.displayName=LO(t),n};const hW=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Kx=Me("arrow-left",hW);const mW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],nc=Me("arrow-right",mW);const pW=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ml=Me("award",pW);const gW=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],os=Me("book-open",gW);const vW=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Qx=Me("calendar",vW);const yW=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mc=Me("chart-column",yW);const bW=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dv=Me("chevron-down",bW);const xW=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dw=Me("chevron-up",xW);const _W=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fv=Me("circle-alert",_W);const wW=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fn=Me("circle-check-big",wW);const jW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zg=Me("circle-question-mark",jW);const EW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fw=Me("circle-x",EW);const NW=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ld=Me("clock",NW);const SW=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],AW=Me("copy",SW);const TW=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ih=Me("crown",TW);const CW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ju=Me("eye",CW);const OW=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],IW=Me("facebook",OW);const PW=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],RW=Me("file-text",PW);const kW=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],OE=Me("funnel",kW);const DW=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],cd=Me("graduation-cap",DW);const MW=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],zW=Me("grip-vertical",MW);const LW=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],qW=Me("heart",LW);const UW=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],hw=Me("house",UW);const VW=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],BW=Me("instagram",VW);const $W=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],qO=Me("layout-dashboard",$W);const FW=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],HW=Me("linkedin",FW);const GW=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mw=Me("lock",GW);const KW=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UO=Me("log-out",KW);const QW=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],WW=Me("mail",QW);const YW=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],XW=Me("map-pin",YW);const JW=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],ZW=Me("menu",JW);const eY=[["path",{d:"M5 12h14",key:"1ays0h"}]],tY=Me("minus",eY);const nY=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rY=Me("pen-line",nY);const iY=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],sY=Me("phone",iY);const aY=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],gh=Me("play",aY);const oY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ag=Me("plus",oY);const lY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],cY=Me("refresh-cw",lY);const uY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],dY=Me("rotate-ccw",uY);const fY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hY=Me("save",fY);const mY=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rL=Me("search",mY);const pY=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gY=Me("settings",pY);const vY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],IE=Me("shield",vY);const yY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],pi=Me("star",yY);const bY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wx=Me("target",bY);const xY=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],_Y=Me("timer",xY);const wY=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],VO=Me("trash-2",wY);const jY=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],EY=Me("trending-down",jY);const NY=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],sh=Me("trending-up",NY);const SY=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],iL=Me("trophy",SY);const AY=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],TY=Me("twitter",AY);const CY=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],OY=Me("user-check",CY);const IY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],PY=Me("user-x",IY);const RY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kY=Me("user",RY);const DY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Lg=Me("users",DY);const MY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pc=Me("x",MY);const zY=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],LY=Me("youtube",zY);const qY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],sL=Me("zap",qY),UY=()=>{const{currentUser:t,logout:e,loading:n}=Vn(),r=Dr(),i=yl(),[a,c]=w.useState(!1),[u,f]=w.useState(!1),[h,p]=w.useState(!1),g=w.useRef(null),y=[{path:"/",label:"Accueil",icon:o.jsx(hw,{size:18})},{path:"/disciplines",label:"Disciplines",icon:o.jsx(os,{size:18})},{path:"/quiz",label:"Quiz",icon:o.jsx(cd,{size:18}),requireAuth:!0,requirePremium:!0},{path:t?.role==="eleve"?"/eleve/dashboard":t?.role==="prof"?"/prof/dashboard":"/admin",label:"Tableau de bord",icon:o.jsx(qO,{size:18}),requireAuth:!0},{path:"/parent/dashboard",label:"Espace Parent",icon:o.jsx(mc,{size:18}),requireAuth:!0,requireRole:["parent"]}];w.useEffect(()=>{const C=V=>{g.current&&!g.current.contains(V.target)&&f(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),w.useEffect(()=>{c(!1),f(!1)},[i.pathname]),w.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]);const x=async()=>{try{p(!0),await e(),f(!1),r("/")}catch(C){console.error("Erreur lors de la dconnexion:",C)}finally{p(!1)}},E=()=>{c(!a)},j=()=>{f(!u)},N=C=>!(C.requireAuth&&!t||C.requirePremium&&t&&!t.isPremium||C.requireRole&&t&&!C.requireRole.includes(t.role)),A=C=>C==="/"?i.pathname==="/":i.pathname.startsWith(C),k=C=>({admin:"Administrateur",prof:"Professeur",eleve:"lve",parent:"Parent"})[C]||C,O=()=>t?t.displayName?t.displayName.split(" ").map(V=>V[0]).join("").toUpperCase().slice(0,2):t.email[0].toUpperCase():"?";return o.jsxs("header",{className:"header",children:[o.jsxs("div",{className:"header__container",children:[o.jsxs(nt,{to:"/",className:"header__logo",children:[o.jsx(cd,{className:"header__logo-icon",size:32}),o.jsxs("div",{className:"header__logo-text",children:[o.jsx("span",{className:"header__logo-name",children:"PedaClic"}),o.jsx("span",{className:"header__logo-tagline",children:"L'cole en un clic"})]})]}),o.jsx("nav",{className:"header__nav header__nav--desktop",children:o.jsx("ul",{className:"header__nav-list",children:y.map(C=>N(C)&&o.jsx("li",{className:"header__nav-item",children:o.jsxs(nt,{to:C.path,className:`header__nav-link ${A(C.path)?"header__nav-link--active":""}`,children:[C.icon,o.jsx("span",{children:C.label}),C.requirePremium&&o.jsx(ih,{size:14,className:"header__premium-badge"})]})},C.path))})}),o.jsxs("div",{className:"header__actions",children:[n?o.jsx("div",{className:"header__loading",children:o.jsx("div",{className:"header__spinner"})}):t?o.jsxs("div",{className:"header__user",ref:g,children:[t.isPremium&&o.jsxs("span",{className:"header__premium-tag",children:[o.jsx(ih,{size:14}),"Premium"]}),o.jsxs("button",{className:"header__user-button",onClick:j,"aria-expanded":u,"aria-haspopup":"true",children:[o.jsx("div",{className:"header__avatar",children:t.photoURL?o.jsx("img",{src:t.photoURL,alt:t.displayName||"Avatar",className:"header__avatar-img"}):o.jsx("span",{className:"header__avatar-initials",children:O()})}),o.jsx("span",{className:"header__user-name",children:t.displayName||t.email.split("@")[0]}),o.jsx(dv,{size:16,className:`header__chevron ${u?"header__chevron--open":""}`})]}),u&&o.jsxs("div",{className:"header__dropdown",children:[o.jsxs("div",{className:"header__dropdown-header",children:[o.jsx("p",{className:"header__dropdown-email",children:t.email}),o.jsx("span",{className:`header__dropdown-role header__dropdown-role--${t.role}`,children:k(t.role)})]}),o.jsx("div",{className:"header__dropdown-divider"}),o.jsxs("nav",{className:"header__dropdown-nav",children:[o.jsxs(nt,{to:t.role==="eleve"?"/eleve/dashboard":t.role==="prof"?"/prof/dashboard":"/admin",className:"header__dropdown-link",children:[o.jsx(qO,{size:18}),o.jsx("span",{children:"Tableau de bord"})]}),t.role==="eleve"&&o.jsxs(nt,{to:"/eleve/suivi",className:"header__dropdown-link",children:[o.jsx(mc,{size:18}),o.jsx("span",{children:"Mes points  amliorer"})]}),t.role==="parent"&&o.jsxs(nt,{to:"/parent/dashboard",className:"header__dropdown-link",children:[o.jsx(mc,{size:18}),o.jsx("span",{children:"Espace Parent"})]}),o.jsxs(nt,{to:"/profil",className:"header__dropdown-link",children:[o.jsx(kY,{size:18}),o.jsx("span",{children:"Mon profil"})]}),t.role==="admin"&&o.jsxs(nt,{to:"/admin",className:"header__dropdown-link",children:[o.jsx(gY,{size:18}),o.jsx("span",{children:"Administration"})]}),!t.isPremium&&o.jsxs(nt,{to:"/premium",className:"header__dropdown-link header__dropdown-link--premium",children:[o.jsx(ih,{size:18}),o.jsx("span",{children:"Passer Premium"})]})]}),o.jsx("div",{className:"header__dropdown-divider"}),o.jsxs("button",{className:"header__dropdown-logout",onClick:x,disabled:h,children:[o.jsx(UO,{size:18}),o.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]}):o.jsxs("div",{className:"header__auth-buttons",children:[o.jsx(nt,{to:"/connexion",className:"header__btn header__btn--outline",children:"Connexion"}),o.jsx(nt,{to:"/inscription",className:"header__btn header__btn--primary",children:"S'inscrire"})]}),o.jsx("button",{className:"header__mobile-toggle",onClick:E,"aria-label":a?"Fermer le menu":"Ouvrir le menu","aria-expanded":a,children:a?o.jsx(pc,{size:24}):o.jsx(ZW,{size:24})})]})]}),o.jsxs("div",{className:`header__mobile-menu ${a?"header__mobile-menu--open":""}`,children:[o.jsx("div",{className:"header__mobile-overlay",onClick:()=>c(!1)}),o.jsxs("div",{className:"header__mobile-content",children:[o.jsx("nav",{className:"header__mobile-nav",children:o.jsx("ul",{className:"header__mobile-list",children:y.map(C=>N(C)&&o.jsx("li",{className:"header__mobile-item",children:o.jsxs(nt,{to:C.path,className:`header__mobile-link ${A(C.path)?"header__mobile-link--active":""}`,children:[C.icon,o.jsx("span",{children:C.label}),C.requirePremium&&o.jsx(ih,{size:14,className:"header__premium-badge"})]})},C.path))})}),!t&&o.jsxs("div",{className:"header__mobile-auth",children:[o.jsx(nt,{to:"/connexion",className:"header__btn header__btn--outline header__btn--block",children:"Connexion"}),o.jsx(nt,{to:"/inscription",className:"header__btn header__btn--primary header__btn--block",children:"S'inscrire"})]}),t&&o.jsxs("div",{className:"header__mobile-user",children:[o.jsxs("div",{className:"header__mobile-user-info",children:[o.jsx("div",{className:"header__avatar header__avatar--large",children:t.photoURL?o.jsx("img",{src:t.photoURL,alt:t.displayName||"Avatar",className:"header__avatar-img"}):o.jsx("span",{className:"header__avatar-initials",children:O()})}),o.jsxs("div",{className:"header__mobile-user-details",children:[o.jsx("p",{className:"header__mobile-user-name",children:t.displayName||t.email.split("@")[0]}),o.jsx("p",{className:"header__mobile-user-email",children:t.email})]})]}),o.jsxs("button",{className:"header__mobile-logout",onClick:x,disabled:h,children:[o.jsx(UO,{size:18}),o.jsx("span",{children:h?"Dconnexion...":"Se dconnecter"})]})]})]})]})]})},VY=()=>{const t=new Date().getFullYear(),e=[{label:"Accueil",path:"/"},{label:"Disciplines",path:"/disciplines"},{label:"Quiz Premium",path:"/quiz"},{label:"Tarifs",path:"/premium"},{label:"Tableau de bord",path:"/dashboard"}],n=[{label:"Cours en ligne",path:"/disciplines"},{label:"Exercices corrigs",path:"/disciplines"},{label:"Annales examens",path:"/disciplines"},{label:"Fiches de rvision",path:"/disciplines"}],r=[{name:"Facebook",url:"https://facebook.com/pedaclic",icon:o.jsx(IW,{size:20})},{name:"Twitter",url:"https://twitter.com/pedaclic",icon:o.jsx(TY,{size:20})},{name:"Instagram",url:"https://instagram.com/pedaclic",icon:o.jsx(BW,{size:20})},{name:"LinkedIn",url:"https://linkedin.com/company/pedaclic",icon:o.jsx(HW,{size:20})},{name:"YouTube",url:"https://youtube.com/@pedaclic",icon:o.jsx(LY,{size:20})}];return o.jsxs("footer",{className:"footer",children:[o.jsx("div",{className:"footer__main",children:o.jsxs("div",{className:"footer__container",children:[o.jsxs("div",{className:"footer__column footer__column--about",children:[o.jsxs(nt,{to:"/",className:"footer__logo",children:[o.jsx(cd,{className:"footer__logo-icon",size:36}),o.jsxs("div",{className:"footer__logo-text",children:[o.jsx("span",{className:"footer__logo-name",children:"PedaClic"}),o.jsx("span",{className:"footer__logo-tagline",children:"L'cole en un clic"})]})]}),o.jsx("p",{className:"footer__description",children:"PedaClic est la plateforme ducative de rfrence au Sngal. Nous accompagnons les lves du collge au lyce avec des cours, exercices et quiz de qualit."}),o.jsxs("div",{className:"footer__stats",children:[o.jsxs("div",{className:"footer__stat",children:[o.jsx(os,{size:18}),o.jsx("span",{children:"500+ cours"})]}),o.jsxs("div",{className:"footer__stat",children:[o.jsx(Lg,{size:18}),o.jsx("span",{children:"10 000+ lves"})]})]})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Plateforme"]}),o.jsx("nav",{className:"footer__nav",children:o.jsx("ul",{className:"footer__list",children:e.map((i,a)=>o.jsx("li",{className:"footer__item",children:o.jsx(nt,{to:i.path,className:"footer__link",children:i.label})},a))})})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Ressources"]}),o.jsx("nav",{className:"footer__nav",children:o.jsx("ul",{className:"footer__list",children:n.map((i,a)=>o.jsx("li",{className:"footer__item",children:o.jsx(nt,{to:i.path,className:"footer__link",children:i.label})},a))})})]}),o.jsxs("div",{className:"footer__column",children:[o.jsxs("h3",{className:"footer__title",children:[o.jsx("span",{className:"footer__title-icon",children:""}),"Contact"]}),o.jsxs("div",{className:"footer__contact",children:[o.jsxs("a",{href:"mailto:contact@pedaclic.sn",className:"footer__contact-item",children:[o.jsx(WW,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"contact@pedaclic.sn"})]}),o.jsxs("a",{href:"tel:+221770000000",className:"footer__contact-item",children:[o.jsx(sY,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"+221 77 000 00 00"})]}),o.jsxs("div",{className:"footer__contact-item",children:[o.jsx(XW,{size:16,className:"footer__contact-icon"}),o.jsx("span",{children:"Dakar, Sngal"})]})]}),o.jsxs("div",{className:"footer__social",children:[o.jsx("h4",{className:"footer__social-title",children:"Suivez-nous"}),o.jsx("div",{className:"footer__social-links",children:r.map((i,a)=>o.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"footer__social-link",title:i.name,children:i.icon},a))})]})]})]})}),o.jsx("div",{className:"footer__bottom",children:o.jsxs("div",{className:"footer__container footer__bottom-content",children:[o.jsxs("p",{className:"footer__copyright",children:[" ",t," PedaClic. Tous droits rservs."]}),o.jsxs("p",{className:"footer__made-with",children:["Fait avec ",o.jsx(qW,{size:14,className:"footer__heart"})," au Sngal "]}),o.jsxs("nav",{className:"footer__legal",children:[o.jsxs(nt,{to:"/mentions-legales",className:"footer__legal-link",children:[o.jsx(RW,{size:14})," Mentions lgales"]}),o.jsxs(nt,{to:"/confidentialite",className:"footer__legal-link",children:[o.jsx(IE,{size:14})," Confidentialit"]}),o.jsxs(nt,{to:"/aide",className:"footer__legal-link",children:[o.jsx(zg,{size:14})," Aide"]})]})]})})]})},Ps=({children:t,hideHeader:e=!1,hideFooter:n=!1,className:r=""})=>o.jsxs("div",{className:"layout",children:[!e&&o.jsx(UY,{}),o.jsx("main",{className:`layout__main ${e?"":"layout__main--with-header"} ${r}`,children:t}),!n&&o.jsx(VY,{})]}),BY=()=>{const{currentUser:t}=Vn();return o.jsxs("div",{className:"home-page",children:[o.jsxs("section",{className:"home-page__hero",children:[o.jsxs("div",{className:"home-page__hero-content",children:[o.jsxs("div",{className:"home-page__hero-badge",children:[o.jsx(pi,{size:14}),o.jsx("span",{children:"Plateforme N1 au Sngal"})]}),o.jsxs("h1",{className:"home-page__hero-title",children:["Russis tes examens avec",o.jsx("span",{className:"home-page__hero-highlight",children:" PedaClic"})]}),o.jsx("p",{className:"home-page__hero-subtitle",children:"La plateforme ducative qui accompagne les lves sngalais du collge au lyce avec des cours, exercices et quiz de qualit."}),o.jsx("div",{className:"home-page__hero-cta",children:t?o.jsxs(nt,{to:t.role==="eleve"?"/eleve/dashboard":t.role==="prof"?"/prof/dashboard":"/admin",className:"home-page__btn home-page__btn--primary",children:["  Accder  mon espace",o.jsx(nc,{size:20})]}):o.jsxs(o.Fragment,{children:[o.jsxs(nt,{to:"/register",className:"home-page__btn home-page__btn--primary",children:["Commencer gratuitement",o.jsx(nc,{size:20})]}),o.jsxs(nt,{to:"/disciplines",className:"home-page__btn home-page__btn--outline",children:[o.jsx(gh,{size:18}),"Dcouvrir les cours"]})]})}),o.jsxs("div",{className:"home-page__hero-stats",children:[o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"10 000+"}),o.jsx("span",{children:"lves inscrits"})]}),o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"500+"}),o.jsx("span",{children:"Cours disponibles"})]}),o.jsxs("div",{className:"home-page__hero-stat",children:[o.jsx("strong",{children:"95%"}),o.jsx("span",{children:"Taux de russite"})]})]})]}),o.jsx("div",{className:"home-page__hero-image",children:o.jsxs("div",{className:"home-page__hero-illustration",children:[o.jsx(cd,{size:120}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--1",children:""}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--2",children:""}),o.jsx("div",{className:"home-page__hero-floating home-page__hero-floating--3",children:""})]})})]}),o.jsx("section",{className:"home-page__levels",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Tous les niveaux, toutes les matires"}),o.jsx("p",{className:"home-page__section-subtitle",children:"Du collge au lyce, prpare tes examens avec confiance"}),o.jsxs("div",{className:"home-page__levels-grid",children:[o.jsxs(nt,{to:"/disciplines?niveau=college",className:"home-page__level-card",children:[o.jsx("div",{className:"home-page__level-icon home-page__level-icon--college",children:""}),o.jsx("h3",{children:"Collge"}),o.jsx("p",{children:"6me  3me"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx(fn,{size:16})," Prparation au BFEM"]}),o.jsxs("li",{children:[o.jsx(fn,{size:16})," 9 matires disponibles"]}),o.jsxs("li",{children:[o.jsx(fn,{size:16})," Exercices corrigs"]})]}),o.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",o.jsx(nc,{size:16})]})]}),o.jsxs(nt,{to:"/disciplines?niveau=lycee",className:"home-page__level-card",children:[o.jsx("div",{className:"home-page__level-icon home-page__level-icon--lycee",children:""}),o.jsx("h3",{children:"Lyce"}),o.jsx("p",{children:"2nde  Terminale"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx(fn,{size:16})," Prparation au BAC"]}),o.jsxs("li",{children:[o.jsx(fn,{size:16})," 12 matires disponibles"]}),o.jsxs("li",{children:[o.jsx(fn,{size:16})," Annales d'examens"]})]}),o.jsxs("span",{className:"home-page__level-link",children:["Voir les cours ",o.jsx(nc,{size:16})]})]})]})]})}),o.jsx("section",{className:"home-page__features",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Pourquoi choisir PedaClic ?"}),o.jsx("p",{className:"home-page__section-subtitle",children:"Des outils modernes pour une ducation de qualit"}),o.jsxs("div",{className:"home-page__features-grid",children:[o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon",children:o.jsx(os,{size:28})}),o.jsx("h3",{children:"Cours complets"}),o.jsx("p",{children:"Des cours structurs et conformes au programme sngalais, rdigs par des enseignants expriments."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--secondary",children:o.jsx(sL,{size:28})}),o.jsx("h3",{children:"Quiz interactifs"}),o.jsx("p",{children:"Testez vos connaissances avec des quiz adapts  chaque niveau et obtenez un feedback instantan."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--warning",children:o.jsx(iL,{size:28})}),o.jsx("h3",{children:"Suivi de progression"}),o.jsx("p",{children:"Visualisez vos progrs et identifiez vos points faibles pour cibler vos rvisions."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--success",children:o.jsx(IE,{size:28})}),o.jsx("h3",{children:"Contenu vrifi"}),o.jsx("p",{children:"Tous nos contenus sont valids par des professeurs certifis pour garantir leur qualit."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--info",children:o.jsx(ld,{size:28})}),o.jsx("h3",{children:"Accessible 24/7"}),o.jsx("p",{children:"tudiez  votre rythme, o que vous soyez, sur ordinateur, tablette ou smartphone."})]}),o.jsxs("div",{className:"home-page__feature-card",children:[o.jsx("div",{className:"home-page__feature-icon home-page__feature-icon--premium",children:o.jsx(ml,{size:28})}),o.jsx("h3",{children:"Certificats"}),o.jsx("p",{children:"Obtenez des certificats de russite pour valoriser vos comptences acquises."})]})]})]})}),o.jsx("section",{className:"home-page__premium",children:o.jsx("div",{className:"home-page__container",children:o.jsxs("div",{className:"home-page__premium-content",children:[o.jsxs("div",{className:"home-page__premium-text",children:[o.jsx("span",{className:"home-page__premium-badge",children:" Premium"}),o.jsx("h2",{children:"Passez  la vitesse suprieure"}),o.jsxs("p",{children:["Accdez  tous les quiz, exercices corrigs et ressources exclusives pour seulement ",o.jsx("strong",{children:"2 000 FCFA/mois"}),"."]}),o.jsxs("ul",{className:"home-page__premium-features",children:[o.jsxs("li",{children:[o.jsx(fn,{size:18})," Quiz illimits dans toutes les matires"]}),o.jsxs("li",{children:[o.jsx(fn,{size:18})," Corrections dtailles des exercices"]}),o.jsxs("li",{children:[o.jsx(fn,{size:18})," Annales des examens (BFEM, BAC)"]}),o.jsxs("li",{children:[o.jsx(fn,{size:18})," Support prioritaire"]})]}),o.jsxs(nt,{to:"/premium",className:"home-page__btn home-page__btn--premium",children:["Dcouvrir Premium",o.jsx(nc,{size:20})]})]}),o.jsx("div",{className:"home-page__premium-pricing",children:o.jsxs("div",{className:"home-page__pricing-card",children:[o.jsx("span",{className:"home-page__pricing-popular",children:"Plus populaire"}),o.jsx("h3",{children:"Abonnement Annuel"}),o.jsxs("div",{className:"home-page__pricing-price",children:[o.jsx("span",{className:"home-page__pricing-amount",children:"20 000"}),o.jsx("span",{className:"home-page__pricing-currency",children:"FCFA"}),o.jsx("span",{className:"home-page__pricing-period",children:"/an"})]}),o.jsx("p",{className:"home-page__pricing-save",children:"conomisez 4 000 FCFA vs mensuel"}),o.jsx(nt,{to:"/premium",className:"home-page__btn home-page__btn--primary home-page__btn--block",children:"Choisir ce plan"})]})})]})})}),o.jsx("section",{className:"home-page__testimonials",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{className:"home-page__section-title",children:"Ce qu'en disent nos lves"}),o.jsxs("div",{className:"home-page__testimonials-grid",children:[o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(pi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Grce  PedaClic, j'ai obtenu mon BFEM avec mention. Les quiz m'ont vraiment aid  me prparer !"`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"FA"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Fatou Adara"}),o.jsx("span",{children:"lve en 3me - Dakar"})]})]})]}),o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(pi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Les cours de maths sont trs bien expliqus. J'ai enfin compris les quations du second degr !"`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"MD"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Moussa Diallo"}),o.jsx("span",{children:"lve en Terminale S - This"})]})]})]}),o.jsxs("div",{className:"home-page__testimonial-card",children:[o.jsx("div",{className:"home-page__testimonial-stars",children:[1,2,3,4,5].map(e=>o.jsx(pi,{size:16,fill:"#f59e0b",color:"#f59e0b"},e))}),o.jsx("p",{className:"home-page__testimonial-text",children:`"Je recommande PedaClic  tous les parents. Ma fille a beaucoup progress depuis qu'elle l'utilise."`}),o.jsxs("div",{className:"home-page__testimonial-author",children:[o.jsx("div",{className:"home-page__testimonial-avatar",children:"AN"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Aminata Ndiaye"}),o.jsx("span",{children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),o.jsx("section",{className:"home-page__final-cta",children:o.jsxs("div",{className:"home-page__container",children:[o.jsx("h2",{children:"Prt  russir ?"}),o.jsx("p",{children:"Rejoignez les milliers d'lves qui font confiance  PedaClic"}),!t&&o.jsxs(nt,{to:"/register",className:"home-page__btn home-page__btn--large",children:["Crer mon compte gratuit",o.jsx(nc,{size:24})]})]})})]})},$Y=()=>{const{login:t}=Vn(),e=Dr(),r=yl().state?.from||"/",[i,a]=w.useState({email:"",password:""}),[c,u]=w.useState(!1),[f,h]=w.useState(""),[p,g]=w.useState(!1),y=j=>{const{name:N,value:A}=j.target;a(k=>({...k,[N]:A})),f&&h("")},x=()=>i.email.trim()?i.password?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)?!0:(h("Veuillez entrer une adresse email valide."),!1):(h("Veuillez entrer votre mot de passe."),!1):(h("Veuillez entrer votre adresse email."),!1),E=async j=>{if(j.preventDefault(),!!x()){u(!0),h("");try{await t(i.email,i.password),e(r,{replace:!0})}catch(N){N instanceof Error?h(N.message):h("Une erreur est survenue lors de la connexion.")}finally{u(!1)}}};return o.jsx("div",{className:"auth-page",children:o.jsxs("div",{className:"auth-container",children:[o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs(nt,{to:"/",className:"auth-logo",children:[o.jsx("div",{className:"auth-logo__icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),o.jsx("span",{children:"PedaClic"})]}),o.jsx("h1",{className:"auth-title",children:"Connexion"}),o.jsx("p",{className:"auth-subtitle",children:"Accdez  votre espace d'apprentissage"})]}),f&&o.jsxs("div",{className:"auth-error",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4M12 16h.01"})]}),o.jsx("span",{children:f})]}),o.jsxs("form",{onSubmit:E,className:"auth-form",children:[o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:y,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:c})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),o.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),o.jsx("input",{type:p?"text":"password",id:"password",name:"password",value:i.password,onChange:y,placeholder:"Votre mot de passe",className:"auth-input",autoComplete:"current-password",disabled:c}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>g(!p),"aria-label":p?"Masquer le mot de passe":"Afficher le mot de passe",children:p?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),o.jsx("div",{className:"auth-forgot",children:o.jsx(nt,{to:"/mot-de-passe-oublie",className:"auth-forgot-link",children:"Mot de passe oubli ?"})}),o.jsx("button",{type:"submit",className:"auth-button",disabled:c,children:c?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"auth-button-spinner"}),"Connexion en cours..."]}):"Se connecter"})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:"ou"})}),o.jsxs("p",{className:"auth-switch",children:["Pas encore de compte ?"," ",o.jsx(nt,{to:"/inscription",className:"auth-switch-link",children:"Crer un compte"})]})]}),o.jsxs("div",{className:"auth-welcome",children:[o.jsx("h2",{children:"Bienvenue sur PedaClic !"}),o.jsx("p",{children:"L'cole en un clic - Accdez  des milliers de cours, exercices et quiz."}),o.jsxs("ul",{className:"auth-features",children:[o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cours du programme sngalais"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Exercices interactifs"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Quiz pour tester vos connaissances"]}),o.jsxs("li",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suivi de progression"]})]})]})]})})},FY=()=>{const{register:t}=Vn(),e=Dr(),[n,r]=w.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"eleve"}),[i,a]=w.useState(!1),[c,u]=w.useState(""),[f,h]=w.useState(!1),[p,g]=w.useState(!1),[y,x]=w.useState(!1),E=A=>{const{name:k,value:O}=A.target;r(C=>({...C,[k]:O})),c&&u("")},j=()=>n.displayName.trim()?n.displayName.trim().length<2?(u("Le nom doit contenir au moins 2 caractres."),!1):n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?n.password?n.password.length<6?(u("Le mot de passe doit contenir au moins 6 caractres."),!1):n.password!==n.confirmPassword?(u("Les mots de passe ne correspondent pas."),!1):y?!0:(u("Veuillez accepter les conditions d'utilisation."),!1):(u("Veuillez entrer un mot de passe."),!1):(u("Veuillez entrer une adresse email valide."),!1):(u("Veuillez entrer votre adresse email."),!1):(u("Veuillez entrer votre nom complet."),!1),N=async A=>{if(A.preventDefault(),!!j()){a(!0),u("");try{await t(n),e("/disciplines",{replace:!0})}catch(k){k instanceof Error?u(k.message):u("Une erreur est survenue lors de l'inscription.")}finally{a(!1)}}};return o.jsx("div",{className:"auth-page",children:o.jsxs("div",{className:"auth-container",children:[o.jsxs("div",{className:"auth-card auth-card--register",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs(nt,{to:"/",className:"auth-logo",children:[o.jsx("div",{className:"auth-logo__icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),o.jsx("span",{children:"PedaClic"})]}),o.jsx("h1",{className:"auth-title",children:"Crer un compte"}),o.jsx("p",{className:"auth-subtitle",children:"Rejoignez PedaClic et commencez  apprendre"})]}),c&&o.jsxs("div",{className:"auth-error",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 8v4M12 16h.01"})]}),o.jsx("span",{children:c})]}),o.jsxs("form",{onSubmit:N,className:"auth-form",children:[o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"displayName",className:"auth-label",children:"Nom complet"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),o.jsx("input",{type:"text",id:"displayName",name:"displayName",value:n.displayName,onChange:E,placeholder:"Amadou Diallo",className:"auth-input",autoComplete:"name",disabled:i})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"email",className:"auth-label",children:"Adresse email"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:E,placeholder:"exemple@email.com",className:"auth-input",autoComplete:"email",disabled:i})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{className:"auth-label",children:"Je suis :"}),o.jsxs("div",{className:"auth-role-selector",children:[o.jsxs("label",{className:`auth-role-option ${n.role==="eleve"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"eleve",checked:n.role==="eleve",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l9-5-9-5-9 5 9 5z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),o.jsx("span",{children:"lve"})]})]}),o.jsxs("label",{className:`auth-role-option ${n.role==="prof"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"prof",checked:n.role==="prof",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),o.jsx("span",{children:"Professeur"})]})]}),o.jsxs("label",{className:`auth-role-option ${n.role==="parent"?"auth-role-option--selected":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:"parent",checked:n.role==="parent",onChange:E,className:"auth-role-input",disabled:i}),o.jsxs("div",{className:"auth-role-content",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),o.jsx("span",{children:"Parent d'lve"})]})]})]})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"password",className:"auth-label",children:"Mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2"}),o.jsx("path",{strokeWidth:"2",d:"M7 11V7a5 5 0 0110 0v4"})]}),o.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:n.password,onChange:E,placeholder:"Minimum 6 caractres",className:"auth-input",autoComplete:"new-password",disabled:i}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>h(!f),"aria-label":f?"Masquer":"Afficher",children:f?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),o.jsx("p",{className:"auth-hint",children:"Au moins 6 caractres avec des lettres et des chiffres"})]}),o.jsxs("div",{className:"auth-field",children:[o.jsx("label",{htmlFor:"confirmPassword",className:"auth-label",children:"Confirmer le mot de passe"}),o.jsxs("div",{className:"auth-input-wrapper",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"auth-input-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),o.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:E,placeholder:"Retapez votre mot de passe",className:"auth-input",autoComplete:"new-password",disabled:i}),o.jsx("button",{type:"button",className:"auth-password-toggle",onClick:()=>g(!p),"aria-label":p?"Masquer":"Afficher",children:p?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),o.jsx("div",{className:"auth-checkbox-field",children:o.jsxs("label",{className:"auth-checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:y,onChange:A=>x(A.target.checked),className:"auth-checkbox",disabled:i}),o.jsx("span",{className:"auth-checkbox-custom"}),o.jsxs("span",{children:["J'accepte les"," ",o.jsx(nt,{to:"/cgu",target:"_blank",className:"auth-link",children:"conditions d'utilisation"})," ","et la"," ",o.jsx(nt,{to:"/confidentialite",target:"_blank",className:"auth-link",children:"politique de confidentialit"})]})]})}),o.jsx("button",{type:"submit",className:"auth-button",disabled:i,children:i?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"auth-button-spinner"}),"Cration du compte..."]}):"Crer mon compte"})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:"ou"})}),o.jsxs("p",{className:"auth-switch",children:["Dj un compte ?"," ",o.jsx(nt,{to:"/connexion",className:"auth-switch-link",children:"Se connecter"})]})]}),o.jsxs("div",{className:"auth-welcome auth-welcome--register",children:[o.jsx("h2",{children:"Rejoignez la communaut PedaClic"}),o.jsx("p",{children:"Des milliers d'lves et professeurs sngalais nous font dj confiance."}),o.jsxs("div",{className:"auth-stats",children:[o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"10 000+"}),o.jsx("span",{className:"auth-stat-label",children:"lves inscrits"})]}),o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"500+"}),o.jsx("span",{className:"auth-stat-label",children:"Cours disponibles"})]}),o.jsxs("div",{className:"auth-stat",children:[o.jsx("span",{className:"auth-stat-number",children:"95%"}),o.jsx("span",{className:"auth-stat-label",children:"Taux de satisfaction"})]})]}),o.jsxs("div",{className:"auth-testimonial",children:[o.jsx("p",{className:"auth-testimonial-text",children:`"Grce  PedaClic, j'ai amlior mes notes en mathmatiques de 4 points !"`}),o.jsx("p",{className:"auth-testimonial-author",children:" Fatou N., lve de 3me  Dakar"})]})]})]})})},aL=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"}],oL=[{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],lL=[{value:"debutant",label:"Dbutant"},{value:"intermediaire",label:"Intermdiaire"},{value:"avance",label:"Avanc"}],cL={college:"Collge",lycee:"Lyce",formation_libre:"Formation libre"};function BO(t){switch(t){case"college":return aL;case"lycee":return oL;case"formation_libre":return lL;default:return[]}}function uL(t){return[...aL,...oL,...lL].find(n=>n.value===t)?.label||t}const $O=[{niveau:"college",icon:"",label:"Collge",color:"#2b6cb0",bgLight:"#ebf8ff"},{niveau:"lycee",icon:"",label:"Lyce",color:"#975a16",bgLight:"#fefcbf"},{niveau:"formation_libre",icon:"",label:"Formation libre",color:"#276749",bgLight:"#f0fff4"}],HY=()=>{const[t,e]=w.useState("college"),[n,r]=w.useState([]),[i,a]=w.useState(!0),c=Dr();w.useEffect(()=>{const h=Et(rt(Ne,"disciplines"),mr("ordre")),p=z4(h,g=>{const y=g.docs.map(x=>({id:x.id,...x.data(),createdAt:x.data().createdAt?.toDate()||new Date,updatedAt:x.data().updatedAt?.toDate()||new Date}));r(y),a(!1)});return()=>p()},[]);const u=n.filter(h=>h.niveau===t),f=$O.find(h=>h.niveau===t);return o.jsxs("div",{style:{maxWidth:"1100px",margin:"0 auto",padding:"24px"},children:[o.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[o.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:700,color:"#1a365d",marginBottom:"8px"},children:" Disciplines"}),o.jsx("p",{style:{color:"#718096",fontSize:"1rem"},children:"Explorez les disciplines disponibles sur PedaClic"})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"32px",flexWrap:"wrap"},children:$O.map(h=>{const p=t===h.niveau;return o.jsxs("button",{onClick:()=>e(h.niveau),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 28px",borderRadius:"12px",border:`2px solid ${p?h.color:"#e2e8f0"}`,background:p?h.bgLight:"#fff",color:p?h.color:"#718096",fontSize:"1rem",fontWeight:p?700:500,cursor:"pointer",transition:"all 0.25s ease",boxShadow:p?`0 2px 8px ${h.color}20`:"none"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:h.icon}),h.label]},h.niveau)})}),i&&o.jsx("div",{style:{textAlign:"center",padding:"48px",color:"#a0aec0"},children:"Chargement des disciplines..."}),!i&&u.length===0&&o.jsxs("div",{style:{textAlign:"center",padding:"48px",background:"#f7fafc",borderRadius:"12px",border:"1px dashed #e2e8f0"},children:[o.jsx("p",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),o.jsxs("p",{style:{color:"#a0aec0",fontSize:"1rem"},children:["Aucune discipline disponible en ",cL[t]," pour le moment."]})]}),!i&&u.length>0&&o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:u.map(h=>o.jsxs("div",{onClick:()=>c(`/disciplines/${h.id}`),style:{background:"#fff",borderRadius:"12px",padding:"24px",border:"1px solid #e2e8f0",boxShadow:"0 2px 6px rgba(0,0,0,0.05)",cursor:"pointer",transition:"all 0.2s ease",borderTop:`3px solid ${h.couleur||f.color}`},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 6px rgba(0,0,0,0.05)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[o.jsx("span",{style:{fontSize:"1.8rem"},children:h.icone||""}),o.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",margin:0},children:h.nom})]}),h.description&&o.jsx("p",{style:{fontSize:"0.875rem",color:"#718096",marginBottom:"12px",lineHeight:1.5},children:h.description.length>100?`${h.description.slice(0,100)}...`:h.description}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:o.jsx("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:"10px",fontSize:"0.75rem",fontWeight:500,background:f.bgLight,color:f.color},children:uL(h.classe)})}),h.coefficient!==void 0&&o.jsxs("p",{style:{fontSize:"0.8rem",color:"#a0aec0"},children:["Coefficient : ",h.coefficient]})]},h.id))})]})},Vf="disciplines",FO=t=>{const e=t.data();return{id:t.id,nom:e.nom,niveau:e.niveau,classe:e.classe,ordre:e.ordre,coefficient:e.coefficient,couleur:e.couleur,icone:e.icone,description:e.description,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},jl={async getAll(t){try{const e=[mr("ordre","asc")];t?.niveau&&e.unshift(it("niveau","==",t.niveau)),t?.classe&&e.unshift(it("classe","==",t.classe));const n=Et(rt(Ne,Vf),...e);return(await Nt(n)).docs.map(FO)}catch(e){throw console.error("Erreur lors de la rcupration des disciplines:",e),new Error("Impossible de rcuprer les disciplines")}},async getById(t){try{const e=Qe(Ne,Vf,t),n=await Pr(e);return n.exists()?FO(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la discipline:",e),new Error("Impossible de rcuprer la discipline")}},async getByNiveau(t){return this.getAll({niveau:t})},async getByClasse(t){return this.getAll({classe:t})},async create(t){try{return(await Bi(rt(Ne,Vf),{...t,createdAt:nn(),updatedAt:nn()})).id}catch(e){throw console.error("Erreur lors de la cration de la discipline:",e),new Error("Impossible de crer la discipline")}},async update(t,e){try{const n=Qe(Ne,Vf,t);await sn(n,{...e,updatedAt:nn()})}catch(n){throw console.error("Erreur lors de la mise  jour de la discipline:",n),new Error("Impossible de mettre  jour la discipline")}},async delete(t){try{const e=Qe(Ne,Vf,t);await Ad(e)}catch(e){throw console.error("Erreur lors de la suppression de la discipline:",e),new Error("Impossible de supprimer la discipline")}},async exists(t){return await this.getById(t)!==null},async countByNiveau(t){return(await this.getByNiveau(t)).length}},Zl="ressources",GY="ressources",HO=t=>{const e=t.data();return{id:t.id,disciplineId:e.disciplineId,titre:e.titre,type:e.type,contenu:e.contenu,description:e.description,isPremium:e.isPremium||!1,ordre:e.ordre||0,chapitre:e.chapitre,fichierURL:e.fichierURL,dureeEstimee:e.dureeEstimee,tags:e.tags||[],auteurId:e.auteurId,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},KY=t=>{const e=Date.now(),n=t.split(".").pop();return`${t.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_")}_${e}.${n}`},Ea={async getAll(t,e){try{const n=[mr("ordre","asc")];t?.disciplineId&&n.unshift(it("disciplineId","==",t.disciplineId)),t?.chapitreId&&n.unshift(it("chapitre","==",t.chapitreId)),t?.type&&n.unshift(it("type","==",t.type)),t?.isPremium!==void 0&&n.unshift(it("isPremium","==",t.isPremium)),t?.auteurId&&n.unshift(it("auteurId","==",t.auteurId)),e&&n.push(hl(e));const r=Et(rt(Ne,Zl),...n);return(await Nt(r)).docs.map(HO)}catch(n){throw console.error("Erreur lors de la rcupration des ressources:",n),new Error("Impossible de rcuprer les ressources")}},async getById(t){try{const e=Qe(Ne,Zl,t),n=await Pr(e);return n.exists()?HO(n):null}catch(e){throw console.error("Erreur lors de la rcupration de la ressource:",e),new Error("Impossible de rcuprer la ressource")}},async getByDiscipline(t){return this.getAll({disciplineId:t})},async getByChapitre(t){return this.getAll({chapitreId:t})},async getByType(t){return this.getAll({type:t})},async getPremium(){return this.getAll({isPremium:!0})},async getFree(){return this.getAll({isPremium:!1})},async create(t,e){try{return(await Bi(rt(Ne,Zl),{...t,auteurId:e,createdAt:nn(),updatedAt:nn()})).id}catch(n){throw console.error("Erreur lors de la cration de la ressource:",n),new Error("Impossible de crer la ressource")}},async update(t,e){try{const n=Qe(Ne,Zl,t);await sn(n,{...e,updatedAt:nn()})}catch(n){throw console.error("Erreur lors de la mise  jour de la ressource:",n),new Error("Impossible de mettre  jour la ressource")}},async delete(t){try{const e=await this.getById(t);e?.fichierURL&&await this.deleteFile(e.fichierURL);const n=Qe(Ne,Zl,t);await Ad(n)}catch(e){throw console.error("Erreur lors de la suppression de la ressource:",e),new Error("Impossible de supprimer la ressource")}},async deleteByDiscipline(t){try{const e=await this.getByDiscipline(t),n=Ih(Ne);for(const r of e){r.fichierURL&&await this.deleteFile(r.fichierURL);const i=Qe(Ne,Zl,r.id);n.delete(i)}await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des ressources:",e),new Error("Impossible de supprimer les ressources")}},async uploadFile(t,e){try{const n=KY(t.name),r=`${GY}/${e}/${n}`,i=kO(DO,r);return await JQ(i,t),await ZQ(i)}catch(n){throw console.error("Erreur lors de l'upload du fichier:",n),new Error("Impossible d'uploader le fichier")}},async deleteFile(t){try{const e=kO(DO,t);await eW(e)}catch(e){console.warn("Fichier non trouv ou dj supprim:",e)}},async reorder(t,e){try{const n=Ih(Ne);e.forEach((r,i)=>{const a=Qe(Ne,Zl,r);n.update(a,{ordre:i+1,updatedAt:nn()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des ressources:",n),new Error("Impossible de rorganiser les ressources")}},async togglePremium(t,e){await this.update(t,{isPremium:e})},async countByType(t){return(await this.getByType(t)).length},async getStats(){try{const t=await this.getAll(),e={total:t.length,premium:t.filter(n=>n.isPremium).length,gratuit:t.filter(n=>!n.isPremium).length,parType:{cours:0,exercice:0,video:0,document:0,quiz:0}};return t.forEach(n=>{e.parType[n.type]!==void 0&&e.parType[n.type]++}),e}catch(t){throw console.error("Erreur lors du calcul des statistiques:",t),new Error("Impossible de calculer les statistiques")}}},QY=()=>{const{id:t}=dy(),e=Dr(),[n,r]=w.useState(null),[i,a]=w.useState([]),[c,u]=w.useState([]),[f,h]=w.useState(!0),[p,g]=w.useState(null),[y,x]=w.useState("tous"),[E,j]=w.useState(new Set),N=w.useCallback(async()=>{if(t)try{h(!0),g(null);const R=await jl.getById(t);if(!R){g("Discipline introuvable."),h(!1);return}r(R);const q=await Ea.getAll({disciplineId:t}),L=new Map,M=[];for(const ge of q){const Z=ge.chapitre||ge.chapitreId;Z?(L.has(Z)||L.set(Z,[]),L.get(Z).push(ge)):M.push(ge)}const U=Array.from(L.entries()).map(([ge,Z])=>({chapitreNom:ge,ressources:Z.sort((H,ce)=>H.ordre-ce.ordre)})).sort((ge,Z)=>ge.chapitreNom.localeCompare(Z.chapitreNom,"fr"));a(U),u(M),U.length>0&&j(new Set([U[0].chapitreNom]))}catch(R){console.error("Erreur chargement discipline:",R),g("Impossible de charger les donnes. Ressayez plus tard.")}finally{h(!1)}},[t]);w.useEffect(()=>{N()},[N]);const A=R=>{j(q=>{const L=new Set(q);return L.has(R)?L.delete(R):L.add(R),L})},k=R=>y==="tous"?R:R.filter(q=>q.type===y),O=R=>{switch(R){case"cours":return"";case"exercice":return"";case"video":return"";case"document":return"";case"quiz":return"";default:return""}},C=R=>{switch(R){case"cours":return"Cours";case"exercice":return"Exercice";case"video":return"Vido";case"document":return"Document";case"quiz":return"Quiz";default:return R}},V=R=>{switch(R){case"cours":return"#3b82f6";case"exercice":return"#10b981";case"video":return"#f59e0b";case"document":return"#8b5cf6";case"quiz":return"#ef4444";default:return"#6b7280"}},$=R=>R==="college"?"Collge":"Lyce";if(f)return o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 1rem",minHeight:"50vh"},children:[o.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e5e7eb",borderTopColor:"#2563eb",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),o.jsx("p",{style:{marginTop:"1rem",color:"#6b7280"},children:"Chargement de la discipline..."}),o.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]});if(p||!n)return o.jsxs("div",{style:{maxWidth:"600px",margin:"3rem auto",padding:"2rem",textAlign:"center",background:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca"},children:[o.jsx("span",{style:{fontSize:"3rem"},children:""}),o.jsx("h2",{style:{color:"#991b1b",margin:"1rem 0 0.5rem"},children:p||"Discipline introuvable"}),o.jsx("p",{style:{color:"#b91c1c",marginBottom:"1.5rem"},children:"Vrifiez le lien ou retournez  la liste des disciplines."}),o.jsx("button",{onClick:()=>e("/disciplines"),style:{padding:"0.75rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:600},children:" Retour aux disciplines"})]});const D=[...i.flatMap(R=>R.ressources),...c],P=[...new Set(D.map(R=>R.type))];return o.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"1.5rem 1rem"},children:[o.jsxs("nav",{style:{marginBottom:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:[o.jsx(nt,{to:"/",style:{color:"#2563eb",textDecoration:"none"},children:"Accueil"}),o.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),o.jsx(nt,{to:"/disciplines",style:{color:"#2563eb",textDecoration:"none"},children:"Disciplines"}),o.jsx("span",{style:{margin:"0 0.5rem"},children:"/"}),o.jsx("span",{style:{color:"#374151"},children:n.nom})]}),o.jsxs("header",{style:{background:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",borderRadius:"16px",padding:"2rem",color:"#fff",marginBottom:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"2.5rem"},children:n.icone||""}),o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:n.nom}),n.description&&o.jsx("p",{style:{margin:"0.25rem 0 0",opacity:.9,fontSize:"0.95rem"},children:n.description})]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1rem"},children:[o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",$(n.niveau),"  ",n.classe]}),o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" ",D.length," ressource",D.length!==1?"s":""]}),n.coefficient&&o.jsxs("span",{style:{background:"rgba(255,255,255,0.2)",padding:"0.35rem 0.75rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:600},children:[" Coeff. ",n.coefficient]})]})]}),P.length>1&&o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1.5rem"},children:[o.jsxs("button",{onClick:()=>x("tous"),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:y==="tous"?"2px solid #2563eb":"1px solid #d1d5db",background:y==="tous"?"#2563eb":"#fff",color:y==="tous"?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:["Tous (",D.length,")"]}),P.map(R=>{const q=D.filter(M=>M.type===R).length,L=y===R;return o.jsxs("button",{onClick:()=>x(R),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:L?`2px solid ${V(R)}`:"1px solid #d1d5db",background:L?V(R):"#fff",color:L?"#fff":"#374151",cursor:"pointer",fontSize:"0.85rem",fontWeight:600,transition:"all 0.2s"},children:[O(R)," ",C(R)," (",q,")"]},R)})]}),i.length===0&&c.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[o.jsx("span",{style:{fontSize:"3rem"},children:""}),o.jsx("h3",{style:{color:"#374151",margin:"1rem 0 0.5rem"},children:"Aucune ressource disponible"}),o.jsx("p",{style:{color:"#6b7280"},children:"Les cours et exercices pour cette discipline seront bientt ajouts."})]}):o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[i.map(R=>{const q=k(R.ressources);if(q.length===0&&y!=="tous")return null;const L=E.has(R.chapitreNom),M=y==="tous"?R.ressources:q;return o.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden",transition:"box-shadow 0.2s",boxShadow:L?"0 4px 12px rgba(0,0,0,0.08)":"none"},children:[o.jsx("button",{onClick:()=>A(R.chapitreNom),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.25rem",background:L?"#f0f5ff":"#fff",border:"none",cursor:"pointer",textAlign:"left",transition:"background 0.2s"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.25rem",transform:L?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""}),o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:700,color:"#1f2937",fontSize:"1rem"},children:R.chapitreNom}),o.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:[R.ressources.length," ressource",R.ressources.length!==1?"s":""]})]})]})}),L&&o.jsx("div",{style:{padding:"0 1.25rem 1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:M.map(U=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6",transition:"background 0.15s",cursor:"pointer"},onMouseEnter:ge=>ge.currentTarget.style.background="#eef2ff",onMouseLeave:ge=>ge.currentTarget.style.background="#f9fafb",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:O(U.type)}),o.jsxs("div",{children:[o.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:U.titre}),U.description&&o.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af",marginTop:"2px"},children:U.description})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexShrink:0},children:[o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:V(U.type)},children:C(U.type)}),U.isPremium&&o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"}),U.dureeEstimee&&o.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[" ",U.dureeEstimee," min"]})]})]},U.id))})]},R.chapitreNom)}),k(c).length>0&&o.jsxs("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem 1.25rem"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,color:"#374151",marginBottom:"0.75rem"},children:" Autres ressources"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:k(c).map(R=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #f3f4f6"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("span",{style:{fontSize:"1.2rem"},children:O(R.type)}),o.jsx("span",{style:{fontWeight:600,color:"#1f2937",fontSize:"0.9rem"},children:R.titre})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#fff",background:V(R.type)},children:C(R.type)}),R.isPremium&&o.jsx("span",{style:{padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,color:"#92400e",background:"#fef3c7",border:"1px solid #fde68a"},children:" Premium"})]})]},R.id))})]})]}),o.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:o.jsx(nt,{to:"/disciplines",style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",borderRadius:"8px",textDecoration:"none",fontWeight:600,transition:"background 0.2s"},children:" Retour aux disciplines"})})]})},Yx=[{id:"mensuel",nom:"Mensuel",prix:2e3,duree:"1 mois"},{id:"annuel",nom:"Annuel",prix:2e4,prixOriginal:24e3,duree:"12 mois",economie:"4 000 FCFA",popular:!0}],WY=[{icone:"",titre:"Accs illimit",description:"Tous les cours de la 6me  la Terminale, sans restriction."},{icone:"",titre:"Vidos explicatives",description:"Des cours en vido par des professeurs expriments."},{icone:"",titre:"Exercices corrigs",description:"Des milliers d'exercices avec corrections dtailles."},{icone:"",titre:"Suivi de progression",description:"Tableau de bord personnel pour suivre vos rsultats."},{icone:"",titre:"Quiz interactifs",description:"Testez vos connaissances avec des quiz par matire."},{icone:"",titre:"Support prioritaire",description:"Assistance rapide pour toutes vos questions."},{icone:"",titre:"Accs mobile",description:"Apprenez partout, sur tlphone ou tablette."},{icone:"",titre:"Mises  jour",description:"Nouveaux contenus ajouts rgulirement."}],YY=[{question:"Comment fonctionne l'abonnement Premium ?",reponse:"Une fois votre paiement effectu via Wave, Orange Money ou carte bancaire, votre compte est instantanment mis  niveau. Vous avez accs  tous les contenus Premium pendant la dure de votre abonnement."},{question:"Puis-je annuler mon abonnement ?",reponse:"Oui, vous pouvez annuler  tout moment depuis votre espace personnel. Vous conservez l'accs Premium jusqu' la fin de la priode paye."},{question:"L'abonnement se renouvelle-t-il automatiquement ?",reponse:"Non, chez PedaClic, il n'y a pas de renouvellement automatique. Vous dcidez quand renouveler votre abonnement."},{question:"Quels moyens de paiement acceptez-vous ?",reponse:"Nous acceptons Wave, Orange Money, Free Money et les cartes bancaires (Visa, Mastercard) via notre partenaire PayTech."},{question:"Puis-je partager mon compte Premium ?",reponse:"Chaque compte Premium est personnel et li  une adresse email. Le partage de compte est interdit pour garantir un suivi de progression personnalis."}],XY=()=>{const{currentUser:t}=Vn(),e=yl(),n=Dr(),[r,i]=w.useState("annuel"),[a,c]=w.useState(!1),[u,f]=w.useState(null),[h,p]=w.useState(null);e.state?.from;const g=()=>!t||!t.isPremium?!1:t.subscriptionEnd?(t.subscriptionEnd instanceof Date?t.subscriptionEnd:new Date(t.subscriptionEnd))>new Date:!0,y=async()=>{if(!t){n("/connexion",{state:{from:"/premium"}});return}if(g()){f("Vous tes dj abonn Premium !");return}try{c(!0),f(null);const j=Yx.find(C=>C.id===r);if(!j)throw new Error("Plan invalide");const N=await Bi(rt(Ne,"transactions"),{userId:t.uid,userEmail:t.email,planType:r,montant:j.prix,devise:"XOF",statut:"pending",dateTransaction:nn(),createdAt:nn()}),A={apiKey:"your_paytech_key",apiSecret:"demo_api_secret",item_name:`PedaClic Premium ${j.nom}`,item_price:j.prix,currency:"XOF",ref_command:N.id,success_url:`${window.location.origin}/premium/success?ref=${N.id}`,cancel_url:`${window.location.origin}/premium/cancel?ref=${N.id}`,ipn_url:"/api/paytech/ipn",custom_field:JSON.stringify({userId:t.uid,planType:r,transactionId:N.id}),env:"test"},O=await(await fetch("https://paytech.sn/api/payment/request-payment",{method:"POST",headers:{"Content-Type":"application/json",API_KEY:A.apiKey,API_SECRET:A.apiSecret},body:JSON.stringify({item_name:A.item_name,item_price:A.item_price,currency:A.currency,ref_command:A.ref_command,command_name:`Abonnement Premium ${j.nom} - ${t.email}`,env:A.env,ipn_url:A.ipn_url,success_url:A.success_url,cancel_url:A.cancel_url,custom_field:A.custom_field})})).json();if(O.success===1&&O.redirect_url)window.location.href=O.redirect_url;else{console.log("Mode dmo PayTech - Simulation de paiement");const C=new Date,V=new Date(C);r==="mensuel"?V.setMonth(V.getMonth()+1):V.setFullYear(V.getFullYear()+1),await sn(Qe(Ne,"users",t.uid),{isPremium:!0,subscriptionEnd:V,subscriptionPlan:r,updatedAt:nn()}),await sn(Qe(Ne,"transactions",N.id),{statut:"success",paytechTransactionId:"DEMO_"+Date.now(),dateExpiration:V,updatedAt:nn()}),n("/premium/success",{state:{plan:j.nom,montant:j.prix,expiration:V.toLocaleDateString("fr-FR")}})}}catch(j){console.error("Erreur paiement:",j),f("Une erreur est survenue lors du paiement. Veuillez ressayer.")}finally{c(!1)}},x=j=>{p(h===j?null:j)},E=j=>j.toLocaleString("fr-FR")+" FCFA";if(g()){const j=t?.subscriptionEnd instanceof Date?t.subscriptionEnd:new Date(t?.subscriptionEnd||Date.now());return o.jsx("div",{className:"premium-page",children:o.jsx("div",{className:"container",children:o.jsxs("div",{className:"premium-already",children:[o.jsx("span",{className:"premium-already__icon",children:""}),o.jsx("h1",{children:"Vous tes dj Premium !"}),o.jsxs("p",{children:["Votre abonnement est actif jusqu'au"," ",o.jsx("strong",{children:j.toLocaleDateString("fr-FR")})]}),o.jsxs("div",{className:"premium-already__actions",children:[o.jsx(nt,{to:"/disciplines",className:"btn btn--primary",children:"Accder aux cours"}),o.jsx(nt,{to:"/dashboard",className:"btn btn--outline",children:"Mon tableau de bord"})]})]})})})}return o.jsxs("div",{className:"premium-page",children:[o.jsx("section",{className:"premium-hero",children:o.jsxs("div",{className:"container",children:[o.jsx("span",{className:"premium-hero__badge",children:" Premium"}),o.jsxs("h1",{className:"premium-hero__title",children:["Dbloquez tout le potentiel de ",o.jsx("span",{children:"PedaClic"})]}),o.jsx("p",{className:"premium-hero__subtitle",children:"Accdez  tous les cours, exercices corrigs, vidos et quiz de la 6me  la Terminale. Russissez vos examens !"})]})}),o.jsx("section",{className:"premium-pricing",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Choisissez votre formule"}),o.jsx("div",{className:"pricing-cards",children:Yx.map(j=>o.jsxs("div",{className:`pricing-card ${r===j.id?"pricing-card--selected":""} ${j.popular?"pricing-card--popular":""}`,onClick:()=>i(j.id),children:[j.popular&&o.jsx("span",{className:"pricing-card__badge",children:"Le plus populaire"}),o.jsxs("div",{className:"pricing-card__header",children:[o.jsx("h3",{className:"pricing-card__name",children:j.nom}),o.jsx("p",{className:"pricing-card__duration",children:j.duree})]}),o.jsxs("div",{className:"pricing-card__price",children:[j.prixOriginal&&o.jsx("span",{className:"pricing-card__original",children:E(j.prixOriginal)}),o.jsx("span",{className:"pricing-card__amount",children:E(j.prix)}),j.id==="mensuel"&&o.jsx("span",{className:"pricing-card__period",children:"/mois"})]}),j.economie&&o.jsxs("p",{className:"pricing-card__savings",children:["conomisez ",j.economie]}),o.jsx("div",{className:"pricing-card__radio",children:o.jsx("span",{className:`radio-dot ${r===j.id?"radio-dot--active":""}`})})]},j.id))}),o.jsxs("div",{className:"pricing-cta",children:[u&&o.jsxs("div",{className:"pricing-error",children:[o.jsx("span",{children:""})," ",u]}),t?o.jsx("button",{className:"btn btn--premium btn--lg",onClick:y,disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner-sm"}),"Traitement en cours..."]}):o.jsxs(o.Fragment,{children:["Payer ",E(Yx.find(j=>j.id===r)?.prix||0)]})}):o.jsxs("div",{className:"pricing-login",children:[o.jsx("p",{children:"Connectez-vous pour souscrire  Premium"}),o.jsx(nt,{to:"/connexion",state:{from:"/premium"},className:"btn btn--primary btn--lg",children:"Se connecter"}),o.jsxs("p",{className:"pricing-login__register",children:["Pas encore inscrit ?"," ",o.jsx(nt,{to:"/inscription",state:{from:"/premium"},children:"Crer un compte"})]})]}),o.jsxs("div",{className:"payment-methods",children:[o.jsx("p",{children:"Paiement scuris par"}),o.jsxs("div",{className:"payment-methods__logos",children:[o.jsx("span",{className:"payment-logo",children:" Orange Money"}),o.jsx("span",{className:"payment-logo",children:" Wave"}),o.jsx("span",{className:"payment-logo",children:" Free Money"}),o.jsx("span",{className:"payment-logo",children:" Carte bancaire"})]})]})]})]})}),o.jsx("section",{className:"premium-features",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Tout ce que vous obtenez"}),o.jsx("p",{className:"section-subtitle",children:"Un accs complet  toutes les ressources pdagogiques"}),o.jsx("div",{className:"features-grid",children:WY.map((j,N)=>o.jsxs("div",{className:"feature-card",children:[o.jsx("span",{className:"feature-card__icon",children:j.icone}),o.jsx("h3",{className:"feature-card__title",children:j.titre}),o.jsx("p",{className:"feature-card__description",children:j.description})]},N))})]})}),o.jsx("section",{className:"premium-comparison",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Gratuit vs Premium"}),o.jsxs("div",{className:"comparison-table",children:[o.jsxs("div",{className:"comparison-header",children:[o.jsx("div",{className:"comparison-feature",children:"Fonctionnalits"}),o.jsx("div",{className:"comparison-free",children:"Gratuit"}),o.jsx("div",{className:"comparison-premium",children:"Premium"})]}),[{feature:"Cours de base",free:!0,premium:!0},{feature:"Exercices avec corrections",free:!1,premium:!0},{feature:"Vidos explicatives",free:!1,premium:!0},{feature:"Quiz interactifs",free:!1,premium:!0},{feature:"Suivi de progression",free:!1,premium:!0},{feature:"Tlchargement de documents",free:!1,premium:!0},{feature:"Support prioritaire",free:!1,premium:!0},{feature:"Accs mobile optimis",free:!0,premium:!0}].map((j,N)=>o.jsxs("div",{className:"comparison-row",children:[o.jsx("div",{className:"comparison-feature",children:j.feature}),o.jsx("div",{className:"comparison-free",children:j.free?o.jsx("span",{className:"check",children:""}):o.jsx("span",{className:"cross",children:""})}),o.jsx("div",{className:"comparison-premium",children:o.jsx("span",{className:"check check--premium",children:""})})]},N))]})]})}),o.jsx("section",{className:"premium-testimonials",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Ils ont choisi Premium"}),o.jsxs("div",{className:"testimonials-grid",children:[o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:`"Grce  PedaClic Premium, j'ai eu 16/20 au BFEM. Les exercices corrigs m'ont beaucoup aid !"`}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"AN"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Aminata Ndiaye"}),o.jsx("p",{className:"testimonial-card__info",children:"3me - Dakar"})]})]})]}),o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:'"Les vidos sont trs bien expliques. Je comprends mieux les maths maintenant. Merci PedaClic !"'}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"IF"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Ibrahima Fall"}),o.jsx("p",{className:"testimonial-card__info",children:"Terminale S - This"})]})]})]}),o.jsxs("div",{className:"testimonial-card",children:[o.jsx("div",{className:"testimonial-card__stars",children:"".repeat(5)}),o.jsx("p",{className:"testimonial-card__text",children:`"20 000 FCFA pour l'anne, c'est vraiment abordable. Mon fils a accs  tout ce dont il a besoin."`}),o.jsxs("div",{className:"testimonial-card__author",children:[o.jsx("div",{className:"testimonial-card__avatar",children:"FD"}),o.jsxs("div",{children:[o.jsx("p",{className:"testimonial-card__name",children:"Fatou Diop"}),o.jsx("p",{className:"testimonial-card__info",children:"Parent d'lve - Saint-Louis"})]})]})]})]})]})}),o.jsx("section",{className:"premium-faq",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{className:"section-title",children:"Questions frquentes"}),o.jsx("div",{className:"faq-list",children:YY.map((j,N)=>o.jsxs("div",{className:`faq-item ${h===N?"faq-item--open":""}`,children:[o.jsxs("button",{className:"faq-item__question",onClick:()=>x(N),"aria-expanded":h===N,children:[o.jsx("span",{children:j.question}),o.jsx("span",{className:"faq-item__icon",children:h===N?"":"+"})]}),h===N&&o.jsx("div",{className:"faq-item__answer",children:o.jsx("p",{children:j.reponse})})]},N))})]})}),o.jsx("section",{className:"premium-cta-final",children:o.jsxs("div",{className:"container",children:[o.jsx("h2",{children:"Prt  russir vos examens ?"}),o.jsx("p",{children:"Rejoignez des milliers d'lves sngalais qui ont choisi PedaClic Premium"}),o.jsx("button",{className:"btn btn--white btn--lg",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Commencer maintenant"})]})})]})},JY=[{title:"Principal",items:[{id:"dashboard",label:"Tableau de bord",icon:"",href:"/admin"},{id:"disciplines",label:"Disciplines",icon:"",href:"/admin/disciplines"},{id:"chapitres",label:"Chapitres",icon:"",href:"/admin/chapitres"},{id:"ressources",label:"Ressources",icon:"",href:"/admin/ressources"}]},{title:"valuation",items:[{id:"quiz",label:"Quiz",icon:"",href:"/admin/quiz"},{id:"quiz",label:"Quiz Avancs",icon:"",href:"/admin/quiz-avance"},{id:"resultats",label:"Rsultats",icon:"",href:"/admin/resultats"}]},{title:"Utilisateurs",items:[{id:"utilisateurs",label:"Tous les utilisateurs",icon:"",href:"/admin/utilisateurs"},{id:"premium",label:"Abonns Premium",icon:"",href:"/admin/premium"}]},{title:"Paramtres",items:[{id:"settings",label:"Configuration",icon:"",href:"/admin/settings"}]}],ja=({children:t,currentPage:e="dashboard"})=>{const{currentUser:n,logout:r}=Vn(),[i,a]=w.useState(!0),[c,u]=w.useState(!1),f=async()=>{try{u(!0),await r(),window.location.href="/connexion"}catch(g){console.error("Erreur lors de la dconnexion:",g),u(!1)}},h=()=>n?.displayName?n.displayName.split(" ").map(g=>g[0]).join("").toUpperCase().slice(0,2):"AD",p=()=>{switch(n?.role){case"admin":return"Administrateur";case"prof":return"Professeur";case"eleve":return"lve";default:return"Utilisateur"}};return o.jsxs("div",{className:"admin-layout",children:[o.jsxs("aside",{className:`admin-sidebar ${i?"":"admin-sidebar--collapsed"}`,children:[o.jsx("header",{className:"admin-sidebar__header",children:o.jsxs("a",{href:"/",className:"admin-sidebar__logo",children:[o.jsx("div",{className:"admin-sidebar__logo-icon",children:""}),o.jsx("span",{children:"PedaClic"})]})}),o.jsx("nav",{className:"admin-sidebar__nav",children:JY.map((g,y)=>o.jsxs("div",{className:"admin-nav__section",children:[o.jsx("h3",{className:"admin-nav__title",children:g.title}),o.jsx("ul",{className:"admin-nav__list",children:g.items.map(x=>o.jsx("li",{className:"admin-nav__item",children:o.jsxs("a",{href:x.href,className:`admin-nav__link ${e===x.id?"admin-nav__link--active":""}`,children:[o.jsx("span",{className:"admin-nav__icon",children:x.icon}),o.jsx("span",{className:"admin-nav__label",children:x.label})]})},x.id))})]},y))}),o.jsx("footer",{className:"admin-sidebar__footer",children:o.jsxs("div",{className:"admin-user",children:[o.jsx("div",{className:"admin-user__avatar",children:h()}),o.jsxs("div",{className:"admin-user__info",children:[o.jsx("div",{className:"admin-user__name",children:n?.displayName||"Administrateur"}),o.jsx("div",{className:"admin-user__role",children:p()})]}),o.jsx("button",{onClick:f,disabled:c,className:"admin-logout-btn",title:"Se dconnecter",children:c?"...":""})]})})]}),o.jsxs("main",{className:"admin-content",children:[o.jsx("button",{className:"admin-sidebar-toggle",onClick:()=>a(!i),"aria-label":"Toggle sidebar",children:""}),t]}),o.jsx("style",{children:`
        /* Bouton de dconnexion */
        .admin-logout-btn {
          width: 36px;
          height: 36px;
          border: none;
          background: rgba(255, 255, 255, 0.1);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
          font-size: var(--text-lg);
        }

        .admin-logout-btn:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        .admin-logout-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Bouton toggle sidebar (mobile) */
        .admin-sidebar-toggle {
          display: none;
          position: fixed;
          top: var(--spacing-md);
          left: var(--spacing-md);
          z-index: var(--z-fixed);
          width: 44px;
          height: 44px;
          border: none;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          cursor: pointer;
          font-size: var(--text-xl);
        }

        @media (max-width: 768px) {
          .admin-sidebar-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
          }

          .admin-sidebar {
            transform: translateX(-100%);
            transition: transform var(--transition-base);
          }

          .admin-sidebar:not(.admin-sidebar--collapsed) {
            transform: translateX(0);
          }

          .admin-content {
            padding-top: calc(var(--spacing-xl) + 44px);
          }
        }

        /* Animation de la sidebar */
        .admin-sidebar--collapsed {
          width: 80px;
        }

        .admin-sidebar--collapsed .admin-nav__label,
        .admin-sidebar--collapsed .admin-nav__title,
        .admin-sidebar--collapsed .admin-sidebar__logo span,
        .admin-sidebar--collapsed .admin-user__info {
          display: none;
        }

        .admin-sidebar--collapsed .admin-sidebar__logo {
          justify-content: center;
        }
      `})]})},Uo="chapitres",Xx=t=>{const e=t.data();return{id:t.id,disciplineId:e.disciplineId,numero:e.numero,titre:e.titre,description:e.description,objectifs:e.objectifs||[],dureeEstimee:e.dureeEstimee,isPremium:e.isPremium||!1,actif:e.actif!==!1,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()}},Vo={async getByDiscipline(t){try{const e=Et(rt(Ne,Uo),it("disciplineId","==",t),mr("numero","asc"));return(await Nt(e)).docs.map(Xx)}catch(e){throw console.error("Erreur lors de la rcupration des chapitres:",e),new Error("Impossible de rcuprer les chapitres")}},async getAll(){try{const t=Et(rt(Ne,Uo),mr("numero","asc"));return(await Nt(t)).docs.map(Xx)}catch(t){throw console.error("Erreur lors de la rcupration des chapitres:",t),new Error("Impossible de rcuprer les chapitres")}},async getById(t){try{const e=Qe(Ne,Uo,t),n=await Pr(e);return n.exists()?Xx(n):null}catch(e){throw console.error("Erreur lors de la rcupration du chapitre:",e),new Error("Impossible de rcuprer le chapitre")}},async create(t){try{return(await Bi(rt(Ne,Uo),{...t,actif:t.actif!==!1,createdAt:nn(),updatedAt:nn()})).id}catch(e){throw console.error("Erreur lors de la cration du chapitre:",e),new Error("Impossible de crer le chapitre")}},async update(t,e){try{const n=Qe(Ne,Uo,t);await sn(n,{...e,updatedAt:nn()})}catch(n){throw console.error("Erreur lors de la mise  jour du chapitre:",n),new Error("Impossible de mettre  jour le chapitre")}},async delete(t){try{const e=Qe(Ne,Uo,t);await Ad(e)}catch(e){throw console.error("Erreur lors de la suppression du chapitre:",e),new Error("Impossible de supprimer le chapitre")}},async deleteByDiscipline(t){try{const e=await this.getByDiscipline(t),n=Ih(Ne);e.forEach(r=>{const i=Qe(Ne,Uo,r.id);n.delete(i)}),await n.commit()}catch(e){throw console.error("Erreur lors de la suppression des chapitres:",e),new Error("Impossible de supprimer les chapitres")}},async reorder(t,e){try{const n=Ih(Ne);e.forEach((r,i)=>{const a=Qe(Ne,Uo,r);n.update(a,{numero:i+1,updatedAt:nn()})}),await n.commit()}catch(n){throw console.error("Erreur lors de la rorganisation des chapitres:",n),new Error("Impossible de rorganiser les chapitres")}},async toggleActive(t,e){await this.update(t,{actif:e})},async countByDiscipline(t){return(await this.getByDiscipline(t)).length},async getNextNumero(t){return await this.countByDiscipline(t)+1}},ZY=()=>{const{currentUser:t}=Vn(),e=Dr(),[n,r]=w.useState({totalDisciplines:0,totalChapitres:0,totalRessources:0,ressourcesPremium:0,ressourcesGratuites:0,totalQuiz:0,totalQuizAvances:0,ressourcesParType:{cours:0,exercice:0,video:0,document:0,quiz:0}}),[i,a]=w.useState(!0),[c,u]=w.useState(null);return w.useEffect(()=>{(async()=>{try{a(!0),u(null);const[h,p,g,y,x]=await Promise.all([jl.getAll(),Vo.getAll(),Ea.getStats(),Nt(rt(Ne,"quizzes")),Nt(rt(Ne,"quizzes_v2"))]);r({totalDisciplines:h.length,totalChapitres:p.length,totalRessources:g.total,ressourcesPremium:g.premium,ressourcesGratuites:g.gratuit,totalQuiz:y.size,totalQuizAvances:x.size,ressourcesParType:g.parType})}catch(h){console.error("Erreur lors du chargement des statistiques:",h),u("Impossible de charger les statistiques")}finally{a(!1)}})()},[]),o.jsxs("div",{className:"admin-dashboard",children:[o.jsx("header",{className:"admin-page-header",children:o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Tableau de bord"}),o.jsxs("p",{className:"admin-page-header__subtitle",children:["Bienvenue, ",t?.displayName||"Administrateur"," ! Grez votre contenu pdagogique depuis cette interface."]})]})}),c&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:c})})]}),i?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des statistiques..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/disciplines"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/disciplines"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--primary",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalDisciplines}),o.jsx("div",{className:"stat-card__label",children:"Disciplines"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/chapitres"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/chapitres"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--secondary",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalChapitres}),o.jsx("div",{className:"stat-card__label",children:"Chapitres"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/ressources"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--info",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalRessources}),o.jsx("div",{className:"stat-card__label",children:"Ressources"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/ressources"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--warning",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.ressourcesPremium}),o.jsx("div",{className:"stat-card__label",children:"Ressources Premium"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/quiz"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/quiz"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--quiz",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalQuiz}),o.jsx("div",{className:"stat-card__label",children:"Quiz"})]})]}),o.jsxs("div",{className:"stat-card stat-card--clickable",onClick:()=>e("/admin/quiz-avance"),role:"button",tabIndex:0,onKeyDown:f=>f.key==="Enter"&&e("/admin/quiz-avance"),children:[o.jsx("div",{className:"stat-card__icon stat-card__icon--advanced",children:""}),o.jsxs("div",{className:"stat-card__content",children:[o.jsx("div",{className:"stat-card__value",children:n.totalQuizAvances}),o.jsx("div",{className:"stat-card__label",children:"Quiz Avancs"})]})]})]}),o.jsxs("section",{className:"content-card",children:[o.jsx("div",{className:"content-card__header",children:o.jsx("h2",{children:"Rpartition des ressources par type"})}),o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"resource-type-grid",children:[o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--cours",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.cours}),o.jsx("span",{className:"resource-type-label",children:"Cours"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--exercice",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.exercice}),o.jsx("span",{className:"resource-type-label",children:"Exercices"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--video",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.video}),o.jsx("span",{className:"resource-type-label",children:"Vidos"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/ressources"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--document",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.ressourcesParType.document}),o.jsx("span",{className:"resource-type-label",children:"Documents"})]})]}),o.jsxs("div",{className:"resource-type-item resource-type-item--clickable",onClick:()=>e("/admin/quiz"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"resource-item__icon resource-item__icon--quiz",children:""}),o.jsxs("div",{className:"resource-type-info",children:[o.jsx("span",{className:"resource-type-value",children:n.totalQuiz+n.totalQuizAvances}),o.jsx("span",{className:"resource-type-label",children:"Quiz (tous)"})]})]})]})})]}),o.jsxs("section",{className:"content-card",style:{marginTop:"var(--spacing-xl)"},children:[o.jsx("div",{className:"content-card__header",children:o.jsx("h2",{children:"Actions rapides"})}),o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"quick-actions-grid",children:[o.jsxs("a",{href:"/admin/disciplines",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les disciplines"}),o.jsx("p",{children:"Ajouter, modifier ou supprimer des matires"})]})]}),o.jsxs("a",{href:"/admin/chapitres",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les chapitres"}),o.jsx("p",{children:"Organiser le contenu par chapitres"})]})]}),o.jsxs("a",{href:"/admin/ressources",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les ressources"}),o.jsx("p",{children:"Cours, exercices, vidos et documents"})]})]}),o.jsxs("a",{href:"/admin/quiz",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les quiz"}),o.jsx("p",{children:"Crer et modifier des quiz pour les lves"})]})]}),o.jsxs("a",{href:"/admin/quiz-avance",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Quiz avancs"}),o.jsx("p",{children:"Quiz interactifs avec niveaux de difficult"})]})]}),o.jsxs("a",{href:"/admin/utilisateurs",className:"quick-action-card",children:[o.jsx("div",{className:"quick-action-icon",children:""}),o.jsxs("div",{className:"quick-action-content",children:[o.jsx("h3",{children:"Grer les utilisateurs"}),o.jsx("p",{children:"lves, professeurs et administrateurs"})]})]})]})})]})]}),o.jsx("style",{children:`
        /* ====== Stat cards cliquables ====== */
        /* Curseur pointer + effet hover sur les cartes de statistiques */
        .stat-card--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
        }
        .stat-card--clickable:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-lg, 0 8px 24px rgba(0,0,0,0.12));
          border-color: var(--color-primary, #3182ce);
        }
        .stat-card--clickable:active {
          transform: translateY(-1px);
        }

        /* Icne quiz (violet) */
        .stat-card__icon--quiz {
          background: #f3e8ff;
          color: #7c3aed;
        }
        /* Icne quiz avanc (rose) */
        .stat-card__icon--advanced {
          background: #fce7f3;
          color: #db2777;
        }

        /* ====== Grille des types de ressources ====== */
        .resource-type-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: var(--spacing-lg);
        }

        .resource-type-item {
          display: flex;
          align-items: center;
          gap: var(--spacing-md);
          padding: var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
        }

        /* Cartes de rpartition cliquables */
        .resource-type-item--clickable {
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid transparent;
        }
        .resource-type-item--clickable:hover {
          border-color: var(--color-primary, #3182ce);
          box-shadow: 0 2px 8px rgba(0,0,0,0.08);
          transform: translateY(-2px);
        }

        .resource-type-info {
          display: flex;
          flex-direction: column;
        }

        .resource-type-value {
          font-size: var(--text-2xl);
          font-weight: var(--font-bold);
          color: var(--color-text);
        }

        .resource-type-label {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ====== Actions rapides ====== */
        .quick-actions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-lg);
        }

        .quick-action-card {
          display: flex;
          align-items: flex-start;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          text-decoration: none;
          color: inherit;
          transition: all var(--transition-base);
        }

        .quick-action-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .quick-action-icon {
          font-size: 2rem;
          line-height: 1;
        }

        .quick-action-content h3 {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          color: var(--color-text);
        }

        .quick-action-content p {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0;
        }

        @media (max-width: 768px) {
          .resource-type-grid,
          .quick-actions-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})},$e={container:{maxWidth:"900px",margin:"0 auto",padding:"24px"},title:{fontSize:"1.5rem",fontWeight:700,color:"#1a365d",marginBottom:"24px"},form:{background:"#ffffff",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:"32px",border:"1px solid #e2e8f0"},formTitle:{fontSize:"1.1rem",fontWeight:600,color:"#2d3748",marginBottom:"20px",paddingBottom:"12px",borderBottom:"2px solid #3182ce"},formGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"20px"},fieldGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568"},labelOptional:{fontSize:"0.75rem",fontWeight:400,color:"#a0aec0",marginLeft:"4px"},input:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",outline:"none",transition:"border-color 0.2s"},select:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",background:"#fff",cursor:"pointer"},textarea:{padding:"10px 14px",borderRadius:"8px",border:"1px solid #e2e8f0",fontSize:"0.95rem",minHeight:"80px",resize:"vertical",fontFamily:"inherit"},btnPrimary:{padding:"12px 28px",background:"#3182ce",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"},btnSecondary:{padding:"12px 28px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",marginLeft:"12px"},btnDanger:{padding:"6px 14px",background:"#fed7d7",color:"#c53030",border:"1px solid #fc8181",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer"},btnEdit:{padding:"6px 14px",background:"#ebf8ff",color:"#2b6cb0",border:"1px solid #90cdf4",borderRadius:"6px",fontSize:"0.8rem",cursor:"pointer",marginRight:"8px"},card:{background:"#fff",borderRadius:"10px",padding:"16px 20px",boxShadow:"0 1px 4px rgba(0,0,0,0.06)",border:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},badge:{display:"inline-block",padding:"3px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600},badgeCollege:{background:"#ebf8ff",color:"#2b6cb0"},badgeLycee:{background:"#fefcbf",color:"#975a16"},badgeFormationLibre:{background:"#f0fff4",color:"#276749"},tabs:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"8px 20px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s"},tabActive:{background:"#3182ce",color:"#fff",borderColor:"#3182ce"}},Jx={nom:"",niveau:"college",classe:"6eme",ordre:0,coefficient:void 0,couleur:"",icone:"",description:""},eX=()=>{const[t,e]=w.useState([]),[n,r]=w.useState(Jx),[i,a]=w.useState(null),[c,u]=w.useState(!1),[f,h]=w.useState("all");w.useEffect(()=>{const k=Et(rt(Ne,"disciplines"),mr("nom")),O=z4(k,C=>{const V=C.docs.map($=>({id:$.id,...$.data(),createdAt:$.data().createdAt?.toDate()||new Date,updatedAt:$.data().updatedAt?.toDate()||new Date}));e(V)});return()=>O()},[]);const p=w.useCallback(k=>{const O=BO(k)[0]?.value||"6eme";r(C=>({...C,niveau:k,classe:O,coefficient:k==="formation_libre"?void 0:C.coefficient}))},[]),g=async k=>{if(k.preventDefault(),!!n.nom.trim()){u(!0);try{const O={nom:n.nom.trim(),niveau:n.niveau,classe:n.classe,ordre:n.ordre,...n.coefficient!==void 0&&{coefficient:n.coefficient},couleur:n.couleur||"",icone:n.icone||"",description:n.description||"",updatedAt:Ye.now()};i?await sn(Qe(Ne,"disciplines",i),O):await Bi(rt(Ne,"disciplines"),{...O,createdAt:Ye.now()}),r(Jx),a(null)}catch(O){console.error("Erreur lors de la sauvegarde :",O),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{u(!1)}}},y=k=>{r({nom:k.nom,niveau:k.niveau,classe:k.classe,ordre:k.ordre,coefficient:k.coefficient,couleur:k.couleur||"",icone:k.icone||"",description:k.description||""}),a(k.id)},x=async(k,O)=>{if(window.confirm(`Supprimer la discipline "${O}" ? Cette action est irrversible.`))try{await Ad(Qe(Ne,"disciplines",k))}catch(C){console.error("Erreur lors de la suppression :",C)}},E=()=>{r(Jx),a(null)},j=BO(n.niveau),N=f==="all"?t:t.filter(k=>k.niveau===f),A=k=>({...$e.badge,...k==="college"?$e.badgeCollege:{},...k==="lycee"?$e.badgeLycee:{},...k==="formation_libre"?$e.badgeFormationLibre:{}});return o.jsxs("div",{style:$e.container,children:[o.jsx("h2",{style:$e.title,children:" Gestion des Disciplines"}),o.jsxs("form",{style:$e.form,onSubmit:g,children:[o.jsx("h3",{style:$e.formTitle,children:i?" Modifier la discipline":" Ajouter une discipline"}),o.jsxs("div",{style:$e.formGrid,children:[o.jsxs("div",{style:$e.fieldGroup,children:[o.jsx("label",{style:$e.label,children:"Nom de la discipline"}),o.jsx("input",{type:"text",style:$e.input,value:n.nom,onChange:k=>r({...n,nom:k.target.value}),placeholder:"Ex : Cuisine sngalaise, Couture, Franais...",required:!0})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsx("label",{style:$e.label,children:"Niveau"}),o.jsxs("select",{style:$e.select,value:n.niveau,onChange:k=>p(k.target.value),children:[o.jsx("option",{value:"college",children:" Collge"}),o.jsx("option",{value:"lycee",children:" Lyce"}),o.jsx("option",{value:"formation_libre",children:" Formation libre"})]})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsx("label",{style:$e.label,children:n.niveau==="formation_libre"?"Niveau de formation":"Classe"}),o.jsx("select",{style:$e.select,value:n.classe,onChange:k=>r({...n,classe:k.target.value}),children:j.map(({value:k,label:O})=>o.jsx("option",{value:k,children:O},k))})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsx("label",{style:$e.label,children:"Ordre d'affichage"}),o.jsx("input",{type:"number",style:$e.input,value:n.ordre,onChange:k=>r({...n,ordre:Number(k.target.value)}),placeholder:"Ex : 1",min:"0"})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsxs("label",{style:$e.label,children:["Coefficient",n.niveau==="formation_libre"&&o.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"number",style:$e.input,value:n.coefficient??"",onChange:k=>r({...n,coefficient:k.target.value?Number(k.target.value):void 0}),placeholder:n.niveau==="formation_libre"?"Non requis":"Ex : 3",min:"1",max:"10",required:n.niveau!=="formation_libre"})]}),o.jsxs("div",{style:$e.fieldGroup,children:[o.jsxs("label",{style:$e.label,children:["Couleur",o.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"color",style:{...$e.input,maxWidth:"80px",padding:"4px",height:"40px"},value:n.couleur||"#3182ce",onChange:k=>r({...n,couleur:k.target.value})})]})]}),o.jsxs("div",{style:{...$e.fieldGroup,marginBottom:"20px"},children:[o.jsxs("label",{style:$e.label,children:["Description",o.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),o.jsx("textarea",{style:$e.textarea,value:n.description,onChange:k=>r({...n,description:k.target.value}),placeholder:"Brve description de la discipline..."})]}),o.jsxs("div",{style:{...$e.fieldGroup,marginBottom:"20px"},children:[o.jsxs("label",{style:$e.label,children:["Icne (emoji)",o.jsx("span",{style:$e.labelOptional,children:"(optionnel)"})]}),o.jsx("input",{type:"text",style:{...$e.input,maxWidth:"120px"},value:n.icone,onChange:k=>r({...n,icone:k.target.value}),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("button",{type:"submit",style:$e.btnPrimary,disabled:c,children:c?"Enregistrement...":i?"Mettre  jour":"Ajouter la discipline"}),i&&o.jsx("button",{type:"button",style:$e.btnSecondary,onClick:E,children:"Annuler"})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{style:$e.formTitle,children:[" Disciplines existantes (",N.length,")"]}),o.jsxs("div",{style:$e.tabs,children:[o.jsx("button",{style:{...$e.tab,...f==="all"?$e.tabActive:{}},onClick:()=>h("all"),children:"Toutes"}),o.jsx("button",{style:{...$e.tab,...f==="college"?$e.tabActive:{}},onClick:()=>h("college"),children:" Collge"}),o.jsx("button",{style:{...$e.tab,...f==="lycee"?$e.tabActive:{}},onClick:()=>h("lycee"),children:" Lyce"}),o.jsx("button",{style:{...$e.tab,...f==="formation_libre"?$e.tabActive:{}},onClick:()=>h("formation_libre"),children:" Formation libre"})]}),N.length===0?o.jsx("p",{style:{color:"#a0aec0",fontStyle:"italic",textAlign:"center",padding:"32px"},children:"Aucune discipline trouve pour ce filtre."}):N.map(k=>o.jsxs("div",{style:$e.card,children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[k.icone&&o.jsx("span",{style:{fontSize:"1.2rem"},children:k.icone}),o.jsx("strong",{style:{fontSize:"1rem",color:"#2d3748"},children:k.nom}),o.jsx("span",{style:A(k.niveau),children:cL[k.niveau]})]}),o.jsxs("div",{style:{fontSize:"0.85rem",color:"#718096"},children:[k.niveau==="formation_libre"?"Niveau":"Classe"," :"," ",uL(k.classe),k.coefficient!==void 0&&o.jsxs("span",{style:{marginLeft:"12px"},children:["| Coeff : ",k.coefficient]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("button",{style:$e.btnEdit,onClick:()=>y(k),children:"Modifier"}),o.jsx("button",{style:$e.btnDanger,onClick:()=>x(k.id,k.nom),children:"Supprimer"})]})]},k.id))]})]})},GO={numero:1,titre:"",description:"",objectifs:[],dureeEstimee:void 0,isPremium:!1,actif:!0},tX=()=>{const[t,e]=w.useState([]),[n,r]=w.useState([]),[i,a]=w.useState(""),[c,u]=w.useState(!0),[f,h]=w.useState(!1),[p,g]=w.useState(!1),[y,x]=w.useState(null),[E,j]=w.useState(null),[N,A]=w.useState(null),[k,O]=w.useState(!1),[C,V]=w.useState(!1),[$,D]=w.useState(null),[P,R]=w.useState(null),[q,L]=w.useState({...GO,disciplineId:""}),[M,U]=w.useState({}),[ge,Z]=w.useState(""),H=w.useCallback(async()=>{try{u(!0);const K=await jl.getAll();e(K),K.length>0&&!i&&a(K[0].id)}catch(K){console.error("Erreur lors du chargement des disciplines:",K),j("Impossible de charger les disciplines.")}finally{u(!1)}},[i]),ce=w.useCallback(async()=>{if(!i){r([]);return}try{h(!0);const K=await Vo.getByDiscipline(i);r(K)}catch(K){console.error("Erreur lors du chargement des chapitres:",K),j("Impossible de charger les chapitres.")}finally{h(!1)}},[i]);w.useEffect(()=>{H()},[H]),w.useEffect(()=>{ce()},[ce]);const Y=()=>{const K={};return q.disciplineId||(K.disciplineId="Veuillez slectionner une discipline"),q.titre.trim()?q.titre.length<3&&(K.titre="Le titre doit contenir au moins 3 caractres"):K.titre="Le titre du chapitre est requis",q.numero<1&&(K.numero="Le numro doit tre suprieur  0"),U(K),Object.keys(K).length===0},we=K=>{a(K),j(null)},Q=async()=>{const K=await Vo.getNextNumero(i);D(null),L({...GO,disciplineId:i,numero:K}),U({}),Z(""),O(!0)},F=K=>{D(K),L({disciplineId:K.disciplineId,numero:K.numero,titre:K.titre,description:K.description,objectifs:K.objectifs||[],dureeEstimee:K.dureeEstimee,isPremium:K.isPremium,actif:K.actif}),U({}),Z(""),O(!0)},re=K=>{R(K),V(!0)},ye=()=>{O(!1),V(!1),D(null),R(null),U({}),Z("")},Ee=K=>{const{name:fe,value:Te,type:ze}=K.target,ot=K.target.checked;L(ht=>({...ht,[fe]:ze==="checkbox"?ot:ze==="number"?Number(Te):Te})),M[fe]&&U(ht=>({...ht,[fe]:void 0}))},J=()=>{ge.trim()&&(L(K=>({...K,objectifs:[...K.objectifs||[],ge.trim()]})),Z(""))},ne=K=>{L(fe=>({...fe,objectifs:(fe.objectifs||[]).filter((Te,ze)=>ze!==K)}))},pe=async K=>{if(K.preventDefault(),!!Y())try{g(!0),j(null),$?(await Vo.update($.id,q),A("Chapitre modifi avec succs !")):(await Vo.create(q),A("Chapitre cr avec succs !")),ye(),await ce(),setTimeout(()=>A(null),3e3)}catch(fe){console.error("Erreur lors de la sauvegarde:",fe),j("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{g(!1)}},De=async()=>{if(P)try{x(P.id),await Vo.delete(P.id),A("Chapitre supprim avec succs !"),ye(),await ce(),setTimeout(()=>A(null),3e3)}catch(K){console.error("Erreur lors de la suppression:",K),j("Erreur lors de la suppression. Veuillez ressayer.")}finally{x(null)}},se=async K=>{try{await Vo.toggleActive(K.id,!K.actif),await ce(),A(K.actif?"Chapitre dsactiv":"Chapitre activ"),setTimeout(()=>A(null),2e3)}catch{j("Erreur lors de la mise  jour")}},X=K=>{const fe=t.find(Te=>Te.id===K);return fe?fe.nom:"Non trouve"};return o.jsxs("div",{className:"chapitre-manager",children:[o.jsxs("header",{className:"admin-page-header",children:[o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Chapitres"}),o.jsx("p",{className:"admin-page-header__subtitle",children:"Organisez le contenu pdagogique par chapitres"})]}),o.jsx("div",{className:"admin-page-header__actions",children:o.jsxs("button",{onClick:Q,className:"btn btn--primary",disabled:!i||c,children:[o.jsx("span",{children:""}),"Nouveau chapitre"]})})]}),E&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:E})}),o.jsx("button",{onClick:()=>j(null),className:"alert__close",children:""})]}),N&&o.jsxs("div",{className:"alert alert--success",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:N})})]}),o.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"discipline-selector",children:[o.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),c?o.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):t.length===0?o.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",o.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):o.jsx("div",{className:"discipline-tabs",children:t.map(K=>o.jsxs("button",{className:`discipline-tab ${i===K.id?"discipline-tab--active":""}`,onClick:()=>we(K.id),style:{"--discipline-color":K.couleur||"#2563eb"},children:[o.jsx("span",{className:"discipline-tab__icon",children:K.icone||""}),o.jsx("span",{className:"discipline-tab__name",children:K.nom}),o.jsx("span",{className:"discipline-tab__class",children:K.classe})]},K.id))})]})})}),o.jsxs("div",{className:"admin-table-container",children:[o.jsx("div",{className:"admin-table-header",children:o.jsxs("h2",{className:"admin-table-title",children:["Chapitres ",i&&`- ${X(i)}`,n.length>0&&` (${n.length})`]})}),f?o.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des chapitres..."})]}):i?n.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Aucun chapitre"}),o.jsx("p",{className:"empty-state__message",children:"Cette discipline n'a pas encore de chapitres."}),o.jsx("button",{onClick:Q,className:"btn btn--primary",children:"Crer le premier chapitre"})]}):o.jsx("div",{className:"chapitres-list",children:n.map(K=>o.jsxs("div",{className:`chapitre-card ${K.actif?"":"chapitre-card--inactive"}`,children:[o.jsx("div",{className:"chapitre-card__number",children:K.numero}),o.jsxs("div",{className:"chapitre-card__content",children:[o.jsxs("h3",{className:"chapitre-card__title",children:[K.titre,K.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"}),!K.actif&&o.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),K.description&&o.jsx("p",{className:"chapitre-card__description",children:K.description}),o.jsxs("div",{className:"chapitre-card__meta",children:[K.dureeEstimee&&o.jsxs("span",{children:[" ",K.dureeEstimee,"h estime"]}),K.objectifs&&K.objectifs.length>0&&o.jsxs("span",{children:[" ",K.objectifs.length," objectif(s)"]})]})]}),o.jsxs("div",{className:"chapitre-card__actions",children:[o.jsx("button",{onClick:()=>se(K),className:`table-action-btn ${K.actif?"table-action-btn--view":"table-action-btn--edit"}`,title:K.actif?"Dsactiver":"Activer",children:K.actif?"":""}),o.jsx("button",{onClick:()=>F(K),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),o.jsx("button",{onClick:()=>re(K),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:y===K.id,children:y===K.id?"":""})]})]},K.id))}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),o.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses chapitres."})]})]}),k&&o.jsx("div",{className:"modal-overlay",onClick:ye,children:o.jsxs("div",{className:"modal modal--lg",onClick:K=>K.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:$?"Modifier le chapitre":"Nouveau chapitre"}),o.jsx("button",{onClick:ye,className:"modal__close",children:""})]}),o.jsxs("form",{onSubmit:pe,children:[o.jsxs("div",{className:"modal__body",children:[!$&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),o.jsxs("select",{name:"disciplineId",className:`form-select ${M.disciplineId?"form-select--error":""}`,value:q.disciplineId,onChange:Ee,children:[o.jsx("option",{value:"",children:"Slectionner une discipline"}),t.map(K=>o.jsxs("option",{value:K.id,children:[K.icone," ",K.nom," (",K.classe,")"]},K.id))]}),M.disciplineId&&o.jsx("span",{className:"form-error",children:M.disciplineId})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",style:{flex:"0 0 100px"},children:[o.jsx("label",{className:"form-label form-label--required",children:"N"}),o.jsx("input",{type:"number",name:"numero",className:`form-input ${M.numero?"form-input--error":""}`,min:"1",value:q.numero,onChange:Ee}),M.numero&&o.jsx("span",{className:"form-error",children:M.numero})]}),o.jsxs("div",{className:"form-group",style:{flex:1},children:[o.jsx("label",{className:"form-label form-label--required",children:"Titre du chapitre"}),o.jsx("input",{type:"text",name:"titre",className:`form-input ${M.titre?"form-input--error":""}`,placeholder:"Ex: Les fractions, La Rvolution franaise...",value:q.titre,onChange:Ee}),M.titre&&o.jsx("span",{className:"form-error",children:M.titre})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description du chapitre...",value:q.description||"",onChange:Ee})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Objectifs pdagogiques"}),o.jsxs("div",{className:"objectifs-input",children:[o.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un objectif...",value:ge,onChange:K=>Z(K.target.value),onKeyPress:K=>K.key==="Enter"&&(K.preventDefault(),J())}),o.jsx("button",{type:"button",onClick:J,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),q.objectifs&&q.objectifs.length>0&&o.jsx("ul",{className:"objectifs-list",children:q.objectifs.map((K,fe)=>o.jsxs("li",{className:"objectif-item",children:[o.jsxs("span",{children:[" ",K]}),o.jsx("button",{type:"button",onClick:()=>ne(fe),className:"objectif-remove",children:""})]},fe))})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Dure estime (heures)"}),o.jsx("input",{type:"number",name:"dureeEstimee",className:"form-input",min:"0",step:"0.5",placeholder:"Ex: 2",value:q.dureeEstimee||"",onChange:Ee})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Options"}),o.jsxs("div",{className:"form-options",children:[o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"isPremium",checked:q.isPremium,onChange:Ee}),o.jsx("span",{children:"Contenu Premium "})]}),o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"actif",checked:q.actif!==!1,onChange:Ee}),o.jsx("span",{children:"Chapitre actif"})]})]})]})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{type:"button",onClick:ye,className:"btn btn--outline",disabled:p,children:"Annuler"}),o.jsx("button",{type:"submit",className:"btn btn--primary",disabled:p,children:p?"Enregistrement...":$?"Mettre  jour":"Crer le chapitre"})]})]})]})}),C&&P&&o.jsx("div",{className:"modal-overlay",onClick:ye,children:o.jsxs("div",{className:"modal",onClick:K=>K.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),o.jsx("button",{onClick:ye,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[o.jsxs("p",{children:["Supprimer le chapitre ",o.jsxs("strong",{children:[P.numero,". ",P.titre]})," ?"]}),o.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:"Les ressources associes ne seront pas supprimes automatiquement."})})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{onClick:ye,className:"btn btn--outline",children:"Annuler"}),o.jsx("button",{onClick:De,className:"btn btn--danger",disabled:y!==null,children:y?"Suppression...":"Supprimer"})]})]})}),o.jsx("style",{children:`
        /* Slecteur de discipline */
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* Liste des chapitres */
        .chapitres-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-md);
          padding: var(--spacing-lg);
        }

        .chapitre-card {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          transition: all var(--transition-base);
        }

        .chapitre-card:hover {
          border-color: var(--color-primary);
          box-shadow: var(--shadow-md);
        }

        .chapitre-card--inactive {
          opacity: 0.6;
          background: var(--color-bg-tertiary);
        }

        .chapitre-card__number {
          width: 48px;
          height: 48px;
          background: var(--color-primary);
          color: white;
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--text-xl);
          font-weight: var(--font-bold);
          flex-shrink: 0;
        }

        .chapitre-card__content {
          flex: 1;
          min-width: 0;
        }

        .chapitre-card__title {
          font-size: var(--text-base);
          font-weight: var(--font-semibold);
          margin-bottom: var(--spacing-xs);
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        .chapitre-card__description {
          font-size: var(--text-sm);
          color: var(--color-text-light);
          margin: 0 0 var(--spacing-sm);
        }

        .chapitre-card__meta {
          display: flex;
          gap: var(--spacing-lg);
          font-size: var(--text-xs);
          color: var(--color-text-lighter);
        }

        .chapitre-card__actions {
          display: flex;
          gap: var(--spacing-sm);
        }

        /* Formulaire: Ligne */
        .form-row {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-lg);
        }

        @media (max-width: 600px) {
          .form-row {
            grid-template-columns: 1fr;
          }
        }

        /* Objectifs */
        .objectifs-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .objectifs-list {
          list-style: none;
          margin-top: var(--spacing-md);
        }

        .objectif-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--spacing-sm) var(--spacing-md);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-md);
          margin-bottom: var(--spacing-xs);
        }

        .objectif-remove {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--color-error);
          opacity: 0.7;
        }

        .objectif-remove:hover {
          opacity: 1;
        }

        /* Options */
        .form-options {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-sm);
        }
      `})]})},og=[{value:"cours",label:"Cours",icon:"",color:"#2563eb"},{value:"exercice",label:"Exercice",icon:"",color:"#10b981"},{value:"video",label:"Vido",icon:"",color:"#ef4444"},{value:"document",label:"Document",icon:"",color:"#f59e0b"},{value:"quiz",label:"Quiz",icon:"",color:"#8b5cf6"}],lg={cours:[".pdf",".doc",".docx",".ppt",".pptx"],exercice:[".pdf",".doc",".docx"],video:[".mp4",".webm",".mov",".avi"],document:[".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],quiz:[".json",".pdf"]},Zx=50,KO={titre:"",type:"cours",description:"",contenu:"",chapitre:"",ordre:1,isPremium:!1,actif:!0,tags:[],duree:void 0,urlExterne:""},nX=()=>{const{currentUser:t}=Vn(),[e,n]=w.useState([]),[r,i]=w.useState([]),[a,c]=w.useState([]),[u,f]=w.useState([]),[h,p]=w.useState(""),[g,y]=w.useState(""),[x,E]=w.useState(""),[j,N]=w.useState(""),[A,k]=w.useState(""),[O,C]=w.useState(!0),[V,$]=w.useState(!1),[D,P]=w.useState(!1),[R,q]=w.useState(!1),[L,M]=w.useState(null),[U,ge]=w.useState(!1),[Z,H]=w.useState(0),[ce,Y]=w.useState(null),[we,Q]=w.useState(null),[F,re]=w.useState(!1),[ye,Ee]=w.useState(!1),[J,ne]=w.useState(!1),[pe,De]=w.useState(null),[se,X]=w.useState(null),[K,fe]=w.useState(null),[Te,ze]=w.useState({...KO,disciplineId:""}),[ot,ht]=w.useState({}),[gt,pr]=w.useState(null),[Rt,kt]=w.useState(null),Lr=w.useRef(null),[me,Re]=w.useState(""),Be=w.useCallback(async()=>{try{C(!0);const te=await jl.getAll();n(te),te.length>0&&!h&&p(te[0].id)}catch(te){console.error("Erreur lors du chargement des disciplines:",te),Y("Impossible de charger les disciplines.")}finally{C(!1)}},[h]),Ke=w.useCallback(async()=>{if(!h){i([]);return}try{$(!0);const te=await Vo.getByDiscipline(h);i(te)}catch(te){console.error("Erreur lors du chargement des chapitres:",te)}finally{$(!1)}},[h]),Vt=w.useCallback(async()=>{if(!h){c([]),f([]);return}try{P(!0);const te=await Ea.getByDiscipline(h);c(te),f(te)}catch(te){console.error("Erreur lors du chargement des ressources:",te),Y("Impossible de charger les ressources.")}finally{P(!1)}},[h]);w.useEffect(()=>{Be()},[Be]),w.useEffect(()=>{Ke()},[Ke]),w.useEffect(()=>{Vt()},[Vt]),w.useEffect(()=>{let te=[...a];if(g&&(te=te.filter(Ve=>Ve.chapitre===g)),x&&(te=te.filter(Ve=>Ve.type===x)),j==="premium"?te=te.filter(Ve=>Ve.isPremium):j==="free"&&(te=te.filter(Ve=>!Ve.isPremium)),A){const Ve=A.toLowerCase();te=te.filter(vt=>vt.titre.toLowerCase().includes(Ve)||vt.description?.toLowerCase().includes(Ve)||vt.tags?.some(Fn=>Fn.toLowerCase().includes(Ve)))}f(te)},[a,g,x,j,A]);const zn=()=>{const te={};if(Te.disciplineId||(te.disciplineId="Veuillez slectionner une discipline"),Te.titre.trim()?Te.titre.length<3&&(te.titre="Le titre doit contenir au moins 3 caractres"):te.titre="Le titre est requis",Te.type||(te.type="Veuillez slectionner un type de ressource"),gt){const Ve="."+gt.name.split(".").pop()?.toLowerCase(),vt=lg[Te.type];vt.includes(Ve)||(te.fichier=`Extension non autorise. Extensions acceptes : ${vt.join(", ")}`),gt.size/(1024*1024)>Zx&&(te.fichier=`Le fichier est trop volumineux (max ${Zx} Mo)`)}return ht(te),Object.keys(te).length===0},qr=te=>{p(te),y(""),Y(null)},so=()=>{De(null),ze({...KO,disciplineId:h}),ht({}),pr(null),kt(null),Re(""),re(!0)},Ur=te=>{De(te),ze({disciplineId:te.disciplineId,titre:te.titre,type:te.type,description:te.description,contenu:te.contenu,chapitre:te.chapitre||"",ordre:te.ordre,isPremium:te.isPremium,actif:te.actif,tags:te.tags||[],duree:te.duree,urlExterne:te.urlExterne||""}),ht({}),pr(null),kt(te.fichierURL||null),Re(""),re(!0)},Hi=te=>{fe(te),ne(!0)},Gc=te=>{X(te),Ee(!0)},on=()=>{re(!1),Ee(!1),ne(!1),De(null),X(null),fe(null),ht({}),pr(null),kt(null),Re("")},At=te=>{const{name:Ve,value:vt,type:Fn}=te.target,Al=te.target.checked;ze(_i=>({..._i,[Ve]:Fn==="checkbox"?Al:Fn==="number"?Number(vt):vt})),ot[Ve]&&ht(_i=>({..._i,[Ve]:void 0}))},Vr=te=>{const Ve=te.target.files?.[0];if(Ve)if(pr(Ve),ht(vt=>({...vt,fichier:void 0})),Ve.type.startsWith("image/")||Ve.type.startsWith("video/")){const vt=new FileReader;vt.onloadend=()=>{kt(vt.result)},vt.readAsDataURL(Ve)}else kt(null)},en=()=>{pr(null),kt(null),Lr.current&&(Lr.current.value="")},Sl=()=>{me.trim()&&!Te.tags?.includes(me.trim())&&(ze(te=>({...te,tags:[...te.tags||[],me.trim()]})),Re(""))},ao=te=>{ze(Ve=>({...Ve,tags:(Ve.tags||[]).filter((vt,Fn)=>Fn!==te)}))},Kc=async te=>{if(te.preventDefault(),!!zn())try{q(!0),Y(null);let Ve=pe?.fichierURL,vt=pe?.fichierNom;if(gt){ge(!0);const Al=pe?.id||`temp_${Date.now()}`;Ve=await Ea.uploadFile(gt,Al),vt=gt?.name||"fichier",ge(!1)}const Fn={...Te,fichierURL:Ve,fichierNom:vt};pe?(await Ea.update(pe.id,Fn),Q("Ressource modifie avec succs !")):(await Ea.create(Fn,"admin"),Q("Ressource cre avec succs !")),on(),await Vt(),setTimeout(()=>Q(null),3e3)}catch(Ve){console.error("Erreur lors de la sauvegarde:",Ve),Y("Erreur lors de la sauvegarde. Veuillez ressayer.")}finally{q(!1),ge(!1),H(0)}},bi=async()=>{if(se)try{M(se.id),se.fichierURL&&await Ea.deleteFile(se.fichierURL),await Ea.delete(se.id),Q("Ressource supprime avec succs !"),on(),await Vt(),setTimeout(()=>Q(null),3e3)}catch(te){console.error("Erreur lors de la suppression:",te),Y("Erreur lors de la suppression. Veuillez ressayer.")}finally{M(null)}},na=async te=>{try{await Ea.togglePremium(te.id,!te.isPremium),await Vt(),Q(te.isPremium?"Ressource passe en gratuit":"Ressource passe en Premium"),setTimeout(()=>Q(null),2e3)}catch{Y("Erreur lors de la mise  jour")}},ln=te=>{const Ve=e.find(vt=>vt.id===te);return Ve?Ve.nom:"Non trouve"},xi=te=>{const Ve=r.find(vt=>vt.id===te);return Ve?`${Ve.numero}. ${Ve.titre}`:""},gr=te=>og.find(Ve=>Ve.value===te)||og[0],ti=te=>te<1024?te+" o":te<1024*1024?(te/1024).toFixed(1)+" Ko":(te/(1024*1024)).toFixed(1)+" Mo";return o.jsxs("div",{className:"resource-manager",children:[o.jsxs("header",{className:"admin-page-header",children:[o.jsxs("div",{className:"admin-page-header__info",children:[o.jsx("h1",{className:"admin-page-header__title",children:"Gestion des Ressources"}),o.jsx("p",{className:"admin-page-header__subtitle",children:"Grez les cours, exercices, vidos et documents pdagogiques"})]}),o.jsx("div",{className:"admin-page-header__actions",children:o.jsxs("button",{onClick:so,className:"btn btn--primary",disabled:!h||O,children:[o.jsx("span",{children:""}),"Nouvelle ressource"]})})]}),ce&&o.jsxs("div",{className:"alert alert--error",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:ce})}),o.jsx("button",{onClick:()=>Y(null),className:"alert__close",children:""})]}),we&&o.jsxs("div",{className:"alert alert--success",children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:we})})]}),o.jsx("div",{className:"content-card",style:{marginBottom:"var(--spacing-lg)"},children:o.jsx("div",{className:"content-card__body",children:o.jsxs("div",{className:"discipline-selector",children:[o.jsx("label",{className:"form-label",children:"Slectionner une discipline :"}),O?o.jsx("p",{className:"text-muted",children:"Chargement des disciplines..."}):e.length===0?o.jsxs("p",{className:"text-muted",children:["Aucune discipline disponible.",o.jsx("a",{href:"/admin/disciplines",children:" Crer une discipline"})]}):o.jsx("div",{className:"discipline-tabs",children:e.map(te=>o.jsxs("button",{className:`discipline-tab ${h===te.id?"discipline-tab--active":""}`,onClick:()=>qr(te.id),style:{"--discipline-color":te.couleur||"#2563eb"},children:[o.jsx("span",{className:"discipline-tab__icon",children:te.icone||""}),o.jsx("span",{className:"discipline-tab__name",children:te.nom}),o.jsx("span",{className:"discipline-tab__class",children:te.classe})]},te.id))})]})})}),o.jsxs("div",{className:"admin-table-container",children:[o.jsxs("div",{className:"admin-table-header",children:[o.jsxs("h2",{className:"admin-table-title",children:["Ressources ",h&&`- ${ln(h)}`,u.length>0&&` (${u.length})`]}),o.jsxs("div",{className:"admin-table-actions",children:[o.jsxs("div",{className:"search-input",children:[o.jsx("span",{className:"search-input__icon",children:""}),o.jsx("input",{type:"text",className:"search-input__field",placeholder:"Rechercher...",value:A,onChange:te=>k(te.target.value)})]}),o.jsxs("select",{className:"form-select form-select--sm",value:g,onChange:te=>y(te.target.value),disabled:V||r.length===0,children:[o.jsx("option",{value:"",children:"Tous les chapitres"}),r.map(te=>o.jsxs("option",{value:te.id,children:[te.numero,". ",te.titre]},te.id))]}),o.jsxs("select",{className:"form-select form-select--sm",value:x,onChange:te=>E(te.target.value),children:[o.jsx("option",{value:"",children:"Tous les types"}),og.map(te=>o.jsxs("option",{value:te.value,children:[te.icon," ",te.label]},te.value))]}),o.jsxs("select",{className:"form-select form-select--sm",value:j,onChange:te=>N(te.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"premium",children:" Premium"}),o.jsx("option",{value:"free",children:"Gratuit"})]})]})]}),D?o.jsxs("div",{className:"loading-container",style:{padding:"var(--spacing-2xl)"},children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement des ressources..."})]}):h?u.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Aucune ressource"}),o.jsx("p",{className:"empty-state__message",children:A||x||j||g?"Aucune ressource ne correspond aux critres de recherche.":"Cette discipline n'a pas encore de ressources."}),!A&&!x&&!j&&!g&&o.jsx("button",{onClick:so,className:"btn btn--primary",children:"Crer la premire ressource"})]}):o.jsx("div",{className:"resource-list",style:{padding:"var(--spacing-lg)"},children:u.map(te=>{const Ve=gr(te.type);return o.jsxs("div",{className:"resource-item",children:[o.jsx("div",{className:`resource-item__icon resource-item__icon--${te.type}`,style:{backgroundColor:`${Ve.color}15`,color:Ve.color},children:Ve.icon}),o.jsxs("div",{className:"resource-item__content",children:[o.jsxs("div",{className:"resource-item__title",children:[te.titre,te.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"}),!te.actif&&o.jsx("span",{className:"badge badge--warning",children:"Inactif"})]}),o.jsxs("div",{className:"resource-item__meta",children:[o.jsx("span",{children:Ve.label}),te.chapitre&&o.jsxs("span",{children:[" ",xi(te.chapitre)]}),te.duree&&o.jsxs("span",{children:[" ",te.duree," min"]}),te.fichierNom&&o.jsxs("span",{children:[" ",te.fichierNom]}),te.tags&&te.tags.length>0&&o.jsxs("span",{children:[" ",te.tags.join(", ")]})]})]}),o.jsxs("div",{className:"resource-item__actions",children:[o.jsx("button",{onClick:()=>na(te),className:`table-action-btn ${te.isPremium?"table-action-btn--warning":"table-action-btn--view"}`,title:te.isPremium?"Passer en gratuit":"Passer en Premium",children:te.isPremium?"":""}),(te.fichierURL||te.urlExterne)&&o.jsx("button",{onClick:()=>Hi(te),className:"table-action-btn table-action-btn--view",title:"Prvisualiser",children:""}),o.jsx("button",{onClick:()=>Ur(te),className:"table-action-btn table-action-btn--edit",title:"Modifier",children:""}),o.jsx("button",{onClick:()=>Gc(te),className:"table-action-btn table-action-btn--delete",title:"Supprimer",disabled:L===te.id,children:L===te.id?"":""})]})]},te.id)})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state__icon",children:""}),o.jsx("h3",{className:"empty-state__title",children:"Slectionnez une discipline"}),o.jsx("p",{className:"empty-state__message",children:"Choisissez une discipline ci-dessus pour voir ses ressources."})]})]}),F&&o.jsx("div",{className:"modal-overlay",onClick:on,children:o.jsxs("div",{className:"modal modal--xl",onClick:te=>te.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:pe?"Modifier la ressource":"Nouvelle ressource"}),o.jsx("button",{onClick:on,className:"modal__close",children:""})]}),o.jsxs("form",{onSubmit:Kc,children:[o.jsxs("div",{className:"modal__body",children:[!pe&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label form-label--required",children:"Discipline"}),o.jsxs("select",{name:"disciplineId",className:`form-select ${ot.disciplineId?"form-select--error":""}`,value:Te.disciplineId,onChange:At,children:[o.jsx("option",{value:"",children:"Slectionner une discipline"}),e.map(te=>o.jsxs("option",{value:te.id,children:[te.icone," ",te.nom," (",te.classe,")"]},te.id))]}),ot.disciplineId&&o.jsx("span",{className:"form-error",children:ot.disciplineId})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",style:{flex:2},children:[o.jsx("label",{className:"form-label form-label--required",children:"Titre"}),o.jsx("input",{type:"text",name:"titre",className:`form-input ${ot.titre?"form-input--error":""}`,placeholder:"Ex: Introduction aux fractions",value:Te.titre,onChange:At}),ot.titre&&o.jsx("span",{className:"form-error",children:ot.titre})]}),o.jsxs("div",{className:"form-group",style:{flex:1},children:[o.jsx("label",{className:"form-label form-label--required",children:"Type"}),o.jsx("select",{name:"type",className:`form-select ${ot.type?"form-select--error":""}`,value:Te.type,onChange:At,children:og.map(te=>o.jsxs("option",{value:te.value,children:[te.icon," ",te.label]},te.value))}),ot.type&&o.jsx("span",{className:"form-error",children:ot.type})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Chapitre (optionnel)"}),o.jsxs("select",{name:"chapitreId",className:"form-select",value:Te.chapitre||"",onChange:At,disabled:V,children:[o.jsx("option",{value:"",children:"Aucun chapitre"}),r.map(te=>o.jsxs("option",{value:te.id,children:[te.numero,". ",te.titre]},te.id))]})]}),o.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[o.jsx("label",{className:"form-label",children:"Ordre"}),o.jsx("input",{type:"number",name:"ordre",className:"form-input",min:"1",value:Te.ordre,onChange:At})]}),o.jsxs("div",{className:"form-group",style:{flex:"0 0 120px"},children:[o.jsx("label",{className:"form-label",children:"Dure (min)"}),o.jsx("input",{type:"number",name:"duree",className:"form-input",min:"0",placeholder:"Ex: 30",value:Te.duree||"",onChange:At})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Description"}),o.jsx("textarea",{name:"description",className:"form-textarea",rows:3,placeholder:"Description de la ressource...",value:Te.description||"",onChange:At})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{className:"form-label",children:["Fichier",o.jsxs("span",{className:"form-helper",style:{marginLeft:"var(--spacing-sm)"},children:["(",lg[Te.type].join(", ")," - max ",Zx," Mo)"]})]}),o.jsxs("div",{className:"file-upload",children:[o.jsx("input",{ref:Lr,type:"file",accept:lg[Te.type].join(","),onChange:Vr,className:"file-upload__input",id:"file-input"}),!gt&&!Rt?o.jsxs("label",{htmlFor:"file-input",className:"file-upload__dropzone",children:[o.jsx("div",{className:"file-upload__icon",children:""}),o.jsx("p",{className:"file-upload__text",children:"Cliquez ou glissez un fichier ici"}),o.jsx("p",{className:"file-upload__hint",children:lg[Te.type].join(", ")})]}):o.jsxs("div",{className:"file-upload__preview",children:[gt?.type.startsWith("image/")&&Rt&&o.jsx("img",{src:Rt,alt:"Aperu",className:"file-preview__image"}),gt?.type.startsWith("video/")&&Rt&&o.jsx("video",{src:Rt,controls:!0,className:"file-preview__video"}),!gt?.type.startsWith("image/")&&!gt?.type.startsWith("video/")&&o.jsx("div",{className:"file-preview__document",children:o.jsx("span",{className:"file-preview__icon",children:gr(Te.type).icon})}),o.jsxs("div",{className:"file-preview__info",children:[o.jsx("p",{className:"file-preview__name",children:gt?.name||pe?.fichierNom}),gt&&o.jsx("p",{className:"file-preview__size",children:ti(gt.size)})]}),o.jsx("button",{type:"button",onClick:en,className:"file-preview__remove",children:""})]})]}),ot.fichier&&o.jsx("span",{className:"form-error",children:ot.fichier}),U&&o.jsxs("div",{className:"upload-progress",children:[o.jsx("div",{className:"upload-progress__bar",style:{width:`${Z}%`}}),o.jsxs("span",{className:"upload-progress__text",children:[Z,"%"]})]})]}),Te.type==="video"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"URL externe (YouTube, Vimeo...)"}),o.jsx("input",{type:"url",name:"urlExterne",className:"form-input",placeholder:"https://www.youtube.com/watch?v=...",value:Te.urlExterne||"",onChange:At}),o.jsx("span",{className:"form-helper",children:"Alternative  l'upload de fichier"})]}),Te.type==="cours"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Contenu du cours"}),o.jsx("textarea",{name:"contenu",className:"form-textarea",rows:6,placeholder:"Saisissez le contenu du cours ici...",value:Te.contenu||"",onChange:At}),o.jsx("span",{className:"form-helper",children:"Optionnel si vous uploadez un fichier"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Tags"}),o.jsxs("div",{className:"tags-input",children:[o.jsx("input",{type:"text",className:"form-input",placeholder:"Ajouter un tag...",value:me,onChange:te=>Re(te.target.value),onKeyPress:te=>te.key==="Enter"&&(te.preventDefault(),Sl())}),o.jsx("button",{type:"button",onClick:Sl,className:"btn btn--outline btn--sm",children:"Ajouter"})]}),Te.tags&&Te.tags.length>0&&o.jsx("div",{className:"tags-list",children:Te.tags.map((te,Ve)=>o.jsxs("span",{className:"tag",children:[te,o.jsx("button",{type:"button",onClick:()=>ao(Ve),className:"tag__remove",children:""})]},Ve))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Options"}),o.jsxs("div",{className:"form-options",children:[o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"isPremium",checked:Te.isPremium,onChange:At}),o.jsx("span",{children:"Contenu Premium "})]}),o.jsxs("label",{className:"form-checkbox",children:[o.jsx("input",{type:"checkbox",name:"actif",checked:Te.actif!==!1,onChange:At}),o.jsx("span",{children:"Ressource active"})]})]})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{type:"button",onClick:on,className:"btn btn--outline",disabled:R||U,children:"Annuler"}),o.jsx("button",{type:"submit",className:"btn btn--primary",disabled:R||U,children:R||U?U?`Upload ${Z}%...`:"Enregistrement...":pe?"Mettre  jour":"Crer la ressource"})]})]})]})}),J&&K&&o.jsx("div",{className:"modal-overlay",onClick:on,children:o.jsxs("div",{className:"modal modal--xl",onClick:te=>te.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsxs("h2",{className:"modal__title",children:[gr(K.type).icon," ",K.titre]}),o.jsx("button",{onClick:on,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[K.type==="video"&&K.urlExterne?o.jsx("div",{className:"preview-video",children:o.jsx("iframe",{src:K.urlExterne.replace("watch?v=","embed/"),title:K.titre,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):K.fichierURL?o.jsx("div",{className:"preview-file",children:K.fichierURL.match(/\.(jpg|jpeg|png|gif|webp)$/i)?o.jsx("img",{src:K.fichierURL,alt:K.titre}):K.fichierURL.match(/\.(mp4|webm)$/i)?o.jsx("video",{src:K.fichierURL,controls:!0}):K.fichierURL.match(/\.pdf$/i)?o.jsx("iframe",{src:K.fichierURL,title:K.titre}):o.jsxs("div",{className:"preview-download",children:[o.jsx("span",{className:"preview-download__icon",children:gr(K.type).icon}),o.jsx("p",{children:K.fichierNom}),o.jsx("a",{href:K.fichierURL,target:"_blank",rel:"noopener noreferrer",className:"btn btn--primary",children:"Tlcharger"})]})}):K.contenu?o.jsx("div",{className:"preview-content",children:o.jsx("p",{children:K.contenu})}):o.jsx("div",{className:"preview-empty",children:o.jsx("p",{children:"Aucun contenu  prvisualiser"})}),o.jsxs("div",{className:"preview-info",children:[K.description&&o.jsx("p",{className:"preview-description",children:K.description}),o.jsxs("div",{className:"preview-meta",children:[o.jsxs("span",{children:["Type : ",gr(K.type).label]}),K.duree&&o.jsxs("span",{children:["Dure : ",K.duree," min"]}),K.isPremium&&o.jsx("span",{className:"badge badge--premium",children:"Premium"})]})]})]})]})}),ye&&se&&o.jsx("div",{className:"modal-overlay",onClick:on,children:o.jsxs("div",{className:"modal",onClick:te=>te.stopPropagation(),children:[o.jsxs("div",{className:"modal__header",children:[o.jsx("h2",{className:"modal__title",children:"Confirmer la suppression"}),o.jsx("button",{onClick:on,className:"modal__close",children:""})]}),o.jsxs("div",{className:"modal__body",children:[o.jsxs("p",{children:["Supprimer la ressource ",o.jsx("strong",{children:se.titre})," ?"]}),se.fichierURL&&o.jsxs("div",{className:"alert alert--warning",style:{marginTop:"var(--spacing-md)"},children:[o.jsx("span",{className:"alert__icon",children:""}),o.jsx("div",{className:"alert__content",children:o.jsx("p",{className:"alert__message",children:"Le fichier associ sera galement supprim de faon permanente."})})]})]}),o.jsxs("div",{className:"modal__footer",children:[o.jsx("button",{onClick:on,className:"btn btn--outline",children:"Annuler"}),o.jsx("button",{onClick:bi,className:"btn btn--danger",disabled:L!==null,children:L?"Suppression...":"Supprimer"})]})]})}),o.jsx("style",{children:`
        /* ==================== SLECTEUR DE DISCIPLINE ==================== */
        
        .discipline-tabs {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        .discipline-tab {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          border: 2px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: white;
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .discipline-tab:hover {
          border-color: var(--discipline-color, var(--color-primary));
        }

        .discipline-tab--active {
          border-color: var(--discipline-color, var(--color-primary));
          background: color-mix(in srgb, var(--discipline-color, var(--color-primary)) 10%, white);
        }

        .discipline-tab__icon {
          font-size: var(--text-lg);
        }

        .discipline-tab__name {
          font-weight: var(--font-medium);
        }

        .discipline-tab__class {
          font-size: var(--text-xs);
          color: var(--color-text-light);
          background: var(--color-bg-secondary);
          padding: 2px 6px;
          border-radius: var(--radius-sm);
        }

        /* ==================== FORMULAIRE ==================== */
        
        .form-row {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: var(--spacing-lg);
        }

        .form-options {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          margin-top: var(--spacing-sm);
        }

        .form-select--sm {
          padding: var(--spacing-sm) var(--spacing-md);
          font-size: var(--text-sm);
          min-width: 140px;
        }

        /* ==================== UPLOAD DE FICHIER ==================== */
        
        .file-upload {
          position: relative;
        }

        .file-upload__input {
          position: absolute;
          opacity: 0;
          pointer-events: none;
        }

        .file-upload__dropzone {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: var(--spacing-xl);
          border: 2px dashed var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
          cursor: pointer;
          transition: all var(--transition-base);
        }

        .file-upload__dropzone:hover {
          border-color: var(--color-primary);
          background: rgba(37, 99, 235, 0.05);
        }

        .file-upload__icon {
          font-size: 48px;
          margin-bottom: var(--spacing-md);
        }

        .file-upload__text {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
        }

        .file-upload__hint {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-upload__preview {
          display: flex;
          align-items: center;
          gap: var(--spacing-lg);
          padding: var(--spacing-md);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          background: var(--color-bg-secondary);
        }

        .file-preview__image,
        .file-preview__video {
          width: 120px;
          height: 80px;
          object-fit: cover;
          border-radius: var(--radius-md);
        }

        .file-preview__document {
          width: 80px;
          height: 80px;
          background: white;
          border: 1px solid var(--color-border);
          border-radius: var(--radius-md);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .file-preview__icon {
          font-size: 32px;
        }

        .file-preview__info {
          flex: 1;
        }

        .file-preview__name {
          font-weight: var(--font-medium);
          margin-bottom: var(--spacing-xs);
          word-break: break-all;
        }

        .file-preview__size {
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        .file-preview__remove {
          width: 32px;
          height: 32px;
          border: none;
          background: var(--color-error);
          color: white;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all var(--transition-base);
        }

        .file-preview__remove:hover {
          background: #dc2626;
          transform: scale(1.1);
        }

        /* ==================== BARRE DE PROGRESSION ==================== */
        
        .upload-progress {
          margin-top: var(--spacing-md);
          height: 8px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
          position: relative;
        }

        .upload-progress__bar {
          height: 100%;
          background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
          border-radius: var(--radius-full);
          transition: width var(--transition-base);
        }

        .upload-progress__text {
          position: absolute;
          right: var(--spacing-sm);
          top: 50%;
          transform: translateY(-50%);
          font-size: var(--text-xs);
          font-weight: var(--font-semibold);
          color: var(--color-text);
        }

        /* ==================== TAGS ==================== */
        
        .tags-input {
          display: flex;
          gap: var(--spacing-sm);
        }

        .tags-list {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-sm);
          margin-top: var(--spacing-md);
        }

        .tag {
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          padding: var(--spacing-xs) var(--spacing-sm);
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: var(--text-sm);
          color: var(--color-text);
        }

        .tag__remove {
          width: 18px;
          height: 18px;
          border: none;
          background: transparent;
          color: var(--color-text-light);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: all var(--transition-base);
        }

        .tag__remove:hover {
          background: var(--color-error);
          color: white;
        }

        /* ==================== PRVISUALISATION ==================== */
        
        .preview-video {
          position: relative;
          padding-bottom: 56.25%;
          height: 0;
          overflow: hidden;
          border-radius: var(--radius-lg);
        }

        .preview-video iframe {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border: none;
        }

        .preview-file {
          text-align: center;
        }

        .preview-file img,
        .preview-file video {
          max-width: 100%;
          max-height: 60vh;
          border-radius: var(--radius-lg);
        }

        .preview-file iframe {
          width: 100%;
          height: 60vh;
          border: none;
          border-radius: var(--radius-lg);
        }

        .preview-download {
          padding: var(--spacing-2xl);
          text-align: center;
        }

        .preview-download__icon {
          font-size: 64px;
          display: block;
          margin-bottom: var(--spacing-lg);
        }

        .preview-content {
          padding: var(--spacing-lg);
          background: var(--color-bg-secondary);
          border-radius: var(--radius-lg);
          white-space: pre-wrap;
        }

        .preview-empty {
          padding: var(--spacing-2xl);
          text-align: center;
          color: var(--color-text-light);
        }

        .preview-info {
          margin-top: var(--spacing-lg);
          padding-top: var(--spacing-lg);
          border-top: 1px solid var(--color-border);
        }

        .preview-description {
          color: var(--color-text-light);
          margin-bottom: var(--spacing-md);
        }

        .preview-meta {
          display: flex;
          flex-wrap: wrap;
          gap: var(--spacing-lg);
          font-size: var(--text-sm);
          color: var(--color-text-light);
        }

        /* ==================== RESSOURCES - AFFICHAGE CARTE ==================== */
        
        .resource-item__title {
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
        }

        /* ==================== ACTION WARNING ==================== */
        
        .table-action-btn--warning {
          color: var(--color-warning);
        }

        /* ==================== RESPONSIVE ==================== */
        
        @media (max-width: 768px) {
          .form-row {
            grid-template-columns: 1fr;
          }

          .admin-table-actions {
            flex-direction: column;
            align-items: stretch;
          }

          .search-input__field {
            width: 100%;
          }

          .file-upload__preview {
            flex-direction: column;
            text-align: center;
          }

          .preview-meta {
            flex-direction: column;
            gap: var(--spacing-sm);
          }
        }
      `})]})},dL=rt(Ne,"quizzes"),fL=async t=>{try{let e=Et(dL,mr("titre","asc"));t?.disciplineId;let r=(await Nt(e)).docs.map(i=>({id:i.id,...i.data()}));return t?.isPremium,t?.difficulte,r}catch(e){throw console.error("Erreur lors de la rcupration des quiz :",e),e}},rX=async t=>{try{const e=await Pr(Qe(Ne,"quizzes",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Erreur lors de la rcupration du quiz :",e),e}},iX=async t=>{try{return(await Bi(dL,{...t,createdAt:Ye.now(),updatedAt:Ye.now()})).id}catch(e){throw console.error("Erreur lors de la cration du quiz :",e),e}},sX=async(t,e)=>{try{await sn(Qe(Ne,"quizzes",t),{...e,updatedAt:Ye.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du quiz :",n),n}},aX=async t=>{try{await Ad(Qe(Ne,"quizzes",t))}catch(e){throw console.error("Erreur lors de la suppression du quiz :",e),e}},oX=()=>`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,QO=()=>({id:oX(),question:"",options:["","","",""],reponseCorrecte:0,explication:"",difficulte:"moyen",points:1}),WO=t=>{const e=t.questions||[],n=e.reduce((i,a)=>i+(a.points||1),0),r={facile:e.filter(i=>i.difficulte==="facile").length,moyen:e.filter(i=>i.difficulte==="moyen").length,difficile:e.filter(i=>i.difficulte==="difficile").length};return{nombreQuestions:e.length,totalPoints:n,parDifficulte:r,duree:t.duree||0}},lX=()=>{const[t,e]=w.useState([]),[n,r]=w.useState([]),[i,a]=w.useState(!0),[c,u]=w.useState(null),[f,h]=w.useState(null),[p,g]=w.useState(""),[y,x]=w.useState(""),[E,j]=w.useState(""),[N,A]=w.useState(""),[k,O]=w.useState(!1),[C,V]=w.useState("list"),[$,D]=w.useState(null),[P,R]=w.useState({disciplineId:"",titre:"",questions:[],duree:15,isPremium:!1,noteMinimale:50}),[q,L]=w.useState(null),[M,U]=w.useState(!1),[ge,Z]=w.useState(null),[H,ce]=w.useState(null),[Y,we]=w.useState({}),[Q,F]=w.useState(!1),re=w.useCallback(async()=>{a(!0),u(null);try{const[me,Re]=await Promise.all([fL(),jl.getAll()]);e(me),r(Re.map(Be=>({id:Be.id,nom:Be.nom||Be.name||Be.id})))}catch(me){u("Erreur lors du chargement des donnes."),console.error(me)}finally{a(!1)}},[]);w.useEffect(()=>{re()},[re]),w.useEffect(()=>{if(f){const me=setTimeout(()=>h(null),4e3);return()=>clearTimeout(me)}},[f]);const ye=t.filter(me=>{if(p){const Re=p.toLowerCase();if(!me.titre.toLowerCase().includes(Re))return!1}return!(y&&me.disciplineId!==y||E==="true"&&!me.isPremium||E==="false"&&me.isPremium||N&&!me.questions?.some(Be=>Be.difficulte===N))}),Ee=()=>{D(null),R({disciplineId:"",titre:"",questions:[QO()],duree:15,isPremium:!1,noteMinimale:50}),L(null),V("form")},J=me=>{D(me),R({disciplineId:me.disciplineId,titre:me.titre,questions:me.questions||[],duree:me.duree||15,isPremium:me.isPremium||!1,noteMinimale:me.noteMinimale||50}),L(null),V("form")},ne=async()=>{if(!P.titre.trim()){u("Le titre du quiz est obligatoire.");return}if(!P.disciplineId){u("Veuillez slectionner une discipline.");return}if(P.questions.length===0){u("Le quiz doit contenir au moins une question.");return}for(let me=0;me<P.questions.length;me++){const Re=P.questions[me];if(!Re.question.trim()){u(`La question ${me+1} n'a pas d'nonc.`);return}if(Re.options.filter(Ke=>!Ke.trim()).length>0){u(`La question ${me+1} a des options vides.`);return}}U(!0),u(null);try{$?(await sX($.id,P),h("Quiz mis  jour avec succs !")):(await iX(P),h("Quiz cr avec succs !")),await re(),V("list")}catch(me){u("Erreur lors de la sauvegarde du quiz."),console.error(me)}finally{U(!1)}},pe=async me=>{try{await aX(me),h("Quiz supprim avec succs."),Z(null),await re()}catch(Re){u("Erreur lors de la suppression du quiz."),console.error(Re)}},De=()=>{const me=QO();R(Re=>({...Re,questions:[...Re.questions,me]})),L(me.id)},se=me=>{const Re=P.questions.find(zn=>zn.id===me);if(!Re)return;const Be={...Re,id:`q_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,question:`${Re.question} (copie)`},Ke=P.questions.findIndex(zn=>zn.id===me),Vt=[...P.questions];Vt.splice(Ke+1,0,Be),R(zn=>({...zn,questions:Vt})),L(Be.id)},X=me=>{R(Re=>({...Re,questions:Re.questions.filter(Be=>Be.id!==me)})),q===me&&L(null)},K=(me,Re,Be)=>{R(Ke=>({...Ke,questions:Ke.questions.map(Vt=>Vt.id===me?{...Vt,[Re]:Be}:Vt)}))},fe=(me,Re,Be)=>{R(Ke=>({...Ke,questions:Ke.questions.map(Vt=>Vt.id===me?{...Vt,options:Vt.options.map((zn,qr)=>qr===Re?Be:zn)}:Vt)}))},Te=me=>{ce(me),we({}),F(!1),V("preview")},ze=(me,Re)=>{Q||we(Be=>({...Be,[me]:Re}))},ot=()=>{F(!0)},ht=me=>n.find(Re=>Re.id===me)?.nom||me,gt=({level:me})=>{const Re={facile:"quiz-badge-facile",moyen:"quiz-badge-moyen",difficile:"quiz-badge-difficile"};return o.jsx("span",{className:`quiz-badge ${Re[me]||"quiz-badge-moyen"}`,children:me.charAt(0).toUpperCase()+me.slice(1)})},pr=()=>o.jsxs(o.Fragment,{children:[c&&o.jsxs("div",{className:"admin-message admin-message-error",children:[o.jsx(fv,{size:18}),o.jsx("span",{children:c}),o.jsx("button",{onClick:()=>u(null),className:"admin-message-close",children:o.jsx(pc,{size:16})})]}),f&&o.jsxs("div",{className:"admin-message admin-message-success",children:[o.jsx(fn,{size:18}),o.jsx("span",{children:f})]})]}),Rt=()=>o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(os,{size:24})," Gestion des Quiz"]}),o.jsxs("p",{className:"admin-subtitle",children:[t.length," quiz au total  ",ye.length," affich(s)"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:Ee,children:[o.jsx(ag,{size:18})," Nouveau Quiz"]})]}),o.jsxs("div",{className:"admin-toolbar",children:[o.jsxs("div",{className:"admin-search-wrapper",children:[o.jsx(rL,{size:18,className:"admin-search-icon"}),o.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher un quiz...",value:p,onChange:me=>g(me.target.value)})]}),o.jsxs("button",{className:`admin-btn admin-btn-outline ${k?"active":""}`,onClick:()=>O(!k),children:[o.jsx(OE,{size:16})," Filtres",k?o.jsx(dw,{size:14}):o.jsx(dv,{size:14})]})]}),k&&o.jsxs("div",{className:"admin-filters-panel",children:[o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Discipline"}),o.jsxs("select",{className:"admin-select",value:y,onChange:me=>x(me.target.value),children:[o.jsx("option",{value:"",children:"Toutes les disciplines"}),n.map(me=>o.jsx("option",{value:me.id,children:me.nom},me.id))]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Accs"}),o.jsxs("select",{className:"admin-select",value:E,onChange:me=>j(me.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"false",children:"Gratuit"}),o.jsx("option",{value:"true",children:"Premium"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Difficult"}),o.jsxs("select",{className:"admin-select",value:N,onChange:me=>A(me.target.value),children:[o.jsx("option",{value:"",children:"Toutes"}),o.jsx("option",{value:"facile",children:"Facile"}),o.jsx("option",{value:"moyen",children:"Moyen"}),o.jsx("option",{value:"difficile",children:"Difficile"})]})]}),o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),A(""),g("")},children:"Rinitialiser"})]}),i?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des quiz..."})]}):ye.length===0?o.jsxs("div",{className:"admin-empty-state",children:[o.jsx(zg,{size:48}),o.jsx("h3",{children:"Aucun quiz trouv"}),o.jsx("p",{children:t.length===0?"Crez votre premier quiz pour vos lves.":"Aucun quiz ne correspond  vos filtres."}),t.length===0&&o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:Ee,children:[o.jsx(ag,{size:18})," Crer un quiz"]})]}):o.jsx("div",{className:"quiz-grid",children:ye.map(me=>{const Re=WO(me);return o.jsxs("div",{className:"quiz-card",children:[o.jsxs("div",{className:"quiz-card-header",children:[o.jsxs("div",{className:"quiz-card-title-row",children:[o.jsx("h3",{className:"quiz-card-title",children:me.titre}),me.isPremium&&o.jsxs("span",{className:"quiz-badge quiz-badge-premium",children:[o.jsx(pi,{size:12})," Premium"]})]}),o.jsx("span",{className:"quiz-card-discipline",children:ht(me.disciplineId)})]}),o.jsxs("div",{className:"quiz-card-stats",children:[o.jsxs("div",{className:"quiz-stat",children:[o.jsx(zg,{size:14}),o.jsxs("span",{children:[Re.nombreQuestions," question(s)"]})]}),o.jsxs("div",{className:"quiz-stat",children:[o.jsx(ml,{size:14}),o.jsxs("span",{children:[Re.totalPoints," pts"]})]}),o.jsxs("div",{className:"quiz-stat",children:[o.jsx(ld,{size:14}),o.jsxs("span",{children:[Re.duree," min"]})]})]}),o.jsxs("div",{className:"quiz-card-difficulty",children:[Re.parDifficulte.facile>0&&o.jsx(gt,{level:"facile"}),Re.parDifficulte.moyen>0&&o.jsx(gt,{level:"moyen"}),Re.parDifficulte.difficile>0&&o.jsx(gt,{level:"difficile"})]}),o.jsxs("div",{className:"quiz-card-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>Te(me),title:"Prvisualiser",children:[o.jsx(Ju,{size:14})," Aperu"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>J(me),title:"Modifier",children:[o.jsx(rY,{size:14})," Modifier"]}),ge===me.id?o.jsxs("div",{className:"quiz-delete-confirm",children:[o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger",onClick:()=>pe(me.id),children:"Confirmer"}),o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-ghost",onClick:()=>Z(null),children:"Annuler"})]}):o.jsx("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>Z(me.id),title:"Supprimer",children:o.jsx(VO,{size:14})})]})]},me.id)})})]}),kt=()=>o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(os,{size:24}),$?"Modifier le quiz":"Nouveau quiz"]}),o.jsxs("p",{className:"admin-subtitle",children:[P.questions.length," question(s) ajoute(s)"]})]}),o.jsxs("div",{className:"admin-header-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>V("list"),children:[o.jsx(pc,{size:18})," Annuler"]}),o.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ne,disabled:M,children:[o.jsx(hY,{size:18})," ",M?"Enregistrement...":"Enregistrer"]})]})]}),o.jsxs("div",{className:"admin-card quiz-form-section",children:[o.jsx("h3",{className:"quiz-form-section-title",children:"Informations gnrales"}),o.jsxs("div",{className:"quiz-form-grid",children:[o.jsxs("div",{className:"admin-form-group quiz-form-full",children:[o.jsx("label",{className:"admin-label",children:"Titre du quiz *"}),o.jsx("input",{type:"text",className:"admin-input",placeholder:"Ex : Quiz - Les Misrables, Chapitre 1",value:P.titre,onChange:me=>R(Re=>({...Re,titre:me.target.value}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Discipline *"}),o.jsxs("select",{className:"admin-select",value:P.disciplineId,onChange:me=>R(Re=>({...Re,disciplineId:me.target.value})),children:[o.jsx("option",{value:"",children:"-- Slectionner --"}),n.map(me=>o.jsx("option",{value:me.id,children:me.nom},me.id))]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Dure (minutes)"}),o.jsx("input",{type:"number",className:"admin-input",min:1,max:180,value:P.duree,onChange:me=>R(Re=>({...Re,duree:parseInt(me.target.value)||15}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Note minimale (%)"}),o.jsx("input",{type:"number",className:"admin-input",min:0,max:100,value:P.noteMinimale,onChange:me=>R(Re=>({...Re,noteMinimale:parseInt(me.target.value)||50}))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Accs"}),o.jsxs("div",{className:`quiz-toggle ${P.isPremium?"quiz-toggle-active":""}`,onClick:()=>R(me=>({...me,isPremium:!me.isPremium})),children:[o.jsx(pi,{size:16}),o.jsx("span",{children:P.isPremium?"Premium (2 000 FCFA/mois)":"Gratuit"})]})]})]})]}),o.jsxs("div",{className:"admin-card quiz-form-section",children:[o.jsxs("div",{className:"quiz-questions-header",children:[o.jsxs("h3",{className:"quiz-form-section-title",children:["Questions (",P.questions.length,")"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-primary",onClick:De,children:[o.jsx(ag,{size:14})," Ajouter une question"]})]}),P.questions.length===0?o.jsxs("div",{className:"admin-empty-state",style:{padding:"2rem"},children:[o.jsx(zg,{size:36}),o.jsx("p",{children:'Aucune question. Cliquez sur "Ajouter une question" pour commencer.'})]}):o.jsx("div",{className:"quiz-questions-list",children:P.questions.map((me,Re)=>o.jsxs("div",{className:`quiz-question-item ${q===me.id?"expanded":""}`,children:[o.jsxs("div",{className:"quiz-question-header",onClick:()=>L(q===me.id?null:me.id),children:[o.jsxs("div",{className:"quiz-question-header-left",children:[o.jsx(zW,{size:16,className:"quiz-grip-icon"}),o.jsxs("span",{className:"quiz-question-number",children:["Q",Re+1]}),o.jsx("span",{className:"quiz-question-preview",children:me.question||"Question sans nonc..."})]}),o.jsxs("div",{className:"quiz-question-header-right",children:[o.jsx(gt,{level:me.difficulte||"moyen"}),o.jsxs("span",{className:"quiz-question-points",children:[me.points," pt(s)"]}),q===me.id?o.jsx(dw,{size:16}):o.jsx(dv,{size:16})]})]}),q===me.id&&o.jsxs("div",{className:"quiz-question-body",children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"nonc de la question *"}),o.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Quel est le personnage principal du roman ?",value:me.question,onChange:Be=>K(me.id,"question",Be.target.value)})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Options de rponse (cliquez sur la bonne rponse)"}),o.jsx("div",{className:"quiz-options-grid",children:me.options.map((Be,Ke)=>o.jsxs("div",{className:`quiz-option-item ${me.reponseCorrecte===Ke?"quiz-option-correct":""}`,children:[o.jsx("button",{type:"button",className:`quiz-option-radio ${me.reponseCorrecte===Ke?"active":""}`,onClick:()=>K(me.id,"reponseCorrecte",Ke),title:me.reponseCorrecte===Ke?"Bonne rponse":"Marquer comme bonne rponse",children:me.reponseCorrecte===Ke?o.jsx(fn,{size:16}):o.jsx("span",{className:"quiz-option-letter",children:String.fromCharCode(65+Ke)})}),o.jsx("input",{type:"text",className:"admin-input",placeholder:`Option ${String.fromCharCode(65+Ke)}`,value:Be,onChange:Vt=>fe(me.id,Ke,Vt.target.value)})]},Ke))})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Explication (affiche aprs rponse)"}),o.jsx("textarea",{className:"admin-textarea",rows:2,placeholder:"Ex : Jean Valjean est le protagoniste du roman de Victor Hugo...",value:me.explication,onChange:Be=>K(me.id,"explication",Be.target.value)})]}),o.jsxs("div",{className:"quiz-question-meta",children:[o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Difficult"}),o.jsxs("select",{className:"admin-select",value:me.difficulte,onChange:Be=>K(me.id,"difficulte",Be.target.value),children:[o.jsx("option",{value:"facile",children:"Facile"}),o.jsx("option",{value:"moyen",children:"Moyen"}),o.jsx("option",{value:"difficile",children:"Difficile"})]})]}),o.jsxs("div",{className:"admin-form-group",children:[o.jsx("label",{className:"admin-label",children:"Points"}),o.jsx("input",{type:"number",className:"admin-input",min:1,max:10,value:me.points,onChange:Be=>K(me.id,"points",parseInt(Be.target.value)||1)})]})]}),o.jsxs("div",{className:"quiz-question-actions",children:[o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>se(me.id),children:[o.jsx(AW,{size:14})," Dupliquer"]}),o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-danger-outline",onClick:()=>X(me.id),children:[o.jsx(VO,{size:14})," Supprimer"]})]})]})]},me.id))}),P.questions.length>0&&o.jsx("div",{className:"quiz-add-question-bottom",children:o.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:De,children:[o.jsx(ag,{size:16})," Ajouter une question"]})})]})]}),Lr=()=>{if(!H)return null;const me=WO(H);let Re=0,Be=0;return Q&&H.questions.forEach(Ke=>{Be+=Ke.points||1,Y[Ke.id]===Ke.reponseCorrecte&&(Re+=Ke.points||1)}),o.jsxs("div",{className:"quiz-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(Ju,{size:24})," Prvisualisation : ",H.titre]}),o.jsxs("p",{className:"admin-subtitle",children:[ht(H.disciplineId),"  ",me.nombreQuestions," questions  ",me.duree," min"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{V("list"),ce(null)},children:[o.jsx(pc,{size:18})," Fermer"]})]}),Q&&o.jsxs("div",{className:`quiz-preview-score ${Re/Be>=(H.noteMinimale||50)/100?"success":"fail"}`,children:[o.jsx(ml,{size:32}),o.jsxs("div",{children:[o.jsxs("h3",{children:["Score : ",Re,"/",Be," (",Math.round(Re/Be*100),"%)"]}),o.jsxs("p",{children:["Note minimale : ",H.noteMinimale||50,"% "," ",Re/Be>=(H.noteMinimale||50)/100?" Russi !":" Non russi"]})]})]}),o.jsx("div",{className:"quiz-preview-questions",children:H.questions.map((Ke,Vt)=>{const zn=Y[Ke.id],qr=zn===Ke.reponseCorrecte;return o.jsxs("div",{className:"admin-card quiz-preview-question",children:[o.jsxs("div",{className:"quiz-preview-question-header",children:[o.jsxs("span",{className:"quiz-question-number",children:["Q",Vt+1]}),o.jsx(gt,{level:Ke.difficulte||"moyen"}),o.jsxs("span",{className:"quiz-question-points",children:[Ke.points," pt(s)"]})]}),o.jsx("p",{className:"quiz-preview-question-text",children:Ke.question}),o.jsx("div",{className:"quiz-preview-options",children:Ke.options.map((so,Ur)=>{let Hi="quiz-preview-option";return Q?Ur===Ke.reponseCorrecte?Hi+=" correct":Ur===zn&&!qr&&(Hi+=" incorrect"):zn===Ur&&(Hi+=" selected"),o.jsxs("button",{className:Hi,onClick:()=>ze(Ke.id,Ur),disabled:Q,children:[o.jsx("span",{className:"quiz-preview-option-letter",children:String.fromCharCode(65+Ur)}),o.jsx("span",{children:so}),Q&&Ur===Ke.reponseCorrecte&&o.jsx(fn,{size:16,className:"quiz-preview-check"})]},Ur)})}),Q&&Ke.explication&&o.jsxs("div",{className:"quiz-preview-explication",children:[o.jsx("strong",{children:"Explication :"})," ",Ke.explication]})]},Ke.id)})}),!Q&&o.jsx("div",{className:"quiz-preview-submit",children:o.jsxs("button",{className:"admin-btn admin-btn-primary admin-btn-lg",onClick:ot,disabled:Object.keys(Y).length<H.questions.length,children:[o.jsx(fn,{size:18})," Soumettre (",Object.keys(Y).length,"/",H.questions.length,")"]})})]})};return o.jsxs("div",{className:"admin-container",children:[pr(),C==="list"&&Rt(),C==="form"&&kt(),C==="preview"&&Lr()]})},hL=rt(Ne,"users"),cX=rt(Ne,"quizResults"),uX=async t=>{try{let e=Et(hL,mr("displayName","asc"));t?.role;let r=(await Nt(e)).docs.map(i=>({uid:i.id,...i.data()}));return t?.isPremium,t?.isActive,t?.search,r}catch(e){throw console.error("Erreur lors de la rcupration des utilisateurs :",e),e}},dX=async(t,e)=>{try{await sn(Qe(Ne,"users",t),{role:e,updatedAt:Ye.now()})}catch(n){throw console.error("Erreur lors de la mise  jour du rle :",n),n}},fX=async(t,e)=>{try{const n={isPremium:e,updatedAt:Ye.now()};if(e){const r=new Date;r.setDate(r.getDate()+30),n.subscriptionEnd=Ye.fromDate(r)}else n.subscriptionEnd=null;await sn(Qe(Ne,"users",t),n)}catch(n){throw console.error("Erreur lors de la mise  jour du statut Premium :",n),n}},hX=async(t,e)=>{try{await sn(Qe(Ne,"users",t),{isActive:e,updatedAt:Ye.now()})}catch(n){throw console.error("Erreur lors du changement de statut du compte :",n),n}},mX=async t=>{try{const e=Et(cX,it("userId","==",t)),r=(await Nt(e)).docs.map(f=>({id:f.id,...f.data()})),i=r.length,a=r.filter(f=>f.reussi).length,c=i>0?Math.round(r.reduce((f,h)=>f+h.score,0)/i):0,u=r.length>0?new Date(Math.max(...r.map(f=>{const h=f.datePassage;return h?.toDate?h.toDate().getTime():new Date(h).getTime()}))):null;return{totalQuizPasses:i,scoresMoyens:c,quizReussis:a,dernierQuiz:u}}catch(e){return console.error("Erreur lors du calcul des statistiques :",e),{totalQuizPasses:0,scoresMoyens:0,quizReussis:0,dernierQuiz:null}}},pX=async()=>{try{const e=(await Nt(hL)).docs.map(n=>n.data());return{total:e.length,admins:e.filter(n=>n.role==="admin").length,profs:e.filter(n=>n.role==="prof").length,eleves:e.filter(n=>n.role==="eleve").length,premium:e.filter(n=>n.isPremium).length,actifs:e.filter(n=>n.isActive!==!1).length}}catch(t){throw console.error("Erreur lors du calcul des stats globales :",t),t}},gX=()=>{const[t,e]=w.useState([]),[n,r]=w.useState(null),[i,a]=w.useState(!0),[c,u]=w.useState(null),[f,h]=w.useState(null),[p,g]=w.useState(""),[y,x]=w.useState(""),[E,j]=w.useState(""),[N,A]=w.useState(""),[k,O]=w.useState(!1),[C,V]=w.useState(null),[$,D]=w.useState(null),[P,R]=w.useState(!1),[q,L]=w.useState(null),[M,U]=w.useState(null),ge=w.useCallback(async()=>{a(!0),u(null);try{const[J,ne]=await Promise.all([uX(),pX()]);e(J),r(ne)}catch(J){u("Erreur lors du chargement des utilisateurs."),console.error(J)}finally{a(!1)}},[]);w.useEffect(()=>{ge()},[ge]),w.useEffect(()=>{if(f){const J=setTimeout(()=>h(null),4e3);return()=>clearTimeout(J)}},[f]);const Z=t.filter(J=>{if(p){const ne=p.toLowerCase();if(!J.displayName?.toLowerCase().includes(ne)&&!J.email?.toLowerCase().includes(ne))return!1}return!(y&&J.role!==y||E==="true"&&!J.isPremium||E==="false"&&J.isPremium||N==="true"&&J.isActive===!1||N==="false"&&J.isActive!==!1)}),H=async J=>{V(J),R(!0);try{const ne=await mX(J.uid);D(ne)}catch(ne){console.error("Erreur lors du chargement des statistiques :",ne),D(null)}finally{R(!1)}},ce=async()=>{if(M){L(M.userId);try{switch(M.type){case"role":await dX(M.userId,M.value),h("Rle mis  jour avec succs.");break;case"premium":await fX(M.userId,M.value),h(M.value?"Statut Premium activ (30 jours).":"Statut Premium dsactiv.");break;case"active":await hX(M.userId,M.value),h(M.value?"Compte ractiv.":"Compte dsactiv.");break}await ge()}catch(J){u("Erreur lors de l'excution de l'action."),console.error(J)}finally{L(null),U(null)}}},Y=({role:J})=>{const ne={admin:{icon:o.jsx(IE,{size:12}),className:"user-badge-admin",label:"Admin"},prof:{icon:o.jsx(cd,{size:12}),className:"user-badge-prof",label:"Professeur"},eleve:{icon:o.jsx(os,{size:12}),className:"user-badge-eleve",label:"lve"}},pe=ne[J]||ne.eleve;return o.jsxs("span",{className:`user-badge ${pe.className}`,children:[pe.icon," ",pe.label]})},we=J=>J?(J?.toDate?J.toDate():new Date(J)).toLocaleDateString("fr-SN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",Q=J=>J?J.charAt(0).toUpperCase():"?",F=()=>o.jsxs(o.Fragment,{children:[c&&o.jsxs("div",{className:"admin-message admin-message-error",children:[o.jsx(fv,{size:18}),o.jsx("span",{children:c}),o.jsx("button",{onClick:()=>u(null),className:"admin-message-close",children:o.jsx(pc,{size:16})})]}),f&&o.jsxs("div",{className:"admin-message admin-message-success",children:[o.jsx(fn,{size:18}),o.jsx("span",{children:f})]})]}),re=()=>{if(!n)return null;const J=[{label:"Total",value:n.total,icon:o.jsx(Lg,{size:20}),color:"stat-blue"},{label:"lves",value:n.eleves,icon:o.jsx(os,{size:20}),color:"stat-green"},{label:"Professeurs",value:n.profs,icon:o.jsx(cd,{size:20}),color:"stat-purple"},{label:"Premium",value:n.premium,icon:o.jsx(pi,{size:20}),color:"stat-gold"}];return o.jsx("div",{className:"user-stats-grid",children:J.map(ne=>o.jsxs("div",{className:`user-stat-card ${ne.color}`,children:[o.jsx("div",{className:"user-stat-icon",children:ne.icon}),o.jsxs("div",{className:"user-stat-info",children:[o.jsx("span",{className:"user-stat-value",children:ne.value}),o.jsx("span",{className:"user-stat-label",children:ne.label})]})]},ne.label))})},ye=()=>M?o.jsx("div",{className:"admin-modal-overlay",onClick:()=>U(null),children:o.jsxs("div",{className:"admin-modal",onClick:J=>J.stopPropagation(),children:[o.jsxs("div",{className:"admin-modal-header",children:[o.jsx("h3",{children:"Confirmer l'action"}),o.jsx("button",{className:"admin-modal-close",onClick:()=>U(null),children:o.jsx(pc,{size:20})})]}),o.jsx("div",{className:"admin-modal-body",children:o.jsx("p",{children:M.label})}),o.jsxs("div",{className:"admin-modal-footer",children:[o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>U(null),children:"Annuler"}),o.jsx("button",{className:"admin-btn admin-btn-primary",onClick:ce,disabled:q===M.userId,children:q===M.userId?"En cours...":"Confirmer"})]})]})}):null,Ee=()=>C?o.jsx("div",{className:"admin-modal-overlay",onClick:()=>V(null),children:o.jsxs("div",{className:"admin-modal admin-modal-lg",onClick:J=>J.stopPropagation(),children:[o.jsxs("div",{className:"admin-modal-header",children:[o.jsx("h3",{children:"Dtail de l'utilisateur"}),o.jsx("button",{className:"admin-modal-close",onClick:()=>V(null),children:o.jsx(pc,{size:20})})]}),o.jsxs("div",{className:"admin-modal-body",children:[o.jsxs("div",{className:"user-detail-profile",children:[o.jsx("div",{className:"user-detail-avatar",children:Q(C.displayName)}),o.jsxs("div",{className:"user-detail-info",children:[o.jsx("h4",{children:C.displayName||"Sans nom"}),o.jsx("p",{children:C.email}),o.jsxs("div",{className:"user-detail-badges",children:[o.jsx(Y,{role:C.role}),C.isPremium&&o.jsxs("span",{className:"user-badge user-badge-premium",children:[o.jsx(pi,{size:12})," Premium"]}),o.jsx("span",{className:`user-badge ${C.isActive!==!1?"user-badge-active":"user-badge-inactive"}`,children:C.isActive!==!1?"Actif":"Dsactiv"})]})]})]}),o.jsxs("div",{className:"user-detail-dates",children:[o.jsxs("div",{children:[o.jsx("span",{className:"user-detail-date-label",children:"Inscription"}),o.jsx("span",{children:we(C.createdAt)})]}),C.isPremium&&C.subscriptionEnd&&o.jsxs("div",{children:[o.jsx("span",{className:"user-detail-date-label",children:"Premium jusqu'au"}),o.jsx("span",{children:we(C.subscriptionEnd)})]})]}),o.jsxs("div",{className:"user-detail-stats-section",children:[o.jsxs("h4",{children:[o.jsx(mc,{size:18})," Statistiques"]}),P?o.jsxs("div",{className:"admin-loading",style:{padding:"1rem"},children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des statistiques..."})]}):$?o.jsxs("div",{className:"user-detail-stats-grid",children:[o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(os,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:$.totalQuizPasses}),o.jsx("span",{className:"user-detail-stat-label",children:"Quiz passs"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(sh,{size:20}),o.jsxs("span",{className:"user-detail-stat-value",children:[$.scoresMoyens,"%"]}),o.jsx("span",{className:"user-detail-stat-label",children:"Score moyen"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(ml,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:$.quizReussis}),o.jsx("span",{className:"user-detail-stat-label",children:"Quiz russis"})]}),o.jsxs("div",{className:"user-detail-stat",children:[o.jsx(ld,{size:20}),o.jsx("span",{className:"user-detail-stat-value",children:$.dernierQuiz?we($.dernierQuiz):"Aucun"}),o.jsx("span",{className:"user-detail-stat-label",children:"Dernier quiz"})]})]}):o.jsx("p",{className:"user-detail-no-stats",children:"Aucune statistique disponible."})]})]})]})}):null;return o.jsxs("div",{className:"admin-container",children:[F(),ye(),Ee(),o.jsxs("div",{className:"user-manager",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"admin-title",children:[o.jsx(Lg,{size:24})," Gestion des Utilisateurs"]}),o.jsxs("p",{className:"admin-subtitle",children:[t.length," utilisateur(s) au total  ",Z.length," affich(s)"]})]}),o.jsxs("button",{className:"admin-btn admin-btn-outline",onClick:ge,children:[o.jsx(cY,{size:16})," Actualiser"]})]}),re(),o.jsxs("div",{className:"admin-toolbar",children:[o.jsxs("div",{className:"admin-search-wrapper",children:[o.jsx(rL,{size:18,className:"admin-search-icon"}),o.jsx("input",{type:"text",className:"admin-search-input",placeholder:"Rechercher par nom ou email...",value:p,onChange:J=>g(J.target.value)})]}),o.jsxs("button",{className:`admin-btn admin-btn-outline ${k?"active":""}`,onClick:()=>O(!k),children:[o.jsx(OE,{size:16})," Filtres",k?o.jsx(dw,{size:14}):o.jsx(dv,{size:14})]})]}),k&&o.jsxs("div",{className:"admin-filters-panel",children:[o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Rle"}),o.jsxs("select",{className:"admin-select",value:y,onChange:J=>x(J.target.value),children:[o.jsx("option",{value:"",children:"Tous les rles"}),o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"prof",children:"Professeur"}),o.jsx("option",{value:"eleve",children:"lve"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Abonnement"}),o.jsxs("select",{className:"admin-select",value:E,onChange:J=>j(J.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Premium"}),o.jsx("option",{value:"false",children:"Gratuit"})]})]}),o.jsxs("div",{className:"admin-filter-group",children:[o.jsx("label",{className:"admin-filter-label",children:"Statut"}),o.jsxs("select",{className:"admin-select",value:N,onChange:J=>A(J.target.value),children:[o.jsx("option",{value:"",children:"Tous"}),o.jsx("option",{value:"true",children:"Actifs"}),o.jsx("option",{value:"false",children:"Dsactivs"})]})]}),o.jsx("button",{className:"admin-btn admin-btn-ghost",onClick:()=>{x(""),j(""),A(""),g("")},children:"Rinitialiser"})]}),i?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement des utilisateurs..."})]}):Z.length===0?o.jsxs("div",{className:"admin-empty-state",children:[o.jsx(Lg,{size:48}),o.jsx("h3",{children:"Aucun utilisateur trouv"}),o.jsx("p",{children:t.length===0?"Aucun utilisateur n'est encore inscrit.":"Aucun utilisateur ne correspond  vos filtres."})]}):o.jsx("div",{className:"user-table-wrapper",children:o.jsxs("table",{className:"user-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Utilisateur"}),o.jsx("th",{children:"Rle"}),o.jsx("th",{children:"Abonnement"}),o.jsx("th",{children:"Statut"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:Z.map(J=>o.jsxs("tr",{className:J.isActive===!1?"user-row-inactive":"",children:[o.jsx("td",{children:o.jsxs("div",{className:"user-cell-info",children:[o.jsx("div",{className:"user-avatar-sm",children:Q(J.displayName)}),o.jsxs("div",{children:[o.jsx("span",{className:"user-cell-name",children:J.displayName||"Sans nom"}),o.jsx("span",{className:"user-cell-email",children:J.email})]})]})}),o.jsx("td",{children:o.jsxs("select",{className:"admin-select admin-select-sm",value:J.role,onChange:ne=>U({type:"role",userId:J.uid,value:ne.target.value,label:`Changer le rle de "${J.displayName||J.email}" en "${ne.target.value}" ?`}),children:[o.jsx("option",{value:"eleve",children:"lve"}),o.jsx("option",{value:"prof",children:"Professeur"}),o.jsx("option",{value:"admin",children:"Admin"})]})}),o.jsx("td",{children:o.jsx("button",{className:`user-premium-toggle ${J.isPremium?"active":""}`,onClick:()=>U({type:"premium",userId:J.uid,value:!J.isPremium,label:J.isPremium?`Dsactiver le statut Premium de "${J.displayName||J.email}" ?`:`Activer le statut Premium de "${J.displayName||J.email}" pour 30 jours ?`}),disabled:q===J.uid,children:J.isPremium?o.jsxs(o.Fragment,{children:[o.jsx(ih,{size:14})," Premium"]}):o.jsxs(o.Fragment,{children:[o.jsx(pi,{size:14})," Gratuit"]})})}),o.jsx("td",{children:o.jsx("button",{className:`user-status-toggle ${J.isActive!==!1?"active":"inactive"}`,onClick:()=>U({type:"active",userId:J.uid,value:J.isActive===!1,label:J.isActive===!1?`Ractiver le compte de "${J.displayName||J.email}" ?`:`Dsactiver le compte de "${J.displayName||J.email}" ?`}),disabled:q===J.uid,children:J.isActive!==!1?o.jsxs(o.Fragment,{children:[o.jsx(OY,{size:14})," Actif"]}):o.jsxs(o.Fragment,{children:[o.jsx(PY,{size:14})," Dsactiv"]})})}),o.jsx("td",{children:o.jsxs("button",{className:"admin-btn admin-btn-sm admin-btn-outline",onClick:()=>H(J),title:"Voir les statistiques",children:[o.jsx(Ju,{size:14})," Dtail"]})})]},J.uid))})]})})]})]})},mL=rt(Ne,"quiz_results"),PE=rt(Ne,"progressions"),vX=async t=>{try{const e=await Bi(mL,{...t,datePassage:Ye.now()});return t.reussi&&await jX(t.userId,t.disciplineId,t.disciplineNom,t.quizId),e.id}catch(e){throw console.error("Erreur lors de la sauvegarde du rsultat :",e),e}},My=async(t,e)=>{try{let n=Et(mL,it("userId","==",t),mr("datePassage","desc"));return e&&(n=Et(n,hl(e))),(await Nt(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Erreur rcupration historique :",n),n}},yX=async t=>{try{const e=await My(t);if(e.length===0)return{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0};const n=e.reduce((p,g)=>p+g.pourcentage,0),r=Math.round(n/e.length),i=Math.max(...e.map(p=>p.pourcentage)),a=e.reduce((p,g)=>p+(g.tempsEcoule||0),0),c=e.filter(p=>p.reussi).length;let u=0,f=0;for(const p of e)p.reussi?(u++,f=Math.max(f,u)):u=0;let h=0;for(const p of e)if(p.reussi)h++;else break;return{totalQuizPasses:e.length,totalQuizReussis:c,moyenneGenerale:r,tempsTotal:a,meilleurScore:i,serieReussites:h,meilleureSerieReussites:Math.max(f,h)}}catch(e){return console.error("Erreur calcul stats :",e),{totalQuizPasses:0,totalQuizReussis:0,moyenneGenerale:0,tempsTotal:0,meilleurScore:0,serieReussites:0,meilleureSerieReussites:0}}},bX=async t=>{try{const e=await My(t);if(e.length===0)return[];const n={};for(const r of e){const i=r.disciplineId;n[i]||(n[i]=[]),n[i].push(r)}return Object.entries(n).map(([r,i])=>{const a=Math.round(i.reduce((g,y)=>g+y.pourcentage,0)/i.length),c=Math.max(...i.map(g=>g.pourcentage)),u=i[0].pourcentage,f=i.filter(g=>g.reussi).length,h=i.reduce((g,y)=>g+(y.tempsEcoule||0),0);let p="stable";if(i.length>=4){const g=i.slice(0,3),y=i.slice(3,6),x=g.reduce((j,N)=>j+N.pourcentage,0)/g.length,E=y.reduce((j,N)=>j+N.pourcentage,0)/y.length;x-E>5?p="up":E-x>5&&(p="down")}return{disciplineId:r,disciplineNom:i[0].disciplineNom||r,nombreQuiz:i.length,moyenne:a,meilleurScore:c,dernierScore:u,quizReussis:f,tempsTotal:h,tendance:p}})}catch(e){return console.error("Erreur progression par discipline :",e),[]}},xX=async(t,e)=>{try{return(await My(t,e||20)).reverse().map(r=>({date:(r.datePassage?.toDate?r.datePassage.toDate():new Date(r.datePassage)).toLocaleDateString("fr-SN",{day:"2-digit",month:"2-digit"}),score:r.pourcentage,discipline:r.disciplineNom||r.disciplineId}))}catch(n){return console.error("Erreur donnes temporelles :",n),[]}},_X=async(t,e,n)=>{const r=`${t}_${e}`,i=Qe(PE,r),a=await Pr(i);if(a.exists())return{...a.data()};const[c,u]=await Promise.all([YO("ressources",e),YO("quizzes",e)]),f={userId:t,disciplineId:e,disciplineNom:n,ressourcesVues:[],quizReussis:[],totalRessources:c,totalQuiz:u,pourcentage:0,dernierAcces:Ye.now(),createdAt:Ye.now(),updatedAt:Ye.now()};return await _E(i,f),f},YO=async(t,e)=>{try{const n=Et(rt(Ne,t),it("disciplineId","==",e));return(await Nt(n)).size}catch{return 0}},wX=t=>{if(t.totalRessources+t.totalQuiz===0)return 0;const n=t.totalRessources>0?t.ressourcesVues.length/t.totalRessources*40:0,r=t.totalQuiz>0?t.quizReussis.length/t.totalQuiz*60:0;return t.totalRessources===0?Math.min(100,Math.round(t.quizReussis.length/t.totalQuiz*100)):t.totalQuiz===0?Math.min(100,Math.round(t.ressourcesVues.length/t.totalRessources*100)):Math.min(100,Math.round(n+r))},jX=async(t,e,n,r)=>{try{const i=`${t}_${e}`,a=Qe(PE,i),c=await _X(t,e,n);if(c.quizReussis.includes(r))return await sn(a,{dernierAcces:Ye.now()}),c;const u=[...c.quizReussis,r],f={...c,quizReussis:u,dernierAcces:Ye.now(),updatedAt:Ye.now(),pourcentage:0};return f.pourcentage=wX(f),await _E(a,f),f}catch(i){throw console.error("Erreur enregistrement quiz russi :",i),i}},EX=async t=>{try{const e=Et(PE,it("userId","==",t));return(await Nt(e)).docs.map(r=>r.data())}catch(e){return console.error("Erreur rcupration progressions :",e),[]}},NX=async t=>{try{const e=await EX(t),n=await pL(t),r=e.reduce((u,f)=>u+f.ressourcesVues.length,0),i=e.reduce((u,f)=>u+f.quizReussis.length,0),a=e.length>0?Math.round(e.reduce((u,f)=>u+f.pourcentage,0)/e.length):0,c=e.filter(u=>u.pourcentage>=100).length;return{totalRessourcesVues:r,totalQuizReussis:i,pourcentageMoyen:a,disciplinesCommencees:e.length,disciplinesCompletees:c,streakActuel:n.streakActuel,meilleurStreak:n.meilleurStreak,parDiscipline:e}}catch(e){return console.error("Erreur progression globale :",e),{totalRessourcesVues:0,totalQuizReussis:0,pourcentageMoyen:0,disciplinesCommencees:0,disciplinesCompletees:0,streakActuel:0,meilleurStreak:0,parDiscipline:[]}}},SX=()=>new Date().toISOString().split("T")[0],AX=()=>{const t=new Date;return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]},pL=async t=>{try{const e=Qe(Ne,"users",t),n=await Pr(e);if(!n.exists())return{streakActuel:0,meilleurStreak:0,dernierJourAcces:""};const r=n.data();return{streakActuel:r.streakActuel||0,meilleurStreak:r.meilleurStreak||0,dernierJourAcces:r.dernierJourAcces||""}}catch(e){return console.error("Erreur rcupration streak :",e),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},TX=async t=>{try{const e=Qe(Ne,"users",t),n=await pL(t),r=SX();if(n.dernierJourAcces===r)return n;const i=AX();let a;n.dernierJourAcces===i?a=n.streakActuel+1:a=1;const c=Math.max(n.meilleurStreak,a);return await sn(e,{streakActuel:a,meilleurStreak:c,dernierJourAcces:r}),{streakActuel:a,meilleurStreak:c,dernierJourAcces:r}}catch(e){return console.error("Erreur mise  jour streak :",e),{streakActuel:0,meilleurStreak:0,dernierJourAcces:""}}},CX=(t,e,n)=>{const r=n?.totalRessourcesVues||0;n?.totalQuizReussis;const i=n?.disciplinesCompletees||0;n?.streakActuel;const a=n?.meilleurStreak||0,c=n?.disciplinesCommencees||0;return[{id:"premier_pas",nom:"Premier pas ",description:"Consulter votre premire ressource",icone:"",condition:"1 ressource consulte",categorie:"ressources",obtenu:r>=1},{id:"lecteur_assidu",nom:"Lecteur assidu ",description:"Consulter 10 ressources",icone:"",condition:"10 ressources consultes",categorie:"ressources",obtenu:r>=10},{id:"bibliophile",nom:"Bibliophile ",description:"Consulter 25 ressources",icone:"",condition:"25 ressources consultes",categorie:"ressources",obtenu:r>=25},{id:"savant",nom:"Savant ",description:"Consulter 50 ressources",icone:"",condition:"50 ressources consultes",categorie:"ressources",obtenu:r>=50},{id:"premier_quiz",nom:"Apprenti ",description:"Passer votre premier quiz",icone:"",condition:"1 quiz pass",categorie:"quiz",obtenu:t.totalQuizPasses>=1},{id:"challenger",nom:"Challenger ",description:"Russir 5 quiz",icone:"",condition:"5 quiz russis",categorie:"quiz",obtenu:t.totalQuizReussis>=5},{id:"dix_quiz",nom:"Dcathlon ",description:"Passer 10 quiz",icone:"",condition:"10 quiz passs",categorie:"quiz",obtenu:t.totalQuizPasses>=10},{id:"cinquante_quiz",nom:"Marathonien ",description:"Passer 50 quiz",icone:"",condition:"50 quiz passs",categorie:"quiz",obtenu:t.totalQuizPasses>=50},{id:"score_parfait",nom:"Score parfait ",description:"Obtenir 100%  un quiz",icone:"",condition:"100%  un quiz",categorie:"performance",obtenu:t.meilleurScore>=100},{id:"moyenne_80",nom:"Excellent ",description:"Moyenne gnrale de 80%+",icone:"",condition:"Moyenne  80% (min. 5 quiz)",categorie:"performance",obtenu:t.moyenneGenerale>=80&&t.totalQuizPasses>=5},{id:"serie_5",nom:"Imbattable ",description:"5 quiz russis d'affile",icone:"",condition:"Srie de 5 russites",categorie:"performance",obtenu:t.meilleureSerieReussites>=5},{id:"serie_10",nom:"Lgende ",description:"10 quiz russis d'affile",icone:"",condition:"Srie de 10 russites",categorie:"performance",obtenu:t.meilleureSerieReussites>=10},{id:"maitre",nom:"Matre ",description:"Complter 100% d'une discipline",icone:"",condition:"1 discipline  100%",categorie:"discipline",obtenu:i>=1},{id:"explorateur_teranga",nom:"Explorateur Teranga ",description:"Commencer 3 disciplines diffrentes",icone:"",condition:"3 disciplines commences",categorie:"discipline",obtenu:c>=3||e.length>=3},{id:"touche_a_tout",nom:"Touche--tout ",description:"Commencer 5 disciplines diffrentes",icone:"",condition:"5 disciplines commences",categorie:"discipline",obtenu:c>=5||e.length>=5},{id:"en_feu_3",nom:"Rgulier ",description:"3 jours de connexion conscutifs",icone:"",condition:"3 jours conscutifs",categorie:"streak",obtenu:a>=3},{id:"en_feu_7",nom:"En feu ",description:"7 jours de connexion conscutifs",icone:"",condition:"7 jours conscutifs",categorie:"streak",obtenu:a>=7},{id:"en_feu_30",nom:"Infatigable ",description:"30 jours de connexion conscutifs",icone:"",condition:"30 jours conscutifs",categorie:"streak",obtenu:a>=30},{id:"diamant",nom:"Diamant ",description:"50 ressources + 20 quiz russis",icone:"",condition:"50 ressources + 20 quiz",categorie:"performance",obtenu:r>=50&&t.totalQuizReussis>=20}]},gL=t=>{if(t<60)return`${t} s`;const e=Math.floor(t/60),n=t%60;return n>0?`${e} min ${n.toString().padStart(2,"0")} s`:`${e} min`},Bu=t=>t>=80?"#10b981":t>=60?"#3b82f6":t>=40?"#f59e0b":"#ef4444",vL=t=>t>=80?"Excellent":t>=60?"Bien":t>=40?"Passable":" amliorer",OX=()=>{const{quizId:t}=dy(),e=Dr(),{currentUser:n}=Vn(),[r,i]=w.useState(null),[a,c]=w.useState(""),[u,f]=w.useState(!0),[h,p]=w.useState(null),[g,y]=w.useState("intro"),[x,E]=w.useState(0),[j,N]=w.useState({}),[A,k]=w.useState(0),[O,C]=w.useState(0),V=w.useRef(null),[$,D]=w.useState(0),[P,R]=w.useState(0),[q,L]=w.useState(0),[M,U]=w.useState(!1),[ge,Z]=w.useState(!1);w.useEffect(()=>{(async()=>{if(!t){p("ID du quiz manquant."),f(!1);return}try{const ne=await rX(t);if(!ne){p("Quiz introuvable."),f(!1);return}i(ne),k(ne.duree*60);try{const De=(await jl.getAll()).find(se=>se.id===ne.disciplineId);c(De?.nom||ne.disciplineId)}catch{c(ne.disciplineId)}}catch(ne){p("Erreur lors du chargement du quiz."),console.error(ne)}finally{f(!1)}})()},[t]),w.useEffect(()=>{if(g==="playing")return V.current=setInterval(()=>{k(J=>J<=1?(clearInterval(V.current),we(),0):J-1),C(J=>J+1)},1e3),()=>{V.current&&clearInterval(V.current)}},[g]);const H=()=>{y("playing"),E(0),N({}),C(0),r&&k(r.duree*60)},ce=(J,ne)=>{N(pe=>({...pe,[J]:ne}))},Y=J=>{r&&J>=0&&J<r.questions.length&&E(J)},we=w.useCallback(async()=>{if(!r||!n||g==="review")return;V.current&&clearInterval(V.current);let J=0,ne=0,pe=0;r.questions.forEach(X=>{const K=X.points||1;ne+=K,j[X.id]===X.reponseCorrecte&&(J+=K,pe++)});const De=ne>0?Math.round(J/ne*100):0,se=De>=(r.noteMinimale||50);D(J),R(ne),L(pe),y("review"),U(!0);try{const X={quizId:r.id,quizTitre:r.titre,disciplineId:r.disciplineId,disciplineNom:a,userId:n.uid,reponses:r.questions.map(K=>j[K.id]??-1),tempsEcoule:O,score:J,totalPoints:ne,pourcentage:De,reussi:se,nombreQuestions:r.questions.length,bonnesReponses:pe};await vX(X),Z(!0)}catch(X){console.error("Erreur lors de la sauvegarde :",X)}finally{U(!1)}},[r,n,j,O,a,g]),Q=J=>{const ne=Math.floor(J/60),pe=J%60;return`${ne.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},F=()=>{if(!r)return"";const J=r.duree*60,ne=A/J;return ne<=.1?"timer-critical":ne<=.25?"timer-warning":""},re=Object.keys(j).length;if(u)return o.jsxs("div",{className:"quiz-player-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement du quiz..."})]});if(h||!r)return o.jsxs("div",{className:"quiz-player-error",children:[o.jsx(fv,{size:48}),o.jsx("h3",{children:h||"Quiz introuvable"}),o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(hw,{size:18})," Retour au tableau de bord"]})]});if(r.isPremium&&!n?.isPremium)return o.jsx("div",{className:"quiz-player-locked",children:o.jsxs("div",{className:"qp-locked-card",children:[o.jsx(mw,{size:48}),o.jsx("h3",{children:"Quiz Premium"}),o.jsx("p",{children:"Ce quiz est rserv aux abonns Premium."}),o.jsxs("p",{className:"qp-locked-price",children:[" partir de ",o.jsx("strong",{children:"2 000 FCFA/mois"})]}),o.jsxs("div",{className:"qp-locked-actions",children:[o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/premium"),children:[o.jsx(pi,{size:18})," Devenir Premium"]}),o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(Kx,{size:18})," Retour"]})]})]})});if(g==="intro")return o.jsx("div",{className:"quiz-player-intro",children:o.jsxs("div",{className:"qp-intro-card",children:[o.jsxs("div",{className:"qp-intro-header",children:[o.jsxs("button",{className:"qp-back-btn",onClick:()=>e(-1),children:[o.jsx(Kx,{size:20})," Retour"]}),r.isPremium&&o.jsxs("span",{className:"qp-badge qp-badge-premium",children:[o.jsx(pi,{size:12})," Premium"]})]}),o.jsxs("div",{className:"qp-intro-content",children:[o.jsx("h1",{className:"qp-intro-title",children:r.titre}),o.jsx("span",{className:"qp-intro-discipline",children:a}),o.jsxs("div",{className:"qp-intro-stats",children:[o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(os,{size:20}),o.jsxs("div",{children:[o.jsx("span",{className:"qp-intro-stat-value",children:r.questions.length}),o.jsx("span",{className:"qp-intro-stat-label",children:"Questions"})]})]}),o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(ld,{size:20}),o.jsxs("div",{children:[o.jsxs("span",{className:"qp-intro-stat-value",children:[r.duree," min"]}),o.jsx("span",{className:"qp-intro-stat-label",children:"Dure"})]})]}),o.jsxs("div",{className:"qp-intro-stat",children:[o.jsx(ml,{size:20}),o.jsxs("div",{children:[o.jsxs("span",{className:"qp-intro-stat-value",children:[r.noteMinimale||50,"%"]}),o.jsx("span",{className:"qp-intro-stat-label",children:"Note min."})]})]})]}),o.jsxs("div",{className:"qp-intro-instructions",children:[o.jsx("h3",{children:"Instructions"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Rpondez  toutes les questions dans le temps imparti"}),o.jsx("li",{children:"Chaque question a une seule bonne rponse"}),o.jsx("li",{children:"Vous pouvez naviguer entre les questions"}),o.jsx("li",{children:"Le quiz est soumis automatiquement quand le temps est coul"}),o.jsxs("li",{children:["Il faut obtenir au moins ",r.noteMinimale||50,"% pour russir"]})]})]})]}),o.jsxs("button",{className:"qp-btn qp-btn-start",onClick:H,children:[o.jsx(gh,{size:20})," Commencer le quiz"]})]})});if(g==="playing"){const J=r.questions[x];return o.jsxs("div",{className:"quiz-player-game",children:[o.jsxs("div",{className:"qp-game-header",children:[o.jsxs("div",{className:"qp-game-info",children:[o.jsx("span",{className:"qp-game-title",children:r.titre}),o.jsx("span",{className:"qp-game-discipline",children:a})]}),o.jsxs("div",{className:`qp-timer ${F()}`,children:[o.jsx(_Y,{size:18}),o.jsx("span",{children:Q(A)})]})]}),o.jsx("div",{className:"qp-progress-bar",children:o.jsx("div",{className:"qp-progress-fill",style:{width:`${(x+1)/r.questions.length*100}%`}})}),o.jsxs("div",{className:"qp-game-content",children:[o.jsxs("div",{className:"qp-question-header",children:[o.jsxs("span",{className:"qp-question-number",children:["Question ",x+1,"/",r.questions.length]}),o.jsxs("span",{className:"qp-question-points",children:[J.points||1," pt(s)"]})]}),o.jsx("h2",{className:"qp-question-text",children:J.question}),o.jsx("div",{className:"qp-options-list",children:J.options.map((ne,pe)=>o.jsxs("button",{className:`qp-option ${j[J.id]===pe?"selected":""}`,onClick:()=>ce(J.id,pe),children:[o.jsx("span",{className:"qp-option-letter",children:String.fromCharCode(65+pe)}),o.jsx("span",{className:"qp-option-text",children:ne}),j[J.id]===pe&&o.jsx(fn,{size:18,className:"qp-option-check"})]},pe))})]}),o.jsxs("div",{className:"qp-game-footer",children:[o.jsx("div",{className:"qp-question-indicators",children:r.questions.map((ne,pe)=>o.jsx("button",{className:`qp-indicator ${pe===x?"active":""} ${j[ne.id]!==void 0?"answered":""}`,onClick:()=>Y(pe),children:pe+1},ne.id))}),o.jsxs("div",{className:"qp-nav-buttons",children:[o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:()=>Y(x-1),disabled:x===0,children:[o.jsx(Kx,{size:16})," Prcdent"]}),x<r.questions.length-1?o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>Y(x+1),children:["Suivant ",o.jsx(nc,{size:16})]}):o.jsxs("button",{className:"qp-btn qp-btn-submit",onClick:we,disabled:re<r.questions.length,children:[o.jsx(fn,{size:16}),"Soumettre (",re,"/",r.questions.length,")"]})]})]})]})}const ye=P>0?Math.round($/P*100):0,Ee=ye>=(r.noteMinimale||50);return o.jsxs("div",{className:"quiz-player-review",children:[o.jsxs("div",{className:`qp-score-card ${Ee?"success":"fail"}`,children:[o.jsx("div",{className:"qp-score-icon",children:Ee?o.jsx(ml,{size:48}):o.jsx(fv,{size:48})}),o.jsx("h2",{className:"qp-score-title",children:Ee?"Flicitations ! ":"Continuez vos efforts ! "}),o.jsxs("div",{className:"qp-score-circle",style:{borderColor:Bu(ye)},children:[o.jsxs("span",{className:"qp-score-value",children:[ye,"%"]}),o.jsx("span",{className:"qp-score-label",children:vL(ye)})]}),o.jsxs("div",{className:"qp-score-details",children:[o.jsxs("div",{className:"qp-score-detail",children:[o.jsxs("span",{children:[q,"/",r.questions.length]}),o.jsx("small",{children:"Bonnes rponses"})]}),o.jsxs("div",{className:"qp-score-detail",children:[o.jsxs("span",{children:[$,"/",P]}),o.jsx("small",{children:"Points"})]}),o.jsxs("div",{className:"qp-score-detail",children:[o.jsx("span",{children:gL(O)}),o.jsx("small",{children:"Temps"})]})]}),M&&o.jsx("p",{className:"qp-saving",children:"Sauvegarde en cours..."}),ge&&o.jsx("p",{className:"qp-saved",children:" Rsultat sauvegard"})]}),o.jsxs("div",{className:"qp-review-actions",children:[o.jsxs("button",{className:"qp-btn qp-btn-primary",onClick:()=>e("/eleve/dashboard"),children:[o.jsx(hw,{size:18})," Tableau de bord"]}),o.jsxs("button",{className:"qp-btn qp-btn-outline",onClick:H,children:[o.jsx(dY,{size:18})," Recommencer"]})]}),o.jsxs("div",{className:"qp-review-questions",children:[o.jsx("h3",{className:"qp-review-title",children:"Correction dtaille"}),r.questions.map((J,ne)=>{const pe=j[J.id],De=pe===J.reponseCorrecte;return o.jsxs("div",{className:`qp-review-question ${De?"correct":"incorrect"}`,children:[o.jsxs("div",{className:"qp-review-question-header",children:[o.jsxs("span",{className:"qp-review-q-number",children:["Q",ne+1]}),De?o.jsxs("span",{className:"qp-review-badge correct",children:[o.jsx(fn,{size:14})," Correct"]}):o.jsxs("span",{className:"qp-review-badge incorrect",children:[o.jsx(fw,{size:14})," Incorrect"]}),o.jsxs("span",{className:"qp-review-q-points",children:[De?J.points||1:0,"/",J.points||1," pt(s)"]})]}),o.jsx("p",{className:"qp-review-q-text",children:J.question}),o.jsx("div",{className:"qp-review-options",children:J.options.map((se,X)=>{let K="qp-review-option";return X===J.reponseCorrecte&&(K+=" correct-answer"),X===pe&&!De&&(K+=" wrong-answer"),o.jsxs("div",{className:K,children:[o.jsx("span",{className:"qp-review-option-letter",children:String.fromCharCode(65+X)}),o.jsx("span",{children:se}),X===J.reponseCorrecte&&o.jsx(fn,{size:14,className:"qp-review-check"}),X===pe&&!De&&o.jsx(fw,{size:14,className:"qp-review-x"})]},X)})}),J.explication&&o.jsxs("div",{className:"qp-review-explication",children:[o.jsx("strong",{children:" Explication :"})," ",J.explication]})]},J.id)})]})]})};function yL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=yL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ut(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=yL(t))&&(r&&(r+=" "),r+=e);return r}var IX=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function RE(t){if(typeof t!="string")return!1;var e=IX;return e.includes(t)}var PX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],RX=new Set(PX);function bL(t){return typeof t!="string"?!1:RX.has(t)}function xL(t){return typeof t=="string"&&t.startsWith("data-")}function ds(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(bL(n)||xL(n))&&(e[n]=t[n]);return e}function um(t){if(t==null)return null;if(w.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return ds(e)}return typeof t=="object"&&!Array.isArray(t)?ds(t):null}function Rr(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(bL(n)||xL(n)||RE(n))&&(e[n]=t[n]);return e}function kX(t){return t==null?null:w.isValidElement(t)?Rr(t.props):typeof t=="object"&&!Array.isArray(t)?Rr(t):null}var DX=["children","width","height","viewBox","className","style","title","desc"];function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pw.apply(null,arguments)}function MX(t,e){if(t==null)return{};var n,r,i=zX(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zX(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _L=w.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:c,style:u,title:f,desc:h}=t,p=MX(t,DX),g=a||{width:r,height:i,x:0,y:0},y=Ut("recharts-surface",c);return w.createElement("svg",pw({},Rr(p),{className:y,width:r,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),w.createElement("title",null,f),w.createElement("desc",null,h),n)}),LX=["children","className"];function gw(){return gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gw.apply(null,arguments)}function qX(t,e){if(t==null)return{};var n,r,i=UX(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function UX(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qi=w.forwardRef((t,e)=>{var{children:n,className:r}=t,i=qX(t,LX),a=Ut("recharts-layer",r);return w.createElement("g",gw({className:a},Rr(i),{ref:e}),n)}),VX=w.createContext(null);function Ht(t){return function(){return t}}const wL=Math.cos,hv=Math.sin,ms=Math.sqrt,mv=Math.PI,zy=2*mv,vw=Math.PI,yw=2*vw,rc=1e-6,BX=yw-rc;function jL(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $X(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return jL;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class FX{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?jL:$X(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,c){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+c}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let c=this._x1,u=this._y1,f=r-e,h=i-n,p=c-e,g=u-n,y=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>rc)if(!(Math.abs(g*f-h*p)>rc)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let x=r-c,E=i-u,j=f*f+h*h,N=x*x+E*E,A=Math.sqrt(j),k=Math.sqrt(y),O=a*Math.tan((vw-Math.acos((j+y-N)/(2*A*k)))/2),C=O/k,V=O/A;Math.abs(C-1)>rc&&this._append`L${e+C*p},${n+C*g}`,this._append`A${a},${a},0,0,${+(g*x>p*E)},${this._x1=e+V*f},${this._y1=n+V*h}`}}arc(e,n,r,i,a,c){if(e=+e,n=+n,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),h=e+u,p=n+f,g=1^c,y=c?i-a:a-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>rc||Math.abs(this._y1-p)>rc)&&this._append`L${h},${p}`,r&&(y<0&&(y=y%yw+yw),y>BX?this._append`A${r},${r},0,1,${g},${e-u},${n-f}A${r},${r},0,1,${g},${this._x1=h},${this._y1=p}`:y>rc&&this._append`A${r},${r},0,${+(y>=vw)},${g},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function kE(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new FX(e)}function DE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function EL(t){this._context=t}EL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ly(t){return new EL(t)}function NL(t){return t[0]}function SL(t){return t[1]}function AL(t,e){var n=Ht(!0),r=null,i=Ly,a=null,c=kE(u);t=typeof t=="function"?t:t===void 0?NL:Ht(t),e=typeof e=="function"?e:e===void 0?SL:Ht(e);function u(f){var h,p=(f=DE(f)).length,g,y=!1,x;for(r==null&&(a=i(x=c())),h=0;h<=p;++h)!(h<p&&n(g=f[h],h,f))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(g,h,f),+e(g,h,f));if(x)return a=null,x+""||null}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ht(+f),u):t},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ht(+f),u):e},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Ht(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(a=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=a=null:a=i(r=f),u):r},u}function cg(t,e,n){var r=null,i=Ht(!0),a=null,c=Ly,u=null,f=kE(h);t=typeof t=="function"?t:t===void 0?NL:Ht(+t),e=typeof e=="function"?e:Ht(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?SL:Ht(+n);function h(g){var y,x,E,j=(g=DE(g)).length,N,A=!1,k,O=new Array(j),C=new Array(j);for(a==null&&(u=c(k=f())),y=0;y<=j;++y){if(!(y<j&&i(N=g[y],y,g))===A)if(A=!A)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),E=y-1;E>=x;--E)u.point(O[E],C[E]);u.lineEnd(),u.areaEnd()}A&&(O[y]=+t(N,y,g),C[y]=+e(N,y,g),u.point(r?+r(N,y,g):O[y],n?+n(N,y,g):C[y]))}if(k)return u=null,k+""||null}function p(){return AL().defined(i).curve(c).context(a)}return h.x=function(g){return arguments.length?(t=typeof g=="function"?g:Ht(+g),r=null,h):t},h.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Ht(+g),h):t},h.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Ht(+g),h):r},h.y=function(g){return arguments.length?(e=typeof g=="function"?g:Ht(+g),n=null,h):e},h.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Ht(+g),h):e},h.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Ht(+g),h):n},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(n)},h.lineX1=function(){return p().x(r).y(e)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Ht(!!g),h):i},h.curve=function(g){return arguments.length?(c=g,a!=null&&(u=c(a)),h):c},h.context=function(g){return arguments.length?(g==null?a=u=null:u=c(a=g),h):a},h}class TL{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function HX(t){return new TL(t,!0)}function GX(t){return new TL(t,!1)}const ME={draw(t,e){const n=ms(e/mv);t.moveTo(n,0),t.arc(0,0,n,0,zy)}},KX={draw(t,e){const n=ms(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},CL=ms(1/3),QX=CL*2,WX={draw(t,e){const n=ms(e/QX),r=n*CL;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},YX={draw(t,e){const n=ms(e),r=-n/2;t.rect(r,r,n,n)}},XX=.8908130915292852,OL=hv(mv/10)/hv(7*mv/10),JX=hv(zy/10)*OL,ZX=-wL(zy/10)*OL,eJ={draw(t,e){const n=ms(e*XX),r=JX*n,i=ZX*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const c=zy*a/5,u=wL(c),f=hv(c);t.lineTo(f*n,-u*n),t.lineTo(u*r-f*i,f*r+u*i)}t.closePath()}},e_=ms(3),tJ={draw(t,e){const n=-ms(e/(e_*3));t.moveTo(0,n*2),t.lineTo(-e_*n,-n),t.lineTo(e_*n,-n),t.closePath()}},ki=-.5,Di=ms(3)/2,bw=1/ms(12),nJ=(bw/2+1)*3,rJ={draw(t,e){const n=ms(e/nJ),r=n/2,i=n*bw,a=r,c=n*bw+n,u=-a,f=c;t.moveTo(r,i),t.lineTo(a,c),t.lineTo(u,f),t.lineTo(ki*r-Di*i,Di*r+ki*i),t.lineTo(ki*a-Di*c,Di*a+ki*c),t.lineTo(ki*u-Di*f,Di*u+ki*f),t.lineTo(ki*r+Di*i,ki*i-Di*r),t.lineTo(ki*a+Di*c,ki*c-Di*a),t.lineTo(ki*u+Di*f,ki*f-Di*u),t.closePath()}};function iJ(t,e){let n=null,r=kE(i);t=typeof t=="function"?t:Ht(t||ME),e=typeof e=="function"?e:Ht(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Ht(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Ht(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function pv(){}function gv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function IL(t){this._context=t}IL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function sJ(t){return new IL(t)}function PL(t){this._context=t}PL.prototype={areaStart:pv,areaEnd:pv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:gv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function aJ(t){return new PL(t)}function RL(t){this._context=t}RL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oJ(t){return new RL(t)}function kL(t){this._context=t}kL.prototype={areaStart:pv,areaEnd:pv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function lJ(t){return new kL(t)}function XO(t){return t<0?-1:1}function JO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),c=(n-t._y1)/(i||r<0&&-0),u=(a*i+c*r)/(r+i);return(XO(a)+XO(c))*Math.min(Math.abs(a),Math.abs(c),.5*Math.abs(u))||0}function ZO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function t_(t,e,n){var r=t._x0,i=t._y0,a=t._x1,c=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*e,a-u,c-u*n,a,c)}function vv(t){this._context=t}vv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:t_(this,this._t0,ZO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,t_(this,ZO(this,n=JO(this,t,e)),n);break;default:t_(this,this._t0,n=JO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function DL(t){this._context=new ML(t)}(DL.prototype=Object.create(vv.prototype)).point=function(t,e){vv.prototype.point.call(this,e,t)};function ML(t){this._context=t}ML.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function cJ(t){return new vv(t)}function uJ(t){return new DL(t)}function zL(t){this._context=t}zL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=eI(t),i=eI(e),a=0,c=1;c<n;++a,++c)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[c],e[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function eI(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),c=new Array(n);for(i[0]=0,a[0]=2,c[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,c[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,c[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,c[e]-=r*c[e-1];for(i[n-1]=c[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(c[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function dJ(t){return new zL(t)}function qy(t,e){this._context=t,this._t=e}qy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function fJ(t){return new qy(t,.5)}function hJ(t){return new qy(t,0)}function mJ(t){return new qy(t,1)}function Ac(t,e){if((c=t.length)>1)for(var n=1,r,i,a=t[e[0]],c,u=a.length;n<c;++n)for(i=a,a=t[e[n]],r=0;r<u;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function xw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function pJ(t,e){return t[e]}function gJ(t){const e=[];return e.key=t,e}function vJ(){var t=Ht([]),e=xw,n=Ac,r=pJ;function i(a){var c=Array.from(t.apply(this,arguments),gJ),u,f=c.length,h=-1,p;for(const g of a)for(u=0,++h;u<f;++u)(c[u][h]=[0,+r(g,c[u].key,h,a)]).data=g;for(u=0,p=DE(e(c));u<f;++u)c[p[u]].index=u;return n(c,p),c}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Ht(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ht(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?xw:typeof a=="function"?a:Ht(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Ac,i):n},i}function yJ(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,c;i<a;++i){for(c=n=0;n<r;++n)c+=t[n][i][1]||0;if(c)for(n=0;n<r;++n)t[n][i][1]/=c}Ac(t,e)}}function bJ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var c=0,u=0;c<i;++c)u+=t[c][n][1]||0;r[n][1]+=r[n][0]=-u/2}Ac(t,e)}}function xJ(t,e){if(!(!((c=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,c;r<a;++r){for(var u=0,f=0,h=0;u<c;++u){for(var p=t[e[u]],g=p[r][1]||0,y=p[r-1][1]||0,x=(g-y)/2,E=0;E<u;++E){var j=t[e[E]],N=j[r][1]||0,A=j[r-1][1]||0;x+=N-A}f+=g,h+=x*g}i[r-1][1]+=i[r-1][0]=n,f&&(n-=h/f)}i[r-1][1]+=i[r-1][0]=n,Ac(t,e)}}var n_={},r_={},tI;function _J(){return tI||(tI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(r_)),r_}var i_={},nI;function LL(){return nI||(nI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(i_)),i_}var s_={},rI;function zE(){return rI||(rI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(s_)),s_}var a_={},o_={},iI;function wJ(){return iI||(iI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(o_)),o_}var sI;function LE(){return sI||(sI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wJ(),n=zE();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],c=i.length;if(c===0)return a;let u=0,f="",h="",p=!1;for(i.charCodeAt(0)===46&&(a.push(""),u++);u<c;){const g=i[u];h?g==="\\"&&u+1<c?(u++,f+=i[u]):g===h?h="":f+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,a.push(f),f=""):f+=g:g==="["?(p=!0,f&&(a.push(f),f="")):g==="."?f&&(a.push(f),f=""):f+=g,u++}return f&&a.push(f),a}t.toPath=r})(a_)),a_}var aI;function qE(){return aI||(aI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_J(),n=LL(),r=zE(),i=LE();function a(u,f,h){if(u==null)return h;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return h;const p=u[f];return p===void 0?n.isDeepKey(f)?a(u,i.toPath(f),h):h:p}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const p=u[f];return p===void 0?h:p}default:{if(Array.isArray(f))return c(u,f,h);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return h;const p=u[f];return p===void 0?h:p}}}function c(u,f,h){if(f.length===0)return h;let p=u;for(let g=0;g<f.length;g++){if(p==null||e.isUnsafeProperty(f[g]))return h;p=p[f[g]]}return p===void 0?h:p}t.get=a})(n_)),n_}var l_,oI;function jJ(){return oI||(oI=1,l_=qE().get),l_}var EJ=jJ();const ud=ea(EJ);var NJ=4;function Jo(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NJ,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function hn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,c)=>{var u=n[c-1];return typeof u=="string"?i+u+a:u!==void 0?i+Jo(u)+a:i+a},"")}var Xr=t=>t===0?0:t>0?1:-1,Ys=t=>typeof t=="number"&&t!=+t,Tc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Pe=t=>(typeof t=="number"||t instanceof Number)&&!Ys(t),Xs=t=>Pe(t)||typeof t=="string",SJ=0,Ph=t=>{var e=++SJ;return"".concat(t||"").concat(e)},fs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(e)&&typeof e!="string")return r;var a;if(Tc(e)){if(n==null)return r;var c=e.indexOf("%");a=n*parseFloat(e.slice(0,c))/100}else a=+e;return Ys(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},qL=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function mn(t,e,n){return Pe(t)&&Pe(e)?Jo(t+n*(e-t)):e}function UL(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):ud(r,e))===n)}var an=t=>t===null||typeof t>"u",dm=t=>an(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Jr(t){return t!=null}function Uc(){}var AJ=["type","size","sizeType"];function _w(){return _w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_w.apply(null,arguments)}function lI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lI(Object(n),!0).forEach(function(r){TJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TJ(t,e,n){return(e=CJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CJ(t){var e=OJ(t,"string");return typeof e=="symbol"?e:e+""}function OJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IJ(t,e){if(t==null)return{};var n,r,i=PJ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function PJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var VL={symbolCircle:ME,symbolCross:KX,symbolDiamond:WX,symbolSquare:YX,symbolStar:eJ,symbolTriangle:tJ,symbolWye:rJ},RJ=Math.PI/180,kJ=t=>{var e="symbol".concat(dm(t));return VL[e]||ME},DJ=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*RJ;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},MJ=(t,e)=>{VL["symbol".concat(dm(t))]=e},BL=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=IJ(t,AJ),a=cI(cI({},i),{},{type:e,size:n,sizeType:r}),c="circle";typeof e=="string"&&(c=e);var u=()=>{var y=kJ(c),x=iJ().type(y).size(DJ(n,r,c)),E=x();if(E!==null)return E},{className:f,cx:h,cy:p}=a,g=Rr(a);return Pe(h)&&Pe(p)&&Pe(n)?w.createElement("path",_w({},g,{className:Ut("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};BL.registerSymbol=MJ;var $L=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,UE=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(w.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{RE(i)&&(r[i]=(a=>n[i](n,a)))}),r},zJ=(t,e,n)=>r=>(t(e,n,r),null),VE=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];RE(i)&&typeof a=="function"&&(r||(r={}),r[i]=zJ(a,e,n))}),r};function uI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uI(Object(n),!0).forEach(function(r){qJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qJ(t,e,n){return(e=UJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UJ(t){var e=VJ(t,"string");return typeof e=="symbol"?e:e+""}function VJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mr(t,e){var n=LJ({},t),r=e,i=Object.keys(e),a=i.reduce((c,u)=>(c[u]===void 0&&r[u]!==void 0&&(c[u]=r[u]),c),n);return a}var c_={},u_={},dI;function BJ(){return dI||(dI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const c=n[a],u=r(c,a,n);i.has(u)||i.set(u,c)}return Array.from(i.values())}t.uniqBy=e})(u_)),u_}var d_={},fI;function $J(){return fI||(fI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(d_)),d_}var f_={},hI;function FL(){return hI||(hI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(f_)),f_}var h_={},m_={},p_={},mI;function FJ(){return mI||(mI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(p_)),p_}var pI;function BE(){return pI||(pI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FJ();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(m_)),m_}var g_={},gI;function HJ(){return gI||(gI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(g_)),g_}var vI;function GJ(){return vI||(vI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BE(),n=HJ();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(h_)),h_}var v_={},y_={},yI;function KJ(){return yI||(yI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qE();function n(r){return function(i){return e.get(i,r)}}t.property=n})(y_)),y_}var b_={},x_={},__={},w_={},bI;function HL(){return bI||(bI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(w_)),w_}var j_={},xI;function GL(){return xI||(xI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(j_)),j_}var E_={},_I;function KL(){return _I||(_I=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(E_)),E_}var wI;function QJ(){return wI||(wI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HL(),n=GL(),r=KL();function i(p,g,y){return typeof y!="function"?i(p,g,()=>{}):a(p,g,function x(E,j,N,A,k,O){const C=y(E,j,N,A,k,O);return C!==void 0?!!C:a(E,j,x,O)},new Map)}function a(p,g,y,x){if(g===p)return!0;switch(typeof g){case"object":return c(p,g,y,x);case"function":return Object.keys(g).length>0?a(p,{...g},y,x):r.isEqualsSameValueZero(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:r.isEqualsSameValueZero(p,g)}}function c(p,g,y,x){if(g==null)return!0;if(Array.isArray(g))return f(p,g,y,x);if(g instanceof Map)return u(p,g,y,x);if(g instanceof Set)return h(p,g,y,x);const E=Object.keys(g);if(p==null||n.isPrimitive(p))return E.length===0;if(E.length===0)return!0;if(x?.has(g))return x.get(g)===p;x?.set(g,p);try{for(let j=0;j<E.length;j++){const N=E[j];if(!n.isPrimitive(p)&&!(N in p)||g[N]===void 0&&p[N]!==void 0||g[N]===null&&p[N]!==null||!y(p[N],g[N],N,p,g,x))return!1}return!0}finally{x?.delete(g)}}function u(p,g,y,x){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[E,j]of g.entries()){const N=p.get(E);if(y(N,j,E,p,g,x)===!1)return!1}return!0}function f(p,g,y,x){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const E=new Set;for(let j=0;j<g.length;j++){const N=g[j];let A=!1;for(let k=0;k<p.length;k++){if(E.has(k))continue;const O=p[k];let C=!1;if(y(O,N,j,p,g,x)&&(C=!0),C){E.add(k),A=!0;break}}if(!A)return!1}return!0}function h(p,g,y,x){return g.size===0?!0:p instanceof Set?f([...p],[...g],y,x):!1}t.isMatchWith=i,t.isSetMatch=h})(__)),__}var jI;function QL(){return jI||(jI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QJ();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(x_)),x_}var N_={},S_={},A_={},EI;function WJ(){return EI||(EI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(A_)),A_}var T_={},NI;function $E(){return NI||(NI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(T_)),T_}var C_={},SI;function WL(){return SI||(SI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",c="[object Symbol]",u="[object Date]",f="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",y="[object ArrayBuffer]",x="[object Object]",E="[object Error]",j="[object DataView]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",O="[object Uint32Array]",C="[object BigUint64Array]",V="[object Int8Array]",$="[object Int16Array]",D="[object Int32Array]",P="[object BigInt64Array]",R="[object Float32Array]",q="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=y,t.arrayTag=p,t.bigInt64ArrayTag=P,t.bigUint64ArrayTag=C,t.booleanTag=i,t.dataViewTag=j,t.dateTag=u,t.errorTag=E,t.float32ArrayTag=R,t.float64ArrayTag=q,t.functionTag=g,t.int16ArrayTag=$,t.int32ArrayTag=D,t.int8ArrayTag=V,t.mapTag=f,t.numberTag=r,t.objectTag=x,t.regexpTag=e,t.setTag=h,t.stringTag=n,t.symbolTag=c,t.uint16ArrayTag=k,t.uint32ArrayTag=O,t.uint8ArrayTag=N,t.uint8ClampedArrayTag=A})(C_)),C_}var O_={},AI;function YJ(){return AI||(AI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(O_)),O_}var TI;function YL(){return TI||(TI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WJ(),n=$E(),r=WL(),i=GL(),a=YJ();function c(p,g){return u(p,void 0,p,new Map,g)}function u(p,g,y,x=new Map,E=void 0){const j=E?.(p,g,y,x);if(j!==void 0)return j;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const N=new Array(p.length);x.set(p,N);for(let A=0;A<p.length;A++)N[A]=u(p[A],A,y,x,E);return Object.hasOwn(p,"index")&&(N.index=p.index),Object.hasOwn(p,"input")&&(N.input=p.input),N}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const N=new RegExp(p.source,p.flags);return N.lastIndex=p.lastIndex,N}if(p instanceof Map){const N=new Map;x.set(p,N);for(const[A,k]of p)N.set(A,u(k,A,y,x,E));return N}if(p instanceof Set){const N=new Set;x.set(p,N);for(const A of p)N.add(u(A,void 0,y,x,E));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(a.isTypedArray(p)){const N=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,N);for(let A=0;A<p.length;A++)N[A]=u(p[A],A,y,x,E);return N}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const N=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,N),f(N,p,y,x,E),N}if(typeof File<"u"&&p instanceof File){const N=new File([p],p.name,{type:p.type});return x.set(p,N),f(N,p,y,x,E),N}if(typeof Blob<"u"&&p instanceof Blob){const N=new Blob([p],{type:p.type});return x.set(p,N),f(N,p,y,x,E),N}if(p instanceof Error){const N=new p.constructor;return x.set(p,N),N.message=p.message,N.name=p.name,N.stack=p.stack,N.cause=p.cause,f(N,p,y,x,E),N}if(p instanceof Boolean){const N=new Boolean(p.valueOf());return x.set(p,N),f(N,p,y,x,E),N}if(p instanceof Number){const N=new Number(p.valueOf());return x.set(p,N),f(N,p,y,x,E),N}if(p instanceof String){const N=new String(p.valueOf());return x.set(p,N),f(N,p,y,x,E),N}if(typeof p=="object"&&h(p)){const N=Object.create(Object.getPrototypeOf(p));return x.set(p,N),f(N,p,y,x,E),N}return p}function f(p,g,y=p,x,E){const j=[...Object.keys(g),...e.getSymbols(g)];for(let N=0;N<j.length;N++){const A=j[N],k=Object.getOwnPropertyDescriptor(p,A);(k==null||k.writable)&&(p[A]=u(g[A],A,y,x,E))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=c,t.cloneDeepWithImpl=u,t.copyProperties=f})(S_)),S_}var CI;function XJ(){return CI||(CI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YL();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(N_)),N_}var OI;function JJ(){return OI||(OI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QL(),n=XJ();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(b_)),b_}var I_={},P_={},R_={},II;function ZJ(){return II||(II=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YL(),n=$E(),r=WL();function i(a,c){return e.cloneDeepWith(a,(u,f,h,p)=>{const g=c?.(u,f,h,p);if(g!==void 0)return g;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const y={};return p.set(a,y),e.copyProperties(y,a,h,p),y}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const y=new a.constructor(a?.valueOf());return e.copyProperties(y,a),y}case r.argumentsTag:{const y={};return e.copyProperties(y,a),y.length=a.length,y[Symbol.iterator]=a[Symbol.iterator],y}default:return}}})}t.cloneDeepWith=i})(R_)),R_}var PI;function eZ(){return PI||(PI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZJ();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(P_)),P_}var k_={},D_={},RI;function XL(){return RI||(RI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(D_)),D_}var M_={},kI;function tZ(){return kI||(kI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$E();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(M_)),M_}var DI;function nZ(){return DI||(DI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LL(),n=XL(),r=tZ(),i=LE();function a(c,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&e.isDeepKey(u)&&c?.[u]==null?f=i.toPath(u):f=[u],f.length===0)return!1;let h=c;for(let p=0;p<f.length;p++){const g=f[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}t.has=a})(k_)),k_}var MI;function rZ(){return MI||(MI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QL(),n=zE(),r=eZ(),i=qE(),a=nZ();function c(u,f){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(h){const p=i.get(h,u);return p===void 0?a.has(h,u):f===void 0?p===void 0:e.isMatch(p,f)}}t.matchesProperty=c})(I_)),I_}var zI;function iZ(){return zI||(zI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FL(),n=KJ(),r=JJ(),i=rZ();function a(c){if(c==null)return e.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):r.matches(c);case"string":case"symbol":case"number":return n.property(c)}}t.iteratee=a})(v_)),v_}var LI;function sZ(){return LI||(LI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BJ(),n=$J(),r=FL(),i=GJ(),a=iZ();function c(u,f=r.identity){return i.isArrayLikeObject(u)?e.uniqBy(Array.from(u),n.ary(a.iteratee(f),1)):[]}t.uniqBy=c})(c_)),c_}var z_,qI;function aZ(){return qI||(qI=1,z_=sZ().uniqBy),z_}var oZ=aZ();const UI=ea(oZ);function lZ(t,e,n){return e===!0?UI(t,n):typeof e=="function"?UI(t,e):t}var L_={exports:{}},q_={},U_={exports:{}},V_={};var VI;function cZ(){if(VI)return V_;VI=1;var t=yd();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,c=t.useDebugValue;function u(g,y){var x=y(),E=r({inst:{value:x,getSnapshot:y}}),j=E[0].inst,N=E[1];return a(function(){j.value=x,j.getSnapshot=y,f(j)&&N({inst:j})},[g,x,y]),i(function(){return f(j)&&N({inst:j}),g(function(){f(j)&&N({inst:j})})},[g]),c(x),x}function f(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!n(g,x)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return V_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,V_}var BI;function uZ(){return BI||(BI=1,U_.exports=cZ()),U_.exports}var $I;function dZ(){if($I)return q_;$I=1;var t=yd(),e=uZ();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,c=t.useEffect,u=t.useMemo,f=t.useDebugValue;return q_.useSyncExternalStoreWithSelector=function(h,p,g,y,x){var E=a(null);if(E.current===null){var j={hasValue:!1,value:null};E.current=j}else j=E.current;E=u(function(){function A($){if(!k){if(k=!0,O=$,$=y($),x!==void 0&&j.hasValue){var D=j.value;if(x(D,$))return C=D}return C=$}if(D=C,r(O,$))return D;var P=y($);return x!==void 0&&x(D,P)?(O=$,D):(O=$,C=P)}var k=!1,O,C,V=g===void 0?null:g;return[function(){return A(p())},V===null?void 0:function(){return A(V())}]},[p,g,y,x]);var N=i(h,E[0],E[1]);return c(function(){j.hasValue=!0,j.value=N},[N]),f(N),N},q_}var FI;function fZ(){return FI||(FI=1,L_.exports=dZ()),L_.exports}var hZ=fZ(),FE=w.createContext(null),mZ=t=>t,jn=()=>{var t=w.useContext(FE);return t?t.store.dispatch:mZ},qg=()=>{},pZ=()=>qg,gZ=(t,e)=>t===e;function Le(t){var e=w.useContext(FE),n=w.useMemo(()=>e?r=>{if(r!=null)return t(r)}:qg,[e,t]);return hZ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:pZ,e?e.store.getState:qg,e?e.store.getState:qg,n,gZ)}function vZ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function yZ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function bZ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var HI=t=>Array.isArray(t)?t:[t];function xZ(t){const e=Array.isArray(t[0])?t[0]:t;return bZ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function _Z(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var wZ=class{constructor(t){this.value=t}deref(){return this.value}},jZ=typeof WeakRef<"u"?WeakRef:wZ,EZ=0,GI=1;function ug(){return{s:EZ,v:void 0,o:null,p:null}}function JL(t,e={}){let n=ug();const{resultEqualityCheck:r}=e;let i,a=0;function c(){let u=n;const{length:f}=arguments;for(let g=0,y=f;g<y;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let E=u.o;E===null&&(u.o=E=new WeakMap);const j=E.get(x);j===void 0?(u=ug(),E.set(x,u)):u=j}else{let E=u.p;E===null&&(u.p=E=new Map);const j=E.get(x);j===void 0?(u=ug(),E.set(x,u)):u=j}}const h=u;let p;if(u.s===GI)p=u.v;else if(p=t.apply(null,arguments),a++,r){const g=i?.deref?.()??i;g!=null&&r(g,p)&&(p=g,a!==0&&a--),i=typeof p=="object"&&p!==null||typeof p=="function"?new jZ(p):p}return h.s=GI,h.v=p,p}return c.clearCache=()=>{n=ug(),c.resetResultsCount()},c.resultsCount=()=>a,c.resetResultsCount=()=>{a=0},c}function NZ(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,c=0,u,f={},h=i.pop();typeof h=="object"&&(f=h,h=i.pop()),vZ(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...f},{memoize:g,memoizeOptions:y=[],argsMemoize:x=JL,argsMemoizeOptions:E=[]}=p,j=HI(y),N=HI(E),A=xZ(i),k=g(function(){return a++,h.apply(null,arguments)},...j),O=x(function(){c++;const V=_Z(A,arguments);return u=k.apply(null,V),u},...N);return Object.assign(O,{resultFunc:h,memoizedResultFunc:k,dependencies:A,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var ue=NZ(JL),SZ=Object.assign((t,e=ue)=>{yZ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((c,u,f)=>(c[n[f]]=u,c),{}))},{withTypes:()=>SZ}),B_={},$_={},F_={},KI;function AZ(){return KI||(KI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const c=e(r),u=e(i);if(c===u&&c===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?u-c:c-u}return 0};t.compareValues=n})(F_)),F_}var H_={},G_={},QI;function ZL(){return QI||(QI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(G_)),G_}var WI;function TZ(){return WI||(WI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZL(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,c){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||c!=null&&Object.hasOwn(c,a)}t.isKey=i})(H_)),H_}var YI;function CZ(){return YI||(YI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AZ(),n=TZ(),r=LE();function i(a,c,u,f){if(a==null)return[];u=f?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,E)=>{let j=x;for(let N=0;N<E.length&&j!=null;++N)j=j[E[N]];return j},p=(x,E)=>E==null||x==null?E:typeof x=="object"&&"key"in x?Object.hasOwn(E,x.key)?E[x.key]:h(E,x.path):typeof x=="function"?x(E):Array.isArray(x)?h(E,x):typeof E=="object"?E[x]:E,g=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return a.map(x=>({original:x,criteria:g.map(E=>p(E,x))})).slice().sort((x,E)=>{for(let j=0;j<g.length;j++){const N=e.compareValues(x.criteria[j],E.criteria[j],u[j]);if(N!==0)return N}return 0}).map(x=>x.original)}t.orderBy=i})($_)),$_}var K_={},XI;function OZ(){return XI||(XI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),c=(u,f)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&f<a?c(p,f+1):i.push(p)}};return c(n,0),i}t.flatten=e})(K_)),K_}var Q_={},JI;function e3(){return JI||(JI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XL(),n=BE(),r=HL(),i=KL();function a(c,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&e.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.isEqualsSameValueZero(f[u],c):!1}t.isIterateeCall=a})(Q_)),Q_}var ZI;function IZ(){return ZI||(ZI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CZ(),n=OZ(),r=e3();function i(a,...c){const u=c.length;return u>1&&r.isIterateeCall(a,c[0],c[1])?c=[]:u>2&&r.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),e.orderBy(a,n.flatten(c),["asc"])}t.sortBy=i})(B_)),B_}var W_,eP;function PZ(){return eP||(eP=1,W_=IZ().sortBy),W_}var RZ=PZ();const Uy=ea(RZ);var t3=t=>t.legend.settings,kZ=t=>t.legend.size,DZ=t=>t.legend.payload;ue([DZ,t3],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Uy(r,n):r});var dg=1;function MZ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=w.useState({height:0,left:0,top:0,width:0}),r=w.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),c={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(c.height-e.height)>dg||Math.abs(c.left-e.left)>dg||Math.abs(c.top-e.top)>dg||Math.abs(c.width-e.width)>dg)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function lr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var zZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",tP=zZ,Y_=()=>Math.random().toString(36).substring(7).split("").join("."),LZ={INIT:`@@redux/INIT${Y_()}`,REPLACE:`@@redux/REPLACE${Y_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Y_()}`},yv=LZ;function HE(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function n3(t,e,n){if(typeof t!="function")throw new Error(lr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(lr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(lr(1));return n(n3)(t,e)}let r=t,i=e,a=new Map,c=a,u=0,f=!1;function h(){c===a&&(c=new Map,a.forEach((N,A)=>{c.set(A,N)}))}function p(){if(f)throw new Error(lr(3));return i}function g(N){if(typeof N!="function")throw new Error(lr(4));if(f)throw new Error(lr(5));let A=!0;h();const k=u++;return c.set(k,N),function(){if(A){if(f)throw new Error(lr(6));A=!1,h(),c.delete(k),a=null}}}function y(N){if(!HE(N))throw new Error(lr(7));if(typeof N.type>"u")throw new Error(lr(8));if(typeof N.type!="string")throw new Error(lr(17));if(f)throw new Error(lr(9));try{f=!0,i=r(i,N)}finally{f=!1}return(a=c).forEach(k=>{k()}),N}function x(N){if(typeof N!="function")throw new Error(lr(10));r=N,y({type:yv.REPLACE})}function E(){const N=g;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(lr(11));function k(){const C=A;C.next&&C.next(p())}return k(),{unsubscribe:N(k)}},[tP](){return this}}}return y({type:yv.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:x,[tP]:E}}function qZ(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:yv.INIT})>"u")throw new Error(lr(12));if(typeof n(void 0,{type:yv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lr(13))})}function r3(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const c=e[a];typeof t[c]=="function"&&(n[c]=t[c])}const r=Object.keys(n);let i;try{qZ(n)}catch(a){i=a}return function(c={},u){if(i)throw i;let f=!1;const h={};for(let p=0;p<r.length;p++){const g=r[p],y=n[g],x=c[g],E=y(x,u);if(typeof E>"u")throw u&&u.type,new Error(lr(14));h[g]=E,f=f||E!==x}return f=f||r.length!==Object.keys(c).length,f?h:c}}function bv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function UZ(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(lr(15))};const c={getState:i.getState,dispatch:(f,...h)=>a(f,...h)},u=t.map(f=>f(c));return a=bv(...u)(i.dispatch),{...i,dispatch:a}}}function i3(t){return HE(t)&&"type"in t&&typeof t.type=="string"}var s3=Symbol.for("immer-nothing"),nP=Symbol.for("immer-draftable"),kr=Symbol.for("immer-state");function ns(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var gi=Object,dd=gi.getPrototypeOf,xv="constructor",Vy="prototype",ww="configurable",_v="enumerable",Ug="writable",Rh="value",Ua=t=>!!t&&!!t[kr];function hs(t){return t?a3(t)||$y(t)||!!t[nP]||!!t[xv]?.[nP]||Fy(t)||Hy(t):!1}var VZ=gi[Vy][xv].toString(),rP=new WeakMap;function a3(t){if(!t||!GE(t))return!1;const e=dd(t);if(e===null||e===gi[Vy])return!0;const n=gi.hasOwnProperty.call(e,xv)&&e[xv];if(n===Object)return!0;if(!$u(n))return!1;let r=rP.get(n);return r===void 0&&(r=Function.toString.call(n),rP.set(n,r)),r===VZ}function By(t,e,n=!0){fm(t)===0?(n?Reflect.ownKeys(t):gi.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function fm(t){const e=t[kr];return e?e.type_:$y(t)?1:Fy(t)?2:Hy(t)?3:0}var iP=(t,e,n=fm(t))=>n===2?t.has(e):gi[Vy].hasOwnProperty.call(t,e),jw=(t,e,n=fm(t))=>n===2?t.get(e):t[e],wv=(t,e,n,r=fm(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function BZ(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var $y=Array.isArray,Fy=t=>t instanceof Map,Hy=t=>t instanceof Set,GE=t=>typeof t=="object",$u=t=>typeof t=="function",X_=t=>typeof t=="boolean";function $Z(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Na=t=>t.copy_||t.base_,KE=t=>t.modified_?t.copy_:t.base_;function Ew(t,e){if(Fy(t))return new Map(t);if(Hy(t))return new Set(t);if($y(t))return Array[Vy].slice.call(t);const n=a3(t);if(e===!0||e==="class_only"&&!n){const r=gi.getOwnPropertyDescriptors(t);delete r[kr];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const c=i[a],u=r[c];u[Ug]===!1&&(u[Ug]=!0,u[ww]=!0),(u.get||u.set)&&(r[c]={[ww]:!0,[Ug]:!0,[_v]:u[_v],[Rh]:t[c]})}return gi.create(dd(t),r)}else{const r=dd(t);if(r!==null&&n)return{...t};const i=gi.create(r);return gi.assign(i,t)}}function QE(t,e=!1){return Gy(t)||Ua(t)||!hs(t)||(fm(t)>1&&gi.defineProperties(t,{set:fg,add:fg,clear:fg,delete:fg}),gi.freeze(t),e&&By(t,(n,r)=>{QE(r,!0)},!1)),t}function FZ(){ns(2)}var fg={[Rh]:FZ};function Gy(t){return t===null||!GE(t)?!0:gi.isFrozen(t)}var jv="MapSet",Nw="Patches",sP="ArrayMethods",o3={};function Cc(t){const e=o3[t];return e||ns(0,t),e}var aP=t=>!!o3[t],kh,l3=()=>kh,HZ=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:aP(jv)?Cc(jv):void 0,arrayMethodsPlugin_:aP(sP)?Cc(sP):void 0});function oP(t,e){e&&(t.patchPlugin_=Cc(Nw),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Sw(t){Aw(t),t.drafts_.forEach(GZ),t.drafts_=null}function Aw(t){t===kh&&(kh=t.parent_)}var lP=t=>kh=HZ(kh,t);function GZ(t){const e=t[kr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function cP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[kr].modified_&&(Sw(e),ns(4)),hs(t)&&(t=uP(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[kr].base_,t,e)}else t=uP(e,n);return KZ(e,t,!0),Sw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==s3?t:void 0}function uP(t,e){if(Gy(e))return e;const n=e[kr];if(!n)return Ev(e,t.handledSet_,t);if(!Ky(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);d3(n,t)}return n.copy_}function KZ(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&QE(e,n)}function c3(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var Ky=(t,e)=>t.scope_===e,QZ=[];function u3(t,e,n,r){const i=Na(t),a=t.type_;if(r!==void 0&&jw(i,r,a)===e){wv(i,r,n,a);return}if(!t.draftLocations_){const u=t.draftLocations_=new Map;By(i,(f,h)=>{if(Ua(h)){const p=u.get(h)||[];p.push(f),u.set(h,p)}})}const c=t.draftLocations_.get(e)??QZ;for(const u of c)wv(i,u,n,a)}function WZ(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!Ky(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const c=KE(a);u3(t,a.draft_??a,c,n),d3(a,i)})}function d3(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}c3(t)}}function YZ(t,e,n){const{scope_:r}=t;if(Ua(n)){const i=n[kr];Ky(i,r)&&i.callbacks_.push(function(){Vg(t);const c=KE(i);u3(t,n,c,e)})}else hs(n)&&t.callbacks_.push(function(){const a=Na(t);t.type_===3?a.has(n)&&Ev(n,r.handledSet_,r):jw(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Ev(jw(t.copy_,e,t.type_),r.handledSet_,r)})}function Ev(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ua(t)||e.has(t)||!hs(t)||Gy(t)||(e.add(t),By(t,(r,i)=>{if(Ua(i)){const a=i[kr];if(Ky(a,n)){const c=KE(a);wv(t,r,c,t.type_),c3(a)}}else hs(i)&&Ev(i,e,n)})),t}function XZ(t,e){const n=$y(t),r={type_:n?1:0,scope_:e?e.scope_:l3(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=Nv;n&&(i=[r],a=Dh);const{revoke:c,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=c,[u,r]}var Nv={get(t,e){if(e===kr)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Na(t);if(!iP(i,e,t.type_))return JZ(t,i,e);const a=i[e];if(t.finalized_||!hs(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&$Z(e))return a;if(a===J_(t.base_,e)){Vg(t);const c=t.type_===1?+e:e,u=Cw(t.scope_,a,t,c);return t.copy_[c]=u}return a},has(t,e){return e in Na(t)},ownKeys(t){return Reflect.ownKeys(Na(t))},set(t,e,n){const r=f3(Na(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=J_(Na(t),e),a=i?.[kr];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(BZ(n,i)&&(n!==void 0||iP(t.base_,e,t.type_)))return!0;Vg(t),Tw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),YZ(t,e,n)),!0},deleteProperty(t,e){return Vg(t),J_(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Tw(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Na(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Ug]:!0,[ww]:t.type_!==1||e!=="length",[_v]:r[_v],[Rh]:n[e]}},defineProperty(){ns(11)},getPrototypeOf(t){return dd(t.base_)},setPrototypeOf(){ns(12)}},Dh={};for(let t in Nv){let e=Nv[t];Dh[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Dh.deleteProperty=function(t,e){return Dh.set.call(this,t,e,void 0)};Dh.set=function(t,e,n){return Nv.set.call(this,t[0],e,n,t[0])};function J_(t,e){const n=t[kr];return(n?Na(n):t)[e]}function JZ(t,e,n){const r=f3(e,n);return r?Rh in r?r[Rh]:r.get?.call(t.draft_):void 0}function f3(t,e){if(!(e in t))return;let n=dd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=dd(n)}}function Tw(t){t.modified_||(t.modified_=!0,t.parent_&&Tw(t.parent_))}function Vg(t){t.copy_||(t.assigned_=new Map,t.copy_=Ew(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ZZ=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if($u(n)&&!$u(r)){const c=r;r=n;const u=this;return function(h=c,...p){return u.produce(h,g=>r.call(this,g,...p))}}$u(r)||ns(6),i!==void 0&&!$u(i)&&ns(7);let a;if(hs(n)){const c=lP(this),u=Cw(c,n,void 0);let f=!0;try{a=r(u),f=!1}finally{f?Sw(c):Aw(c)}return oP(c,i),cP(a,c)}else if(!n||!GE(n)){if(a=r(n),a===void 0&&(a=n),a===s3&&(a=void 0),this.autoFreeze_&&QE(a,!0),i){const c=[],u=[];Cc(Nw).generateReplacementPatches_(n,a,{patches_:c,inversePatches_:u}),i(c,u)}return a}else ns(1,n)},this.produceWithPatches=(n,r)=>{if($u(n))return(u,...f)=>this.produceWithPatches(u,h=>n(h,...f));let i,a;return[this.produce(n,r,(u,f)=>{i=u,a=f}),i,a]},X_(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),X_(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),X_(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){hs(e)||ns(8),Ua(e)&&(e=ls(e));const n=lP(this),r=Cw(n,e,void 0);return r[kr].isManual_=!0,Aw(n),r}finishDraft(e,n){const r=e&&e[kr];(!r||!r.isManual_)&&ns(9);const{scope_:i}=r;return oP(i,n),cP(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Cc(Nw).applyPatches_;return Ua(e)?i(e,n):this.produce(e,a=>i(a,n))}};function Cw(t,e,n,r){const[i,a]=Fy(e)?Cc(jv).proxyMap_(e,n):Hy(e)?Cc(jv).proxySet_(e,n):XZ(e,n);return(n?.scope_??l3()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?WZ(n,a,r):a.callbacks_.push(function(f){f.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:h}=f;a.modified_&&h&&h.generatePatches_(a,[],f)}),i}function ls(t){return Ua(t)||ns(10,t),h3(t)}function h3(t){if(!hs(t)||Gy(t))return t;const e=t[kr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Ew(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Ew(t,!0);return By(n,(i,a)=>{wv(n,i,h3(a))},r),e&&(e.finalized_=!1),n}var eee=new ZZ,m3=eee.produce;function p3(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var tee=p3(),nee=p3,ree=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bv:bv.apply(null,arguments)};function Ui(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(vi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>i3(r)&&r.type===t,n}var g3=class ah extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ah.prototype)}static get[Symbol.species](){return ah}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new ah(...e[0].concat(this)):new ah(...e.concat(this))}};function dP(t){return hs(t)?m3(t,()=>{}):t}function hg(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function iee(t){return typeof t=="boolean"}var see=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let c=new g3;return n&&(iee(n)?c.push(tee):c.push(nee(n.extraArgument))),c},v3="RTK_autoBatch",Jt=()=>t=>({payload:t,meta:{[v3]:!0}}),fP=t=>e=>{setTimeout(e,t)},y3=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,c=!1;const u=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fP(10):t.type==="callback"?t.queueNotification:fP(t.timeout),h=()=>{c=!1,a&&(a=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const g=()=>i&&p(),y=r.subscribe(g);return u.add(p),()=>{y(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[v3],a=!i,a&&(c||(c=!0,f(h))),r.dispatch(p)}finally{i=!0}}})},aee=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new g3(t);return r&&i.push(y3(typeof r=="object"?r:void 0)),i};function oee(t){const e=see(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:c=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(HE(n))u=r3(n);else throw new Error(vi(1));let f;typeof r=="function"?f=r(e):f=e();let h=bv;i&&(h=ree({trace:!1,...typeof i=="object"&&i}));const p=UZ(...f),g=aee(p);let y=typeof c=="function"?c(g):g();const x=h(...y);return n3(u,a,x)}function b3(t){const e={},n=[];let r;const i={addCase(a,c){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(vi(28));if(u in e)throw new Error(vi(29));return e[u]=c,i},addAsyncThunk(a,c){return c.pending&&(e[a.pending.type]=c.pending),c.rejected&&(e[a.rejected.type]=c.rejected),c.fulfilled&&(e[a.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:a.settled,reducer:c.settled}),i},addMatcher(a,c){return n.push({matcher:a,reducer:c}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function lee(t){return typeof t=="function"}function cee(t,e){let[n,r,i]=b3(e),a;if(lee(t))a=()=>dP(t());else{const u=dP(t);a=()=>u}function c(u=a(),f){let h=[n[f.type],...r.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,g)=>{if(g)if(Ua(p)){const x=g(p,f);return x===void 0?p:x}else{if(hs(p))return m3(p,y=>g(y,f));{const y=g(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return p},u)}return c.getInitialState=a,c}var uee="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dee=(t=21)=>{let e="",n=t;for(;n--;)e+=uee[Math.random()*64|0];return e},fee=Symbol.for("rtk-slice-createasyncthunk");function hee(t,e){return`${t}/${e}`}function mee({creators:t}={}){const e=t?.asyncThunk?.[fee];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(vi(11));const c=(typeof r.reducers=="function"?r.reducers(gee()):r.reducers)||{},u=Object.keys(c),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(O,C){const V=typeof O=="string"?O:O.type;if(!V)throw new Error(vi(12));if(V in f.sliceCaseReducersByType)throw new Error(vi(13));return f.sliceCaseReducersByType[V]=C,h},addMatcher(O,C){return f.sliceMatchers.push({matcher:O,reducer:C}),h},exposeAction(O,C){return f.actionCreators[O]=C,h},exposeCaseReducer(O,C){return f.sliceCaseReducersByName[O]=C,h}};u.forEach(O=>{const C=c[O],V={reducerName:O,type:hee(i,O),createNotation:typeof r.reducers=="function"};yee(C)?xee(V,C,h,e):vee(V,C,h)});function p(){const[O={},C=[],V=void 0]=typeof r.extraReducers=="function"?b3(r.extraReducers):[r.extraReducers],$={...O,...f.sliceCaseReducersByType};return cee(r.initialState,D=>{for(let P in $)D.addCase(P,$[P]);for(let P of f.sliceMatchers)D.addMatcher(P.matcher,P.reducer);for(let P of C)D.addMatcher(P.matcher,P.reducer);V&&D.addDefaultCase(V)})}const g=O=>O,y=new Map,x=new WeakMap;let E;function j(O,C){return E||(E=p()),E(O,C)}function N(){return E||(E=p()),E.getInitialState()}function A(O,C=!1){function V(D){let P=D[O];return typeof P>"u"&&C&&(P=hg(x,V,N)),P}function $(D=g){const P=hg(y,C,()=>new WeakMap);return hg(P,D,()=>{const R={};for(const[q,L]of Object.entries(r.selectors??{}))R[q]=pee(L,D,()=>hg(x,D,N),C);return R})}return{reducerPath:O,getSelectors:$,get selectors(){return $(V)},selectSlice:V}}const k={name:i,reducer:j,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:N,...A(a),injectInto(O,{reducerPath:C,...V}={}){const $=C??a;return O.inject({reducerPath:$,reducer:j},V),{...k,...A($,!0)}}};return k}}function pee(t,e,n,r){function i(a,...c){let u=e(a);return typeof u>"u"&&r&&(u=n()),t(u,...c)}return i.unwrapped=t,i}var ei=mee();function gee(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function vee({type:t,reducerName:e,createNotation:n},r,i){let a,c;if("reducer"in r){if(n&&!bee(r))throw new Error(vi(17));a=r.reducer,c=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,c?Ui(t,c):Ui(t))}function yee(t){return t._reducerDefinitionType==="asyncThunk"}function bee(t){return t._reducerDefinitionType==="reducerWithPrepare"}function xee({type:t,reducerName:e},n,r,i){if(!i)throw new Error(vi(18));const{payloadCreator:a,fulfilled:c,pending:u,rejected:f,settled:h,options:p}=n,g=i(t,a,p);r.exposeAction(e,g),c&&r.addCase(g.fulfilled,c),u&&r.addCase(g.pending,u),f&&r.addCase(g.rejected,f),h&&r.addMatcher(g.settled,h),r.exposeCaseReducer(e,{fulfilled:c||mg,pending:u||mg,rejected:f||mg,settled:h||mg})}function mg(){}var _ee="task",x3="listener",_3="completed",WE="cancelled",wee=`task-${WE}`,jee=`task-${_3}`,Ow=`${x3}-${WE}`,Eee=`${x3}-${_3}`,Qy=class{constructor(t){this.code=t,this.message=`${_ee} ${WE} (reason: ${t})`}name="TaskAbortError";message},YE=(t,e)=>{if(typeof t!="function")throw new TypeError(vi(32))},Sv=()=>{},w3=(t,e=Sv)=>(t.catch(e),t),j3=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),gc=t=>{if(t.aborted)throw new Qy(t.reason)};function E3(t,e){let n=Sv;return new Promise((r,i)=>{const a=()=>i(new Qy(t.reason));if(t.aborted){a();return}n=j3(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Sv})}var Nee=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Qy?"cancelled":"rejected",error:n}}finally{e?.()}},Av=t=>e=>w3(E3(t,e).then(n=>(gc(t),n))),N3=t=>{const e=Av(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Zu}=Object,hP={},Wy="listenerMiddleware",See=(t,e)=>{const n=r=>j3(t,()=>r.abort(t.reason));return(r,i)=>{YE(r);const a=new AbortController;n(a);const c=Nee(async()=>{gc(t),gc(a.signal);const u=await r({pause:Av(a.signal),delay:N3(a.signal),signal:a.signal});return gc(a.signal),u},()=>a.abort(jee));return i?.autoJoin&&e.push(c.catch(Sv)),{result:Av(t)(c),cancel(){a.abort(wee)}}}},Aee=(t,e)=>{const n=async(r,i)=>{gc(e);let a=()=>{};const u=[new Promise((f,h)=>{let p=t({predicate:r,effect:(g,y)=>{y.unsubscribe(),f([g,y.getState(),y.getOriginalState()])}});a=()=>{p(),h()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await E3(e,Promise.race(u));return gc(e),f}finally{a()}};return(r,i)=>w3(n(r,i))},S3=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Ui(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(vi(21));return YE(a),{predicate:i,type:e,effect:a}},A3=Zu(t=>{const{type:e,predicate:n,effect:r}=S3(t);return{id:dee(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(vi(22))}}},{withTypes:()=>A3}),mP=(t,e)=>{const{type:n,effect:r,predicate:i}=S3(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},Iw=t=>{t.pending.forEach(e=>{e.abort(Ow)})},Tee=(t,e)=>()=>{for(const n of e.keys())Iw(n);t.clear()},pP=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},T3=Zu(Ui(`${Wy}/add`),{withTypes:()=>T3}),Cee=Ui(`${Wy}/removeAll`),C3=Zu(Ui(`${Wy}/remove`),{withTypes:()=>C3}),Oee=(...t)=>{console.error(`${Wy}/error`,...t)},hm=(t={})=>{const e=new Map,n=new Map,r=x=>{const E=n.get(x)??0;n.set(x,E+1)},i=x=>{const E=n.get(x)??1;E===1?n.delete(x):n.set(x,E-1)},{extra:a,onError:c=Oee}=t;YE(c);const u=x=>(x.unsubscribe=()=>e.delete(x.id),e.set(x.id,x),E=>{x.unsubscribe(),E?.cancelActive&&Iw(x)}),f=x=>{const E=mP(e,x)??A3(x);return u(E)};Zu(f,{withTypes:()=>f});const h=x=>{const E=mP(e,x);return E&&(E.unsubscribe(),x.cancelActive&&Iw(E)),!!E};Zu(h,{withTypes:()=>h});const p=async(x,E,j,N)=>{const A=new AbortController,k=Aee(f,A.signal),O=[];try{x.pending.add(A),r(x),await Promise.resolve(x.effect(E,Zu({},j,{getOriginalState:N,condition:(C,V)=>k(C,V).then(Boolean),take:k,delay:N3(A.signal),pause:Av(A.signal),extra:a,signal:A.signal,fork:See(A.signal,O),unsubscribe:x.unsubscribe,subscribe:()=>{e.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((C,V,$)=>{C!==A&&(C.abort(Ow),$.delete(C))})},cancel:()=>{A.abort(Ow),x.pending.delete(A)},throwIfCancelled:()=>{gc(A.signal)}})))}catch(C){C instanceof Qy||pP(c,C,{raisedBy:"effect"})}finally{await Promise.all(O),A.abort(Eee),i(x),x.pending.delete(A)}},g=Tee(e,n);return{middleware:x=>E=>j=>{if(!i3(j))return E(j);if(T3.match(j))return f(j.payload);if(Cee.match(j)){g();return}if(C3.match(j))return h(j.payload);let N=x.getState();const A=()=>{if(N===hP)throw new Error(vi(23));return N};let k;try{if(k=E(j),e.size>0){const O=x.getState(),C=Array.from(e.values());for(const V of C){let $=!1;try{$=V.predicate(j,O,N)}catch(D){$=!1,pP(c,D,{raisedBy:"predicate"})}$&&p(V,j,x,A)}}}finally{N=hP}return k},startListening:f,stopListening:h,clearListeners:g}};function vi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Iee={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},O3=ei({name:"chartLayout",initialState:Iee,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Pee,setLayout:Ree,setChartSize:kee,setScale:Dee}=O3.actions,Mee=O3.reducer;function I3(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function pt(t){return Number.isFinite(t)}function Js(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function gP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gP(Object(n),!0).forEach(function(r){zee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zee(t,e,n){return(e=Lee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lee(t){var e=qee(t,"string");return typeof e=="symbol"?e:e+""}function qee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dn(t,e,n){return an(t)||an(e)?n:Xs(e)?ud(t,e,n):typeof e=="function"?e(t):n}var Uee=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:c,layout:u}=e;if((u==="vertical"||u==="horizontal"&&c==="middle")&&a!=="center"&&Pe(t[a]))return Hu(Hu({},t),{},{[a]:t[a]+(r||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&c!=="middle"&&Pe(t[c]))return Hu(Hu({},t),{},{[c]:t[c]+(i||0)})}return t},Xa=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",P3=(t,e,n,r)=>{if(r)return t.map(u=>u.coordinate);var i,a,c=t.map(u=>(u.coordinate===e&&(i=!0),u.coordinate===n&&(a=!0),u.coordinate));return i||c.push(e),a||c.push(n),c},R3=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:c,realScaleType:u,isCategorical:f,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:y,axisType:x}=t;if(!c)return null;var E=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/E:0;if(j=x==="angleAxis"&&a&&a.length>=2?Xr(a[0]-a[1])*2*j:j,g||y){var N=(g||y||[]).map((A,k)=>{var O=r?r.indexOf(A):A,C=c.map(O);return pt(C)?{coordinate:C+j,value:A,offset:j,index:k}:null}).filter(Jr);return N}return f&&h?h.map((A,k)=>{var O=c.map(A);return pt(O)?{coordinate:O+j,value:A,index:k,offset:j}:null}).filter(Jr):c.ticks&&p!=null?c.ticks(p).map((A,k)=>{var O=c.map(A);return pt(O)?{coordinate:O+j,value:A,index:k,offset:j}:null}).filter(Jr):c.domain().map((A,k)=>{var O=c.map(A);return pt(O)?{coordinate:O+j,value:r?r[A]:A,index:k,offset:j}:null}).filter(Jr)},Vee=(t,e)=>{if(!e||e.length!==2||!Pe(e[0])||!Pe(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Pe(t[0])||t[0]<n)&&(i[0]=n),(!Pe(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Bee=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,c=0,u=0;u<n;++u){var f=t[u],h=f?.[i];if(h!=null){var p=h[1],g=h[0],y=Ys(p)?g:p;y>=0?(h[0]=a,a+=y,h[1]=a):(h[0]=c,c+=y,h[1]=c)}}}},$ee=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,c=0;c<n;++c){var u=t[c],f=u?.[i];if(f!=null){var h=Ys(f[1])?f[0]:f[1];h>=0?(f[0]=a,a+=h,f[1]=a):(f[0]=0,f[1]=0)}}}},Fee={sign:Bee,expand:yJ,none:Ac,silhouette:bJ,wiggle:xJ,positive:$ee},Hee=(t,e,n)=>{var r,i=(r=Fee[n])!==null&&r!==void 0?r:Ac,a=vJ().keys(e).value((u,f)=>Number(Dn(u,f,0))).order(xw).offset(i),c=a(t);return c.forEach((u,f)=>{u.forEach((h,p)=>{var g=Dn(t[p],e[f],0);Array.isArray(g)&&g.length===2&&Pe(g[0])&&Pe(g[1])&&(h[0]=g[0],h[1]=g[1])})}),c};function Gee(t){return t==null?void 0:String(t)}function vP(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:c}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!an(i[e.dataKey])){var u=UL(n,"value",i[e.dataKey]);if(u)return u.coordinate+r/2}return n!=null&&n[a]?n[a].coordinate+r/2:null}var f=Dn(i,an(c)?e.dataKey:c),h=e.scale.map(f);return Pe(h)?h:null}var yP=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:c}=t;if(e.type==="category")return n[c]?n[c].coordinate+r:null;var u=Dn(a,e.dataKey,e.scale.domain()[c]);if(an(u))return null;var f=e.scale.map(u);return Pe(f)?f-i/2+r:null},Kee=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Qee=t=>{var e=t.flat(2).filter(Pe);return[Math.min(...e),Math.max(...e)]},Wee=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Yee=(t,e,n)=>{if(t!=null)return Wee(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:c}=a,u=c.reduce((f,h)=>{var p=I3(h,e,n),g=Qee(p);return!pt(g[0])||!pt(g[1])?f:[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},bP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fd=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Uy(e,p=>p.coordinate),a=1/0,c=1,u=i.length;c<u;c++){var f=i[c],h=i[c-1];a=Math.min((f?.coordinate||0)-(h?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function _P(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Hu(Hu({},e),{},{dataKey:n,payload:r,value:i,name:a})}function Yy(t,e){if(t)return String(t);if(typeof e=="string")return e}var Xee=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Jee=(t,e)=>e==="centric"?t.angle:t.radius,Ja=t=>t.layout.width,Za=t=>t.layout.height,Zee=t=>t.layout.scale,k3=t=>t.layout.margin,Xy=ue(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Jy=ue(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),ete="data-recharts-item-index",tte="data-recharts-item-id",mm=60;function wP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wP(Object(n),!0).forEach(function(r){nte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nte(t,e,n){return(e=rte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rte(t){var e=ite(t,"string");return typeof e=="symbol"?e:e+""}function ite(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ste=t=>t.brush.height;function ate(t){var e=Jy(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:mm;return n+i}return n},0)}function ote(t){var e=Jy(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:mm;return n+i}return n},0)}function lte(t){var e=Xy(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function cte(t){var e=Xy(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Zn=ue([Ja,Za,k3,ste,ate,ote,lte,cte,t3,kZ],(t,e,n,r,i,a,c,u,f,h)=>{var p={left:(n.left||0)+i,right:(n.right||0)+a},g={top:(n.top||0)+c,bottom:(n.bottom||0)+u},y=pg(pg({},g),p),x=y.bottom;y.bottom+=r,y=Uee(y,f,h);var E=t-y.left-y.right,j=e-y.top-y.bottom;return pg(pg({brushBottom:x},y),{},{width:Math.max(E,0),height:Math.max(j,0)})}),ute=ue(Zn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),XE=ue(Ja,Za,(t,e)=>({x:0,y:0,width:t,height:e})),dte=w.createContext(null),Er=()=>w.useContext(dte)!=null,Zy=t=>t.brush,e0=ue([Zy,Zn,k3],(t,e,n)=>({height:t.height,x:Pe(t.x)?t.x:e.left,y:Pe(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Pe(t.width)?t.width:e.width})),Z_={},e1={},t1={},jP;function fte(){return jP||(jP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let c,u=null;const f=a!=null&&a.includes("leading"),h=a==null||a.includes("trailing"),p=()=>{u!==null&&(n.apply(c,u),c=void 0,u=null)},g=()=>{h&&p(),j()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},r)},E=()=>{y!==null&&(clearTimeout(y),y=null)},j=()=>{E(),c=void 0,u=null},N=()=>{p()},A=function(...k){if(i?.aborted)return;c=this,u=k;const O=y==null;x(),f&&O&&p()};return A.schedule=x,A.cancel=j,A.flush=N,i?.addEventListener("abort",j,{once:!0}),A}t.debounce=e})(t1)),t1}var EP;function hte(){return EP||(EP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fte();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:c=!1,trailing:u=!0,maxWait:f}=a,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let p,g=null;const y=e.debounce(function(...j){p=r.apply(this,j),g=null},i,{edges:h}),x=function(...j){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(p=r.apply(this,j),g=Date.now(),y.cancel(),y.schedule(),p):(y.apply(this,j),p)},E=()=>(y.flush(),p);return x.cancel=y.cancel,x.flush=E,x}t.debounce=n})(e1)),e1}var NP;function mte(){return NP||(NP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hte();function n(r,i=0,a={}){const{leading:c=!0,trailing:u=!0}=a;return e.debounce(r,i,{leading:c,maxWait:i,trailing:u})}t.throttle=n})(Z_)),Z_}var n1,SP;function pte(){return SP||(SP=1,n1=mte().throttle),n1}var gte=pte();const vte=ea(gte);var Tv=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(n.replace(/%s/g,()=>i[c++]))}},qs={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},D3=(t,e,n)=>{var{width:r=qs.width,height:i=qs.height,aspect:a,maxHeight:c}=n,u=Tc(r)?t:Number(r),f=Tc(i)?e:Number(i);return a&&a>0&&(u?f=u/a:f&&(u=f*a),c&&f!=null&&f>c&&(f=c)),{calculatedWidth:u,calculatedHeight:f}},yte={width:0,height:0,overflow:"visible"},bte={width:0,overflowX:"visible"},xte={height:0,overflowY:"visible"},_te={},wte=t=>{var{width:e,height:n}=t,r=Tc(e),i=Tc(n);return r&&i?yte:r?bte:i?xte:_te};function jte(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=qs.width,a=qs.height):i===void 0?i=r&&r>0?void 0:qs.width:a===void 0&&(a=r&&r>0?void 0:qs.height),{width:i,height:a}}function Pw(){return Pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pw.apply(null,arguments)}function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(r){Ete(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ete(t,e,n){return(e=Nte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nte(t){var e=Ste(t,"string");return typeof e=="symbol"?e:e+""}function Ste(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M3=w.createContext(qs.initialDimension);function Ate(t){return Js(t.width)&&Js(t.height)}function z3(t){var{children:e,width:n,height:r}=t,i=w.useMemo(()=>({width:n,height:r}),[n,r]);return Ate(i)?w.createElement(M3.Provider,{value:i},e):null}var JE=()=>w.useContext(M3),Tte=w.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=qs.initialDimension,width:i,height:a,minWidth:c=qs.minWidth,minHeight:u,maxHeight:f,children:h,debounce:p=qs.debounce,id:g,className:y,onResize:x,style:E={}}=t,j=w.useRef(null),N=w.useRef();N.current=x,w.useImperativeHandle(e,()=>j.current);var[A,k]=w.useState({containerWidth:r.width,containerHeight:r.height}),O=w.useCallback((P,R)=>{k(q=>{var L=Math.round(P),M=Math.round(R);return q.containerWidth===L&&q.containerHeight===M?q:{containerWidth:L,containerHeight:M}})},[]);w.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Uc;var P=M=>{var U,ge=M[0];if(ge!=null){var{width:Z,height:H}=ge.contentRect;O(Z,H),(U=N.current)===null||U===void 0||U.call(N,Z,H)}};p>0&&(P=vte(P,p,{trailing:!0,leading:!1}));var R=new ResizeObserver(P),{width:q,height:L}=j.current.getBoundingClientRect();return O(q,L),R.observe(j.current),()=>{R.disconnect()}},[O,p]);var{containerWidth:C,containerHeight:V}=A;Tv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:$,calculatedHeight:D}=D3(C,V,{width:i,height:a,aspect:n,maxHeight:f});return Tv($!=null&&$>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,D,i,a,c,u,n),w.createElement("div",{id:g?"".concat(g):void 0,className:Ut("recharts-responsive-container",y),style:TP(TP({},E),{},{width:i,height:a,minWidth:c,minHeight:u,maxHeight:f}),ref:j},w.createElement("div",{style:wte({width:i,height:a})},w.createElement(z3,{width:$,height:D},h)))}),CP=w.forwardRef((t,e)=>{var n=JE();if(Js(n.width)&&Js(n.height))return t.children;var{width:r,height:i}=jte({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:c}=D3(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Pe(a)&&Pe(c)?w.createElement(z3,{width:a,height:c},t.children):w.createElement(Tte,Pw({},t,{width:r,height:i,ref:e}))});function ZE(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var t0=()=>{var t,e=Er(),n=Le(ute),r=Le(e0),i=(t=Le(Zy))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Cte={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},L3=()=>{var t;return(t=Le(Zn))!==null&&t!==void 0?t:Cte},q3=()=>Le(Ja),U3=()=>Le(Za),Pt=t=>t.layout.layoutType,Vc=()=>Le(Pt),V3=()=>{var t=Vc();if(t==="horizontal"||t==="vertical")return t},B3=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},Ote=()=>{var t=Vc();return t!==void 0},pm=t=>{var e=jn(),n=Er(),{width:r,height:i}=t,a=JE(),c=r,u=i;return a&&(c=a.width>0?a.width:r,u=a.height>0?a.height:i),w.useEffect(()=>{!n&&Js(c)&&Js(u)&&e(kee({width:c,height:u}))},[e,n,c,u]),null},$3=Symbol.for("immer-nothing"),OP=Symbol.for("immer-draftable"),yi=Symbol.for("immer-state");function rs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Mh=Object.getPrototypeOf;function hd(t){return!!t&&!!t[yi]}function Oc(t){return t?F3(t)||Array.isArray(t)||!!t[OP]||!!t.constructor?.[OP]||gm(t)||r0(t):!1}var Ite=Object.prototype.constructor.toString(),IP=new WeakMap;function F3(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=IP.get(n);return r===void 0&&(r=Function.toString.call(n),IP.set(n,r)),r===Ite}function Cv(t,e,n=!0){n0(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function n0(t){const e=t[yi];return e?e.type_:Array.isArray(t)?1:gm(t)?2:r0(t)?3:0}function Rw(t,e){return n0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function H3(t,e,n){const r=n0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Pte(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function gm(t){return t instanceof Map}function r0(t){return t instanceof Set}function ic(t){return t.copy_||t.base_}function kw(t,e){if(gm(t))return new Map(t);if(r0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=F3(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[yi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const c=i[a],u=r[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(Mh(t),r)}else{const r=Mh(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function eN(t,e=!1){return i0(t)||hd(t)||!Oc(t)||(n0(t)>1&&Object.defineProperties(t,{set:gg,add:gg,clear:gg,delete:gg}),Object.freeze(t),e&&Object.values(t).forEach(n=>eN(n,!0))),t}function Rte(){rs(2)}var gg={value:Rte};function i0(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var kte={};function Ic(t){const e=kte[t];return e||rs(0,t),e}var zh;function G3(){return zh}function Dte(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function PP(t,e){e&&(Ic("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Dw(t){Mw(t),t.drafts_.forEach(Mte),t.drafts_=null}function Mw(t){t===zh&&(zh=t.parent_)}function RP(t){return zh=Dte(zh,t)}function Mte(t){const e=t[yi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function kP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[yi].modified_&&(Dw(e),rs(4)),Oc(t)&&(t=Ov(e,t),e.parent_||Iv(e,t)),e.patches_&&Ic("Patches").generateReplacementPatches_(n[yi].base_,t,e.patches_,e.inversePatches_)):t=Ov(e,n,[]),Dw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==$3?t:void 0}function Ov(t,e,n){if(i0(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[yi];if(!i)return Cv(e,(a,c)=>DP(t,i,e,a,c,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Iv(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let c=a,u=!1;i.type_===3&&(c=new Set(a),a.clear(),u=!0),Cv(c,(f,h)=>DP(t,i,a,f,h,n,u),r),Iv(t,a,!1),n&&t.patches_&&Ic("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function DP(t,e,n,r,i,a,c){if(i==null||typeof i!="object"&&!c)return;const u=i0(i);if(!(u&&!c)){if(hd(i)){const f=a&&e&&e.type_!==3&&!Rw(e.assigned_,r)?a.concat(r):void 0,h=Ov(t,i,f);if(H3(n,r,h),hd(h))t.canAutoFreeze_=!1;else return}else c&&n.add(i);if(Oc(i)&&!u){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&u)return;Ov(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(gm(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Iv(t,i)}}}function Iv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&eN(e,n)}function zte(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:G3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=tN;n&&(i=[r],a=Lh);const{revoke:c,proxy:u}=Proxy.revocable(i,a);return r.draft_=u,r.revoke_=c,u}var tN={get(t,e){if(e===yi)return t;const n=ic(t);if(!Rw(n,e))return Lte(t,n,e);const r=n[e];return t.finalized_||!Oc(r)?r:r===r1(t.base_,e)?(i1(t),t.copy_[e]=Lw(r,t)):r},has(t,e){return e in ic(t)},ownKeys(t){return Reflect.ownKeys(ic(t))},set(t,e,n){const r=K3(ic(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=r1(ic(t),e),a=i?.[yi];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Pte(n,i)&&(n!==void 0||Rw(t.base_,e)))return!0;i1(t),zw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return r1(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,i1(t),zw(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ic(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){rs(11)},getPrototypeOf(t){return Mh(t.base_)},setPrototypeOf(){rs(12)}},Lh={};Cv(tN,(t,e)=>{Lh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Lh.deleteProperty=function(t,e){return Lh.set.call(this,t,e,void 0)};Lh.set=function(t,e,n){return tN.set.call(this,t[0],e,n,t[0])};function r1(t,e){const n=t[yi];return(n?ic(n):t)[e]}function Lte(t,e,n){const r=K3(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function K3(t,e){if(!(e in t))return;let n=Mh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Mh(n)}}function zw(t){t.modified_||(t.modified_=!0,t.parent_&&zw(t.parent_))}function i1(t){t.copy_||(t.copy_=kw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var qte=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const c=this;return function(f=a,...h){return c.produce(f,p=>n.call(this,p,...h))}}typeof n!="function"&&rs(6),r!==void 0&&typeof r!="function"&&rs(7);let i;if(Oc(e)){const a=RP(this),c=Lw(e,void 0);let u=!0;try{i=n(c),u=!1}finally{u?Dw(a):Mw(a)}return PP(a,r),kP(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===$3&&(i=void 0),this.autoFreeze_&&eN(i,!0),r){const a=[],c=[];Ic("Patches").generateReplacementPatches_(e,i,a,c),r(a,c)}return i}else rs(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...u)=>this.produceWithPatches(c,f=>e(f,...u));let r,i;return[this.produce(e,n,(c,u)=>{r=c,i=u}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Oc(t)||rs(8),hd(t)&&(t=Ute(t));const e=RP(this),n=Lw(t,void 0);return n[yi].isManual_=!0,Mw(e),n}finishDraft(t,e){const n=t&&t[yi];(!n||!n.isManual_)&&rs(9);const{scope_:r}=n;return PP(r,e),kP(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Ic("Patches").applyPatches_;return hd(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Lw(t,e){const n=gm(t)?Ic("MapSet").proxyMap_(t,e):r0(t)?Ic("MapSet").proxySet_(t,e):zte(t,e);return(e?e.scope_:G3()).drafts_.push(n),n}function Ute(t){return hd(t)||rs(10,t),Q3(t)}function Q3(t){if(!Oc(t)||i0(t))return t;const e=t[yi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=kw(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=kw(t,!0);return Cv(n,(i,a)=>{H3(n,i,Q3(a))},r),e&&(e.finalized_=!1),n}var Vte=new qte;Vte.produce;var Bte={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},W3=ei({name:"legend",initialState:Bte,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Jt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ls(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Jt()},removeLegendPayload:{reducer(t,e){var n=ls(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Jt()}}}),{setLegendSize:Ive,setLegendSettings:Pve,addLegendPayload:$te,replaceLegendPayload:Fte,removeLegendPayload:Hte}=W3.actions,Gte=W3.reducer;function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qw.apply(null,arguments)}function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(n),!0).forEach(function(r){Kte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kte(t,e,n){return(e=Qte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qte(t){var e=Wte(t,"string");return typeof e=="symbol"?e:e+""}function Wte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yte(t){return Array.isArray(t)&&Xs(t[0])&&Xs(t[1])?t.join(" ~ "):t}var ku={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Xte=t=>{var{separator:e=ku.separator,contentStyle:n,itemStyle:r,labelStyle:i=ku.labelStyle,payload:a,formatter:c,itemSorter:u,wrapperClassName:f,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:y=ku.accessibilityLayer}=t,x=()=>{if(a&&a.length){var V={padding:0,margin:0},$=(u?Uy(a,u):a).map((D,P)=>{if(D.type==="none")return null;var R=D.formatter||c||Yte,{value:q,name:L}=D,M=q,U=L;if(R){var ge=R(q,L,D,P,a);if(Array.isArray(ge))[M,U]=ge;else if(ge!=null)M=ge;else return null}var Z=Bf(Bf({},ku.itemStyle),{},{color:D.color||ku.itemStyle.color},r);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:Z},Xs(U)?w.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Xs(U)?w.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,w.createElement("span",{className:"recharts-tooltip-item-value"},M),w.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:V},$)}return null},E=Bf(Bf({},ku.contentStyle),n),j=Bf({margin:0},i),N=!an(p),A=N?p:"",k=Ut("recharts-default-tooltip",f),O=Ut("recharts-tooltip-label",h);N&&g&&a!==void 0&&a!==null&&(A=g(p,a));var C=y?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",qw({className:k,style:E},C),w.createElement("p",{className:O,style:j},w.isValidElement(A)?A:"".concat(A)),x())},$f="recharts-tooltip-wrapper",Jte={visibility:"hidden"};function Zte(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ut($f,{["".concat($f,"-right")]:Pe(n)&&e&&Pe(e.x)&&n>=e.x,["".concat($f,"-left")]:Pe(n)&&e&&Pe(e.x)&&n<e.x,["".concat($f,"-bottom")]:Pe(r)&&e&&Pe(e.y)&&r>=e.y,["".concat($f,"-top")]:Pe(r)&&e&&Pe(e.y)&&r<e.y})}function zP(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:c,tooltipDimension:u,viewBox:f,viewBoxDimension:h}=t;if(a&&Pe(a[r]))return a[r];var p=n[r]-u-(i>0?i:0),g=n[r]+i;if(e[r])return c[r]?p:g;var y=f[r];if(y==null)return 0;if(c[r]){var x=p,E=y;return x<E?Math.max(g,y):Math.max(p,y)}if(h==null)return 0;var j=g+u,N=y+h;return j>N?Math.max(p,y):Math.max(g,y)}function ene(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function tne(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:c,tooltipBox:u,useTranslate3d:f,viewBox:h}=t,p,g,y;return u.height>0&&u.width>0&&n?(g=zP({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:c,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),y=zP({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:c,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),p=ene({translateX:g,translateY:y,useTranslate3d:f})):p=Jte,{cssProperties:p,cssClasses:Zte({translateX:g,translateY:y,coordinate:n})}}function LP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LP(Object(n),!0).forEach(function(r){Uw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uw(t,e,n){return(e=nne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nne(t){var e=rne(t,"string");return typeof e=="symbol"?e:e+""}function rne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ine extends w.PureComponent{constructor(){super(...arguments),Uw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Uw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:c,hasPayload:u,isAnimationActive:f,offset:h,position:p,reverseDirection:g,useTranslate3d:y,viewBox:x,wrapperStyle:E,lastBoundingBox:j,innerRef:N,hasPortalFromProps:A}=this.props,k=typeof h=="number"?h:h.x,O=typeof h=="number"?h:h.y,{cssClasses:C,cssProperties:V}=tne({allowEscapeViewBox:n,coordinate:c,offsetLeft:k,offsetTop:O,position:p,reverseDirection:g,tooltipBox:{height:j.height,width:j.width},useTranslate3d:y,viewBox:x}),$=A?{}:vg(vg({transition:f&&e?"transform ".concat(r,"ms ").concat(i):void 0},V),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=vg(vg({},$),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},E);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:D,ref:N},a)}}var Y3=()=>{var t;return(t=Le(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Vw(){return Vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vw.apply(null,arguments)}function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(r){sne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sne(t,e,n){return(e=ane(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ane(t){var e=one(t,"string");return typeof e=="symbol"?e:e+""}function one(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VP={curveBasisClosed:aJ,curveBasisOpen:oJ,curveBasis:sJ,curveBumpX:HX,curveBumpY:GX,curveLinearClosed:lJ,curveLinear:Ly,curveMonotoneX:cJ,curveMonotoneY:uJ,curveNatural:dJ,curveStep:fJ,curveStepAfter:mJ,curveStepBefore:hJ},Pv=t=>pt(t.x)&&pt(t.y),BP=t=>t.base!=null&&Pv(t.base)&&Pv(t),Ff=t=>t.x,Hf=t=>t.y,lne=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(dm(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=VP["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return VP[n]||Ly},$P={connectNulls:!1,type:"linear"},cne=t=>{var{type:e=$P.type,points:n=[],baseLine:r,layout:i,connectNulls:a=$P.connectNulls}=t,c=lne(e,i),u=a?n.filter(Pv):n;if(Array.isArray(r)){var f,h=n.map((E,j)=>UP(UP({},E),{},{base:r[j]}));i==="vertical"?f=cg().y(Hf).x1(Ff).x0(E=>E.base.x):f=cg().x(Ff).y1(Hf).y0(E=>E.base.y);var p=f.defined(BP).curve(c),g=a?h.filter(BP):h;return p(g)}var y;i==="vertical"&&Pe(r)?y=cg().y(Hf).x1(Ff).x0(r):Pe(r)?y=cg().x(Ff).y1(Hf).y0(r):y=AL().x(Ff).y(Hf);var x=y.defined(Pv).curve(c);return x(u)},X3=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=Vc();if((!n||!n.length)&&!r)return null;var c={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},u=n&&n.length?cne(c):r;return w.createElement("path",Vw({},ds(t),UE(t),{className:Ut("recharts-curve",e),d:u===null?void 0:u,ref:i}))},une=["x","y","top","left","width","height","className"];function Bw(){return Bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bw.apply(null,arguments)}function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){fne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fne(t,e,n){return(e=hne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hne(t){var e=mne(t,"string");return typeof e=="symbol"?e:e+""}function mne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pne(t,e){if(t==null)return{};var n,r,i=gne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function gne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vne=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),yne=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:c=0,className:u}=t,f=pne(t,une),h=dne({x:e,y:n,top:r,left:i,width:a,height:c},f);return!Pe(e)||!Pe(n)||!Pe(a)||!Pe(c)||!Pe(r)||!Pe(i)?null:w.createElement("path",Bw({},Rr(h),{className:Ut("recharts-cross",u),d:vne(e,n,a,c,r,i)}))};function bne(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function HP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(n),!0).forEach(function(r){xne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xne(t,e,n){return(e=_ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ne(t){var e=wne(t,"string");return typeof e=="symbol"?e:e+""}function wne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jne=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),J3=(t,e,n)=>t.map(r=>"".concat(jne(r)," ").concat(e,"ms ").concat(n)).join(","),Ene=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),qh=(t,e)=>Object.keys(e).reduce((n,r)=>GP(GP({},n),{},{[r]:t(r,e[r])}),{});function KP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(n),!0).forEach(function(r){Nne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nne(t,e,n){return(e=Sne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sne(t){var e=Ane(t,"string");return typeof e=="symbol"?e:e+""}function Ane(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rv=(t,e,n)=>t+(e-t)*n,$w=t=>{var{from:e,to:n}=t;return e!==n},Z3=(t,e,n)=>{var r=qh((i,a)=>{if($w(a)){var[c,u]=t(a.from,a.to,a.velocity);return qn(qn({},a),{},{from:c,velocity:u})}return a},e);return n<1?qh((i,a)=>$w(a)&&r[i]!=null?qn(qn({},a),{},{velocity:Rv(a.velocity,r[i].velocity,n),from:Rv(a.from,r[i].from,n)}):a,e):Z3(t,r,n-1)};function Tne(t,e,n,r,i,a){var c,u=r.reduce((y,x)=>qn(qn({},y),{},{[x]:{from:t[x],velocity:0,to:e[x]}}),{}),f=()=>qh((y,x)=>x.from,u),h=()=>!Object.values(u).filter($w).length,p=null,g=y=>{c||(c=y);var x=y-c,E=x/n.dt;u=Z3(n,u,E),i(qn(qn(qn({},t),e),f())),c=y,h()||(p=a.setTimeout(g))};return()=>(p=a.setTimeout(g),()=>{var y;(y=p)===null||y===void 0||y()})}function Cne(t,e,n,r,i,a,c){var u=null,f=i.reduce((g,y)=>{var x=t[y],E=e[y];return x==null||E==null?g:qn(qn({},g),{},{[y]:[x,E]})},{}),h,p=g=>{h||(h=g);var y=(g-h)/r,x=qh((j,N)=>Rv(...N,n(y)),f);if(a(qn(qn(qn({},t),e),x)),y<1)u=c.setTimeout(p);else{var E=qh((j,N)=>Rv(...N,n(1)),f);a(qn(qn(qn({},t),e),E))}};return()=>(u=c.setTimeout(p),()=>{var g;(g=u)===null||g===void 0||g()})}const One=(t,e,n,r,i,a)=>{var c=Ene(t,e);return n==null?()=>(i(qn(qn({},t),e)),()=>{}):n.isStepper===!0?Tne(t,e,n,c,i,a):Cne(t,e,n,r,c,i,a)};var kv=1e-4,e6=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],t6=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),QP=(t,e)=>n=>{var r=e6(t,e);return t6(r,n)},Ine=(t,e)=>n=>{var r=e6(t,e),i=[...r.map((a,c)=>a*c).slice(1),0];return t6(i,n)},Pne=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},Rne=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=Pne(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},kne=(t,e,n,r)=>{var i=QP(t,n),a=QP(e,r),c=Ine(t,n),u=h=>h>1?1:h<0?0:h,f=h=>{for(var p=h>1?1:h,g=p,y=0;y<8;++y){var x=i(g)-p,E=c(g);if(Math.abs(x-p)<kv||E<kv)return a(g);g=u(g-x/E)}return a(g)};return f.isStepper=!1,f},WP=function(){return kne(...Rne(...arguments))},Dne=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(c,u,f)=>{var h=-(c-u)*n,p=f*r,g=f+(h-p)*i/1e3,y=f*i/1e3+c;return Math.abs(y-u)<kv&&Math.abs(g)<kv?[u,0]:[y,g]};return a.isStepper=!0,a.dt=i,a},Mne=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return WP(t);case"spring":return Dne();default:if(t.split("(")[0]==="cubic-bezier")return WP(t)}return typeof t=="function"?t:null};function zne(t){var e,n=()=>null,r=!1,i=null,a=c=>{if(!r){if(Array.isArray(c)){if(!c.length)return;var u=c,[f,...h]=u;if(typeof f=="number"){i=t.setTimeout(a.bind(null,h),f);return}a(f),i=t.setTimeout(a.bind(null,h));return}typeof c=="string"&&(e=c,n(e)),typeof c=="object"&&(e=c,n(e)),typeof c=="function"&&c()}};return{stop:()=>{r=!0},start:c=>{r=!1,i&&(i(),i=null),a(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>t}}class Lne{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=c=>{c-r>=n?e(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function qne(){return zne(new Lne)}var Une=w.createContext(qne);function Vne(t,e){var n=w.useContext(Une);return w.useMemo(()=>e??n(t),[t,e,n])}var Bne=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),s0={isSsr:Bne()},$ne={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},YP={t:0},s1={t:1};function a0(t){var e=Mr(t,$ne),{isActive:n,canBegin:r,duration:i,easing:a,begin:c,onAnimationEnd:u,onAnimationStart:f,children:h}=e,p=n==="auto"?!s0.isSsr:n,g=Vne(e.animationId,e.animationManager),[y,x]=w.useState(p?YP:s1),E=w.useRef(null);return w.useEffect(()=>{p||x(s1)},[p]),w.useEffect(()=>{if(!p||!r)return Uc;var j=One(YP,s1,Mne(a),i,x,g.getTimeoutController()),N=()=>{E.current=j()};return g.start([f,c,N,i,u]),()=>{g.stop(),E.current&&E.current(),u()}},[p,r,i,a,c,f,u,g]),h(y.t)}function o0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=w.useRef(Ph(e)),r=w.useRef(t);return r.current!==t&&(n.current=Ph(e),r.current=t),n.current}var Fne=["radius"],Hne=["radius"],XP,JP,ZP,eR,tR,nR,rR,iR,sR,aR;function oR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oR(Object(n),!0).forEach(function(r){Gne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gne(t,e,n){return(e=Kne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kne(t){var e=Qne(t,"string");return typeof e=="symbol"?e:e+""}function Qne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dv(){return Dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dv.apply(null,arguments)}function cR(t,e){if(t==null)return{};var n,r,i=Wne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Rs(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var uR=(t,e,n,r,i)=>{var a=Jo(n),c=Jo(r),u=Math.min(Math.abs(a)/2,Math.abs(c)/2),f=c>=0?1:-1,h=a>=0?1:-1,p=c>=0&&a>=0||c<0&&a<0?1:0,g;if(u>0&&Array.isArray(i)){for(var y=[0,0,0,0],x=0,E=4;x<E;x++){var j,N=(j=i[x])!==null&&j!==void 0?j:0;y[x]=N>u?u:N}g=hn(XP||(XP=Rs(["M",",",""])),t,e+f*y[0]),y[0]>0&&(g+=hn(JP||(JP=Rs(["A ",",",",0,0,",",",",",""])),y[0],y[0],p,t+h*y[0],e)),g+=hn(ZP||(ZP=Rs(["L ",",",""])),t+n-h*y[1],e),y[1]>0&&(g+=hn(eR||(eR=Rs(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],p,t+n,e+f*y[1])),g+=hn(tR||(tR=Rs(["L ",",",""])),t+n,e+r-f*y[2]),y[2]>0&&(g+=hn(nR||(nR=Rs(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],p,t+n-h*y[2],e+r)),g+=hn(rR||(rR=Rs(["L ",",",""])),t+h*y[3],e+r),y[3]>0&&(g+=hn(iR||(iR=Rs(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],p,t,e+r-f*y[3])),g+="Z"}else if(u>0&&i===+i&&i>0){var A=Math.min(u,i);g=hn(sR||(sR=Rs(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+f*A,A,A,p,t+h*A,e,t+n-h*A,e,A,A,p,t+n,e+f*A,t+n,e+r-f*A,A,A,p,t+n-h*A,e+r,t+h*A,e+r,A,A,p,t,e+r-f*A)}else g=hn(aR||(aR=Rs(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return g},dR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},n6=t=>{var e=Mr(t,dR),n=w.useRef(null),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ce=n.current.getTotalLength();ce&&i(ce)}catch{}},[]);var{x:a,y:c,width:u,height:f,radius:h,className:p}=e,{animationEasing:g,animationDuration:y,animationBegin:x,isAnimationActive:E,isUpdateAnimationActive:j}=e,N=w.useRef(u),A=w.useRef(f),k=w.useRef(a),O=w.useRef(c),C=w.useMemo(()=>({x:a,y:c,width:u,height:f,radius:h}),[a,c,u,f,h]),V=o0(C,"rectangle-");if(a!==+a||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var $=Ut("recharts-rectangle",p);if(!j){var D=Rr(e),{radius:P}=D,R=cR(D,Fne);return w.createElement("path",Dv({},R,{x:Jo(a),y:Jo(c),width:Jo(u),height:Jo(f),radius:typeof h=="number"?h:void 0,className:$,d:uR(a,c,u,f,h)}))}var q=N.current,L=A.current,M=k.current,U=O.current,ge="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),H=J3(["strokeDasharray"],y,typeof g=="string"?g:dR.animationEasing);return w.createElement(a0,{animationId:V,key:V,canBegin:r>0,duration:y,easing:g,isActive:j,begin:x},ce=>{var Y=mn(q,u,ce),we=mn(L,f,ce),Q=mn(M,a,ce),F=mn(U,c,ce);n.current&&(N.current=Y,A.current=we,k.current=Q,O.current=F);var re;E?ce>0?re={transition:H,strokeDasharray:Z}:re={strokeDasharray:ge}:re={strokeDasharray:Z};var ye=Rr(e),{radius:Ee}=ye,J=cR(ye,Hne);return w.createElement("path",Dv({},J,{radius:typeof h=="number"?h:void 0,className:$,d:uR(Q,F,Y,we,h),ref:n,style:lR(lR({},re),e.style)}))})};function fR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(n),!0).forEach(function(r){Yne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yne(t,e,n){return(e=Xne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xne(t){var e=Jne(t,"string");return typeof e=="symbol"?e:e+""}function Jne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mv=Math.PI/180,Zne=t=>t*180/Math.PI,fr=(t,e,n,r)=>({x:t+Math.cos(-Mv*r)*n,y:e+Math.sin(-Mv*r)*n}),ere=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},tre=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},nre=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,c=tre({x:n,y:r},{x:i,y:a});if(c<=0)return{radius:c,angle:0};var u=(n-i)/c,f=Math.acos(u);return r>a&&(f=2*Math.PI-f),{radius:c,angle:Zne(f),angleInRadian:f}},rre=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},ire=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),c=Math.min(i,a);return t+c*360},sre=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=nre({x:n,y:r},e),{innerRadius:c,outerRadius:u}=e;if(i<c||i>u||i===0)return null;var{startAngle:f,endAngle:h}=rre(e),p=a,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?hR(hR({},e),{},{radius:i,angle:ire(p,e)}):null};function r6(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,c=fr(e,n,r,i),u=fr(e,n,r,a);return{points:[c,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var mR,pR,gR,vR,yR,bR,xR;function Fw(){return Fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fw.apply(null,arguments)}function oc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var are=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},yg=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:c,cornerRadius:u,cornerIsExternal:f}=t,h=u*(c?1:-1)+r,p=Math.asin(u/h)/Mv,g=f?i:i+a*p,y=fr(e,n,h,g),x=fr(e,n,r,g),E=f?i-a*p:i,j=fr(e,n,h*Math.cos(p*Mv),E);return{center:y,circleTangency:x,lineTangency:j,theta:p}},i6=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:c}=t,u=are(a,c),f=a+u,h=fr(e,n,i,a),p=fr(e,n,i,f),g=hn(mR||(mR=oc(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(a>f),p.x,p.y);if(r>0){var y=fr(e,n,r,a),x=fr(e,n,r,f);g+=hn(pR||(pR=oc(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,r,r,+(Math.abs(u)>180),+(a<=f),y.x,y.y)}else g+=hn(gR||(gR=oc(["L ",","," Z"])),e,n);return g},ore=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:h}=t,p=Xr(h-f),{circleTangency:g,lineTangency:y,theta:x}=yg({cx:e,cy:n,radius:i,angle:f,sign:p,cornerRadius:a,cornerIsExternal:u}),{circleTangency:E,lineTangency:j,theta:N}=yg({cx:e,cy:n,radius:i,angle:h,sign:-p,cornerRadius:a,cornerIsExternal:u}),A=u?Math.abs(f-h):Math.abs(f-h)-x-N;if(A<0)return c?hn(vR||(vR=oc(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,a,a,a*2,a,a,-a*2):i6({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:h});var k=hn(yR||(yR=oc(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,a,a,+(p<0),g.x,g.y,i,i,+(A>180),+(p<0),E.x,E.y,a,a,+(p<0),j.x,j.y);if(r>0){var{circleTangency:O,lineTangency:C,theta:V}=yg({cx:e,cy:n,radius:r,angle:f,sign:p,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:$,lineTangency:D,theta:P}=yg({cx:e,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),R=u?Math.abs(f-h):Math.abs(f-h)-V-P;if(R<0&&a===0)return"".concat(k,"L").concat(e,",").concat(n,"Z");k+=hn(bR||(bR=oc(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),D.x,D.y,a,a,+(p<0),$.x,$.y,r,r,+(R>180),+(p>0),O.x,O.y,a,a,+(p<0),C.x,C.y)}else k+=hn(xR||(xR=oc(["L",",","Z"])),e,n);return k},lre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},s6=t=>{var e=Mr(t,lre),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:p,className:g}=e;if(a<i||h===p)return null;var y=Ut("recharts-sector",g),x=a-i,E=fs(c,x,0,!0),j;return E>0&&Math.abs(h-p)<360?j=ore({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(E,x/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:p}):j=i6({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:h,endAngle:p}),w.createElement("path",Fw({},Rr(e),{className:y,d:j}))};function cre(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if($L(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:c,angle:u}=e,f=fr(r,i,a,u),h=fr(r,i,c,u);return[{x:f.x,y:f.y},{x:h.x,y:h.y}]}return r6(e)}}var a1={},o1={},l1={},_R;function ure(){return _R||(_R=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZL();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(l1)),l1}var wR;function dre(){return wR||(wR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ure();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(o1)),o1}var jR;function fre(){return jR||(jR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e3(),n=dre();function r(i,a,c){c&&typeof c!="number"&&e.isIterateeCall(i,a,c)&&(a=c=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),c=c===void 0?i<a?1:-1:n.toFinite(c);const u=Math.max(Math.ceil((a-i)/(c||1)),0),f=new Array(u);for(let h=0;h<u;h++)f[h]=i,i+=c;return f}t.range=r})(a1)),a1}var c1,ER;function hre(){return ER||(ER=1,c1=fre().range),c1}var mre=hre();const a6=ea(mre);function il(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pre(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nN(t){let e,n,r;t.length!==2?(e=il,n=(u,f)=>il(t(u),f),r=(u,f)=>t(u)-f):(e=t===il||t===pre?t:gre,n=t,r=t);function i(u,f,h=0,p=u.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;n(u[g],f)<0?h=g+1:p=g}while(h<p)}return h}function a(u,f,h=0,p=u.length){if(h<p){if(e(f,f)!==0)return p;do{const g=h+p>>>1;n(u[g],f)<=0?h=g+1:p=g}while(h<p)}return h}function c(u,f,h=0,p=u.length){const g=i(u,f,h,p-1);return g>h&&r(u[g-1],f)>-r(u[g],f)?g-1:g}return{left:i,center:c,right:a}}function gre(){return 0}function o6(t){return t===null?NaN:+t}function*vre(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const yre=nN(il),vm=yre.right;nN(o6).center;class NR extends Map{constructor(e,n=_re){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(SR(this,e))}has(e){return super.has(SR(this,e))}set(e,n){return super.set(bre(this,e),n)}delete(e){return super.delete(xre(this,e))}}function SR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function bre({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function xre({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function _re(t){return t!==null&&typeof t=="object"?t.valueOf():t}function wre(t=il){if(t===il)return l6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function l6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const jre=Math.sqrt(50),Ere=Math.sqrt(10),Nre=Math.sqrt(2);function zv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),c=a>=jre?10:a>=Ere?5:a>=Nre?2:1;let u,f,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(t*h),f=Math.round(e*h),u/h<t&&++u,f/h>e&&--f,h=-h):(h=Math.pow(10,i)*c,u=Math.round(t/h),f=Math.round(e/h),u*h<t&&++u,f*h>e&&--f),f<u&&.5<=n&&n<2?zv(t,e,n*2):[u,f,h]}function Hw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,c]=r?zv(e,t,n):zv(t,e,n);if(!(a>=i))return[];const u=a-i+1,f=new Array(u);if(r)if(c<0)for(let h=0;h<u;++h)f[h]=(a-h)/-c;else for(let h=0;h<u;++h)f[h]=(a-h)*c;else if(c<0)for(let h=0;h<u;++h)f[h]=(i+h)/-c;else for(let h=0;h<u;++h)f[h]=(i+h)*c;return f}function Gw(t,e,n){return e=+e,t=+t,n=+n,zv(t,e,n)[2]}function Kw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Gw(e,t,n):Gw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function AR(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function TR(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function c6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?l6:wre(i);r>n;){if(r-n>600){const f=r-n+1,h=e-n+1,p=Math.log(f),g=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*g*(f-g)/f)*(h-f/2<0?-1:1),x=Math.max(n,Math.floor(e-h*g/f+y)),E=Math.min(r,Math.floor(e+(f-h)*g/f+y));c6(t,e,x,E,i)}const a=t[e];let c=n,u=r;for(Gf(t,n,e),i(t[r],a)>0&&Gf(t,n,r);c<u;){for(Gf(t,c,u),++c,--u;i(t[c],a)<0;)++c;for(;i(t[u],a)>0;)--u}i(t[n],a)===0?Gf(t,n,u):(++u,Gf(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function Gf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Sre(t,e,n){if(t=Float64Array.from(vre(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return TR(t);if(e>=1)return AR(t);var r,i=(r-1)*e,a=Math.floor(i),c=AR(c6(t,a).subarray(0,a+1)),u=TR(t.subarray(a+1));return c+(u-c)*(i-a)}}function Are(t,e,n=o6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),c=+n(t[a],a,t),u=+n(t[a+1],a+1,t);return c+(u-c)*(i-a)}}function Tre(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function $i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function eo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Qw=Symbol("implicit");function rN(){var t=new NR,e=[],n=[],r=Qw;function i(a){let c=t.get(a);if(c===void 0){if(r!==Qw)return r;t.set(a,c=e.push(a)-1)}return n[c%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new NR;for(const c of a)t.has(c)||t.set(c,e.push(c)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return rN(e,n).unknown(r)},$i.apply(i,arguments),i}function iN(){var t=rN().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,c,u=!1,f=0,h=0,p=.5;delete t.unknown;function g(){var y=e().length,x=i<r,E=x?i:r,j=x?r:i;a=(j-E)/Math.max(1,y-f+h*2),u&&(a=Math.floor(a)),E+=(j-E-a*(y-f))*p,c=a*(1-f),u&&(E=Math.round(E),c=Math.round(c));var N=Tre(y).map(function(A){return E+a*A});return n(x?N.reverse():N)}return t.domain=function(y){return arguments.length?(e(y),g()):e()},t.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,g()},t.bandwidth=function(){return c},t.step=function(){return a},t.round=function(y){return arguments.length?(u=!!y,g()):u},t.padding=function(y){return arguments.length?(f=Math.min(1,h=+y),g()):f},t.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),g()):f},t.paddingOuter=function(y){return arguments.length?(h=+y,g()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),g()):p},t.copy=function(){return iN(e(),[r,i]).round(u).paddingInner(f).paddingOuter(h).align(p)},$i.apply(g(),arguments)}function u6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return u6(e())},t}function Cre(){return u6(iN.apply(null,arguments).paddingInner(1))}function sN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function d6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ym(){}var Uh=.7,Lv=1/Uh,ed="\\s*([+-]?\\d+)\\s*",Vh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ore=/^#([0-9a-f]{3,8})$/,Ire=new RegExp(`^rgb\\(${ed},${ed},${ed}\\)$`),Pre=new RegExp(`^rgb\\(${Ks},${Ks},${Ks}\\)$`),Rre=new RegExp(`^rgba\\(${ed},${ed},${ed},${Vh}\\)$`),kre=new RegExp(`^rgba\\(${Ks},${Ks},${Ks},${Vh}\\)$`),Dre=new RegExp(`^hsl\\(${Vh},${Ks},${Ks}\\)$`),Mre=new RegExp(`^hsla\\(${Vh},${Ks},${Ks},${Vh}\\)$`),CR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sN(ym,Bh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:OR,formatHex:OR,formatHex8:zre,formatHsl:Lre,formatRgb:IR,toString:IR});function OR(){return this.rgb().formatHex()}function zre(){return this.rgb().formatHex8()}function Lre(){return f6(this).formatHsl()}function IR(){return this.rgb().formatRgb()}function Bh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ore.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?PR(e):n===3?new Zr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?bg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?bg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ire.exec(t))?new Zr(e[1],e[2],e[3],1):(e=Pre.exec(t))?new Zr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Rre.exec(t))?bg(e[1],e[2],e[3],e[4]):(e=kre.exec(t))?bg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dre.exec(t))?DR(e[1],e[2]/100,e[3]/100,1):(e=Mre.exec(t))?DR(e[1],e[2]/100,e[3]/100,e[4]):CR.hasOwnProperty(t)?PR(CR[t]):t==="transparent"?new Zr(NaN,NaN,NaN,0):null}function PR(t){return new Zr(t>>16&255,t>>8&255,t&255,1)}function bg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zr(t,e,n,r)}function qre(t){return t instanceof ym||(t=Bh(t)),t?(t=t.rgb(),new Zr(t.r,t.g,t.b,t.opacity)):new Zr}function Ww(t,e,n,r){return arguments.length===1?qre(t):new Zr(t,e,n,r??1)}function Zr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}sN(Zr,Ww,d6(ym,{brighter(t){return t=t==null?Lv:Math.pow(Lv,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Uh:Math.pow(Uh,t),new Zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zr(vc(this.r),vc(this.g),vc(this.b),qv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RR,formatHex:RR,formatHex8:Ure,formatRgb:kR,toString:kR}));function RR(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}`}function Ure(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}${lc((isNaN(this.opacity)?1:this.opacity)*255)}`}function kR(){const t=qv(this.opacity);return`${t===1?"rgb(":"rgba("}${vc(this.r)}, ${vc(this.g)}, ${vc(this.b)}${t===1?")":`, ${t})`}`}function qv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lc(t){return t=vc(t),(t<16?"0":"")+t.toString(16)}function DR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new is(t,e,n,r)}function f6(t){if(t instanceof is)return new is(t.h,t.s,t.l,t.opacity);if(t instanceof ym||(t=Bh(t)),!t)return new is;if(t instanceof is)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),c=NaN,u=a-i,f=(a+i)/2;return u?(e===a?c=(n-r)/u+(n<r)*6:n===a?c=(r-e)/u+2:c=(e-n)/u+4,u/=f<.5?a+i:2-a-i,c*=60):u=f>0&&f<1?0:c,new is(c,u,f,t.opacity)}function Vre(t,e,n,r){return arguments.length===1?f6(t):new is(t,e,n,r??1)}function is(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}sN(is,Vre,d6(ym,{brighter(t){return t=t==null?Lv:Math.pow(Lv,t),new is(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uh:Math.pow(Uh,t),new is(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zr(u1(t>=240?t-240:t+120,i,r),u1(t,i,r),u1(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new is(MR(this.h),xg(this.s),xg(this.l),qv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qv(this.opacity);return`${t===1?"hsl(":"hsla("}${MR(this.h)}, ${xg(this.s)*100}%, ${xg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function MR(t){return t=(t||0)%360,t<0?t+360:t}function xg(t){return Math.max(0,Math.min(1,t||0))}function u1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const aN=t=>()=>t;function Bre(t,e){return function(n){return t+n*e}}function $re(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Fre(t){return(t=+t)==1?h6:function(e,n){return n-e?$re(e,n,t):aN(isNaN(e)?n:e)}}function h6(t,e){var n=e-t;return n?Bre(t,n):aN(isNaN(t)?e:t)}const zR=(function t(e){var n=Fre(e);function r(i,a){var c=n((i=Ww(i)).r,(a=Ww(a)).r),u=n(i.g,a.g),f=n(i.b,a.b),h=h6(i.opacity,a.opacity);return function(p){return i.r=c(p),i.g=u(p),i.b=f(p),i.opacity=h(p),i+""}}return r.gamma=t,r})(1);function Hre(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Gre(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Kre(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),c;for(c=0;c<r;++c)i[c]=Td(t[c],e[c]);for(;c<n;++c)a[c]=e[c];return function(u){for(c=0;c<r;++c)a[c]=i[c](u);return a}}function Qre(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Uv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Wre(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Td(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Yw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d1=new RegExp(Yw.source,"g");function Yre(t){return function(){return t}}function Xre(t){return function(e){return t(e)+""}}function Jre(t,e){var n=Yw.lastIndex=d1.lastIndex=0,r,i,a,c=-1,u=[],f=[];for(t=t+"",e=e+"";(r=Yw.exec(t))&&(i=d1.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),u[c]?u[c]+=a:u[++c]=a),(r=r[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,f.push({i:c,x:Uv(r,i)})),n=d1.lastIndex;return n<e.length&&(a=e.slice(n),u[c]?u[c]+=a:u[++c]=a),u.length<2?f[0]?Xre(f[0].x):Yre(e):(e=f.length,function(h){for(var p=0,g;p<e;++p)u[(g=f[p]).i]=g.x(h);return u.join("")})}function Td(t,e){var n=typeof e,r;return e==null||n==="boolean"?aN(e):(n==="number"?Uv:n==="string"?(r=Bh(e))?(e=r,zR):Jre:e instanceof Bh?zR:e instanceof Date?Qre:Gre(e)?Hre:Array.isArray(e)?Kre:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Wre:Uv)(t,e)}function oN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Zre(t,e){e===void 0&&(e=t,t=Td);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(c){var u=Math.max(0,Math.min(r-1,Math.floor(c*=r)));return a[u](c-u)}}function eie(t){return function(){return t}}function Vv(t){return+t}var LR=[0,1];function Cr(t){return t}function Xw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:eie(isNaN(e)?NaN:.5)}function tie(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function nie(t,e,n){var r=t[0],i=t[1],a=e[0],c=e[1];return i<r?(r=Xw(i,r),a=n(c,a)):(r=Xw(r,i),a=n(a,c)),function(u){return a(r(u))}}function rie(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)i[c]=Xw(t[c],t[c+1]),a[c]=n(e[c],e[c+1]);return function(u){var f=vm(t,u,1,r)-1;return a[f](i[f](u))}}function bm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function l0(){var t=LR,e=LR,n=Td,r,i,a,c=Cr,u,f,h;function p(){var y=Math.min(t.length,e.length);return c!==Cr&&(c=tie(t[0],t[y-1])),u=y>2?rie:nie,f=h=null,g}function g(y){return y==null||isNaN(y=+y)?a:(f||(f=u(t.map(r),e,n)))(r(c(y)))}return g.invert=function(y){return c(i((h||(h=u(e,t.map(r),Uv)))(y)))},g.domain=function(y){return arguments.length?(t=Array.from(y,Vv),p()):t.slice()},g.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},g.rangeRound=function(y){return e=Array.from(y),n=oN,p()},g.clamp=function(y){return arguments.length?(c=y?!0:Cr,p()):c!==Cr},g.interpolate=function(y){return arguments.length?(n=y,p()):n},g.unknown=function(y){return arguments.length?(a=y,g):a},function(y,x){return r=y,i=x,p()}}function lN(){return l0()(Cr,Cr)}function iie(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Bv(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function md(t){return t=Bv(Math.abs(t)),t?t[1]:NaN}function sie(t,e){return function(n,r){for(var i=n.length,a=[],c=0,u=t[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),a.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=t[c=(c+1)%t.length];return a.reverse().join(e)}}function aie(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var oie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $h(t){if(!(e=oie.exec(t)))throw new Error("invalid format: "+t);var e;return new cN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}$h.prototype=cN.prototype;function cN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}cN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lie(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var $v;function cie(t,e){var n=Bv(t,e);if(!n)return $v=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-($v=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return a===c?r:a>c?r+new Array(a-c+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Bv(t,Math.max(0,e+a-1))[0]}function qR(t,e){var n=Bv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const UR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:iie,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qR(t*100,e),r:qR,s:cie,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function VR(t){return t}var BR=Array.prototype.map,$R=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uie(t){var e=t.grouping===void 0||t.thousands===void 0?VR:sie(BR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?VR:aie(BR.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function h(g,y){g=$h(g);var x=g.fill,E=g.align,j=g.sign,N=g.symbol,A=g.zero,k=g.width,O=g.comma,C=g.precision,V=g.trim,$=g.type;$==="n"?(O=!0,$="g"):UR[$]||(C===void 0&&(C=12),V=!0,$="g"),(A||x==="0"&&E==="=")&&(A=!0,x="0",E="=");var D=(y&&y.prefix!==void 0?y.prefix:"")+(N==="$"?n:N==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():""),P=(N==="$"?r:/[%p]/.test($)?c:"")+(y&&y.suffix!==void 0?y.suffix:""),R=UR[$],q=/[defgprs%]/.test($);C=C===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function L(M){var U=D,ge=P,Z,H,ce;if($==="c")ge=R(M)+ge,M="";else{M=+M;var Y=M<0||1/M<0;if(M=isNaN(M)?f:R(Math.abs(M),C),V&&(M=lie(M)),Y&&+M==0&&j!=="+"&&(Y=!1),U=(Y?j==="("?j:u:j==="-"||j==="("?"":j)+U,ge=($==="s"&&!isNaN(M)&&$v!==void 0?$R[8+$v/3]:"")+ge+(Y&&j==="("?")":""),q){for(Z=-1,H=M.length;++Z<H;)if(ce=M.charCodeAt(Z),48>ce||ce>57){ge=(ce===46?i+M.slice(Z+1):M.slice(Z))+ge,M=M.slice(0,Z);break}}}O&&!A&&(M=e(M,1/0));var we=U.length+M.length+ge.length,Q=we<k?new Array(k-we+1).join(x):"";switch(O&&A&&(M=e(Q+M,Q.length?k-ge.length:1/0),Q=""),E){case"<":M=U+M+ge+Q;break;case"=":M=U+Q+M+ge;break;case"^":M=Q.slice(0,we=Q.length>>1)+U+M+ge+Q.slice(we);break;default:M=Q+U+M+ge;break}return a(M)}return L.toString=function(){return g+""},L}function p(g,y){var x=Math.max(-8,Math.min(8,Math.floor(md(y)/3)))*3,E=Math.pow(10,-x),j=h((g=$h(g),g.type="f",g),{suffix:$R[8+x/3]});return function(N){return j(E*N)}}return{format:h,formatPrefix:p}}var _g,uN,m6;die({thousands:",",grouping:[3],currency:["$",""]});function die(t){return _g=uie(t),uN=_g.format,m6=_g.formatPrefix,_g}function fie(t){return Math.max(0,-md(Math.abs(t)))}function hie(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(md(e)/3)))*3-md(Math.abs(t)))}function mie(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,md(e)-md(t))+1}function p6(t,e,n,r){var i=Kw(t,e,n),a;switch(r=$h(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=hie(i,c))&&(r.precision=a),m6(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=mie(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=fie(i))&&(r.precision=a-(r.type==="%")*2);break}}return uN(r)}function El(t){var e=t.domain;return t.ticks=function(n){var r=e();return Hw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return p6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,c=r[i],u=r[a],f,h,p=10;for(u<c&&(h=c,c=u,u=h,h=i,i=a,a=h);p-- >0;){if(h=Gw(c,u,n),h===f)return r[i]=c,r[a]=u,e(r);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;f=h}return t},t}function g6(){var t=lN();return t.copy=function(){return bm(t,g6())},$i.apply(t,arguments),El(t)}function v6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Vv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return v6(t).unknown(e)},t=arguments.length?Array.from(t,Vv):[0,1],El(n)}function y6(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],c;return a<i&&(c=n,n=r,r=c,c=i,i=a,a=c),t[n]=e.floor(i),t[r]=e.ceil(a),t}function FR(t){return Math.log(t)}function HR(t){return Math.exp(t)}function pie(t){return-Math.log(-t)}function gie(t){return-Math.exp(-t)}function vie(t){return isFinite(t)?+("1e"+t):t<0?0:t}function yie(t){return t===10?vie:t===Math.E?Math.exp:e=>Math.pow(t,e)}function bie(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function GR(t){return(e,n)=>-t(-e,n)}function dN(t){const e=t(FR,HR),n=e.domain;let r=10,i,a;function c(){return i=bie(r),a=yie(r),n()[0]<0?(i=GR(i),a=GR(a),t(pie,gie)):t(FR,HR),e}return e.base=function(u){return arguments.length?(r=+u,c()):r},e.domain=function(u){return arguments.length?(n(u),c()):n()},e.ticks=u=>{const f=n();let h=f[0],p=f[f.length-1];const g=p<h;g&&([h,p]=[p,h]);let y=i(h),x=i(p),E,j;const N=u==null?10:+u;let A=[];if(!(r%1)&&x-y<N){if(y=Math.floor(y),x=Math.ceil(x),h>0){for(;y<=x;++y)for(E=1;E<r;++E)if(j=y<0?E/a(-y):E*a(y),!(j<h)){if(j>p)break;A.push(j)}}else for(;y<=x;++y)for(E=r-1;E>=1;--E)if(j=y>0?E/a(-y):E*a(y),!(j<h)){if(j>p)break;A.push(j)}A.length*2<N&&(A=Hw(h,p,N))}else A=Hw(y,x,Math.min(x-y,N)).map(a);return g?A.reverse():A},e.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=$h(f)).precision==null&&(f.trim=!0),f=uN(f)),u===1/0)return f;const h=Math.max(1,r*u/e.ticks().length);return p=>{let g=p/a(Math.round(i(p)));return g*r<r-.5&&(g*=r),g<=h?f(p):""}},e.nice=()=>n(y6(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),e}function b6(){const t=dN(l0()).domain([1,10]);return t.copy=()=>bm(t,b6()).base(t.base()),$i.apply(t,arguments),t}function KR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function QR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function fN(t){var e=1,n=t(KR(e),QR(e));return n.constant=function(r){return arguments.length?t(KR(e=+r),QR(e)):e},El(n)}function x6(){var t=fN(l0());return t.copy=function(){return bm(t,x6()).constant(t.constant())},$i.apply(t,arguments)}function WR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function xie(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _ie(t){return t<0?-t*t:t*t}function hN(t){var e=t(Cr,Cr),n=1;function r(){return n===1?t(Cr,Cr):n===.5?t(xie,_ie):t(WR(n),WR(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},El(e)}function mN(){var t=hN(l0());return t.copy=function(){return bm(t,mN()).exponent(t.exponent())},$i.apply(t,arguments),t}function wie(){return mN.apply(null,arguments).exponent(.5)}function YR(t){return Math.sign(t)*t*t}function jie(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function _6(){var t=lN(),e=[0,1],n=!1,r;function i(a){var c=jie(t(a));return isNaN(c)?r:n?Math.round(c):c}return i.invert=function(a){return t.invert(YR(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Vv)).map(YR)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return _6(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},$i.apply(i,arguments),El(i)}function w6(){var t=[],e=[],n=[],r;function i(){var c=0,u=Math.max(1,e.length);for(n=new Array(u-1);++c<u;)n[c-1]=Are(t,c/u);return a}function a(c){return c==null||isNaN(c=+c)?r:e[vm(n,c)]}return a.invertExtent=function(c){var u=e.indexOf(c);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},a.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let u of c)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(il),i()},a.range=function(c){return arguments.length?(e=Array.from(c),i()):e.slice()},a.unknown=function(c){return arguments.length?(r=c,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return w6().domain(t).range(e).unknown(r)},$i.apply(a,arguments)}function j6(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function c(f){return f!=null&&f<=f?i[vm(r,f,0,n)]:a}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return c}return c.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,u()):[t,e]},c.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},c.invertExtent=function(f){var h=i.indexOf(f);return h<0?[NaN,NaN]:h<1?[t,r[0]]:h>=n?[r[n-1],e]:[r[h-1],r[h]]},c.unknown=function(f){return arguments.length&&(a=f),c},c.thresholds=function(){return r.slice()},c.copy=function(){return j6().domain([t,e]).range(i).unknown(a)},$i.apply(El(c),arguments)}function E6(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[vm(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var c=e.indexOf(a);return[t[c-1],t[c]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return E6().domain(t).range(e).unknown(n)},$i.apply(i,arguments)}const f1=new Date,h1=new Date;function Bn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const c=i(a),u=i.ceil(a);return a-c<u-a?c:u},i.offset=(a,c)=>(e(a=new Date(+a),c==null?1:Math.floor(c)),a),i.range=(a,c,u)=>{const f=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<c)||!(u>0))return f;let h;do f.push(h=new Date(+a)),e(a,u),t(a);while(h<a&&a<c);return f},i.filter=a=>Bn(c=>{if(c>=c)for(;t(c),!a(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;e(c,-1),!a(c););else for(;--u>=0;)for(;e(c,1),!a(c););}),n&&(i.count=(a,c)=>(f1.setTime(+a),h1.setTime(+c),t(f1),t(h1),Math.floor(n(f1,h1))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?c=>r(c)%a===0:c=>i.count(0,c)%a===0):i)),i}const Fv=Bn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Fv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Bn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Fv);Fv.range;const Ca=1e3,Li=Ca*60,Oa=Li*60,Va=Oa*24,pN=Va*7,XR=Va*30,m1=Va*365,cc=Bn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ca)},(t,e)=>(e-t)/Ca,t=>t.getUTCSeconds());cc.range;const gN=Bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ca)},(t,e)=>{t.setTime(+t+e*Li)},(t,e)=>(e-t)/Li,t=>t.getMinutes());gN.range;const vN=Bn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Li)},(t,e)=>(e-t)/Li,t=>t.getUTCMinutes());vN.range;const yN=Bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ca-t.getMinutes()*Li)},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getHours());yN.range;const bN=Bn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Oa)},(t,e)=>(e-t)/Oa,t=>t.getUTCHours());bN.range;const xm=Bn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Li)/Va,t=>t.getDate()-1);xm.range;const c0=Bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Va,t=>t.getUTCDate()-1);c0.range;const N6=Bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Va,t=>Math.floor(t/Va));N6.range;function Bc(t){return Bn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Li)/pN)}const u0=Bc(0),Hv=Bc(1),Eie=Bc(2),Nie=Bc(3),pd=Bc(4),Sie=Bc(5),Aie=Bc(6);u0.range;Hv.range;Eie.range;Nie.range;pd.range;Sie.range;Aie.range;function $c(t){return Bn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/pN)}const d0=$c(0),Gv=$c(1),Tie=$c(2),Cie=$c(3),gd=$c(4),Oie=$c(5),Iie=$c(6);d0.range;Gv.range;Tie.range;Cie.range;gd.range;Oie.range;Iie.range;const xN=Bn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());xN.range;const _N=Bn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());_N.range;const Ba=Bn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ba.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ba.range;const $a=Bn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());$a.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});$a.range;function S6(t,e,n,r,i,a){const c=[[cc,1,Ca],[cc,5,5*Ca],[cc,15,15*Ca],[cc,30,30*Ca],[a,1,Li],[a,5,5*Li],[a,15,15*Li],[a,30,30*Li],[i,1,Oa],[i,3,3*Oa],[i,6,6*Oa],[i,12,12*Oa],[r,1,Va],[r,2,2*Va],[n,1,pN],[e,1,XR],[e,3,3*XR],[t,1,m1]];function u(h,p,g){const y=p<h;y&&([h,p]=[p,h]);const x=g&&typeof g.range=="function"?g:f(h,p,g),E=x?x.range(h,+p+1):[];return y?E.reverse():E}function f(h,p,g){const y=Math.abs(p-h)/g,x=nN(([,,N])=>N).right(c,y);if(x===c.length)return t.every(Kw(h/m1,p/m1,g));if(x===0)return Fv.every(Math.max(Kw(h,p,g),1));const[E,j]=c[y/c[x-1][2]<c[x][2]/y?x-1:x];return E.every(j)}return[u,f]}const[Pie,Rie]=S6($a,_N,d0,N6,bN,vN),[kie,Die]=S6(Ba,xN,u0,xm,yN,gN);function p1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function g1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Kf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Mie(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,c=t.shortDays,u=t.months,f=t.shortMonths,h=Qf(i),p=Wf(i),g=Qf(a),y=Wf(a),x=Qf(c),E=Wf(c),j=Qf(u),N=Wf(u),A=Qf(f),k=Wf(f),O={a:ce,A:Y,b:we,B:Q,c:null,d:rk,e:rk,f:sse,g:pse,G:vse,H:nse,I:rse,j:ise,L:A6,m:ase,M:ose,p:F,q:re,Q:ak,s:ok,S:lse,u:cse,U:use,V:dse,w:fse,W:hse,x:null,X:null,y:mse,Y:gse,Z:yse,"%":sk},C={a:ye,A:Ee,b:J,B:ne,c:null,d:ik,e:ik,f:wse,g:Pse,G:kse,H:bse,I:xse,j:_se,L:C6,m:jse,M:Ese,p:pe,q:De,Q:ak,s:ok,S:Nse,u:Sse,U:Ase,V:Tse,w:Cse,W:Ose,x:null,X:null,y:Ise,Y:Rse,Z:Dse,"%":sk},V={a:q,A:L,b:M,B:U,c:ge,d:tk,e:tk,f:Jie,g:ek,G:ZR,H:nk,I:nk,j:Qie,L:Xie,m:Kie,M:Wie,p:R,q:Gie,Q:ese,s:tse,S:Yie,u:Vie,U:Bie,V:$ie,w:Uie,W:Fie,x:Z,X:H,y:ek,Y:ZR,Z:Hie,"%":Zie};O.x=$(n,O),O.X=$(r,O),O.c=$(e,O),C.x=$(n,C),C.X=$(r,C),C.c=$(e,C);function $(se,X){return function(K){var fe=[],Te=-1,ze=0,ot=se.length,ht,gt,pr;for(K instanceof Date||(K=new Date(+K));++Te<ot;)se.charCodeAt(Te)===37&&(fe.push(se.slice(ze,Te)),(gt=JR[ht=se.charAt(++Te)])!=null?ht=se.charAt(++Te):gt=ht==="e"?" ":"0",(pr=X[ht])&&(ht=pr(K,gt)),fe.push(ht),ze=Te+1);return fe.push(se.slice(ze,Te)),fe.join("")}}function D(se,X){return function(K){var fe=Kf(1900,void 0,1),Te=P(fe,se,K+="",0),ze,ot;if(Te!=K.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(X&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(ze=g1(Kf(fe.y,0,1)),ot=ze.getUTCDay(),ze=ot>4||ot===0?Gv.ceil(ze):Gv(ze),ze=c0.offset(ze,(fe.V-1)*7),fe.y=ze.getUTCFullYear(),fe.m=ze.getUTCMonth(),fe.d=ze.getUTCDate()+(fe.w+6)%7):(ze=p1(Kf(fe.y,0,1)),ot=ze.getDay(),ze=ot>4||ot===0?Hv.ceil(ze):Hv(ze),ze=xm.offset(ze,(fe.V-1)*7),fe.y=ze.getFullYear(),fe.m=ze.getMonth(),fe.d=ze.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),ot="Z"in fe?g1(Kf(fe.y,0,1)).getUTCDay():p1(Kf(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(ot+5)%7:fe.w+fe.U*7-(ot+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,g1(fe)):p1(fe)}}function P(se,X,K,fe){for(var Te=0,ze=X.length,ot=K.length,ht,gt;Te<ze;){if(fe>=ot)return-1;if(ht=X.charCodeAt(Te++),ht===37){if(ht=X.charAt(Te++),gt=V[ht in JR?X.charAt(Te++):ht],!gt||(fe=gt(se,K,fe))<0)return-1}else if(ht!=K.charCodeAt(fe++))return-1}return fe}function R(se,X,K){var fe=h.exec(X.slice(K));return fe?(se.p=p.get(fe[0].toLowerCase()),K+fe[0].length):-1}function q(se,X,K){var fe=x.exec(X.slice(K));return fe?(se.w=E.get(fe[0].toLowerCase()),K+fe[0].length):-1}function L(se,X,K){var fe=g.exec(X.slice(K));return fe?(se.w=y.get(fe[0].toLowerCase()),K+fe[0].length):-1}function M(se,X,K){var fe=A.exec(X.slice(K));return fe?(se.m=k.get(fe[0].toLowerCase()),K+fe[0].length):-1}function U(se,X,K){var fe=j.exec(X.slice(K));return fe?(se.m=N.get(fe[0].toLowerCase()),K+fe[0].length):-1}function ge(se,X,K){return P(se,e,X,K)}function Z(se,X,K){return P(se,n,X,K)}function H(se,X,K){return P(se,r,X,K)}function ce(se){return c[se.getDay()]}function Y(se){return a[se.getDay()]}function we(se){return f[se.getMonth()]}function Q(se){return u[se.getMonth()]}function F(se){return i[+(se.getHours()>=12)]}function re(se){return 1+~~(se.getMonth()/3)}function ye(se){return c[se.getUTCDay()]}function Ee(se){return a[se.getUTCDay()]}function J(se){return f[se.getUTCMonth()]}function ne(se){return u[se.getUTCMonth()]}function pe(se){return i[+(se.getUTCHours()>=12)]}function De(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var X=$(se+="",O);return X.toString=function(){return se},X},parse:function(se){var X=D(se+="",!1);return X.toString=function(){return se},X},utcFormat:function(se){var X=$(se+="",C);return X.toString=function(){return se},X},utcParse:function(se){var X=D(se+="",!0);return X.toString=function(){return se},X}}}var JR={"-":"",_:" ",0:"0"},er=/^\s*\d+/,zie=/^%/,Lie=/[\\^$*+?|[\]().{}]/g;function _t(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function qie(t){return t.replace(Lie,"\\$&")}function Qf(t){return new RegExp("^(?:"+t.map(qie).join("|")+")","i")}function Wf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Uie(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Vie(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Bie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function $ie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Fie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ZR(t,e,n){var r=er.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ek(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Hie(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Gie(t,e,n){var r=er.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Kie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function tk(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Qie(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function nk(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Wie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Yie(t,e,n){var r=er.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Xie(t,e,n){var r=er.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Jie(t,e,n){var r=er.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Zie(t,e,n){var r=zie.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ese(t,e,n){var r=er.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function tse(t,e,n){var r=er.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function rk(t,e){return _t(t.getDate(),e,2)}function nse(t,e){return _t(t.getHours(),e,2)}function rse(t,e){return _t(t.getHours()%12||12,e,2)}function ise(t,e){return _t(1+xm.count(Ba(t),t),e,3)}function A6(t,e){return _t(t.getMilliseconds(),e,3)}function sse(t,e){return A6(t,e)+"000"}function ase(t,e){return _t(t.getMonth()+1,e,2)}function ose(t,e){return _t(t.getMinutes(),e,2)}function lse(t,e){return _t(t.getSeconds(),e,2)}function cse(t){var e=t.getDay();return e===0?7:e}function use(t,e){return _t(u0.count(Ba(t)-1,t),e,2)}function T6(t){var e=t.getDay();return e>=4||e===0?pd(t):pd.ceil(t)}function dse(t,e){return t=T6(t),_t(pd.count(Ba(t),t)+(Ba(t).getDay()===4),e,2)}function fse(t){return t.getDay()}function hse(t,e){return _t(Hv.count(Ba(t)-1,t),e,2)}function mse(t,e){return _t(t.getFullYear()%100,e,2)}function pse(t,e){return t=T6(t),_t(t.getFullYear()%100,e,2)}function gse(t,e){return _t(t.getFullYear()%1e4,e,4)}function vse(t,e){var n=t.getDay();return t=n>=4||n===0?pd(t):pd.ceil(t),_t(t.getFullYear()%1e4,e,4)}function yse(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_t(e/60|0,"0",2)+_t(e%60,"0",2)}function ik(t,e){return _t(t.getUTCDate(),e,2)}function bse(t,e){return _t(t.getUTCHours(),e,2)}function xse(t,e){return _t(t.getUTCHours()%12||12,e,2)}function _se(t,e){return _t(1+c0.count($a(t),t),e,3)}function C6(t,e){return _t(t.getUTCMilliseconds(),e,3)}function wse(t,e){return C6(t,e)+"000"}function jse(t,e){return _t(t.getUTCMonth()+1,e,2)}function Ese(t,e){return _t(t.getUTCMinutes(),e,2)}function Nse(t,e){return _t(t.getUTCSeconds(),e,2)}function Sse(t){var e=t.getUTCDay();return e===0?7:e}function Ase(t,e){return _t(d0.count($a(t)-1,t),e,2)}function O6(t){var e=t.getUTCDay();return e>=4||e===0?gd(t):gd.ceil(t)}function Tse(t,e){return t=O6(t),_t(gd.count($a(t),t)+($a(t).getUTCDay()===4),e,2)}function Cse(t){return t.getUTCDay()}function Ose(t,e){return _t(Gv.count($a(t)-1,t),e,2)}function Ise(t,e){return _t(t.getUTCFullYear()%100,e,2)}function Pse(t,e){return t=O6(t),_t(t.getUTCFullYear()%100,e,2)}function Rse(t,e){return _t(t.getUTCFullYear()%1e4,e,4)}function kse(t,e){var n=t.getUTCDay();return t=n>=4||n===0?gd(t):gd.ceil(t),_t(t.getUTCFullYear()%1e4,e,4)}function Dse(){return"+0000"}function sk(){return"%"}function ak(t){return+t}function ok(t){return Math.floor(+t/1e3)}var Du,I6,P6;Mse({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Mse(t){return Du=Mie(t),I6=Du.format,Du.parse,P6=Du.utcFormat,Du.utcParse,Du}function zse(t){return new Date(t)}function Lse(t){return t instanceof Date?+t:+new Date(+t)}function wN(t,e,n,r,i,a,c,u,f,h){var p=lN(),g=p.invert,y=p.domain,x=h(".%L"),E=h(":%S"),j=h("%I:%M"),N=h("%I %p"),A=h("%a %d"),k=h("%b %d"),O=h("%B"),C=h("%Y");function V($){return(f($)<$?x:u($)<$?E:c($)<$?j:a($)<$?N:r($)<$?i($)<$?A:k:n($)<$?O:C)($)}return p.invert=function($){return new Date(g($))},p.domain=function($){return arguments.length?y(Array.from($,Lse)):y().map(zse)},p.ticks=function($){var D=y();return t(D[0],D[D.length-1],$??10)},p.tickFormat=function($,D){return D==null?V:h(D)},p.nice=function($){var D=y();return(!$||typeof $.range!="function")&&($=e(D[0],D[D.length-1],$??10)),$?y(y6(D,$)):p},p.copy=function(){return bm(p,wN(t,e,n,r,i,a,c,u,f,h))},p}function qse(){return $i.apply(wN(kie,Die,Ba,xN,u0,xm,yN,gN,cc,I6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Use(){return $i.apply(wN(Pie,Rie,$a,_N,d0,c0,bN,vN,cc,P6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function f0(){var t=0,e=1,n,r,i,a,c=Cr,u=!1,f;function h(g){return g==null||isNaN(g=+g)?f:c(i===0?.5:(g=(a(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e]=g,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),h):[t,e]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(y){var x,E;return arguments.length?([x,E]=y,c=g(x,E),h):[c(0),c(1)]}}return h.range=p(Td),h.rangeRound=p(oN),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return a=g,n=g(t),r=g(e),i=n===r?0:1/(r-n),h}}function Nl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function R6(){var t=El(f0()(Cr));return t.copy=function(){return Nl(t,R6())},eo.apply(t,arguments)}function k6(){var t=dN(f0()).domain([1,10]);return t.copy=function(){return Nl(t,k6()).base(t.base())},eo.apply(t,arguments)}function D6(){var t=fN(f0());return t.copy=function(){return Nl(t,D6()).constant(t.constant())},eo.apply(t,arguments)}function jN(){var t=hN(f0());return t.copy=function(){return Nl(t,jN()).exponent(t.exponent())},eo.apply(t,arguments)}function Vse(){return jN.apply(null,arguments).exponent(.5)}function M6(){var t=[],e=Cr;function n(r){if(r!=null&&!isNaN(r=+r))return e((vm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(il),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Sre(t,a/r))},n.copy=function(){return M6(e).domain(t)},eo.apply(n,arguments)}function h0(){var t=0,e=.5,n=1,r=1,i,a,c,u,f,h=Cr,p,g=!1,y;function x(j){return isNaN(j=+j)?y:(j=.5+((j=+p(j))-a)*(r*j<r*a?u:f),h(g?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=p(t=+t),a=p(e=+e),c=p(n=+n),u=i===a?0:.5/(a-i),f=a===c?0:.5/(c-a),r=a<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(g=!!j,x):g},x.interpolator=function(j){return arguments.length?(h=j,x):h};function E(j){return function(N){var A,k,O;return arguments.length?([A,k,O]=N,h=Zre(j,[A,k,O]),x):[h(0),h(.5),h(1)]}}return x.range=E(Td),x.rangeRound=E(oN),x.unknown=function(j){return arguments.length?(y=j,x):y},function(j){return p=j,i=j(t),a=j(e),c=j(n),u=i===a?0:.5/(a-i),f=a===c?0:.5/(c-a),r=a<i?-1:1,x}}function z6(){var t=El(h0()(Cr));return t.copy=function(){return Nl(t,z6())},eo.apply(t,arguments)}function L6(){var t=dN(h0()).domain([.1,1,10]);return t.copy=function(){return Nl(t,L6()).base(t.base())},eo.apply(t,arguments)}function q6(){var t=fN(h0());return t.copy=function(){return Nl(t,q6()).constant(t.constant())},eo.apply(t,arguments)}function EN(){var t=hN(h0());return t.copy=function(){return Nl(t,EN()).exponent(t.exponent())},eo.apply(t,arguments)}function Bse(){return EN.apply(null,arguments).exponent(.5)}const oh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iN,scaleDiverging:z6,scaleDivergingLog:L6,scaleDivergingPow:EN,scaleDivergingSqrt:Bse,scaleDivergingSymlog:q6,scaleIdentity:v6,scaleImplicit:Qw,scaleLinear:g6,scaleLog:b6,scaleOrdinal:rN,scalePoint:Cre,scalePow:mN,scaleQuantile:w6,scaleQuantize:j6,scaleRadial:_6,scaleSequential:R6,scaleSequentialLog:k6,scaleSequentialPow:jN,scaleSequentialQuantile:M6,scaleSequentialSqrt:Vse,scaleSequentialSymlog:D6,scaleSqrt:wie,scaleSymlog:x6,scaleThreshold:E6,scaleTime:qse,scaleUtc:Use,tickFormat:p6},Symbol.toStringTag,{value:"Module"}));var to=t=>t.chartData,U6=ue([to],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),NN=(t,e,n,r)=>r?U6(t):to(t),$se=(t,e,n)=>n?U6(t):to(t);function Fa(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(pt(e)&&pt(n))return!0}return!1}function lk(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function V6(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(pt(n))i=n;else if(typeof n=="function")return;if(pt(r))a=r;else if(typeof r=="function")return;var c=[i,a];if(Fa(c))return c}}function Fse(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Fa(r))return lk(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,c,u;if(i==="auto")e!=null&&(c=Math.min(...e));else if(Pe(i))c=i;else if(typeof i=="function")try{e!=null&&(c=i(e?.[0]))}catch{}else if(typeof i=="string"&&bP.test(i)){var f=bP.exec(i);if(f==null||f[1]==null||e==null)c=void 0;else{var h=+f[1];c=e[0]-h}}else c=e?.[0];if(a==="auto")e!=null&&(u=Math.max(...e));else if(Pe(a))u=a;else if(typeof a=="function")try{e!=null&&(u=a(e?.[1]))}catch{}else if(typeof a=="string"&&xP.test(a)){var p=xP.exec(a);if(p==null||p[1]==null||e==null)u=void 0;else{var g=+p[1];u=e[1]+g}}else u=e?.[1];var y=[c,u];if(Fa(y))return e==null?y:lk(y,e,n)}}}var Cd=1e9,Hse={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},AN,Zt=!0,Vi="[DecimalError] ",yc=Vi+"Invalid argument: ",SN=Vi+"Exponent out of range: ",Od=Math.floor,sc=Math.pow,Gse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fi,Xn=1e7,Wt=7,B6=9007199254740991,Kv=Od(B6/Wt),Oe={};Oe.absoluteValue=Oe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Oe.comparedTo=Oe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Oe.decimalPlaces=Oe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Wt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Oe.dividedBy=Oe.div=function(t){return ka(this,new this.constructor(t))};Oe.dividedToIntegerBy=Oe.idiv=function(t){var e=this,n=e.constructor;return $t(ka(e,new n(t),0,1),n.precision)};Oe.equals=Oe.eq=function(t){return!this.cmp(t)};Oe.exponent=function(){return Mn(this)};Oe.greaterThan=Oe.gt=function(t){return this.cmp(t)>0};Oe.greaterThanOrEqualTo=Oe.gte=function(t){return this.cmp(t)>=0};Oe.isInteger=Oe.isint=function(){return this.e>this.d.length-2};Oe.isNegative=Oe.isneg=function(){return this.s<0};Oe.isPositive=Oe.ispos=function(){return this.s>0};Oe.isZero=function(){return this.s===0};Oe.lessThan=Oe.lt=function(t){return this.cmp(t)<0};Oe.lessThanOrEqualTo=Oe.lte=function(t){return this.cmp(t)<1};Oe.logarithm=Oe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(fi))throw Error(Vi+"NaN");if(n.s<1)throw Error(Vi+(n.s?"NaN":"-Infinity"));return n.eq(fi)?new r(0):(Zt=!1,e=ka(Fh(n,a),Fh(t,a),a),Zt=!0,$t(e,i))};Oe.minus=Oe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?H6(e,t):$6(e,(t.s=-t.s,t))};Oe.modulo=Oe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Vi+"NaN");return n.s?(Zt=!1,e=ka(n,t,0,1).times(t),Zt=!0,n.minus(e)):$t(new r(n),i)};Oe.naturalExponential=Oe.exp=function(){return F6(this)};Oe.naturalLogarithm=Oe.ln=function(){return Fh(this)};Oe.negated=Oe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Oe.plus=Oe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?$6(e,t):H6(e,(t.s=-t.s,t))};Oe.precision=Oe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(yc+t);if(e=Mn(i)+1,r=i.d.length-1,n=r*Wt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Oe.squareRoot=Oe.sqrt=function(){var t,e,n,r,i,a,c,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(Vi+"NaN")}for(t=Mn(u),Zt=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=Us(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Od((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new f(e)):r=new f(i.toString()),n=f.precision,i=c=n+3;;)if(a=r,r=a.plus(ka(u,a,c+2)).times(.5),Us(a.d).slice(0,c)===(e=Us(r.d)).slice(0,c)){if(e=e.slice(c-3,c+1),i==c&&e=="4999"){if($t(a,n+1,0),a.times(a).eq(u)){r=a;break}}else if(e!="9999")break;c+=4}return Zt=!0,$t(r,n)};Oe.times=Oe.mul=function(t){var e,n,r,i,a,c,u,f,h,p=this,g=p.constructor,y=p.d,x=(t=new g(t)).d;if(!p.s||!t.s)return new g(0);for(t.s*=p.s,n=p.e+t.e,f=y.length,h=x.length,f<h&&(a=y,y=x,x=a,c=f,f=h,h=c),a=[],c=f+h,r=c;r--;)a.push(0);for(r=h;--r>=0;){for(e=0,i=f+r;i>r;)u=a[i]+x[r]*y[i-r-1]+e,a[i--]=u%Xn|0,e=u/Xn|0;a[i]=(a[i]+e)%Xn|0}for(;!a[--c];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Zt?$t(t,g.precision):t};Oe.toDecimalPlaces=Oe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Zs(t,0,Cd),e===void 0?e=r.rounding:Zs(e,0,8),$t(n,t+Mn(n)+1,e))};Oe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Pc(r,!0):(Zs(t,0,Cd),e===void 0?e=i.rounding:Zs(e,0,8),r=$t(new i(r),t+1,e),n=Pc(r,!0,t+1)),n};Oe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Pc(i):(Zs(t,0,Cd),e===void 0?e=a.rounding:Zs(e,0,8),r=$t(new a(i),t+Mn(i)+1,e),n=Pc(r.abs(),!1,t+Mn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Oe.toInteger=Oe.toint=function(){var t=this,e=t.constructor;return $t(new e(t),Mn(t)+1,e.rounding)};Oe.toNumber=function(){return+this};Oe.toPower=Oe.pow=function(t){var e,n,r,i,a,c,u=this,f=u.constructor,h=12,p=+(t=new f(t));if(!t.s)return new f(fi);if(u=new f(u),!u.s){if(t.s<1)throw Error(Vi+"Infinity");return u}if(u.eq(fi))return u;if(r=f.precision,t.eq(fi))return $t(u,r);if(e=t.e,n=t.d.length-1,c=e>=n,a=u.s,c){if((n=p<0?-p:p)<=B6){for(i=new f(fi),e=Math.ceil(r/Wt+4),Zt=!1;n%2&&(i=i.times(u),uk(i.d,e)),n=Od(n/2),n!==0;)u=u.times(u),uk(u.d,e);return Zt=!0,t.s<0?new f(fi).div(i):$t(i,r)}}else if(a<0)throw Error(Vi+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,Zt=!1,i=t.times(Fh(u,r+h)),Zt=!0,i=F6(i),i.s=a,i};Oe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Mn(i),r=Pc(i,n<=a.toExpNeg||n>=a.toExpPos)):(Zs(t,1,Cd),e===void 0?e=a.rounding:Zs(e,0,8),i=$t(new a(i),t,e),n=Mn(i),r=Pc(i,t<=n||n<=a.toExpNeg,t)),r};Oe.toSignificantDigits=Oe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Zs(t,1,Cd),e===void 0?e=r.rounding:Zs(e,0,8)),$t(new r(n),t,e)};Oe.toString=Oe.valueOf=Oe.val=Oe.toJSON=Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Mn(t),n=t.constructor;return Pc(t,e<=n.toExpNeg||e>=n.toExpPos)};function $6(t,e){var n,r,i,a,c,u,f,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Zt?$t(e,g):e;if(f=t.d,h=e.d,c=t.e,i=e.e,f=f.slice(),a=c-i,a){for(a<0?(r=f,a=-a,u=h.length):(r=h,i=c,u=f.length),c=Math.ceil(g/Wt),u=c>u?c+1:u+1,a>u&&(a=u,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(u=f.length,a=h.length,u-a<0&&(a=u,r=h,h=f,f=r),n=0;a;)n=(f[--a]=f[a]+h[a]+n)/Xn|0,f[a]%=Xn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return e.d=f,e.e=i,Zt?$t(e,g):e}function Zs(t,e,n){if(t!==~~t||t<e||t>n)throw Error(yc+t)}function Us(t){var e,n,r,i=t.length-1,a="",c=t[0];if(i>0){for(a+=c,e=1;e<i;e++)r=t[e]+"",n=Wt-r.length,n&&(a+=Bo(n)),a+=r;c=t[e],r=c+"",n=Wt-r.length,n&&(a+=Bo(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return a+c}var ka=(function(){function t(r,i){var a,c=0,u=r.length;for(r=r.slice();u--;)a=r[u]*i+c,r[u]=a%Xn|0,c=a/Xn|0;return c&&r.unshift(c),r}function e(r,i,a,c){var u,f;if(a!=c)f=a>c?1:-1;else for(u=f=0;u<a;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,a){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*Xn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,c){var u,f,h,p,g,y,x,E,j,N,A,k,O,C,V,$,D,P,R=r.constructor,q=r.s==i.s?1:-1,L=r.d,M=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Vi+"Division by zero");for(f=r.e-i.e,D=M.length,V=L.length,x=new R(q),E=x.d=[],h=0;M[h]==(L[h]||0);)++h;if(M[h]>(L[h]||0)&&--f,a==null?k=a=R.precision:c?k=a+(Mn(r)-Mn(i))+1:k=a,k<0)return new R(0);if(k=k/Wt+2|0,h=0,D==1)for(p=0,M=M[0],k++;(h<V||p)&&k--;h++)O=p*Xn+(L[h]||0),E[h]=O/M|0,p=O%M|0;else{for(p=Xn/(M[0]+1)|0,p>1&&(M=t(M,p),L=t(L,p),D=M.length,V=L.length),C=D,j=L.slice(0,D),N=j.length;N<D;)j[N++]=0;P=M.slice(),P.unshift(0),$=M[0],M[1]>=Xn/2&&++$;do p=0,u=e(M,j,D,N),u<0?(A=j[0],D!=N&&(A=A*Xn+(j[1]||0)),p=A/$|0,p>1?(p>=Xn&&(p=Xn-1),g=t(M,p),y=g.length,N=j.length,u=e(g,j,y,N),u==1&&(p--,n(g,D<y?P:M,y))):(p==0&&(u=p=1),g=M.slice()),y=g.length,y<N&&g.unshift(0),n(j,g,N),u==-1&&(N=j.length,u=e(M,j,D,N),u<1&&(p++,n(j,D<N?P:M,N))),N=j.length):u===0&&(p++,j=[0]),E[h++]=p,u&&j[0]?j[N++]=L[C]||0:(j=[L[C]],N=1);while((C++<V||j[0]!==void 0)&&k--)}return E[0]||E.shift(),x.e=f,$t(x,c?a+Mn(x)+1:a)}})();function F6(t,e){var n,r,i,a,c,u,f=0,h=0,p=t.constructor,g=p.precision;if(Mn(t)>16)throw Error(SN+Mn(t));if(!t.s)return new p(fi);for(Zt=!1,u=g,c=new p(.03125);t.abs().gte(.1);)t=t.times(c),h+=5;for(r=Math.log(sc(2,h))/Math.LN10*2+5|0,u+=r,n=i=a=new p(fi),p.precision=u;;){if(i=$t(i.times(t),u),n=n.times(++f),c=a.plus(ka(i,n,u)),Us(c.d).slice(0,u)===Us(a.d).slice(0,u)){for(;h--;)a=$t(a.times(a),u);return p.precision=g,e==null?(Zt=!0,$t(a,g)):a}a=c}}function Mn(t){for(var e=t.e*Wt,n=t.d[0];n>=10;n/=10)e++;return e}function v1(t,e,n){if(e>t.LN10.sd())throw Zt=!0,n&&(t.precision=n),Error(Vi+"LN10 precision limit exceeded");return $t(new t(t.LN10),e)}function Bo(t){for(var e="";t--;)e+="0";return e}function Fh(t,e){var n,r,i,a,c,u,f,h,p,g=1,y=10,x=t,E=x.d,j=x.constructor,N=j.precision;if(x.s<1)throw Error(Vi+(x.s?"NaN":"-Infinity"));if(x.eq(fi))return new j(0);if(e==null?(Zt=!1,h=N):h=e,x.eq(10))return e==null&&(Zt=!0),v1(j,h);if(h+=y,j.precision=h,n=Us(E),r=n.charAt(0),a=Mn(x),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(t),n=Us(x.d),r=n.charAt(0),g++;a=Mn(x),r>1?(x=new j("0."+n),a++):x=new j(r+"."+n.slice(1))}else return f=v1(j,h+2,N).times(a+""),x=Fh(new j(r+"."+n.slice(1)),h-y).plus(f),j.precision=N,e==null?(Zt=!0,$t(x,N)):x;for(u=c=x=ka(x.minus(fi),x.plus(fi),h),p=$t(x.times(x),h),i=3;;){if(c=$t(c.times(p),h),f=u.plus(ka(c,new j(i),h)),Us(f.d).slice(0,h)===Us(u.d).slice(0,h))return u=u.times(2),a!==0&&(u=u.plus(v1(j,h+2,N).times(a+""))),u=ka(u,new j(g),h),j.precision=N,e==null?(Zt=!0,$t(u,N)):u;u=f,i+=2}}function ck(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Od(n/Wt),t.d=[],r=(n+1)%Wt,n<0&&(r+=Wt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Wt;r<i;)t.d.push(+e.slice(r,r+=Wt));e=e.slice(r),r=Wt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Zt&&(t.e>Kv||t.e<-Kv))throw Error(SN+n)}else t.s=0,t.e=0,t.d=[0];return t}function $t(t,e,n){var r,i,a,c,u,f,h,p,g=t.d;for(c=1,a=g[0];a>=10;a/=10)c++;if(r=e-c,r<0)r+=Wt,i=e,h=g[p=0];else{if(p=Math.ceil((r+1)/Wt),a=g.length,p>=a)return t;for(h=a=g[p],c=1;a>=10;a/=10)c++;r%=Wt,i=r-Wt+c}if(n!==void 0&&(a=sc(10,c-i-1),u=h/a%10|0,f=e<0||g[p+1]!==void 0||h%a,f=n<4?(u||f)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?h/sc(10,c-i):0:g[p-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return f?(a=Mn(t),g.length=1,e=e-a-1,g[0]=sc(10,(Wt-e%Wt)%Wt),t.e=Od(-e/Wt)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=p,a=1,p--):(g.length=p+1,a=sc(10,Wt-r),g[p]=i>0?(h/sc(10,c-i)%sc(10,i)|0)*a:0),f)for(;;)if(p==0){(g[0]+=a)==Xn&&(g[0]=1,++t.e);break}else{if(g[p]+=a,g[p]!=Xn)break;g[p--]=0,a=1}for(r=g.length;g[--r]===0;)g.pop();if(Zt&&(t.e>Kv||t.e<-Kv))throw Error(SN+Mn(t));return t}function H6(t,e){var n,r,i,a,c,u,f,h,p,g,y=t.constructor,x=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Zt?$t(e,x):e;if(f=t.d,g=e.d,r=e.e,h=t.e,f=f.slice(),c=h-r,c){for(p=c<0,p?(n=f,c=-c,u=g.length):(n=g,r=h,u=f.length),i=Math.max(Math.ceil(x/Wt),u)+2,c>i&&(c=i,n.length=1),n.reverse(),i=c;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=g.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(f[i]!=g[i]){p=f[i]<g[i];break}c=0}for(p&&(n=f,f=g,g=n,e.s=-e.s),u=f.length,i=g.length-u;i>0;--i)f[u++]=0;for(i=g.length;i>c;){if(f[--i]<g[i]){for(a=i;a&&f[--a]===0;)f[a]=Xn-1;--f[a],f[i]+=Xn}f[i]-=g[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(e.d=f,e.e=r,Zt?$t(e,x):e):new y(0)}function Pc(t,e,n){var r,i=Mn(t),a=Us(t.d),c=a.length;return e?(n&&(r=n-c)>0?a=a.charAt(0)+"."+a.slice(1)+Bo(r):c>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Bo(-i-1)+a,n&&(r=n-c)>0&&(a+=Bo(r))):i>=c?(a+=Bo(i+1-c),n&&(r=n-i-1)>0&&(a=a+"."+Bo(r))):((r=i+1)<c&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-c)>0&&(i+1===c&&(a+="."),a+=Bo(r))),t.s<0?"-"+a:a}function uk(t,e){if(t.length>e)return t.length=e,!0}function G6(t){var e,n,r;function i(a){var c=this;if(!(c instanceof i))return new i(a);if(c.constructor=i,a instanceof i){c.s=a.s,c.e=a.e,c.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(yc+a);if(a>0)c.s=1;else if(a<0)a=-a,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(a===~~a&&a<1e7){c.e=0,c.d=[a];return}return ck(c,a.toString())}else if(typeof a!="string")throw Error(yc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),c.s=-1):c.s=1,Gse.test(a))ck(c,a);else throw Error(yc+a)}if(i.prototype=Oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=G6,i.config=i.set=Kse,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Kse(t){if(!t||typeof t!="object")throw Error(Vi+"Object expected");var e,n,r,i=["precision",1,Cd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Od(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(yc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(yc+n+": "+r);return this}var AN=G6(Hse);fi=new AN(1);const It=AN;function K6(t){var e;return t===0?e=1:e=Math.floor(new It(t).abs().log(10).toNumber())+1,e}function Q6(t,e,n){for(var r=new It(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var W6=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Y6=(t,e,n)=>{if(t.lte(0))return new It(0);var r=K6(t.toNumber()),i=new It(10).pow(r),a=t.div(i),c=r!==1?.05:.1,u=new It(Math.ceil(a.div(c).toNumber())).add(n).mul(c),f=u.mul(i);return e?new It(f.toNumber()):new It(Math.ceil(f.toNumber()))},Qse=(t,e,n)=>{var r=new It(1),i=new It(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new It(10).pow(K6(t)-1),i=new It(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new It(Math.floor(t)))}else t===0?i=new It(Math.floor((e-1)/2)):n||(i=new It(Math.floor(t)));for(var c=Math.floor((e-1)/2),u=[],f=0;f<e;f++)u.push(i.add(new It(f-c).mul(r)).toNumber());return u},X6=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new It(0),tickMin:new It(0),tickMax:new It(0)};var c=Y6(new It(n).sub(e).div(r-1),i,a),u;e<=0&&n>=0?u=new It(0):(u=new It(e).add(n).div(2),u=u.sub(new It(u).mod(c)));var f=Math.ceil(u.sub(e).div(c).toNumber()),h=Math.ceil(new It(n).sub(u).div(c).toNumber()),p=f+h+1;return p>r?X6(e,n,r,i,a+1):(p<r&&(h=n>0?h+(r-p):h,f=n>0?f:f+(r-p)),{step:c,tickMin:u.sub(new It(f).mul(c)),tickMax:u.add(new It(h).mul(c))})},Wse=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,f]=W6([n,r]);if(u===-1/0||f===1/0){var h=f===1/0?[u,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),f];return n>r?h.reverse():h}if(u===f)return Qse(u,i,a);var{step:p,tickMin:g,tickMax:y}=X6(u,f,c,a,0),x=Q6(g,y.add(new It(.1).mul(p)),p);return n>r?x.reverse():x},Yse=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=W6([r,i]);if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var f=Math.max(n,2),h=Y6(new It(u).sub(c).div(f-1),a,0),p=[...Q6(new It(c),new It(u),h),u];return a===!1&&(p=p.map(g=>Math.round(g))),r>i?p.reverse():p},J6=t=>t.rootProps.maxBarSize,Xse=t=>t.rootProps.barGap,Z6=t=>t.rootProps.barCategoryGap,Jse=t=>t.rootProps.barSize,m0=t=>t.rootProps.stackOffset,e5=t=>t.rootProps.reverseStackOrder,TN=t=>t.options.chartName,CN=t=>t.rootProps.syncId,t5=t=>t.rootProps.syncMethod,ON=t=>t.options.eventEmitter,Jn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ec={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},ks={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},p0=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function g0(t,e,n){if(n!=="auto")return n;if(t!=null)return Xa(t,e)?"category":"number"}function dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(n),!0).forEach(function(r){Zse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zse(t,e,n){return(e=eae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eae(t){var e=tae(t,"string");return typeof e=="symbol"?e:e+""}function tae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fk={allowDataOverflow:ec.allowDataOverflow,allowDecimals:ec.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ec.angleAxisId,includeHidden:!1,name:void 0,reversed:ec.reversed,scale:ec.scale,tick:ec.tick,tickCount:void 0,ticks:void 0,type:ec.type,unit:void 0},hk={allowDataOverflow:ks.allowDataOverflow,allowDecimals:ks.allowDecimals,allowDuplicatedCategory:ks.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ks.radiusAxisId,includeHidden:ks.includeHidden,name:void 0,reversed:ks.reversed,scale:ks.scale,tick:ks.tick,tickCount:ks.tickCount,ticks:void 0,type:ks.type,unit:void 0},nae=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},IN=ue([nae,B3],(t,e)=>{var n;if(t!=null)return t;var r=(n=g0(e,"angleAxis",fk.type))!==null&&n!==void 0?n:"category";return Qv(Qv({},fk),{},{type:r})}),rae=(t,e)=>t.polarAxis.radiusAxis[e],PN=ue([rae,B3],(t,e)=>{var n;if(t!=null)return t;var r=(n=g0(e,"radiusAxis",hk.type))!==null&&n!==void 0?n:"category";return Qv(Qv({},hk),{},{type:r})}),v0=t=>t.polarOptions,RN=ue([Ja,Za,Zn],ere),n5=ue([v0,RN],(t,e)=>{if(t!=null)return fs(t.innerRadius,e,0)}),r5=ue([v0,RN],(t,e)=>{if(t!=null)return fs(t.outerRadius,e,e*.8)}),iae=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},i5=ue([v0],iae);ue([IN,i5],p0);var s5=ue([RN,n5,r5],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ue([PN,s5],p0);var a5=ue([Pt,v0,n5,r5,Ja,Za],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:c,cy:u,startAngle:f,endAngle:h}=e;return{cx:fs(c,i,i/2),cy:fs(u,a,a/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:h,clockWise:!1}}}),tr=(t,e)=>e,y0=(t,e,n)=>n;function kN(t){return t?.id}function o5(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,c=new Map;return t.forEach(u=>{var f,h=(f=u.data)!==null&&f!==void 0?f:r;if(!(h==null||h.length===0)){var p=kN(u);h.forEach((g,y)=>{var x=a==null||i?y:String(Dn(g,a,null)),E=Dn(g,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[p]:E}),c.set(x,j)})}}),Array.from(c.values())}function b0(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var x0=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function _0(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function sae(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var nr=t=>{var e=Pt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Id=t=>t.tooltip.settings.axisId;function aae(t){if(t in oh)return oh[t]();var e="scale".concat(dm(t));if(e in oh)return oh[e]()}function mk(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function c(){return a.apply(this,arguments)}return c.toString=function(){return a.toString()},c})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var c=i[0],u=i[1];return c<=u?a>=c&&a<=u:a>=u&&a<=c},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,c)=>{var u=t(a);if(u!=null){if(t.bandwidth&&c!==null&&c!==void 0&&c.position){var f=t.bandwidth();switch(c.position){case"middle":u+=f/2;break;case"end":u+=f;break}}return u}}}}function pk(t,e,n){if(typeof t=="function")return mk(t.copy().domain(e).range(n));if(t!=null){var r=aae(t);if(r!=null)return r.domain(e).range(n),mk(r)}}var oae=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Fa(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];pt(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gk(Object(n),!0).forEach(function(r){lae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lae(t,e,n){return(e=cae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cae(t){var e=uae(t,"string");return typeof e=="symbol"?e:e+""}function uae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jw=[0,"auto"],Qn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},l5=(t,e)=>t.cartesianAxis.xAxis[e],no=(t,e)=>{var n=l5(t,e);return n??Qn},Wn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Jw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:mm},c5=(t,e)=>t.cartesianAxis.yAxis[e],ro=(t,e)=>{var n=c5(t,e);return n??Wn},dae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},DN=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??dae},zr=(t,e,n)=>{switch(e){case"xAxis":return no(t,n);case"yAxis":return ro(t,n);case"zAxis":return DN(t,n);case"angleAxis":return IN(t,n);case"radiusAxis":return PN(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},fae=(t,e,n)=>{switch(e){case"xAxis":return no(t,n);case"yAxis":return ro(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},_m=(t,e,n)=>{switch(e){case"xAxis":return no(t,n);case"yAxis":return ro(t,n);case"angleAxis":return IN(t,n);case"radiusAxis":return PN(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},u5=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function d5(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var w0=t=>t.graphicalItems.cartesianItems,hae=ue([tr,y0],d5),f5=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),wm=ue([w0,zr,hae],f5,{memoizeOptions:{resultEqualityCheck:_0}}),h5=ue([wm],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(b0)),m5=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),mae=ue([wm],m5),p5=t=>t.map(e=>e.data).filter(Boolean).flat(1),pae=ue([wm],p5,{memoizeOptions:{resultEqualityCheck:_0}}),g5=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},MN=ue([pae,NN],g5),v5=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Dn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Dn(i,r)}))):t.map(r=>({value:r})),j0=ue([MN,zr,wm],v5);function y5(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Bg(t){if(Xs(t)||t instanceof Date){var e=Number(t);if(pt(e))return e}}function vk(t){if(Array.isArray(t)){var e=[Bg(t[0]),Bg(t[1])];return Fa(e)?e:void 0}var n=Bg(t);if(n!=null)return[n,n]}function Ha(t){return t.map(Bg).filter(Jr)}function gae(t,e,n){return!n||typeof e!="number"||Ys(e)?[]:n.length?Ha(n.flatMap(r=>{var i=Dn(t,r.dataKey),a,c;if(Array.isArray(i)?[a,c]=i:a=c=i,!(!pt(a)||!pt(c)))return[e-a,e+c]})):[]}var $n=t=>{var e=nr(t),n=Id(t);return _m(t,e,n)},jm=ue([$n],t=>t?.dataKey),vae=ue([h5,NN,$n],o5),b5=(t,e,n,r)=>{var i={},a=e.reduce((c,u)=>{if(u.stackId==null)return c;var f=c[u.stackId];return f==null&&(f=[]),f.push(u),c[u.stackId]=f,c},i);return Object.fromEntries(Object.entries(a).map(c=>{var[u,f]=c,h=r?[...f].reverse():f,p=h.map(kN);return[u,{stackedData:Hee(t,p,n),graphicalItems:h}]}))},Zw=ue([vae,h5,m0,e5],b5),x5=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var c=Yee(t,i,a);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},yae=ue([zr],t=>t.allowDataOverflow),zN=t=>{var e;if(t==null||!("domain"in t))return Jw;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Ha(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:Jw},_5=ue([zr],zN),w5=ue([_5,yae],V6),bae=ue([Zw,to,tr,w5],x5,{memoizeOptions:{resultEqualityCheck:x0}}),LN=t=>t.errorBars,xae=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>y5(n,r)),Yv=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),c=Math.min(...a),u=Math.max(...a);return[c,u]}},j5=(t,e,n,r,i)=>{var a,c;if(n.length>0&&t.forEach(u=>{n.forEach(f=>{var h,p,g=(h=r[f.id])===null||h===void 0?void 0:h.filter(A=>y5(i,A)),y=Dn(u,(p=e.dataKey)!==null&&p!==void 0?p:f.dataKey),x=gae(u,y,g);if(x.length>=2){var E=Math.min(...x),j=Math.max(...x);(a==null||E<a)&&(a=E),(c==null||j>c)&&(c=j)}var N=vk(y);N!=null&&(a=a==null?N[0]:Math.min(a,N[0]),c=c==null?N[1]:Math.max(c,N[1]))})}),e?.dataKey!=null&&t.forEach(u=>{var f=vk(Dn(u,e.dataKey));f!=null&&(a=a==null?f[0]:Math.min(a,f[0]),c=c==null?f[1]:Math.max(c,f[1]))}),pt(a)&&pt(c))return[a,c]},_ae=ue([MN,zr,mae,LN,tr],j5,{memoizeOptions:{resultEqualityCheck:x0}});function wae(t){var{value:e}=t;if(Xs(e)||e instanceof Date)return e}var jae=(t,e,n)=>{var r=t.map(wae).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&qL(r))?a6(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},E5=t=>t.referenceElements.dots,Pd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Eae=ue([E5,tr,y0],Pd),N5=t=>t.referenceElements.areas,Nae=ue([N5,tr,y0],Pd),S5=t=>t.referenceElements.lines,Sae=ue([S5,tr,y0],Pd),A5=(t,e)=>{if(t!=null){var n=Ha(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Aae=ue(Eae,tr,A5),T5=(t,e)=>{if(t!=null){var n=Ha(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Tae=ue([Nae,tr],T5);function Cae(t){var e;if(t.x!=null)return Ha([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Ha(n)}function Oae(t){var e;if(t.y!=null)return Ha([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Ha(n)}var C5=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?Cae(r):Oae(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Iae=ue([Sae,tr],C5),Pae=ue(Aae,Iae,Tae,(t,e,n)=>Yv(t,n,e)),O5=(t,e,n,r,i,a,c,u)=>{if(n!=null)return n;var f=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=f?Yv(r,a,i):Yv(a,i);return Fse(e,h,t.allowDataOverflow)},Rae=ue([zr,_5,w5,bae,_ae,Pae,Pt,tr],O5,{memoizeOptions:{resultEqualityCheck:x0}}),kae=[0,1],I5=(t,e,n,r,i,a,c)=>{if(!((t==null||n==null||n.length===0)&&c===void 0)){var{dataKey:u,type:f}=t,h=Xa(e,a);if(h&&u==null){var p;return a6(0,(p=n?.length)!==null&&p!==void 0?p:0)}return f==="category"?jae(r,t,h):i==="expand"?kae:c}},qN=ue([zr,Pt,MN,j0,m0,tr,Rae],I5);function Dae(t){return t in oh}var P5=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(dm(r));return Dae(a)?a:"point"}}},Rd=ue([zr,u5,TN],P5);function UN(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?pk(t.scale,n,r):pk(e,n,r)}var R5=(t,e,n)=>{var r=zN(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Fa(t))return Wse(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Fa(t))return Yse(t,e.tickCount,e.allowDecimals)}},VN=ue([qN,_m,Rd],R5),k5=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Fa(e)&&Array.isArray(n)&&n.length>0){var i,a,c=e[0],u=(i=n[0])!==null&&i!==void 0?i:0,f=e[1],h=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(c,u),Math.max(f,h)]}return e},Mae=ue([zr,qN,VN,tr],k5),zae=ue(j0,zr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Ha(t.map(g=>g.value))).sort((g,y)=>g-y),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var c=a-i;if(c===0)return 1/0;for(var u=0;u<r.length-1;u++){var f=r[u],h=r[u+1];if(!(f==null||h==null)){var p=h-f;n=Math.min(n,p)}}return n/c}}),D5=ue(zae,Pt,Z6,Zn,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!pt(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var c=fs(n,t*a),u=t*a/2;return u-c-(u-c)/a*c}return 0}),Lae=(t,e,n)=>{var r=no(t,e);return r==null||typeof r.padding!="string"?0:D5(t,"xAxis",e,n,r.padding)},qae=(t,e,n)=>{var r=ro(t,e);return r==null||typeof r.padding!="string"?0:D5(t,"yAxis",e,n,r.padding)},Uae=ue(no,Lae,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Vae=ue(ro,qae,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Bae=ue([Zn,Uae,e0,Zy,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),$ae=ue([Zn,Pt,Vae,e0,Zy,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:c}=i;return a?[r.height-c.bottom,c.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Em=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Bae(t,n,r);case"yAxis":return $ae(t,n,r);case"zAxis":return(i=DN(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return i5(t);case"radiusAxis":return s5(t,n);default:return}},M5=ue([zr,Em],p0),Fae=ue([Rd,Mae],oae),E0=ue([zr,Rd,Fae,M5],UN);ue([wm,LN,tr],xae);function z5(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var N0=(t,e)=>e,S0=(t,e,n)=>n,Hae=ue(Xy,N0,S0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(z5)),Gae=ue(Jy,N0,S0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(z5)),L5=(t,e)=>({width:t.width,height:e.height}),Kae=(t,e)=>{var n=typeof e.width=="number"?e.width:mm;return{width:n,height:t.height}},q5=ue(Zn,no,L5),Qae=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Wae=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Yae=ue(Za,Zn,Hae,N0,S0,(t,e,n,r,i)=>{var a={},c;return n.forEach(u=>{var f=L5(e,u);c==null&&(c=Qae(e,r,t));var h=r==="top"&&!i||r==="bottom"&&i;a[u.id]=c-Number(h)*f.height,c+=(h?-1:1)*f.height}),a}),Xae=ue(Ja,Zn,Gae,N0,S0,(t,e,n,r,i)=>{var a={},c;return n.forEach(u=>{var f=Kae(e,u);c==null&&(c=Wae(e,r,t));var h=r==="left"&&!i||r==="right"&&i;a[u.id]=c-Number(h)*f.width,c+=(h?-1:1)*f.width}),a}),Jae=(t,e)=>{var n=no(t,e);if(n!=null)return Yae(t,n.orientation,n.mirror)},Zae=ue([Zn,no,Jae,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),eoe=(t,e)=>{var n=ro(t,e);if(n!=null)return Xae(t,n.orientation,n.mirror)},toe=ue([Zn,ro,eoe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),U5=ue(Zn,ro,(t,e)=>{var n=typeof e.width=="number"?e.width:mm;return{width:n,height:t.height}}),yk=(t,e,n)=>{switch(e){case"xAxis":return q5(t,n).width;case"yAxis":return U5(t,n).height;default:return}},V5=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:c}=n,u=Xa(t,r),f=e.map(h=>h.value);if(c&&u&&a==="category"&&i&&qL(f))return f}},BN=ue([Pt,j0,zr,tr],V5),B5=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,c=Xa(t,r);if(c&&(i==="number"||a!=="auto"))return e.map(u=>u.value)}},$N=ue([Pt,j0,_m,tr],B5),bk=ue([Pt,fae,Rd,E0,BN,$N,Em,VN,tr],(t,e,n,r,i,a,c,u,f)=>{if(e!=null){var h=Xa(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:a,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:n,scale:r}}}),noe=(t,e,n,r,i,a,c,u,f)=>{if(!(e==null||r==null)){var h=Xa(t,f),{type:p,ticks:g,tickCount:y}=e,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,E=p==="category"&&r.bandwidth?r.bandwidth()/x:0;E=f==="angleAxis"&&a!=null&&a.length>=2?Xr(a[0]-a[1])*2*E:E;var j=g||i;return j?j.map((N,A)=>{var k=c?c.indexOf(N):N,O=r.map(k);return pt(O)?{index:A,coordinate:O+E,value:N,offset:E}:null}).filter(Jr):h&&u?u.map((N,A)=>{var k=r.map(N);return pt(k)?{coordinate:k+E,value:N,index:A,offset:E}:null}).filter(Jr):r.ticks?r.ticks(y).map((N,A)=>{var k=r.map(N);return pt(k)?{coordinate:k+E,value:N,index:A,offset:E}:null}).filter(Jr):r.domain().map((N,A)=>{var k=r.map(N);return pt(k)?{coordinate:k+E,value:c?c[N]:N,index:A,offset:E}:null}).filter(Jr)}},$5=ue([Pt,_m,Rd,E0,VN,Em,BN,$N,tr],noe),roe=(t,e,n,r,i,a,c)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=Xa(t,c),{tickCount:f}=e,h=0;return h=c==="angleAxis"&&r?.length>=2?Xr(r[0]-r[1])*2*h:h,u&&a?a.map((p,g)=>{var y=n.map(p);return pt(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(Jr):n.ticks?n.ticks(f).map((p,g)=>{var y=n.map(p);return pt(y)?{coordinate:y+h,value:p,index:g,offset:h}:null}).filter(Jr):n.domain().map((p,g)=>{var y=n.map(p);return pt(y)?{coordinate:y+h,value:i?i[p]:p,index:g,offset:h}:null}).filter(Jr)}},pl=ue([Pt,_m,E0,Em,BN,$N,tr],roe),gl=ue(zr,E0,(t,e)=>{if(!(t==null||e==null))return Wv(Wv({},t),{},{scale:e})}),ioe=ue([zr,Rd,qN,M5],UN);ue((t,e,n)=>DN(t,n),ioe,(t,e)=>{if(!(t==null||e==null))return Wv(Wv({},t),{},{scale:e})});var soe=ue([Pt,Xy,Jy],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),F5=t=>t.options.defaultTooltipEventType,H5=t=>t.options.validateTooltipEventTypes;function G5(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function FN(t,e){var n=F5(t),r=H5(t);return G5(e,n,r)}function aoe(t){return Le(e=>FN(e,t))}var K5=(t,e)=>{var n,r=Number(e);if(!(Ys(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},ooe=t=>t.tooltip.settings,Wo={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},loe={itemInteraction:{click:Wo,hover:Wo},axisInteraction:{click:Wo,hover:Wo},keyboardInteraction:Wo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Q5=ei({name:"tooltip",initialState:loe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Jt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ls(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Jt()},removeTooltipEntrySettings:{reducer(t,e){var n=ls(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Jt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:coe,replaceTooltipEntrySettings:uoe,removeTooltipEntrySettings:doe,setTooltipSettingsState:foe,setActiveMouseOverItemIndex:W5,mouseLeaveItem:hoe,mouseLeaveChart:Y5,setActiveClickItemIndex:moe,setMouseOverAxisIndex:X5,setMouseClickAxisIndex:poe,setSyncInteraction:ej,setKeyboardInteraction:tj}=Q5.actions,goe=Q5.reducer;function xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(n),!0).forEach(function(r){voe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function voe(t,e,n){return(e=yoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yoe(t){var e=boe(t,"string");return typeof e=="symbol"?e:e+""}function boe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xoe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function _oe(t){return t.index!=null}var J5=(t,e,n,r)=>{if(e==null)return Wo;var i=xoe(t,e,n);if(i==null)return Wo;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(_oe(i)){if(a)return wg(wg({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return wg(wg({},Wo),{},{coordinate:i.coordinate})};function woe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function joe(t,e){var n=woe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),c=Math.max(r,i);return n>=a&&n<=c}function Eoe(t,e,n){if(n==null||e==null)return!0;var r=Dn(t,e);return r==null||!Fa(n)?!0:joe(r,n)}var HN=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!pt(a))return i;var c=0,u=1/0;e.length>0&&(u=e.length-1);var f=Math.max(c,Math.min(a,u)),h=e[f];return h==null||Eoe(h,n,r)?String(f):null},Z5=(t,e,n,r,i,a,c)=>{if(a!=null){var u=c[0],f=u?.getPosition(a);if(f!=null)return f;var h=i?.[Number(a)];if(h)return n==="horizontal"?{x:h.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:h.coordinate}}},eq=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},tq=t=>t.options.tooltipPayloadSearcher,kd=t=>t.tooltip;function _k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(n),!0).forEach(function(r){Noe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Noe(t,e,n){return(e=Soe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Soe(t){var e=Aoe(t,"string");return typeof e=="symbol"?e:e+""}function Aoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Toe(t,e){return t??e}var nq=(t,e,n,r,i,a,c)=>{if(!(e==null||a==null)){var{chartData:u,computedData:f,dataStartIndex:h,dataEndIndex:p}=n,g=[];return t.reduce((y,x)=>{var E,{dataDefinedOnItem:j,settings:N}=x,A=Toe(j,u),k=Array.isArray(A)?I3(A,h,p):A,O=(E=N?.dataKey)!==null&&E!==void 0?E:r,C=N?.nameKey,V;if(r&&Array.isArray(k)&&!Array.isArray(k[0])&&c==="axis"?V=UL(k,r,i):V=a(k,e,f,C),Array.isArray(V))V.forEach(D=>{var P=wk(wk({},N),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});y.push(_P({tooltipEntrySettings:P,dataKey:D.dataKey,payload:D.payload,value:Dn(D.payload,D.dataKey),name:D.name}))});else{var $;y.push(_P({tooltipEntrySettings:N,dataKey:O,payload:V,value:Dn(V,O),name:($=Dn(V,C))!==null&&$!==void 0?$:N?.name}))}return y},g)}},GN=ue([$n,u5,TN],P5),Coe=ue([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Ooe=ue([nr,Id],d5),Dd=ue([Coe,$n,Ooe],f5,{memoizeOptions:{resultEqualityCheck:_0}}),Ioe=ue([Dd],t=>t.filter(b0)),Poe=ue([Dd],p5,{memoizeOptions:{resultEqualityCheck:_0}}),Md=ue([Poe,to],g5),Roe=ue([Ioe,to,$n],o5),KN=ue([Md,$n,Dd],v5),rq=ue([$n],zN),koe=ue([$n],t=>t.allowDataOverflow),iq=ue([rq,koe],V6),Doe=ue([Dd],t=>t.filter(b0)),Moe=ue([Roe,Doe,m0,e5],b5),zoe=ue([Moe,to,nr,iq],x5),Loe=ue([Dd],m5),qoe=ue([Md,$n,Loe,LN,nr],j5,{memoizeOptions:{resultEqualityCheck:x0}}),Uoe=ue([E5,nr,Id],Pd),Voe=ue([Uoe,nr],A5),Boe=ue([N5,nr,Id],Pd),$oe=ue([Boe,nr],T5),Foe=ue([S5,nr,Id],Pd),Hoe=ue([Foe,nr],C5),Goe=ue([Voe,Hoe,$oe],Yv),Koe=ue([$n,rq,iq,zoe,qoe,Goe,Pt,nr],O5),Nm=ue([$n,Pt,Md,KN,m0,nr,Koe],I5),Qoe=ue([Nm,$n,GN],R5),Woe=ue([$n,Nm,Qoe,nr],k5),sq=t=>{var e=nr(t),n=Id(t),r=!1;return Em(t,e,n,r)},aq=ue([$n,sq],p0),oq=ue([$n,GN,Woe,aq],UN),Yoe=ue([Pt,KN,$n,nr],V5),Xoe=ue([Pt,KN,$n,nr],B5),Joe=(t,e,n,r,i,a,c,u)=>{if(e){var{type:f}=e,h=Xa(t,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/p:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?Xr(i[0]-i[1])*2*g:g,h&&c?c.map((y,x)=>{var E=r.map(y);return pt(E)?{coordinate:E+g,value:y,index:x,offset:g}:null}).filter(Jr):r.domain().map((y,x)=>{var E=r.map(y);return pt(E)?{coordinate:E+g,value:a?a[y]:y,index:x,offset:g}:null}).filter(Jr)}}},io=ue([Pt,$n,GN,oq,sq,Yoe,Xoe,nr],Joe),QN=ue([F5,H5,ooe],(t,e,n)=>G5(n.shared,t,e)),lq=t=>t.tooltip.settings.trigger,WN=t=>t.tooltip.settings.defaultIndex,Sm=ue([kd,QN,lq,WN],J5),Rc=ue([Sm,Md,jm,Nm],HN),cq=ue([io,Rc],K5),uq=ue([Sm],t=>{if(t)return t.dataKey});ue([Sm],t=>{if(t)return t.graphicalItemId});var dq=ue([kd,QN,lq,WN],eq),Zoe=ue([Ja,Za,Pt,Zn,io,WN,dq],Z5),ele=ue([Sm,Zoe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),tle=ue([Sm],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),nle=ue([dq,Rc,to,jm,cq,tq,QN],nq),rle=ue([nle],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jk(Object(n),!0).forEach(function(r){ile(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ile(t,e,n){return(e=sle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sle(t){var e=ale(t,"string");return typeof e=="symbol"?e:e+""}function ale(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ole=()=>Le($n),lle=()=>{var t=ole(),e=Le(io),n=Le(oq);return fd(!t||!n?void 0:Ek(Ek({},t),{},{scale:n}),e)};function Nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nk(Object(n),!0).forEach(function(r){cle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cle(t,e,n){return(e=ule(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ule(t){var e=dle(t,"string");return typeof e=="symbol"?e:e+""}function dle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fle=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},hle=(t,e,n,r)=>{var i=e.find(h=>h&&h.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:c}=r;return Mu(Mu(Mu({},r),fr(r.cx,r.cy,c,a)),{},{angle:a,radius:c})}var u=i.coordinate,{angle:f}=r;return Mu(Mu(Mu({},r),fr(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function mle(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var fq=(t,e,n,r,i)=>{var a,c=(a=e?.length)!==null&&a!==void 0?a:0;if(c<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var f,h,p,g,y,x=u>0?(f=n[u-1])===null||f===void 0?void 0:f.coordinate:(h=n[c-1])===null||h===void 0?void 0:h.coordinate,E=(p=n[u])===null||p===void 0?void 0:p.coordinate,j=u>=c-1?(g=n[0])===null||g===void 0?void 0:g.coordinate:(y=n[u+1])===null||y===void 0?void 0:y.coordinate,N=void 0;if(!(x==null||E==null||j==null))if(Xr(E-x)!==Xr(j-E)){var A=[];if(Xr(j-E)===Xr(i[1]-i[0])){N=j;var k=E+i[1]-i[0];A[0]=Math.min(k,(k+x)/2),A[1]=Math.max(k,(k+x)/2)}else{N=x;var O=j+i[1]-i[0];A[0]=Math.min(E,(O+E)/2),A[1]=Math.max(E,(O+E)/2)}var C=[Math.min(E,(N+E)/2),Math.max(E,(N+E)/2)];if(t>C[0]&&t<=C[1]||t>=A[0]&&t<=A[1]){var V;return(V=n[u])===null||V===void 0?void 0:V.index}}else{var $=Math.min(x,j),D=Math.max(x,j);if(t>($+E)/2&&t<=(D+E)/2){var P;return(P=n[u])===null||P===void 0?void 0:P.index}}}else if(e)for(var R=0;R<c;R++){var q=e[R];if(q!=null){var L=e[R+1],M=e[R-1];if(R===0&&L!=null&&t<=(q.coordinate+L.coordinate)/2||R===c-1&&M!=null&&t>(q.coordinate+M.coordinate)/2||R>0&&R<c-1&&M!=null&&L!=null&&t>(q.coordinate+M.coordinate)/2&&t<=(q.coordinate+L.coordinate)/2)return q.index}}return-1},ple=()=>Le(TN),YN=(t,e)=>e,hq=(t,e,n)=>n,XN=(t,e,n,r)=>r,gle=ue(io,t=>Uy(t,e=>e.coordinate)),JN=ue([kd,YN,hq,XN],J5),ZN=ue([JN,Md,jm,Nm],HN),vle=(t,e,n)=>{if(e!=null){var r=kd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},mq=ue([kd,YN,hq,XN],eq),Xv=ue([Ja,Za,Pt,Zn,io,XN,mq],Z5),yle=ue([JN,Xv],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),pq=ue([io,ZN],K5),ble=ue([mq,ZN,to,jm,pq,tq,YN],nq),xle=ue([JN,ZN],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),_le=(t,e,n,r,i,a,c)=>{if(!(!t||!n||!r||!i)&&mle(t,c)){var u=Xee(t,e),f=fq(u,a,i,n,r),h=fle(e,i,f,t);return{activeIndex:String(f),activeCoordinate:h}}},wle=(t,e,n,r,i,a,c)=>{if(!(!t||!r||!i||!a||!n)){var u=sre(t,n);if(u){var f=Jee(u,e),h=fq(f,c,a,r,i),p=hle(e,a,h,u);return{activeIndex:String(h),activeCoordinate:p}}}},jle=(t,e,n,r,i,a,c,u)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?_le(t,e,r,i,a,c,u):wle(t,e,n,r,i,a,c)},Ele=ue(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),Nle=ue(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Jn)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:sae}});function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ak(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(r){Sle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sle(t,e,n){return(e=Ale(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ale(t){var e=Tle(t,"string");return typeof e=="symbol"?e:e+""}function Tle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cle={},Ole={zIndexMap:Object.values(Jn).reduce((t,e)=>Ak(Ak({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),Cle)},Ile=new Set(Object.values(Jn));function Ple(t){return Ile.has(t)}var gq=ei({name:"zIndex",initialState:Ole,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Jt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Ple(n)&&delete t.zIndexMap[n])},prepare:Jt()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Jt()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Jt()}}}),{registerZIndexPortal:Rle,unregisterZIndexPortal:kle,registerZIndexPortalElement:Dle,unregisterZIndexPortalElement:Mle}=gq.actions,zle=gq.reducer;function Fi(t){var{zIndex:e,children:n}=t,r=Ote(),i=r&&e!==void 0&&e!==0,a=Er(),c=jn();w.useLayoutEffect(()=>i?(c(Rle({zIndex:e})),()=>{c(kle({zIndex:e}))}):Uc,[c,e,i]);var u=Le(f=>Ele(f,e,a));return i?u?tM.createPortal(n,u):null:n}function nj(){return nj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nj.apply(null,arguments)}function Tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tk(Object(n),!0).forEach(function(r){Lle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lle(t,e,n){return(e=qle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qle(t){var e=Ule(t,"string");return typeof e=="symbol"?e:e+""}function Ule(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vle(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return w.isValidElement(e)?w.cloneElement(e,r):w.createElement(n,r)}function Ble(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:c,layout:u,cursor:f,tooltipEventType:h,chartName:p}=t,g=n,y=r,x=i;if(!f||!g||p!=="ScatterChart"&&h!=="axis")return null;var E,j,N;if(p==="ScatterChart")E=g,j=yne,N=Jn.cursorLine;else if(p==="BarChart")E=bne(u,g,a,c),j=n6,N=Jn.cursorRectangle;else if(u==="radial"&&$L(g)){var{cx:A,cy:k,radius:O,startAngle:C,endAngle:V}=r6(g);E={cx:A,cy:k,startAngle:C,endAngle:V,innerRadius:O,outerRadius:O},j=s6,N=Jn.cursorLine}else E={points:cre(u,g,a)},j=X3,N=Jn.cursorLine;var $=typeof f=="object"&&"className"in f?f.className:void 0,D=jg(jg(jg(jg({stroke:"#ccc",pointerEvents:"none"},a),E),um(f)),{},{payload:y,payloadIndex:x,className:Ut("recharts-tooltip-cursor",$)});return w.createElement(Fi,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:N},w.createElement(Vle,{cursor:f,cursorComp:j,cursorProps:D}))}function $le(t){var e=lle(),n=L3(),r=Vc(),i=ple();return e==null||n==null||r==null||i==null?null:w.createElement(Ble,nj({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var vq=w.createContext(null),Fle=()=>w.useContext(vq),y1={exports:{}},Ck;function Hle(){return Ck||(Ck=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function a(f,h,p,g,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,g||f,y),E=n?n+h:h;return f._events[E]?f._events[E].fn?f._events[E]=[f._events[E],x]:f._events[E].push(x):(f._events[E]=x,f._eventsCount++),f}function c(f,h){--f._eventsCount===0?f._events=new r:delete f._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)e.call(p,g)&&h.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=n?n+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,x=g.length,E=new Array(x);y<x;y++)E[y]=g[y].fn;return E},u.prototype.listenerCount=function(h){var p=n?n+h:h,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(h,p,g,y,x,E){var j=n?n+h:h;if(!this._events[j])return!1;var N=this._events[j],A=arguments.length,k,O;if(N.fn){switch(N.once&&this.removeListener(h,N.fn,void 0,!0),A){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,p),!0;case 3:return N.fn.call(N.context,p,g),!0;case 4:return N.fn.call(N.context,p,g,y),!0;case 5:return N.fn.call(N.context,p,g,y,x),!0;case 6:return N.fn.call(N.context,p,g,y,x,E),!0}for(O=1,k=new Array(A-1);O<A;O++)k[O-1]=arguments[O];N.fn.apply(N.context,k)}else{var C=N.length,V;for(O=0;O<C;O++)switch(N[O].once&&this.removeListener(h,N[O].fn,void 0,!0),A){case 1:N[O].fn.call(N[O].context);break;case 2:N[O].fn.call(N[O].context,p);break;case 3:N[O].fn.call(N[O].context,p,g);break;case 4:N[O].fn.call(N[O].context,p,g,y);break;default:if(!k)for(V=1,k=new Array(A-1);V<A;V++)k[V-1]=arguments[V];N[O].fn.apply(N[O].context,k)}}return!0},u.prototype.on=function(h,p,g){return a(this,h,p,g,!1)},u.prototype.once=function(h,p,g){return a(this,h,p,g,!0)},u.prototype.removeListener=function(h,p,g,y){var x=n?n+h:h;if(!this._events[x])return this;if(!p)return c(this,x),this;var E=this._events[x];if(E.fn)E.fn===p&&(!y||E.once)&&(!g||E.context===g)&&c(this,x);else{for(var j=0,N=[],A=E.length;j<A;j++)(E[j].fn!==p||y&&!E[j].once||g&&E[j].context!==g)&&N.push(E[j]);N.length?this._events[x]=N.length===1?N[0]:N:c(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&c(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(y1)),y1.exports}var Gle=Hle();const Kle=ea(Gle);var Hh=new Kle,rj="recharts.syncEvent.tooltip",Ok="recharts.syncEvent.brush",yq=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Ys(n))return t[n]}},Qle={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},bq=ei({name:"options",initialState:Qle,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Wle=bq.reducer,{createEventEmitter:Yle}=bq.actions;function Xle(t){return t.tooltip.syncInteraction}var Jle={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},xq=ei({name:"chartData",initialState:Jle,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:Ik,setDataStartEndIndexes:Zle,setComputedData:Rve}=xq.actions,ece=xq.reducer,tce=["x","y"];function Pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pk(Object(n),!0).forEach(function(r){nce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nce(t,e,n){return(e=rce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rce(t){var e=ice(t,"string");return typeof e=="symbol"?e:e+""}function ice(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sce(t,e){if(t==null)return{};var n,r,i=ace(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ace(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function oce(){var t=Le(CN),e=Le(ON),n=jn(),r=Le(t5),i=Le(io),a=Vc(),c=t0(),u=Le(f=>f.rootProps.className);w.useEffect(()=>{if(t==null)return Uc;var f=(h,p,g)=>{if(e!==g&&t===h){if(r==="index"){var y;if(c&&p!==null&&p!==void 0&&(y=p.payload)!==null&&y!==void 0&&y.coordinate&&p.payload.sourceViewBox){var x=p.payload.coordinate,{x:E,y:j}=x,N=sce(x,tce),{x:A,y:k,width:O,height:C}=p.payload.sourceViewBox,V=zu(zu({},N),{},{x:c.x+(O?(E-A)/O:0)*c.width,y:c.y+(C?(j-k)/C:0)*c.height});n(zu(zu({},p),{},{payload:zu(zu({},p.payload),{},{coordinate:V})}))}else n(p);return}if(i!=null){var $;if(typeof r=="function"){var D={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},P=r(i,D);$=i[P]}else r==="value"&&($=i.find(H=>String(H.value)===p.payload.label));var{coordinate:R}=p.payload;if($==null||p.payload.active===!1||R==null||c==null){n(ej({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:q,y:L}=R,M=Math.min(q,c.x+c.width),U=Math.min(L,c.y+c.height),ge={x:a==="horizontal"?$.coordinate:M,y:a==="horizontal"?U:$.coordinate},Z=ej({active:p.payload.active,coordinate:ge,dataKey:p.payload.dataKey,index:String($.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});n(Z)}}};return Hh.on(rj,f),()=>{Hh.off(rj,f)}},[u,n,e,t,r,i,a,c])}function lce(){var t=Le(CN),e=Le(ON),n=jn();w.useEffect(()=>{if(t==null)return Uc;var r=(i,a,c)=>{e!==c&&t===i&&n(Zle(a))};return Hh.on(Ok,r),()=>{Hh.off(Ok,r)}},[n,e,t])}function cce(){var t=jn();w.useEffect(()=>{t(Yle())},[t]),oce(),lce()}function uce(t,e,n,r,i,a){var c=Le(x=>vle(x,t,e)),u=Le(ON),f=Le(CN),h=Le(t5),p=Le(Xle),g=p?.active,y=t0();w.useEffect(()=>{if(!g&&f!=null&&u!=null){var x=ej({active:a,coordinate:n,dataKey:c,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:y,graphicalItemId:void 0});Hh.emit(rj,f,x,u)}},[g,n,c,i,r,u,f,h,a,y])}function Rk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(n),!0).forEach(function(r){dce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dce(t,e,n){return(e=fce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fce(t){var e=hce(t,"string");return typeof e=="symbol"?e:e+""}function hce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mce(t){return t.dataKey}function pce(t,e){return w.isValidElement(t)?w.cloneElement(t,e):typeof t=="function"?w.createElement(t,e):w.createElement(Xte,e)}var Dk=[],gce={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Mk(t){var e,n,r=Mr(t,gce),{active:i,allowEscapeViewBox:a,animationDuration:c,animationEasing:u,content:f,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:y,position:x,reverseDirection:E,useTranslate3d:j,wrapperStyle:N,cursor:A,shared:k,trigger:O,defaultIndex:C,portal:V,axisId:$}=r,D=jn(),P=typeof C=="number"?String(C):C;w.useEffect(()=>{D(foe({shared:k,trigger:O,axisId:$,active:i,defaultIndex:P}))},[D,k,O,$,i,P]);var R=t0(),q=Y3(),L=aoe(k),{activeIndex:M,isActive:U}=(e=Le(pe=>xle(pe,L,O,P)))!==null&&e!==void 0?e:{},ge=Le(pe=>ble(pe,L,O,P)),Z=Le(pe=>pq(pe,L,O,P)),H=Le(pe=>yle(pe,L,O,P)),ce=ge,Y=Fle(),we=(n=i??U)!==null&&n!==void 0?n:!1,[Q,F]=MZ([ce,we]),re=L==="axis"?Z:void 0;uce(L,O,H,re,M,we);var ye=V??Y;if(ye==null||R==null||L==null)return null;var Ee=ce??Dk;we||(Ee=Dk),h&&Ee.length&&(Ee=lZ(Ee.filter(pe=>pe.value!=null&&(pe.hide!==!0||r.includeHidden)),y,mce));var J=Ee.length>0,ne=w.createElement(ine,{allowEscapeViewBox:a,animationDuration:c,animationEasing:u,isAnimationActive:p,active:we,coordinate:H,hasPayload:J,offset:g,position:x,reverseDirection:E,useTranslate3d:j,viewBox:R,wrapperStyle:N,lastBoundingBox:Q,innerRef:F,hasPortalFromProps:!!V},pce(f,kk(kk({},r),{},{payload:Ee,label:re,active:we,activeIndex:M,coordinate:H,accessibilityLayer:q})));return w.createElement(w.Fragment,null,tM.createPortal(ne,ye),we&&w.createElement($le,{cursor:A,tooltipEventType:L,coordinate:H,payload:Ee,index:M}))}var eS=t=>null;eS.displayName="Cell";function vce(t,e,n){return(e=yce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yce(t){var e=bce(t,"string");return typeof e=="symbol"?e:e+""}function bce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class xce{constructor(e){vce(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){wce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wce(t,e,n){return(e=jce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jce(t){var e=Ece(t,"string");return typeof e=="symbol"?e:e+""}function Ece(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nce={cacheSize:2e3,enableCache:!0},_q=_ce({},Nce),Lk=new xce(_q.cacheSize),Sce={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qk="recharts_measurement_span";function Ace(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",c=e.letterSpacing||"",u=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(c,"|").concat(u)}var Uk=(t,e)=>{try{var n=document.getElementById(qk);n||(n=document.createElement("span"),n.setAttribute("id",qk),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Sce,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},vh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||s0.isSsr)return{width:0,height:0};if(!_q.enableCache)return Uk(e,n);var r=Ace(e,n),i=Lk.get(r);if(i)return i;var a=Uk(e,n);return Lk.set(r,a),a},wq;function Tce(t,e,n){return(e=Cce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cce(t){var e=Oce(t,"string");return typeof e=="symbol"?e:e+""}function Oce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ice=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Pce=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Rce={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},kce=["cm","mm","pt","pc","in","Q","px"];function Dce(t){return kce.includes(t)}var Gu="NaN";function Mce(t,e){return t*Rce[e]}class cr{static parse(e){var n,[,r,i]=(n=Pce.exec(e))!==null&&n!==void 0?n:[];return r==null?cr.NaN:new cr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ys(e)&&(this.unit=""),n!==""&&!Ice.test(n)&&(this.num=NaN,this.unit=""),Dce(n)&&(this.num=Mce(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new cr(NaN,""):new cr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new cr(NaN,""):new cr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new cr(NaN,""):new cr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new cr(NaN,""):new cr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ys(this.num)}}wq=cr;Tce(cr,"NaN",new wq(NaN,""));function jq(t){if(t==null||t.includes(Gu))return Gu;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=Vk.exec(e))!==null&&n!==void 0?n:[],c=cr.parse(r??""),u=cr.parse(a??""),f=i==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Gu;e=e.replace(Vk,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,p,g,y]=(h=Bk.exec(e))!==null&&h!==void 0?h:[],x=cr.parse(p??""),E=cr.parse(y??""),j=g==="+"?x.add(E):x.subtract(E);if(j.isNaN())return Gu;e=e.replace(Bk,j.toString())}return e}var $k=/\(([^()]*)\)/;function zce(t){for(var e=t,n;(n=$k.exec(e))!=null;){var[,r]=n;e=e.replace($k,jq(r))}return e}function Lce(t){var e=t.replace(/\s+/g,"");return e=zce(e),e=jq(e),e}function qce(t){try{return Lce(t)}catch{return Gu}}function b1(t){var e=qce(t.slice(5,-1));return e===Gu?"":e}var Uce=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Vce=["dx","dy","angle","className","breakAll"];function ij(){return ij=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ij.apply(null,arguments)}function Fk(t,e){if(t==null)return{};var n,r,i=Bce(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Eq=/[ \f\n\r\t\v\u2028\u2029]+/,Nq=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];an(e)||(n?i=e.toString().split(""):i=e.toString().split(Eq));var a=i.map(u=>({word:u,width:vh(u,r).width})),c=n?0:vh("",r).width;return{wordsWithComputedWidth:a,spaceWidth:c}}catch{return null}};function $ce(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Sq=(t,e,n,r)=>t.reduce((i,a)=>{var{word:c,width:u}=a,f=i[i.length-1];if(f&&u!=null&&(e==null||r||f.width+u+n<Number(e)))f.words.push(c),f.width+=u+n;else{var h={words:[c],width:u};i.push(h)}return i},[]),Aq=t=>t.reduce((e,n)=>e.width>n.width?e:n),Fce="",Hk=(t,e,n,r,i,a,c,u)=>{var f=t.slice(0,e),h=Nq({breakAll:n,style:r,children:f+Fce});if(!h)return[!1,[]];var p=Sq(h.wordsWithComputedWidth,a,c,u),g=p.length>i||Aq(p).width>Number(a);return[g,p]},Hce=(t,e,n,r,i)=>{var{maxLines:a,children:c,style:u,breakAll:f}=t,h=Pe(a),p=String(c),g=Sq(e,r,n,i);if(!h||i)return g;var y=g.length>a||Aq(g).width>Number(r);if(!y)return g;for(var x=0,E=p.length-1,j=0,N;x<=E&&j<=p.length-1;){var A=Math.floor((x+E)/2),k=A-1,[O,C]=Hk(p,k,f,u,a,r,n,i),[V]=Hk(p,A,f,u,a,r,n,i);if(!O&&!V&&(x=A+1),O&&V&&(E=A-1),!O&&V){N=C;break}j++}return N||g},Gk=t=>{var e=an(t)?[]:t.toString().split(Eq);return[{words:e,width:void 0}]},Gce=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:c}=t;if((e||n)&&!s0.isSsr){var u,f,h=Nq({breakAll:a,children:r,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;u=p,f=g}else return Gk(r);return Hce({breakAll:a,children:r,maxLines:c,style:i},u,f,e,!!n)}return Gk(r)},Tq="#808080",Kce={angle:0,breakAll:!1,capHeight:"0.71em",fill:Tq,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},tS=w.forwardRef((t,e)=>{var n=Mr(t,Kce),{x:r,y:i,lineHeight:a,capHeight:c,fill:u,scaleToFit:f,textAnchor:h,verticalAnchor:p}=n,g=Fk(n,Uce),y=w.useMemo(()=>Gce({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),{dx:x,dy:E,angle:j,className:N,breakAll:A}=g,k=Fk(g,Vce);if(!Xs(r)||!Xs(i)||y.length===0)return null;var O=Number(r)+(Pe(x)?x:0),C=Number(i)+(Pe(E)?E:0);if(!pt(O)||!pt(C))return null;var V;switch(p){case"start":V=b1("calc(".concat(c,")"));break;case"middle":V=b1("calc(".concat((y.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:V=b1("calc(".concat(y.length-1," * -").concat(a,")"));break}var $=[],D=y[0];if(f&&D!=null){var P=D.width,{width:R}=g;$.push("scale(".concat(Pe(R)&&Pe(P)?R/P:1,")"))}return j&&$.push("rotate(".concat(j,", ").concat(O,", ").concat(C,")")),$.length&&(k.transform=$.join(" ")),w.createElement("text",ij({},Rr(k),{ref:e,x:O,y:C,className:Ut("recharts-text",N),textAnchor:h,fill:u.includes("url")?Tq:u}),y.map((q,L)=>{var M=q.words.join(A?"":" ");return w.createElement("tspan",{x:O,dy:L===0?V:a,key:"".concat(M,"-").concat(L)},M)}))});tS.displayName="Text";function Kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ds(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(n),!0).forEach(function(r){Qce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qce(t,e,n){return(e=Wce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wce(t){var e=Yce(t,"string");return typeof e=="symbol"?e:e+""}function Yce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xce=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:c,height:u,upperWidth:f,lowerWidth:h}=ZE(e),p=a,g=a+(f-h)/2,y=(p+g)/2,x=(f+h)/2,E=p+f/2,j=u>=0?1:-1,N=j*r,A=j>0?"end":"start",k=j>0?"start":"end",O=f>=0?1:-1,C=O*r,V=O>0?"end":"start",$=O>0?"start":"end",D=i;if(n==="top"){var P={x:p+f/2,y:c-N,horizontalAnchor:"middle",verticalAnchor:A};return D&&(P.height=Math.max(c-D.y,0),P.width=f),P}if(n==="bottom"){var R={x:g+h/2,y:c+u+N,horizontalAnchor:"middle",verticalAnchor:k};return D&&(R.height=Math.max(D.y+D.height-(c+u),0),R.width=h),R}if(n==="left"){var q={x:y-C,y:c+u/2,horizontalAnchor:V,verticalAnchor:"middle"};return D&&(q.width=Math.max(q.x-D.x,0),q.height=u),q}if(n==="right"){var L={x:y+x+C,y:c+u/2,horizontalAnchor:$,verticalAnchor:"middle"};return D&&(L.width=Math.max(D.x+D.width-L.x,0),L.height=u),L}var M=D?{width:x,height:u}:{};return n==="insideLeft"?Ds({x:y+C,y:c+u/2,horizontalAnchor:$,verticalAnchor:"middle"},M):n==="insideRight"?Ds({x:y+x-C,y:c+u/2,horizontalAnchor:V,verticalAnchor:"middle"},M):n==="insideTop"?Ds({x:p+f/2,y:c+N,horizontalAnchor:"middle",verticalAnchor:k},M):n==="insideBottom"?Ds({x:g+h/2,y:c+u-N,horizontalAnchor:"middle",verticalAnchor:A},M):n==="insideTopLeft"?Ds({x:p+C,y:c+N,horizontalAnchor:$,verticalAnchor:k},M):n==="insideTopRight"?Ds({x:p+f-C,y:c+N,horizontalAnchor:V,verticalAnchor:k},M):n==="insideBottomLeft"?Ds({x:g+C,y:c+u-N,horizontalAnchor:$,verticalAnchor:A},M):n==="insideBottomRight"?Ds({x:g+h-C,y:c+u-N,horizontalAnchor:V,verticalAnchor:A},M):n&&typeof n=="object"&&(Pe(n.x)||Tc(n.x))&&(Pe(n.y)||Tc(n.y))?Ds({x:a+fs(n.x,x),y:c+fs(n.y,u),horizontalAnchor:"end",verticalAnchor:"end"},M):Ds({x:E,y:c+u/2,horizontalAnchor:"middle",verticalAnchor:"middle"},M)},Jce=["labelRef"],Zce=["content"];function Qk(t,e){if(t==null)return{};var n,r,i=eue(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function eue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wk(Object(n),!0).forEach(function(r){tue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tue(t,e,n){return(e=nue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nue(t){var e=rue(t,"string");return typeof e=="symbol"?e:e+""}function rue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sa(){return Sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sa.apply(null,arguments)}var Cq=w.createContext(null),iue=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:c,children:u}=t,f=w.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:c}),[e,n,r,i,a,c]);return w.createElement(Cq.Provider,{value:f},u)},Oq=()=>{var t=w.useContext(Cq),e=t0();return t||(e?ZE(e):void 0)},sue=w.createContext(null),aue=()=>{var t=w.useContext(sue),e=Le(a5);return t||e},oue=t=>{var{value:e,formatter:n}=t,r=an(t.children)?e:t.children;return typeof n=="function"?n(r):r},nS=t=>t!=null&&typeof t=="function",lue=(t,e)=>{var n=Xr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},cue=(t,e,n,r,i)=>{var{offset:a,className:c}=t,{cx:u,cy:f,innerRadius:h,outerRadius:p,startAngle:g,endAngle:y,clockWise:x}=i,E=(h+p)/2,j=lue(g,y),N=j>=0?1:-1,A,k;switch(e){case"insideStart":A=g+N*a,k=x;break;case"insideEnd":A=y-N*a,k=!x;break;case"end":A=y+N*a,k=x;break;default:throw new Error("Unsupported position ".concat(e))}k=j<=0?k:!k;var O=fr(u,f,E,A),C=fr(u,f,E,A+(k?1:-1)*359),V="M".concat(O.x,",").concat(O.y,`
    A`).concat(E,",").concat(E,",0,1,").concat(k?0:1,`,
    `).concat(C.x,",").concat(C.y),$=an(t.id)?Ph("recharts-radial-line-"):t.id;return w.createElement("text",Sa({},r,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",c)}),w.createElement("defs",null,w.createElement("path",{id:$,d:V})),w.createElement("textPath",{xlinkHref:"#".concat($)},n))},uue=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:c,startAngle:u,endAngle:f}=t,h=(u+f)/2;if(n==="outside"){var{x:p,y:g}=fr(r,i,c+e,h);return{x:p,y:g,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(a+c)/2,{x,y:E}=fr(r,i,y,h);return{x,y:E,textAnchor:"middle",verticalAnchor:"middle"}},$g=t=>t!=null&&"cx"in t&&Pe(t.cx),due={angle:0,offset:5,zIndex:Jn.label,position:"middle",textBreakAll:!1};function fue(t){if(!$g(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function $o(t){var e=Mr(t,due),{viewBox:n,parentViewBox:r,position:i,value:a,children:c,content:u,className:f="",textBreakAll:h,labelRef:p}=e,g=aue(),y=Oq(),x=i==="center"?y:g??y,E,j,N;n==null?E=x:$g(n)?E=n:E=ZE(n);var A=fue(E);if(!E||an(a)&&an(c)&&!w.isValidElement(u)&&typeof u!="function")return null;var k=lh(lh({},e),{},{viewBox:E});if(w.isValidElement(u)){var{labelRef:O}=k,C=Qk(k,Jce);return w.cloneElement(u,C)}if(typeof u=="function"){var{content:V}=k,$=Qk(k,Zce);if(j=w.createElement(u,$),w.isValidElement(j))return j}else j=oue(e);var D=Rr(e);if($g(E)){if(i==="insideStart"||i==="insideEnd"||i==="end")return cue(e,i,j,D,E);N=uue(E,e.offset,e.position)}else{if(!A)return null;var P=Xce({viewBox:A,position:i,offset:e.offset,parentViewBox:$g(r)?void 0:r});N=lh(lh({x:P.x,y:P.y,textAnchor:P.horizontalAnchor,verticalAnchor:P.verticalAnchor},P.width!==void 0?{width:P.width}:{}),P.height!==void 0?{height:P.height}:{})}return w.createElement(Fi,{zIndex:e.zIndex},w.createElement(tS,Sa({ref:p,className:Ut("recharts-label",f)},D,N,{textAnchor:$ce(D.textAnchor)?D.textAnchor:N.textAnchor,breakAll:h}),j))}$o.displayName="Label";var hue=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?w.createElement($o,Sa({key:"label-implicit"},r)):Xs(t)?w.createElement($o,Sa({key:"label-implicit",value:t},r)):w.isValidElement(t)?t.type===$o?w.cloneElement(t,lh({key:"label-implicit"},r)):w.createElement($o,Sa({key:"label-implicit",content:t},r)):nS(t)?w.createElement($o,Sa({key:"label-implicit",content:t},r)):t&&typeof t=="object"?w.createElement($o,Sa({},t,{key:"label-implicit"},r)):null};function mue(t){var{label:e,labelRef:n}=t,r=Oq();return hue(e,r,n)||null}var x1={},_1={},Yk;function pue(){return Yk||(Yk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(_1)),_1}var w1={},Xk;function gue(){return Xk||(Xk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(w1)),w1}var Jk;function vue(){return Jk||(Jk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pue(),n=gue(),r=BE();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(x1)),x1}var j1,Zk;function yue(){return Zk||(Zk=1,j1=vue().last),j1}var bue=yue();const xue=ea(bue);var _ue=["valueAccessor"],wue=["dataKey","clockWise","id","textBreakAll","zIndex"];function Jv(){return Jv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jv.apply(null,arguments)}function eD(t,e){if(t==null)return{};var n,r,i=jue(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Eue=t=>Array.isArray(t.value)?xue(t.value):t.value,Iq=w.createContext(void 0),Pq=Iq.Provider,Rq=w.createContext(void 0);Rq.Provider;function Nue(){return w.useContext(Iq)}function Sue(){return w.useContext(Rq)}function Fg(t){var{valueAccessor:e=Eue}=t,n=eD(t,_ue),{dataKey:r,clockWise:i,id:a,textBreakAll:c,zIndex:u}=n,f=eD(n,wue),h=Nue(),p=Sue(),g=h||p;return!g||!g.length?null:w.createElement(Fi,{zIndex:u??Jn.label},w.createElement(qi,{className:"recharts-label-list"},g.map((y,x)=>{var E,j=an(r)?e(y,x):Dn(y.payload,r),N=an(a)?{}:{id:"".concat(a,"-").concat(x)};return w.createElement($o,Jv({key:"label-".concat(x)},Rr(y),f,N,{fill:(E=n.fill)!==null&&E!==void 0?E:y.fill,parentViewBox:y.parentViewBox,value:j,textBreakAll:c,viewBox:y.viewBox,index:x,zIndex:0}))})))}Fg.displayName="LabelList";function kq(t){var{label:e}=t;return e?e===!0?w.createElement(Fg,{key:"labelList-implicit"}):w.isValidElement(e)||nS(e)?w.createElement(Fg,{key:"labelList-implicit",content:e}):typeof e=="object"?w.createElement(Fg,Jv({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function sj(){return sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sj.apply(null,arguments)}var Dq=t=>{var{cx:e,cy:n,r,className:i}=t,a=Ut("recharts-dot",i);return Pe(e)&&Pe(n)&&Pe(r)?w.createElement("circle",sj({},ds(t),UE(t),{className:a,cx:e,cy:n,r})):null},Aue={radiusAxis:{},angleAxis:{}},Mq=ei({name:"polarAxis",initialState:Aue,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:kve,removeRadiusAxis:Dve,addAngleAxis:Mve,removeAngleAxis:zve}=Mq.actions,Tue=Mq.reducer;function Cue(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var E1={exports:{}},qt={};var tD;function Oue(){if(tD)return qt;tD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function E(j){if(typeof j=="object"&&j!==null){var N=j.$$typeof;switch(N){case t:switch(j=j.type,j){case n:case i:case r:case f:case h:case y:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case g:case p:return j;case a:return j;default:return N}}case e:return N}}}return qt.ContextConsumer=a,qt.ContextProvider=c,qt.Element=t,qt.ForwardRef=u,qt.Fragment=n,qt.Lazy=g,qt.Memo=p,qt.Portal=e,qt.Profiler=i,qt.StrictMode=r,qt.Suspense=f,qt.SuspenseList=h,qt.isContextConsumer=function(j){return E(j)===a},qt.isContextProvider=function(j){return E(j)===c},qt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===t},qt.isForwardRef=function(j){return E(j)===u},qt.isFragment=function(j){return E(j)===n},qt.isLazy=function(j){return E(j)===g},qt.isMemo=function(j){return E(j)===p},qt.isPortal=function(j){return E(j)===e},qt.isProfiler=function(j){return E(j)===i},qt.isStrictMode=function(j){return E(j)===r},qt.isSuspense=function(j){return E(j)===f},qt.isSuspenseList=function(j){return E(j)===h},qt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===i||j===r||j===f||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===p||j.$$typeof===c||j.$$typeof===a||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},qt.typeOf=E,qt}var nD;function Iue(){return nD||(nD=1,E1.exports=Oue()),E1.exports}var Pue=Iue(),rD=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",iD=null,N1=null,zq=t=>{if(t===iD&&Array.isArray(N1))return N1;var e=[];return w.Children.forEach(t,n=>{an(n)||(Pue.isFragment(n)?e=e.concat(zq(n.props.children)):e.push(n))}),N1=e,iD=t,e};function Rue(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>rD(i)):r=[rD(e)],zq(t).forEach(i=>{var a=ud(i,"type.displayName")||ud(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var Lq=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,S1={},sD;function kue(){return sD||(sD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(S1)),S1}var A1,aD;function Due(){return aD||(aD=1,A1=kue().isPlainObject),A1}var Mue=Due();const zue=ea(Mue);var oD,lD,cD,uD,dD;function fD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(n),!0).forEach(function(r){Lue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lue(t,e,n){return(e=que(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function que(t){var e=Uue(t,"string");return typeof e=="symbol"?e:e+""}function Uue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zv.apply(null,arguments)}function Yf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var mD=(t,e,n,r,i)=>{var a=n-r,c;return c=hn(oD||(oD=Yf(["M ",",",""])),t,e),c+=hn(lD||(lD=Yf(["L ",",",""])),t+n,e),c+=hn(cD||(cD=Yf(["L ",",",""])),t+n-a/2,e+i),c+=hn(uD||(uD=Yf(["L ",",",""])),t+n-a/2-r,e+i),c+=hn(dD||(dD=Yf(["L ",","," Z"])),t,e),c},Vue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Bue=t=>{var e=Mr(t,Vue),{x:n,y:r,upperWidth:i,lowerWidth:a,height:c,className:u}=e,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=e,y=w.useRef(null),[x,E]=w.useState(-1),j=w.useRef(i),N=w.useRef(a),A=w.useRef(c),k=w.useRef(n),O=w.useRef(r),C=o0(t,"trapezoid-");if(w.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ge=y.current.getTotalLength();ge&&E(ge)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||c!==+c||i===0&&a===0||c===0)return null;var V=Ut("recharts-trapezoid",u);if(!g)return w.createElement("g",null,w.createElement("path",Zv({},Rr(e),{className:V,d:mD(n,r,i,a,c)})));var $=j.current,D=N.current,P=A.current,R=k.current,q=O.current,L="0px ".concat(x===-1?1:x,"px"),M="".concat(x,"px 0px"),U=J3(["strokeDasharray"],h,f);return w.createElement(a0,{animationId:C,key:C,canBegin:x>0,duration:h,easing:f,isActive:g,begin:p},ge=>{var Z=mn($,i,ge),H=mn(D,a,ge),ce=mn(P,c,ge),Y=mn(R,n,ge),we=mn(q,r,ge);y.current&&(j.current=Z,N.current=H,A.current=ce,k.current=Y,O.current=we);var Q=ge>0?{transition:U,strokeDasharray:M}:{strokeDasharray:L};return w.createElement("path",Zv({},Rr(e),{className:V,d:mD(Y,we,Z,H,ce),ref:y,style:hD(hD({},Q),e.style)}))})},$ue=["option","shapeType","activeClassName"];function Fue(t,e){if(t==null)return{};var n,r,i=Hue(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Hue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function pD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ey(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(n),!0).forEach(function(r){Gue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gue(t,e,n){return(e=Kue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kue(t){var e=Que(t,"string");return typeof e=="symbol"?e:e+""}function Que(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wue(t,e){return ey(ey({},e),t)}function Yue(t,e){return t==="symbols"}function gD(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return w.createElement(n6,n);case"trapezoid":return w.createElement(Bue,n);case"sector":return w.createElement(s6,n);case"symbols":if(Yue(e))return w.createElement(BL,n);break;case"curve":return w.createElement(X3,n);default:return null}}function Xue(t){return w.isValidElement(t)?t.props:t}function qq(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=Fue(t,$ue),a;if(w.isValidElement(e))a=w.cloneElement(e,ey(ey({},i),Xue(e)));else if(typeof e=="function")a=e(i,i.index);else if(zue(e)&&typeof e!="boolean"){var c=Wue(e,i);a=w.createElement(gD,{shapeType:n,elementProps:c})}else{var u=i;a=w.createElement(gD,{shapeType:n,elementProps:u})}return i.isActive?w.createElement(qi,{className:r},a):a}var Uq=(t,e,n)=>{var r=jn();return(i,a)=>c=>{t?.(i,a,c),r(W5({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Vq=t=>{var e=jn();return(n,r)=>i=>{t?.(n,r,i),e(hoe())}},Bq=(t,e,n)=>{var r=jn();return(i,a)=>c=>{t?.(i,a,c),r(moe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function $q(t){var{tooltipEntrySettings:e}=t,n=jn(),r=Er(),i=w.useRef(null);return w.useLayoutEffect(()=>{r||(i.current===null?n(coe(e)):i.current!==e&&n(uoe({prev:i.current,next:e})),i.current=e)},[e,n,r]),w.useLayoutEffect(()=>()=>{i.current&&(n(doe(i.current)),i.current=null)},[n]),null}function Fq(t){var{legendPayload:e}=t,n=jn(),r=Er(),i=w.useRef(null);return w.useLayoutEffect(()=>{r||(i.current===null?n($te(e)):i.current!==e&&n(Fte({prev:i.current,next:e})),i.current=e)},[n,r,e]),w.useLayoutEffect(()=>()=>{i.current&&(n(Hte(i.current)),i.current=null)},[n]),null}var T1,Jue=()=>{var[t]=w.useState(()=>Ph("uid-"));return t},Zue=(T1=ZD.useId)!==null&&T1!==void 0?T1:Jue;function ede(t,e){var n=Zue();return e||(t?"".concat(t,"-").concat(n):n)}var tde=w.createContext(void 0),Hq=t=>{var{id:e,type:n,children:r}=t,i=ede("recharts-".concat(n),e);return w.createElement(tde.Provider,{value:i},r(i))},nde={cartesianItems:[],polarItems:[]},Gq=ei({name:"graphicalItems",initialState:nde,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Jt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ls(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Jt()},removeCartesianGraphicalItem:{reducer(t,e){var n=ls(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Jt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Jt()},removePolarGraphicalItem:{reducer(t,e){var n=ls(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Jt()}}}),{addCartesianGraphicalItem:rde,replaceCartesianGraphicalItem:ide,removeCartesianGraphicalItem:sde,addPolarGraphicalItem:Lve,removePolarGraphicalItem:qve}=Gq.actions,ade=Gq.reducer,ode=t=>{var e=jn(),n=w.useRef(null);return w.useLayoutEffect(()=>{n.current===null?e(rde(t)):n.current!==t&&e(ide({prev:n.current,next:t})),n.current=t},[e,t]),w.useLayoutEffect(()=>()=>{n.current&&(e(sde(n.current)),n.current=null)},[e]),null},Kq=w.memo(ode),lde=["points"];function vD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(n),!0).forEach(function(r){cde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cde(t,e,n){return(e=ude(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ude(t){var e=dde(t,"string");return typeof e=="symbol"?e:e+""}function dde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ty(){return ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ty.apply(null,arguments)}function fde(t,e){if(t==null)return{};var n,r,i=hde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function mde(t){var{option:e,dotProps:n,className:r}=t;if(w.isValidElement(e))return w.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Ut(r,typeof e!="boolean"?e.className:""),a=n??{},{points:c}=a,u=fde(a,lde);return w.createElement(Dq,ty({},u,{className:i}))}function pde(t,e){return t==null?!1:e?!0:t.length===1}function gde(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:c,needClip:u,clipPathId:f,zIndex:h=Jn.scatter}=t;if(!pde(e,n))return null;var p=Lq(n),g=kX(n),y=e.map((E,j)=>{var N,A,k=C1(C1(C1({r:3},c),g),{},{index:j,cx:(N=E.x)!==null&&N!==void 0?N:void 0,cy:(A=E.y)!==null&&A!==void 0?A:void 0,dataKey:a,value:E.value,payload:E.payload,points:e});return w.createElement(mde,{key:"dot-".concat(j),option:n,dotProps:k,className:i})}),x={};return u&&f!=null&&(x.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(f,")")),w.createElement(Fi,{zIndex:h},w.createElement(qi,ty({className:r},x),y))}function yD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(n),!0).forEach(function(r){vde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vde(t,e,n){return(e=yde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yde(t){var e=bde(t,"string");return typeof e=="symbol"?e:e+""}function bde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qq=0,xde={xAxis:{},yAxis:{},zAxis:{}},Wq=ei({name:"cartesianAxis",initialState:xde,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Jt()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Jt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Jt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Jt()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Jt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Jt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Jt()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Jt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Jt()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,c=i.widthHistory||[];if(c.length===3&&c[0]===c[2]&&r===c[1]&&r!==i.width&&Math.abs(r-((a=c[0])!==null&&a!==void 0?a:0))<=1)return;var u=[...c,r].slice(-3);t.yAxis[n]=bD(bD({},i),{},{width:r,widthHistory:u})}}}}),{addXAxis:_de,replaceXAxis:wde,removeXAxis:jde,addYAxis:Ede,replaceYAxis:Nde,removeYAxis:Sde,addZAxis:Uve,replaceZAxis:Vve,removeZAxis:Bve,updateYAxisWidth:Ade}=Wq.actions,Tde=Wq.reducer,Cde=ue([Zn],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Ode=ue([Cde,Ja,Za],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),rS=()=>Le(Ode),Ide=()=>Le(rle);function xD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(n),!0).forEach(function(r){Pde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pde(t,e,n){return(e=Rde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rde(t){var e=kde(t,"string");return typeof e=="symbol"?e:e+""}function kde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dde=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:c}=t;if(i===!1||e.x==null||e.y==null)return null;var u={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},f=O1(O1(O1({},u),um(i)),UE(i)),h;return w.isValidElement(i)?h=w.cloneElement(i,f):typeof i=="function"?h=i(f):h=w.createElement(Dq,f),w.createElement(qi,{className:"recharts-active-dot",clipPath:c},h)};function Mde(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:c=Jn.activeDot}=t,u=Le(Rc),f=Ide();if(e==null||f==null)return null;var h=e.find(p=>f.includes(p.payload));return an(h)?null:w.createElement(Fi,{zIndex:c},w.createElement(Dde,{point:h,childIndex:Number(u),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var _D=(t,e,n)=>{var r=n??t;if(!an(r))return fs(r,e,0)},zde=(t,e,n)=>{var r={},i=t.filter(b0),a=t.filter(h=>h.stackId==null),c=i.reduce((h,p)=>{var g=h[p.stackId];return g==null&&(g=[]),g.push(p),h[p.stackId]=g,h},r),u=Object.entries(c).map(h=>{var p,[g,y]=h,x=y.map(j=>j.dataKey),E=_D(e,n,(p=y[0])===null||p===void 0?void 0:p.barSize);return{stackId:g,dataKeys:x,barSize:E}}),f=a.map(h=>{var p=[h.dataKey].filter(y=>y!=null),g=_D(e,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...u,...f]};function wD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wD(Object(n),!0).forEach(function(r){Lde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lde(t,e,n){return(e=qde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qde(t){var e=Ude(t,"string");return typeof e=="symbol"?e:e+""}function Ude(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vde(t,e,n,r,i){var a,c=r.length;if(!(c<1)){var u=fs(t,n,0,!0),f,h=[];if(pt((a=r[0])===null||a===void 0?void 0:a.barSize)){var p=!1,g=n/c,y=r.reduce((k,O)=>k+(O.barSize||0),0);y+=(c-1)*u,y>=n&&(y-=(c-1)*u,u=0),y>=n&&g>0&&(p=!0,g*=.9,y=c*g);var x=(n-y)/2>>0,E={offset:x-u,size:0};f=r.reduce((k,O)=>{var C,V={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:E.offset+E.size+u,size:p?g:(C=O.barSize)!==null&&C!==void 0?C:0}},$=[...k,V];return E=V.position,$},h)}else{var j=fs(e,n,0,!0);n-2*j-(c-1)*u<=0&&(u=0);var N=(n-2*j-(c-1)*u)/c;N>1&&(N>>=0);var A=pt(i)?Math.min(N,i):N;f=r.reduce((k,O,C)=>[...k,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:j+(N+u)*C+(N-A)/2,size:A}}],h)}return f}}var Bde=(t,e,n,r,i,a,c)=>{var u=an(c)?e:c,f=Vde(n,r,i!==a?i:a,t,u);return i!==a&&f!=null&&(f=f.map(h=>Eg(Eg({},h),{},{position:Eg(Eg({},h.position),{},{offset:h.position.offset-i/2})}))),f},$de=(t,e)=>{var n=kN(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(c=>c.key===n)}}}},Fde=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function Hde(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&pt(t.zIndex)?t.zIndex:e}var Gde=t=>{var{chartData:e}=t,n=jn(),r=Er();return w.useEffect(()=>r?()=>{}:(n(Ik(e)),()=>{n(Ik(void 0))}),[e,n,r]),null},jD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Yq=ei({name:"brush",initialState:jD,reducers:{setBrushSettings(t,e){return e.payload==null?jD:e.payload}}}),{setBrushSettings:$ve}=Yq.actions,Kde=Yq.reducer;function Qde(t){return(t%180+180)%180}var Wde=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Qde(i),c=a*Math.PI/180,u=Math.atan(r/n),f=c>u&&c<Math.PI-u?r/Math.sin(c):n/Math.cos(c);return Math.abs(f)},Yde={dots:[],areas:[],lines:[]},Xq=ei({name:"referenceElements",initialState:Yde,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ls(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ls(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ls(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Fve,removeDot:Hve,addArea:Gve,removeArea:Kve,addLine:Qve,removeLine:Wve}=Xq.actions,Xde=Xq.reducer,Jde=w.createContext(void 0),Zde=t=>{var{children:e}=t,[n]=w.useState("".concat(Ph("recharts"),"-clip")),r=rS();if(r==null)return null;var{x:i,y:a,width:c,height:u}=r;return w.createElement(Jde.Provider,{value:n},w.createElement("defs",null,w.createElement("clipPath",{id:n},w.createElement("rect",{x:i,y:a,height:u,width:c}))),e)};function Jq(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function efe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Wde(r,n)}function tfe(t,e,n){var r=n==="width",{x:i,y:a,width:c,height:u}=t;return e===1?{start:r?i:a,end:r?i+c:a+u}:{start:r?i+c:a+u,end:r?i:a}}function Gh(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function nfe(t,e){return Jq(t,e+1)}function rfe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:c,end:u}=e,f=0,h=1,p=c,g=function(){var E=r?.[f];if(E===void 0)return{v:Jq(r,h)};var j=f,N,A=()=>(N===void 0&&(N=n(E,j)),N),k=E.coordinate,O=f===0||Gh(t,k,A,p,u);O||(f=0,p=c,h+=1),O&&(p=k+t*(A()/2+i),f+=h)},y;h<=a.length;)if(y=g(),y)return y.v;return[]}function ife(t,e,n,r,i){var a=(r||[]).slice(),c=a.length;if(c===0)return[];for(var{start:u,end:f}=e,h=1;h<=c;h++){for(var p=(c-1)%h,g=u,y=!0,x=function(){var C=r[j];if(C==null)return 0;var V=j,$,D=()=>($===void 0&&($=n(C,V)),$),P=C.coordinate,R=j===p||Gh(t,P,D,g,f);if(!R)return y=!1,1;R&&(g=P+t*(D()/2+i))},E,j=p;j<c&&(E=x(),!(E!==0&&E===1));j+=h);if(y){for(var N=[],A=p;A<c;A+=h){var k=r[A];k!=null&&N.push(k)}return N}}return[]}function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(n),!0).forEach(function(r){sfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sfe(t,e,n){return(e=afe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function afe(t){var e=ofe(t,"string");return typeof e=="symbol"?e:e+""}function ofe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lfe(t,e,n,r,i){for(var a=(r||[]).slice(),c=a.length,{start:u}=e,{end:f}=e,h=function(y){var x=a[y];if(x==null)return 1;var E=x,j,N=()=>(j===void 0&&(j=n(x,y)),j);if(y===c-1){var A=t*(E.coordinate+t*N()/2-f);a[y]=E=br(br({},E),{},{tickCoord:A>0?E.coordinate-A*t:E.coordinate})}else a[y]=E=br(br({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var k=Gh(t,E.tickCoord,N,u,f);k&&(f=E.tickCoord-t*(N()/2+i),a[y]=br(br({},E),{},{isShow:!0}))}},p=c-1;p>=0;p--)h(p);return a}function cfe(t,e,n,r,i,a){var c=(r||[]).slice(),u=c.length,{start:f,end:h}=e;if(a){var p=r[u-1];if(p!=null){var g=n(p,u-1),y=t*(p.coordinate+t*g/2-h);if(c[u-1]=p=br(br({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate}),p.tickCoord!=null){var x=Gh(t,p.tickCoord,()=>g,f,h);x&&(h=p.tickCoord-t*(g/2+i),c[u-1]=br(br({},p),{},{isShow:!0}))}}}for(var E=a?u-1:u,j=function(k){var O=c[k];if(O==null)return 1;var C=O,V,$=()=>(V===void 0&&(V=n(O,k)),V);if(k===0){var D=t*(C.coordinate-t*$()/2-f);c[k]=C=br(br({},C),{},{tickCoord:D<0?C.coordinate-D*t:C.coordinate})}else c[k]=C=br(br({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var P=Gh(t,C.tickCoord,$,f,h);P&&(f=C.tickCoord+t*($()/2+i),c[k]=br(br({},C),{},{isShow:!0}))}},N=0;N<E;N++)j(N);return c}function iS(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:c,orientation:u,interval:f,tickFormatter:h,unit:p,angle:g}=t;if(!i||!i.length||!r)return[];if(Pe(f)||s0.isSsr){var y;return(y=nfe(i,Pe(f)?f:0))!==null&&y!==void 0?y:[]}var x=[],E=u==="top"||u==="bottom"?"width":"height",j=p&&E==="width"?vh(p,{fontSize:e,letterSpacing:n}):{width:0,height:0},N=(V,$)=>{var D=typeof h=="function"?h(V.value,$):V.value;return E==="width"?efe(vh(D,{fontSize:e,letterSpacing:n}),j,g):vh(D,{fontSize:e,letterSpacing:n})[E]},A=i[0],k=i[1],O=i.length>=2&&A!=null&&k!=null?Xr(k.coordinate-A.coordinate):1,C=tfe(a,O,E);return f==="equidistantPreserveStart"?rfe(O,C,N,i,c):f==="equidistantPreserveEnd"?ife(O,C,N,i,c):(f==="preserveStart"||f==="preserveStartEnd"?x=cfe(O,C,N,i,c,f==="preserveStartEnd"):x=lfe(O,C,N,i,c),x.filter(V=>V.isShow))}var ufe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,c=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>c&&(c=g.width)}});var u=n?n.getBoundingClientRect().width:0,f=i+a,h=c+f+u+(n?r:0);return Math.round(h)}return 0},dfe=["axisLine","width","height","className","hide","ticks","axisType"];function ffe(t,e){if(t==null)return{};var n,r,i=hfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kc.apply(null,arguments)}function ND(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(n),!0).forEach(function(r){mfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ND(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mfe(t,e,n){return(e=pfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pfe(t){var e=gfe(t,"string");return typeof e=="symbol"?e:e+""}function gfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Da={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Jn.axis};function vfe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:c,axisLine:u,otherSvgProps:f}=t;if(!u)return null;var h=dn(dn(dn({},f),ds(u)),{},{fill:"none"});if(a==="top"||a==="bottom"){var p=+(a==="top"&&!c||a==="bottom"&&c);h=dn(dn({},h),{},{x1:e,y1:n+p*i,x2:e+r,y2:n+p*i})}else{var g=+(a==="left"&&!c||a==="right"&&c);h=dn(dn({},h),{},{x1:e+g*r,y1:n,x2:e+g*r,y2:n+i})}return w.createElement("line",kc({},h,{className:Ut("recharts-cartesian-axis-line",ud(u,"className"))}))}function yfe(t,e,n,r,i,a,c,u,f){var h,p,g,y,x,E,j=u?-1:1,N=t.tickSize||c,A=Pe(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":h=p=t.coordinate,y=n+ +!u*i,g=y-j*N,E=g-j*f,x=A;break;case"left":g=y=t.coordinate,p=e+ +!u*r,h=p-j*N,x=h-j*f,E=A;break;case"right":g=y=t.coordinate,p=e+ +u*r,h=p+j*N,x=h+j*f,E=A;break;default:h=p=t.coordinate,y=n+ +u*i,g=y+j*N,E=g+j*f,x=A;break}return{line:{x1:h,y1:g,x2:p,y2:y},tick:{x,y:E}}}function bfe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function xfe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function _fe(t){var{option:e,tickProps:n,value:r}=t,i,a=Ut(n.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(e))i=w.cloneElement(e,dn(dn({},n),{},{className:a}));else if(typeof e=="function")i=e(dn(dn({},n),{},{className:a}));else{var c="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(c=Ut(c,Cue(e))),i=w.createElement(tS,kc({},n,{className:c}),r)}return i}var wfe=w.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:c,unit:u,padding:f,tickTextProps:h,orientation:p,mirror:g,x:y,y:x,width:E,height:j,tickSize:N,tickMargin:A,fontSize:k,letterSpacing:O,getTicksConfig:C,events:V,axisType:$}=t,D=iS(dn(dn({},C),{},{ticks:n}),k,O),P=bfe(p,g),R=xfe(p,g),q=ds(C),L=um(r),M={};typeof i=="object"&&(M=i);var U=dn(dn({},q),{},{fill:"none"},M),ge=D.map(ce=>dn({entry:ce},yfe(ce,y,x,E,j,p,N,g,A))),Z=ge.map(ce=>{var{entry:Y,line:we}=ce;return w.createElement(qi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},i&&w.createElement("line",kc({},U,we,{className:Ut("recharts-cartesian-axis-tick-line",ud(i,"className"))})))}),H=ge.map((ce,Y)=>{var we,Q,{entry:F,tick:re}=ce,ye=dn(dn(dn(dn({verticalAnchor:R},q),{},{textAnchor:P,stroke:"none",fill:a},re),{},{index:Y,payload:F,visibleTicksCount:D.length,tickFormatter:c,padding:f},h),{},{angle:(we=(Q=h?.angle)!==null&&Q!==void 0?Q:q.angle)!==null&&we!==void 0?we:0}),Ee=dn(dn({},ye),L);return w.createElement(qi,kc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(F.value,"-").concat(F.coordinate,"-").concat(F.tickCoord)},VE(V,F,Y)),r&&w.createElement(_fe,{option:r,tickProps:Ee,value:"".concat(typeof c=="function"?c(F.value,Y):F.value).concat(u||"")}))});return w.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat($,"-ticks")},H.length>0&&w.createElement(Fi,{zIndex:Jn.label},w.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat($,"-tick-labels"),ref:e},H)),Z.length>0&&w.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat($,"-tick-lines")},Z))}),jfe=w.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:c,ticks:u,axisType:f}=t,h=ffe(t,dfe),[p,g]=w.useState(""),[y,x]=w.useState(""),E=w.useRef(null);w.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var N;return ufe({ticks:E.current,label:(N=t.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var j=w.useCallback(N=>{if(N){var A=N.getElementsByClassName("recharts-cartesian-axis-tick-value");E.current=A;var k=A[0];if(k){var O=window.getComputedStyle(k),C=O.fontSize,V=O.letterSpacing;(C!==p||V!==y)&&(g(C),x(V))}}},[p,y]);return c||r!=null&&r<=0||i!=null&&i<=0?null:w.createElement(Fi,{zIndex:t.zIndex},w.createElement(qi,{className:Ut("recharts-cartesian-axis",a)},w.createElement(vfe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:ds(t)}),w.createElement(wfe,{ref:j,axisType:f,events:h,fontSize:p,getTicksConfig:t,height:t.height,letterSpacing:y,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:u,unit:t.unit,width:t.width,x:t.x,y:t.y}),w.createElement(iue,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},w.createElement(mue,{label:t.label,labelRef:t.labelRef}),t.children)))}),sS=w.forwardRef((t,e)=>{var n=Mr(t,Da);return w.createElement(jfe,kc({},n,{ref:e}))});sS.displayName="CartesianAxis";var Efe=["x1","y1","x2","y2","key"],Nfe=["offset"],Sfe=["xAxisId","yAxisId"],Afe=["xAxisId","yAxisId"];function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){Tfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tfe(t,e,n){return(e=Cfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cfe(t){var e=Ofe(t,"string");return typeof e=="symbol"?e:e+""}function Ofe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(null,arguments)}function ny(t,e){if(t==null)return{};var n,r,i=Ife(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ife(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Pfe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:c,ry:u}=t;return w.createElement("rect",{x:r,y:i,ry:u,width:a,height:c,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Zq(t){var{option:e,lineItemProps:n}=t,r;if(w.isValidElement(e))r=w.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:c,x2:u,y2:f,key:h}=n,p=ny(n,Efe),g=(i=ds(p))!==null&&i!==void 0?i:{},{offset:y}=g,x=ny(g,Nfe);r=w.createElement("line",uc({},x,{x1:a,y1:c,x2:u,y2:f,fill:"none",key:h}))}return r}function Rfe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:c}=t,u=ny(t,Sfe),f=i.map((h,p)=>{var g=wr(wr({},u),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(p),index:p});return w.createElement(Zq,{key:"line-".concat(p),option:r,lineItemProps:g})});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function kfe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:c}=t,u=ny(t,Afe),f=i.map((h,p)=>{var g=wr(wr({},u),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(p),index:p});return w.createElement(Zq,{option:r,lineItemProps:g,key:"line-".concat(p)})});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function Dfe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:c,horizontalPoints:u,horizontal:f=!0}=t;if(!f||!e||!e.length||u==null)return null;var h=u.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var x=h[y+1],E=x==null,j=E?i+c-g:x-g;if(j<=0)return null;var N=y%e.length;return w.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:j,width:a,stroke:"none",fill:e[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function Mfe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:c,height:u,verticalPoints:f}=t;if(!e||!n||!n.length)return null;var h=f.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==h[0]&&h.unshift(0);var p=h.map((g,y)=>{var x=h[y+1],E=x==null,j=E?i+c-g:x-g;if(j<=0)return null;var N=y%n.length;return w.createElement("rect",{key:"react-".concat(y),x:g,y:a,width:j,height:u,stroke:"none",fill:n[N],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var zfe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return P3(iS(wr(wr(wr({},Da),n),{},{ticks:R3(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Lfe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return P3(iS(wr(wr(wr({},Da),n),{},{ticks:R3(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},qfe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Jn.grid};function aj(t){var e=q3(),n=U3(),r=L3(),i=wr(wr({},Mr(t,qfe)),{},{x:Pe(t.x)?t.x:r.left,y:Pe(t.y)?t.y:r.top,width:Pe(t.width)?t.width:r.width,height:Pe(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:c,x:u,y:f,width:h,height:p,syncWithTicks:g,horizontalValues:y,verticalValues:x}=i,E=Er(),j=Le(R=>bk(R,"xAxis",a,E)),N=Le(R=>bk(R,"yAxis",c,E));if(!Js(h)||!Js(p)||!Pe(u)||!Pe(f))return null;var A=i.verticalCoordinatesGenerator||zfe,k=i.horizontalCoordinatesGenerator||Lfe,{horizontalPoints:O,verticalPoints:C}=i;if((!O||!O.length)&&typeof k=="function"){var V=y&&y.length,$=k({yAxis:N?wr(wr({},N),{},{ticks:V?y:N.ticks}):void 0,width:e??h,height:n??p,offset:r},V?!0:g);Tv(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(O=$)}if((!C||!C.length)&&typeof A=="function"){var D=x&&x.length,P=A({xAxis:j?wr(wr({},j),{},{ticks:D?x:j.ticks}):void 0,width:e??h,height:n??p,offset:r},D?!0:g);Tv(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(C=P)}return w.createElement(Fi,{zIndex:i.zIndex},w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(Pfe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),w.createElement(Dfe,uc({},i,{horizontalPoints:O})),w.createElement(Mfe,uc({},i,{verticalPoints:C})),w.createElement(Rfe,uc({},i,{offset:r,horizontalPoints:O,xAxis:j,yAxis:N})),w.createElement(kfe,uc({},i,{offset:r,verticalPoints:C,xAxis:j,yAxis:N}))))}aj.displayName="CartesianGrid";var Ufe={},eU=ei({name:"errorBars",initialState:Ufe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Yve,replaceErrorBar:Xve,removeErrorBar:Jve}=eU.actions,Vfe=eU.reducer,Bfe=["children"];function $fe(t,e){if(t==null)return{};var n,r,i=Ffe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ffe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Hfe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Gfe=w.createContext(Hfe);function tU(t){var{children:e}=t,n=$fe(t,Bfe);return w.createElement(Gfe.Provider,{value:n},e)}function aS(t,e){var n,r,i=Le(h=>no(h,t)),a=Le(h=>ro(h,e)),c=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Qn.allowDataOverflow,u=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Wn.allowDataOverflow,f=c||u;return{needClip:f,needClipX:c,needClipY:u}}function nU(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=rS(),{needClipX:a,needClipY:c,needClip:u}=aS(e,n);if(!u||!i)return null;var{x:f,y:h,width:p,height:g}=i;return w.createElement("clipPath",{id:"clipPath-".concat(r)},w.createElement("rect",{x:a?f:f-p/2,y:c?h:h-g/2,width:a?p:p*2,height:c?g:g*2}))}var rU=(t,e,n,r)=>gl(t,"xAxis",e,r),iU=(t,e,n,r)=>pl(t,"xAxis",e,r),sU=(t,e,n,r)=>gl(t,"yAxis",n,r),aU=(t,e,n,r)=>pl(t,"yAxis",n,r),Kfe=ue([Pt,rU,sU,iU,aU],(t,e,n,r,i)=>Xa(t,"xAxis")?fd(e,r,!1):fd(n,i,!1)),Qfe=(t,e,n,r,i)=>i;function Wfe(t){return t.type==="line"}var Yfe=ue([w0,Qfe],(t,e)=>t.filter(Wfe).find(n=>n.id===e)),Xfe=ue([Pt,rU,sU,iU,aU,Yfe,Kfe,NN],(t,e,n,r,i,a,c,u)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:p}=u;if(!(a==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||c==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:g,data:y}=a,x;if(y!=null&&y.length>0?x=y:x=f?.slice(h,p+1),x!=null)return Lhe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:g,bandSize:c,displayedData:x})}});function Jfe(t){var e=um(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,c=Number(i),u=Number(a);return(Number.isNaN(c)||c<0)&&(c=n),(Number.isNaN(u)||u<0)&&(u=r),{r:c,strokeWidth:u}}return{r:n,strokeWidth:r}}var I1={exports:{}},P1={};var AD;function Zfe(){if(AD)return P1;AD=1;var t=yd();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,c=t.useMemo,u=t.useDebugValue;return P1.useSyncExternalStoreWithSelector=function(f,h,p,g,y){var x=i(null);if(x.current===null){var E={hasValue:!1,value:null};x.current=E}else E=x.current;x=c(function(){function N(V){if(!A){if(A=!0,k=V,V=g(V),y!==void 0&&E.hasValue){var $=E.value;if(y($,V))return O=$}return O=V}if($=O,n(k,V))return $;var D=g(V);return y!==void 0&&y($,D)?(k=V,$):(k=V,O=D)}var A=!1,k,O,C=p===void 0?null:p;return[function(){return N(h())},C===null?void 0:function(){return N(C())}]},[h,p,g,y]);var j=r(f,x[0],x[1]);return a(function(){E.hasValue=!0,E.value=j},[j]),u(j),j},P1}var TD;function ehe(){return TD||(TD=1,I1.exports=Zfe()),I1.exports}ehe();function the(t){t()}function nhe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){the(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var CD={notify(){},get:()=>[]};function rhe(t,e){let n,r=CD,i=0,a=!1;function c(j){p();const N=r.subscribe(j);let A=!1;return()=>{A||(A=!0,N(),g())}}function u(){r.notify()}function f(){E.onStateChange&&E.onStateChange()}function h(){return a}function p(){i++,n||(n=t.subscribe(f),r=nhe())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=CD)}function y(){a||(a=!0,p())}function x(){a&&(a=!1,g())}const E={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:h,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return E}var ihe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",she=ihe(),ahe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ohe=ahe(),lhe=()=>she||ohe?w.useLayoutEffect:w.useEffect,che=lhe();function OD(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function uhe(t,e){if(OD(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!OD(t[n[i]],e[n[i]]))return!1;return!0}var dhe=Symbol.for("react-redux-context"),fhe=typeof globalThis<"u"?globalThis:{};function hhe(){if(!w.createContext)return{};const t=fhe[dhe]??=new Map;let e=t.get(w.createContext);return e||(e=w.createContext(null),t.set(w.createContext,e)),e}var mhe=hhe();function phe(t){const{children:e,context:n,serverState:r,store:i}=t,a=w.useMemo(()=>{const f=rhe(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),c=w.useMemo(()=>i.getState(),[i]);che(()=>{const{subscription:f}=a;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),c!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[a,c]);const u=n||mhe;return w.createElement(u.Provider,{value:a},e)}var ghe=phe,vhe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function yhe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function A0(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(vhe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!uhe(t[r],e[r]))return!1}else if(!yhe(t[r],e[r]))return!1;return!0}var bhe=["id"],xhe=["type","layout","connectNulls","needClip","shape"],_he=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kh.apply(null,arguments)}function ID(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ID(Object(n),!0).forEach(function(r){whe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function whe(t,e,n){return(e=jhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jhe(t){var e=Ehe(t,"string");return typeof e=="symbol"?e:e+""}function Ehe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oS(t,e){if(t==null)return{};var n,r,i=Nhe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var She=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Yy(n,e),payload:t}]},Ahe=w.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:c,hide:u,unit:f,tooltipType:h,id:p}=t,g={dataDefinedOnItem:n,getPosition:Uc,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:Yy(c,e),hide:u,type:h,color:r,unit:f,graphicalItemId:p}};return w.createElement($q,{tooltipEntrySettings:g})}),oU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function The(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var Che=(t,e,n)=>{var r=n.reduce((x,E)=>x+E);if(!r)return oU(e,t);for(var i=Math.floor(t/r),a=t%r,c=e-t,u=[],f=0,h=0;f<n.length;h+=(p=n[f])!==null&&p!==void 0?p:0,++f){var p,g=n[f];if(g!=null&&h+g>a){u=[...n.slice(0,f),a-h];break}}var y=u.length%2===0?[0,c]:[c];return[...The(n,i),...u,...y].map(x=>"".concat(x,"px")).join(", ")};function Ohe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:a,needClip:c}=r,{id:u}=r,f=oS(r,bhe),h=ds(f);return w.createElement(gde,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:h,needClip:c,clipPathId:e})}function Ihe(t){var{showLabels:e,children:n,points:r}=t,i=w.useMemo(()=>r?.map(a=>{var c,u,f={x:(c=a.x)!==null&&c!==void 0?c:0,y:(u=a.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return zs(zs({},f),{},{value:a.value,payload:a.payload,viewBox:f,parentViewBox:void 0,fill:void 0})}),[r]);return w.createElement(Pq,{value:e?i:void 0},n)}function PD(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:a}=t,{type:c,layout:u,connectNulls:f,needClip:h,shape:p}=a,g=oS(a,xhe),y=zs(zs({},Rr(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(e,")"):void 0,points:r,type:c,layout:u,connectNulls:f,strokeDasharray:i??a.strokeDasharray});return w.createElement(w.Fragment,null,r?.length>1&&w.createElement(qq,Kh({shapeType:"curve",option:p},y,{pathRef:n})),w.createElement(Ohe,{points:r,clipPathId:e,props:a}))}function Phe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Rhe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:c,strokeDasharray:u,isAnimationActive:f,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:y,width:x,height:E,onAnimationEnd:j,onAnimationStart:N}=n,A=i.current,k=o0(c,"recharts-line-"),O=w.useRef(k),[C,V]=w.useState(!1),$=!C,D=w.useCallback(()=>{typeof j=="function"&&j(),V(!1)},[j]),P=w.useCallback(()=>{typeof N=="function"&&N(),V(!0)},[N]),R=Phe(r.current),q=w.useRef(0);O.current!==k&&(q.current=a.current,O.current=k);var L=q.current;return w.createElement(Ihe,{points:c,showLabels:$},n.children,w.createElement(a0,{animationId:k,begin:h,duration:p,isActive:f,easing:g,onAnimationEnd:D,onAnimationStart:P,key:k},M=>{var U=mn(L,R+L,M),ge=Math.min(U,R),Z;if(f)if(u){var H="".concat(u).split(/[,\s]+/gim).map(we=>parseFloat(we));Z=Che(ge,R,H)}else Z=oU(R,ge);else Z=u==null?void 0:String(u);if(M>0&&R>0&&(i.current=c,a.current=Math.max(a.current,ge)),A){var ce=A.length/c.length,Y=M===1?c:c.map((we,Q)=>{var F=Math.floor(Q*ce);if(A[F]){var re=A[F];return zs(zs({},we),{},{x:mn(re.x,we.x,M),y:mn(re.y,we.y,M)})}return y?zs(zs({},we),{},{x:mn(x*2,we.x,M),y:mn(E/2,we.y,M)}):zs(zs({},we),{},{x:we.x,y:we.y})});return i.current=Y,w.createElement(PD,{props:n,points:Y,clipPathId:e,pathRef:r,strokeDasharray:Z})}return w.createElement(PD,{props:n,points:c,clipPathId:e,pathRef:r,strokeDasharray:Z})}),w.createElement(kq,{label:n.label}))}function khe(t){var{clipPathId:e,props:n}=t,r=w.useRef(null),i=w.useRef(0),a=w.useRef(null);return w.createElement(Rhe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var Dhe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Dn(t.payload,e)}};class Mhe extends w.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:a,yAxisId:c,top:u,left:f,width:h,height:p,id:g,needClip:y,zIndex:x}=this.props;if(e)return null;var E=Ut("recharts-line",i),j=g,{r:N,strokeWidth:A}=Jfe(n),k=Lq(n),O=N*2+A,C=y?"url(#clipPath-".concat(k?"":"dots-").concat(j,")"):void 0;return w.createElement(Fi,{zIndex:x},w.createElement(qi,{className:E},y&&w.createElement("defs",null,w.createElement(nU,{clipPathId:j,xAxisId:a,yAxisId:c}),!k&&w.createElement("clipPath",{id:"clipPath-dots-".concat(j)},w.createElement("rect",{x:f-O/2,y:u-O/2,width:h+O,height:p+O}))),w.createElement(tU,{xAxisId:a,yAxisId:c,data:r,dataPointFormatter:Dhe,errorBarOffset:0},w.createElement(khe,{props:this.props,clipPathId:j}))),w.createElement(Mde,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:C}))}}var lU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Jn.line,type:"linear"};function zhe(t){var e=Mr(t,lU),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:c,connectNulls:u,dot:f,hide:h,isAnimationActive:p,label:g,legendType:y,xAxisId:x,yAxisId:E,id:j}=e,N=oS(e,_he),{needClip:A}=aS(x,E),k=rS(),O=Vc(),C=Er(),V=Le(q=>Xfe(q,x,E,C,j));if(O!=="horizontal"&&O!=="vertical"||V==null||k==null)return null;var{height:$,width:D,x:P,y:R}=k;return w.createElement(Mhe,Kh({},N,{id:j,connectNulls:u,dot:f,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:c,isAnimationActive:p,hide:h,label:g,legendType:y,xAxisId:x,yAxisId:E,points:V,layout:O,height:$,width:D,left:P,top:R,needClip:A}))}function Lhe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:c,bandSize:u,displayedData:f}=t;return f.map((h,p)=>{var g=Dn(h,c);if(e==="horizontal"){var y=vP({axis:n,ticks:i,bandSize:u,entry:h,index:p}),x=an(g)?null:r.scale.map(g);return{x:y,y:x??null,value:g,payload:h}}var E=an(g)?null:n.scale.map(g),j=vP({axis:r,ticks:a,bandSize:u,entry:h,index:p});return E==null||j==null?null:{x:E,y:j,value:g,payload:h}}).filter(Boolean)}function qhe(t){var e=Mr(t,lU),n=Er();return w.createElement(Hq,{id:e.id,type:"line"},r=>w.createElement(w.Fragment,null,w.createElement(Fq,{legendPayload:She(e)}),w.createElement(Ahe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),w.createElement(Kq,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),w.createElement(zhe,Kh({},e,{id:r}))))}var cU=w.memo(qhe,A0);cU.displayName="Line";function Fc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Qq}function Hc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Qq}var Uhe="Invariant failed";function Vhe(t,e){throw new Error(Uhe)}function oj(){return oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oj.apply(null,arguments)}function ry(t){return w.createElement(qq,oj({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Bhe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Pe(e))return e;var a=Pe(r)||an(r);return a?e(r,i):(a||Vhe(),n)}},$he=(t,e,n)=>n,Fhe=(t,e)=>e,Am=ue([w0,Fhe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Hhe=ue([Am],t=>t?.maxBarSize),Ghe=(t,e,n,r)=>r,Khe=ue([Pt,w0,Fc,Hc,$he],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Qhe=(t,e,n)=>{var r=Pt(t),i=Fc(t,e),a=Hc(t,e);if(!(i==null||a==null))return r==="horizontal"?Zw(t,"yAxis",a,n):Zw(t,"xAxis",i,n)},Whe=(t,e)=>{var n=Pt(t),r=Fc(t,e),i=Hc(t,e);if(!(r==null||i==null))return n==="horizontal"?yk(t,"xAxis",r):yk(t,"yAxis",i)},Yhe=ue([Khe,Jse,Whe],zde),Xhe=(t,e,n)=>{var r,i,a=Am(t,e);if(a==null)return 0;var c=Fc(t,e),u=Hc(t,e);if(c==null||u==null)return 0;var f=Pt(t),h=J6(t),{maxBarSize:p}=a,g=an(p)?h:p,y,x;return f==="horizontal"?(y=gl(t,"xAxis",c,n),x=pl(t,"xAxis",c,n)):(y=gl(t,"yAxis",u,n),x=pl(t,"yAxis",u,n)),(r=(i=fd(y,x,!0))!==null&&i!==void 0?i:g)!==null&&r!==void 0?r:0},uU=(t,e,n)=>{var r=Pt(t),i=Fc(t,e),a=Hc(t,e);if(!(i==null||a==null)){var c,u;return r==="horizontal"?(c=gl(t,"xAxis",i,n),u=pl(t,"xAxis",i,n)):(c=gl(t,"yAxis",a,n),u=pl(t,"yAxis",a,n)),fd(c,u)}},Jhe=ue([Yhe,J6,Xse,Z6,Xhe,uU,Hhe],Bde),Zhe=(t,e,n)=>{var r=Fc(t,e);if(r!=null)return gl(t,"xAxis",r,n)},eme=(t,e,n)=>{var r=Hc(t,e);if(r!=null)return gl(t,"yAxis",r,n)},tme=(t,e,n)=>{var r=Fc(t,e);if(r!=null)return pl(t,"xAxis",r,n)},nme=(t,e,n)=>{var r=Hc(t,e);if(r!=null)return pl(t,"yAxis",r,n)},rme=ue([Jhe,Am],Fde),ime=ue([Qhe,Am],$de),sme=ue([Zn,XE,Zhe,eme,tme,nme,rme,Pt,$se,uU,ime,Am,Ghe],(t,e,n,r,i,a,c,u,f,h,p,g,y)=>{var{chartData:x,dataStartIndex:E,dataEndIndex:j}=f;if(!(g==null||c==null||e==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||a==null||h==null)){var{data:N}=g,A;if(N!=null&&N.length>0?A=N:A=x?.slice(E,j+1),A!=null)return Rme({layout:u,barSettings:g,pos:c,parentViewBox:e,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:p,displayedData:A,offset:t,cells:y,dataStartIndex:E})}}),ame=["index"];function lj(){return lj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lj.apply(null,arguments)}function ome(t,e){if(t==null)return{};var n,r,i=lme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dU=w.createContext(void 0),cme=t=>{var e=w.useContext(dU);if(e!=null)return e.stackId;if(t!=null)return Gee(t)},ume=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),dme=t=>{var e=w.useContext(dU);if(e!=null){var{stackId:n}=e;return"url(#".concat(ume(n,t),")")}},fU=t=>{var{index:e}=t,n=ome(t,ame),r=dme(e);return w.createElement(qi,lj({className:"recharts-bar-stack-layer",clipPath:r},n))},fme=["onMouseEnter","onMouseLeave","onClick"],hme=["value","background","tooltipPosition"],mme=["id"],pme=["onMouseEnter","onClick","onMouseLeave"];function Ga(){return Ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ga.apply(null,arguments)}function RD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(n),!0).forEach(function(r){gme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gme(t,e,n){return(e=vme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vme(t){var e=yme(t,"string");return typeof e=="symbol"?e:e+""}function yme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iy(t,e){if(t==null)return{};var n,r,i=bme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xme=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Yy(n,e),payload:t}]},_me=w.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:c,unit:u,tooltipType:f,id:h}=t,p={dataDefinedOnItem:void 0,getPosition:Uc,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Yy(a,e),hide:c,type:f,color:i,unit:u,graphicalItemId:h}};return w.createElement($q,{tooltipEntrySettings:p})});function wme(t){var e=Le(Rc),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:c,onMouseLeave:u,onClick:f}=a,h=iy(a,fme),p=Uq(c,r,a.id),g=Vq(u),y=Bq(f,r,a.id);if(!i||n==null)return null;var x=um(i);return w.createElement(Fi,{zIndex:Hde(i,Jn.barBackground)},n.map((E,j)=>{var{value:N,background:A,tooltipPosition:k}=E,O=iy(E,hme);if(!A)return null;var C=p(E,j),V=g(E,j),$=y(E,j),D=Tr(Tr(Tr(Tr(Tr({option:i,isActive:String(j)===e},O),{},{fill:"#eee"},A),x),VE(h,E,j)),{},{onMouseEnter:C,onMouseLeave:V,onClick:$,dataKey:r,index:j,className:"recharts-bar-background-rectangle"});return w.createElement(ry,Ga({key:"background-bar-".concat(j)},D))}))}function jme(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var c={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Tr(Tr({},c),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:c,fill:a.fill})});return w.createElement(Pq,{value:e?i:void 0},n)}function Eme(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:c}=t,u=Le(Rc),f=Le(uq),h=n&&String(a)===u&&(f==null||c===f),p=h?n:e;return h?w.createElement(Fi,{zIndex:Jn.activeBar},w.createElement(fU,{index:a},w.createElement(ry,Ga({},r,{name:String(r.name)},i,{isActive:h,option:p,index:a,dataKey:c})))):w.createElement(ry,Ga({},r,{name:String(r.name)},i,{isActive:h,option:p,index:a,dataKey:c}))}function Nme(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return w.createElement(ry,Ga({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function Sme(t){var e,{data:n,props:r}=t,i=(e=ds(r))!==null&&e!==void 0?e:{},{id:a}=i,c=iy(i,mme),{shape:u,dataKey:f,activeBar:h}=r,{onMouseEnter:p,onClick:g,onMouseLeave:y}=r,x=iy(r,pme),E=Uq(p,f,a),j=Vq(y),N=Bq(g,f,a);return n?w.createElement(w.Fragment,null,n.map((A,k)=>w.createElement(fU,Ga({index:k,key:"rectangle-".concat(A?.x,"-").concat(A?.y,"-").concat(A?.value,"-").concat(k),className:"recharts-bar-rectangle"},VE(x,A,k),{onMouseEnter:E(A,k),onMouseLeave:j(A,k),onClick:N(A,k)}),h?w.createElement(Eme,{shape:u,activeBar:h,baseProps:c,entry:A,index:k,dataKey:f}):w.createElement(Nme,{shape:u,baseProps:c,entry:A,index:k,dataKey:f})))):null}function Ame(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:c,animationDuration:u,animationEasing:f,onAnimationEnd:h,onAnimationStart:p}=e,g=n.current,y=o0(e,"recharts-bar-"),[x,E]=w.useState(!1),j=!x,N=w.useCallback(()=>{typeof h=="function"&&h(),E(!1)},[h]),A=w.useCallback(()=>{typeof p=="function"&&p(),E(!0)},[p]);return w.createElement(jme,{showLabels:j,rects:r},w.createElement(a0,{animationId:y,begin:c,duration:u,isActive:a,easing:f,onAnimationEnd:N,onAnimationStart:A,key:y},k=>{var O=k===1?r:r?.map((C,V)=>{var $=g&&g[V];if($)return Tr(Tr({},C),{},{x:mn($.x,C.x,k),y:mn($.y,C.y,k),width:mn($.width,C.width,k),height:mn($.height,C.height,k)});if(i==="horizontal"){var D=mn(0,C.height,k),P=mn(C.stackedBarStart,C.y,k);return Tr(Tr({},C),{},{y:P,height:D})}var R=mn(0,C.width,k),q=mn(C.stackedBarStart,C.x,k);return Tr(Tr({},C),{},{width:R,x:q})});return k>0&&(n.current=O??null),O==null?null:w.createElement(qi,null,w.createElement(Sme,{props:e,data:O}))}),w.createElement(kq,{label:e.label}),e.children)}function Tme(t){var e=w.useRef(null);return w.createElement(Ame,{previousRectanglesRef:e,props:t})}var hU=0,Cme=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Dn(t,e)}};class Ome extends w.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:c,needClip:u,background:f,id:h}=this.props;if(e||n==null)return null;var p=Ut("recharts-bar",i),g=h;return w.createElement(qi,{className:p,id:h},u&&w.createElement("defs",null,w.createElement(nU,{clipPathId:g,xAxisId:a,yAxisId:c})),w.createElement(qi,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},w.createElement(wme,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),w.createElement(Tme,this.props)))}}var Ime={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:hU,xAxisId:0,yAxisId:0,zIndex:Jn.bar};function Pme(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:c,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:p}=t,{needClip:g}=aS(e,n),y=Vc(),x=Er(),E=Rue(t.children,eS),j=Le(k=>sme(k,t.id,x,E));if(y!=="vertical"&&y!=="horizontal")return null;var N,A=j?.[0];return A==null||A.height==null||A.width==null?N=0:N=y==="vertical"?A.height/2:A.width/2,w.createElement(tU,{xAxisId:e,yAxisId:n,data:j,dataPointFormatter:Cme,errorBarOffset:N},w.createElement(Ome,Ga({},t,{layout:y,needClip:g,data:j,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:c,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:p})))}function Rme(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:c,yAxis:u,xAxisTicks:f,yAxisTicks:h,stackedData:p,displayedData:g,offset:y,cells:x,parentViewBox:E,dataStartIndex:j}=t,N=e==="horizontal"?u:c,A=p?N.scale.domain():null,k=Kee({numericAxis:N}),O=N.scale.map(k);return g.map((C,V)=>{var $,D,P,R,q,L;if(p){var M=p[V+j];if(M==null)return null;$=Vee(M,A)}else $=Dn(C,n),Array.isArray($)||($=[k,$]);var U=Bhe(r,hU)($[1],V);if(e==="horizontal"){var ge,Z=u.scale.map($[0]),H=u.scale.map($[1]);if(Z==null||H==null)return null;D=yP({axis:c,ticks:f,bandSize:a,offset:i.offset,entry:C,index:V}),P=(ge=H??Z)!==null&&ge!==void 0?ge:void 0,R=i.size;var ce=Z-H;if(q=Ys(ce)?0:ce,L={x:D,y:y.top,width:R,height:y.height},Math.abs(U)>0&&Math.abs(q)<Math.abs(U)){var Y=Xr(q||U)*(Math.abs(U)-Math.abs(q));P-=Y,q+=Y}}else{var we=c.scale.map($[0]),Q=c.scale.map($[1]);if(we==null||Q==null)return null;if(D=we,P=yP({axis:u,ticks:h,bandSize:a,offset:i.offset,entry:C,index:V}),R=Q-we,q=i.size,L={x:y.left,y:P,width:y.width,height:q},Math.abs(U)>0&&Math.abs(R)<Math.abs(U)){var F=Xr(R||U)*(Math.abs(U)-Math.abs(R));R+=F}}if(D==null||P==null||R==null||q==null)return null;var re=Tr(Tr({},C),{},{stackedBarStart:O,x:D,y:P,width:R,height:q,value:p?$:$[1],payload:C,background:L,tooltipPosition:{x:D+R/2,y:P+q/2},parentViewBox:E},x&&x[V]&&x[V].props);return re}).filter(Boolean)}function kme(t){var e=Mr(t,Ime),n=cme(e.stackId),r=Er();return w.createElement(Hq,{id:e.id,type:"bar"},i=>w.createElement(w.Fragment,null,w.createElement(Fq,{legendPayload:xme(e)}),w.createElement(_me,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),w.createElement(Kq,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),w.createElement(Fi,{zIndex:e.zIndex},w.createElement(Pme,Ga({},e,{id:i})))))}var mU=w.memo(kme,A0);mU.displayName="Bar";var Dme=["domain","range"],Mme=["domain","range"];function kD(t,e){if(t==null)return{};var n,r,i=zme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function DD(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function pU(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=kD(t,Dme),{domain:a,range:c}=e,u=kD(e,Mme);return!DD(n,a)||!DD(r,c)?!1:A0(i,u)}var Lme=["type"],qme=["dangerouslySetInnerHTML","ticks","scale"],Ume=["id","scale"];function cj(){return cj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cj.apply(null,arguments)}function MD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(n),!0).forEach(function(r){Vme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vme(t,e,n){return(e=Bme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bme(t){var e=$me(t,"string");return typeof e=="symbol"?e:e+""}function $me(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uj(t,e){if(t==null)return{};var n,r,i=Fme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Hme(t){var e=jn(),n=w.useRef(null),r=V3(),{type:i}=t,a=uj(t,Lme),c=g0(r,"xAxis",i),u=w.useMemo(()=>{if(c!=null)return zD(zD({},a),{},{type:c})},[a,c]);return w.useLayoutEffect(()=>{u!=null&&(n.current===null?e(_de(u)):n.current!==u&&e(wde({prev:n.current,next:u})),n.current=u)},[u,e]),w.useLayoutEffect(()=>()=>{n.current&&(e(jde(n.current)),n.current=null)},[e]),null}var Gme=t=>{var{xAxisId:e,className:n}=t,r=Le(XE),i=Er(),a="xAxis",c=Le(A=>$5(A,a,e,i)),u=Le(A=>q5(A,e)),f=Le(A=>Zae(A,e)),h=Le(A=>l5(A,e));if(u==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:y}=t,x=uj(t,qme),{id:E,scale:j}=h,N=uj(h,Ume);return w.createElement(sS,cj({},x,N,{x:f.x,y:f.y,width:u.width,height:u.height,className:Ut("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:c,axisType:a}))},Kme={allowDataOverflow:Qn.allowDataOverflow,allowDecimals:Qn.allowDecimals,allowDuplicatedCategory:Qn.allowDuplicatedCategory,angle:Qn.angle,axisLine:Da.axisLine,height:Qn.height,hide:!1,includeHidden:Qn.includeHidden,interval:Qn.interval,label:!1,minTickGap:Qn.minTickGap,mirror:Qn.mirror,orientation:Qn.orientation,padding:Qn.padding,reversed:Qn.reversed,scale:Qn.scale,tick:Qn.tick,tickCount:Qn.tickCount,tickLine:Da.tickLine,tickSize:Da.tickSize,type:Qn.type,xAxisId:0},Qme=t=>{var e=Mr(t,Kme);return w.createElement(w.Fragment,null,w.createElement(Hme,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),w.createElement(Gme,e))},dj=w.memo(Qme,pU);dj.displayName="XAxis";var Wme=["type"],Yme=["dangerouslySetInnerHTML","ticks","scale"],Xme=["id","scale"];function fj(){return fj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fj.apply(null,arguments)}function LD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LD(Object(n),!0).forEach(function(r){Jme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jme(t,e,n){return(e=Zme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zme(t){var e=epe(t,"string");return typeof e=="symbol"?e:e+""}function epe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hj(t,e){if(t==null)return{};var n,r,i=tpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function npe(t){var e=jn(),n=w.useRef(null),r=V3(),{type:i}=t,a=hj(t,Wme),c=g0(r,"yAxis",i),u=w.useMemo(()=>{if(c!=null)return qD(qD({},a),{},{type:c})},[c,a]);return w.useLayoutEffect(()=>{u!=null&&(n.current===null?e(Ede(u)):n.current!==u&&e(Nde({prev:n.current,next:u})),n.current=u)},[u,e]),w.useLayoutEffect(()=>()=>{n.current&&(e(Sde(n.current)),n.current=null)},[e]),null}function rpe(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=w.useRef(null),c=w.useRef(null),u=Le(XE),f=Er(),h=jn(),p="yAxis",g=Le($=>U5($,e)),y=Le($=>toe($,e)),x=Le($=>$5($,p,e,f)),E=Le($=>c5($,e));if(w.useLayoutEffect(()=>{if(!(r!=="auto"||!g||nS(i)||w.isValidElement(i)||E==null)){var $=a.current;if($){var D=$.getCalculatedWidth();Math.round(g.width)!==Math.round(D)&&h(Ade({id:e,width:D}))}}},[x,g,h,i,e,r,E]),g==null||y==null||E==null)return null;var{dangerouslySetInnerHTML:j,ticks:N,scale:A}=t,k=hj(t,Yme),{id:O,scale:C}=E,V=hj(E,Xme);return w.createElement(sS,fj({},k,V,{ref:a,labelRef:c,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:g.width,height:g.height,className:Ut("recharts-".concat(p," ").concat(p),n),viewBox:u,ticks:x,axisType:p}))}var ipe={allowDataOverflow:Wn.allowDataOverflow,allowDecimals:Wn.allowDecimals,allowDuplicatedCategory:Wn.allowDuplicatedCategory,angle:Wn.angle,axisLine:Da.axisLine,hide:!1,includeHidden:Wn.includeHidden,interval:Wn.interval,label:!1,minTickGap:Wn.minTickGap,mirror:Wn.mirror,orientation:Wn.orientation,padding:Wn.padding,reversed:Wn.reversed,scale:Wn.scale,tick:Wn.tick,tickCount:Wn.tickCount,tickLine:Da.tickLine,tickSize:Da.tickSize,type:Wn.type,width:Wn.width,yAxisId:0},spe=t=>{var e=Mr(t,ipe);return w.createElement(w.Fragment,null,w.createElement(npe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),w.createElement(rpe,e))},mj=w.memo(spe,pU);mj.displayName="YAxis";var ape=(t,e)=>e,lS=ue([ape,Pt,a5,nr,aq,io,gle,Zn],jle),cS=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},gU=Ui("mouseClick"),vU=hm();vU.startListening({actionCreator:gU,effect:(t,e)=>{var n=t.payload,r=lS(e.getState(),cS(n));r?.activeIndex!=null&&e.dispatch(poe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var pj=Ui("mouseMove"),yU=hm(),Ng=null;yU.startListening({actionCreator:pj,effect:(t,e)=>{var n=t.payload;Ng!==null&&cancelAnimationFrame(Ng);var r=cS(n);Ng=requestAnimationFrame(()=>{var i=e.getState(),a=FN(i,i.tooltip.settings.shared);if(a==="axis"){var c=lS(i,r);c?.activeIndex!=null?e.dispatch(X5({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):e.dispatch(Y5())}Ng=null})}});function ope(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var UD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},bU=ei({name:"rootProps",initialState:UD,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:UD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),lpe=bU.reducer,{updateOptions:cpe}=bU.actions,upe=null,dpe={updatePolarOptions:(t,e)=>e.payload},xU=ei({name:"polarOptions",initialState:upe,reducers:dpe}),{updatePolarOptions:Zve}=xU.actions,fpe=xU.reducer,_U=Ui("keyDown"),wU=Ui("focus"),uS=hm();uS.startListening({actionCreator:_U,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var c=HN(i,Md(n),jm(n),Nm(n)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var f=io(n);if(a==="Enter"){var h=Xv(n,"axis","hover",String(i.index));e.dispatch(tj({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var p=soe(n),g=p==="left-to-right"?1:-1,y=a==="ArrowRight"?1:-1,x=u+y*g;if(!(f==null||x>=f.length||x<0)){var E=Xv(n,"axis","hover",String(x));e.dispatch(tj({active:!0,activeIndex:x.toString(),activeCoordinate:E}))}}}}}});uS.startListening({actionCreator:wU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",c=Xv(n,"axis","hover",String(a));e.dispatch(tj({active:!0,activeIndex:a,activeCoordinate:c}))}}}});var Mi=Ui("externalEvent"),jU=hm(),R1=new Map;jU.startListening({actionCreator:Mi,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=R1.get(i);a!==void 0&&cancelAnimationFrame(a);var c=requestAnimationFrame(()=>{try{var u=e.getState(),f={activeCoordinate:ele(u),activeDataKey:uq(u),activeIndex:Rc(u),activeLabel:cq(u),activeTooltipIndex:Rc(u),isTooltipActive:tle(u)};n(f,r)}finally{R1.delete(i)}});R1.set(i,c)}}});var hpe=ue([kd],t=>t.tooltipItemPayloads),mpe=ue([hpe,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),EU=Ui("touchMove"),NU=hm();NU.startListening({actionCreator:EU,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=FN(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var c=lS(r,cS({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));c?.activeIndex!=null&&e.dispatch(X5({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var h=document.elementFromPoint(f.clientX,f.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(ete),g=(u=h.getAttribute(tte))!==null&&u!==void 0?u:void 0,y=Dd(r).find(j=>j.id===g);if(p==null||y==null||g==null)return;var{dataKey:x}=y,E=mpe(r,p,g);e.dispatch(W5({activeDataKey:x,activeIndex:p,activeCoordinate:E,activeGraphicalItemId:g}))}}}});var ppe=r3({brush:Kde,cartesianAxis:Tde,chartData:ece,errorBars:Vfe,graphicalItems:ade,layout:Mee,legend:Gte,options:Wle,polarAxis:Tue,polarOptions:fpe,referenceElements:Xde,rootProps:lpe,tooltip:goe,zIndex:zle}),gpe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return oee({reducer:ppe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([vU.middleware,yU.middleware,uS.middleware,jU.middleware,NU.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(y3({type:"raf"}))},devTools:{serialize:{replacer:ope},name:"recharts-".concat(n)}})};function vpe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Er(),a=w.useRef(null);if(i)return n;a.current==null&&(a.current=gpe(e,r));var c=FE;return w.createElement(ghe,{context:c,store:a.current},n)}function ype(t){var{layout:e,margin:n}=t,r=jn(),i=Er();return w.useEffect(()=>{i||(r(Ree(e)),r(Pee(n)))},[r,i,e,n]),null}var bpe=w.memo(ype,A0);function xpe(t){var e=jn();return w.useEffect(()=>{e(cpe(t))},[e,t]),null}function VD(t){var{zIndex:e,isPanorama:n}=t,r=w.useRef(null),i=jn();return w.useLayoutEffect(()=>(r.current&&i(Dle({zIndex:e,element:r.current,isPanorama:n})),()=>{i(Mle({zIndex:e,isPanorama:n}))}),[i,e,n]),w.createElement("g",{tabIndex:-1,ref:r})}function BD(t){var{children:e,isPanorama:n}=t,r=Le(Nle);if(!r||r.length===0)return e;var i=r.filter(c=>c<0),a=r.filter(c=>c>0);return w.createElement(w.Fragment,null,i.map(c=>w.createElement(VD,{key:c,zIndex:c,isPanorama:n})),e,a.map(c=>w.createElement(VD,{key:c,zIndex:c,isPanorama:n})))}var _pe=["children"];function wpe(t,e){if(t==null)return{};var n,r,i=jpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function sy(){return sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sy.apply(null,arguments)}var Epe={width:"100%",height:"100%",display:"block"},Npe=w.forwardRef((t,e)=>{var n=q3(),r=U3(),i=Y3();if(!Js(n)||!Js(r))return null;var{children:a,otherAttributes:c,title:u,desc:f}=t,h,p;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?p=c.role:p=i?"application":void 0),w.createElement(_L,sy({},c,{title:u,desc:f,role:p,tabIndex:h,width:n,height:r,style:Epe,ref:e}),a)}),Spe=t=>{var{children:e}=t,n=Le(e0);if(!n)return null;var{width:r,height:i,y:a,x:c}=n;return w.createElement(_L,{width:r,height:i,x:c,y:a},e)},$D=w.forwardRef((t,e)=>{var{children:n}=t,r=wpe(t,_pe),i=Er();return i?w.createElement(Spe,null,w.createElement(BD,{isPanorama:!0},n)):w.createElement(Npe,sy({ref:e},r),w.createElement(BD,{isPanorama:!1},n))});function Ape(){var t=jn(),[e,n]=w.useState(null),r=Le(Zee);return w.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;pt(a)&&a!==r&&t(Dee(a))}},[e,t,r]),n}function FD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FD(Object(n),!0).forEach(function(r){Cpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cpe(t,e,n){return(e=Ope(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ope(t){var e=Ipe(t,"string");return typeof e=="symbol"?e:e+""}function Ipe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sl(){return sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sl.apply(null,arguments)}var Ppe=()=>(cce(),null);function ay(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Rpe=w.forwardRef((t,e)=>{var n,r,i=w.useRef(null),[a,c]=w.useState({containerWidth:ay((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:ay((r=t.style)===null||r===void 0?void 0:r.height)}),u=w.useCallback((h,p)=>{c(g=>{var y=Math.round(h),x=Math.round(p);return g.containerWidth===y&&g.containerHeight===x?g:{containerWidth:y,containerHeight:x}})},[]),f=w.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();u(p,g);var y=E=>{var j=E[0];if(j!=null){var{width:N,height:A}=j.contentRect;u(N,A)}},x=new ResizeObserver(y);x.observe(h),i.current=x}},[e,u]);return w.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),w.createElement(w.Fragment,null,w.createElement(pm,{width:a.containerWidth,height:a.containerHeight}),w.createElement("div",sl({ref:f},t)))}),kpe=w.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=w.useState({containerWidth:ay(n),containerHeight:ay(r)}),c=w.useCallback((f,h)=>{a(p=>{var g=Math.round(f),y=Math.round(h);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),u=w.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null){var{width:h,height:p}=f.getBoundingClientRect();c(h,p)}},[e,c]);return w.createElement(w.Fragment,null,w.createElement(pm,{width:i.containerWidth,height:i.containerHeight}),w.createElement("div",sl({ref:u},t)))}),Dpe=w.forwardRef((t,e)=>{var{width:n,height:r}=t;return w.createElement(w.Fragment,null,w.createElement(pm,{width:n,height:r}),w.createElement("div",sl({ref:e},t)))}),Mpe=w.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?w.createElement(kpe,sl({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?w.createElement(Dpe,sl({},t,{width:n,height:r,ref:e})):w.createElement(w.Fragment,null,w.createElement(pm,{width:n,height:r}),w.createElement("div",sl({ref:e},t)))});function zpe(t){return t?Rpe:Mpe}var Lpe=w.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:c,onDoubleClick:u,onMouseDown:f,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:y,onTouchEnd:x,onTouchMove:E,onTouchStart:j,style:N,width:A,responsive:k,dispatchTouchEvents:O=!0}=t,C=w.useRef(null),V=jn(),[$,D]=w.useState(null),[P,R]=w.useState(null),q=Ape(),L=JE(),M=L?.width>0?L.width:A,U=L?.height>0?L.height:i,ge=w.useCallback(se=>{q(se),typeof e=="function"&&e(se),D(se),R(se),se!=null&&(C.current=se)},[q,e,D,R]),Z=w.useCallback(se=>{V(gU(se)),V(Mi({handler:a,reactEvent:se}))},[V,a]),H=w.useCallback(se=>{V(pj(se)),V(Mi({handler:h,reactEvent:se}))},[V,h]),ce=w.useCallback(se=>{V(Y5()),V(Mi({handler:p,reactEvent:se}))},[V,p]),Y=w.useCallback(se=>{V(pj(se)),V(Mi({handler:g,reactEvent:se}))},[V,g]),we=w.useCallback(()=>{V(wU())},[V]),Q=w.useCallback(se=>{V(_U(se.key))},[V]),F=w.useCallback(se=>{V(Mi({handler:c,reactEvent:se}))},[V,c]),re=w.useCallback(se=>{V(Mi({handler:u,reactEvent:se}))},[V,u]),ye=w.useCallback(se=>{V(Mi({handler:f,reactEvent:se}))},[V,f]),Ee=w.useCallback(se=>{V(Mi({handler:y,reactEvent:se}))},[V,y]),J=w.useCallback(se=>{V(Mi({handler:j,reactEvent:se}))},[V,j]),ne=w.useCallback(se=>{O&&V(EU(se)),V(Mi({handler:E,reactEvent:se}))},[V,O,E]),pe=w.useCallback(se=>{V(Mi({handler:x,reactEvent:se}))},[V,x]),De=zpe(k);return w.createElement(vq.Provider,{value:$},w.createElement(VX.Provider,{value:P},w.createElement(De,{width:M??N?.width,height:U??N?.height,className:Ut("recharts-wrapper",r),style:Tpe({position:"relative",cursor:"default",width:M,height:U},N),onClick:Z,onContextMenu:F,onDoubleClick:re,onFocus:we,onKeyDown:Q,onMouseDown:ye,onMouseEnter:H,onMouseLeave:ce,onMouseMove:Y,onMouseUp:Ee,onTouchEnd:pe,onTouchMove:ne,onTouchStart:J,ref:ge},w.createElement(Ppe,null),n)))}),qpe=["width","height","responsive","children","className","style","compact","title","desc"];function Upe(t,e){if(t==null)return{};var n,r,i=Vpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Bpe=w.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:c,style:u,compact:f,title:h,desc:p}=t,g=Upe(t,qpe),y=ds(g);return f?w.createElement(w.Fragment,null,w.createElement(pm,{width:n,height:r}),w.createElement($D,{otherAttributes:y,title:h,desc:p},a)):w.createElement(Lpe,{className:c,style:u,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},w.createElement($D,{otherAttributes:y,title:h,desc:p,ref:e},w.createElement(Zde,null,a)))});function gj(){return gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gj.apply(null,arguments)}var $pe={top:5,right:5,bottom:5,left:5},Fpe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:$pe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},SU=w.forwardRef(function(e,n){var r,i=Mr(e.categoricalChartProps,Fpe),{chartName:a,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,categoricalChartProps:h}=e,p={chartName:a,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return w.createElement(vpe,{preloadedState:{options:p},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:a},w.createElement(Gde,{chartData:h.data}),w.createElement(bpe,{layout:i.layout,margin:i.margin}),w.createElement(xpe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),w.createElement(Bpe,gj({},i,{ref:n})))}),Hpe=["axis"],Gpe=w.forwardRef((t,e)=>w.createElement(SU,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Hpe,tooltipPayloadSearcher:yq,categoricalChartProps:t,ref:e})),Kpe=["axis","item"],Qpe=w.forwardRef((t,e)=>w.createElement(SU,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Kpe,tooltipPayloadSearcher:yq,categoricalChartProps:t,ref:e}));const Wpe=8,Ype=12,Xpe=14,Jpe=1;function dS(t){return t instanceof Ye?t.toDate():t instanceof Date?t:t?.seconds?new Date(t.seconds*1e3):new Date(t)}function HD(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function T0(){const t=new Date,e=t.getDay(),n=e===0?-6:1-e,r=new Date(t);return r.setDate(t.getDate()+n),r.setHours(0,0,0,0),r}function Zpe(){const t=T0(),e=new Date(t);return e.setDate(t.getDate()+6),e.setHours(23,59,59,999),e}function k1(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function C0(t){try{const e=Et(rt(Ne,"quiz_results"),it("userId","==",t),mr("datePassage","desc"));return(await Nt(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Erreur rcupration rsultats lve:",e),[]}}async function ege(t){try{const e=await C0(t);if(e.length===0)return[];const n=new Map;e.forEach(a=>{const c=a.disciplineId;n.has(c)||n.set(c,[]),n.get(c).push(a)});const r=[];n.forEach((a,c)=>{if(a.length<Jpe)return;const u=a.map(N=>N.pourcentage/100*20),f=u.reduce((N,A)=>N+A,0)/u.length;if(f>=Xpe)return;let h="stable";if(u.length>=3){const N=u.slice(0,2),A=u.slice(2,4),k=N.reduce((V,$)=>V+$,0)/N.length,O=A.reduce((V,$)=>V+$,0)/A.length,C=k-O;C>1.5?h="hausse":C<-1.5&&(h="baisse")}let p="modere";f<Wpe?p="critique":f<Ype&&(p="important");const g=u[0],y=Math.max(...u),x=Math.min(...u),E=dS(a[0].datePassage),j=a[0].disciplineNom||"Discipline inconnue";r.push({id:`lacune_${c}`,disciplineId:c,disciplineNom:j,moyenne:Math.round(f*10)/10,nombreQuiz:a.length,tendance:h,niveauUrgence:p,dernierQuizDate:E,scoreDetails:{dernierScore:Math.round(g*10)/10,meilleurScore:Math.round(y*10)/10,pireScore:Math.round(x*10)/10}})});const i={critique:0,important:1,modere:2};return r.sort((a,c)=>{const u=i[a.niveauUrgence]-i[c.niveauUrgence];return u!==0?u:a.moyenne-c.moyenne}),r}catch(e){return console.error("Erreur dtection lacunes:",e),[]}}function tge(t){const e=[];let n=1;return t.forEach(r=>{const{id:i,disciplineNom:a,niveauUrgence:c,moyenne:u,tendance:f}=r;switch(c){case"critique":e.push({id:`reco_cours_${i}`,lacuneId:i,type:"revoir_cours",titre:` Revoir les cours de ${a}`,description:`Ta moyenne est de ${u}/20 en ${a}. Il est important de reprendre les bases. Consulte les cours disponibles et prends des notes.`,disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date}),e.push({id:`reco_quiz_${i}`,lacuneId:i,type:"refaire_quiz",titre:` Refaire les quiz de ${a}`,description:"Aprs avoir rvis, refais les quiz pour vrifier ta comprhension. Vise au moins 12/20 !",disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date});break;case"important":e.push({id:`reco_exercice_${i}`,lacuneId:i,type:"exercice_cible",titre:` Exercices cibls en ${a}`,description:`Avec ${u}/20 de moyenne, concentre-toi sur les exercices pratiques. ${f==="hausse"?"Tu progresses, continue !":"Un effort supplmentaire est ncessaire."}`,disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date}),e.push({id:`reco_cours2_${i}`,lacuneId:i,type:"revoir_cours",titre:` Rviser les points cls en ${a}`,description:"Identifie les concepts qui te posent problme et revois-les attentivement.",disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date});break;case"modere":e.push({id:`reco_consolider_${i}`,lacuneId:i,type:"refaire_quiz",titre:` Consolider tes acquis en ${a}`,description:`Tu es proche du niveau attendu (${u}/20). Un quiz supplmentaire devrait suffire pour atteindre 14/20 !`,disciplineNom:a,priorite:n++,completee:!1,dateCreation:new Date});break}}),e}async function nge(t){try{const e=await C0(t);if(e.length===0)return{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]};const n=new Set;e.forEach(j=>{const N=dS(j.datePassage),A=`${N.getFullYear()}-${N.getMonth()}-${N.getDate()}`;n.add(A)});const r=Array.from(n).map(j=>{const[N,A,k]=j.split("-").map(Number);return new Date(N,A,k)}).sort((j,N)=>N.getTime()-j.getTime()),i=r.length,a=r[0];let c=0;const u=new Date;u.setHours(0,0,0,0);const f=r[0];if(k1(f,u)<=1){c=1;for(let j=1;j<r.length&&k1(r[j],r[j-1])===1;j++)c++}let p=0,g=1;for(let j=1;j<r.length;j++)k1(r[j],r[j-1])===1?g++:(p=Math.max(p,g),g=1);p=Math.max(p,g,c);const y=T0(),x=[];for(let j=0;j<7;j++){const N=new Date(y);N.setDate(y.getDate()+j);const A=r.some(k=>HD(k,N));x.push(A)}const E=[];for(let j=0;j<4;j++){const N=new Date(y);N.setDate(y.getDate()-j*7);let A=0;for(let O=0;O<7;O++){const C=new Date(N);C.setDate(N.getDate()+O),r.some(V=>HD(V,C))&&A++}const k=Math.ceil((N.getDate()+new Date(N.getFullYear(),N.getMonth(),1).getDay())/7);E.push({semaine:j===0?"Cette sem.":`Sem. -${j}`,joursActifs:A})}return{userId:t,streakActuel:c,meilleurStreak:p,dernierJourActif:a,totalJoursActifs:i,semaineCourante:x,historiqueHebdo:E.reverse()}}catch(e){return console.error("Erreur calcul streak:",e),{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]}}}function rge(t,e,n){const r=[],i=T0(),a=Zpe(),c=e.length>2?5:3;if(r.push({id:`obj_quiz_${t}_${i.getTime()}`,userId:t,titre:`Passer ${c} quiz cette semaine`,description:`Entrane-toi en passant au moins ${c} quiz pour progresser dans tes matires.`,type:"quiz_count",cible:c,progression:0,statut:"en_cours",dateDebut:i,dateFin:a,recompense:' Badge "Travailleur"'}),e.length>0){const f=e[0],h=Math.min(f.moyenne+3,14);r.push({id:`obj_score_${t}_${i.getTime()}`,userId:t,titre:`Atteindre ${Math.round(h)}/20 en ${f.disciplineNom}`,description:`Ta moyenne actuelle est de ${f.moyenne}/20. Vise ${Math.round(h)}/20 lors de ton prochain quiz !`,type:"score_min",cible:Math.round(h),progression:Math.round(f.moyenne),statut:"en_cours",disciplineId:f.disciplineId,disciplineNom:f.disciplineNom,dateDebut:i,dateFin:a,recompense:' Badge "En progrs"'})}const u=n.streakActuel>=5?7:n.streakActuel+2;return r.push({id:`obj_streak_${t}_${i.getTime()}`,userId:t,titre:`Maintenir un streak de ${u} jours`,description:`Tu es actuellement  ${n.streakActuel} jour(s) conscutif(s). Continue !`,type:"streak",cible:u,progression:n.streakActuel,statut:n.streakActuel>=u?"atteint":"en_cours",dateDebut:i,dateFin:a,recompense:' Badge "Flamme"'}),r}function ige(t,e,n,r){let i=0;if(r.length>0){const g=r.reduce((y,x)=>y+x.pourcentage/100*20,0)/r.length;i=Math.min(g/20*100,100)}let a=100;const c=t.filter(g=>g.niveauUrgence==="critique").length,u=t.filter(g=>g.niveauUrgence==="important").length;a-=c*25,a-=u*15,a=Math.max(a,0);const f=Math.min(e.streakActuel/7*100,100);let h=0;n.length>0&&(h=n.filter(y=>y.statut==="atteint").length/n.length*100);const p=i*.4+a*.25+f*.2+h*.15;return Math.round(Math.min(Math.max(p,0),100))}function sge(t,e,n){const r=T0(),i=e.filter(a=>dS(a.datePassage)>=r);return t.map(a=>{const c={...a};switch(a.type){case"quiz_count":c.progression=i.length;break;case"score_min":if(a.disciplineId){const u=i.filter(f=>f.disciplineId===a.disciplineId);if(u.length>0){const f=Math.max(...u.map(h=>h.pourcentage));c.progression=Math.round(f/100*20)}}break;case"streak":c.progression=n.streakActuel;break}return c.progression>=c.cible&&(c.statut="atteint"),c})}async function fS(t){try{const e=await ege(t),n=tge(e),r=await nge(t);let i=rge(t,e,r);const a=await C0(t);i=sge(i,a,r);const c=ige(e,r,i,a);return{lacunes:e,recommandations:n,streak:r,objectifs:i,scoreGlobal:c}}catch(e){return console.error("Erreur suivi complet:",e),{lacunes:[],recommandations:[],streak:{userId:t,streakActuel:0,meilleurStreak:0,dernierJourActif:null,totalJoursActifs:0,semaineCourante:[!1,!1,!1,!1,!1,!1,!1],historiqueHebdo:[]},objectifs:[],scoreGlobal:0}}}function oy(t){switch(t){case"critique":return"#ef4444";case"important":return"#f59e0b";case"modere":return"#eab308";case"info":return"#10b981";default:return"#6b7280"}}function AU(t){switch(t){case"critique":return"Critique";case"important":return"Important";case"modere":return"Modr";case"info":return"Info";default:return"Inconnu"}}function TU(t){switch(t){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function age(t){return t>=80?"Excellent travail ! Continue comme a, tu es sur la bonne voie ! ":t>=60?"Bon travail ! Quelques efforts supplmentaires et tu seras au top ! ":t>=40?"Tu peux faire mieux ! Suis les recommandations pour progresser. ":t>=20?"Courage ! Chaque effort compte. Commence par les recommandations prioritaires. ":"C'est le moment de se lancer ! Passe ton premier quiz pour commencer. "}function oge(t){return t.cible===0?0:Math.min(Math.round(t.progression/t.cible*100),100)}const lge="PEDA",cge=4,uge=5,dge=40,CU=5;function Ia(t){return t instanceof Ye?t.toDate():t instanceof Date?t:t?.seconds?new Date(t.seconds*1e3):new Date(t)}function OU(t){const e=new Date,n=e.getDay(),r=n===0?-6:1-n,i=new Date(e);return i.setDate(e.getDate()+r),i.setHours(0,0,0,0),i}function fge(t){const e=OU(),n=new Date(e);return n.setDate(e.getDate()+6),n.setHours(23,59,59,999),n}function GD(t){const e=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"];return`${t.getDate()} ${e[t.getMonth()]}`}function IU(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function hge(t){try{const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="",r="";for(let c=0;c<cge;c++)n+=e.charAt(Math.floor(Math.random()*e.length)),r+=e.charAt(Math.floor(Math.random()*e.length));const i=`${lge}-${n}-${r}`,a=Qe(Ne,"users",t);return await sn(a,{codeParent:i,codeParentGenere:new Date}),i}catch(e){throw console.error("Erreur gnration code invitation:",e),new Error("Impossible de gnrer le code d'invitation")}}async function mge(t){try{const e=Qe(Ne,"users",t),n=await Pr(e);if(!n.exists())throw new Error("lve introuvable");const r=n.data();return r.codeParent?r.codeParent:await hge(t)}catch(e){throw console.error("Erreur rcupration code invitation:",e),new Error("Impossible de rcuprer le code d'invitation")}}async function pge(t,e){try{const n=e.trim().toUpperCase(),r=rt(Ne,"users"),i=Et(r,it("codeParent","==",n),it("role","==","eleve"),hl(1)),a=await Nt(i);if(a.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const c=a.docs[0],u=c.data(),f=c.id,h=rt(Ne,"liens_parent_enfant"),p=Et(h,it("parentId","==",t),it("enfantId","==",f),it("statut","==","actif"),hl(1));if(!(await Nt(p)).empty)throw new Error("Cet enfant est dj li  votre compte.");const y={parentId:t,enfantId:f,enfantNom:u.displayName||u.email,enfantEmail:u.email,enfantClasse:u.classe||void 0,codeInvitation:n,statut:"actif",dateCreation:new Date};return{id:(await Bi(h,y)).id,...y}}catch(n){throw console.error("Erreur liaison parent-enfant:",n),n}}async function gge(t){try{const e=rt(Ne,"liens_parent_enfant"),n=Et(e,it("parentId","==",t),it("statut","==","actif"),mr("dateCreation","desc"));return(await Nt(n)).docs.map(i=>({id:i.id,...i.data(),dateCreation:Ia(i.data().dateCreation),dateDerniereConsultation:i.data().dateDerniereConsultation?Ia(i.data().dateDerniereConsultation):void 0}))}catch(e){return console.error("Erreur rcupration enfants lis:",e),[]}}async function vge(t,e){try{const n=Qe(Ne,"liens_parent_enfant",t),r=await Pr(n);if(!r.exists())throw new Error("Lien introuvable");if(r.data().parentId!==e)throw new Error("Action non autorise");await sn(n,{statut:"revoque",dateRevocation:new Date})}catch(n){throw console.error("Erreur rvocation lien:",n),n}}async function yge(t,e){try{const n=rt(Ne,"liens_parent_enfant"),r=Et(n,it("parentId","==",t),it("enfantId","==",e),it("statut","==","actif"),hl(1)),i=await Nt(r);if(i.empty)throw new Error("Vous n'tes pas autoris  consulter le suivi de cet enfant.");const a=Qe(Ne,"users",e),c=await Pr(a);if(!c.exists())throw new Error("Profil de l'enfant introuvable.");const u=c.data(),f=await fS(e),h=await C0(e),p=h.slice(0,CU).map(E=>({quizTitre:E.quizTitre||"Quiz",disciplineNom:E.disciplineNom||"Discipline",pourcentage:E.pourcentage,noteSur20:Math.round(E.pourcentage/100*20*10)/10,reussi:E.reussi,datePassage:Ia(E.datePassage)})),g=await bge(t,e,u.displayName||u.email,f.lacunes,f.streak,f.scoreGlobal,h),y=xge(e,u.displayName||u.email,f,h),x=i.docs[0];return await sn(Qe(Ne,"liens_parent_enfant",x.id),{dateDerniereConsultation:new Date}),{enfant:{id:e,nom:u.displayName||u.email,email:u.email,classe:u.classe||void 0,derniereConnexion:u.lastLogin?Ia(u.lastLogin):void 0},scoreGlobal:f.scoreGlobal,streak:{actuel:f.streak.streakActuel,meilleur:f.streak.meilleurStreak,semaineCourante:f.streak.semaineCourante},lacunes:f.lacunes.map(E=>({disciplineNom:E.disciplineNom,moyenne:E.moyenne,niveauUrgence:E.niveauUrgence,tendance:E.tendance})),objectifs:f.objectifs.map(E=>({titre:E.titre,progression:E.progression,cible:E.cible,statut:E.statut})),derniersQuiz:p,resume:y,alertes:g}}catch(n){throw console.error("Erreur dashboard parent:",n),n}}async function bge(t,e,n,r,i,a,c){const u=[],f=new Date;if(r.filter(p=>p.niveauUrgence==="critique").forEach(p=>{u.push({id:`alerte_parent_lacune_${p.id}`,parentId:t,enfantId:e,enfantNom:n,type:"lacune_critique",niveau:"critique",titre:` Alerte critique en ${p.disciplineNom}`,message:`${n} a une moyenne de ${p.moyenne}/20 en ${p.disciplineNom}. Un suivi rapproch est recommand.`,lue:!1,dateCreation:f})}),i.dernierJourActif){const p=IU(Ia(i.dernierJourActif),f);p>=uge&&u.push({id:`alerte_parent_inactif_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"inactivite",niveau:"important",titre:` ${n} est inactif`,message:`${n} n'a pas utilis PedaClic depuis ${p} jours. Un petit encouragement pourrait aider !`,lue:!1,dateCreation:f})}else c.length===0&&u.push({id:`alerte_parent_jamais_actif_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"inactivite",niveau:"modere",titre:` ${n} n'a pas encore commenc`,message:`${n} n'a pas encore pass de quiz sur PedaClic. Encouragez-le  commencer !`,lue:!1,dateCreation:f});a<dge&&c.length>0&&u.push({id:`alerte_parent_score_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"score_bas",niveau:"important",titre:` Score global bas : ${a}/100`,message:`Le score de sant global de ${n} est de ${a}/100. Des efforts supplmentaires sont ncessaires dans plusieurs matires.`,lue:!1,dateCreation:f}),r.filter(p=>p.tendance==="hausse").forEach(p=>{u.push({id:`alerte_parent_progression_${p.id}`,parentId:t,enfantId:e,enfantNom:n,type:"progression",niveau:"info",titre:` Progression en ${p.disciplineNom}`,message:`Bonne nouvelle ! ${n} montre une tendance  la hausse en ${p.disciplineNom}.`,lue:!1,dateCreation:f})}),i.streakActuel>=5&&u.push({id:`alerte_parent_streak_${e}`,parentId:t,enfantId:e,enfantNom:n,type:"objectif_atteint",niveau:"info",titre:` Streak de ${i.streakActuel} jours !`,message:`Flicitations ! ${n} maintient un streak de ${i.streakActuel} jours conscutifs de travail.`,lue:!1,dateCreation:f});const h={critique:0,important:1,modere:2,info:3};return u.sort((p,g)=>h[p.niveau]-h[g.niveau]),u}function xge(t,e,n,r){const i=OU(),a=fge(),c=new Date(i);c.setDate(c.getDate()-7);const u=new Date(a);u.setDate(u.getDate()-7);const f=r.filter(C=>{const V=Ia(C.datePassage);return V>=i&&V<=a}),h=r.filter(C=>{const V=Ia(C.datePassage);return V>=c&&V<=u}),p=f.slice(0,CU).map(C=>({quizTitre:C.quizTitre||"Quiz",disciplineNom:C.disciplineNom||"Discipline",pourcentage:C.pourcentage,noteSur20:Math.round(C.pourcentage/100*20*10)/10,reussi:C.reussi,datePassage:Ia(C.datePassage)})),g=_ge(f,h),y=new Set;f.forEach(C=>{const V=Ia(C.datePassage);y.add(`${V.getFullYear()}-${V.getMonth()}-${V.getDate()}`)});const x=f.reduce((C,V)=>C+(V.tempsEcoule||5),0);let E=0;if(h.length>0){const C=h.reduce((V,$)=>V+$.pourcentage,0)/h.length;E=Math.round(C)}let j="stable";const N=n.scoreGlobal-E;N>5?j="hausse":N<-5&&(j="baisse");const A=n.lacunes.filter(C=>C.niveauUrgence==="critique"||C.niveauUrgence==="important").map(C=>C.disciplineNom),k=n.objectifs.filter(C=>C.statut==="atteint").length,O=`${GD(i)} - ${GD(a)} ${a.getFullYear()}`;return{enfantId:t,enfantNom:e,semaine:O,dateDebut:i,dateFin:a,scoreGlobal:n.scoreGlobal,scoreGlobalPrecedent:E,evolutionScore:j,nombreQuizSemaine:f.length,tempsEstimeMinutes:Math.round(x),joursActifsSemaine:y.size,streakActuel:n.streak.streakActuel,derniersQuiz:p,evolutionDisciplines:g,lacunesCritiques:n.lacunes.filter(C=>C.niveauUrgence==="critique").length,lacunesImportantes:n.lacunes.filter(C=>C.niveauUrgence==="important").length,disciplinesEnDifficulte:A,objectifsAtteints:k,objectifsTotal:n.objectifs.length}}function _ge(t,e){const n=new Map;t.forEach(a=>{n.has(a.disciplineId)||n.set(a.disciplineId,{scores:[],nom:a.disciplineNom||"Discipline"}),n.get(a.disciplineId).scores.push(a.pourcentage)});const r=new Map;e.forEach(a=>{r.has(a.disciplineId)||r.set(a.disciplineId,[]),r.get(a.disciplineId).push(a.pourcentage)});const i=[];return n.forEach((a,c)=>{const u=a.scores.reduce((E,j)=>E+j,0)/a.scores.length,f=r.get(c)||[],h=f.length>0?f.reduce((E,j)=>E+j,0)/f.length:u,p=Math.round(u/100*20*10)/10,g=Math.round(h/100*20*10)/10,y=Math.round((p-g)*10)/10;let x="stable";y>1?x="hausse":y<-1&&(x="baisse"),i.push({disciplineNom:a.nom,disciplineId:c,moyenneSemainePrecedente:g,moyenneSemaineCourante:p,evolution:x,ecart:y})}),i}function wge(t){return oy(t)}function jge(t){return{lacune_critique:"Lacune critique",inactivite:"Inactivit",streak_perdu:"Streak perdu",objectif_atteint:"Objectif atteint",progression:"Progression",score_bas:"Score bas",nouveau_quiz:"Nouveau quiz"}[t]||"Alerte"}function KD(t){switch(t){case"hausse":return"";case"baisse":return"";case"stable":return"";default:return""}}function Ege(t){return t>=80?"Votre enfant fait un excellent travail ! Continuez  l'encourager. ":t>=60?"De bons rsultats ! Quelques efforts supplmentaires et ce sera parfait. ":t>=40?"Des progrs sont possibles. Encouragez votre enfant  suivre les recommandations. ":t>=20?"Votre enfant a besoin de soutien. Un suivi rgulier est recommand. ":"Il est temps de commencer ! Encouragez votre enfant  passer ses premiers quiz. "}function D1(t){const n=IU(t,new Date);return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaine(s)`:`Il y a ${Math.floor(n/30)} mois`}const Nge="PROF",Sge=4,Sg="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",PU=8,Age=7,Tge=16;function Dc(t){return t instanceof Ye?t.toDate():t instanceof Date?t:t?.seconds?new Ye(t.seconds,t.nanoseconds||0).toDate():new Date(t)}function Cge(t,e){return Math.floor(Math.abs(e.getTime()-t.getTime())/864e5)}async function RU(){let t=0;const e=10;for(;t<e;){let n="",r="";for(let u=0;u<Sge;u++)n+=Sg.charAt(Math.floor(Math.random()*Sg.length)),r+=Sg.charAt(Math.floor(Math.random()*Sg.length));const i=`${Nge}-${n}-${r}`,a=Et(rt(Ne,"groupes_prof"),it("codeInvitation","==",i),hl(1));if((await Nt(a)).empty)return i;t++}throw new Error("Impossible de gnrer un code unique aprs plusieurs tentatives")}async function Oge(t,e,n){try{const r=await RU(),i={profId:t,profNom:e,nom:n.nom.trim(),description:n.description?.trim()||"",matiereId:n.matiereId,matiereNom:n.matiereNom,classeNiveau:n.classeNiveau,codeInvitation:r,nombreInscrits:0,statut:"actif",anneeScolaire:n.anneeScolaire,dateCreation:new Date,dateMiseAJour:new Date},a=await Bi(rt(Ne,"groupes_prof"),i);return console.log(` Groupe "${n.nom}" cr avec code: ${r}`),{id:a.id,...i}}catch(r){throw console.error(" Erreur cration groupe:",r),new Error("Impossible de crer le groupe. Ressayez.")}}async function kU(t){try{const e=Et(rt(Ne,"groupes_prof"),it("profId","==",t),mr("dateCreation","desc"));return(await Nt(e)).docs.map(r=>({id:r.id,...r.data(),dateCreation:Dc(r.data().dateCreation),dateMiseAJour:r.data().dateMiseAJour?Dc(r.data().dateMiseAJour):void 0}))}catch(e){throw console.error(" Erreur rcupration groupes:",e),new Error("Impossible de charger vos groupes.")}}async function Ige(t){try{const e=await Pr(Qe(Ne,"groupes_prof",t));if(!e.exists())return null;const n=e.data();return{id:e.id,...n,dateCreation:Dc(n.dateCreation),dateMiseAJour:n.dateMiseAJour?Dc(n.dateMiseAJour):void 0}}catch(e){return console.error(" Erreur rcupration groupe:",e),null}}async function DU(t,e){try{const n=Qe(Ne,"groupes_prof",t);await sn(n,{...e,dateMiseAJour:new Date}),console.log(` Groupe ${t} mis  jour`)}catch(n){throw console.error(" Erreur modification groupe:",n),new Error("Impossible de modifier le groupe.")}}async function Pge(t){try{const e=Ih(Ne),n=Et(rt(Ne,"inscriptions_groupe"),it("groupeId","==",t));(await Nt(n)).docs.forEach(i=>e.delete(i.ref)),e.delete(Qe(Ne,"groupes_prof",t)),await e.commit(),console.log(` Groupe ${t} et ses inscriptions supprims`)}catch(e){throw console.error(" Erreur suppression groupe:",e),new Error("Impossible de supprimer le groupe.")}}async function Rge(t){await DU(t,{statut:"archive"})}async function kge(t){try{const e=await RU();return await sn(Qe(Ne,"groupes_prof",t),{codeInvitation:e,dateMiseAJour:new Date}),console.log(` Nouveau code pour groupe ${t}: ${e}`),e}catch(e){throw console.error(" Erreur rgnration code:",e),new Error("Impossible de rgnrer le code.")}}async function Dge(t,e,n,r){try{const i=r.trim().toUpperCase(),a=Et(rt(Ne,"groupes_prof"),it("codeInvitation","==",i),hl(1)),c=await Nt(a);if(c.empty)throw new Error("Code d'invitation invalide. Vrifiez le code et ressayez.");const u=c.docs[0],f=u.data();if(f.statut!=="actif")throw new Error("Ce groupe n'accepte plus de nouvelles inscriptions.");const h=Et(rt(Ne,"inscriptions_groupe"),it("groupeId","==",u.id),it("eleveId","==",t),it("statut","==","actif"),hl(1));if(!(await Nt(h)).empty)throw new Error("Tu es dj inscrit(e) dans ce groupe.");const g={groupeId:u.id,eleveId:t,eleveNom:e,eleveEmail:n,statut:"actif",dateInscription:new Date},y=await Bi(rt(Ne,"inscriptions_groupe"),g);return await sn(Qe(Ne,"groupes_prof",u.id),{nombreInscrits:R4(1),dateMiseAJour:new Date}),console.log(` lve ${e} inscrit au groupe "${f.nom}"`),{id:y.id,...g}}catch(i){throw console.error(" Erreur inscription groupe:",i),i}}async function O0(t,e="actif"){try{const n=Et(rt(Ne,"inscriptions_groupe"),it("groupeId","==",t),it("statut","==",e),mr("dateInscription","asc"));return(await Nt(n)).docs.map(i=>({id:i.id,...i.data(),dateInscription:Dc(i.data().dateInscription),dateRetrait:i.data().dateRetrait?Dc(i.data().dateRetrait):void 0}))}catch(n){throw console.error(" Erreur rcupration lves groupe:",n),new Error("Impossible de charger les lves du groupe.")}}async function Mge(t){try{const e=Et(rt(Ne,"inscriptions_groupe"),it("eleveId","==",t),it("statut","==","actif")),n=await Nt(e);if(n.empty)return[];const r=[];for(const i of n.docs){const a=i.data().groupeId,c=await Ige(a);c&&c.statut==="actif"&&r.push(c)}return r}catch(e){return console.error(" Erreur rcupration groupes lve:",e),[]}}async function zge(t,e){try{await sn(Qe(Ne,"inscriptions_groupe",t),{statut:"retire",dateRetrait:new Date}),await sn(Qe(Ne,"groupes_prof",e),{nombreInscrits:R4(-1),dateMiseAJour:new Date}),console.log(" lve retir du groupe")}catch(n){throw console.error(" Erreur retrait lve:",n),new Error("Impossible de retirer l'lve du groupe.")}}async function hS(t){try{const n=(await O0(t)).map(y=>y.eleveId);if(n.length===0)return{groupeId:t,nombreEleves:0,moyenneClasse:0,tauxReussite:0,tauxParticipation:0,totalQuizPasses:0,elevesEnDifficulte:0,meilleureNote:0,pireNote:0,derniereMiseAJour:new Date};const r=[],i=[];for(let y=0;y<n.length;y+=10)i.push(n.slice(y,y+10));for(const y of i){const x=Et(rt(Ne,"quiz_results"),it("userId","in",y));(await Nt(x)).docs.forEach(j=>r.push({id:j.id,...j.data()}))}const a=new Map;for(const y of r){const x=y.userId;a.has(x)||a.set(x,{total:0,somme:0,reussis:0});const E=a.get(x);E.total++,E.somme+=y.score||0,(y.score||0)>=10&&E.reussis++}let c=0,u=0,f=0,h=0,p=20,g=0;for(const[,y]of a){const x=y.total>0?y.somme/y.total:0;c+=x,u++,g+=y.total,x<PU&&f++,x>h&&(h=x),x<p&&(p=x)}return u===0&&(p=0),{groupeId:t,nombreEleves:n.length,moyenneClasse:u>0?Math.round(c/u*10)/10:0,tauxReussite:g>0?Math.round(Array.from(a.values()).reduce((y,x)=>y+x.reussis,0)/g*100):0,tauxParticipation:Math.round(u/n.length*100),totalQuizPasses:g,elevesEnDifficulte:f,meilleureNote:Math.round(h*10)/10,pireNote:Math.round(p*10)/10,derniereMiseAJour:new Date}}catch(e){throw console.error(" Erreur calcul stats groupe:",e),new Error("Impossible de calculer les statistiques du groupe.")}}async function Lge(t){try{const e=await O0(t);if(e.length===0)return[];const n=[];for(const r of e)try{const i=await fS(r.eleveId),a=Et(rt(Ne,"quiz_results"),it("userId","==",r.eleveId),mr("datePassage","desc")),u=(await Nt(a)).docs.map(x=>x.data());let f=0,h=0,p;if(u.length>0){const x=u.reduce((E,j)=>E+(j.score||0),0);f=Math.round(x/u.length*10)/10,h=Math.round(u.filter(E=>(E.score||0)>=10).length/u.length*100),p=Dc(u[0].datePassage)}let g="stable";if(u.length>=4){const x=u.slice(0,Math.ceil(u.length/2)),E=u.slice(Math.ceil(u.length/2)),j=x.reduce((A,k)=>A+(k.score||0),0)/x.length,N=E.reduce((A,k)=>A+(k.score||0),0)/E.length;j-N>1?g="hausse":N-j>1&&(g="baisse")}const y=i.lacunes.map(x=>({disciplineNom:x.disciplineNom,chapitre:x.chapitre,moyenne:x.moyenne,niveauUrgence:x.niveauUrgence}));n.push({eleveId:r.eleveId,eleveNom:r.eleveNom,eleveEmail:r.eleveEmail,moyenne:f,totalQuiz:u.length,tauxReussite:h,scoreGlobal:i.scoreGlobal,streak:{actuel:i.streak.streakActuel,meilleur:i.streak.meilleurStreak},lacunes:y,dernierQuiz:p,tendance:g})}catch(i){console.warn(` Suivi incomplet pour lve ${r.eleveNom}:`,i),n.push({eleveId:r.eleveId,eleveNom:r.eleveNom,eleveEmail:r.eleveEmail,moyenne:0,totalQuiz:0,tauxReussite:0,scoreGlobal:0,streak:{actuel:0,meilleur:0},lacunes:[],tendance:"stable"})}return n.sort((r,i)=>i.moyenne-r.moyenne),n}catch(e){throw console.error(" Erreur stats lves groupe:",e),new Error("Impossible de charger les statistiques des lves.")}}async function qge(t,e,n){try{const i=(await O0(t)).map(x=>x.eleveId);if(i.length===0)return null;let a=null,c="quiz_results";if(n!=="quizzes_v2"){if(n!=="quizzes"){const x=await Pr(Qe(Ne,"quizzes_v2",e));if(x.exists())a=x.data(),c="quiz_results_v2";else{const E=await Pr(Qe(Ne,"quizzes",e));E.exists()&&(a=E.data(),c="quiz_results")}}}if(!a)return null;const u=[],f=[];for(let x=0;x<i.length;x+=10)f.push(i.slice(x,x+10));for(const x of f){const E=Et(rt(Ne,c),it("quizId","==",e),it("userId","in",x));(await Nt(E)).docs.forEach(N=>u.push(N.data()))}if(u.length===0)return null;const h=c==="quiz_results_v2",p=u.map(x=>h?x.note20||(x.scoreMax>0?x.score/x.scoreMax*20:0):x.score||0),g=u.map(x=>x.tempsEcoule||0),y=[];if(h&&a.questions)for(let x=0;x<a.questions.length;x++){const E=a.questions[x];let j=0,N=0;for(const O of u){const C=O.detailsParQuestion?.find(V=>V.questionId===E.id);C&&(N++,C.isCorrect||j++)}const A=N>0?Math.round(j/N*100):0,k=E.enonce?.replace(/<[^>]*>/g,"").trim()||`Question ${x+1}`;y.push({questionIndex:x,questionTexte:k,tauxEchec:A,reponseCorrecte:"Voir correction dtaille",reponsesFrequentes:[]})}else if(a.questions)for(let x=0;x<a.questions.length;x++){const E=a.questions[x];let j=0;const N=new Map;for(const O of u){const C=O.reponses?.[x];C!==void 0&&(N.set(C,(N.get(C)||0)+1),C!==E.reponseCorrecte&&j++)}const A=Math.round(j/u.length*100),k=Array.from(N.entries()).filter(([O])=>O!==E.reponseCorrecte).map(([O,C])=>({reponse:E.options?.[O]||`Option ${O+1}`,nombre:C})).sort((O,C)=>C.nombre-O.nombre);y.push({questionIndex:x,questionTexte:E.question,tauxEchec:A,reponseCorrecte:E.options?.[E.reponseCorrecte]||"N/A",reponsesFrequentes:k})}return y.sort((x,E)=>E.tauxEchec-x.tauxEchec),{quizId:e,quizTitre:a.titre||"Quiz sans titre",disciplineNom:a.disciplineNom||a.matiereNom||"",totalPassages:u.length,moyenneScore:Math.round(p.reduce((x,E)=>x+E,0)/p.length*10)/10,tauxReussite:Math.round(p.filter(x=>x>=10).length/p.length*100),tempsEcouleMoyen:Math.round(g.reduce((x,E)=>x+E,0)/g.length),questionsRatees:y}}catch(r){return console.error(" Erreur analyse quiz groupe:",r),null}}async function Uge(t){try{const e=[];try{const n=Et(rt(Ne,"quizzes"),it("disciplineId","==",t),mr("createdAt","desc"));(await Nt(n)).docs.forEach(i=>{e.push({id:i.id,titre:i.data().titre||"Quiz sans titre",source:"quizzes"})})}catch(n){console.warn(" Recherche quizzes choue (index manquant ?):",n)}try{const n=Et(rt(Ne,"quizzes_v2"),it("disciplineId","==",t),mr("createdAt","desc"));(await Nt(n)).docs.forEach(i=>{e.push({id:i.id,titre:i.data().titre||"Quiz avanc sans titre",source:"quizzes_v2"})})}catch(n){console.warn(" Recherche quizzes_v2 choue (index manquant ?):",n)}return console.log(` ${e.length} quiz trouv(s) pour discipline ${t}`),e}catch(e){return console.error(" Erreur rcupration quiz par matire:",e),[]}}function Vge(t,e){const n=[],r=new Date;for(const a of t){if(a.totalQuiz>0&&a.moyenne<PU&&n.push({id:`diff-${a.eleveId}`,type:"difficulte",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} a une moyenne de ${a.moyenne}/20. Lacunes : ${a.lacunes.map(c=>c.disciplineNom).join(", ")||"non dtectes"}.`,niveauUrgence:a.moyenne<5?"critique":"important",dateCreation:r}),a.dernierQuiz){const c=Cge(a.dernierQuiz,r);c>=Age&&n.push({id:`inact-${a.eleveId}`,type:"inactivite",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} n'a pas fait de quiz depuis ${c} jours.`,niveauUrgence:c>=14?"important":"info",dateCreation:r})}else a.totalQuiz===0&&n.push({id:`inact-${a.eleveId}`,type:"inactivite",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} n'a encore pass aucun quiz.`,niveauUrgence:"info",dateCreation:r});a.tendance==="baisse"&&a.totalQuiz>=4&&n.push({id:`baisse-${a.eleveId}`,type:"baisse",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} est en baisse de rsultats (tendance ngative).`,niveauUrgence:"important",dateCreation:r}),a.moyenne>=Tge&&a.totalQuiz>=3&&n.push({id:`felicite-${a.eleveId}`,type:"felicitation",eleveNom:a.eleveNom,eleveId:a.eleveId,groupeNom:e,message:`${a.eleveNom} excelle avec ${a.moyenne}/20 ! `,niveauUrgence:"info",dateCreation:r})}const i={critique:0,important:1,info:2};return n.sort((a,c)=>i[a.niveauUrgence]-i[c.niveauUrgence]),n}function Bge(t,e){const n=["Nom","Email","Moyenne (/20)","Quiz passs","Taux russite (%)","Streak (jours)","Lacunes principales","Tendance"],r=t.map(a=>{const c=a.lacunes.map(u=>`${u.disciplineNom} (${u.moyenne}/20)`).join(" | ")||"Aucune";return[`"${a.eleveNom}"`,`"${a.eleveEmail}"`,a.moyenne.toString(),a.totalQuiz.toString(),a.tauxReussite.toString(),a.streak.actuel.toString(),`"${c}"`,a.tendance].join(",")});return"\uFEFF"+[n.join(","),...r].join(`
`)}function $ge(t,e){const n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${e}.csv`,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}const Fge=()=>{const{currentUser:t}=Vn(),[e,n]=w.useState([]),[r,i]=w.useState(!1),[a,c]=w.useState(""),[u,f]=w.useState(!0),[h,p]=w.useState(!1),[g,y]=w.useState(null),[x,E]=w.useState(null),j=w.useCallback(async()=>{if(t?.uid)try{f(!0);const A=await Mge(t.uid);n(A)}catch(A){console.error("Erreur chargement groupes:",A)}finally{f(!1)}},[t?.uid]);w.useEffect(()=>{j()},[j]);const N=async A=>{if(A.preventDefault(),!(!t?.uid||!a.trim()))try{p(!0),y(null),E(null),await Dge(t.uid,t.displayName||t.email||"lve",t.email||"",a),E("Tu as rejoint le groupe avec succs ! "),c(""),i(!1),await j(),setTimeout(()=>E(null),5e3)}catch(k){y(k.message||"Impossible de rejoindre le groupe.")}finally{p(!1)}};return o.jsxs("div",{className:"rejoindre-groupe-section",children:[o.jsxs("div",{className:"rejoindre-groupe-header",children:[o.jsx("h3",{children:" Mes groupes-classes"}),o.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>i(!r),children:r?" Annuler":" Rejoindre un groupe"})]}),g&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",g,o.jsx("button",{onClick:()=>y(null),className:"prof-alert-close",children:""})]}),x&&o.jsx("div",{className:"prof-alert",style:{background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46"},children:x}),r&&o.jsxs("div",{className:"groupe-form-container",style:{marginBottom:"1rem"},children:[o.jsx("p",{style:{marginBottom:"0.75rem",color:"#6b7280",fontSize:"0.875rem"},children:"Saisis le code donn par ton professeur (format: PROF-XXXX-XXXX)"}),o.jsxs("form",{onSubmit:N,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[o.jsx("input",{type:"text",placeholder:"PROF-XXXX-XXXX",value:a,onChange:A=>c(A.target.value.toUpperCase()),maxLength:14,disabled:h,className:"prof-input",style:{flex:1,maxWidth:"280px",fontFamily:"monospace",letterSpacing:"2px"}}),o.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:h||a.length<14,children:h?" Vrification...":" Rejoindre"})]})]}),u?o.jsx("p",{style:{color:"#9ca3af",textAlign:"center",padding:"1rem"},children:"Chargement..."}):e.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#9ca3af"},children:[o.jsx("p",{children:"Tu n'es inscrit(e) dans aucun groupe-classe."}),o.jsx("p",{style:{fontSize:"0.875rem"},children:"Demande  ton professeur un code d'invitation pour rejoindre son groupe."})]}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map(A=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#1f2937"},children:A.nom}),o.jsxs("span",{style:{display:"block",fontSize:"0.75rem",color:"#9ca3af"},children:[A.matiereNom,"  Prof: ",A.profNom]})]}),o.jsx("span",{style:{fontSize:"0.875rem",color:"#10b981",fontWeight:600},children:" Inscrit(e)"})]},A.id))})]})},Hge=t=>t>=80?"#10b981":t>=60?"#3b82f6":t>=40?"#f59e0b":t>0?"#ef4444":"#d1d5db",QD=({pourcentage:t,label:e,size:n="md",showPercent:r=!0,color:i,showCheck:a=!0,className:c=""})=>{const[u,f]=w.useState(0);w.useEffect(()=>{const x=setTimeout(()=>{f(Math.min(100,Math.max(0,t)))},100);return()=>clearTimeout(x)},[t]);const p={sm:"4px",md:"8px",lg:"12px"}[n],g=i||Hge(t),y=t>=100;return o.jsxs("div",{className:`progress-bar-wrapper ${c}`,children:[(e||r)&&o.jsxs("div",{className:"progress-bar-header",children:[e&&o.jsx("span",{className:"progress-bar-label",children:e}),r&&o.jsxs("span",{className:"progress-bar-percent",style:{color:g},children:[y&&a?" ":"",t,"%"]})]}),o.jsx("div",{className:"progress-bar-track",style:{height:p},children:o.jsx("div",{className:"progress-bar-fill",style:{width:`${u}%`,backgroundColor:g,height:"100%"}})})]})},Gge=()=>{const t=Dr(),{currentUser:e}=Vn(),[n,r]=w.useState(null),[i,a]=w.useState([]),[c,u]=w.useState([]),[f,h]=w.useState([]),[p,g]=w.useState([]),[y,x]=w.useState(null),[E,j]=w.useState([]),[N,A]=w.useState("all"),[k,O]=w.useState(!0),[C,V]=w.useState("overview"),[$,D]=w.useState(null),[P,R]=w.useState(!1),[q,L]=w.useState(!1),M=async()=>{if(e){R(!0);try{const Y=await mge(e.uid);D(Y)}catch(Y){console.error("Erreur gnration code parent :",Y)}finally{R(!1)}}},U=()=>{$&&(navigator.clipboard.writeText($),L(!0),setTimeout(()=>L(!1),2e3))};if(w.useEffect(()=>{(async()=>{if(e){O(!0);try{await TX(e.uid);const[we,Q,F,re,ye,Ee]=await Promise.all([yX(e.uid),bX(e.uid),xX(e.uid,20),My(e.uid,10),fL().catch(()=>[]),NX(e.uid)]);r(we),a(Q),u(F),h(re),g(ye),x(Ee);const J=CX(we,Q,Ee);j(J)}catch(we){console.error("Erreur chargement dashboard :",we)}finally{O(!1)}}})()},[e]),k)return o.jsxs("div",{className:"sd-loading",children:[o.jsx("div",{className:"admin-spinner"}),o.jsx("p",{children:"Chargement de votre tableau de bord..."})]});const ge=E.filter(Y=>Y.obtenu),Z=E.length,H=e?.displayName||e?.email?.split("@")[0]||"lve",ce=N==="all"?E:E.filter(Y=>Y.categorie===N);return o.jsxs("div",{className:"student-dashboard",children:[o.jsxs("div",{className:"sd-welcome",children:[o.jsxs("div",{className:"sd-welcome-text",children:[o.jsxs("h1",{children:["Bienvenue, ",H," "]}),o.jsx("p",{children:n&&n.totalQuizPasses>0?`Vous avez pass ${n.totalQuizPasses} quiz avec une moyenne de ${n.moyenneGenerale}%. Continuez !`:"Commencez par consulter une ressource ou passer un quiz !"})]}),o.jsxs("div",{className:"sd-welcome-badges-row",children:[e?.isPremium&&o.jsxs("span",{className:"sd-premium-badge",children:[o.jsx(pi,{size:14})," Premium"]}),y&&y.streakActuel>0&&o.jsxs("span",{className:"sd-streak-badge",children:[" ",y.streakActuel," jour",y.streakActuel>1?"s":""]})]})]}),o.jsxs("div",{className:"sd-stats-grid",children:[o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#eff6ff",color:"#3b82f6"},children:o.jsx(os,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsx("span",{className:"sd-stat-value",children:n?.totalQuizPasses||0}),o.jsx("span",{className:"sd-stat-label",children:"Quiz passs"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#f0fdf4",color:"#10b981"},children:o.jsx(Wx,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",style:{color:Bu(n?.moyenneGenerale||0)},children:[n?.moyenneGenerale||0,"%"]}),o.jsx("span",{className:"sd-stat-label",children:"Moyenne gnrale"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#fef3c7",color:"#d97706"},children:o.jsx(Ju,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsx("span",{className:"sd-stat-value",children:y?.totalRessourcesVues||0}),o.jsx("span",{className:"sd-stat-label",children:"Ressources vues"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#fef2f2",color:"#ef4444"},children:o.jsx(sL,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",children:[y?.streakActuel||0," "]}),o.jsx("span",{className:"sd-stat-label",children:"Jours conscutifs"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#fefce8",color:"#f59e0b"},children:o.jsx(iL,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",children:[n?.meilleurScore||0,"%"]}),o.jsx("span",{className:"sd-stat-label",children:"Meilleur score"})]})]}),o.jsxs("div",{className:"sd-stat-card",children:[o.jsx("div",{className:"sd-stat-icon",style:{background:"#f0f9ff",color:"#0ea5e9"},children:o.jsx(ml,{size:22})}),o.jsxs("div",{className:"sd-stat-content",children:[o.jsxs("span",{className:"sd-stat-value",children:[y?.disciplinesCompletees||0,"/",y?.disciplinesCommencees||0]}),o.jsx("span",{className:"sd-stat-label",children:"Disciplines compltes"})]})]})]}),o.jsxs("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:[o.jsx("h3",{className:"sd-section-title",children:" Code Parent"}),o.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"},children:"Partagez ce code avec vos parents pour qu'ils puissent suivre votre progression."}),$?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontFamily:"monospace",fontSize:"1.4rem",fontWeight:700,letterSpacing:"0.1em",background:"#eff6ff",color:"#2563eb",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"2px dashed #93c5fd",userSelect:"all"},children:$}),o.jsx("button",{className:"sd-btn",onClick:U,style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",background:q?"#10b981":"#f3f4f6",color:q?"#fff":"#374151",border:"none",padding:"0.6rem 1rem",borderRadius:"8px",cursor:"pointer",fontWeight:500,transition:"all 0.2s"},children:q?" Copi !":" Copier"})]}):o.jsx("button",{className:"sd-btn sd-btn-primary",onClick:M,disabled:P,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:P?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"admin-spinner",style:{width:"16px",height:"16px"}})," Gnration..."]}):o.jsx(o.Fragment,{children:" Gnrer mon code"})})]}),o.jsx("div",{className:"sd-chart-card",style:{marginBottom:"1.5rem"},children:o.jsx(Fge,{})}),o.jsxs("div",{className:"sd-tabs",children:[o.jsxs("button",{className:`sd-tab ${C==="overview"?"active":""}`,onClick:()=>V("overview"),children:[o.jsx(mc,{size:16})," Vue d'ensemble"]}),o.jsxs("button",{className:`sd-tab ${C==="progression"?"active":""}`,onClick:()=>V("progression"),children:[o.jsx(sh,{size:16})," Progression"]}),o.jsxs("button",{className:`sd-tab ${C==="history"?"active":""}`,onClick:()=>V("history"),children:[o.jsx(Qx,{size:16})," Historique"]}),o.jsxs("button",{className:`sd-tab ${C==="badges"?"active":""}`,onClick:()=>V("badges"),children:[o.jsx(ml,{size:16})," Badges (",ge.length,"/",Z,")"]})]}),C==="overview"&&o.jsxs("div",{className:"sd-overview",children:[c.length>1&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(sh,{size:18})," volution de vos scores"]}),o.jsx("div",{className:"sd-chart-container",children:o.jsx(CP,{width:"100%",height:280,children:o.jsxs(Gpe,{data:c,children:[o.jsx(aj,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),o.jsx(dj,{dataKey:"date",tick:{fontSize:12,fill:"#6b7280"},tickLine:!1}),o.jsx(mj,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickLine:!1,unit:"%"}),o.jsx(Mk,{formatter:Y=>[`${Y}%`,"Score"],labelFormatter:Y=>`Date : ${Y}`,contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),o.jsx(cU,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2.5,dot:{r:4,fill:"#3b82f6",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})})]}),i.length>0&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(mc,{size:18})," Moyennes par discipline"]}),o.jsx("div",{className:"sd-chart-container",children:o.jsx(CP,{width:"100%",height:280,children:o.jsxs(Qpe,{data:i,layout:"vertical",children:[o.jsx(aj,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!1}),o.jsx(dj,{type:"number",domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},unit:"%"}),o.jsx(mj,{type:"category",dataKey:"disciplineNom",width:120,tick:{fontSize:12,fill:"#374151"}}),o.jsx(Mk,{formatter:Y=>[`${Y}%`,"Moyenne"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 4px 6px rgba(0,0,0,0.07)"}}),o.jsx(mU,{dataKey:"moyenne",radius:[0,6,6,0],barSize:24,children:i.map((Y,we)=>o.jsx(eS,{fill:Bu(Y.moyenne)},we))})]})})})]}),p.length>0&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(gh,{size:18})," Quiz disponibles"]}),o.jsx("div",{className:"sd-quiz-grid",children:p.slice(0,6).map(Y=>{const we=Y.isPremium&&!e?.isPremium;return o.jsxs("div",{className:`sd-quiz-card ${we?"locked":""}`,onClick:()=>!we&&t(`/quiz/${Y.id}`),children:[Y.isPremium&&o.jsxs("span",{className:"sd-quiz-badge-premium",children:[we?o.jsx(mw,{size:10}):o.jsx(pi,{size:10})," Premium"]}),o.jsx("h4",{className:"sd-quiz-title",children:Y.titre}),o.jsxs("div",{className:"sd-quiz-meta",children:[o.jsxs("span",{children:[o.jsx(os,{size:12})," ",Y.questions.length," questions"]}),o.jsxs("span",{children:[o.jsx(ld,{size:12})," ",Y.duree," min"]})]}),!we&&o.jsxs("button",{className:"sd-quiz-play-btn",children:[o.jsx(gh,{size:14})," Commencer"]}),we&&o.jsxs("button",{className:"sd-quiz-unlock-btn",onClick:Q=>{Q.stopPropagation(),t("/premium")},children:[o.jsx(mw,{size:14})," Dbloquer"]})]},Y.id)})})]}),n&&n.totalQuizPasses===0&&(!y||y.totalRessourcesVues===0)&&o.jsxs("div",{className:"sd-empty-state",children:[o.jsx(Wx,{size:48}),o.jsx("h3",{children:"Commencez votre parcours !"}),o.jsx("p",{children:"Consultez une ressource ou passez un quiz pour voir votre progression."}),p.length>0&&o.jsxs("button",{className:"sd-btn sd-btn-primary",onClick:()=>t(`/quiz/${p[0].id}`),children:[o.jsx(gh,{size:18})," Passer un quiz"]})]})]}),C==="progression"&&o.jsxs("div",{className:"sd-progression",children:[o.jsxs("div",{className:"sd-chart-card sd-prog-summary",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(sh,{size:18})," Avancement global"]}),o.jsx(QD,{pourcentage:y?.pourcentageMoyen||0,label:"Progression moyenne",size:"lg",showCheck:!0}),o.jsxs("div",{className:"sd-prog-stats-row",children:[o.jsxs("div",{className:"sd-prog-stat-item",children:[o.jsx("span",{className:"sd-prog-stat-number",children:y?.totalRessourcesVues||0}),o.jsx("span",{className:"sd-prog-stat-text",children:"Ressources consultes"})]}),o.jsxs("div",{className:"sd-prog-stat-item",children:[o.jsx("span",{className:"sd-prog-stat-number",children:y?.totalQuizReussis||0}),o.jsx("span",{className:"sd-prog-stat-text",children:"Quiz russis"})]}),o.jsxs("div",{className:"sd-prog-stat-item",children:[o.jsx("span",{className:"sd-prog-stat-number",children:y?.disciplinesCommencees||0}),o.jsx("span",{className:"sd-prog-stat-text",children:"Disciplines"})]}),o.jsxs("div",{className:"sd-prog-stat-item",children:[o.jsxs("span",{className:"sd-prog-stat-number",children:[" ",y?.streakActuel||0]}),o.jsxs("span",{className:"sd-prog-stat-text",children:["Streak (max: ",y?.meilleurStreak||0,")"]})]})]})]}),y&&y.parDiscipline.length>0?o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(mc,{size:18})," Par discipline"]}),o.jsx("div",{className:"sd-prog-disciplines",children:y.parDiscipline.map(Y=>o.jsxs("div",{className:"sd-prog-disc-card",children:[o.jsxs("div",{className:"sd-prog-disc-header",children:[o.jsx("span",{className:"sd-prog-disc-name",children:Y.disciplineNom}),Y.pourcentage>=100&&o.jsx("span",{className:"sd-prog-complete-tag",children:" Complt"})]}),o.jsx(QD,{pourcentage:Y.pourcentage,size:"md",showPercent:!0}),o.jsxs("div",{className:"sd-prog-disc-details",children:[o.jsxs("span",{children:[o.jsx(Ju,{size:12})," ",Y.ressourcesVues.length,"/",Y.totalRessources," ressources"]}),o.jsxs("span",{children:[o.jsx(fn,{size:12})," ",Y.quizReussis.length,"/",Y.totalQuiz," quiz russis"]})]})]},Y.disciplineId))})]}):o.jsxs("div",{className:"sd-empty-state",children:[o.jsx(Ju,{size:48}),o.jsx("h3",{children:"Aucune progression enregistre"}),o.jsx("p",{children:"Consultez des ressources ou passez des quiz pour voir votre avancement ici."})]}),i.length>0&&o.jsxs("div",{className:"sd-chart-card",children:[o.jsxs("h3",{className:"sd-section-title",children:[o.jsx(Wx,{size:18})," Performance quiz par discipline"]}),o.jsx("div",{className:"sd-disc-list",children:i.map(Y=>o.jsxs("div",{className:"sd-disc-card",children:[o.jsxs("div",{className:"sd-disc-header",children:[o.jsx("span",{className:"sd-disc-name",children:Y.disciplineNom}),o.jsxs("span",{className:"sd-disc-tendance",children:[Y.tendance==="up"&&o.jsx(sh,{size:16,className:"tendance-up"}),Y.tendance==="down"&&o.jsx(EY,{size:16,className:"tendance-down"}),Y.tendance==="stable"&&o.jsx(tY,{size:16,className:"tendance-stable"})]})]}),o.jsxs("div",{className:"sd-disc-stats",children:[o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",style:{color:Bu(Y.moyenne)},children:[Y.moyenne,"%"]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Moyenne"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsx("span",{className:"sd-disc-stat-value",children:Y.nombreQuiz}),o.jsx("span",{className:"sd-disc-stat-label",children:"Quiz"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",children:[Y.meilleurScore,"%"]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Meilleur"})]}),o.jsxs("div",{className:"sd-disc-stat",children:[o.jsxs("span",{className:"sd-disc-stat-value",children:[Y.quizReussis,"/",Y.nombreQuiz]}),o.jsx("span",{className:"sd-disc-stat-label",children:"Russis"})]})]}),o.jsx("div",{className:"sd-disc-bar",children:o.jsx("div",{className:"sd-disc-bar-fill",style:{width:`${Y.moyenne}%`,background:Bu(Y.moyenne)}})})]},Y.disciplineId))})]})]}),C==="history"&&o.jsx("div",{className:"sd-history",children:f.length===0?o.jsxs("div",{className:"sd-empty-state",children:[o.jsx(Qx,{size:48}),o.jsx("h3",{children:"Aucun quiz pass"}),o.jsx("p",{children:"Votre historique apparatra ici aprs avoir pass des quiz."})]}):o.jsx("div",{className:"sd-history-list",children:f.map(Y=>{const we=Y.datePassage?.toDate?Y.datePassage.toDate():new Date(Y.datePassage);return o.jsxs("div",{className:`sd-history-item ${Y.reussi?"success":"fail"}`,children:[o.jsx("div",{className:`sd-history-icon ${Y.reussi?"success":"fail"}`,children:Y.reussi?o.jsx(fn,{size:20}):o.jsx(fw,{size:20})}),o.jsxs("div",{className:"sd-history-content",children:[o.jsxs("div",{className:"sd-history-top",children:[o.jsx("span",{className:"sd-history-title",children:Y.quizTitre}),o.jsx("span",{className:"sd-history-discipline",children:Y.disciplineNom})]}),o.jsxs("div",{className:"sd-history-meta",children:[o.jsxs("span",{children:[o.jsx(Qx,{size:12}),we.toLocaleDateString("fr-SN",{day:"2-digit",month:"long",year:"numeric"})]}),o.jsxs("span",{children:[o.jsx(ld,{size:12})," ",gL(Y.tempsEcoule)]}),o.jsxs("span",{children:[o.jsx(fn,{size:12})," ",Y.bonnesReponses,"/",Y.nombreQuestions]})]})]}),o.jsxs("div",{className:"sd-history-score",style:{color:Bu(Y.pourcentage)},children:[o.jsxs("span",{className:"sd-history-score-value",children:[Y.pourcentage,"%"]}),o.jsx("span",{className:"sd-history-score-label",children:vL(Y.pourcentage)})]})]},Y.id)})})}),C==="badges"&&o.jsxs("div",{className:"sd-badges",children:[o.jsxs("div",{className:"sd-badges-summary",children:[o.jsxs("div",{className:"sd-badges-circle",children:[o.jsx("span",{className:"sd-badges-count",children:ge.length}),o.jsxs("span",{className:"sd-badges-total",children:["/ ",Z]})]}),o.jsx("p",{children:"badges obtenus"}),o.jsx("div",{className:"sd-badges-progress",children:o.jsx("div",{className:"sd-badges-progress-fill",style:{width:`${ge.length/Z*100}%`}})})]}),o.jsx("div",{className:"sd-badges-filters",children:[{key:"all",label:"Tous"},{key:"ressources",label:" Ressources"},{key:"quiz",label:" Quiz"},{key:"performance",label:" Performance"},{key:"discipline",label:" Disciplines"},{key:"streak",label:" Streak"}].map(Y=>o.jsx("button",{className:`sd-badge-filter-btn ${N===Y.key?"active":""}`,onClick:()=>A(Y.key),children:Y.label},Y.key))}),o.jsx("div",{className:"sd-badges-grid",children:ce.map(Y=>o.jsxs("div",{className:`sd-badge-card ${Y.obtenu?"obtained":"locked"}`,children:[o.jsx("span",{className:"sd-badge-icon",children:Y.icone}),o.jsx("h4",{className:"sd-badge-name",children:Y.nom}),o.jsx("p",{className:"sd-badge-description",children:Y.description}),o.jsx("span",{className:"sd-badge-condition",children:Y.condition}),Y.obtenu&&o.jsx("span",{className:"sd-badge-obtained-tag",children:" Obtenu"}),o.jsx("span",{className:"sd-badge-category",children:Y.categorie})]},Y.id))}),ce.length===0&&o.jsxs("div",{className:"sd-empty-state",style:{marginTop:"1rem"},children:[o.jsx(OE,{size:36}),o.jsx("h3",{children:"Aucun badge dans cette catgorie"}),o.jsx("p",{children:"Essayez un autre filtre."})]})]})]})},Kge=()=>{const{currentUser:t}=Vn(),e=Dr(),[n,r]=w.useState(null),[i,a]=w.useState(!0),[c,u]=w.useState(null),f=["L","M","M","J","V","S","D"],h=w.useCallback(async()=>{if(t?.uid)try{a(!0),u(null);const O=await fS(t.uid);r(O)}catch(O){console.error("Erreur chargement suivi:",O),u("Impossible de charger ton suivi. Vrifie ta connexion et ressaie.")}finally{a(!1)}},[t?.uid]);w.useEffect(()=>{h()},[h]);const p=(()=>{const O=new Date().getDay();return O===0?6:O-1})();if(i)return o.jsx("div",{className:"suivi-page",children:o.jsx("div",{className:"suivi-container",children:o.jsxs("div",{className:"suivi-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{className:"suivi-loading-text",children:"Analyse de ta progression en cours..."})]})})});if(c)return o.jsx("div",{className:"suivi-page",children:o.jsx("div",{className:"suivi-container",children:o.jsxs("div",{className:"suivi-error",children:[o.jsx("p",{className:"suivi-error-title",children:" Erreur de chargement"}),o.jsx("p",{className:"suivi-error-text",children:c}),o.jsx("button",{className:"suivi-btn-retry",onClick:h,children:" Ressayer"})]})})});if(!n)return null;const{lacunes:g,recommandations:y,streak:x,objectifs:E,scoreGlobal:j}=n,N=2*Math.PI*40,A=N-j/100*N,k=j>=60?"#10b981":j>=30?"#f59e0b":"#ef4444";return o.jsx("div",{className:"suivi-page",children:o.jsxs("div",{className:"suivi-container",children:[o.jsx("div",{className:"suivi-header",children:o.jsxs("div",{className:"suivi-header-content",children:[o.jsxs("div",{children:[o.jsx("h1",{children:" Mes points  amliorer"}),o.jsx("p",{className:"suivi-motivation",children:age(j)})]}),o.jsxs("div",{className:"score-global-circle",children:[o.jsxs("svg",{className:"score-circle-svg",viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"score-circle-bg",cx:"50",cy:"50",r:"40"}),o.jsx("circle",{className:"score-circle-progress",cx:"50",cy:"50",r:"40",stroke:k,strokeDasharray:N,strokeDashoffset:A}),o.jsx("text",{className:"score-circle-text",x:"50",y:"50",children:j})]}),o.jsx("span",{className:"score-global-label",children:"Score global"})]})]})}),o.jsxs("div",{className:"streak-card",children:[o.jsxs("div",{className:"streak-header",children:[o.jsx("span",{className:"streak-flamme",children:x.streakActuel>0?"":""}),o.jsxs("div",{children:[o.jsx("div",{className:"streak-nombre",children:x.streakActuel}),o.jsx("div",{className:"streak-label",children:x.streakActuel<=1?"jour conscutif":"jours conscutifs"})]})]}),o.jsx("div",{className:"streak-semaine",children:f.map((O,C)=>o.jsxs("div",{className:"streak-jour",children:[o.jsx("span",{className:"streak-jour-label",children:O}),o.jsx("div",{className:`streak-jour-indicateur ${x.semaineCourante[C]?"actif":"inactif"} ${C===p?"aujourd-hui":""}`,children:x.semaineCourante[C]?"":""})]},C))}),o.jsxs("div",{className:"streak-stats",children:[o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsx("span",{className:"streak-stat-value",children:x.meilleurStreak}),o.jsx("span",{className:"streak-stat-label",children:"record"})]}),o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsx("span",{className:"streak-stat-value",children:x.totalJoursActifs}),o.jsx("span",{className:"streak-stat-label",children:"jours actifs au total"})]}),x.dernierJourActif&&o.jsxs("div",{className:"streak-stat",children:[o.jsx("span",{className:"streak-stat-icon",children:""}),o.jsxs("span",{className:"streak-stat-label",children:["Dernier quiz : ",new Date(x.dernierJourActif).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})]})]})]}),o.jsxs("h2",{className:"suivi-section-title",children:[" Objectifs de la semaine",o.jsx("span",{className:"suivi-section-badge",children:E.length})]}),E.length>0?o.jsx("div",{className:"objectifs-grid",children:E.map(O=>{const C=oge(O);return o.jsxs("div",{className:`objectif-card ${O.statut==="atteint"?"atteint":""}`,children:[o.jsxs("div",{className:"objectif-header",children:[o.jsx("span",{className:"objectif-titre",children:O.titre}),O.recompense&&o.jsx("span",{className:"objectif-recompense",children:O.recompense})]}),o.jsx("p",{className:"objectif-description",children:O.description}),o.jsxs("div",{className:"objectif-progress",children:[o.jsxs("div",{className:"objectif-progress-labels",children:[o.jsxs("span",{className:"objectif-progress-value",children:[O.progression," / ",O.cible]}),o.jsxs("span",{className:"objectif-progress-cible",children:[C,"%"]})]}),o.jsx("div",{className:"objectif-progress-track",children:o.jsx("div",{className:`objectif-progress-fill ${O.statut==="atteint"?"atteint":""}`,style:{width:`${C}%`}})})]}),o.jsx("p",{className:`objectif-statut ${O.statut}`,children:O.statut==="atteint"?" Objectif atteint !":O.statut==="en_cours"?" En cours...":" Non commenc"})]},O.id)})}):o.jsxs("div",{className:"suivi-empty",children:[o.jsx("div",{className:"suivi-empty-icon",children:""}),o.jsx("p",{className:"suivi-empty-title",children:"Pas encore d'objectifs"}),o.jsx("p",{className:"suivi-empty-text",children:"Passe ton premier quiz pour dbloquer tes objectifs hebdomadaires !"})]}),o.jsxs("h2",{className:"suivi-section-title",children:[" Points faibles dtects",g.length>0&&o.jsx("span",{className:"suivi-section-badge",children:g.length})]}),g.length>0?o.jsx("div",{className:"lacunes-grid",children:g.map(O=>o.jsxs("div",{className:`lacune-card ${O.niveauUrgence}`,children:[o.jsxs("div",{className:"lacune-card-header",children:[o.jsx("span",{className:"lacune-discipline",children:O.disciplineNom}),o.jsx("span",{className:`lacune-badge ${O.niveauUrgence}`,children:AU(O.niveauUrgence)})]}),o.jsxs("div",{className:"lacune-score-bar",children:[o.jsxs("div",{className:"lacune-score-labels",children:[o.jsxs("span",{className:"lacune-score-value",style:{color:oy(O.niveauUrgence)},children:[O.moyenne,"/20"]}),o.jsx("span",{className:"lacune-score-objectif",children:"Objectif : 14/20"})]}),o.jsx("div",{className:"lacune-progress-track",children:o.jsx("div",{className:`lacune-progress-fill ${O.niveauUrgence}`,style:{width:`${O.moyenne/20*100}%`}})})]}),o.jsxs("div",{className:"lacune-details",children:[o.jsxs("span",{className:"lacune-detail-tag",children:[TU(O.tendance)," ",O.tendance]}),o.jsxs("span",{className:"lacune-detail-tag",children:[" ",O.nombreQuiz," quiz"]}),o.jsxs("span",{className:"lacune-detail-tag",children:["Dernier : ",O.scoreDetails.dernierScore,"/20"]})]})]},O.id))}):o.jsxs("div",{className:"suivi-empty",children:[o.jsx("div",{className:"suivi-empty-icon",children:""}),o.jsx("p",{className:"suivi-empty-title",children:"Aucune lacune dtecte !"}),o.jsx("p",{className:"suivi-empty-text",children:j>0?"Toutes tes moyennes sont au-dessus de 14/20. Bravo, continue !":"Passe des quiz pour que l'analyse puisse commencer."}),o.jsx("button",{className:"suivi-cta-btn",onClick:()=>e("/disciplines"),style:{marginTop:"1rem"},children:" Voir les disciplines"})]}),y.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("h2",{className:"suivi-section-title",children:[" Recommandations personnalises",o.jsx("span",{className:"suivi-section-badge",children:y.length})]}),o.jsx("div",{className:"recommandations-list",children:y.map(O=>o.jsxs("div",{className:"recommandation-card",children:[o.jsx("div",{className:"recommandation-priorite",children:O.priorite}),o.jsxs("div",{className:"recommandation-content",children:[o.jsx("p",{className:"recommandation-titre",children:O.titre}),o.jsx("p",{className:"recommandation-description",children:O.description}),o.jsx("span",{className:"recommandation-discipline-tag",children:O.disciplineNom})]})]},O.id))})]}),o.jsx("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"2rem"},children:o.jsx("button",{className:"suivi-cta-btn",onClick:()=>e("/disciplines"),children:" Passer un quiz maintenant"})})]})})},Qge=()=>{const t=new Date,e=t.getFullYear(),r=t.getMonth()>=9?e:e-1,i=[];for(let a=-1;a<=3;a++){const c=r+a;i.push(`${c}-${c+1}`)}return i},WD=Qge(),Xf=()=>{const t=new Date,e=t.getFullYear(),r=t.getMonth()>=9?e:e-1;return`${r}-${r+1}`},YD=[{value:"6eme",label:"6me"},{value:"5eme",label:"5me"},{value:"4eme",label:"4me"},{value:"3eme",label:"3me"},{value:"2nde",label:"2nde"},{value:"1ere",label:"1re"},{value:"Terminale",label:"Terminale"}],Wge=({onSelectGroupe:t})=>{const{currentUser:e}=Vn(),[n,r]=w.useState([]),[i,a]=w.useState(new Map),[c,u]=w.useState([]),[f,h]=w.useState(!0),[p,g]=w.useState(null),[y,x]=w.useState(!1),[E,j]=w.useState(!1),[N,A]=w.useState(null),[k,O]=w.useState(null),[C,V]=w.useState(null),[$,D]=w.useState(!1),[P,R]=w.useState(null),[q,L]=w.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Xf()}),[M,U]=w.useState({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Xf()}),[ge,Z]=w.useState("actif");w.useEffect(()=>{(async()=>{try{const K=await jl.getAll();u(K.map(fe=>({id:fe.id,nom:fe.nom,classe:fe.classe||""})))}catch(K){console.warn(" Impossible de charger les disciplines:",K)}})()},[]);const H=w.useCallback(async()=>{if(e?.uid)try{h(!0),g(null);const X=await kU(e.uid);r(X);const K=new Map;for(const fe of X)if(fe.statut==="actif")try{const Te=await hS(fe.id);K.set(fe.id,Te)}catch{console.warn(`Stats indisponibles pour ${fe.nom}`)}a(K)}catch(X){console.error("Erreur chargement groupes:",X),g("Impossible de charger vos groupes. Vrifiez votre connexion.")}finally{h(!1)}},[e?.uid]);w.useEffect(()=>{H()},[H]);const ce=(X,K=!1)=>{const fe=c.find(ze=>ze.id===X),Te=fe?`${fe.nom}${fe.classe?` (${fe.classe})`:""}`:"";K?U(ze=>({...ze,matiereId:X,matiereNom:Te})):L(ze=>({...ze,matiereId:X,matiereNom:Te}))},Y=async X=>{if(X.preventDefault(),!(!e?.uid||!q.nom.trim()||!q.matiereId))try{j(!0),await Oge(e.uid,e.displayName||e.email||"Professeur",q),L({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Xf()}),x(!1),R("Groupe cr avec succs !"),setTimeout(()=>R(null),3e3),await H()}catch(K){g(K.message||"Erreur lors de la cration du groupe.")}finally{j(!1)}},we=X=>{V(X),U({nom:X.nom,description:X.description||"",matiereId:X.matiereId,matiereNom:X.matiereNom,classeNiveau:X.classeNiveau,anneeScolaire:X.anneeScolaire}),x(!1)},Q=()=>{V(null),U({nom:"",description:"",matiereId:"",matiereNom:"",classeNiveau:"6eme",anneeScolaire:Xf()})},F=async X=>{if(X.preventDefault(),!(!C||!M.nom.trim()||!M.matiereId))try{D(!0),await DU(C.id,{nom:M.nom.trim(),description:M.description?.trim()||"",matiereId:M.matiereId,matiereNom:M.matiereNom,classeNiveau:M.classeNiveau,anneeScolaire:M.anneeScolaire}),V(null),R("Groupe modifi avec succs !"),setTimeout(()=>R(null),3e3),await H()}catch(K){g(K.message||"Erreur lors de la modification du groupe.")}finally{D(!1)}},re=async X=>{try{await navigator.clipboard.writeText(X),A(X),setTimeout(()=>A(null),2e3)}catch{const K=document.createElement("textarea");K.value=X,document.body.appendChild(K),K.select(),document.execCommand("copy"),document.body.removeChild(K),A(X),setTimeout(()=>A(null),2e3)}},ye=async X=>{try{await Pge(X),O(null),await H()}catch(K){g(K.message)}},Ee=async X=>{try{await Rge(X),await H()}catch(K){g(K.message)}},J=async X=>{try{await kge(X),await H()}catch(K){g(K.message)}},ne=(X,K)=>{L(fe=>({...fe,[X]:K}))},pe=(X,K)=>{U(fe=>({...fe,[X]:K}))},De=n.filter(X=>ge==="tous"?!0:X.statut===ge),se=(X,K,fe)=>o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:X,children:"Discipline / Matire *"}),o.jsxs("select",{id:X,value:K,onChange:Te=>fe(Te.target.value),className:"prof-select",required:!0,children:[o.jsx("option",{value:"",children:" Slectionner une discipline "}),c.map(Te=>o.jsxs("option",{value:Te.id,children:[Te.nom,Te.classe?` (${Te.classe})`:""]},Te.id))]}),c.length===0&&o.jsx("small",{style:{color:"#f59e0b",marginTop:"0.25rem",display:"block"},children:" Aucune discipline trouve. Crez des disciplines dans l'espace admin."})]});return f?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement de vos groupes-classes..."})]}):o.jsxs("div",{className:"groupe-manager",children:[o.jsxs("div",{className:"groupe-manager-header",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"groupe-manager-titre",children:"Mes groupes-classes"}),o.jsxs("p",{className:"groupe-manager-subtitle",children:[n.length," groupe",n.length!==1?"s":"","  Anne ",Xf()]})]}),o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>{x(!y),C&&Q()},children:y?" Annuler":" Nouveau groupe"})]}),p&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[o.jsx("span",{children:""})," ",p,o.jsx("button",{onClick:()=>g(null),className:"prof-alert-close",children:""})]}),P&&o.jsxs("div",{className:"prof-alert prof-alert-success",children:[o.jsx("span",{children:""})," ",P,o.jsx("button",{onClick:()=>R(null),className:"prof-alert-close",children:""})]}),y&&o.jsxs("div",{className:"groupe-form-container",children:[o.jsx("h3",{children:"Crer un nouveau groupe-classe"}),o.jsxs("form",{onSubmit:Y,className:"groupe-form",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-nom",children:"Nom du groupe *"}),o.jsx("input",{id:"groupe-nom",type:"text",placeholder:"Ex: 3me A - Maths 2025",value:q.nom,onChange:X=>ne("nom",X.target.value),required:!0,className:"prof-input",maxLength:60})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-desc",children:"Description (optionnelle)"}),o.jsx("input",{id:"groupe-desc",type:"text",placeholder:"Ex: Cours du mardi et jeudi matin",value:q.description||"",onChange:X=>ne("description",X.target.value),className:"prof-input",maxLength:120})]}),o.jsxs("div",{className:"prof-form-row",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-niveau",children:"Niveau de classe *"}),o.jsx("select",{id:"groupe-niveau",value:q.classeNiveau,onChange:X=>ne("classeNiveau",X.target.value),className:"prof-select",children:YD.map(X=>o.jsx("option",{value:X.value,children:X.label},X.value))})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"groupe-annee",children:"Anne scolaire *"}),o.jsx("select",{id:"groupe-annee",value:q.anneeScolaire,onChange:X=>ne("anneeScolaire",X.target.value),className:"prof-select",children:WD.map(X=>o.jsx("option",{value:X,children:X},X))})]})]}),se("groupe-discipline",q.matiereId,X=>ce(X,!1)),o.jsx("div",{className:"prof-form-actions",children:o.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:E||!q.nom.trim()||!q.matiereId,children:E?" Cration...":" Crer le groupe"})})]})]}),C&&o.jsxs("div",{className:"groupe-form-container",style:{borderLeft:"4px solid #f59e0b"},children:[o.jsxs("h3",{children:[" Modifier le groupe : ",C.nom]}),o.jsxs("form",{onSubmit:F,className:"groupe-form",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"edit-groupe-nom",children:"Nom du groupe *"}),o.jsx("input",{id:"edit-groupe-nom",type:"text",value:M.nom,onChange:X=>pe("nom",X.target.value),required:!0,className:"prof-input",maxLength:60})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"edit-groupe-desc",children:"Description (optionnelle)"}),o.jsx("input",{id:"edit-groupe-desc",type:"text",value:M.description||"",onChange:X=>pe("description",X.target.value),className:"prof-input",maxLength:120})]}),o.jsxs("div",{className:"prof-form-row",children:[o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"edit-groupe-niveau",children:"Niveau de classe *"}),o.jsx("select",{id:"edit-groupe-niveau",value:M.classeNiveau,onChange:X=>pe("classeNiveau",X.target.value),className:"prof-select",children:YD.map(X=>o.jsx("option",{value:X.value,children:X.label},X.value))})]}),o.jsxs("div",{className:"prof-form-group",children:[o.jsx("label",{htmlFor:"edit-groupe-annee",children:"Anne scolaire *"}),o.jsx("select",{id:"edit-groupe-annee",value:M.anneeScolaire,onChange:X=>pe("anneeScolaire",X.target.value),className:"prof-select",children:WD.map(X=>o.jsx("option",{value:X,children:X},X))})]})]}),se("edit-groupe-discipline",M.matiereId,X=>ce(X,!0)),o.jsxs("div",{className:"prof-form-actions",style:{display:"flex",gap:"0.75rem"},children:[o.jsx("button",{type:"submit",className:"prof-btn prof-btn-primary",disabled:$||!M.nom.trim()||!M.matiereId,children:$?" Enregistrement...":" Enregistrer"}),o.jsx("button",{type:"button",className:"prof-btn prof-btn-secondary",onClick:Q,disabled:$,children:" Annuler"})]})]})]}),o.jsxs("div",{className:"groupe-filtres",children:[o.jsxs("button",{className:`prof-filtre-btn ${ge==="actif"?"active":""}`,onClick:()=>Z("actif"),children:["Actifs (",n.filter(X=>X.statut==="actif").length,")"]}),o.jsxs("button",{className:`prof-filtre-btn ${ge==="archive"?"active":""}`,onClick:()=>Z("archive"),children:["Archivs (",n.filter(X=>X.statut==="archive").length,")"]}),o.jsxs("button",{className:`prof-filtre-btn ${ge==="tous"?"active":""}`,onClick:()=>Z("tous"),children:["Tous (",n.length,")"]})]}),De.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:ge==="archive"?"Aucun groupe archiv":"Aucun groupe-classe cr"}),o.jsx("p",{children:ge==="archive"?"Vos groupes archivs apparatront ici.":"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),ge!=="archive"&&o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>x(!0),children:" Crer mon premier groupe"})]}):o.jsx("div",{className:"groupe-grid",children:De.map(X=>{const K=i.get(X.id),fe=C?.id===X.id;return o.jsxs("div",{className:`groupe-card ${X.statut==="archive"?"groupe-card-archive":""} ${fe?"groupe-card-editing":""}`,children:[o.jsxs("div",{className:"groupe-card-header",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"groupe-card-titre",children:X.nom}),o.jsx("span",{className:"groupe-card-matiere",children:X.matiereNom})]}),o.jsx("span",{className:`groupe-badge groupe-badge-${X.statut}`,children:X.statut==="actif"?" Actif":" Archiv"})]}),X.description&&o.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem",margin:"0.25rem 0 0.5rem"},children:X.description}),o.jsxs("div",{className:"groupe-card-infos",children:[o.jsxs("span",{children:[" ",X.classeNiveau]}),o.jsxs("span",{children:[" ",X.anneeScolaire]}),o.jsxs("span",{children:[" ",X.nombreInscrits," lve",X.nombreInscrits!==1?"s":""]})]}),o.jsxs("div",{className:"groupe-card-code",children:[o.jsx("span",{className:"groupe-code-label",children:"Code d'invitation :"}),o.jsxs("div",{className:"groupe-code-box",children:[o.jsx("code",{className:"groupe-code-value",children:X.codeInvitation}),o.jsx("button",{className:"prof-btn-icon",onClick:Te=>{Te.stopPropagation(),re(X.codeInvitation)},title:"Copier le code",children:N===X.codeInvitation?"":""}),X.statut==="actif"&&o.jsx("button",{className:"prof-btn-icon",onClick:Te=>{Te.stopPropagation(),J(X.id)},title:"Rgnrer le code",children:""})]})]}),K&&K.nombreEleves>0&&o.jsxs("div",{className:"groupe-card-stats",children:[o.jsxs("div",{className:"groupe-stat-item",children:[o.jsx("span",{className:"groupe-stat-value",children:K.moyenneClasse}),o.jsx("span",{className:"groupe-stat-label",children:"Moyenne"})]}),o.jsxs("div",{className:"groupe-stat-item",children:[o.jsxs("span",{className:"groupe-stat-value",children:[K.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-label",children:"Russite"})]}),o.jsxs("div",{className:"groupe-stat-item",children:[o.jsx("span",{className:"groupe-stat-value",children:K.elevesEnDifficulte}),o.jsx("span",{className:"groupe-stat-label",children:"En difficult"})]})]}),o.jsxs("div",{className:"groupe-card-actions",children:[X.statut==="actif"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"prof-btn prof-btn-primary prof-btn-sm",onClick:()=>t(X),children:" Voir dtails"}),o.jsx("button",{className:"prof-btn prof-btn-warning prof-btn-sm",onClick:()=>we(X),style:{background:"#fef3c7",color:"#92400e",border:"1px solid #fbbf24"},children:" Modifier"}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>Ee(X.id),children:" Archiver"})]}),k===X.id?o.jsxs("div",{className:"groupe-confirm-suppression",children:[o.jsx("span",{children:"Confirmer ?"}),o.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>ye(X.id),children:"Oui, supprimer"}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>O(null),children:"Non"})]}):o.jsx("button",{className:"prof-btn prof-btn-danger prof-btn-sm",onClick:()=>O(X.id),children:" Supprimer"})]})]},X.id)})})]})},Yge=({groupe:t,onRetour:e})=>{const[n,r]=w.useState(null),[i,a]=w.useState([]),[c,u]=w.useState([]),[f,h]=w.useState([]),[p,g]=w.useState(null),[y,x]=w.useState(!0),[E,j]=w.useState(null),[N,A]=w.useState("apercu"),[k,O]=w.useState("moyenne_desc"),[C,V]=w.useState(null),[$,D]=w.useState(null),[P,R]=w.useState(!1),[q,L]=w.useState(null),M=w.useCallback(async()=>{try{x(!0),j(null);const[Q,F,re]=await Promise.all([hS(t.id),Lge(t.id),Uge(t.matiereId)]);r(Q),a(F),h(re);const ye=Vge(F,t.nom);u(ye)}catch(Q){console.error("Erreur chargement dtail groupe:",Q),j("Impossible de charger les donnes du groupe.")}finally{x(!1)}},[t.id,t.matiereId,t.nom]);w.useEffect(()=>{M()},[M]);const U=async Q=>{try{R(!0),D(Q);const F=await qge(t.id,Q);g(F)}catch(F){console.error("Erreur analyse quiz:",F)}finally{R(!1)}},ge=()=>{const Q=Bge(i,t.nom),F=`PedaClic_${t.nom.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}`;$ge(Q,F)},Z=async Q=>{try{L(Q);const re=(await O0(t.id)).find(ye=>ye.eleveId===Q);re&&(await zge(re.id,t.id),await M())}catch(F){j(F.message)}finally{L(null)}},H=[...i].sort((Q,F)=>{switch(k){case"moyenne_desc":return F.moyenne-Q.moyenne;case"moyenne_asc":return Q.moyenne-F.moyenne;case"nom":return Q.eleveNom.localeCompare(F.eleveNom);case"streak":return F.streak.actuel-Q.streak.actuel;case"quiz_count":return F.totalQuiz-Q.totalQuiz;default:return 0}}),ce=Q=>Q>=16?"prof-note-excellent":Q>=12?"prof-note-bien":Q>=10?"prof-note-passable":Q>=8?"prof-note-insuffisant":"prof-note-critique",Y=Q=>{switch(Q){case"hausse":return"";case"baisse":return"";default:return""}},we=Q=>{switch(Q){case"difficulte":return"";case"inactivite":return"";case"baisse":return"";case"felicitation":return"";default:return""}};return y?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsxs("p",{children:['Chargement des donnes de "',t.nom,'"...']})]}):o.jsxs("div",{className:"groupe-detail",children:[o.jsxs("div",{className:"groupe-detail-header",children:[o.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:e,children:" Retour aux groupes"}),o.jsxs("div",{className:"groupe-detail-titre-section",children:[o.jsx("h2",{className:"groupe-detail-titre",children:t.nom}),o.jsxs("p",{className:"groupe-detail-subtitle",children:[t.matiereNom,"  ",t.classeNiveau,"  ",t.anneeScolaire]})]}),o.jsx("button",{className:"prof-btn prof-btn-secondary",onClick:ge,children:" Export CSV"})]}),E&&o.jsxs("div",{className:"prof-alert prof-alert-error",children:[" ",E,o.jsx("button",{onClick:()=>j(null),className:"prof-alert-close",children:""})]}),o.jsx("div",{className:"groupe-detail-onglets",children:[{id:"apercu",label:" Aperu",count:null},{id:"eleves",label:" lves",count:i.length},{id:"quiz",label:" Quiz",count:f.length},{id:"alertes",label:" Alertes",count:c.length}].map(Q=>o.jsxs("button",{className:`groupe-onglet ${N===Q.id?"active":""}`,onClick:()=>A(Q.id),children:[Q.label,Q.count!==null&&Q.count>0&&o.jsx("span",{className:"groupe-onglet-badge",children:Q.count})]},Q.id))}),N==="apercu"&&n&&o.jsxs("div",{className:"groupe-apercu",children:[o.jsxs("div",{className:"groupe-stats-grid",children:[o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:`groupe-stat-card-value ${ce(n.moyenneClasse)}`,children:[n.moyenneClasse,"/20"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Moyenne classe"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Taux de russite"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:"groupe-stat-card-value",children:n.nombreEleves}),o.jsx("span",{className:"groupe-stat-card-label",children:"lves inscrits"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:"groupe-stat-card-value",children:n.totalQuizPasses}),o.jsx("span",{className:"groupe-stat-card-label",children:"Quiz passs"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsxs("span",{className:"groupe-stat-card-value",children:[n.tauxParticipation,"%"]}),o.jsx("span",{className:"groupe-stat-card-label",children:"Participation"})]})]}),o.jsxs("div",{className:"groupe-stat-card",children:[o.jsx("div",{className:"groupe-stat-card-icon",children:""}),o.jsxs("div",{className:"groupe-stat-card-content",children:[o.jsx("span",{className:`groupe-stat-card-value ${n.elevesEnDifficulte>0?"prof-note-critique":"prof-note-excellent"}`,children:n.elevesEnDifficulte}),o.jsx("span",{className:"groupe-stat-card-label",children:"En difficult"})]})]})]}),o.jsx("div",{className:"groupe-apercu-notes",children:o.jsxs("div",{className:"groupe-note-range",children:[o.jsx("span",{className:"groupe-note-range-label",children:"Plage des notes :"}),o.jsxs("span",{className:"prof-note-critique",children:[n.pireNote,"/20"]}),o.jsx("div",{className:"groupe-note-barre",children:o.jsx("div",{className:"groupe-note-barre-fill",style:{left:`${n.pireNote/20*100}%`,width:`${(n.meilleureNote-n.pireNote)/20*100}%`}})}),o.jsxs("span",{className:"prof-note-excellent",children:[n.meilleureNote,"/20"]})]})}),i.length>=3&&o.jsxs("div",{className:"groupe-apercu-classement",children:[o.jsxs("div",{className:"groupe-classement-section",children:[o.jsx("h4",{children:" Top 3"}),i.slice(0,3).map((Q,F)=>o.jsxs("div",{className:"groupe-classement-item",children:[o.jsx("span",{className:"groupe-classement-rang",children:F===0?"":F===1?"":""}),o.jsx("span",{className:"groupe-classement-nom",children:Q.eleveNom}),o.jsxs("span",{className:`groupe-classement-note ${ce(Q.moyenne)}`,children:[Q.moyenne,"/20"]})]},Q.eleveId))]}),o.jsxs("div",{className:"groupe-classement-section",children:[o.jsx("h4",{children:"  surveiller"}),i.filter(Q=>Q.moyenne<8&&Q.totalQuiz>0).slice(0,3).map(Q=>o.jsxs("div",{className:"groupe-classement-item",children:[o.jsx("span",{className:"groupe-classement-rang",children:""}),o.jsx("span",{className:"groupe-classement-nom",children:Q.eleveNom}),o.jsxs("span",{className:`groupe-classement-note ${ce(Q.moyenne)}`,children:[Q.moyenne,"/20"]})]},Q.eleveId)),i.filter(Q=>Q.moyenne<8&&Q.totalQuiz>0).length===0&&o.jsx("p",{className:"groupe-classement-vide",children:"Aucun lve en difficult "})]})]})]}),N==="eleves"&&o.jsxs("div",{className:"groupe-eleves",children:[o.jsxs("div",{className:"groupe-eleves-toolbar",children:[o.jsx("label",{htmlFor:"tri-eleves",children:"Trier par :"}),o.jsxs("select",{id:"tri-eleves",value:k,onChange:Q=>O(Q.target.value),className:"prof-select prof-select-sm",children:[o.jsx("option",{value:"moyenne_desc",children:"Moyenne ()"}),o.jsx("option",{value:"moyenne_asc",children:"Moyenne ()"}),o.jsx("option",{value:"nom",children:"Nom (A-Z)"}),o.jsx("option",{value:"streak",children:"Streak ()"}),o.jsx("option",{value:"quiz_count",children:"Quiz passs ()"})]}),o.jsxs("span",{className:"groupe-eleves-count",children:[i.length," lve",i.length!==1?"s":""]})]}),i.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Aucun lve inscrit"}),o.jsxs("p",{children:["Partagez le code ",o.jsx("strong",{children:t.codeInvitation}),"  vos lves."]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"groupe-eleves-table-wrapper",children:o.jsxs("table",{className:"groupe-eleves-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"#"}),o.jsx("th",{children:"lve"}),o.jsx("th",{children:"Moyenne"}),o.jsx("th",{children:"Quiz"}),o.jsx("th",{children:"Russite"}),o.jsx("th",{children:"Streak"}),o.jsx("th",{children:"Tendance"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:H.map((Q,F)=>o.jsxs("tr",{className:`${C===Q.eleveId?"groupe-eleve-row-active":""}`,children:[o.jsx("td",{className:"groupe-eleve-rang",children:F+1}),o.jsx("td",{className:"groupe-eleve-nom-cell",children:o.jsxs("div",{children:[o.jsx("strong",{children:Q.eleveNom}),o.jsx("span",{className:"groupe-eleve-email",children:Q.eleveEmail})]})}),o.jsx("td",{children:o.jsxs("span",{className:`groupe-note-badge ${ce(Q.moyenne)}`,children:[Q.moyenne,"/20"]})}),o.jsx("td",{children:Q.totalQuiz}),o.jsxs("td",{children:[Q.tauxReussite,"%"]}),o.jsx("td",{children:o.jsxs("span",{className:"groupe-streak",children:[" ",Q.streak.actuel,"j"]})}),o.jsxs("td",{children:[Y(Q.tendance)," ",Q.tendance]}),o.jsxs("td",{className:"groupe-eleve-actions",children:[o.jsx("button",{className:"prof-btn-icon",onClick:()=>V(C===Q.eleveId?null:Q.eleveId),title:"Voir dtails",children:C===Q.eleveId?"":""}),o.jsx("button",{className:"prof-btn-icon prof-btn-icon-danger",onClick:()=>Z(Q.eleveId),disabled:q===Q.eleveId,title:"Retirer du groupe",children:q===Q.eleveId?"":""})]})]},Q.eleveId))})]})}),C&&(()=>{const Q=i.find(F=>F.eleveId===C);return Q?o.jsxs("div",{className:"groupe-eleve-detail",children:[o.jsxs("div",{className:"groupe-eleve-detail-header",children:[o.jsxs("h3",{children:[" Dtail  ",Q.eleveNom]}),o.jsx("button",{className:"prof-btn-icon",onClick:()=>V(null),children:""})]}),o.jsxs("div",{className:"groupe-eleve-detail-grid",children:[o.jsxs("div",{className:"groupe-eleve-detail-card",children:[o.jsx("h4",{children:"Score global"}),o.jsx("div",{className:"groupe-eleve-score-circle",children:o.jsxs("span",{className:ce(Q.scoreGlobal/5),children:[Q.scoreGlobal,"/100"]})})]}),o.jsxs("div",{className:"groupe-eleve-detail-card",children:[o.jsx("h4",{children:" Streak"}),o.jsxs("p",{children:["Actuel : ",o.jsxs("strong",{children:[Q.streak.actuel," jour",Q.streak.actuel!==1?"s":""]})]}),o.jsxs("p",{children:["Meilleur : ",Q.streak.meilleur," jours"]})]}),o.jsxs("div",{className:"groupe-eleve-detail-card groupe-eleve-detail-card-wide",children:[o.jsx("h4",{children:" Lacunes dtectes"}),Q.lacunes.length===0?o.jsx("p",{className:"text-muted",children:"Aucune lacune dtecte "}):o.jsx("ul",{className:"groupe-lacunes-liste",children:Q.lacunes.map((F,re)=>o.jsxs("li",{className:`groupe-lacune-item groupe-lacune-${F.niveauUrgence}`,children:[o.jsxs("span",{className:"groupe-lacune-nom",children:[F.disciplineNom,F.chapitre&&`  ${F.chapitre}`]}),o.jsxs("span",{className:"groupe-lacune-moyenne",children:[F.moyenne,"/20"]}),o.jsx("span",{className:`groupe-lacune-badge groupe-lacune-badge-${F.niveauUrgence}`,children:F.niveauUrgence})]},re))})]})]})]}):null})()]})]}),N==="quiz"&&o.jsxs("div",{className:"groupe-quiz",children:[o.jsxs("div",{className:"groupe-quiz-selector",children:[o.jsx("label",{htmlFor:"select-quiz",children:"Slectionner un quiz  analyser :"}),o.jsxs("select",{id:"select-quiz",value:$||"",onChange:Q=>{Q.target.value&&U(Q.target.value)},className:"prof-select",children:[o.jsx("option",{value:"",children:" Choisir un quiz "}),f.map(Q=>o.jsx("option",{value:Q.id,children:Q.titre},Q.id))]})]}),!$&&o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Analyse par quiz"}),o.jsx("p",{children:"Slectionnez un quiz pour voir les statistiques dtailles et les questions les plus rates."})]}),P&&o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Analyse en cours..."})]}),p&&!P&&o.jsxs("div",{className:"groupe-quiz-resultats",children:[o.jsxs("div",{className:"groupe-quiz-stats-header",children:[o.jsx("h3",{children:p.quizTitre}),o.jsxs("div",{className:"groupe-quiz-stats-grid",children:[o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsx("span",{className:"groupe-stat-mini-value",children:p.totalPassages}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Passages"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:`groupe-stat-mini-value ${ce(p.moyenneScore)}`,children:[p.moyenneScore,"/20"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Moyenne"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:"groupe-stat-mini-value",children:[p.tauxReussite,"%"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Russite"})]}),o.jsxs("div",{className:"groupe-stat-mini",children:[o.jsxs("span",{className:"groupe-stat-mini-value",children:[Math.floor(p.tempsEcouleMoyen/60),"min"]}),o.jsx("span",{className:"groupe-stat-mini-label",children:"Temps moyen"})]})]})]}),o.jsxs("div",{className:"groupe-quiz-questions",children:[o.jsx("h4",{children:" Questions les plus rates"}),p.questionsRatees.filter(Q=>Q.tauxEchec>30).map((Q,F)=>o.jsxs("div",{className:"groupe-quiz-question-card",children:[o.jsxs("div",{className:"groupe-quiz-question-header",children:[o.jsxs("span",{className:"groupe-quiz-question-num",children:["Q",Q.questionIndex+1]}),o.jsxs("span",{className:"groupe-quiz-question-echec",children:[Q.tauxEchec,"% d'chec"]})]}),o.jsx("p",{className:"groupe-quiz-question-texte",children:Q.questionTexte}),o.jsx("div",{className:"groupe-quiz-question-reponse",children:o.jsxs("span",{className:"groupe-quiz-bonne-reponse",children:[" Bonne rponse : ",Q.reponseCorrecte]})}),Q.reponsesFrequentes.length>0&&o.jsxs("div",{className:"groupe-quiz-mauvaises-reponses",children:[o.jsx("span",{children:"Erreurs frquentes :"}),Q.reponsesFrequentes.slice(0,2).map((re,ye)=>o.jsxs("span",{className:"groupe-quiz-mauvaise-reponse",children:[" ",re.reponse," (",re.nombre," lve",re.nombre>1?"s":"",")"]},ye))]})]},F)),p.questionsRatees.filter(Q=>Q.tauxEchec>30).length===0&&o.jsx("p",{className:"text-muted",children:"Toutes les questions ont un taux de russite suprieur  70% "})]})]})]}),N==="alertes"&&o.jsx("div",{className:"groupe-alertes",children:c.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Aucune alerte"}),o.jsx("p",{children:"Tous vos lves se portent bien ! Les alertes apparatront ici quand un lve aura besoin d'attention."})]}):o.jsx("div",{className:"groupe-alertes-liste",children:c.map(Q=>o.jsxs("div",{className:`groupe-alerte-card groupe-alerte-${Q.niveauUrgence}`,children:[o.jsxs("div",{className:"groupe-alerte-header",children:[o.jsx("span",{className:"groupe-alerte-emoji",children:we(Q.type)}),o.jsx("span",{className:"groupe-alerte-eleve",children:Q.eleveNom}),o.jsx("span",{className:`groupe-alerte-badge groupe-alerte-badge-${Q.niveauUrgence}`,children:Q.niveauUrgence})]}),o.jsx("p",{className:"groupe-alerte-message",children:Q.message}),o.jsx("button",{className:"prof-btn prof-btn-secondary prof-btn-sm",onClick:()=>{A("eleves"),V(Q.eleveId)},children:" Voir dtail"})]},Q.id))})})]})},Xge=()=>{const{currentUser:t}=Vn(),[e,n]=w.useState("overview"),[r,i]=w.useState(null),[a,c]=w.useState(0),[u,f]=w.useState(0),[h,p]=w.useState(0),[g,y]=w.useState(0),[x,E]=w.useState([]),[j,N]=w.useState(!0),A=w.useCallback(async()=>{if(t?.uid)try{N(!0);const V=(await kU(t.uid)).filter(L=>L.statut==="actif");c(V.length);let $=0,D=0,P=0,R=0;const q=[];for(const L of V)try{const M=await hS(L.id);$+=M.nombreEleves,M.nombreEleves>0&&(D+=M.moyenneClasse,P++),R+=M.elevesEnDifficulte,q.push({...L,stats:M})}catch{q.push({...L})}f($),p(P>0?Math.round(D/P*10)/10:0),y(R),E(q)}catch(C){console.error("Erreur chargement rsum prof:",C)}finally{N(!1)}},[t?.uid]);w.useEffect(()=>{A()},[A]);const k=C=>{i(C),n("detail")},O=()=>{i(null),n("groupes"),A()};return j?o.jsxs("div",{className:"prof-loading",children:[o.jsx("div",{className:"spinner"}),o.jsx("p",{children:"Chargement de votre espace professeur..."})]}):o.jsxs("div",{className:"prof-dashboard",children:[o.jsx("header",{className:"prof-dashboard-header",children:o.jsxs("div",{children:[o.jsx("h1",{className:"prof-dashboard-titre",children:"Tableau de bord Professeur"}),o.jsxs("p",{className:"prof-dashboard-subtitle",children:["Bienvenue, ",t?.displayName||"Professeur"," "]})]})}),e!=="detail"&&o.jsxs("nav",{className:"prof-nav",children:[o.jsx("button",{className:`prof-nav-btn ${e==="overview"?"active":""}`,onClick:()=>n("overview"),children:" Vue d'ensemble"}),o.jsx("button",{className:`prof-nav-btn ${e==="groupes"?"active":""}`,onClick:()=>n("groupes"),children:" Mes groupes-classes"})]}),e==="overview"&&o.jsxs("div",{className:"prof-overview",children:[o.jsxs("div",{className:"prof-overview-cards",children:[o.jsxs("div",{className:"prof-overview-card prof-overview-card-clickable",onClick:()=>n("groupes"),children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:"prof-overview-card-value",children:a}),o.jsxs("span",{className:"prof-overview-card-label",children:["Groupe",a!==1?"s":""," actif",a!==1?"s":""]})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:"prof-overview-card-value",children:u}),o.jsxs("span",{className:"prof-overview-card-label",children:["lve",u!==1?"s":""," inscrit",u!==1?"s":""]})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsxs("span",{className:"prof-overview-card-value",children:[h,"/20"]}),o.jsx("span",{className:"prof-overview-card-label",children:"Moyenne gnrale"})]})]}),o.jsxs("div",{className:"prof-overview-card",children:[o.jsx("div",{className:"prof-overview-card-icon",children:""}),o.jsxs("div",{className:"prof-overview-card-content",children:[o.jsx("span",{className:`prof-overview-card-value ${g>0?"prof-note-critique":""}`,children:g}),o.jsxs("span",{className:"prof-overview-card-label",children:["lve",g!==1?"s":""," en difficult"]})]})]})]}),x.length===0?o.jsxs("div",{className:"prof-empty-state",children:[o.jsx("div",{className:"prof-empty-icon",children:""}),o.jsx("h3",{children:"Bienvenue sur votre espace Professeur !"}),o.jsx("p",{children:"Crez votre premier groupe-classe pour commencer  suivre vos lves."}),o.jsx("button",{className:"prof-btn prof-btn-primary",onClick:()=>n("groupes"),children:" Crer un groupe-classe"})]}):o.jsxs("div",{className:"prof-overview-groupes",children:[o.jsx("h2",{children:"Mes groupes"}),o.jsx("div",{className:"prof-overview-groupes-grid",children:x.map(C=>o.jsxs("div",{className:"prof-overview-groupe-card",onClick:()=>k(C),children:[o.jsxs("div",{className:"prof-overview-groupe-header",children:[o.jsx("h3",{children:C.nom}),o.jsx("span",{className:"prof-overview-groupe-matiere",children:C.matiereNom})]}),C.stats&&o.jsxs("div",{className:"prof-overview-groupe-stats",children:[o.jsxs("div",{children:[o.jsx("span",{className:"prof-overview-groupe-stat-value",children:C.stats.nombreEleves}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"lves"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[C.stats.moyenneClasse,"/20"]}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Moyenne"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"prof-overview-groupe-stat-value",children:[C.stats.tauxReussite,"%"]}),o.jsx("span",{className:"prof-overview-groupe-stat-label",children:"Russite"})]})]}),o.jsx("span",{className:"prof-overview-groupe-arrow",children:""})]},C.id))})]})]}),e==="groupes"&&o.jsx(Wge,{onSelectGroupe:k}),e==="detail"&&r&&o.jsx(Yge,{groupe:r,onRetour:O})]})},Jge=()=>{const{currentUser:t}=Vn(),e=t?.uid||"",n=t?.displayName||"Parent",[r,i]=w.useState([]),[a,c]=w.useState(null),[u,f]=w.useState(null),[h,p]=w.useState(!0),[g,y]=w.useState(!1),[x,E]=w.useState(null),[j,N]=w.useState(!1),[A,k]=w.useState(""),[O,C]=w.useState(!1),[V,$]=w.useState(null),[D,P]=w.useState(null),[R,q]=w.useState("apercu");w.useEffect(()=>{L()},[e]),w.useEffect(()=>{a&&M(a)},[a]);const L=async()=>{try{p(!0),E(null);const Z=await gge(e);i(Z),Z.length===1&&c(Z[0].enfantId)}catch(Z){E("Erreur lors du chargement des enfants."),console.error(Z)}finally{p(!1)}},M=async Z=>{try{y(!0),E(null);const H=await yge(e,Z);f(H)}catch(H){E(H.message||"Erreur lors du chargement du suivi."),f(null)}finally{y(!1)}},U=async Z=>{if(Z.preventDefault(),$(null),P(null),!A.trim()){$("Veuillez saisir le code d'invitation.");return}try{C(!0);const H=await pge(e,A);P(`${H.enfantNom} a t ajout avec succs !`),k(""),N(!1),await L(),c(H.enfantId)}catch(H){$(H.message||"Erreur lors de la liaison.")}finally{C(!1)}},ge=async Z=>{if(window.confirm(`tes-vous sr de vouloir retirer ${Z.enfantNom} de votre suivi ? Cette action est irrversible.`))try{await vge(Z.id,e),a===Z.enfantId&&(c(null),f(null)),await L()}catch(ce){E(ce.message||"Erreur lors de la suppression.")}};return h?o.jsxs("div",{className:"parent-loading",children:[o.jsx("div",{className:"parent-spinner"}),o.jsx("p",{children:"Chargement de votre espace parent..."})]}):o.jsxs("div",{className:"parent-dashboard",children:[o.jsxs("header",{className:"parent-header",children:[o.jsxs("div",{className:"parent-header-info",children:[o.jsx("h1",{className:"parent-titre",children:" Espace Parent"}),o.jsxs("p",{className:"parent-bienvenue",children:["Bienvenue, ",o.jsx("strong",{children:n}),"  Suivez la progression de vos enfants"]})]}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>{N(!j),$(null),P(null)},children:" Ajouter un enfant"})]}),x&&o.jsxs("div",{className:"parent-alerte parent-alerte-erreur",children:[o.jsxs("span",{children:[" ",x]}),o.jsx("button",{onClick:()=>E(null),children:""})]}),D&&o.jsxs("div",{className:"parent-alerte parent-alerte-succes",children:[o.jsxs("span",{children:[" ",D]}),o.jsx("button",{onClick:()=>P(null),children:""})]}),j&&o.jsxs("div",{className:"parent-form-liaison",children:[o.jsx("h3",{children:" Lier un enfant  votre compte"}),o.jsx("p",{className:"parent-form-aide",children:"Demandez le code d'invitation  votre enfant. Il peut le trouver dans son profil sur PedaClic (format: PEDA-XXXX-XXXX)."}),o.jsxs("form",{onSubmit:U,className:"parent-form",children:[o.jsxs("div",{className:"parent-form-group",children:[o.jsx("label",{htmlFor:"code-invitation",children:"Code d'invitation"}),o.jsx("input",{id:"code-invitation",type:"text",placeholder:"PEDA-XXXX-XXXX",value:A,onChange:Z=>k(Z.target.value.toUpperCase()),maxLength:14,disabled:O,className:"parent-input"})]}),V&&o.jsxs("p",{className:"parent-form-erreur",children:[" ",V]}),o.jsxs("div",{className:"parent-form-actions",children:[o.jsx("button",{type:"submit",className:"parent-btn parent-btn-primary",disabled:O,children:O?"Vrification...":" Valider"}),o.jsx("button",{type:"button",className:"parent-btn parent-btn-secondary",onClick:()=>N(!1),children:"Annuler"})]})]})]}),r.length===0?o.jsxs("div",{className:"parent-empty-state",children:[o.jsx("div",{className:"parent-empty-icon",children:""}),o.jsx("h2",{children:"Aucun enfant li"}),o.jsx("p",{children:"Cliquez sur  Ajouter un enfant  et saisissez le code d'invitation de votre enfant pour commencer  suivre sa progression."}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>N(!0),children:" Ajouter mon premier enfant"})]}):o.jsxs("div",{className:"parent-content",children:[o.jsxs("aside",{className:"parent-sidebar",children:[o.jsx("h3",{className:"parent-sidebar-titre",children:"Mes enfants"}),o.jsx("ul",{className:"parent-enfants-liste",children:r.map(Z=>o.jsxs("li",{className:`parent-enfant-card ${a===Z.enfantId?"parent-enfant-actif":""}`,onClick:()=>c(Z.enfantId),children:[o.jsx("div",{className:"parent-enfant-avatar",children:Z.enfantNom.charAt(0).toUpperCase()}),o.jsxs("div",{className:"parent-enfant-info",children:[o.jsx("span",{className:"parent-enfant-nom",children:Z.enfantNom}),Z.enfantClasse&&o.jsx("span",{className:"parent-enfant-classe",children:Z.enfantClasse})]}),o.jsx("button",{className:"parent-enfant-supprimer",onClick:H=>{H.stopPropagation(),ge(Z)},title:"Retirer cet enfant",children:""})]},Z.id))})]}),o.jsx("main",{className:"parent-main",children:a?g?o.jsxs("div",{className:"parent-loading",children:[o.jsx("div",{className:"parent-spinner"}),o.jsx("p",{children:"Chargement du suivi..."})]}):u?o.jsxs("div",{className:"parent-dashboard-detail",children:[o.jsxs("div",{className:"parent-enfant-header",children:[o.jsxs("div",{className:"parent-enfant-header-info",children:[o.jsx("h2",{children:u.enfant.nom}),u.enfant.classe&&o.jsx("span",{className:"parent-badge",children:u.enfant.classe}),u.enfant.derniereConnexion&&o.jsxs("span",{className:"parent-derniere-connexion",children:["Dernire connexion : ",D1(u.enfant.derniereConnexion)]})]}),o.jsx("p",{className:"parent-message-motivation",children:Ege(u.scoreGlobal)})]}),o.jsxs("div",{className:"parent-indicateurs",children:[o.jsxs("div",{className:"parent-card parent-card-score",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Score Global"}),o.jsxs("span",{className:`parent-card-value parent-score-${u.scoreGlobal>=60?"bon":u.scoreGlobal>=40?"moyen":"bas"}`,children:[u.scoreGlobal,"/100"]})]})]}),o.jsxs("div",{className:"parent-card parent-card-streak",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Streak"}),o.jsxs("span",{className:"parent-card-value",children:[u.streak.actuel," jour",u.streak.actuel>1?"s":""]})]})]}),o.jsxs("div",{className:"parent-card parent-card-lacunes",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Lacunes"}),o.jsxs("span",{className:"parent-card-value",children:[u.lacunes.length," matire",u.lacunes.length>1?"s":""]})]})]}),o.jsxs("div",{className:"parent-card parent-card-objectifs",children:[o.jsx("div",{className:"parent-card-icon",children:""}),o.jsxs("div",{className:"parent-card-content",children:[o.jsx("span",{className:"parent-card-label",children:"Objectifs"}),o.jsxs("span",{className:"parent-card-value",children:[u.objectifs.filter(Z=>Z.statut==="atteint").length,"/",u.objectifs.length]})]})]})]}),o.jsxs("div",{className:"parent-section parent-section-semaine",children:[o.jsx("h3",{children:" Activit de la semaine"}),o.jsx("div",{className:"parent-semaine-jours",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((Z,H)=>o.jsxs("div",{className:`parent-jour ${u.streak.semaineCourante[H]?"parent-jour-actif":"parent-jour-inactif"}`,children:[o.jsx("span",{className:"parent-jour-label",children:Z}),o.jsx("span",{className:"parent-jour-icon",children:u.streak.semaineCourante[H]?"":""})]},Z))})]}),o.jsxs("div",{className:"parent-onglets",children:[o.jsx("button",{className:`parent-onglet ${R==="apercu"?"parent-onglet-actif":""}`,onClick:()=>q("apercu"),children:" Aperu"}),o.jsxs("button",{className:`parent-onglet ${R==="lacunes"?"parent-onglet-actif":""}`,onClick:()=>q("lacunes"),children:[" Lacunes (",u.lacunes.length,")"]}),o.jsxs("button",{className:`parent-onglet ${R==="alertes"?"parent-onglet-actif":""}`,onClick:()=>q("alertes"),children:[" Alertes (",u.alertes.length,")"]}),o.jsx("button",{className:`parent-onglet ${R==="resume"?"parent-onglet-actif":""}`,onClick:()=>q("resume"),children:" Rsum"})]}),o.jsxs("div",{className:"parent-onglet-contenu",children:[R==="apercu"&&o.jsxs("div",{className:"parent-tab-apercu",children:[o.jsxs("div",{className:"parent-section",children:[o.jsx("h3",{children:" Derniers quiz passs"}),u.derniersQuiz.length===0?o.jsx("p",{className:"parent-vide",children:"Aucun quiz pass rcemment."}):o.jsx("div",{className:"parent-quiz-liste",children:u.derniersQuiz.map((Z,H)=>o.jsxs("div",{className:`parent-quiz-item ${Z.reussi?"parent-quiz-reussi":"parent-quiz-echoue"}`,children:[o.jsxs("div",{className:"parent-quiz-info",children:[o.jsx("span",{className:"parent-quiz-discipline",children:Z.disciplineNom}),o.jsx("span",{className:"parent-quiz-titre",children:Z.quizTitre})]}),o.jsxs("div",{className:"parent-quiz-score",children:[o.jsxs("span",{className:`parent-quiz-note ${Z.reussi?"note-ok":"note-ko"}`,children:[Z.noteSur20,"/20"]}),o.jsx("span",{className:"parent-quiz-statut",children:Z.reussi?" Russi":" chou"})]}),o.jsx("span",{className:"parent-quiz-date",children:D1(Z.datePassage)})]},H))})]}),o.jsxs("div",{className:"parent-section",children:[o.jsx("h3",{children:" Objectifs de la semaine"}),u.objectifs.length===0?o.jsx("p",{className:"parent-vide",children:"Aucun objectif cette semaine."}):o.jsx("div",{className:"parent-objectifs-liste",children:u.objectifs.map((Z,H)=>o.jsxs("div",{className:"parent-objectif-item",children:[o.jsxs("div",{className:"parent-objectif-header",children:[o.jsx("span",{className:"parent-objectif-titre",children:Z.titre}),o.jsx("span",{className:`parent-objectif-statut parent-statut-${Z.statut}`,children:Z.statut==="atteint"?" Atteint":Z.statut==="en_cours"?" En cours":Z.statut==="echoue"?" chou":" Non commenc"})]}),o.jsx("div",{className:"parent-progress-bar",children:o.jsx("div",{className:`parent-progress-fill parent-progress-${Z.statut}`,style:{width:`${Math.min(Z.progression/Z.cible*100,100)}%`}})}),o.jsxs("span",{className:"parent-objectif-detail",children:[Z.progression,"/",Z.cible]})]},H))})]})]}),R==="lacunes"&&o.jsx("div",{className:"parent-tab-lacunes",children:u.lacunes.length===0?o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Aucune lacune dtecte ! Votre enfant est sur la bonne voie."})]}):o.jsx("div",{className:"parent-lacunes-liste",children:u.lacunes.map((Z,H)=>o.jsxs("div",{className:"parent-lacune-item",style:{borderLeftColor:oy(Z.niveauUrgence)},children:[o.jsxs("div",{className:"parent-lacune-header",children:[o.jsx("span",{className:"parent-lacune-discipline",children:Z.disciplineNom}),o.jsx("span",{className:"parent-lacune-badge",style:{backgroundColor:oy(Z.niveauUrgence),color:"#fff"},children:AU(Z.niveauUrgence)})]}),o.jsxs("div",{className:"parent-lacune-details",children:[o.jsxs("span",{className:"parent-lacune-moyenne",children:["Moyenne : ",o.jsxs("strong",{children:[Z.moyenne,"/20"]})]}),o.jsxs("span",{className:"parent-lacune-tendance",children:["Tendance : ",TU(Z.tendance)," ",Z.tendance==="hausse"?"En hausse":Z.tendance==="baisse"?"En baisse":"Stable"]})]}),o.jsx("p",{className:"parent-lacune-conseil",children:Z.niveauUrgence==="critique"?" Intervention recommande : discutez avec votre enfant et envisagez un soutien scolaire.":Z.niveauUrgence==="important"?" Encouragez votre enfant  rviser cette matire rgulirement.":" Quelques rvisions suffiront pour consolider les acquis."})]},H))})}),R==="alertes"&&o.jsx("div",{className:"parent-tab-alertes",children:u.alertes.length===0?o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Aucune alerte pour le moment. Tout va bien !"})]}):o.jsx("div",{className:"parent-alertes-liste",children:u.alertes.map((Z,H)=>o.jsxs("div",{className:`parent-alerte-item parent-alerte-${Z.niveau}`,children:[o.jsxs("div",{className:"parent-alerte-header",children:[o.jsx("span",{className:"parent-alerte-titre",children:Z.titre}),o.jsx("span",{className:"parent-alerte-badge",style:{backgroundColor:wge(Z.niveau),color:"#fff"},children:jge(Z.type)})]}),o.jsx("p",{className:"parent-alerte-message",children:Z.message}),o.jsx("span",{className:"parent-alerte-date",children:D1(Z.dateCreation)})]},H))})}),R==="resume"&&u.resume&&o.jsxs("div",{className:"parent-tab-resume",children:[o.jsxs("div",{className:"parent-resume-header",children:[o.jsxs("h3",{children:[" Rsum : ",u.resume.semaine]}),o.jsxs("span",{className:"parent-resume-evolution",children:["Score : ",u.resume.scoreGlobal,"/100"," ",KD(u.resume.evolutionScore)]})]}),o.jsxs("div",{className:"parent-resume-stats",children:[o.jsxs("div",{className:"parent-resume-stat",children:[o.jsx("span",{className:"parent-resume-stat-value",children:u.resume.nombreQuizSemaine}),o.jsx("span",{className:"parent-resume-stat-label",children:"Quiz passs"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.joursActifsSemaine,"/7"]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Jours actifs"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.tempsEstimeMinutes," min"]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Temps d'tude"})]}),o.jsxs("div",{className:"parent-resume-stat",children:[o.jsxs("span",{className:"parent-resume-stat-value",children:[u.resume.objectifsAtteints,"/",u.resume.objectifsTotal]}),o.jsx("span",{className:"parent-resume-stat-label",children:"Objectifs atteints"})]})]}),u.resume.evolutionDisciplines.length>0&&o.jsxs("div",{className:"parent-section",children:[o.jsx("h4",{children:" volution par matire"}),o.jsx("div",{className:"parent-evolution-liste",children:u.resume.evolutionDisciplines.map((Z,H)=>o.jsxs("div",{className:"parent-evolution-item",children:[o.jsx("span",{className:"parent-evolution-discipline",children:Z.disciplineNom}),o.jsxs("div",{className:"parent-evolution-scores",children:[o.jsxs("span",{className:"parent-evolution-prec",children:[Z.moyenneSemainePrecedente,"/20"]}),o.jsx("span",{className:"parent-evolution-fleche",children:KD(Z.evolution)}),o.jsxs("span",{className:"parent-evolution-courante",children:[Z.moyenneSemaineCourante,"/20"]}),o.jsxs("span",{className:`parent-evolution-ecart ${Z.ecart>0?"ecart-positif":Z.ecart<0?"ecart-negatif":""}`,children:["(",Z.ecart>0?"+":"",Z.ecart,")"]})]})]},H))})]}),u.resume.disciplinesEnDifficulte.length>0&&o.jsxs("div",{className:"parent-section parent-section-warning",children:[o.jsx("h4",{children:" Matires ncessitant une attention"}),o.jsx("ul",{className:"parent-disciplines-difficulte",children:u.resume.disciplinesEnDifficulte.map((Z,H)=>o.jsx("li",{children:Z},H))})]})]}),R==="resume"&&!u.resume&&o.jsxs("div",{className:"parent-vide-section",children:[o.jsx("span",{className:"parent-vide-icon",children:""}),o.jsx("p",{children:"Le rsum sera disponible une fois que votre enfant aura pass des quiz."})]})]})]}):o.jsxs("div",{className:"parent-erreur-dashboard",children:[o.jsx("p",{children:" Impossible de charger le suivi. Veuillez ressayer."}),o.jsx("button",{className:"parent-btn parent-btn-primary",onClick:()=>a&&M(a),children:" Ressayer"})]}):o.jsx("div",{className:"parent-select-enfant",children:o.jsx("p",{children:" Slectionnez un enfant dans la liste pour voir son suivi."})})})]})]})},Zge=["bold","italic","underline","strikethrough","heading","color","highlight","alignLeft","alignCenter","alignRight","bulletList","numberedList","subscript","superscript","link","clean"],eve=["#000000","#dc2626","#2563eb","#059669","#d97706","#7c3aed","#ec4899","#64748b","#ffffff"],tve=["#fef08a","#bbf7d0","#bfdbfe","#fecaca","#e9d5ff","#fed7aa","transparent"],Ka=({value:t,onChange:e,placeholder:n="Saisissez votre texte...",minHeight:r=100,maxHeight:i=400,toolbar:a=Zge,disabled:c=!1,className:u=""})=>{const f=w.useRef(null),h=w.useRef(!1),[p,g]=w.useState(!1),[y,x]=w.useState(!1);w.useEffect(()=>{f.current&&!h.current&&f.current.innerHTML!==t&&(f.current.innerHTML=t||""),h.current=!1},[t]);const E=w.useCallback(()=>{f.current&&(h.current=!0,e(f.current.innerHTML))},[e]),j=w.useCallback((O,C)=>{f.current?.focus(),document.execCommand(O,!1,C),E()},[E]),N=w.useCallback(()=>{const O=prompt("URL du lien :","https://");O&&j("createLink",O)},[j]),A=w.useCallback(()=>{j("removeFormat"),j("formatBlock","p")},[j]);w.useEffect(()=>{const O=()=>{g(!1),x(!1)};return document.addEventListener("click",O),()=>document.removeEventListener("click",O)},[]);const k=O=>{switch(O){case"bold":return o.jsx("button",{type:"button",className:"rte-btn",title:"Gras (Ctrl+B)",onMouseDown:C=>{C.preventDefault(),j("bold")},children:o.jsx("strong",{children:"G"})},"bold");case"italic":return o.jsx("button",{type:"button",className:"rte-btn",title:"Italique (Ctrl+I)",onMouseDown:C=>{C.preventDefault(),j("italic")},children:o.jsx("em",{children:"I"})},"italic");case"underline":return o.jsx("button",{type:"button",className:"rte-btn",title:"Soulign (Ctrl+U)",onMouseDown:C=>{C.preventDefault(),j("underline")},children:o.jsx("u",{children:"S"})},"underline");case"strikethrough":return o.jsx("button",{type:"button",className:"rte-btn",title:"Barr",onMouseDown:C=>{C.preventDefault(),j("strikeThrough")},children:o.jsx("s",{children:"B"})},"strike");case"heading":return o.jsx("button",{type:"button",className:"rte-btn",title:"Titre",onMouseDown:C=>{C.preventDefault(),j("formatBlock","h3")},children:"H"},"heading");case"color":return o.jsxs("span",{className:"rte-dropdown-wrapper",onClick:C=>C.stopPropagation(),children:[o.jsx("button",{type:"button",className:"rte-btn",title:"Couleur du texte",onClick:()=>{g(!p),x(!1)},children:o.jsx("span",{style:{borderBottom:"3px solid #dc2626"},children:"A"})}),p&&o.jsx("div",{className:"rte-color-picker",children:eve.map(C=>o.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:C,border:C==="#ffffff"?"1px solid #ccc":"none"},onMouseDown:V=>{V.preventDefault(),j("foreColor",C),g(!1)}},C))})]},"color");case"highlight":return o.jsxs("span",{className:"rte-dropdown-wrapper",onClick:C=>C.stopPropagation(),children:[o.jsx("button",{type:"button",className:"rte-btn",title:"Surligner",onClick:()=>{x(!y),g(!1)},children:o.jsx("span",{style:{backgroundColor:"#fef08a",padding:"0 3px"},children:"S"})}),y&&o.jsx("div",{className:"rte-color-picker",children:tve.map(C=>o.jsx("button",{type:"button",className:"rte-color-swatch",style:{backgroundColor:C==="transparent"?"#fff":C,border:"1px solid #ccc"},onMouseDown:V=>{V.preventDefault(),j("hiliteColor",C),x(!1)},children:C==="transparent"?"":""},C))})]},"highlight");case"alignLeft":return o.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  gauche",onMouseDown:C=>{C.preventDefault(),j("justifyLeft")},children:""},"alignL");case"alignCenter":return o.jsx("button",{type:"button",className:"rte-btn",title:"Centrer",onMouseDown:C=>{C.preventDefault(),j("justifyCenter")},children:""},"alignC");case"alignRight":return o.jsx("button",{type:"button",className:"rte-btn",title:"Aligner  droite",onMouseDown:C=>{C.preventDefault(),j("justifyRight")},children:""},"alignR");case"bulletList":return o.jsx("button",{type:"button",className:"rte-btn",title:"Liste  puces",onMouseDown:C=>{C.preventDefault(),j("insertUnorderedList")},children:""},"ul");case"numberedList":return o.jsx("button",{type:"button",className:"rte-btn",title:"Liste numrote",onMouseDown:C=>{C.preventDefault(),j("insertOrderedList")},children:"1"},"ol");case"subscript":return o.jsxs("button",{type:"button",className:"rte-btn",title:"Indice",onMouseDown:C=>{C.preventDefault(),j("subscript")},children:["X",o.jsx("sub",{children:""})]},"sub");case"superscript":return o.jsxs("button",{type:"button",className:"rte-btn",title:"Exposant",onMouseDown:C=>{C.preventDefault(),j("superscript")},children:["X",o.jsx("sup",{children:""})]},"sup");case"link":return o.jsx("button",{type:"button",className:"rte-btn",title:"Insrer un lien",onMouseDown:C=>{C.preventDefault(),N()},children:""},"link");case"clean":return o.jsx("button",{type:"button",className:"rte-btn rte-btn-clean",title:"Nettoyer le formatage",onMouseDown:C=>{C.preventDefault(),A()},children:""},"clean");default:return null}};return o.jsxs("div",{className:`rte-container ${c?"rte-disabled":""} ${u}`,children:[!c&&o.jsx("div",{className:"rte-toolbar",children:a.map(O=>k(O))}),o.jsx("div",{ref:f,className:"rte-editor",contentEditable:!c,onInput:E,onBlur:E,"data-placeholder":n,style:{minHeight:`${r}px`,maxHeight:`${i}px`},suppressContentEditableWarning:!0})]})},vd={qcm_unique:"QCM  Choix unique",qcm_multiple:"QCM  Choix multiple",drag_drop:"Glisser-Dposer",mise_en_relation:"Mise en relation",essai:"Essai / Rdaction"},ly={qcm_unique:"",qcm_multiple:"",drag_drop:"",mise_en_relation:"",essai:""},cy={qcm_unique:"#2563eb",qcm_multiple:"#7c3aed",drag_drop:"#059669",mise_en_relation:"#d97706",essai:"#dc2626"};function Pn(t="id"){return`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function nve(t,e){const n={id:Pn("q"),type:t,enonce:"",difficulte:"moyen",points:2,ordre:e};switch(t){case"qcm_unique":return{...n,typeData:{options:[{id:Pn("opt"),texte:"",isCorrect:!0},{id:Pn("opt"),texte:"",isCorrect:!1},{id:Pn("opt"),texte:"",isCorrect:!1},{id:Pn("opt"),texte:"",isCorrect:!1}]}};case"qcm_multiple":return{...n,typeData:{options:[{id:Pn("opt"),texte:"",isCorrect:!0},{id:Pn("opt"),texte:"",isCorrect:!0},{id:Pn("opt"),texte:"",isCorrect:!1},{id:Pn("opt"),texte:"",isCorrect:!1}],scoringPartiel:!0}};case"drag_drop":return{...n,typeData:{items:[{id:Pn("item"),texte:"",ordreCorrect:1},{id:Pn("item"),texte:"",ordreCorrect:2},{id:Pn("item"),texte:"",ordreCorrect:3}],consigneOrdre:"Remettez les lments dans le bon ordre"}};case"mise_en_relation":return{...n,typeData:{paires:[{id:Pn("pair"),gauche:"",droite:""},{id:Pn("pair"),gauche:"",droite:""},{id:Pn("pair"),gauche:"",droite:""}]}};case"essai":return{...n,points:5,typeData:{nombreMotsMin:50,nombreMotsMax:500,motsCles:[],correctionMode:"manuelle"}}}}const Tm="quizzes_v2",rve="quiz_results_v2";async function ive(t,e){try{const n=await Bi(rt(Ne,Tm),{...t,auteurId:e,createdAt:nn(),updatedAt:nn()});return console.log(" Quiz avanc cr :",n.id),n.id}catch(n){throw console.error(" Erreur cration quiz avanc :",n),new Error("Impossible de crer le quiz")}}async function sve(t,e){try{const n=Qe(Ne,Tm,t);await sn(n,{...e,updatedAt:nn()}),console.log(" Quiz avanc mis  jour :",t)}catch(n){throw console.error(" Erreur mise  jour quiz :",n),new Error("Impossible de mettre  jour le quiz")}}async function ave(t){try{await Ad(Qe(Ne,Tm,t)),console.log(" Quiz avanc supprim :",t)}catch(e){throw console.error(" Erreur suppression quiz :",e),new Error("Impossible de supprimer le quiz")}}async function MU(t){try{const e=await Pr(Qe(Ne,Tm,t));if(!e.exists())return null;const n=e.data();return{id:e.id,...n,createdAt:n.createdAt?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()||void 0}}catch(e){throw console.error(" Erreur rcupration quiz :",e),new Error("Impossible de rcuprer le quiz")}}async function ove(){try{const t=Et(rt(Ne,Tm),mr("createdAt","desc"));return(await Nt(t)).docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||void 0}})}catch(t){throw console.error(" Erreur rcupration tous les quiz :",t),new Error("Impossible de rcuprer les quiz")}}function lve(t,e){let n=0,r=0;const i=[];for(const a of t.questions){r+=a.points;const c=e.find(g=>g.questionId===a.id);if(!c){i.push({questionId:a.id,type:a.type,pointsObtenus:0,pointsMax:a.points,isCorrect:!1});continue}let u=0,f=!1,h=!1,p=!1;switch(a.type){case"qcm_unique":{const y=a.typeData.options.find(x=>x.isCorrect);y&&c.selectedOptionId===y.id&&(u=a.points,f=!0);break}case"qcm_multiple":{const g=a.typeData,y=g.options.filter(A=>A.isCorrect).map(A=>A.id),x=g.options.filter(A=>!A.isCorrect).map(A=>A.id),E=c.selectedOptionIds||[],j=E.some(A=>x.includes(A)),N=E.filter(A=>y.includes(A)).length;!j&&N===y.length?(u=a.points,f=!0):g.scoringPartiel&&N>0&&!j&&(u=Math.round(a.points*N/y.length*100)/100,h=!0);break}case"drag_drop":{const g=a.typeData,y=c.ordrePropose||[],x=g.items.sort((j,N)=>j.ordreCorrect-N.ordreCorrect).map(j=>j.id);let E=0;for(let j=0;j<x.length;j++)y[j]===x[j]&&E++;E===x.length?(u=a.points,f=!0):E>0&&(u=Math.round(a.points*E/x.length*100)/100,h=!0);break}case"mise_en_relation":{const g=a.typeData,y=c.relationsProposees||{};let x=0;for(const E of g.paires)y[E.id]===E.id&&x++;x===g.paires.length?(u=a.points,f=!0):x>0&&(u=Math.round(a.points*x/g.paires.length*100)/100,h=!0);break}case"essai":{const g=a.typeData,y=c.texteReponse||"";if(g.correctionMode==="mots_cles"&&g.motsCles.length>0){const x=y.toLowerCase().replace(/<[^>]*>/g,"");let E=0,j=0;for(const N of g.motsCles)E+=N.poids,x.includes(N.mot.toLowerCase())&&(j+=N.poids);E>0&&(u=Math.round(a.points*j/E*100)/100,f=j===E,h=j>0&&j<E)}else p=!0;break}}n+=u,i.push({questionId:a.id,type:a.type,pointsObtenus:u,pointsMax:a.points,isCorrect:f,isPartiel:h,correctionManuelleRequise:p})}return{score:n,scoreMax:r,details:i}}async function cve(t,e,n,r){try{const{score:i,scoreMax:a,details:c}=lve(t,n),u=a>0?Math.round(i/a*20*100)/100:0,f=c.some(g=>g.correctionManuelleRequise),h={quizId:t.id,userId:e,reponses:n,score:i,scoreMax:a,note20:u,tempsEcoule:r,datePassage:new Date,reussi:u>=t.noteMinimale,correctionManuelle:f,detailsParQuestion:c},p=await Bi(rt(Ne,rve),{...h,datePassage:nn()});return console.log(" Rsultat quiz enregistr :",p.id),{id:p.id,...h}}catch(i){throw console.error(" Erreur soumission quiz :",i),new Error("Impossible d'enregistrer le rsultat")}}const uve=({existingQuiz:t,disciplines:e,auteurId:n,onSave:r,onCancel:i})=>{const[a,c]=w.useState(t?.titre||""),[u,f]=w.useState(t?.description||""),[h,p]=w.useState(t?.disciplineId||""),[g,y]=w.useState(t?.duree||30),[x,E]=w.useState(t?.isPremium??!0),[j,N]=w.useState(t?.noteMinimale||10),[A,k]=w.useState(t?.melangerQuestions??!1),[O,C]=w.useState(t?.melangerOptions??!1),[V,$]=w.useState(t?.afficherCorrection??!0),[D,P]=w.useState(t?.tentativesMax||0),[R,q]=w.useState(t?.questions||[]),[L,M]=w.useState(null),[U,ge]=w.useState(!1),[Z,H]=w.useState(null),[ce,Y]=w.useState(!1),we=w.useCallback(ne=>{const pe=nve(ne,R.length+1);q(De=>[...De,pe]),M(R.length),Y(!1)},[R.length]),Q=w.useCallback(ne=>{confirm("Supprimer cette question ?")&&(q(pe=>pe.filter((se,X)=>X!==ne).map((se,X)=>({...se,ordre:X+1}))),M(null))},[]),F=w.useCallback(ne=>{q(pe=>{const De=pe[ne],se={...JSON.parse(JSON.stringify(De)),id:Pn("q"),ordre:pe.length+1};return[...pe,se]})},[]),re=w.useCallback((ne,pe)=>{q(De=>{const se=[...De],X=pe==="up"?ne-1:ne+1;return X<0||X>=se.length?De:([se[ne],se[X]]=[se[X],se[ne]],se.map((K,fe)=>({...K,ordre:fe+1})))}),M(pe==="up"?L!==null?L-1:null:L!==null?L+1:null)},[L]),ye=w.useCallback((ne,pe)=>{q(De=>De.map((se,X)=>X===ne?{...se,...pe}:se))},[]),Ee=async()=>{if(!a.trim()){H("Le titre est obligatoire");return}if(!h){H("Slectionnez une discipline");return}if(R.length===0){H("Ajoutez au moins une question");return}for(let ne=0;ne<R.length;ne++)if(!R[ne].enonce.replace(/<[^>]*>/g,"").trim()){H(`La question ${ne+1} n'a pas d'nonc`),M(ne);return}H(null),ge(!0);try{const ne={disciplineId:h,titre:a.trim(),description:u.trim()||void 0,questions:R,duree:g,isPremium:x,noteMinimale:j,melangerQuestions:A,melangerOptions:O,afficherCorrection:V,tentativesMax:D};let pe;t?.id?(await sve(t.id,ne),pe=t.id):pe=await ive(ne,n),r?.(pe)}catch(ne){H(ne.message||"Erreur lors de la sauvegarde")}finally{ge(!1)}},J=R.reduce((ne,pe)=>ne+pe.points,0);return o.jsxs("div",{className:"quiz-editor",children:[o.jsxs("div",{className:"quiz-editor__header",children:[o.jsx("h2",{children:t?" Modifier le quiz":" Nouveau quiz avanc"}),o.jsxs("div",{className:"quiz-editor__header-actions",children:[o.jsxs("span",{className:"quiz-editor__score-badge",children:["Score total : ",J," pts"]}),o.jsxs("span",{className:"quiz-editor__count-badge",children:[R.length," question",R.length>1?"s":""]})]})]}),Z&&o.jsxs("div",{className:"quiz-editor__error",children:[" ",Z,o.jsx("button",{onClick:()=>H(null),children:""})]}),o.jsxs("div",{className:"quiz-editor__section",children:[o.jsx("h3",{className:"quiz-editor__section-title",children:" Paramtres du quiz"}),o.jsxs("div",{className:"quiz-editor__grid",children:[o.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[o.jsx("label",{children:"Titre du quiz *"}),o.jsx("input",{type:"text",value:a,onChange:ne=>c(ne.target.value),placeholder:"Ex: valuation Chapitre 3  Les fonctions",className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Discipline *"}),o.jsxs("select",{value:h,onChange:ne=>p(ne.target.value),className:"quiz-editor__select",children:[o.jsx("option",{value:"",children:" Slectionner "}),e.map(ne=>o.jsxs("option",{value:ne.id,children:[ne.nom," (",ne.classe,")"]},ne.id))]})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Dure (minutes)"}),o.jsx("input",{type:"number",value:g,onChange:ne=>y(Number(ne.target.value)),min:1,max:180,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Note minimale (/20)"}),o.jsx("input",{type:"number",value:j,onChange:ne=>N(Number(ne.target.value)),min:0,max:20,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field",children:[o.jsx("label",{children:"Tentatives max (0 = illimit)"}),o.jsx("input",{type:"number",value:D,onChange:ne=>P(Number(ne.target.value)),min:0,max:10,className:"quiz-editor__input"})]}),o.jsxs("div",{className:"quiz-editor__field quiz-editor__field--full",children:[o.jsx("label",{children:"Description (optionnel)"}),o.jsx(Ka,{value:u,onChange:f,placeholder:"Dcrivez le contenu et les objectifs de ce quiz...",minHeight:80,toolbar:["bold","italic","underline","color","bulletList"]})]})]}),o.jsxs("div",{className:"quiz-editor__options-row",children:[o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:x,onChange:ne=>E(ne.target.checked)}),o.jsx("span",{children:" Premium"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:A,onChange:ne=>k(ne.target.checked)}),o.jsx("span",{children:" Mlanger les questions"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:O,onChange:ne=>C(ne.target.checked)}),o.jsx("span",{children:" Mlanger les options QCM"})]}),o.jsxs("label",{className:"quiz-editor__checkbox",children:[o.jsx("input",{type:"checkbox",checked:V,onChange:ne=>$(ne.target.checked)}),o.jsx("span",{children:" Afficher la correction"})]})]})]}),o.jsxs("div",{className:"quiz-editor__section",children:[o.jsx("h3",{className:"quiz-editor__section-title",children:" Questions"}),o.jsx("div",{className:"quiz-editor__questions-list",children:R.map((ne,pe)=>o.jsx(dve,{question:ne,index:pe,isActive:L===pe,onToggle:()=>M(L===pe?null:pe),onUpdate:De=>ye(pe,De),onDelete:()=>Q(pe),onDuplicate:()=>F(pe),onMoveUp:()=>re(pe,"up"),onMoveDown:()=>re(pe,"down"),isFirst:pe===0,isLast:pe===R.length-1},ne.id))}),o.jsxs("div",{className:"quiz-editor__add-wrapper",children:[o.jsx("button",{type:"button",className:"quiz-editor__add-btn",onClick:()=>Y(!ce),children:"+ Ajouter une question"}),ce&&o.jsx("div",{className:"quiz-editor__add-menu",children:Object.keys(vd).map(ne=>o.jsxs("button",{type:"button",className:"quiz-editor__add-menu-item",onClick:()=>we(ne),children:[o.jsx("span",{className:"quiz-editor__type-badge",style:{backgroundColor:cy[ne]},children:ly[ne]}),o.jsx("span",{children:vd[ne]})]},ne))})]})]}),o.jsxs("div",{className:"quiz-editor__actions",children:[o.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--secondary",onClick:i,disabled:U,children:"Annuler"}),o.jsx("button",{type:"button",className:"quiz-editor__btn quiz-editor__btn--primary",onClick:Ee,disabled:U||R.length===0,children:U?" Sauvegarde...":t?" Mettre  jour":" Crer le quiz"})]})]})},dve=({question:t,index:e,isActive:n,onToggle:r,onUpdate:i,onDelete:a,onDuplicate:c,onMoveUp:u,onMoveDown:f,isFirst:h,isLast:p})=>{const g=cy[t.type],y=ly[t.type],x=vd[t.type],E=j=>{const N=j.replace(/<[^>]*>/g,"").trim();return N.length>80?N.substring(0,80)+"...":N||"(sans nonc)"};return o.jsxs("div",{className:`question-editor ${n?"question-editor--active":""}`,style:{borderLeftColor:g},children:[o.jsxs("div",{className:"question-editor__header",onClick:r,children:[o.jsxs("div",{className:"question-editor__header-left",children:[o.jsx("span",{className:"question-editor__number",children:e+1}),o.jsxs("span",{className:"question-editor__type-badge",style:{backgroundColor:g},children:[y," ",x]}),!n&&o.jsx("span",{className:"question-editor__preview",children:E(t.enonce)})]}),o.jsxs("div",{className:"question-editor__header-right",children:[o.jsxs("span",{className:"question-editor__points",children:[t.points," pts"]}),o.jsx("span",{className:"question-editor__toggle",children:n?"":""})]})]}),n&&o.jsxs("div",{className:"question-editor__body",children:[o.jsxs("div",{className:"question-editor__toolbar",children:[o.jsx("button",{type:"button",onClick:u,disabled:h,title:"Monter",children:""}),o.jsx("button",{type:"button",onClick:f,disabled:p,title:"Descendre",children:""}),o.jsx("button",{type:"button",onClick:c,title:"Dupliquer",children:""}),o.jsx("button",{type:"button",onClick:a,className:"btn-danger",title:"Supprimer",children:""})]}),o.jsxs("div",{className:"question-editor__field",children:[o.jsx("label",{children:"nonc de la question *"}),o.jsx(Ka,{value:t.enonce,onChange:j=>i({enonce:j}),placeholder:"Saisissez l'nonc de la question...",minHeight:100})]}),o.jsxs("div",{className:"question-editor__params",children:[o.jsxs("div",{className:"question-editor__param",children:[o.jsx("label",{children:"Difficult"}),o.jsxs("select",{value:t.difficulte,onChange:j=>i({difficulte:j.target.value}),children:[o.jsx("option",{value:"facile",children:" Facile"}),o.jsx("option",{value:"moyen",children:" Moyen"}),o.jsx("option",{value:"difficile",children:" Difficile"})]})]}),o.jsxs("div",{className:"question-editor__param",children:[o.jsx("label",{children:"Points"}),o.jsx("input",{type:"number",value:t.points,onChange:j=>i({points:Number(j.target.value)}),min:1,max:20})]})]}),o.jsxs("div",{className:"question-editor__type-specific",children:[t.type==="qcm_unique"&&o.jsx(fve,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="qcm_multiple"&&o.jsx(hve,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="drag_drop"&&o.jsx(mve,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="mise_en_relation"&&o.jsx(pve,{data:t.typeData,onChange:j=>i({typeData:j})}),t.type==="essai"&&o.jsx(gve,{data:t.typeData,onChange:j=>i({typeData:j})})]}),o.jsxs("div",{className:"question-editor__field",children:[o.jsx("label",{children:"Explication (affiche aprs correction, optionnel)"}),o.jsx(Ka,{value:t.explication||"",onChange:j=>i({explication:j}),placeholder:"Expliquez la bonne rponse...",minHeight:60,toolbar:["bold","italic","color","link"]})]})]})]})},fve=({data:t,onChange:e})=>{const n=(a,c)=>{const u=t.options.map((f,h)=>h===a?{...f,...c}:c.isCorrect===!0?{...f,isCorrect:!1}:f);e({options:u})},r=()=>{t.options.length>=6||e({options:[...t.options,{id:Pn("opt"),texte:"",isCorrect:!1}]})},i=a=>{t.options.length<=2||e({options:t.options.filter((c,u)=>u!==a)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Options (slectionnez la bonne rponse)"}),t.options.map((a,c)=>o.jsxs("div",{className:"type-editor__option-row",children:[o.jsx("input",{type:"radio",name:`qcm_unique_${a.id}`,checked:a.isCorrect,onChange:()=>n(c,{isCorrect:!0}),className:"type-editor__radio",title:"Bonne rponse"}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ka,{value:a.texte,onChange:u=>n(c,{texte:u}),placeholder:`Option ${c+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),a.isCorrect&&o.jsx("span",{className:"type-editor__correct-badge",children:""}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.options.length<=2,title:"Supprimer cette option",children:""})]},a.id)),t.options.length<6&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une option"})]})},hve=({data:t,onChange:e})=>{const n=(a,c)=>{const u=t.options.map((f,h)=>h===a?{...f,...c}:f);e({...t,options:u})},r=()=>{t.options.length>=8||e({...t,options:[...t.options,{id:Pn("opt"),texte:"",isCorrect:!1}]})},i=a=>{t.options.length<=2||e({...t,options:t.options.filter((c,u)=>u!==a)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Options (cochez toutes les bonnes rponses)"}),t.options.map((a,c)=>o.jsxs("div",{className:"type-editor__option-row",children:[o.jsx("input",{type:"checkbox",checked:a.isCorrect,onChange:u=>n(c,{isCorrect:u.target.checked}),className:"type-editor__checkbox",title:"Bonne rponse"}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ka,{value:a.texte,onChange:u=>n(c,{texte:u}),placeholder:`Option ${c+1}...`,minHeight:40,toolbar:["bold","italic","color","subscript","superscript"]})}),a.isCorrect&&o.jsx("span",{className:"type-editor__correct-badge",children:""}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.options.length<=2,children:""})]},a.id)),t.options.length<8&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une option"}),o.jsxs("label",{className:"type-editor__sub-option",children:[o.jsx("input",{type:"checkbox",checked:t.scoringPartiel,onChange:a=>e({...t,scoringPartiel:a.target.checked})}),o.jsx("span",{children:"Accorder des points partiels (proportionnel aux bonnes rponses trouves)"})]})]})},mve=({data:t,onChange:e})=>{const n=(a,c)=>{const u=t.items.map((f,h)=>h===a?{...f,...c}:f);e({...t,items:u})},r=()=>{t.items.length>=10||e({...t,items:[...t.items,{id:Pn("item"),texte:"",ordreCorrect:t.items.length+1}]})},i=a=>{if(t.items.length<=2)return;const c=t.items.filter((u,f)=>f!==a).map((u,f)=>({...u,ordreCorrect:f+1}));e({...t,items:c})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" lments  rordonner (dans l'ordre correct)"}),o.jsx("p",{className:"type-editor__hint",children:"Saisissez les lments dans l'ordre correct. Ils seront mlangs automatiquement pour l'lve."}),o.jsxs("div",{className:"type-editor__field-inline",children:[o.jsx("label",{children:"Consigne :"}),o.jsx("input",{type:"text",value:t.consigneOrdre,onChange:a=>e({...t,consigneOrdre:a.target.value}),placeholder:"Ex: Classez du plus ancien au plus rcent",className:"type-editor__input"})]}),t.items.map((a,c)=>o.jsxs("div",{className:"type-editor__drag-row",children:[o.jsx("span",{className:"type-editor__drag-number",children:c+1}),o.jsx("div",{className:"type-editor__option-text",children:o.jsx(Ka,{value:a.texte,onChange:u=>n(c,{texte:u}),placeholder:`lment ${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.items.length<=2,children:""})]},a.id)),t.items.length<10&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter un lment"})]})},pve=({data:t,onChange:e})=>{const n=(a,c)=>{const u=t.paires.map((f,h)=>h===a?{...f,...c}:f);e({paires:u})},r=()=>{t.paires.length>=8||e({paires:[...t.paires,{id:Pn("pair"),gauche:"",droite:""}]})},i=a=>{t.paires.length<=2||e({paires:t.paires.filter((c,u)=>u!==a)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Paires  relier (gauche  droite)"}),o.jsx("p",{className:"type-editor__hint",children:"Saisissez les correspondances correctes. La colonne droite sera mlange pour l'lve."}),o.jsxs("div",{className:"type-editor__relation-header",children:[o.jsx("span",{children:"Colonne A (gauche)"}),o.jsx("span",{}),o.jsx("span",{children:"Colonne B (droite)"}),o.jsx("span",{})]}),t.paires.map((a,c)=>o.jsxs("div",{className:"type-editor__relation-row",children:[o.jsx("div",{className:"type-editor__relation-cell",children:o.jsx(Ka,{value:a.gauche,onChange:u=>n(c,{gauche:u}),placeholder:`lment A${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("span",{className:"type-editor__relation-arrow",children:""}),o.jsx("div",{className:"type-editor__relation-cell",children:o.jsx(Ka,{value:a.droite,onChange:u=>n(c,{droite:u}),placeholder:`lment B${c+1}...`,minHeight:40,toolbar:["bold","italic","color"]})}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),disabled:t.paires.length<=2,children:""})]},a.id)),t.paires.length<8&&o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:r,children:"+ Ajouter une paire"})]})},gve=({data:t,onChange:e})=>{const n=()=>{e({...t,motsCles:[...t.motsCles,{mot:"",poids:1,obligatoire:!1}]})},r=(a,c)=>{const u=t.motsCles.map((f,h)=>h===a?{...f,...c}:f);e({...t,motsCles:u})},i=a=>{e({...t,motsCles:t.motsCles.filter((c,u)=>u!==a)})};return o.jsxs("div",{className:"type-editor",children:[o.jsx("label",{className:"type-editor__label",children:" Paramtres de l'essai"}),o.jsxs("div",{className:"type-editor__params-row",children:[o.jsxs("div",{className:"type-editor__param-inline",children:[o.jsx("label",{children:"Mots minimum :"}),o.jsx("input",{type:"number",value:t.nombreMotsMin||"",onChange:a=>e({...t,nombreMotsMin:Number(a.target.value)||void 0}),min:0,placeholder:"Ex: 50"})]}),o.jsxs("div",{className:"type-editor__param-inline",children:[o.jsx("label",{children:"Mots maximum :"}),o.jsx("input",{type:"number",value:t.nombreMotsMax||"",onChange:a=>e({...t,nombreMotsMax:Number(a.target.value)||void 0}),min:0,placeholder:"Ex: 500"})]})]}),o.jsxs("div",{className:"type-editor__field-inline",children:[o.jsx("label",{children:"Mode de correction :"}),o.jsxs("select",{value:t.correctionMode,onChange:a=>e({...t,correctionMode:a.target.value}),children:[o.jsx("option",{value:"manuelle",children:" Manuelle (par le prof)"}),o.jsx("option",{value:"mots_cles",children:" Par mots-cls (automatique)"}),o.jsx("option",{value:"semi_auto",children:" Semi-automatique (mots-cls + validation prof)"})]})]}),(t.correctionMode==="mots_cles"||t.correctionMode==="semi_auto")&&o.jsxs("div",{className:"type-editor__keywords",children:[o.jsx("label",{className:"type-editor__sub-label",children:"Mots-cls attendus"}),t.motsCles.map((a,c)=>o.jsxs("div",{className:"type-editor__keyword-row",children:[o.jsx("input",{type:"text",value:a.mot,onChange:u=>r(c,{mot:u.target.value}),placeholder:"Mot ou expression...",className:"type-editor__keyword-input"}),o.jsxs("select",{value:a.poids,onChange:u=>r(c,{poids:Number(u.target.value)}),className:"type-editor__keyword-weight",children:[o.jsx("option",{value:1,children:"Poids 1"}),o.jsx("option",{value:2,children:"Poids 2"}),o.jsx("option",{value:3,children:"Poids 3"}),o.jsx("option",{value:4,children:"Poids 4"}),o.jsx("option",{value:5,children:"Poids 5"})]}),o.jsxs("label",{className:"type-editor__keyword-required",children:[o.jsx("input",{type:"checkbox",checked:a.obligatoire,onChange:u=>r(c,{obligatoire:u.target.checked})}),o.jsx("span",{children:"Obligatoire"})]}),o.jsx("button",{type:"button",className:"type-editor__remove-btn",onClick:()=>i(c),children:""})]},c)),o.jsx("button",{type:"button",className:"type-editor__add-btn",onClick:n,children:"+ Ajouter un mot-cl"})]}),o.jsxs("div",{className:"type-editor__field-block",children:[o.jsx("label",{children:"Rponse modle (optionnel  pour le prof)"}),o.jsx(Ka,{value:t.reponseModele||"",onChange:a=>e({...t,reponseModele:a}),placeholder:"Saisissez une rponse modle...",minHeight:80})]})]})},XD=()=>{const{quizId:t}=dy(),e=Dr(),{currentUser:n}=Vn(),[r,i]=w.useState([]),[a,c]=w.useState(void 0),[u,f]=w.useState(!0),[h,p]=w.useState(null);return w.useEffect(()=>{(async()=>{try{f(!0);const y=await jl.getAll();if(i(y.map(x=>({id:x.id,nom:x.nom,classe:x.classe||""}))),t){const x=await MU(t);x?c(x):p("Quiz introuvable")}}catch(y){console.error("Erreur chargement donnes:",y),p(y.message||"Erreur de chargement")}finally{f(!1)}})()},[t]),u?o.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:o.jsx("p",{children:" Chargement..."})}):h?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsxs("p",{style:{color:"#dc2626"},children:[" ",h]}),o.jsx("button",{onClick:()=>e(-1),children:" Retour"})]}):o.jsx(uve,{existingQuiz:a?{...a,id:a.id}:void 0,disciplines:r,auteurId:n?.uid||"",onSave:g=>{alert(" Quiz sauvegard avec succs !"),e("/admin/quiz")},onCancel:()=>e(-1)})},vve=()=>{const t=Dr(),{currentUser:e}=Vn(),[n,r]=w.useState([]),[i,a]=w.useState(!0),[c,u]=w.useState(null),[f,h]=w.useState(null);w.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0),u(null);const j=await ove();r(j)}catch(j){console.error("Erreur chargement quiz:",j),u("Impossible de charger les quiz")}finally{a(!1)}},g=async j=>{try{await ave(j),r(N=>N.filter(A=>A.id!==j)),h(null)}catch(N){console.error("Erreur suppression:",N),alert("Erreur lors de la suppression : "+N.message)}},y=j=>{const N={};return j.questions.forEach(A=>{N[A.type]=(N[A.type]||0)+1}),Object.entries(N).map(([A,k])=>`${k} ${vd[A]||A}`).join(", ")},x=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"}):"",E=j=>j.questions.reduce((N,A)=>N+A.points,0);return o.jsxs("div",{style:{padding:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,color:"#1f2937",margin:0},children:" Quiz Avancs (Multi-types)"}),o.jsxs("p",{style:{color:"#6b7280",margin:"0.25rem 0 0",fontSize:"0.9rem"},children:[n.length," quiz cr",n.length!==1?"s":""]})]}),o.jsx("button",{onClick:()=>t("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Nouveau quiz avanc"})]}),c&&o.jsxs("div",{style:{padding:"1rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#991b1b",marginBottom:"1rem"},children:[" ",c,o.jsx("button",{onClick:p,style:{marginLeft:"1rem",padding:"0.3rem 0.8rem",background:"#fff",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:" Ressayer"})]}),i&&o.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#6b7280"},children:" Chargement des quiz..."}),!i&&n.length===0&&!c&&o.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h3",{style:{color:"#374151",marginBottom:"0.5rem"},children:"Aucun quiz avanc"}),o.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Crez votre premier quiz multi-types avec l'diteur riche !"}),o.jsx("button",{onClick:()=>t("/admin/quiz/nouveau"),style:{padding:"0.7rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Crer un quiz"})]}),!i&&n.length>0&&o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(j=>o.jsx("div",{style:{background:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",transition:"box-shadow 0.2s"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[o.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[o.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:700,color:"#1f2937",margin:0},children:j.titre}),j.isPremium&&o.jsx("span",{style:{padding:"0.15rem 0.5rem",background:"#fef3c7",color:"#92400e",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,border:"1px solid #fde68a"},children:" Premium"})]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem",marginBottom:"0.5rem"},children:[o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#eff6ff",color:"#1d4ed8",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.questions.length," question",j.questions.length!==1?"s":""]}),o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#f0fdf4",color:"#166534",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",E(j)," pts"]}),o.jsxs("span",{style:{padding:"0.2rem 0.6rem",background:"#fdf4ff",color:"#86198f",borderRadius:"12px",fontSize:"0.75rem",fontWeight:500},children:[" ",j.duree," min"]})]}),o.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Types : ",y(j)]}),o.jsxs("p",{style:{fontSize:"0.75rem",color:"#9ca3af",margin:"0.25rem 0 0"},children:["Cr le ",x(j.createdAt)]})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0,flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>t(`/quiz-avance/${j.id}`),title:"Tester le quiz",style:{padding:"0.5rem 0.9rem",background:"#f0fdf4",color:"#166534",border:"1px solid #bbf7d0",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Tester"}),o.jsx("button",{onClick:()=>t(`/admin/quiz/modifier/${j.id}`),title:"Modifier le quiz",style:{padding:"0.5rem 0.9rem",background:"#eff6ff",color:"#1d4ed8",border:"1px solid #bfdbfe",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Modifier"}),o.jsx("button",{onClick:()=>{const N=`${window.location.origin}/quiz-avance/${j.id}`;navigator.clipboard.writeText(N).then(()=>{alert(` Lien copi !

`+N+`

Partagez ce lien aux lves.`)})},title:"Copier le lien pour les lves",style:{padding:"0.5rem 0.9rem",background:"#fdf4ff",color:"#86198f",border:"1px solid #e9d5ff",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Lien"}),f===j.id?o.jsxs("div",{style:{display:"flex",gap:"0.3rem"},children:[o.jsx("button",{onClick:()=>g(j.id),style:{padding:"0.5rem 0.7rem",background:"#dc2626",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:" Confirmer"}),o.jsx("button",{onClick:()=>h(null),style:{padding:"0.5rem 0.7rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"0.8rem"},children:""})]}):o.jsx("button",{onClick:()=>h(j.id),title:"Supprimer le quiz",style:{padding:"0.5rem 0.9rem",background:"#fef2f2",color:"#991b1b",border:"1px solid #fecaca",borderRadius:"8px",cursor:"pointer",fontWeight:600,fontSize:"0.8rem"},children:""})]})]})},j.id))})]})},yve=({quiz:t,userId:e,onComplete:n,onQuit:r})=>{const i=w.useMemo(()=>{let P=[...t.questions];return t.melangerQuestions&&(P=P.sort(()=>Math.random()-.5)),P},[t]),[a,c]=w.useState(0),[u,f]=w.useState(new Map),[h,p]=w.useState(t.duree*60),[g,y]=w.useState(!1),[x,E]=w.useState(null),[j,N]=w.useState(!1),A=w.useRef(Date.now());w.useEffect(()=>{if(x)return;const P=setInterval(()=>{p(R=>R<=1?(clearInterval(P),$(),0):R-1)},1e3);return()=>clearInterval(P)},[x]);const k=P=>{const R=Math.floor(P/60),q=P%60;return`${R.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},O=i[a],C=w.useCallback((P,R)=>{f(q=>{const L=new Map(q),M=L.get(P)||{questionId:P,type:O.type};return L.set(P,{...M,...R}),L})},[O]),V=P=>{P>=0&&P<i.length&&c(P)},$=async()=>{N(!1),y(!0);try{const P=Array.from(u.values()),R=Math.round((Date.now()-A.current)/1e3),q=await cve(t,e,P,R);E(q),n?.(q)}catch(P){alert("Erreur lors de la soumission : "+P.message)}finally{y(!1)}},D=u.size;return x?o.jsx("div",{className:"quiz-player quiz-player--results",children:o.jsxs("div",{className:"quiz-results",children:[o.jsxs("div",{className:`quiz-results__header ${x.reussi?"quiz-results__header--success":"quiz-results__header--fail"}`,children:[o.jsx("div",{className:"quiz-results__emoji",children:x.reussi?"":""}),o.jsx("h2",{children:x.reussi?"Flicitations !":"Quiz termin"}),o.jsxs("div",{className:"quiz-results__score",children:[o.jsxs("span",{className:"quiz-results__note",children:[x.note20,"/20"]}),o.jsxs("span",{className:"quiz-results__detail",children:[x.score,"/",x.scoreMax," points"]})]}),o.jsxs("div",{className:"quiz-results__time",children:[" Temps : ",k(x.tempsEcoule)]}),x.correctionManuelle&&o.jsx("p",{className:"quiz-results__pending",children:" Ce quiz contient des questions  correction manuelle. Votre note finale pourra tre ajuste par le professeur."})]}),t.afficherCorrection&&o.jsxs("div",{className:"quiz-results__details",children:[o.jsx("h3",{children:" Dtail des rponses"}),i.map((P,R)=>{const q=x.detailsParQuestion.find(L=>L.questionId===P.id);return o.jsxs("div",{className:`quiz-results__question ${q?.isCorrect?"quiz-results__question--correct":q?.isPartiel?"quiz-results__question--partial":"quiz-results__question--wrong"}`,children:[o.jsxs("div",{className:"quiz-results__q-header",children:[o.jsxs("span",{children:["Q",R+1," "," ",o.jsxs("span",{style:{color:cy[P.type]},children:[ly[P.type]," ",vd[P.type]]})]}),o.jsxs("span",{className:"quiz-results__q-score",children:[q?.pointsObtenus||0,"/",q?.pointsMax||P.points," pts",q?.isCorrect&&" ",q?.isPartiel&&" ",!q?.isCorrect&&!q?.isPartiel&&" "]})]}),o.jsx("div",{className:"quiz-results__q-enonce",dangerouslySetInnerHTML:{__html:P.enonce}}),P.explication&&o.jsxs("div",{className:"quiz-results__q-explanation",children:[o.jsx("strong",{children:" Explication :"}),o.jsx("div",{dangerouslySetInnerHTML:{__html:P.explication}})]})]},P.id)})]}),o.jsx("div",{className:"quiz-results__actions",children:o.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:r,children:"Retour au tableau de bord"})})]})}):o.jsxs("div",{className:"quiz-player",children:[o.jsxs("div",{className:"quiz-player__topbar",children:[o.jsxs("div",{className:"quiz-player__info",children:[o.jsx("span",{className:"quiz-player__title",children:t.titre}),o.jsxs("span",{className:"quiz-player__progress",children:["Question ",a+1,"/",i.length]})]}),o.jsxs("div",{className:"quiz-player__topbar-right",children:[o.jsxs("span",{className:`quiz-player__timer ${h<60?"quiz-player__timer--danger":h<300?"quiz-player__timer--warning":""}`,children:[" ",k(h)]}),o.jsxs("span",{className:"quiz-player__answered",children:[D,"/",i.length," rpondue",D>1?"s":""]})]})]}),o.jsx("div",{className:"quiz-player__progress-bar",children:o.jsx("div",{className:"quiz-player__progress-fill",style:{width:`${(a+1)/i.length*100}%`}})}),o.jsxs("div",{className:"quiz-player__question-area",children:[o.jsxs("div",{className:"quiz-player__question-meta",children:[o.jsxs("span",{className:"quiz-player__type-badge",style:{backgroundColor:cy[O.type]},children:[ly[O.type]," ",vd[O.type]]}),o.jsxs("span",{className:"quiz-player__points",children:[O.points," point",O.points>1?"s":""]})]}),o.jsx("div",{className:"quiz-player__enonce",dangerouslySetInnerHTML:{__html:O.enonce}}),o.jsxs("div",{className:"quiz-player__answer-area",children:[O.type==="qcm_unique"&&o.jsx(bve,{question:O,reponse:u.get(O.id),onUpdate:P=>C(O.id,P),melangerOptions:t.melangerOptions}),O.type==="qcm_multiple"&&o.jsx(xve,{question:O,reponse:u.get(O.id),onUpdate:P=>C(O.id,P),melangerOptions:t.melangerOptions}),O.type==="drag_drop"&&o.jsx(_ve,{question:O,reponse:u.get(O.id),onUpdate:P=>C(O.id,P)}),O.type==="mise_en_relation"&&o.jsx(wve,{question:O,reponse:u.get(O.id),onUpdate:P=>C(O.id,P)}),O.type==="essai"&&o.jsx(jve,{question:O,reponse:u.get(O.id),onUpdate:P=>C(O.id,P)})]})]}),o.jsxs("div",{className:"quiz-player__nav",children:[o.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>V(a-1),disabled:a===0,children:" Prcdent"}),o.jsx("div",{className:"quiz-player__pagination",children:i.map((P,R)=>o.jsx("button",{className:`quiz-player__page-dot ${R===a?"quiz-player__page-dot--current":""} ${u.has(P.id)?"quiz-player__page-dot--answered":""}`,onClick:()=>V(R),title:`Question ${R+1}`,children:R+1},P.id))}),a<i.length-1?o.jsx("button",{className:"quiz-player__btn quiz-player__btn--primary",onClick:()=>V(a+1),children:"Suivant "}):o.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:()=>N(!0),disabled:g,children:g?" Envoi...":" Soumettre le quiz"})]}),j&&o.jsx("div",{className:"quiz-player__modal-overlay",children:o.jsxs("div",{className:"quiz-player__modal",children:[o.jsx("h3",{children:"Soumettre le quiz ?"}),o.jsxs("p",{children:["Vous avez rpondu  ",o.jsx("strong",{children:D})," question",D>1?"s":""," sur"," ",o.jsx("strong",{children:i.length}),"."]}),D<i.length&&o.jsxs("p",{className:"quiz-player__modal-warning",children:[" ",i.length-D," question",i.length-D>1?"s":""," sans rponse !"]}),o.jsxs("div",{className:"quiz-player__modal-actions",children:[o.jsx("button",{className:"quiz-player__btn quiz-player__btn--secondary",onClick:()=>N(!1),children:"Continuer le quiz"}),o.jsx("button",{className:"quiz-player__btn quiz-player__btn--submit",onClick:$,children:"Confirmer la soumission"})]})]})})]})},bve=({question:t,reponse:e,onUpdate:n,melangerOptions:r})=>{const i=t.typeData,a=w.useMemo(()=>r?[...i.options].sort(()=>Math.random()-.5):i.options,[i.options,r]);return o.jsx("div",{className:"player-qcm",children:a.map(c=>o.jsxs("label",{className:`player-qcm__option ${e?.selectedOptionId===c.id?"player-qcm__option--selected":""}`,children:[o.jsx("input",{type:"radio",name:`q_${t.id}`,checked:e?.selectedOptionId===c.id,onChange:()=>n({selectedOptionId:c.id})}),o.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:c.texte}})]},c.id))})},xve=({question:t,reponse:e,onUpdate:n,melangerOptions:r})=>{const i=t.typeData,a=w.useMemo(()=>r?[...i.options].sort(()=>Math.random()-.5):i.options,[i.options,r]),c=e?.selectedOptionIds||[],u=f=>{const h=c.includes(f)?c.filter(p=>p!==f):[...c,f];n({selectedOptionIds:h})};return o.jsxs("div",{className:"player-qcm",children:[o.jsx("p",{className:"player-qcm__hint",children:"Plusieurs rponses possibles"}),a.map(f=>o.jsxs("label",{className:`player-qcm__option ${c.includes(f.id)?"player-qcm__option--selected":""}`,children:[o.jsx("input",{type:"checkbox",checked:c.includes(f.id),onChange:()=>u(f.id)}),o.jsx("div",{className:"player-qcm__text",dangerouslySetInnerHTML:{__html:f.texte}})]},f.id))]})},_ve=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,[i,a]=w.useState(()=>e?.ordrePropose?e.ordrePropose.map(y=>r.items.find(x=>x.id===y)).filter(Boolean):[...r.items].sort(()=>Math.random()-.5)),[c,u]=w.useState(null);w.useEffect(()=>{n({ordrePropose:i.map(y=>y.id)})},[i]);const f=y=>{u(y)},h=(y,x)=>{if(y.preventDefault(),c===null||c===x)return;const E=[...i],[j]=E.splice(c,1);E.splice(x,0,j),a(E),u(x)},p=()=>{u(null)},g=(y,x)=>{const E=x==="up"?y-1:y+1;if(E<0||E>=i.length)return;const j=[...i];[j[y],j[E]]=[j[E],j[y]],a(j)};return o.jsxs("div",{className:"player-dragdrop",children:[o.jsx("p",{className:"player-dragdrop__consigne",children:r.consigneOrdre}),o.jsx("div",{className:"player-dragdrop__list",children:i.map((y,x)=>o.jsxs("div",{className:`player-dragdrop__item ${c===x?"player-dragdrop__item--dragging":""}`,draggable:!0,onDragStart:()=>f(x),onDragOver:E=>h(E,x),onDragEnd:p,children:[o.jsx("span",{className:"player-dragdrop__handle",children:""}),o.jsx("span",{className:"player-dragdrop__number",children:x+1}),o.jsx("div",{className:"player-dragdrop__text",dangerouslySetInnerHTML:{__html:y.texte}}),o.jsxs("div",{className:"player-dragdrop__mobile-btns",children:[o.jsx("button",{type:"button",onClick:()=>g(x,"up"),disabled:x===0,children:""}),o.jsx("button",{type:"button",onClick:()=>g(x,"down"),disabled:x===i.length-1,children:""})]})]},y.id))})]})},wve=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,i=w.useMemo(()=>[...r.paires].sort(()=>Math.random()-.5),[r.paires]),[a,c]=w.useState(e?.relationsProposees||{}),[u,f]=w.useState(null);w.useEffect(()=>{n({relationsProposees:a})},[a]);const h=x=>{f(x)},p=x=>{u&&(c(E=>({...E,[u]:x})),f(null))},g=x=>{c(E=>{const j={...E};return delete j[x],j})},y=new Set(Object.values(a));return o.jsxs("div",{className:"player-relation",children:[o.jsx("p",{className:"player-relation__hint",children:"Cliquez sur un lment  gauche puis sur son correspondant  droite"}),o.jsxs("div",{className:"player-relation__columns",children:[o.jsxs("div",{className:"player-relation__col",children:[o.jsx("h4",{className:"player-relation__col-title",children:"Colonne A"}),r.paires.map(x=>o.jsxs("div",{className:`player-relation__item player-relation__item--left ${u===x.id?"player-relation__item--selected":""} ${a[x.id]?"player-relation__item--matched":""}`,onClick:()=>{a[x.id]?g(x.id):h(x.id)},children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:x.gauche}}),a[x.id]&&o.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]}),o.jsxs("div",{className:"player-relation__col",children:[o.jsx("h4",{className:"player-relation__col-title",children:"Colonne B"}),i.map(x=>o.jsxs("div",{className:`player-relation__item player-relation__item--right ${y.has(x.id)?"player-relation__item--matched":""} ${u&&!y.has(x.id)?"player-relation__item--clickable":""}`,onClick:()=>{u&&!y.has(x.id)&&p(x.id)},children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:x.droite}}),y.has(x.id)&&o.jsx("span",{className:"player-relation__linked",children:""})]},x.id))]})]})]})},jve=({question:t,reponse:e,onUpdate:n})=>{const r=t.typeData,[i,a]=w.useState(e?.texteReponse||""),c=i.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(Boolean).length;return w.useEffect(()=>{n({texteReponse:i})},[i]),o.jsxs("div",{className:"player-essai",children:[o.jsxs("div",{className:"player-essai__info",children:[r.nombreMotsMin&&o.jsxs("span",{className:c<r.nombreMotsMin?"player-essai__warning":"",children:["Minimum : ",r.nombreMotsMin," mots"]}),r.nombreMotsMax&&o.jsxs("span",{className:c>r.nombreMotsMax?"player-essai__warning":"",children:["Maximum : ",r.nombreMotsMax," mots"]}),o.jsxs("span",{className:"player-essai__count",children:[c," mot",c>1?"s":""]})]}),o.jsx("textarea",{className:"player-essai__textarea",value:i,onChange:u=>a(u.target.value),placeholder:"Rdigez votre rponse ici...",rows:10})]})},Eve=()=>{const{quizId:t}=dy(),e=Dr(),{currentUser:n}=Vn(),[r,i]=w.useState(null),[a,c]=w.useState(!0),[u,f]=w.useState(null);return w.useEffect(()=>{(async()=>{if(!t){f("ID du quiz manquant"),c(!1);return}try{const p=await MU(t);if(!p){f("Quiz introuvable");return}if(p.isPremium&&!n?.isPremium){f("Ce quiz est rserv aux abonns Premium");return}i(p)}catch(p){console.error("Erreur chargement quiz:",p),f(p.message||"Impossible de charger le quiz")}finally{c(!1)}})()},[t,n]),a?o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),o.jsx("p",{children:"Chargement du quiz..."})]}):u?o.jsx("div",{style:{textAlign:"center",padding:"3rem",maxWidth:"500px",margin:"2rem auto"},children:o.jsxs("div",{style:{padding:"2rem",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px"},children:[o.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),o.jsx("p",{style:{color:"#991b1b",fontWeight:600,marginBottom:"1rem"},children:u}),u.includes("Premium")&&o.jsx("button",{onClick:()=>e("/premium"),style:{padding:"0.6rem 1.5rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"0.5rem",fontWeight:600},children:" Devenir Premium"}),o.jsx("button",{onClick:()=>e(-1),style:{padding:"0.6rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:" Retour"})]})}):r?o.jsx(yve,{quiz:r,userId:n?.uid||"",onComplete:h=>{console.log(" Quiz termin  Note:",h.note20,"/20")},onQuit:()=>e("/dashboard")}):o.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[o.jsx("p",{children:"Quiz introuvable"}),o.jsx("button",{onClick:()=>e(-1),children:" Retour"})]})},Nve=()=>o.jsx(aW,{children:o.jsxs(v8,{children:[o.jsx(tn,{path:"/",element:o.jsx(Ps,{children:o.jsx(BY,{})})}),o.jsx(tn,{path:"/disciplines",element:o.jsx(Ps,{children:o.jsx(HY,{})})}),o.jsx(tn,{path:"/disciplines/:id",element:o.jsx(Ps,{children:o.jsx(QY,{})})}),o.jsx(tn,{path:"/premium",element:o.jsx(Ps,{children:o.jsx(XY,{})})}),o.jsx(tn,{path:"/connexion",element:o.jsx($Y,{})}),o.jsx(tn,{path:"/inscription",element:o.jsx(FY,{})}),o.jsx(tn,{path:"/admin",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"dashboard",children:o.jsx(ZY,{})})})}),o.jsx(tn,{path:"/admin/disciplines",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"disciplines",children:o.jsx(eX,{})})})}),o.jsx(tn,{path:"/admin/chapitres",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"chapitres",children:o.jsx(tX,{})})})}),o.jsx(tn,{path:"/admin/ressources",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"ressources",children:o.jsx(nX,{})})})}),o.jsx(tn,{path:"/admin/quiz",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"quiz",children:o.jsx(lX,{})})})}),o.jsx(tn,{path:"/admin/quiz/nouveau",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"quiz",children:o.jsx(XD,{})})})}),o.jsx(tn,{path:"/admin/quiz/modifier/:quizId",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"quiz",children:o.jsx(XD,{})})})}),o.jsx(tn,{path:"/admin/quiz-avance",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"quiz",children:o.jsx(vve,{})})})}),o.jsx(tn,{path:"/quiz-avance/:quizId",element:o.jsx(Ps,{children:o.jsx(Eve,{})})}),o.jsx(tn,{path:"/admin/utilisateurs",element:o.jsx(wa,{children:o.jsx(ja,{currentPage:"utilisateurs",children:o.jsx(gX,{})})})}),o.jsx(tn,{path:"/eleve/dashboard",element:o.jsx(Ps,{children:o.jsx(Gge,{})})}),o.jsx(tn,{path:"/eleve/suivi",element:o.jsx(Ps,{children:o.jsx(Kge,{})})}),o.jsx(tn,{path:"/quiz/:quizId",element:o.jsx(Ps,{children:o.jsx(OX,{})})}),o.jsx(tn,{path:"/parent/dashboard",element:o.jsx(CE,{allowedRoles:["parent","admin"],children:o.jsx(Ps,{children:o.jsx(Jge,{})})})}),o.jsx(tn,{path:"/prof/dashboard",element:o.jsx(oW,{children:o.jsx(Ps,{children:o.jsx(Xge,{})})})}),o.jsx(tn,{path:"*",element:o.jsx(p8,{to:"/",replace:!0})})]})}),zU=document.getElementById("root");if(!zU)throw new Error("L'lment #root n'existe pas");const Sve=EV.createRoot(zU);Sve.render(o.jsx(JD.StrictMode,{children:o.jsx(E8,{children:o.jsx(Nve,{})})}));
//# sourceMappingURL=index-f40141_d.js.map
