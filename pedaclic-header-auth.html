<!-- √Ä ajouter dans votre fichier assets/js/components/header.js ou directement dans le header -->

<style>
/* Styles pour les boutons d'authentification */
.auth-buttons {
    display: flex;
    align-items: center;
    gap: 12px;
}

.btn-login {
    padding: 8px 20px;
    background: transparent;
    border: 2px solid #667eea;
    color: #667eea;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
}

.btn-login:hover {
    background: #667eea;
    color: white;
}

.btn-signup {
    padding: 8px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    color: white;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
}

.btn-signup:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}

.user-menu {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
}

.user-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    cursor: pointer;
}

.user-email {
    font-size: 14px;
    color: #64748b;
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.btn-logout {
    padding: 8px 16px;
    background: #ef4444;
    border: none;
    color: white;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-logout:hover {
    background: #dc2626;
}

.premium-badge-nav {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: bold;
    text-transform: uppercase;
}
</style>

<!-- Section d'authentification (√† ajouter dans votre navigation) -->
<div id="auth-section" class="auth-buttons">
    <!-- Afficher si non connect√© -->
    <div id="logged-out-buttons" style="display: none;">
        <a href="auth.html" class="btn-login">Connexion</a>
        <a href="auth.html" class="btn-signup">S'inscrire</a>
    </div>
    
    <!-- Afficher si connect√© -->
    <div id="logged-in-menu" class="user-menu" style="display: none;">
        <span id="user-email" class="user-email"></span>
        <span id="premium-badge" class="premium-badge-nav" style="display: none;">‚≠ê Premium</span>
        <div class="user-avatar" id="user-avatar">üë§</div>
        <button onclick="handleLogout()" class="btn-logout">D√©connexion</button>
    </div>
</div>

<script>
// Script d'authentification pour le header
(function() {
    // Configuration Firebase (si pas d√©j√† initialis√©e)
    if (!firebase.apps.length) {
        const firebaseConfig = {
            apiKey: "AIzaSyDgk_1graNBFkIURTJnyLZTZ1nyxi7slUo",
            authDomain: "pedaclic.firebaseapp.com",
            projectId: "pedaclic",
            storageBucket: "pedaclic.firebasestorage.app",
            messagingSenderId: "863649621890",
            appId: "1:863649621890:web:6ab56a8c8db111e3a9119b",
            measurementId: "G-20EGFVEM5M"
        };
        firebase.initializeApp(firebaseConfig);
    }
    
    const auth = firebase.auth();
    const db = firebase.firestore();
    
    // Surveiller l'√©tat d'authentification
    auth.onAuthStateChanged(async (user) => {
        const loggedOutButtons = document.getElementById('logged-out-buttons');
        const loggedInMenu = document.getElementById('logged-in-menu');
        const userEmailSpan = document.getElementById('user-email');
        const userAvatar = document.getElementById('user-avatar');
        const premiumBadge = document.getElementById('premium-badge');
        
        if (user) {
            // Utilisateur connect√©
            loggedOutButtons.style.display = 'none';
            loggedInMenu.style.display = 'flex';
            userEmailSpan.textContent = user.email;
            
            // Afficher initiale dans l'avatar
            const initial = user.email.charAt(0).toUpperCase();
            userAvatar.textContent = initial;
            
            // V√©rifier le statut Premium
            try {
                const userDoc = await db.collection('users').doc(user.uid).get();
                if (userDoc.exists && userDoc.data().isPremium) {
                    premiumBadge.style.display = 'inline-block';
                }
            } catch (error) {
                console.error('Erreur v√©rification Premium:', error);
            }
        } else {
            // Utilisateur non connect√©
            loggedOutButtons.style.display = 'flex';
            loggedInMenu.style.display = 'none';
        }
    });
})();

// Fonction de d√©connexion
function handleLogout() {
    if (confirm('Voulez-vous vraiment vous d√©connecter ?')) {
        firebase.auth().signOut().then(() => {
            window.location.href = 'index.html';
        }).catch((error) => {
            console.error('Erreur de d√©connexion:', error);
            alert('Erreur lors de la d√©connexion');
        });
    }
}
</script>