<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Premium - Pedaclic</title>
    <link rel="stylesheet" href="assets/css/design-system.css">
    <style>
        :root {
            --primary: #4F46E5;
            --success: #10B981;
            --danger: #EF4444;
            --neutral-100: #F3F4F6;
            --neutral-800: #1F2937;
        }

        body { background: var(--neutral-50); font-family: 'Inter', sans-serif; }

        .quiz-wrapper { max-width: 800px; margin: 40px auto; padding: 20px; }

        /* Style des s√©lecteurs de niveaux et mati√®res */
        .quiz-nav {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        select {
            padding: 12px;
            border-radius: 12px;
            border: 2px solid #E5E7EB;
            font-size: 1rem;
            cursor: pointer;
            outline: none;
            transition: border-color 0.3s;
        }

        select:focus { border-color: var(--primary); }

        /* Carte de Quiz */
        .quiz-card {
            background: white;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .progress-bar {
            position: absolute;
            top: 0; left: 0; height: 6px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .question-text {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--neutral-900);
            margin-bottom: 25px;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-item {
            padding: 16px 24px;
            border: 2px solid var(--neutral-100);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
        }

        .option-item:hover {
            border-color: var(--primary);
            background: #EEF2FF;
        }

        .option-item.correct {
            background: #D1FAE5;
            border-color: var(--success);
            color: #065F46;
        }

        .option-item.wrong {
            background: #FEE2E2;
            border-color: var(--danger);
            color: #991B1B;
        }

        /* Score et Feedback */
        .score-display {
            text-align: center;
            display: none;
        }

        .btn-next {
            margin-top: 30px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            display: none;
        }
    </style>
</head>
<body>

<div class="quiz-wrapper">
    <div class="text-center" style="margin-bottom: 30px;">
        <h1 style="font-size: 2.5rem; color: var(--neutral-900);">Espace Quiz Premium üá∏üá≥</h1>
        <p style="color: var(--neutral-600);">Validez vos acquis avec nos experts</p>
    </div>

    <div class="quiz-nav">
        <select id="discipline">
            <option value="fr">Fran√ßais</option>
            <option value="maths">Math√©matiques</option>
            <option value="svt">SVT</option>
            <option value="pc">Physique-Chimie</option>
            <option value="philo">Philosophie</option>
        </select>
        <select id="level">
            <option value="facile">Niveau : Facile</option>
            <option value="moyen">Niveau : Moyen</option>
            <option value="defi">Niveau : D√©fi</option>
        </select>
    </div>

    <div class="quiz-card" id="quiz-card">
        <div class="progress-bar" id="progress"></div>
        <div id="quiz-content">
            </div>
        <button id="next-btn" class="btn-next" onclick="nextQuestion()">Question Suivante</button>
        
        <div id="result-area" class="score-display">
            <h2 style="font-size: 3rem;" id="final-score">0/12</h2>
            <p id="feedback-text"></p>
            <button class="btn-next" style="display:inline-block" onclick="location.reload()">Recommencer</button>
        </div>
    </div>
</div>

<script>
/** * BASE DE DONN√âES DES QUIZ (Structure pour 12 questions par module)
 * J'illustre ici avec des exemples cl√©s du programme s√©n√©galais.
 */

 const database = {
    fr: {
        defi: [
            { q: "Dans 'L'√âtranger' de Camus, quelle est la raison invoqu√©e par Meursault pour le meurtre ?", o: ["La vengeance", "√Ä cause du soleil", "La l√©gitime d√©fense"], c: 1 },
            { q: "Quel po√®te a √©crit : 'L'homme y passe √† travers des for√™ts de symboles' ?", o: ["Baudelaire", "Rimbaud", "Verlaine"], c: 0 },
            { q: "Identifiez l'anaphore dans un texte : c'est une r√©p√©tition...", o: ["En fin de phrase", "En d√©but de phrase", "Au milieu"], c: 1 },
            { q: "Qui a √©crit 'L'Aventure Ambigu√´' ?", o: ["Cheikh Hamidou Kane", "Camara Laye", "Mongo Beti"], c: 0 },
            { q: "Le mouvement de la Pl√©iade visait √†...", o: ["Simplifier la langue", "Enrichir la langue fran√ßaise", "Supprimer les rimes"], c: 1 },
            { q: "Quelle est la fonction de 'que' dans : 'Le livre que je lis' ?", o: ["Sujet", "COD", "Compl√©ment de nom"], c: 1 },
            { q: "Le 'Vantardisme' est un trait caract√©ristique de quelle √©pop√©e ?", o: ["L'Odyss√©e", "L'√âpop√©e de Soundiata", "Le Cid"], c: 1 },
            { q: "Qu'est-ce qu'une focalisation externe ?", o: ["Le narrateur sait tout", "Le narrateur est t√©moin neutre", "Le narrateur est le h√©ros"], c: 1 },
            { q: "L'≈ìuvre 'Une si longue lettre' est un roman...", o: ["√âpistolaire", "Autobiographique", "Historique"], c: 0 },
            { q: "Quel est le mode de 'que nous sachions' ?", o: ["Indicatif", "Subjonctif", "Conditionnel"], c: 1 },
            { q: "Laquelle de ces pi√®ces est une trag√©die de Racine ?", o: ["Le Tartuffe", "Ph√®dre", "L'Avare"], c: 1 },
            { q: "Qui est le chef de file du Romantisme en France ?", o: ["Victor Hugo", "Stendhal", "Balzac"], c: 0 }
        ]
    },
    philo: {
        defi: [
            { q: "Pour Marx, quelle est l'infrastructure de la soci√©t√© ?", o: ["Le Droit", "L'√âconomie", "La Religion"], c: 1 },
            { q: "Quelle est la c√©l√®bre devise de l'Existentialisme de Sartre ?", o: ["Je pense donc je suis", "L'existence pr√©c√®de l'essence", "Tout ce qui est r√©el est rationnel"], c: 1 },
            { q: "Selon Freud, quelle partie du psychisme g√®re les pulsions ?", o: ["Le Moi", "Le Surmoi", "Le √áa"], c: 2 },
            { q: "Qui a th√©oris√© la 'rupture √©pist√©mologique' ?", o: ["Gaston Bachelard", "Karl Popper", "Auguste Comte"], c: 0 },
            { q: "L'all√©gorie de la caverne de Platon traite de...", o: ["La politique", "La connaissance et l'√©ducation", "La morale"], c: 1 },
            { q: "Quel philosophe pr√¥ne le 'retour aux choses m√™mes' ?", o: ["Husserl", "Kant", "Nietzsche"], c: 0 },
            { q: "Pour Rousseau, l'homme est naturellement...", o: ["Mauvais", "Bon", "Neutre"], c: 1 },
            { q: "Qu'est-ce que l'imp√©ratif cat√©gorique chez Kant ?", o: ["Un conseil", "Une loi morale universelle", "Un d√©sir"], c: 1 },
            { q: "Qui a √©crit 'Le Discours sur la m√©thode' ?", o: ["Pascal", "Descartes", "Spinoza"], c: 1 },
            { q: "Laquelle de ces notions est centrale chez Nietzsche ?", o: ["La Volont√© de puissance", "Le Contrat Social", "L'Ali√©nation"], c: 0 },
            { q: "Pour Kierkegaard, l'angoisse est li√©e √†...", o: ["La mort", "La libert√©", "La douleur"], c: 1 },
            { q: "Qui est l'auteur de 'L'Abolition de l'Homme' ?", o: ["C.S. Lewis", "Sartre", "Aron"], c: 0 }
        ]
    },
    maths: {
        defi: [
            { q: "Quelle est la limite de (sin x)/x quand x tend vers 0 ?", o: ["0", "1", "L'infini"], c: 1 },
            { q: "La primitive de 1/x est...", o: ["ln|x|", "exp(x)", "-1/x¬≤"], c: 0 },
            { q: "Si z = 1 + i, quel est son argument ?", o: ["œÄ/2", "œÄ/4", "3œÄ/4"], c: 1 },
            { q: "Deux vecteurs sont colin√©aires si leur produit vectoriel est...", o: ["√âgal √† 1", "Nul", "√âgal √† leur norme"], c: 1 },
            { q: "Le discriminant Œî est n√©gatif, l'√©quation du second degr√© a...", o: ["2 racines r√©elles", "0 racine r√©elle", "1 racine double"], c: 1 },
            { q: "Quelle est la d√©riv√©e de e^(2x) ?", o: ["e^(2x)", "2e^(2x)", "0.5e^(2x)"], c: 1 },
            { q: "L'int√©grale de 0 √† 1 de x dx est...", o: ["1", "0.5", "2"], c: 1 },
            { q: "Combien vaut log(100) en base 10 ?", o: ["1", "2", "10"], c: 1 },
            { q: "Dans un rep√®re, si u.v = 0, les vecteurs sont...", o: ["Parall√®les", "Orthogonaux", "Identiques"], c: 1 },
            { q: "La suite Un = 3n + 2 est...", o: ["G√©om√©trique", "Arithm√©tique", "Constante"], c: 1 },
            { q: "L'aire sous la courbe d'une fonction positive est donn√©e par...", o: ["Sa d√©riv√©e", "Son int√©grale", "Sa limite"], c: 1 },
            { q: "Dans une loi binomiale B(n, p), l'esp√©rance est...", o: ["np", "npq", "p/n"], c: 0 }
        ]
    },
    svt: {
        defi: [
            { q: "Quel est le g√©notype d'un individu de groupe O ?", o: ["AO", "BO", "OO"], c: 2 },
            { q: "La m√©iose produit combien de cellules filles ?", o: ["2", "4", "8"], c: 1 },
            { q: "O√π se d√©roule la f√©condation chez la femme ?", o: ["L'ut√©rus", "Les trompes", "Les ovaires"], c: 1 },
            { q: "L'hormone hyperglyc√©miante produite par le pancr√©as est...", o: ["L'insuline", "Le glucagon", "L'adr√©naline"], c: 1 },
            { q: "Quelle est l'unit√© de base du syst√®me nerveux ?", o: ["Le n√©phron", "Le neurone", "L'axone"], c: 1 },
            { q: "La synth√®se des prot√©ines a lieu dans...", o: ["Le noyau", "Les ribosomes", "Les mitochondries"], c: 1 },
            { q: "Un s√©isme est caus√© par la rupture brutale de...", o: ["Magma", "Failles", "Crat√®res"], c: 1 },
            { q: "La phase G1 du cycle cellulaire correspond √†...", o: ["La mitose", "La croissance cellulaire", "La r√©plication de l'ADN"], c: 1 },
            { q: "Quel organite contient l'information g√©n√©tique ?", o: ["Le cytoplasme", "Le noyau", "La vacuole"], c: 1 },
            { q: "Le SIDA s'attaque principalement aux...", o: ["H√©maties", "Lymphocytes T4", "Plaquettes"], c: 1 },
            { q: "La d√©rive des continents a √©t√© propos√©e par...", o: ["Darwin", "Wegener", "Newton"], c: 1 },
            { q: "L'arc r√©flexe m√©dullaire passe par...", o: ["Le cerveau", "La moelle √©pini√®re", "Le c≈ìur"], c: 1 }
        ]
    },
    pc: {
        defi: [
            { q: "Quelle est l'unit√© de la constante de Planck ?", o: ["Joule", "J.s", "Watt"], c: 1 },
            { q: "Une solution de pH 3 est...", o: ["Acide", "Basique", "Neutre"], c: 0 },
            { q: "La vitesse de la lumi√®re est d'environ...", o: ["300 000 km/s", "3 000 km/s", "30 000 km/s"], c: 0 },
            { q: "La loi de gravitation universelle a √©t√© √©tablie par...", o: ["Einstein", "Newton", "Galil√©e"], c: 1 },
            { q: "Un alcane √† 3 atomes de carbone s'appelle...", o: ["M√©thane", "√âthane", "Propane"], c: 2 },
            { q: "L'√©nergie cin√©tique se calcule par...", o: ["mgh", "1/2 mv¬≤", "F x d"], c: 1 },
            { q: "Quel est le symbole chimique de l'Or ?", o: ["Ag", "Fe", "Au"], c: 2 },
            { q: "Le passage de l'√©tat solide √† l'√©tat gazeux est la...", o: ["Fusion", "Sublimation", "Condensation"], c: 1 },
            { q: "La r√©sistance √©lectrique s'exprime en...", o: ["Volt", "Amp√®re", "Ohm"], c: 2 },
            { q: "Quelle est la charge d'un √©lectron ?", o: ["Positive", "N√©gative", "Neutre"], c: 1 },
            { q: "La pouss√©e d'Archim√®de s'exerce dans...", o: ["Le vide", "Les fluides", "Les solides"], c: 1 },
            { q: "Le fer r√©agit avec l'acide chlorhydrique pour donner du...", o: ["Dioxyde de carbone", "Dihydrog√®ne", "Dioxyg√®ne"], c: 1 }
        ]
    }
};

let currentQ = 0;
let score = 0;
let activeQuestions = [];

function startQuiz() {
    const disc = document.getElementById('discipline').value;
    const lvl = document.getElementById('level').value;
    activeQuestions = database[disc][lvl];
    currentQ = 0;
    score = 0;
    document.getElementById('result-area').style.display = 'none';
    document.getElementById('quiz-content').style.display = 'block';
    showQuestion();
}

function showQuestion() {
    const q = activeQuestions[currentQ];
    const progress = ((currentQ) / activeQuestions.length) * 100;
    document.getElementById('progress').style.width = progress + "%";
    
    let html = `<div class="question-text">${currentQ + 1}. ${q.q}</div><div class="options-list">`;
    q.o.forEach((opt, i) => {
        html += `<div class="option-item" onclick="checkAnswer(this, ${i}, ${q.c})">${opt}</div>`;
    });
    html += `</div>`;
    document.getElementById('quiz-content').innerHTML = html;
    document.getElementById('next-btn').style.display = 'none';
}

function checkAnswer(el, selected, correct) {
    const items = document.querySelectorAll('.option-item');
    items.forEach(item => item.style.pointerEvents = 'none'); // Bloquer les clics

    if(selected === correct) {
        el.classList.add('correct');
        score++;
    } else {
        el.classList.add('wrong');
        items[correct].classList.add('correct');
    }
    document.getElementById('next-btn').style.display = 'block';
}

function nextQuestion() {
    currentQ++;
    if(currentQ < activeQuestions.length) {
        showQuestion();
    } else {
        showResult();
    }
}

function showResult() {
    document.getElementById('quiz-content').style.display = 'none';
    document.getElementById('next-btn').style.display = 'none';
    document.getElementById('progress').style.width = "100%";
    
    const res = document.getElementById('result-area');
    res.style.display = 'block';
    document.getElementById('final-score').innerText = `${score} / ${activeQuestions.length}`;
    
    // 1. D√©termination du message de base
    let msg = "";
    if(score === activeQuestions.length) msg = "F√©licitations ! Un vrai g√©nie Pedaclic ! üèÜ";
    else if(score >= activeQuestions.length/2) msg = "Bien jou√© ! Continuez ainsi. üëç";
    else msg = "Besoin de r√©vision ? Relisez vos cours Premium. üìö";

    // 2. SYST√àME DE RECORD (Ce que vous ajoutez)
    const disc = document.getElementById('discipline').value;
    const lvl = document.getElementById('level').value;
    const recordKey = `record_${disc}_${lvl}`;
    const oldRecord = localStorage.getItem(recordKey) || 0;

    if (score > oldRecord) {
        localStorage.setItem(recordKey, score);
        msg += `<br><strong style="color:var(--success)">üåü Nouveau Record Personnel !</strong>`;
    } else {
        msg += `<br><span style="color:var(--neutral-600)">Votre record actuel sur ce module : ${oldRecord}/${activeQuestions.length}</span>`;
    }
    
    // 3. Affichage final
    document.getElementById('feedback-text').innerHTML = msg;
}

// Event Listeners
document.getElementById('discipline').addEventListener('change', startQuiz);
document.getElementById('level').addEventListener('change', startQuiz);

// Lancement initial
window.onload = startQuiz;
</script>
</body>
</html>