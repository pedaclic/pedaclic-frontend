<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mes Cours - PedaClic</title>
    <link rel="stylesheet" href="css/premium.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
</head>
<body>
    <div id="student-content"></div>
    
    <script src="js/firebase-config.js"></script>
    <script>
    firebase.auth().onAuthStateChanged(async (user) => {
      if (user) {
        // Récupérer contenus publiés
        const contents = await firebase.firestore()
          .collection('published_contents')
          .where('published', '==', true)
          .orderBy('publishedAt', 'desc')
          .get();
        
        const html = contents.docs.map(doc => {
          const data = doc.data();
          return `
            <div class="content-card">
              <h3>${data.title}</h3>
              <p>${data.description}</p>
              <div>${data.content}</div>
            </div>
          `;
        }).join('');
        
        document.getElementById('student-content').innerHTML = html;
      }
    });
    </script>
</body>
</html>
